var zI=s=>{throw TypeError(s)};var vu=(s,e,t)=>e.has(s)?zI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);function FI(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in s)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function cp(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Mg={exports:{}},bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function GI(){if(W_)return bu;W_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:n,key:c,ref:a!==void 0?a:null,props:l}}return bu.Fragment=e,bu.jsx=t,bu.jsxs=t,bu}var Z_;function qI(){return Z_||(Z_=1,Mg.exports=GI()),Mg.exports}var h=qI(),Vg={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function HI(){if(ew)return Le;ew=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,J={};function ie(M,ne,fe){this.props=M,this.context=ne,this.refs=J,this.updater=fe||O}ie.prototype.isReactComponent={},ie.prototype.setState=function(M,ne){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ne,"setState")},ie.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ce(){}ce.prototype=ie.prototype;function le(M,ne,fe){this.props=M,this.context=ne,this.refs=J,this.updater=fe||O}var ge=le.prototype=new ce;ge.constructor=le,G(ge,ie.prototype),ge.isPureReactComponent=!0;var Ee=Array.isArray;function ve(){}var C={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(M,ne,fe){var be=fe.ref;return{$$typeof:s,type:M,key:ne,ref:be!==void 0?be:null,props:fe}}function L(M,ne){return R(M.type,ne,M.props)}function j(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function P(M){var ne={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return ne[fe]})}var k=/\/+/g;function rt(M,ne){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):ne.toString(36)}function Et(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ve,ve):(M.status="pending",M.then(function(ne){M.status==="pending"&&(M.status="fulfilled",M.value=ne)},function(ne){M.status==="pending"&&(M.status="rejected",M.reason=ne)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function X(M,ne,fe,be,Re){var ke=typeof M;(ke==="undefined"||ke==="boolean")&&(M=null);var Ue=!1;if(M===null)Ue=!0;else switch(ke){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(M.$$typeof){case s:case e:Ue=!0;break;case v:return Ue=M._init,X(Ue(M._payload),ne,fe,be,Re)}}if(Ue)return Re=Re(M),Ue=be===""?"."+rt(M,0):be,Ee(Re)?(fe="",Ue!=null&&(fe=Ue.replace(k,"$&/")+"/"),X(Re,ne,fe,"",function(ss){return ss})):Re!=null&&(j(Re)&&(Re=L(Re,fe+(Re.key==null||M&&M.key===Re.key?"":(""+Re.key).replace(k,"$&/")+"/")+Ue)),ne.push(Re)),1;Ue=0;var Dt=be===""?".":be+":";if(Ee(M))for(var pt=0;pt<M.length;pt++)be=M[pt],ke=Dt+rt(be,pt),Ue+=X(be,ne,fe,ke,Re);else if(pt=A(M),typeof pt=="function")for(M=pt.call(M),pt=0;!(be=M.next()).done;)be=be.value,ke=Dt+rt(be,pt++),Ue+=X(be,ne,fe,ke,Re);else if(ke==="object"){if(typeof M.then=="function")return X(Et(M),ne,fe,be,Re);throw ne=String(M),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ue(M,ne,fe){if(M==null)return M;var be=[],Re=0;return X(M,be,"","",function(ke){return ne.call(fe,ke,Re++)}),be}function Ie(M){if(M._status===-1){var ne=M._result;ne=ne(),ne.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=ne)}if(M._status===1)return M._result.default;throw M._result}var Ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},$e={map:ue,forEach:function(M,ne,fe){ue(M,function(){ne.apply(this,arguments)},fe)},count:function(M){var ne=0;return ue(M,function(){ne++}),ne},toArray:function(M){return ue(M,function(ne){return ne})||[]},only:function(M){if(!j(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Le.Activity=x,Le.Children=$e,Le.Component=ie,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=le,Le.StrictMode=n,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Le.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},Le.cache=function(M){return function(){return M.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(M,ne,fe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var be=G({},M.props),Re=M.key;if(ne!=null)for(ke in ne.key!==void 0&&(Re=""+ne.key),ne)!I.call(ne,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ne.ref===void 0||(be[ke]=ne[ke]);var ke=arguments.length-2;if(ke===1)be.children=fe;else if(1<ke){for(var Ue=Array(ke),Dt=0;Dt<ke;Dt++)Ue[Dt]=arguments[Dt+2];be.children=Ue}return R(M.type,Re,be)},Le.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Le.createElement=function(M,ne,fe){var be,Re={},ke=null;if(ne!=null)for(be in ne.key!==void 0&&(ke=""+ne.key),ne)I.call(ne,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(Re[be]=ne[be]);var Ue=arguments.length-2;if(Ue===1)Re.children=fe;else if(1<Ue){for(var Dt=Array(Ue),pt=0;pt<Ue;pt++)Dt[pt]=arguments[pt+2];Re.children=Dt}if(M&&M.defaultProps)for(be in Ue=M.defaultProps,Ue)Re[be]===void 0&&(Re[be]=Ue[be]);return R(M,ke,Re)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(M){return{$$typeof:d,render:M}},Le.isValidElement=j,Le.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:Ie}},Le.memo=function(M,ne){return{$$typeof:g,type:M,compare:ne===void 0?null:ne}},Le.startTransition=function(M){var ne=C.T,fe={};C.T=fe;try{var be=M(),Re=C.S;Re!==null&&Re(fe,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(ve,Ge)}catch(ke){Ge(ke)}finally{ne!==null&&fe.types!==null&&(ne.types=fe.types),C.T=ne}},Le.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Le.use=function(M){return C.H.use(M)},Le.useActionState=function(M,ne,fe){return C.H.useActionState(M,ne,fe)},Le.useCallback=function(M,ne){return C.H.useCallback(M,ne)},Le.useContext=function(M){return C.H.useContext(M)},Le.useDebugValue=function(){},Le.useDeferredValue=function(M,ne){return C.H.useDeferredValue(M,ne)},Le.useEffect=function(M,ne){return C.H.useEffect(M,ne)},Le.useEffectEvent=function(M){return C.H.useEffectEvent(M)},Le.useId=function(){return C.H.useId()},Le.useImperativeHandle=function(M,ne,fe){return C.H.useImperativeHandle(M,ne,fe)},Le.useInsertionEffect=function(M,ne){return C.H.useInsertionEffect(M,ne)},Le.useLayoutEffect=function(M,ne){return C.H.useLayoutEffect(M,ne)},Le.useMemo=function(M,ne){return C.H.useMemo(M,ne)},Le.useOptimistic=function(M,ne){return C.H.useOptimistic(M,ne)},Le.useReducer=function(M,ne,fe){return C.H.useReducer(M,ne,fe)},Le.useRef=function(M){return C.H.useRef(M)},Le.useState=function(M){return C.H.useState(M)},Le.useSyncExternalStore=function(M,ne,fe){return C.H.useSyncExternalStore(M,ne,fe)},Le.useTransition=function(){return C.H.useTransition()},Le.version="19.2.4",Le}var tw;function bh(){return tw||(tw=1,Vg.exports=HI()),Vg.exports}var ae=bh();const $I=cp(ae);var Lg={exports:{}},xu={},Ug={exports:{}},Bg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function KI(){return nw||(nw=1,(function(s){function e(X,ue){var Ie=X.length;X.push(ue);e:for(;0<Ie;){var Ge=Ie-1>>>1,$e=X[Ge];if(0<a($e,ue))X[Ge]=ue,X[Ie]=$e,Ie=Ge;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var ue=X[0],Ie=X.pop();if(Ie!==ue){X[0]=Ie;e:for(var Ge=0,$e=X.length,M=$e>>>1;Ge<M;){var ne=2*(Ge+1)-1,fe=X[ne],be=ne+1,Re=X[be];if(0>a(fe,Ie))be<$e&&0>a(Re,fe)?(X[Ge]=Re,X[be]=Ie,Ge=be):(X[Ge]=fe,X[ne]=Ie,Ge=ne);else if(be<$e&&0>a(Re,Ie))X[Ge]=Re,X[be]=Ie,Ge=be;else break e}}return ue}function a(X,ue){var Ie=X.sortIndex-ue.sortIndex;return Ie!==0?Ie:X.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,x=null,E=3,A=!1,O=!1,G=!1,J=!1,ie=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function ge(X){for(var ue=t(g);ue!==null;){if(ue.callback===null)n(g);else if(ue.startTime<=X)n(g),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(g)}}function Ee(X){if(G=!1,ge(X),!O)if(t(p)!==null)O=!0,ve||(ve=!0,P());else{var ue=t(g);ue!==null&&Et(Ee,ue.startTime-X)}}var ve=!1,C=-1,I=5,R=-1;function L(){return J?!0:!(s.unstable_now()-R<I)}function j(){if(J=!1,ve){var X=s.unstable_now();R=X;var ue=!0;try{e:{O=!1,G&&(G=!1,ce(C),C=-1),A=!0;var Ie=E;try{t:{for(ge(X),x=t(p);x!==null&&!(x.expirationTime>X&&L());){var Ge=x.callback;if(typeof Ge=="function"){x.callback=null,E=x.priorityLevel;var $e=Ge(x.expirationTime<=X);if(X=s.unstable_now(),typeof $e=="function"){x.callback=$e,ge(X),ue=!0;break t}x===t(p)&&n(p),ge(X)}else n(p);x=t(p)}if(x!==null)ue=!0;else{var M=t(g);M!==null&&Et(Ee,M.startTime-X),ue=!1}}break e}finally{x=null,E=Ie,A=!1}ue=void 0}}finally{ue?P():ve=!1}}}var P;if(typeof le=="function")P=function(){le(j)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,rt=k.port2;k.port1.onmessage=j,P=function(){rt.postMessage(null)}}else P=function(){ie(j,0)};function Et(X,ue){C=ie(function(){X(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(X){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var Ie=E;E=ue;try{return X()}finally{E=Ie}},s.unstable_requestPaint=function(){J=!0},s.unstable_runWithPriority=function(X,ue){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Ie=E;E=X;try{return ue()}finally{E=Ie}},s.unstable_scheduleCallback=function(X,ue,Ie){var Ge=s.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Ge+Ie:Ge):Ie=Ge,X){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Ie+$e,X={id:v++,callback:ue,priorityLevel:X,startTime:Ie,expirationTime:$e,sortIndex:-1},Ie>Ge?(X.sortIndex=Ie,e(g,X),t(p)===null&&X===t(g)&&(G?(ce(C),C=-1):G=!0,Et(Ee,Ie-Ge))):(X.sortIndex=$e,e(p,X),O||A||(O=!0,ve||(ve=!0,P()))),X},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(X){var ue=E;return function(){var Ie=E;E=ue;try{return X.apply(this,arguments)}finally{E=Ie}}}})(Bg)),Bg}var rw;function QI(){return rw||(rw=1,Ug.exports=KI()),Ug.exports}var zg={exports:{}},Bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function YI(){if(sw)return Bn;sw=1;var s=bh();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:p,containerInfo:g,implementation:v}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Bn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},Bn.flushSync=function(p){var g=c.T,v=n.p;try{if(c.T=null,n.p=2,p)return p()}finally{c.T=g,n.p=v,n.d.f()}},Bn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(p,g))},Bn.prefetchDNS=function(p){typeof p=="string"&&n.d.D(p)},Bn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,x=d(v,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?n.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:A}):v==="script"&&n.d.X(p,{crossOrigin:x,integrity:E,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Bn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);n.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(p)},Bn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,x=d(v,g.crossOrigin);n.d.L(p,v,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Bn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);n.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(p)},Bn.requestFormReset=function(p){n.d.r(p)},Bn.unstable_batchedUpdates=function(p,g){return p(g)},Bn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},Bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Bn.version="19.2.4",Bn}var iw;function XI(){if(iw)return zg.exports;iw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),zg.exports=YI(),zg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function JI(){if(aw)return xu;aw=1;var s=QI(),e=bh(),t=XI();function n(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(n(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(n(188));return i!==r?null:r}for(var o=r,u=i;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return p(m),r;if(y===u)return p(m),i;y=y.sibling}throw Error(n(188))}if(o.return!==u.return)o=m,u=y;else{for(var _=!1,S=m.child;S;){if(S===o){_=!0,o=m,u=y;break}if(S===u){_=!0,u=m,o=y;break}S=S.sibling}if(!_){for(S=y.child;S;){if(S===o){_=!0,o=y,u=m;break}if(S===u){_=!0,u=y,o=m;break}S=S.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),le=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function P(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var k=Symbol.for("react.client.reference");function rt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===k?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case G:return"Fragment";case ie:return"Profiler";case J:return"StrictMode";case Ee:return"Suspense";case ve:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case O:return"Portal";case le:return r.displayName||"Context";case ce:return(r._context.displayName||"Context")+".Consumer";case ge:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return i=r.displayName||null,i!==null?i:rt(r.type)||"Memo";case I:i=r._payload,r=r._init;try{return rt(r(i))}catch{}}return null}var Et=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},Ge=[],$e=-1;function M(r){return{current:r}}function ne(r){0>$e||(r.current=Ge[$e],Ge[$e]=null,$e--)}function fe(r,i){$e++,Ge[$e]=r.current,r.current=i}var be=M(null),Re=M(null),ke=M(null),Ue=M(null);function Dt(r,i){switch(fe(ke,i),fe(Re,r),fe(be,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?__(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=__(i),r=w_(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ne(be),fe(be,r)}function pt(){ne(be),ne(Re),ne(ke)}function ss(r){r.memoizedState!==null&&fe(Ue,r);var i=be.current,o=w_(i,r.type);i!==o&&(fe(Re,r),fe(be,o))}function Kt(r){Re.current===r&&(ne(be),ne(Re)),Ue.current===r&&(ne(Ue),pu._currentValue=Ie)}var _s,ws;function vr(r){if(_s===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);_s=i&&i[1]||"",ws=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_s+r+ws}var Ii=!1;function is(r,i){if(!r||Ii)return"";Ii=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Q){var $=Q}Reflect.construct(r,[],re)}else{try{re.call()}catch(Q){$=Q}r.call(re.prototype)}}else{try{throw Error()}catch(Q){$=Q}(re=r())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),_=y[0],S=y[1];if(_&&S){var D=_.split(`
`),H=S.split(`
`);for(m=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;if(u===D.length||m===H.length)for(u=D.length-1,m=H.length-1;1<=u&&0<=m&&D[u]!==H[m];)m--;for(;1<=u&&0<=m;u--,m--)if(D[u]!==H[m]){if(u!==1||m!==1)do if(u--,m--,0>m||D[u]!==H[m]){var W=`
`+D[u].replace(" at new "," at ");return r.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",r.displayName)),W}while(1<=u&&0<=m);break}}}finally{Ii=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?vr(o):""}function Qs(r,i){switch(r.tag){case 26:case 27:case 5:return vr(r.type);case 16:return vr("Lazy");case 13:return r.child!==i&&i!==null?vr("Suspense Fallback"):vr("Suspense");case 19:return vr("SuspenseList");case 0:case 15:return is(r.type,!1);case 11:return is(r.type.render,!1);case 1:return is(r.type,!0);case 31:return vr("Activity");default:return""}}function Ys(r){try{var i="",o=null;do i+=Qs(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Tt=Object.prototype.hasOwnProperty,st=s.unstable_scheduleCallback,nn=s.unstable_cancelCallback,Es=s.unstable_shouldYield,Yn=s.unstable_requestPaint,bn=s.unstable_now,rn=s.unstable_getCurrentPriorityLevel,ir=s.unstable_ImmediatePriority,ar=s.unstable_UserBlockingPriority,Y=s.unstable_NormalPriority,pe=s.unstable_LowPriority,mt=s.unstable_IdlePriority,Xn=s.log,Vr=s.unstable_setDisableYieldValue,Mn=null,at=null;function Rt(r){if(typeof Xn=="function"&&Vr(r),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(Mn,r)}catch{}}var xe=Math.clz32?Math.clz32:Ts,un=Math.log,or=Math.LN2;function Ts(r){return r>>>=0,r===0?32:31-(un(r)/or|0)|0}var An=256,Lr=262144,jt=4194304;function xn(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ur(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,y=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var S=u&134217727;return S!==0?(u=S&~y,u!==0?m=xn(u):(_&=S,_!==0?m=xn(_):o||(o=S&~r,o!==0&&(m=xn(o))))):(S=u&~y,S!==0?m=xn(S):_!==0?m=xn(_):o||(o=u&~r,o!==0&&(m=xn(o)))),m===0?0:i!==0&&i!==m&&(i&y)===0&&(y=m&-m,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:m}function Vn(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Jo(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(){var r=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),r}function br(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Xs(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function qa(r,i,o,u,m,y){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var S=r.entanglements,D=r.expirationTimes,H=r.hiddenUpdates;for(o=_&~o;0<o;){var W=31-xe(o),re=1<<W;S[W]=0,D[W]=-1;var $=H[W];if($!==null)for(H[W]=null,W=0;W<$.length;W++){var Q=$[W];Q!==null&&(Q.lane&=-536870913)}o&=~re}u!==0&&as(r,u,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(_&~i))}function as(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-xe(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function Qt(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-xe(o),m=1<<u;m&i|r[u]&i&&(r[u]|=i),o&=~m}}function Te(r,i){var o=i&-i;return o=(o&42)!==0?1:Ss(o),(o&(r.suspendedLanes|i))!==0?0:o}function Ss(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function os(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ha(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:H_(r.type))}function xr(r,i){var o=ue.p;try{return ue.p=r,i()}finally{ue.p=o}}var lr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+lr,Yt="__reactProps$"+lr,Br="__reactContainer$"+lr,Ri="__reactEvents$"+lr,ki="__reactListeners$"+lr,$a="__reactHandles$"+lr,Wo="__reactResources$"+lr,_r="__reactMarker$"+lr;function Js(r){delete r[Vt],delete r[Yt],delete r[Ri],delete r[ki],delete r[$a]}function wr(r){var i=r[Vt];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Br]||o[Vt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=C_(r);r!==null;){if(o=r[Vt])return o;r=C_(r)}return i}r=o,o=r.parentNode}return null}function Jn(r){if(r=r[Vt]||r[Br]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Ln(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(n(33))}function zr(r){var i=r[Wo];return i||(i=r[Wo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Xt(r){r[_r]=!0}var Di=new Set,Ka={};function Fr(r,i){Gr(r,i),Gr(r+"Capture",i)}function Gr(r,i){for(Ka[r]=i,r=0;r<i.length;r++)Di.add(i[r])}var qr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ns={},ji={};function Zo(r){return Tt.call(ji,r)?!0:Tt.call(Ns,r)?!1:qr.test(r)?ji[r]=!0:(Ns[r]=!0,!1)}function Wn(r,i,o){if(Zo(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function hn(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Lt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function Jt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function cr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Oi(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(_){o=""+_,y.call(this,_)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function et(r){if(!r._valueTracker){var i=cr(r)?"checked":"value";r._valueTracker=Oi(r,i,""+r[i])}}function Ft(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=cr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function Er(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var As=/[\n"\\]/g;function Un(r){return r.replace(As,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Pi(r,i,o,u,m,y,_,S){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),i!=null?_==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Jt(i)):r.value!==""+Jt(i)&&(r.value=""+Jt(i)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),i!=null?Mi(r,_,Jt(i)):o!=null?Mi(r,_,Jt(o)):u!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.name=""+Jt(S):r.removeAttribute("name")}function Qa(r,i,o,u,m,y,_,S){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){et(r);return}o=o!=null?""+Jt(o):"",i=i!=null?""+Jt(i):o,S||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=S?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),et(r)}function Mi(r,i,o){i==="number"&&Er(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function T(r,i,o,u){if(r=r.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=i.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Jt(o),i=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function ee(r,i,o){if(i!=null&&(i=""+Jt(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+Jt(o):""}function U(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(n(92));if(Et(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Jt(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),et(r)}function se(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var me=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oe(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||me.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function gt(r,i,o){if(i!=null&&typeof i!="object")throw Error(n(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&Oe(r,m,u)}else for(var y in i)i.hasOwnProperty(y)&&Oe(r,y,i[y])}function Zn(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(r){return Vi.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ls(){}var Rc=null;function Hr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Li=null,Is=null;function Ya(r){var i=Jn(r);if(i&&(r=i.stateNode)){var o=r[Yt]||null;e:switch(r=i.stateNode,i.type){case"input":if(Pi(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Un(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var m=u[Yt]||null;if(!m)throw Error(n(90));Pi(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&Ft(u)}break e;case"textarea":ee(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&T(r,!!o.multiple,i,!1)}}}var tl=!1;function Ui(r,i,o){if(tl)return r(i,o);tl=!0;try{var u=r(i);return u}finally{if(tl=!1,(Li!==null||Is!==null)&&(Rd(),Li&&(i=Li,r=Is,Is=Li=null,Ya(i),r)))for(i=0;i<r.length;i++)Ya(r[i])}}function cs(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Yt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(n(231,i,typeof o));return o}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xa=!1;if($r)try{var St={};Object.defineProperty(St,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{Xa=!1}var Cs=null,kc=null,Ja=null;function Dc(){if(Ja)return Ja;var r,i=kc,o=i.length,u,m="value"in Cs?Cs.value:Cs.textContent,y=m.length;for(r=0;r<o&&i[r]===m[r];r++);var _=o-r;for(u=1;u<=_&&i[o-u]===m[y-u];u++);return Ja=m.slice(r,1<u?1-u:void 0)}function Wa(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ws(){return!0}function us(){return!1}function In(r){function i(o,u,m,y,_){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(o=r[S],this[S]=o?o(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ws:us,this.isPropagationStopped=us,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),i}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rs=In(Zs),Bi=x({},Zs,{view:0,detail:0}),jc=In(Bi),zi,nl,ks,rl=x({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fi,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ks&&(ks&&r.type==="mousemove"?(zi=r.screenX-ks.screenX,nl=r.screenY-ks.screenY):nl=zi=0,ks=r),zi)},movementY:function(r){return"movementY"in r?r.movementY:nl}}),Oc=In(rl),Za=x({},rl,{dataTransfer:0}),Lh=In(Za),Uh=x({},Bi,{relatedTarget:0}),eo=In(Uh),Pc=x({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Bh=In(Pc),sl=x({},Zs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),zh=In(sl),Fh=x({},Zs,{data:0}),Ds=In(Fh),Gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $h(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Hh[r])?!!i[r]:!1}function Fi(){return $h}var er=x({},Bi,{key:function(r){if(r.key){var i=Gh[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Wa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?qh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fi,charCode:function(r){return r.type==="keypress"?Wa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Wa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Kh=In(er),Qh=x({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ei=In(Qh),f=x({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fi}),b=In(f),w=x({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=In(w),F=x({},rl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),K=In(F),de=x({},Zs,{newState:0,oldState:0}),Be=In(de),sn=[9,13,27,32],ut=$r&&"CompositionEvent"in window,Ut=null;$r&&"documentMode"in document&&(Ut=document.documentMode);var Kr=$r&&"TextEvent"in window&&!Ut,js=$r&&(!ut||Ut&&8<Ut&&11>=Ut),hs=" ",ds=!1;function to(r,i){switch(r){case"keyup":return sn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function il(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var al=!1;function hA(r,i){switch(r){case"compositionend":return il(i);case"keypress":return i.which!==32?null:(ds=!0,hs);case"textInput":return r=i.data,r===hs&&ds?null:r;default:return null}}function dA(r,i){if(al)return r==="compositionend"||!ut&&to(r,i)?(r=Dc(),Ja=kc=Cs=null,al=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return js&&i.locale!=="ko"?null:i.data;default:return null}}var fA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dv(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!fA[r.type]:i==="textarea"}function jv(r,i,o,u){Li?Is?Is.push(u):Is=[u]:Li=u,i=Vd(i,"onChange"),0<i.length&&(o=new Rs("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Mc=null,Vc=null;function pA(r){m_(r,0)}function Yh(r){var i=Ln(r);if(Ft(i))return r}function Ov(r,i){if(r==="change")return i}var Pv=!1;if($r){var Gp;if($r){var qp="oninput"in document;if(!qp){var Mv=document.createElement("div");Mv.setAttribute("oninput","return;"),qp=typeof Mv.oninput=="function"}Gp=qp}else Gp=!1;Pv=Gp&&(!document.documentMode||9<document.documentMode)}function Vv(){Mc&&(Mc.detachEvent("onpropertychange",Lv),Vc=Mc=null)}function Lv(r){if(r.propertyName==="value"&&Yh(Vc)){var i=[];jv(i,Vc,r,Hr(r)),Ui(pA,i)}}function mA(r,i,o){r==="focusin"?(Vv(),Mc=i,Vc=o,Mc.attachEvent("onpropertychange",Lv)):r==="focusout"&&Vv()}function gA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Yh(Vc)}function yA(r,i){if(r==="click")return Yh(i)}function vA(r,i){if(r==="input"||r==="change")return Yh(i)}function bA(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Tr=typeof Object.is=="function"?Object.is:bA;function Lc(r,i){if(Tr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Tt.call(i,m)||!Tr(r[m],i[m]))return!1}return!0}function Uv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bv(r,i){var o=Uv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Uv(o)}}function zv(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?zv(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Fv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Er(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Er(r.document)}return i}function Hp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var xA=$r&&"documentMode"in document&&11>=document.documentMode,ol=null,$p=null,Uc=null,Kp=!1;function Gv(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Kp||ol==null||ol!==Er(u)||(u=ol,"selectionStart"in u&&Hp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Uc&&Lc(Uc,u)||(Uc=u,u=Vd($p,"onSelect"),0<u.length&&(i=new Rs("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=ol)))}function no(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var ll={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},Qp={},qv={};$r&&(qv=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function ro(r){if(Qp[r])return Qp[r];if(!ll[r])return r;var i=ll[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in qv)return Qp[r]=i[o];return r}var Hv=ro("animationend"),$v=ro("animationiteration"),Kv=ro("animationstart"),_A=ro("transitionrun"),wA=ro("transitionstart"),EA=ro("transitioncancel"),Qv=ro("transitionend"),Yv=new Map,Yp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yp.push("scrollEnd");function fs(r,i){Yv.set(r,i),Fr(i,[r])}var Xh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Qr=[],cl=0,Xp=0;function Jh(){for(var r=cl,i=Xp=cl=0;i<r;){var o=Qr[i];Qr[i++]=null;var u=Qr[i];Qr[i++]=null;var m=Qr[i];Qr[i++]=null;var y=Qr[i];if(Qr[i++]=null,u!==null&&m!==null){var _=u.pending;_===null?m.next=m:(m.next=_.next,_.next=m),u.pending=m}y!==0&&Xv(o,m,y)}}function Wh(r,i,o,u){Qr[cl++]=r,Qr[cl++]=i,Qr[cl++]=o,Qr[cl++]=u,Xp|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Jp(r,i,o,u){return Wh(r,i,o,u),Zh(r)}function so(r,i){return Wh(r,null,null,i),Zh(r)}function Xv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=r.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&i!==null&&(m=31-xe(o),r=y.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=o|536870912),y):null}function Zh(r){if(50<ou)throw ou=0,ag=null,Error(n(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var ul={};function TA(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(r,i,o,u){return new TA(r,i,o,u)}function Wp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ti(r,i){var o=r.alternate;return o===null?(o=Sr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Jv(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ed(r,i,o,u,m,y){var _=0;if(u=r,typeof r=="function")Wp(r)&&(_=1);else if(typeof r=="string")_=CI(r,o,be.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Sr(31,o,i,m),r.elementType=R,r.lanes=y,r;case G:return io(o.children,m,y,i);case J:_=8,m|=24;break;case ie:return r=Sr(12,o,i,m|2),r.elementType=ie,r.lanes=y,r;case Ee:return r=Sr(13,o,i,m),r.elementType=Ee,r.lanes=y,r;case ve:return r=Sr(19,o,i,m),r.elementType=ve,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case le:_=10;break e;case ce:_=9;break e;case ge:_=11;break e;case C:_=14;break e;case I:_=16,u=null;break e}_=29,o=Error(n(130,r===null?"null":typeof r,"")),u=null}return i=Sr(_,o,i,m),i.elementType=r,i.type=u,i.lanes=y,i}function io(r,i,o,u){return r=Sr(7,r,u,i),r.lanes=o,r}function Zp(r,i,o){return r=Sr(6,r,null,i),r.lanes=o,r}function Wv(r){var i=Sr(18,null,null,0);return i.stateNode=r,i}function em(r,i,o){return i=Sr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Zv=new WeakMap;function Yr(r,i){if(typeof r=="object"&&r!==null){var o=Zv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Ys(i)},Zv.set(r,i),i)}return{value:r,source:i,stack:Ys(i)}}var hl=[],dl=0,td=null,Bc=0,Xr=[],Jr=0,Gi=null,Os=1,Ps="";function ni(r,i){hl[dl++]=Bc,hl[dl++]=td,td=r,Bc=i}function eb(r,i,o){Xr[Jr++]=Os,Xr[Jr++]=Ps,Xr[Jr++]=Gi,Gi=r;var u=Os;r=Ps;var m=32-xe(u)-1;u&=~(1<<m),o+=1;var y=32-xe(i)+m;if(30<y){var _=m-m%5;y=(u&(1<<_)-1).toString(32),u>>=_,m-=_,Os=1<<32-xe(i)+m|o<<m|u,Ps=y+r}else Os=1<<y|o<<m|u,Ps=r}function tm(r){r.return!==null&&(ni(r,1),eb(r,1,0))}function nm(r){for(;r===td;)td=hl[--dl],hl[dl]=null,Bc=hl[--dl],hl[dl]=null;for(;r===Gi;)Gi=Xr[--Jr],Xr[Jr]=null,Ps=Xr[--Jr],Xr[Jr]=null,Os=Xr[--Jr],Xr[Jr]=null}function tb(r,i){Xr[Jr++]=Os,Xr[Jr++]=Ps,Xr[Jr++]=Gi,Os=i.id,Ps=i.overflow,Gi=r}var Cn=null,Ot=null,tt=!1,qi=null,Wr=!1,rm=Error(n(519));function Hi(r){var i=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zc(Yr(i,r)),rm}function nb(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Vt]=r,i[Yt]=u,o){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(o=0;o<cu.length;o++)Qe(cu[o],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":Qe("invalid",i),Qa(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",i);break;case"textarea":Qe("invalid",i),U(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||b_(i.textContent,o)?(u.popover!=null&&(Qe("beforetoggle",i),Qe("toggle",i)),u.onScroll!=null&&Qe("scroll",i),u.onScrollEnd!=null&&Qe("scrollend",i),u.onClick!=null&&(i.onclick=ls),i=!0):i=!1,i||Hi(r,!0)}function rb(r){for(Cn=r.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:Cn=Cn.return}}function fl(r){if(r!==Cn)return!1;if(!tt)return rb(r),tt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||_g(r.type,r.memoizedProps)),o=!o),o&&Ot&&Hi(r),rb(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Ot=I_(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Ot=I_(r)}else i===27?(i=Ot,ia(r.type)?(r=Ng,Ng=null,Ot=r):Ot=i):Ot=Cn?es(r.stateNode.nextSibling):null;return!0}function ao(){Ot=Cn=null,tt=!1}function sm(){var r=qi;return r!==null&&(fr===null?fr=r:fr.push.apply(fr,r),qi=null),r}function zc(r){qi===null?qi=[r]:qi.push(r)}var im=M(null),oo=null,ri=null;function $i(r,i,o){fe(im,i._currentValue),i._currentValue=o}function si(r){r._currentValue=im.current,ne(im)}function am(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function om(r,i,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var _=m.child;y=y.firstContext;e:for(;y!==null;){var S=y;y=m;for(var D=0;D<i.length;D++)if(S.context===i[D]){y.lanes|=o,S=y.alternate,S!==null&&(S.lanes|=o),am(y.return,o,r),u||(_=null);break e}y=S.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(n(341));_.lanes|=o,y=_.alternate,y!==null&&(y.lanes|=o),am(_,o,r),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===r){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function pl(r,i,o,u){r=null;for(var m=i,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var S=m.type;Tr(m.pendingProps.value,_.value)||(r!==null?r.push(S):r=[S])}}else if(m===Ue.current){if(_=m.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(pu):r=[pu])}m=m.return}r!==null&&om(i,r,o,u),i.flags|=262144}function nd(r){for(r=r.firstContext;r!==null;){if(!Tr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function lo(r){oo=r,ri=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Rn(r){return sb(oo,r)}function rd(r,i){return oo===null&&lo(r),sb(r,i)}function sb(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ri===null){if(r===null)throw Error(n(308));ri=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ri=ri.next=i;return o}var SA=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},NA=s.unstable_scheduleCallback,AA=s.unstable_NormalPriority,dn={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lm(){return{controller:new SA,data:new Map,refCount:0}}function Fc(r){r.refCount--,r.refCount===0&&NA(AA,function(){r.controller.abort()})}var Gc=null,cm=0,ml=0,gl=null;function IA(r,i){if(Gc===null){var o=Gc=[];cm=0,ml=dg(),gl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return cm++,i.then(ib,ib),i}function ib(){if(--cm===0&&Gc!==null){gl!==null&&(gl.status="fulfilled");var r=Gc;Gc=null,ml=0,gl=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function CA(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var ab=X.S;X.S=function(r,i){Gx=bn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&IA(r,i),ab!==null&&ab(r,i)};var co=M(null);function um(){var r=co.current;return r!==null?r:Ct.pooledCache}function sd(r,i){i===null?fe(co,co.current):fe(co,i.pool)}function ob(){var r=um();return r===null?null:{parent:dn._currentValue,pool:r}}var yl=Error(n(460)),hm=Error(n(474)),id=Error(n(542)),ad={then:function(){}};function lb(r){return r=r.status,r==="fulfilled"||r==="rejected"}function cb(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(ls,ls),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,hb(r),r;default:if(typeof i.status=="string")i.then(ls,ls);else{if(r=Ct,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,hb(r),r}throw ho=i,yl}}function uo(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ho=o,yl):o}}var ho=null;function ub(){if(ho===null)throw Error(n(459));var r=ho;return ho=null,r}function hb(r){if(r===yl||r===id)throw Error(n(483))}var vl=null,qc=0;function od(r){var i=qc;return qc+=1,vl===null&&(vl=[]),cb(vl,r,i)}function Hc(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function ld(r,i){throw i.$$typeof===E?Error(n(525)):(r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function db(r){function i(B,V){if(r){var q=B.deletions;q===null?(B.deletions=[V],B.flags|=16):q.push(V)}}function o(B,V){if(!r)return null;for(;V!==null;)i(B,V),V=V.sibling;return null}function u(B){for(var V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function m(B,V){return B=ti(B,V),B.index=0,B.sibling=null,B}function y(B,V,q){return B.index=q,r?(q=B.alternate,q!==null?(q=q.index,q<V?(B.flags|=67108866,V):q):(B.flags|=67108866,V)):(B.flags|=1048576,V)}function _(B){return r&&B.alternate===null&&(B.flags|=67108866),B}function S(B,V,q,te){return V===null||V.tag!==6?(V=Zp(q,B.mode,te),V.return=B,V):(V=m(V,q),V.return=B,V)}function D(B,V,q,te){var De=q.type;return De===G?W(B,V,q.props.children,te,q.key):V!==null&&(V.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&uo(De)===V.type)?(V=m(V,q.props),Hc(V,q),V.return=B,V):(V=ed(q.type,q.key,q.props,null,B.mode,te),Hc(V,q),V.return=B,V)}function H(B,V,q,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=em(q,B.mode,te),V.return=B,V):(V=m(V,q.children||[]),V.return=B,V)}function W(B,V,q,te,De){return V===null||V.tag!==7?(V=io(q,B.mode,te,De),V.return=B,V):(V=m(V,q),V.return=B,V)}function re(B,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Zp(""+V,B.mode,q),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case A:return q=ed(V.type,V.key,V.props,null,B.mode,q),Hc(q,V),q.return=B,q;case O:return V=em(V,B.mode,q),V.return=B,V;case I:return V=uo(V),re(B,V,q)}if(Et(V)||P(V))return V=io(V,B.mode,q,null),V.return=B,V;if(typeof V.then=="function")return re(B,od(V),q);if(V.$$typeof===le)return re(B,rd(B,V),q);ld(B,V)}return null}function $(B,V,q,te){var De=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return De!==null?null:S(B,V,""+q,te);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===De?D(B,V,q,te):null;case O:return q.key===De?H(B,V,q,te):null;case I:return q=uo(q),$(B,V,q,te)}if(Et(q)||P(q))return De!==null?null:W(B,V,q,te,null);if(typeof q.then=="function")return $(B,V,od(q),te);if(q.$$typeof===le)return $(B,V,rd(B,q),te);ld(B,q)}return null}function Q(B,V,q,te,De){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(q)||null,S(V,B,""+te,De);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case A:return B=B.get(te.key===null?q:te.key)||null,D(V,B,te,De);case O:return B=B.get(te.key===null?q:te.key)||null,H(V,B,te,De);case I:return te=uo(te),Q(B,V,q,te,De)}if(Et(te)||P(te))return B=B.get(q)||null,W(V,B,te,De,null);if(typeof te.then=="function")return Q(B,V,q,od(te),De);if(te.$$typeof===le)return Q(B,V,q,rd(V,te),De);ld(V,te)}return null}function we(B,V,q,te){for(var De=null,ot=null,Ae=V,qe=V=0,Je=null;Ae!==null&&qe<q.length;qe++){Ae.index>qe?(Je=Ae,Ae=null):Je=Ae.sibling;var lt=$(B,Ae,q[qe],te);if(lt===null){Ae===null&&(Ae=Je);break}r&&Ae&&lt.alternate===null&&i(B,Ae),V=y(lt,V,qe),ot===null?De=lt:ot.sibling=lt,ot=lt,Ae=Je}if(qe===q.length)return o(B,Ae),tt&&ni(B,qe),De;if(Ae===null){for(;qe<q.length;qe++)Ae=re(B,q[qe],te),Ae!==null&&(V=y(Ae,V,qe),ot===null?De=Ae:ot.sibling=Ae,ot=Ae);return tt&&ni(B,qe),De}for(Ae=u(Ae);qe<q.length;qe++)Je=Q(Ae,B,qe,q[qe],te),Je!==null&&(r&&Je.alternate!==null&&Ae.delete(Je.key===null?qe:Je.key),V=y(Je,V,qe),ot===null?De=Je:ot.sibling=Je,ot=Je);return r&&Ae.forEach(function(ua){return i(B,ua)}),tt&&ni(B,qe),De}function Pe(B,V,q,te){if(q==null)throw Error(n(151));for(var De=null,ot=null,Ae=V,qe=V=0,Je=null,lt=q.next();Ae!==null&&!lt.done;qe++,lt=q.next()){Ae.index>qe?(Je=Ae,Ae=null):Je=Ae.sibling;var ua=$(B,Ae,lt.value,te);if(ua===null){Ae===null&&(Ae=Je);break}r&&Ae&&ua.alternate===null&&i(B,Ae),V=y(ua,V,qe),ot===null?De=ua:ot.sibling=ua,ot=ua,Ae=Je}if(lt.done)return o(B,Ae),tt&&ni(B,qe),De;if(Ae===null){for(;!lt.done;qe++,lt=q.next())lt=re(B,lt.value,te),lt!==null&&(V=y(lt,V,qe),ot===null?De=lt:ot.sibling=lt,ot=lt);return tt&&ni(B,qe),De}for(Ae=u(Ae);!lt.done;qe++,lt=q.next())lt=Q(Ae,B,qe,lt.value,te),lt!==null&&(r&&lt.alternate!==null&&Ae.delete(lt.key===null?qe:lt.key),V=y(lt,V,qe),ot===null?De=lt:ot.sibling=lt,ot=lt);return r&&Ae.forEach(function(BI){return i(B,BI)}),tt&&ni(B,qe),De}function It(B,V,q,te){if(typeof q=="object"&&q!==null&&q.type===G&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var De=q.key;V!==null;){if(V.key===De){if(De=q.type,De===G){if(V.tag===7){o(B,V.sibling),te=m(V,q.props.children),te.return=B,B=te;break e}}else if(V.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===I&&uo(De)===V.type){o(B,V.sibling),te=m(V,q.props),Hc(te,q),te.return=B,B=te;break e}o(B,V);break}else i(B,V);V=V.sibling}q.type===G?(te=io(q.props.children,B.mode,te,q.key),te.return=B,B=te):(te=ed(q.type,q.key,q.props,null,B.mode,te),Hc(te,q),te.return=B,B=te)}return _(B);case O:e:{for(De=q.key;V!==null;){if(V.key===De)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){o(B,V.sibling),te=m(V,q.children||[]),te.return=B,B=te;break e}else{o(B,V);break}else i(B,V);V=V.sibling}te=em(q,B.mode,te),te.return=B,B=te}return _(B);case I:return q=uo(q),It(B,V,q,te)}if(Et(q))return we(B,V,q,te);if(P(q)){if(De=P(q),typeof De!="function")throw Error(n(150));return q=De.call(q),Pe(B,V,q,te)}if(typeof q.then=="function")return It(B,V,od(q),te);if(q.$$typeof===le)return It(B,V,rd(B,q),te);ld(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(o(B,V.sibling),te=m(V,q),te.return=B,B=te):(o(B,V),te=Zp(q,B.mode,te),te.return=B,B=te),_(B)):o(B,V)}return function(B,V,q,te){try{qc=0;var De=It(B,V,q,te);return vl=null,De}catch(Ae){if(Ae===yl||Ae===id)throw Ae;var ot=Sr(29,Ae,null,B.mode);return ot.lanes=te,ot.return=B,ot}finally{}}}var fo=db(!0),fb=db(!1),Ki=!1;function dm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Qi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Yi(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ht&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=Zh(r),Xv(r,null,o),i}return Wh(r,u,i,o),Zh(r)}function $c(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Qt(r,o)}}function pm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=_:y=y.next=_,o=o.next}while(o!==null);y===null?m=y=i:y=y.next=i}else m=y=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var mm=!1;function Kc(){if(mm){var r=gl;if(r!==null)throw r}}function Qc(r,i,o,u){mm=!1;var m=r.updateQueue;Ki=!1;var y=m.firstBaseUpdate,_=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var D=S,H=D.next;D.next=null,_===null?y=H:_.next=H,_=D;var W=r.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==_&&(S===null?W.firstBaseUpdate=H:S.next=H,W.lastBaseUpdate=D))}if(y!==null){var re=m.baseState;_=0,W=H=D=null,S=y;do{var $=S.lane&-536870913,Q=$!==S.lane;if(Q?(Xe&$)===$:(u&$)===$){$!==0&&$===ml&&(mm=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var we=r,Pe=S;$=i;var It=o;switch(Pe.tag){case 1:if(we=Pe.payload,typeof we=="function"){re=we.call(It,re,$);break e}re=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Pe.payload,$=typeof we=="function"?we.call(It,re,$):we,$==null)break e;re=x({},re,$);break e;case 2:Ki=!0}}$=S.callback,$!==null&&(r.flags|=64,Q&&(r.flags|=8192),Q=m.callbacks,Q===null?m.callbacks=[$]:Q.push($))}else Q={lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(H=W=Q,D=re):W=W.next=Q,_|=$;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,m.lastBaseUpdate=Q,m.shared.pending=null}}while(!0);W===null&&(D=re),m.baseState=D,m.firstBaseUpdate=H,m.lastBaseUpdate=W,y===null&&(m.shared.lanes=0),ea|=_,r.lanes=_,r.memoizedState=re}}function pb(r,i){if(typeof r!="function")throw Error(n(191,r));r.call(i)}function mb(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)pb(o[r],i)}var bl=M(null),cd=M(0);function gb(r,i){r=fi,fe(cd,r),fe(bl,i),fi=r|i.baseLanes}function gm(){fe(cd,fi),fe(bl,bl.current)}function ym(){fi=cd.current,ne(bl),ne(cd)}var Nr=M(null),Zr=null;function Xi(r){var i=r.alternate;fe(an,an.current&1),fe(Nr,r),Zr===null&&(i===null||bl.current!==null||i.memoizedState!==null)&&(Zr=r)}function vm(r){fe(an,an.current),fe(Nr,r),Zr===null&&(Zr=r)}function yb(r){r.tag===22?(fe(an,an.current),fe(Nr,r),Zr===null&&(Zr=r)):Ji()}function Ji(){fe(an,an.current),fe(Nr,Nr.current)}function Ar(r){ne(Nr),Zr===r&&(Zr=null),ne(an)}var an=M(0);function ud(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Tg(o)||Sg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ii=0,ze=null,Nt=null,fn=null,hd=!1,xl=!1,po=!1,dd=0,Yc=0,_l=null,RA=0;function Wt(){throw Error(n(321))}function bm(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Tr(r[o],i[o]))return!1;return!0}function xm(r,i,o,u,m,y){return ii=y,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=r===null||r.memoizedState===null?ex:Pm,po=!1,y=o(u,m),po=!1,xl&&(y=bb(i,o,u,m)),vb(r),y}function vb(r){X.H=Wc;var i=Nt!==null&&Nt.next!==null;if(ii=0,fn=Nt=ze=null,hd=!1,Yc=0,_l=null,i)throw Error(n(300));r===null||pn||(r=r.dependencies,r!==null&&nd(r)&&(pn=!0))}function bb(r,i,o,u){ze=r;var m=0;do{if(xl&&(_l=null),Yc=0,xl=!1,25<=m)throw Error(n(301));if(m+=1,fn=Nt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}X.H=tx,y=i(o,u)}while(xl);return y}function kA(){var r=X.H,i=r.useState()[0];return i=typeof i.then=="function"?Xc(i):i,r=r.useState()[0],(Nt!==null?Nt.memoizedState:null)!==r&&(ze.flags|=1024),i}function _m(){var r=dd!==0;return dd=0,r}function wm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Em(r){if(hd){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hd=!1}ii=0,fn=Nt=ze=null,xl=!1,Yc=dd=0,_l=null}function tr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?ze.memoizedState=fn=r:fn=fn.next=r,fn}function on(){if(Nt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=Nt.next;var i=fn===null?ze.memoizedState:fn.next;if(i!==null)fn=i,Nt=r;else{if(r===null)throw ze.alternate===null?Error(n(467)):Error(n(310));Nt=r,r={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},fn===null?ze.memoizedState=fn=r:fn=fn.next=r}return fn}function fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xc(r){var i=Yc;return Yc+=1,_l===null&&(_l=[]),r=cb(_l,r,i),i=ze,(fn===null?i.memoizedState:fn.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?ex:Pm),r}function pd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Xc(r);if(r.$$typeof===le)return Rn(r)}throw Error(n(438,String(r)))}function Tm(r){var i=null,o=ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=fd(),ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=L;return i.index++,o}function ai(r,i){return typeof i=="function"?i(r):i}function md(r){var i=on();return Sm(i,Nt,r)}function Sm(r,i,o){var u=r.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=o;var m=r.baseQueue,y=u.pending;if(y!==null){if(m!==null){var _=m.next;m.next=y.next,y.next=_}i.baseQueue=m=y,u.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{i=m.next;var S=_=null,D=null,H=i,W=!1;do{var re=H.lane&-536870913;if(re!==H.lane?(Xe&re)===re:(ii&re)===re){var $=H.revertLane;if($===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),re===ml&&(W=!0);else if((ii&$)===$){H=H.next,$===ml&&(W=!0);continue}else re={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(S=D=re,_=y):D=D.next=re,ze.lanes|=$,ea|=$;re=H.action,po&&o(y,re),y=H.hasEagerState?H.eagerState:o(y,re)}else $={lane:re,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(S=D=$,_=y):D=D.next=$,ze.lanes|=re,ea|=re;H=H.next}while(H!==null&&H!==i);if(D===null?_=y:D.next=S,!Tr(y,r.memoizedState)&&(pn=!0,W&&(o=gl,o!==null)))throw o;r.memoizedState=y,r.baseState=_,r.baseQueue=D,u.lastRenderedState=y}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Nm(r){var i=on(),o=i.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,y=i.memoizedState;if(m!==null){o.pending=null;var _=m=m.next;do y=r(y,_.action),_=_.next;while(_!==m);Tr(y,i.memoizedState)||(pn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function xb(r,i,o){var u=ze,m=on(),y=tt;if(y){if(o===void 0)throw Error(n(407));o=o()}else o=i();var _=!Tr((Nt||m).memoizedState,o);if(_&&(m.memoizedState=o,pn=!0),m=m.queue,Cm(Eb.bind(null,u,m,r),[r]),m.getSnapshot!==i||_||fn!==null&&fn.memoizedState.tag&1){if(u.flags|=2048,wl(9,{destroy:void 0},wb.bind(null,u,m,o,i),null),Ct===null)throw Error(n(349));y||(ii&127)!==0||_b(u,i,o)}return o}function _b(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=ze.updateQueue,i===null?(i=fd(),ze.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function wb(r,i,o,u){i.value=o,i.getSnapshot=u,Tb(i)&&Sb(r)}function Eb(r,i,o){return o(function(){Tb(i)&&Sb(r)})}function Tb(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Tr(r,o)}catch{return!0}}function Sb(r){var i=so(r,2);i!==null&&pr(i,r,2)}function Am(r){var i=tr();if(typeof r=="function"){var o=r;if(r=o(),po){Rt(!0);try{o()}finally{Rt(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:r},i}function Nb(r,i,o,u){return r.baseState=o,Sm(r,Nt,typeof u=="function"?u:ai)}function DA(r,i,o,u,m){if(vd(r))throw Error(n(485));if(r=i.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};X.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,Ab(i,y)):(y.next=o.next,i.pending=o.next=y)}}function Ab(r,i){var o=i.action,u=i.payload,m=r.state;if(i.isTransition){var y=X.T,_={};X.T=_;try{var S=o(m,u),D=X.S;D!==null&&D(_,S),Ib(r,i,S)}catch(H){Im(r,i,H)}finally{y!==null&&_.types!==null&&(y.types=_.types),X.T=y}}else try{y=o(m,u),Ib(r,i,y)}catch(H){Im(r,i,H)}}function Ib(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Cb(r,i,u)},function(u){return Im(r,i,u)}):Cb(r,i,o)}function Cb(r,i,o){i.status="fulfilled",i.value=o,Rb(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Ab(r,o)))}function Im(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Rb(i),i=i.next;while(i!==u)}r.action=null}function Rb(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function kb(r,i){return i}function Db(r,i){if(tt){var o=Ct.formState;if(o!==null){e:{var u=ze;if(tt){if(Ot){t:{for(var m=Ot,y=Wr;m.nodeType!==8;){if(!y){m=null;break t}if(m=es(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Ot=es(m.nextSibling),u=m.data==="F!";break e}}Hi(u)}u=!1}u&&(i=o[0])}}return o=tr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kb,lastRenderedState:i},o.queue=u,o=Jb.bind(null,ze,u),u.dispatch=o,u=Am(!1),y=Om.bind(null,ze,!1,u.queue),u=tr(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,o=DA.bind(null,ze,m,y,o),m.dispatch=o,u.memoizedState=r,[i,o,!1]}function jb(r){var i=on();return Ob(i,Nt,r)}function Ob(r,i,o){if(i=Sm(r,i,kb)[0],r=md(ai)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Xc(i)}catch(_){throw _===yl?id:_}else u=i;i=on();var m=i.queue,y=m.dispatch;return o!==i.memoizedState&&(ze.flags|=2048,wl(9,{destroy:void 0},jA.bind(null,m,o),null)),[u,y,r]}function jA(r,i){r.action=i}function Pb(r){var i=on(),o=Nt;if(o!==null)return Ob(i,o,r);on(),i=i.memoizedState,o=on();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function wl(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=ze.updateQueue,i===null&&(i=fd(),ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function Mb(){return on().memoizedState}function gd(r,i,o,u){var m=tr();ze.flags|=r,m.memoizedState=wl(1|i,{destroy:void 0},o,u===void 0?null:u)}function yd(r,i,o,u){var m=on();u=u===void 0?null:u;var y=m.memoizedState.inst;Nt!==null&&u!==null&&bm(u,Nt.memoizedState.deps)?m.memoizedState=wl(i,y,o,u):(ze.flags|=r,m.memoizedState=wl(1|i,y,o,u))}function Vb(r,i){gd(8390656,8,r,i)}function Cm(r,i){yd(2048,8,r,i)}function OA(r){ze.flags|=4;var i=ze.updateQueue;if(i===null)i=fd(),ze.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function Lb(r){var i=on().memoizedState;return OA({ref:i,nextImpl:r}),function(){if((ht&2)!==0)throw Error(n(440));return i.impl.apply(void 0,arguments)}}function Ub(r,i){return yd(4,2,r,i)}function Bb(r,i){return yd(4,4,r,i)}function zb(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Fb(r,i,o){o=o!=null?o.concat([r]):null,yd(4,4,zb.bind(null,i,r),o)}function Rm(){}function Gb(r,i){var o=on();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&bm(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function qb(r,i){var o=on();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&bm(i,u[1]))return u[0];if(u=r(),po){Rt(!0);try{r()}finally{Rt(!1)}}return o.memoizedState=[u,i],u}function km(r,i,o){return o===void 0||(ii&1073741824)!==0&&(Xe&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=Hx(),ze.lanes|=r,ea|=r,o)}function Hb(r,i,o,u){return Tr(o,i)?o:bl.current!==null?(r=km(r,o,u),Tr(r,i)||(pn=!0),r):(ii&42)===0||(ii&1073741824)!==0&&(Xe&261930)===0?(pn=!0,r.memoizedState=o):(r=Hx(),ze.lanes|=r,ea|=r,i)}function $b(r,i,o,u,m){var y=ue.p;ue.p=y!==0&&8>y?y:8;var _=X.T,S={};X.T=S,Om(r,!1,i,o);try{var D=m(),H=X.S;if(H!==null&&H(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=CA(D,u);Jc(r,i,W,Rr(r))}else Jc(r,i,u,Rr(r))}catch(re){Jc(r,i,{then:function(){},status:"rejected",reason:re},Rr())}finally{ue.p=y,_!==null&&S.types!==null&&(_.types=S.types),X.T=_}}function PA(){}function Dm(r,i,o,u){if(r.tag!==5)throw Error(n(476));var m=Kb(r).queue;$b(r,m,i,Ie,o===null?PA:function(){return Qb(r),o(u)})}function Kb(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:Ie},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Qb(r){var i=Kb(r);i.next===null&&(i=r.alternate.memoizedState),Jc(r,i.next.queue,{},Rr())}function jm(){return Rn(pu)}function Yb(){return on().memoizedState}function Xb(){return on().memoizedState}function MA(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Rr();r=Qi(o);var u=Yi(i,r,o);u!==null&&(pr(u,i,o),$c(u,i,o)),i={cache:lm()},r.payload=i;return}i=i.return}}function VA(r,i,o){var u=Rr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},vd(r)?Wb(i,o):(o=Jp(r,i,o,u),o!==null&&(pr(o,r,u),Zb(o,i,u)))}function Jb(r,i,o){var u=Rr();Jc(r,i,o,u)}function Jc(r,i,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(vd(r))Wb(i,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var _=i.lastRenderedState,S=y(_,o);if(m.hasEagerState=!0,m.eagerState=S,Tr(S,_))return Wh(r,i,m,0),Ct===null&&Jh(),!1}catch{}finally{}if(o=Jp(r,i,m,u),o!==null)return pr(o,r,u),Zb(o,i,u),!0}return!1}function Om(r,i,o,u){if(u={lane:2,revertLane:dg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},vd(r)){if(i)throw Error(n(479))}else i=Jp(r,o,u,2),i!==null&&pr(i,r,2)}function vd(r){var i=r.alternate;return r===ze||i!==null&&i===ze}function Wb(r,i){xl=hd=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function Zb(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Qt(r,o)}}var Wc={readContext:Rn,use:pd,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt};Wc.useEffectEvent=Wt;var ex={readContext:Rn,use:pd,useCallback:function(r,i){return tr().memoizedState=[r,i===void 0?null:i],r},useContext:Rn,useEffect:Vb,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,gd(4194308,4,zb.bind(null,i,r),o)},useLayoutEffect:function(r,i){return gd(4194308,4,r,i)},useInsertionEffect:function(r,i){gd(4,2,r,i)},useMemo:function(r,i){var o=tr();i=i===void 0?null:i;var u=r();if(po){Rt(!0);try{r()}finally{Rt(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=tr();if(o!==void 0){var m=o(i);if(po){Rt(!0);try{o(i)}finally{Rt(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=VA.bind(null,ze,r),[u.memoizedState,r]},useRef:function(r){var i=tr();return r={current:r},i.memoizedState=r},useState:function(r){r=Am(r);var i=r.queue,o=Jb.bind(null,ze,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Rm,useDeferredValue:function(r,i){var o=tr();return km(o,r,i)},useTransition:function(){var r=Am(!1);return r=$b.bind(null,ze,r.queue,!0,!1),tr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=ze,m=tr();if(tt){if(o===void 0)throw Error(n(407));o=o()}else{if(o=i(),Ct===null)throw Error(n(349));(Xe&127)!==0||_b(u,i,o)}m.memoizedState=o;var y={value:o,getSnapshot:i};return m.queue=y,Vb(Eb.bind(null,u,y,r),[r]),u.flags|=2048,wl(9,{destroy:void 0},wb.bind(null,u,y,o,i),null),o},useId:function(){var r=tr(),i=Ct.identifierPrefix;if(tt){var o=Ps,u=Os;o=(u&~(1<<32-xe(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=dd++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=RA++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:jm,useFormState:Db,useActionState:Db,useOptimistic:function(r){var i=tr();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Om.bind(null,ze,!0,o),o.dispatch=i,[r,i]},useMemoCache:Tm,useCacheRefresh:function(){return tr().memoizedState=MA.bind(null,ze)},useEffectEvent:function(r){var i=tr(),o={impl:r};return i.memoizedState=o,function(){if((ht&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}},Pm={readContext:Rn,use:pd,useCallback:Gb,useContext:Rn,useEffect:Cm,useImperativeHandle:Fb,useInsertionEffect:Ub,useLayoutEffect:Bb,useMemo:qb,useReducer:md,useRef:Mb,useState:function(){return md(ai)},useDebugValue:Rm,useDeferredValue:function(r,i){var o=on();return Hb(o,Nt.memoizedState,r,i)},useTransition:function(){var r=md(ai)[0],i=on().memoizedState;return[typeof r=="boolean"?r:Xc(r),i]},useSyncExternalStore:xb,useId:Yb,useHostTransitionStatus:jm,useFormState:jb,useActionState:jb,useOptimistic:function(r,i){var o=on();return Nb(o,Nt,r,i)},useMemoCache:Tm,useCacheRefresh:Xb};Pm.useEffectEvent=Lb;var tx={readContext:Rn,use:pd,useCallback:Gb,useContext:Rn,useEffect:Cm,useImperativeHandle:Fb,useInsertionEffect:Ub,useLayoutEffect:Bb,useMemo:qb,useReducer:Nm,useRef:Mb,useState:function(){return Nm(ai)},useDebugValue:Rm,useDeferredValue:function(r,i){var o=on();return Nt===null?km(o,r,i):Hb(o,Nt.memoizedState,r,i)},useTransition:function(){var r=Nm(ai)[0],i=on().memoizedState;return[typeof r=="boolean"?r:Xc(r),i]},useSyncExternalStore:xb,useId:Yb,useHostTransitionStatus:jm,useFormState:Pb,useActionState:Pb,useOptimistic:function(r,i){var o=on();return Nt!==null?Nb(o,Nt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Tm,useCacheRefresh:Xb};tx.useEffectEvent=Lb;function Mm(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:x({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Vm={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Rr(),m=Qi(u);m.payload=i,o!=null&&(m.callback=o),i=Yi(r,m,u),i!==null&&(pr(i,r,u),$c(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Rr(),m=Qi(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=Yi(r,m,u),i!==null&&(pr(i,r,u),$c(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Rr(),u=Qi(o);u.tag=2,i!=null&&(u.callback=i),i=Yi(r,u,o),i!==null&&(pr(i,r,o),$c(i,r,o))}};function nx(r,i,o,u,m,y,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,_):i.prototype&&i.prototype.isPureReactComponent?!Lc(o,u)||!Lc(m,y):!0}function rx(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Vm.enqueueReplaceState(i,i.state,null)}function mo(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=x({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}function sx(r){Xh(r)}function ix(r){console.error(r)}function ax(r){Xh(r)}function bd(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function ox(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Lm(r,i,o){return o=Qi(o),o.tag=3,o.payload={element:null},o.callback=function(){bd(r,i)},o}function lx(r){return r=Qi(r),r.tag=3,r}function cx(r,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;r.payload=function(){return m(y)},r.callback=function(){ox(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){ox(i,o,u),typeof m!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function LA(r,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&pl(i,o,m,!0),o=Nr.current,o!==null){switch(o.tag){case 31:case 13:return Zr===null?kd():o.alternate===null&&Zt===0&&(Zt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===ad?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),cg(r,u,m)),!1;case 22:return o.flags|=65536,u===ad?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),cg(r,u,m)),!1}throw Error(n(435,o.tag))}return cg(r,u,m),kd(),!1}if(tt)return i=Nr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==rm&&(r=Error(n(422),{cause:u}),zc(Yr(r,o)))):(u!==rm&&(i=Error(n(423),{cause:u}),zc(Yr(i,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Yr(u,o),m=Lm(r.stateNode,u,m),pm(r,m),Zt!==4&&(Zt=2)),!1;var y=Error(n(520),{cause:u});if(y=Yr(y,o),au===null?au=[y]:au.push(y),Zt!==4&&(Zt=2),i===null)return!0;u=Yr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=Lm(o.stateNode,u,r),pm(o,r),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ta===null||!ta.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=lx(m),cx(m,r,o,u),pm(o,m),!1}o=o.return}while(o!==null);return!1}var Um=Error(n(461)),pn=!1;function kn(r,i,o,u){i.child=r===null?fb(i,null,o,u):fo(i,r.child,o,u)}function ux(r,i,o,u,m){o=o.render;var y=i.ref;if("ref"in u){var _={};for(var S in u)S!=="ref"&&(_[S]=u[S])}else _=u;return lo(i),u=xm(r,i,o,_,y,m),S=_m(),r!==null&&!pn?(wm(r,i,m),oi(r,i,m)):(tt&&S&&tm(i),i.flags|=1,kn(r,i,u,m),i.child)}function hx(r,i,o,u,m){if(r===null){var y=o.type;return typeof y=="function"&&!Wp(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,dx(r,i,y,u,m)):(r=ed(o.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!Km(r,m)){var _=y.memoizedProps;if(o=o.compare,o=o!==null?o:Lc,o(_,u)&&r.ref===i.ref)return oi(r,i,m)}return i.flags|=1,r=ti(y,u),r.ref=i.ref,r.return=i,i.child=r}function dx(r,i,o,u,m){if(r!==null){var y=r.memoizedProps;if(Lc(y,u)&&r.ref===i.ref)if(pn=!1,i.pendingProps=u=y,Km(r,m))(r.flags&131072)!==0&&(pn=!0);else return i.lanes=r.lanes,oi(r,i,m)}return Bm(r,i,o,u,m)}function fx(r,i,o,u){var m=u.children,y=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,r!==null){for(u=i.child=r.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,i.child=null;return px(r,i,y,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&sd(i,y!==null?y.cachePool:null),y!==null?gb(i,y):gm(),yb(i);else return u=i.lanes=536870912,px(r,i,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(sd(i,y.cachePool),gb(i,y),Ji(),i.memoizedState=null):(r!==null&&sd(i,null),gm(),Ji());return kn(r,i,m,o),i.child}function Zc(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function px(r,i,o,u,m){var y=um();return y=y===null?null:{parent:dn._currentValue,pool:y},i.memoizedState={baseLanes:o,cachePool:y},r!==null&&sd(i,null),gm(),yb(i),r!==null&&pl(r,i,u,!0),i.childLanes=m,null}function xd(r,i){return i=wd({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function mx(r,i,o){return fo(i,r.child,null,o),r=xd(i,i.pendingProps),r.flags|=2,Ar(i),i.memoizedState=null,r}function UA(r,i,o){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(tt){if(u.mode==="hidden")return r=xd(i,u),i.lanes=536870912,Zc(null,r);if(vm(i),(r=Ot)?(r=A_(r,Wr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Gi!==null?{id:Os,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},o=Wv(r),o.return=i,i.child=o,Cn=i,Ot=null)):r=null,r===null)throw Hi(i);return i.lanes=536870912,null}return xd(i,u)}var y=r.memoizedState;if(y!==null){var _=y.dehydrated;if(vm(i),m)if(i.flags&256)i.flags&=-257,i=mx(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(n(558));else if(pn||pl(r,i,o,!1),m=(o&r.childLanes)!==0,pn||m){if(u=Ct,u!==null&&(_=Te(u,o),_!==0&&_!==y.retryLane))throw y.retryLane=_,so(r,_),pr(u,r,_),Um;kd(),i=mx(r,i,o)}else r=y.treeContext,Ot=es(_.nextSibling),Cn=i,tt=!0,qi=null,Wr=!1,r!==null&&tb(i,r),i=xd(i,u),i.flags|=4096;return i}return r=ti(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function _d(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Bm(r,i,o,u,m){return lo(i),o=xm(r,i,o,u,void 0,m),u=_m(),r!==null&&!pn?(wm(r,i,m),oi(r,i,m)):(tt&&u&&tm(i),i.flags|=1,kn(r,i,o,m),i.child)}function gx(r,i,o,u,m,y){return lo(i),i.updateQueue=null,o=bb(i,u,o,m),vb(r),u=_m(),r!==null&&!pn?(wm(r,i,y),oi(r,i,y)):(tt&&u&&tm(i),i.flags|=1,kn(r,i,o,y),i.child)}function yx(r,i,o,u,m){if(lo(i),i.stateNode===null){var y=ul,_=o.contextType;typeof _=="object"&&_!==null&&(y=Rn(_)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Vm,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},dm(i),_=o.contextType,y.context=typeof _=="object"&&_!==null?Rn(_):ul,y.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Mm(i,o,_,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&Vm.enqueueReplaceState(y,y.state,null),Qc(i,u,y,m),Kc(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){y=i.stateNode;var S=i.memoizedProps,D=mo(o,S);y.props=D;var H=y.context,W=o.contextType;_=ul,typeof W=="object"&&W!==null&&(_=Rn(W));var re=o.getDerivedStateFromProps;W=typeof re=="function"||typeof y.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,W||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S||H!==_)&&rx(i,y,u,_),Ki=!1;var $=i.memoizedState;y.state=$,Qc(i,u,y,m),Kc(),H=i.memoizedState,S||$!==H||Ki?(typeof re=="function"&&(Mm(i,o,re,u),H=i.memoizedState),(D=Ki||nx(i,o,D,u,$,H,_))?(W||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=H),y.props=u,y.state=H,y.context=_,u=D):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,fm(r,i),_=i.memoizedProps,W=mo(o,_),y.props=W,re=i.pendingProps,$=y.context,H=o.contextType,D=ul,typeof H=="object"&&H!==null&&(D=Rn(H)),S=o.getDerivedStateFromProps,(H=typeof S=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==re||$!==D)&&rx(i,y,u,D),Ki=!1,$=i.memoizedState,y.state=$,Qc(i,u,y,m),Kc();var Q=i.memoizedState;_!==re||$!==Q||Ki||r!==null&&r.dependencies!==null&&nd(r.dependencies)?(typeof S=="function"&&(Mm(i,o,S,u),Q=i.memoizedState),(W=Ki||nx(i,o,W,u,$,Q,D)||r!==null&&r.dependencies!==null&&nd(r.dependencies))?(H||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,Q,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,Q,D)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===r.memoizedProps&&$===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&$===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Q),y.props=u,y.state=Q,y.context=D,u=W):(typeof y.componentDidUpdate!="function"||_===r.memoizedProps&&$===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&$===r.memoizedState||(i.flags|=1024),u=!1)}return y=u,_d(r,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&u?(i.child=fo(i,r.child,null,m),i.child=fo(i,null,o,m)):kn(r,i,o,m),i.memoizedState=y.state,r=i.child):r=oi(r,i,m),r}function vx(r,i,o,u){return ao(),i.flags|=256,kn(r,i,o,u),i.child}var zm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fm(r){return{baseLanes:r,cachePool:ob()}}function Gm(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Cr),r}function bx(r,i,o){var u=i.pendingProps,m=!1,y=(i.flags&128)!==0,_;if((_=y)||(_=r!==null&&r.memoizedState===null?!1:(an.current&2)!==0),_&&(m=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,r===null){if(tt){if(m?Xi(i):Ji(),(r=Ot)?(r=A_(r,Wr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Gi!==null?{id:Os,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},o=Wv(r),o.return=i,i.child=o,Cn=i,Ot=null)):r=null,r===null)throw Hi(i);return Sg(r)?i.lanes=32:i.lanes=536870912,null}var S=u.children;return u=u.fallback,m?(Ji(),m=i.mode,S=wd({mode:"hidden",children:S},m),u=io(u,m,o,null),S.return=i,u.return=i,S.sibling=u,i.child=S,u=i.child,u.memoizedState=Fm(o),u.childLanes=Gm(r,_,o),i.memoizedState=zm,Zc(null,u)):(Xi(i),qm(i,S))}var D=r.memoizedState;if(D!==null&&(S=D.dehydrated,S!==null)){if(y)i.flags&256?(Xi(i),i.flags&=-257,i=Hm(r,i,o)):i.memoizedState!==null?(Ji(),i.child=r.child,i.flags|=128,i=null):(Ji(),S=u.fallback,m=i.mode,u=wd({mode:"visible",children:u.children},m),S=io(S,m,o,null),S.flags|=2,u.return=i,S.return=i,u.sibling=S,i.child=u,fo(i,r.child,null,o),u=i.child,u.memoizedState=Fm(o),u.childLanes=Gm(r,_,o),i.memoizedState=zm,i=Zc(null,u));else if(Xi(i),Sg(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var H=_.dgst;_=H,u=Error(n(419)),u.stack="",u.digest=_,zc({value:u,source:null,stack:null}),i=Hm(r,i,o)}else if(pn||pl(r,i,o,!1),_=(o&r.childLanes)!==0,pn||_){if(_=Ct,_!==null&&(u=Te(_,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,so(r,u),pr(_,r,u),Um;Tg(S)||kd(),i=Hm(r,i,o)}else Tg(S)?(i.flags|=192,i.child=r.child,i=null):(r=D.treeContext,Ot=es(S.nextSibling),Cn=i,tt=!0,qi=null,Wr=!1,r!==null&&tb(i,r),i=qm(i,u.children),i.flags|=4096);return i}return m?(Ji(),S=u.fallback,m=i.mode,D=r.child,H=D.sibling,u=ti(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,H!==null?S=ti(H,S):(S=io(S,m,o,null),S.flags|=2),S.return=i,u.return=i,u.sibling=S,i.child=u,Zc(null,u),u=i.child,S=r.child.memoizedState,S===null?S=Fm(o):(m=S.cachePool,m!==null?(D=dn._currentValue,m=m.parent!==D?{parent:D,pool:D}:m):m=ob(),S={baseLanes:S.baseLanes|o,cachePool:m}),u.memoizedState=S,u.childLanes=Gm(r,_,o),i.memoizedState=zm,Zc(r.child,u)):(Xi(i),o=r.child,r=o.sibling,o=ti(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(_=i.deletions,_===null?(i.deletions=[r],i.flags|=16):_.push(r)),i.child=o,i.memoizedState=null,o)}function qm(r,i){return i=wd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function wd(r,i){return r=Sr(22,r,null,i),r.lanes=0,r}function Hm(r,i,o){return fo(i,r.child,null,o),r=qm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function xx(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),am(r.return,i,o)}function $m(r,i,o,u,m,y){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:y}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=m,_.treeForkCount=y)}function _x(r,i,o){var u=i.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var _=an.current,S=(_&2)!==0;if(S?(_=_&1|2,i.flags|=128):_&=1,fe(an,_),kn(r,i,u,o),u=tt?Bc:0,!S&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&xx(r,o,i);else if(r.tag===19)xx(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)r=o.alternate,r!==null&&ud(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),$m(i,!1,m,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&ud(r)===null){i.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}$m(i,!0,o,null,y,u);break;case"together":$m(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function oi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),ea|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(pl(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,o=ti(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=ti(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Km(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&nd(r)))}function BA(r,i,o){switch(i.tag){case 3:Dt(i,i.stateNode.containerInfo),$i(i,dn,r.memoizedState.cache),ao();break;case 27:case 5:ss(i);break;case 4:Dt(i,i.stateNode.containerInfo);break;case 10:$i(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,vm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Xi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?bx(r,i,o):(Xi(i),r=oi(r,i,o),r!==null?r.sibling:null);Xi(i);break;case 19:var m=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(pl(r,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return _x(r,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),fe(an,an.current),u)break;return null;case 22:return i.lanes=0,fx(r,i,o,i.pendingProps);case 24:$i(i,dn,r.memoizedState.cache)}return oi(r,i,o)}function wx(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)pn=!0;else{if(!Km(r,o)&&(i.flags&128)===0)return pn=!1,BA(r,i,o);pn=(r.flags&131072)!==0}else pn=!1,tt&&(i.flags&1048576)!==0&&eb(i,Bc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=uo(i.elementType),i.type=r,typeof r=="function")Wp(r)?(u=mo(r,u),i.tag=1,i=yx(null,i,r,u,o)):(i.tag=0,i=Bm(null,i,r,u,o));else{if(r!=null){var m=r.$$typeof;if(m===ge){i.tag=11,i=ux(null,i,r,u,o);break e}else if(m===C){i.tag=14,i=hx(null,i,r,u,o);break e}}throw i=rt(r)||r,Error(n(306,i,""))}}return i;case 0:return Bm(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=mo(u,i.pendingProps),yx(r,i,u,m,o);case 3:e:{if(Dt(i,i.stateNode.containerInfo),r===null)throw Error(n(387));u=i.pendingProps;var y=i.memoizedState;m=y.element,fm(r,i),Qc(i,u,null,o);var _=i.memoizedState;if(u=_.cache,$i(i,dn,u),u!==y.cache&&om(i,[dn],o,!0),Kc(),u=_.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=vx(r,i,u,o);break e}else if(u!==m){m=Yr(Error(n(424)),i),zc(m),i=vx(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ot=es(r.firstChild),Cn=i,tt=!0,qi=null,Wr=!0,o=fb(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ao(),u===m){i=oi(r,i,o);break e}kn(r,i,u,o)}i=i.child}return i;case 26:return _d(r,i),r===null?(o=j_(i.type,null,i.pendingProps,null))?i.memoizedState=o:tt||(o=i.type,r=i.pendingProps,u=Ld(ke.current).createElement(o),u[Vt]=i,u[Yt]=r,Dn(u,o,r),Xt(u),i.stateNode=u):i.memoizedState=j_(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return ss(i),r===null&&tt&&(u=i.stateNode=R_(i.type,i.pendingProps,ke.current),Cn=i,Wr=!0,m=Ot,ia(i.type)?(Ng=m,Ot=es(u.firstChild)):Ot=m),kn(r,i,i.pendingProps.children,o),_d(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&tt&&((m=u=Ot)&&(u=gI(u,i.type,i.pendingProps,Wr),u!==null?(i.stateNode=u,Cn=i,Ot=es(u.firstChild),Wr=!1,m=!0):m=!1),m||Hi(i)),ss(i),m=i.type,y=i.pendingProps,_=r!==null?r.memoizedProps:null,u=y.children,_g(m,y)?u=null:_!==null&&_g(m,_)&&(i.flags|=32),i.memoizedState!==null&&(m=xm(r,i,kA,null,null,o),pu._currentValue=m),_d(r,i),kn(r,i,u,o),i.child;case 6:return r===null&&tt&&((r=o=Ot)&&(o=yI(o,i.pendingProps,Wr),o!==null?(i.stateNode=o,Cn=i,Ot=null,r=!0):r=!1),r||Hi(i)),null;case 13:return bx(r,i,o);case 4:return Dt(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=fo(i,null,u,o):kn(r,i,u,o),i.child;case 11:return ux(r,i,i.type,i.pendingProps,o);case 7:return kn(r,i,i.pendingProps,o),i.child;case 8:return kn(r,i,i.pendingProps.children,o),i.child;case 12:return kn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,$i(i,i.type,u.value),kn(r,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,lo(i),m=Rn(m),u=u(m),i.flags|=1,kn(r,i,u,o),i.child;case 14:return hx(r,i,i.type,i.pendingProps,o);case 15:return dx(r,i,i.type,i.pendingProps,o);case 19:return _x(r,i,o);case 31:return UA(r,i,o);case 22:return fx(r,i,o,i.pendingProps);case 24:return lo(i),u=Rn(dn),r===null?(m=um(),m===null&&(m=Ct,y=lm(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),i.memoizedState={parent:u,cache:m},dm(i),$i(i,dn,m)):((r.lanes&o)!==0&&(fm(r,i),Qc(i,null,null,o),Kc()),m=r.memoizedState,y=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),$i(i,dn,u)):(u=y.cache,$i(i,dn,u),u!==m.cache&&om(i,[dn],o,!0))),kn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function li(r){r.flags|=4}function Qm(r,i,o,u,m){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(Yx())r.flags|=8192;else throw ho=ad,hm}else r.flags&=-16777217}function Ex(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!L_(i))if(Yx())r.flags|=8192;else throw ho=ad,hm}function Ed(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ci():536870912,r.lanes|=i,Nl|=i)}function eu(r,i){if(!tt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Pt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function zA(r,i,o){var u=i.pendingProps;switch(nm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(i),null;case 1:return Pt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),si(dn),pt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(fl(i)?li(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,sm())),Pt(i),null;case 26:var m=i.type,y=i.memoizedState;return r===null?(li(i),y!==null?(Pt(i),Ex(i,y)):(Pt(i),Qm(i,m,null,u,o))):y?y!==r.memoizedState?(li(i),Pt(i),Ex(i,y)):(Pt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&li(i),Pt(i),Qm(i,m,r,u,o)),null;case 27:if(Kt(i),o=ke.current,m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&li(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return Pt(i),null}r=be.current,fl(i)?nb(i):(r=R_(m,u,o),i.stateNode=r,li(i))}return Pt(i),null;case 5:if(Kt(i),m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&li(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return Pt(i),null}if(y=be.current,fl(i))nb(i);else{var _=Ld(ke.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?_.createElement(m,{is:u.is}):_.createElement(m)}}y[Vt]=i,y[Yt]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=y;e:switch(Dn(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&li(i)}}return Pt(i),Qm(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&li(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(r=ke.current,fl(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,m=Cn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[Vt]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||b_(r.nodeValue,o)),r||Hi(i,!0)}else r=Ld(r).createTextNode(u),r[Vt]=i,i.stateNode=r}return Pt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=fl(i),o!==null){if(r===null){if(!u)throw Error(n(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[Vt]=i}else ao(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Pt(i),r=!1}else o=sm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(Ar(i),i):(Ar(i),null);if((i.flags&128)!==0)throw Error(n(558))}return Pt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=fl(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(n(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[Vt]=i}else ao(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Pt(i),m=!1}else m=sm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Ar(i),i):(Ar(i),null)}return Ar(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Ed(i,i.updateQueue),Pt(i),null);case 4:return pt(),r===null&&gg(i.stateNode.containerInfo),Pt(i),null;case 10:return si(i.type),Pt(i),null;case 19:if(ne(an),u=i.memoizedState,u===null)return Pt(i),null;if(m=(i.flags&128)!==0,y=u.rendering,y===null)if(m)eu(u,!1);else{if(Zt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=ud(r),y!==null){for(i.flags|=128,eu(u,!1),r=y.updateQueue,i.updateQueue=r,Ed(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Jv(o,r),o=o.sibling;return fe(an,an.current&1|2),tt&&ni(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&bn()>Id&&(i.flags|=128,m=!0,eu(u,!1),i.lanes=4194304)}else{if(!m)if(r=ud(y),r!==null){if(i.flags|=128,m=!0,r=r.updateQueue,i.updateQueue=r,Ed(i,r),eu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!tt)return Pt(i),null}else 2*bn()-u.renderingStartTime>Id&&o!==536870912&&(i.flags|=128,m=!0,eu(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(r=u.last,r!==null?r.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=bn(),r.sibling=null,o=an.current,fe(an,m?o&1|2:o&1),tt&&ni(i,u.treeForkCount),r):(Pt(i),null);case 22:case 23:return Ar(i),ym(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Pt(i),i.subtreeFlags&6&&(i.flags|=8192)):Pt(i),o=i.updateQueue,o!==null&&Ed(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ne(co),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),si(dn),Pt(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function FA(r,i){switch(nm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return si(dn),pt(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Kt(i),null;case 31:if(i.memoizedState!==null){if(Ar(i),i.alternate===null)throw Error(n(340));ao()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Ar(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ao()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ne(an),null;case 4:return pt(),null;case 10:return si(i.type),null;case 22:case 23:return Ar(i),ym(),r!==null&&ne(co),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return si(dn),null;case 25:return null;default:return null}}function Tx(r,i){switch(nm(i),i.tag){case 3:si(dn),pt();break;case 26:case 27:case 5:Kt(i);break;case 4:pt();break;case 31:i.memoizedState!==null&&Ar(i);break;case 13:Ar(i);break;case 19:ne(an);break;case 10:si(i.type);break;case 22:case 23:Ar(i),ym(),r!==null&&ne(co);break;case 24:si(dn)}}function tu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var y=o.create,_=o.inst;u=y(),_.destroy=u}o=o.next}while(o!==m)}}catch(S){vt(i,i.return,S)}}function Wi(r,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&r)===r){var _=u.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,m=i;var D=o,H=S;try{H()}catch(W){vt(m,D,W)}}}u=u.next}while(u!==y)}}catch(W){vt(i,i.return,W)}}function Sx(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{mb(i,o)}catch(u){vt(r,r.return,u)}}}function Nx(r,i,o){o.props=mo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){vt(r,i,u)}}function nu(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){vt(r,i,m)}}function Ms(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){vt(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){vt(r,i,m)}else o.current=null}function Ax(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){vt(r,r.return,m)}}function Ym(r,i,o){try{var u=r.stateNode;uI(u,r.type,o,i),u[Yt]=i}catch(m){vt(r,r.return,m)}}function Ix(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ia(r.type)||r.tag===4}function Xm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ix(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ia(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Jm(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ls));else if(u!==4&&(u===27&&ia(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Jm(r,i,o),r=r.sibling;r!==null;)Jm(r,i,o),r=r.sibling}function Td(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&ia(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Td(r,i,o),r=r.sibling;r!==null;)Td(r,i,o),r=r.sibling}function Cx(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Dn(i,u,o),i[Vt]=r,i[Yt]=o}catch(y){vt(r,r.return,y)}}var ci=!1,mn=!1,Wm=!1,Rx=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function GA(r,i){if(r=r.containerInfo,bg=Hd,r=Fv(r),Hp(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var _=0,S=-1,D=-1,H=0,W=0,re=r,$=null;t:for(;;){for(var Q;re!==o||m!==0&&re.nodeType!==3||(S=_+m),re!==y||u!==0&&re.nodeType!==3||(D=_+u),re.nodeType===3&&(_+=re.nodeValue.length),(Q=re.firstChild)!==null;)$=re,re=Q;for(;;){if(re===r)break t;if($===o&&++H===m&&(S=_),$===y&&++W===u&&(D=_),(Q=re.nextSibling)!==null)break;re=$,$=re.parentNode}re=Q}o=S===-1||D===-1?null:{start:S,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(xg={focusedElem:r,selectionRange:o},Hd=!1,Tn=i;Tn!==null;)if(i=Tn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Tn=r;else for(;Tn!==null;){switch(i=Tn,y=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)m=r[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=i,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var we=mo(o.type,m);r=u.getSnapshotBeforeUpdate(we,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Pe){vt(o,o.return,Pe)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Eg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Eg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=i.sibling,r!==null){r.return=i.return,Tn=r;break}Tn=i.return}}function kx(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:hi(r,o),u&4&&tu(5,o);break;case 1:if(hi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(_){vt(o,o.return,_)}else{var m=mo(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(_){vt(o,o.return,_)}}u&64&&Sx(o),u&512&&nu(o,o.return);break;case 3:if(hi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{mb(r,i)}catch(_){vt(o,o.return,_)}}break;case 27:i===null&&u&4&&Cx(o);case 26:case 5:hi(r,o),i===null&&u&4&&Ax(o),u&512&&nu(o,o.return);break;case 12:hi(r,o);break;case 31:hi(r,o),u&4&&Ox(r,o);break;case 13:hi(r,o),u&4&&Px(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=WA.bind(null,o),vI(r,o))));break;case 22:if(u=o.memoizedState!==null||ci,!u){i=i!==null&&i.memoizedState!==null||mn,m=ci;var y=mn;ci=u,(mn=i)&&!y?di(r,o,(o.subtreeFlags&8772)!==0):hi(r,o),ci=m,mn=y}break;case 30:break;default:hi(r,o)}}function Dx(r){var i=r.alternate;i!==null&&(r.alternate=null,Dx(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Js(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Bt=null,ur=!1;function ui(r,i,o){for(o=o.child;o!==null;)jx(r,i,o),o=o.sibling}function jx(r,i,o){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(Mn,o)}catch{}switch(o.tag){case 26:mn||Ms(o,i),ui(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:mn||Ms(o,i);var u=Bt,m=ur;ia(o.type)&&(Bt=o.stateNode,ur=!1),ui(r,i,o),hu(o.stateNode),Bt=u,ur=m;break;case 5:mn||Ms(o,i);case 6:if(u=Bt,m=ur,Bt=null,ui(r,i,o),Bt=u,ur=m,Bt!==null)if(ur)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(o.stateNode)}catch(y){vt(o,i,y)}else try{Bt.removeChild(o.stateNode)}catch(y){vt(o,i,y)}break;case 18:Bt!==null&&(ur?(r=Bt,S_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Ol(r)):S_(Bt,o.stateNode));break;case 4:u=Bt,m=ur,Bt=o.stateNode.containerInfo,ur=!0,ui(r,i,o),Bt=u,ur=m;break;case 0:case 11:case 14:case 15:Wi(2,o,i),mn||Wi(4,o,i),ui(r,i,o);break;case 1:mn||(Ms(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Nx(o,i,u)),ui(r,i,o);break;case 21:ui(r,i,o);break;case 22:mn=(u=mn)||o.memoizedState!==null,ui(r,i,o),mn=u;break;default:ui(r,i,o)}}function Ox(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ol(r)}catch(o){vt(i,i.return,o)}}}function Px(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ol(r)}catch(o){vt(i,i.return,o)}}function qA(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Rx),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Rx),i;default:throw Error(n(435,r.tag))}}function Sd(r,i){var o=qA(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var m=ZA.bind(null,r,u);u.then(m,m)}})}function hr(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=r,_=i,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(ia(S.type)){Bt=S.stateNode,ur=!1;break e}break;case 5:Bt=S.stateNode,ur=!1;break e;case 3:case 4:Bt=S.stateNode.containerInfo,ur=!0;break e}S=S.return}if(Bt===null)throw Error(n(160));jx(y,_,m),Bt=null,ur=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Mx(i,r),i=i.sibling}var ps=null;function Mx(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:hr(i,r),dr(r),u&4&&(Wi(3,r,r.return),tu(3,r),Wi(5,r,r.return));break;case 1:hr(i,r),dr(r),u&512&&(mn||o===null||Ms(o,o.return)),u&64&&ci&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=ps;if(hr(i,r),dr(r),u&512&&(mn||o===null||Ms(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[_r]||y[Vt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),Dn(y,u,o),y[Vt]=r,Xt(y),u=y;break e;case"link":var _=M_("link","href",m).get(u+(o.href||""));if(_){for(var S=0;S<_.length;S++)if(y=_[S],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(S,1);break t}}y=m.createElement(u),Dn(y,u,o),m.head.appendChild(y);break;case"meta":if(_=M_("meta","content",m).get(u+(o.content||""))){for(S=0;S<_.length;S++)if(y=_[S],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(S,1);break t}}y=m.createElement(u),Dn(y,u,o),m.head.appendChild(y);break;default:throw Error(n(468,u))}y[Vt]=r,Xt(y),u=y}r.stateNode=u}else V_(m,r.type,r.stateNode);else r.stateNode=P_(m,u,r.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?V_(m,r.type,r.stateNode):P_(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Ym(r,r.memoizedProps,o.memoizedProps)}break;case 27:hr(i,r),dr(r),u&512&&(mn||o===null||Ms(o,o.return)),o!==null&&u&4&&Ym(r,r.memoizedProps,o.memoizedProps);break;case 5:if(hr(i,r),dr(r),u&512&&(mn||o===null||Ms(o,o.return)),r.flags&32){m=r.stateNode;try{se(m,"")}catch(we){vt(r,r.return,we)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Ym(r,m,o!==null?o.memoizedProps:m)),u&1024&&(Wm=!0);break;case 6:if(hr(i,r),dr(r),u&4){if(r.stateNode===null)throw Error(n(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(we){vt(r,r.return,we)}}break;case 3:if(zd=null,m=ps,ps=Ud(i.containerInfo),hr(i,r),ps=m,dr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ol(i.containerInfo)}catch(we){vt(r,r.return,we)}Wm&&(Wm=!1,Vx(r));break;case 4:u=ps,ps=Ud(r.stateNode.containerInfo),hr(i,r),dr(r),ps=u;break;case 12:hr(i,r),dr(r);break;case 31:hr(i,r),dr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sd(r,u)));break;case 13:hr(i,r),dr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ad=bn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sd(r,u)));break;case 22:m=r.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,H=ci,W=mn;if(ci=H||m,mn=W||D,hr(i,r),mn=W,ci=H,dr(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||D||ci||mn||go(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(y=D.stateNode,m)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=D.stateNode;var re=D.memoizedProps.style,$=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(we){vt(D,D.return,we)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=m?"":D.memoizedProps}catch(we){vt(D,D.return,we)}}}else if(i.tag===18){if(o===null){D=i;try{var Q=D.stateNode;m?N_(Q,!0):N_(D.stateNode,!1)}catch(we){vt(D,D.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Sd(r,o))));break;case 19:hr(i,r),dr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sd(r,u)));break;case 30:break;case 21:break;default:hr(i,r),dr(r)}}function dr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(Ix(u)){o=u;break}u=u.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var m=o.stateNode,y=Xm(r);Td(r,y,m);break;case 5:var _=o.stateNode;o.flags&32&&(se(_,""),o.flags&=-33);var S=Xm(r);Td(r,S,_);break;case 3:case 4:var D=o.stateNode.containerInfo,H=Xm(r);Jm(r,H,D);break;default:throw Error(n(161))}}catch(W){vt(r,r.return,W)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Vx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Vx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function hi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)kx(r,i.alternate,i),i=i.sibling}function go(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Wi(4,i,i.return),go(i);break;case 1:Ms(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Nx(i,i.return,o),go(i);break;case 27:hu(i.stateNode);case 26:case 5:Ms(i,i.return),go(i);break;case 22:i.memoizedState===null&&go(i);break;case 30:go(i);break;default:go(i)}r=r.sibling}}function di(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,y=i,_=y.flags;switch(y.tag){case 0:case 11:case 15:di(m,y,o),tu(4,y);break;case 1:if(di(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(H){vt(u,u.return,H)}if(u=y,m=u.updateQueue,m!==null){var S=u.stateNode;try{var D=m.shared.hiddenCallbacks;if(D!==null)for(m.shared.hiddenCallbacks=null,m=0;m<D.length;m++)pb(D[m],S)}catch(H){vt(u,u.return,H)}}o&&_&64&&Sx(y),nu(y,y.return);break;case 27:Cx(y);case 26:case 5:di(m,y,o),o&&u===null&&_&4&&Ax(y),nu(y,y.return);break;case 12:di(m,y,o);break;case 31:di(m,y,o),o&&_&4&&Ox(m,y);break;case 13:di(m,y,o),o&&_&4&&Px(m,y);break;case 22:y.memoizedState===null&&di(m,y,o),nu(y,y.return);break;case 30:break;default:di(m,y,o)}i=i.sibling}}function Zm(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Fc(o))}function eg(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Fc(r))}function ms(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Lx(r,i,o,u),i=i.sibling}function Lx(r,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:ms(r,i,o,u),m&2048&&tu(9,i);break;case 1:ms(r,i,o,u);break;case 3:ms(r,i,o,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Fc(r)));break;case 12:if(m&2048){ms(r,i,o,u),r=i.stateNode;try{var y=i.memoizedProps,_=y.id,S=y.onPostCommit;typeof S=="function"&&S(_,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){vt(i,i.return,D)}}else ms(r,i,o,u);break;case 31:ms(r,i,o,u);break;case 13:ms(r,i,o,u);break;case 23:break;case 22:y=i.stateNode,_=i.alternate,i.memoizedState!==null?y._visibility&2?ms(r,i,o,u):ru(r,i):y._visibility&2?ms(r,i,o,u):(y._visibility|=2,El(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Zm(_,i);break;case 24:ms(r,i,o,u),m&2048&&eg(i.alternate,i);break;default:ms(r,i,o,u)}}function El(r,i,o,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=r,_=i,S=o,D=u,H=_.flags;switch(_.tag){case 0:case 11:case 15:El(y,_,S,D,m),tu(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?El(y,_,S,D,m):ru(y,_):(W._visibility|=2,El(y,_,S,D,m)),m&&H&2048&&Zm(_.alternate,_);break;case 24:El(y,_,S,D,m),m&&H&2048&&eg(_.alternate,_);break;default:El(y,_,S,D,m)}i=i.sibling}}function ru(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,m=u.flags;switch(u.tag){case 22:ru(o,u),m&2048&&Zm(u.alternate,u);break;case 24:ru(o,u),m&2048&&eg(u.alternate,u);break;default:ru(o,u)}i=i.sibling}}var su=8192;function Tl(r,i,o){if(r.subtreeFlags&su)for(r=r.child;r!==null;)Ux(r,i,o),r=r.sibling}function Ux(r,i,o){switch(r.tag){case 26:Tl(r,i,o),r.flags&su&&r.memoizedState!==null&&RI(o,ps,r.memoizedState,r.memoizedProps);break;case 5:Tl(r,i,o);break;case 3:case 4:var u=ps;ps=Ud(r.stateNode.containerInfo),Tl(r,i,o),ps=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=su,su=16777216,Tl(r,i,o),su=u):Tl(r,i,o));break;default:Tl(r,i,o)}}function Bx(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function iu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Tn=u,Fx(u,r)}Bx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zx(r),r=r.sibling}function zx(r){switch(r.tag){case 0:case 11:case 15:iu(r),r.flags&2048&&Wi(9,r,r.return);break;case 3:iu(r);break;case 12:iu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Nd(r)):iu(r);break;default:iu(r)}}function Nd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Tn=u,Fx(u,r)}Bx(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Wi(8,i,i.return),Nd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Nd(i));break;default:Nd(i)}r=r.sibling}}function Fx(r,i){for(;Tn!==null;){var o=Tn;switch(o.tag){case 0:case 11:case 15:Wi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Fc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Tn=u;else e:for(o=r;Tn!==null;){u=Tn;var m=u.sibling,y=u.return;if(Dx(u),u===o){Tn=null;break e}if(m!==null){m.return=y,Tn=m;break e}Tn=y}}}var HA={getCacheForType:function(r){var i=Rn(dn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Rn(dn).controller.signal}},$A=typeof WeakMap=="function"?WeakMap:Map,ht=0,Ct=null,Ke=null,Xe=0,yt=0,Ir=null,Zi=!1,Sl=!1,tg=!1,fi=0,Zt=0,ea=0,yo=0,ng=0,Cr=0,Nl=0,au=null,fr=null,rg=!1,Ad=0,Gx=0,Id=1/0,Cd=null,ta=null,_n=0,na=null,Al=null,pi=0,sg=0,ig=null,qx=null,ou=0,ag=null;function Rr(){return(ht&2)!==0&&Xe!==0?Xe&-Xe:X.T!==null?dg():Ha()}function Hx(){if(Cr===0)if((Xe&536870912)===0||tt){var r=Lr;Lr<<=1,(Lr&3932160)===0&&(Lr=262144),Cr=r}else Cr=536870912;return r=Nr.current,r!==null&&(r.flags|=32),Cr}function pr(r,i,o){(r===Ct&&(yt===2||yt===9)||r.cancelPendingCommit!==null)&&(Il(r,0),ra(r,Xe,Cr,!1)),Xs(r,o),((ht&2)===0||r!==Ct)&&(r===Ct&&((ht&2)===0&&(yo|=o),Zt===4&&ra(r,Xe,Cr,!1)),Vs(r))}function $x(r,i,o){if((ht&6)!==0)throw Error(n(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||Vn(r,i),m=u?YA(r,i):lg(r,i,!0),y=u;do{if(m===0){Sl&&!u&&ra(r,i,0,!1);break}else{if(o=r.current.alternate,y&&!KA(o)){m=lg(r,i,!1),y=!1;continue}if(m===2){if(y=i,r.errorRecoveryDisabledLanes&y)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var S=r;m=au;var D=S.current.memoizedState.isDehydrated;if(D&&(Il(S,_).flags|=256),_=lg(S,_,!1),_!==2){if(tg&&!D){S.errorRecoveryDisabledLanes|=y,yo|=y,m=4;break e}y=fr,fr=m,y!==null&&(fr===null?fr=y:fr.push.apply(fr,y))}m=_}if(y=!1,m!==2)continue}}if(m===1){Il(r,0),ra(r,i,0,!0);break}e:{switch(u=r,y=m,y){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:ra(u,i,Cr,!Zi);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(m=Ad+300-bn(),10<m)){if(ra(u,i,Cr,!Zi),Ur(u,0,!0)!==0)break e;pi=i,u.timeoutHandle=E_(Kx.bind(null,u,o,fr,Cd,rg,i,Cr,yo,Nl,Zi,y,"Throttled",-0,0),m);break e}Kx(u,o,fr,Cd,rg,i,Cr,yo,Nl,Zi,y,null,-0,0)}}break}while(!0);Vs(r)}function Kx(r,i,o,u,m,y,_,S,D,H,W,re,$,Q){if(r.timeoutHandle=-1,re=i.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ls},Ux(i,y,re);var we=(y&62914560)===y?Ad-bn():(y&4194048)===y?Gx-bn():0;if(we=kI(re,we),we!==null){pi=y,r.cancelPendingCommit=we(t_.bind(null,r,i,y,o,u,m,_,S,D,W,re,null,$,Q)),ra(r,y,_,!H);return}}t_(r,i,y,o,u,m,_,S,D)}function KA(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!Tr(y(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ra(r,i,o,u){i&=~ng,i&=~yo,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var y=31-xe(m),_=1<<y;u[y]=-1,m&=~_}o!==0&&as(r,o,i)}function Rd(){return(ht&6)===0?(lu(0),!1):!0}function og(){if(Ke!==null){if(yt===0)var r=Ke.return;else r=Ke,ri=oo=null,Em(r),vl=null,qc=0,r=Ke;for(;r!==null;)Tx(r.alternate,r),r=r.return;Ke=null}}function Il(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,fI(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),pi=0,og(),Ct=r,Ke=o=ti(r.current,null),Xe=i,yt=0,Ir=null,Zi=!1,Sl=Vn(r,i),tg=!1,Nl=Cr=ng=yo=ea=Zt=0,fr=au=null,rg=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-xe(u),y=1<<m;i|=r[m],u&=~y}return fi=i,Jh(),o}function Qx(r,i){ze=null,X.H=Wc,i===yl||i===id?(i=ub(),yt=3):i===hm?(i=ub(),yt=4):yt=i===Um?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ir=i,Ke===null&&(Zt=1,bd(r,Yr(i,r.current)))}function Yx(){var r=Nr.current;return r===null?!0:(Xe&4194048)===Xe?Zr===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?r===Zr:!1}function Xx(){var r=X.H;return X.H=Wc,r===null?Wc:r}function Jx(){var r=X.A;return X.A=HA,r}function kd(){Zt=4,Zi||(Xe&4194048)!==Xe&&Nr.current!==null||(Sl=!0),(ea&134217727)===0&&(yo&134217727)===0||Ct===null||ra(Ct,Xe,Cr,!1)}function lg(r,i,o){var u=ht;ht|=2;var m=Xx(),y=Jx();(Ct!==r||Xe!==i)&&(Cd=null,Il(r,i)),i=!1;var _=Zt;e:do try{if(yt!==0&&Ke!==null){var S=Ke,D=Ir;switch(yt){case 8:og(),_=6;break e;case 3:case 2:case 9:case 6:Nr.current===null&&(i=!0);var H=yt;if(yt=0,Ir=null,Cl(r,S,D,H),o&&Sl){_=0;break e}break;default:H=yt,yt=0,Ir=null,Cl(r,S,D,H)}}QA(),_=Zt;break}catch(W){Qx(r,W)}while(!0);return i&&r.shellSuspendCounter++,ri=oo=null,ht=u,X.H=m,X.A=y,Ke===null&&(Ct=null,Xe=0,Jh()),_}function QA(){for(;Ke!==null;)Wx(Ke)}function YA(r,i){var o=ht;ht|=2;var u=Xx(),m=Jx();Ct!==r||Xe!==i?(Cd=null,Id=bn()+500,Il(r,i)):Sl=Vn(r,i);e:do try{if(yt!==0&&Ke!==null){i=Ke;var y=Ir;t:switch(yt){case 1:yt=0,Ir=null,Cl(r,i,y,1);break;case 2:case 9:if(lb(y)){yt=0,Ir=null,Zx(i);break}i=function(){yt!==2&&yt!==9||Ct!==r||(yt=7),Vs(r)},y.then(i,i);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:lb(y)?(yt=0,Ir=null,Zx(i)):(yt=0,Ir=null,Cl(r,i,y,7));break;case 5:var _=null;switch(Ke.tag){case 26:_=Ke.memoizedState;case 5:case 27:var S=Ke;if(_?L_(_):S.stateNode.complete){yt=0,Ir=null;var D=S.sibling;if(D!==null)Ke=D;else{var H=S.return;H!==null?(Ke=H,Dd(H)):Ke=null}break t}}yt=0,Ir=null,Cl(r,i,y,5);break;case 6:yt=0,Ir=null,Cl(r,i,y,6);break;case 8:og(),Zt=6;break e;default:throw Error(n(462))}}XA();break}catch(W){Qx(r,W)}while(!0);return ri=oo=null,X.H=u,X.A=m,ht=o,Ke!==null?0:(Ct=null,Xe=0,Jh(),Zt)}function XA(){for(;Ke!==null&&!Es();)Wx(Ke)}function Wx(r){var i=wx(r.alternate,r,fi);r.memoizedProps=r.pendingProps,i===null?Dd(r):Ke=i}function Zx(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=gx(o,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=gx(o,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:Em(i);default:Tx(o,i),i=Ke=Jv(i,fi),i=wx(o,i,fi)}r.memoizedProps=r.pendingProps,i===null?Dd(r):Ke=i}function Cl(r,i,o,u){ri=oo=null,Em(i),vl=null,qc=0;var m=i.return;try{if(LA(r,m,i,o,Xe)){Zt=1,bd(r,Yr(o,r.current)),Ke=null;return}}catch(y){if(m!==null)throw Ke=m,y;Zt=1,bd(r,Yr(o,r.current)),Ke=null;return}i.flags&32768?(tt||u===1?r=!0:Sl||(Xe&536870912)!==0?r=!1:(Zi=r=!0,(u===2||u===9||u===3||u===6)&&(u=Nr.current,u!==null&&u.tag===13&&(u.flags|=16384))),e_(i,r)):Dd(i)}function Dd(r){var i=r;do{if((i.flags&32768)!==0){e_(i,Zi);return}r=i.return;var o=zA(i.alternate,i,fi);if(o!==null){Ke=o;return}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=r}while(i!==null);Zt===0&&(Zt=5)}function e_(r,i){do{var o=FA(r.alternate,r);if(o!==null){o.flags&=32767,Ke=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Ke=r;return}Ke=r=o}while(r!==null);Zt=6,Ke=null}function t_(r,i,o,u,m,y,_,S,D){r.cancelPendingCommit=null;do jd();while(_n!==0);if((ht&6)!==0)throw Error(n(327));if(i!==null){if(i===r.current)throw Error(n(177));if(y=i.lanes|i.childLanes,y|=Xp,qa(r,o,y,_,S,D),r===Ct&&(Ke=Ct=null,Xe=0),Al=i,na=r,pi=o,sg=y,ig=m,qx=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,eI(Y,function(){return a_(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,m=ue.p,ue.p=2,_=ht,ht|=4;try{GA(r,i,o)}finally{ht=_,ue.p=m,X.T=u}}_n=1,n_(),r_(),s_()}}function n_(){if(_n===1){_n=0;var r=na,i=Al,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=ue.p;ue.p=2;var m=ht;ht|=4;try{Mx(i,r);var y=xg,_=Fv(r.containerInfo),S=y.focusedElem,D=y.selectionRange;if(_!==S&&S&&S.ownerDocument&&zv(S.ownerDocument.documentElement,S)){if(D!==null&&Hp(S)){var H=D.start,W=D.end;if(W===void 0&&(W=H),"selectionStart"in S)S.selectionStart=H,S.selectionEnd=Math.min(W,S.value.length);else{var re=S.ownerDocument||document,$=re&&re.defaultView||window;if($.getSelection){var Q=$.getSelection(),we=S.textContent.length,Pe=Math.min(D.start,we),It=D.end===void 0?Pe:Math.min(D.end,we);!Q.extend&&Pe>It&&(_=It,It=Pe,Pe=_);var B=Bv(S,Pe),V=Bv(S,It);if(B&&V&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==V.node||Q.focusOffset!==V.offset)){var q=re.createRange();q.setStart(B.node,B.offset),Q.removeAllRanges(),Pe>It?(Q.addRange(q),Q.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),Q.addRange(q))}}}}for(re=[],Q=S;Q=Q.parentNode;)Q.nodeType===1&&re.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var te=re[S];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Hd=!!bg,xg=bg=null}finally{ht=m,ue.p=u,X.T=o}}r.current=i,_n=2}}function r_(){if(_n===2){_n=0;var r=na,i=Al,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=ue.p;ue.p=2;var m=ht;ht|=4;try{kx(r,i.alternate,i)}finally{ht=m,ue.p=u,X.T=o}}_n=3}}function s_(){if(_n===4||_n===3){_n=0,Yn();var r=na,i=Al,o=pi,u=qx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?_n=5:(_n=0,Al=na=null,i_(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(ta=null),os(o),i=i.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(Mn,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=X.T,m=ue.p,ue.p=2,X.T=null;try{for(var y=r.onRecoverableError,_=0;_<u.length;_++){var S=u[_];y(S.value,{componentStack:S.stack})}}finally{X.T=i,ue.p=m}}(pi&3)!==0&&jd(),Vs(r),m=r.pendingLanes,(o&261930)!==0&&(m&42)!==0?r===ag?ou++:(ou=0,ag=r):ou=0,lu(0)}}function i_(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Fc(i)))}function jd(){return n_(),r_(),s_(),a_()}function a_(){if(_n!==5)return!1;var r=na,i=sg;sg=0;var o=os(pi),u=X.T,m=ue.p;try{ue.p=32>o?32:o,X.T=null,o=ig,ig=null;var y=na,_=pi;if(_n=0,Al=na=null,pi=0,(ht&6)!==0)throw Error(n(331));var S=ht;if(ht|=4,zx(y.current),Lx(y,y.current,_,o),ht=S,lu(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(Mn,y)}catch{}return!0}finally{ue.p=m,X.T=u,i_(r,i)}}function o_(r,i,o){i=Yr(o,i),i=Lm(r.stateNode,i,2),r=Yi(r,i,2),r!==null&&(Xs(r,2),Vs(r))}function vt(r,i,o){if(r.tag===3)o_(r,r,o);else for(;i!==null;){if(i.tag===3){o_(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ta===null||!ta.has(u))){r=Yr(o,r),o=lx(2),u=Yi(i,o,2),u!==null&&(cx(o,u,i,r),Xs(u,2),Vs(u));break}}i=i.return}}function cg(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new $A;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(tg=!0,m.add(o),r=JA.bind(null,r,i,o),i.then(r,r))}function JA(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Ct===r&&(Xe&o)===o&&(Zt===4||Zt===3&&(Xe&62914560)===Xe&&300>bn()-Ad?(ht&2)===0&&Il(r,0):ng|=o,Nl===Xe&&(Nl=0)),Vs(r)}function l_(r,i){i===0&&(i=Ci()),r=so(r,i),r!==null&&(Xs(r,i),Vs(r))}function WA(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),l_(r,o)}function ZA(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(i),l_(r,o)}function eI(r,i){return st(r,i)}var Od=null,Rl=null,ug=!1,Pd=!1,hg=!1,sa=0;function Vs(r){r!==Rl&&r.next===null&&(Rl===null?Od=Rl=r:Rl=Rl.next=r),Pd=!0,ug||(ug=!0,nI())}function lu(r,i){if(!hg&&Pd){hg=!0;do for(var o=!1,u=Od;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var _=u.suspendedLanes,S=u.pingedLanes;y=(1<<31-xe(42|r)+1)-1,y&=m&~(_&~S),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,d_(u,y))}else y=Xe,y=Ur(u,u===Ct?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Vn(u,y)||(o=!0,d_(u,y));u=u.next}while(o);hg=!1}}function tI(){c_()}function c_(){Pd=ug=!1;var r=0;sa!==0&&dI()&&(r=sa);for(var i=bn(),o=null,u=Od;u!==null;){var m=u.next,y=u_(u,i);y===0?(u.next=null,o===null?Od=m:o.next=m,m===null&&(Rl=o)):(o=u,(r!==0||(y&3)!==0)&&(Pd=!0)),u=m}_n!==0&&_n!==5||lu(r),sa!==0&&(sa=0)}function u_(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var _=31-xe(y),S=1<<_,D=m[_];D===-1?((S&o)===0||(S&u)!==0)&&(m[_]=Jo(S,i)):D<=i&&(r.expiredLanes|=S),y&=~S}if(i=Ct,o=Xe,o=Ur(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(yt===2||yt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&nn(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Vn(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&nn(u),os(o)){case 2:case 8:o=ar;break;case 32:o=Y;break;case 268435456:o=mt;break;default:o=Y}return u=h_.bind(null,r),o=st(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&nn(u),r.callbackPriority=2,r.callbackNode=null,2}function h_(r,i){if(_n!==0&&_n!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(jd()&&r.callbackNode!==o)return null;var u=Xe;return u=Ur(r,r===Ct?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:($x(r,u,i),u_(r,bn()),r.callbackNode!=null&&r.callbackNode===o?h_.bind(null,r):null)}function d_(r,i){if(jd())return null;$x(r,i,!0)}function nI(){pI(function(){(ht&6)!==0?st(ir,tI):c_()})}function dg(){if(sa===0){var r=ml;r===0&&(r=An,An<<=1,(An&261888)===0&&(An=256)),sa=r}return sa}function f_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:el(""+r)}function p_(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function rI(r,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var y=f_((m[Yt]||null).action),_=u.submitter;_&&(i=(i=_[Yt]||null)?f_(i.formAction):_.getAttribute("formAction"),i!==null&&(y=i,_=null));var S=new Rs("action","action",null,u,m);r.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(sa!==0){var D=_?p_(m,_):new FormData(m);Dm(o,{pending:!0,data:D,method:m.method,action:y},null,D)}}else typeof y=="function"&&(S.preventDefault(),D=_?p_(m,_):new FormData(m),Dm(o,{pending:!0,data:D,method:m.method,action:y},y,D))},currentTarget:m}]})}}for(var fg=0;fg<Yp.length;fg++){var pg=Yp[fg],sI=pg.toLowerCase(),iI=pg[0].toUpperCase()+pg.slice(1);fs(sI,"on"+iI)}fs(Hv,"onAnimationEnd"),fs($v,"onAnimationIteration"),fs(Kv,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(_A,"onTransitionRun"),fs(wA,"onTransitionStart"),fs(EA,"onTransitionCancel"),fs(Qv,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function m_(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var _=u.length-1;0<=_;_--){var S=u[_],D=S.instance,H=S.currentTarget;if(S=S.listener,D!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=H;try{y(m)}catch(W){Xh(W)}m.currentTarget=null,y=D}else for(_=0;_<u.length;_++){if(S=u[_],D=S.instance,H=S.currentTarget,S=S.listener,D!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=H;try{y(m)}catch(W){Xh(W)}m.currentTarget=null,y=D}}}}function Qe(r,i){var o=i[Ri];o===void 0&&(o=i[Ri]=new Set);var u=r+"__bubble";o.has(u)||(g_(i,r,2,!1),o.add(u))}function mg(r,i,o){var u=0;i&&(u|=4),g_(o,r,u,i)}var Md="_reactListening"+Math.random().toString(36).slice(2);function gg(r){if(!r[Md]){r[Md]=!0,Di.forEach(function(o){o!=="selectionchange"&&(aI.has(o)||mg(o,!1,r),mg(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Md]||(i[Md]=!0,mg("selectionchange",!1,i))}}function g_(r,i,o,u){switch(H_(i)){case 2:var m=OI;break;case 8:m=PI;break;default:m=kg}o=m.bind(null,i,o,r),m=void 0,!Xa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,o,{capture:!0,passive:m}):r.addEventListener(i,o,!0):m!==void 0?r.addEventListener(i,o,{passive:m}):r.addEventListener(i,o,!1)}function yg(r,i,o,u,m){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var S=u.stateNode.containerInfo;if(S===m)break;if(_===4)for(_=u.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;S!==null;){if(_=wr(S),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){u=y=_;continue e}S=S.parentNode}}u=u.return}Ui(function(){var H=y,W=Hr(o),re=[];e:{var $=Yv.get(r);if($!==void 0){var Q=Rs,we=r;switch(r){case"keypress":if(Wa(o)===0)break e;case"keydown":case"keyup":Q=Kh;break;case"focusin":we="focus",Q=eo;break;case"focusout":we="blur",Q=eo;break;case"beforeblur":case"afterblur":Q=eo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=b;break;case Hv:case $v:case Kv:Q=Bh;break;case Qv:Q=N;break;case"scroll":case"scrollend":Q=jc;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=zh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ei;break;case"toggle":case"beforetoggle":Q=Be}var Pe=(i&4)!==0,It=!Pe&&(r==="scroll"||r==="scrollend"),B=Pe?$!==null?$+"Capture":null:$;Pe=[];for(var V=H,q;V!==null;){var te=V;if(q=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||q===null||B===null||(te=cs(V,B),te!=null&&Pe.push(uu(V,te,q))),It)break;V=V.return}0<Pe.length&&($=new Q($,we,null,o,W),re.push({event:$,listeners:Pe}))}}if((i&7)===0){e:{if($=r==="mouseover"||r==="pointerover",Q=r==="mouseout"||r==="pointerout",$&&o!==Rc&&(we=o.relatedTarget||o.fromElement)&&(wr(we)||we[Br]))break e;if((Q||$)&&($=W.window===W?W:($=W.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(we=o.relatedTarget||o.toElement,Q=H,we=we?wr(we):null,we!==null&&(It=l(we),Pe=we.tag,we!==It||Pe!==5&&Pe!==27&&Pe!==6)&&(we=null)):(Q=null,we=H),Q!==we)){if(Pe=Oc,te="onMouseLeave",B="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=ei,te="onPointerLeave",B="onPointerEnter",V="pointer"),It=Q==null?$:Ln(Q),q=we==null?$:Ln(we),$=new Pe(te,V+"leave",Q,o,W),$.target=It,$.relatedTarget=q,te=null,wr(W)===H&&(Pe=new Pe(B,V+"enter",we,o,W),Pe.target=q,Pe.relatedTarget=It,te=Pe),It=te,Q&&we)t:{for(Pe=oI,B=Q,V=we,q=0,te=B;te;te=Pe(te))q++;te=0;for(var De=V;De;De=Pe(De))te++;for(;0<q-te;)B=Pe(B),q--;for(;0<te-q;)V=Pe(V),te--;for(;q--;){if(B===V||V!==null&&B===V.alternate){Pe=B;break t}B=Pe(B),V=Pe(V)}Pe=null}else Pe=null;Q!==null&&y_(re,$,Q,Pe,!1),we!==null&&It!==null&&y_(re,It,we,Pe,!0)}}e:{if($=H?Ln(H):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var ot=Ov;else if(Dv($))if(Pv)ot=vA;else{ot=gA;var Ae=mA}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?H&&Zn(H.elementType)&&(ot=Ov):ot=yA;if(ot&&(ot=ot(r,H))){jv(re,ot,o,W);break e}Ae&&Ae(r,$,H),r==="focusout"&&H&&$.type==="number"&&H.memoizedProps.value!=null&&Mi($,"number",$.value)}switch(Ae=H?Ln(H):window,r){case"focusin":(Dv(Ae)||Ae.contentEditable==="true")&&(ol=Ae,$p=H,Uc=null);break;case"focusout":Uc=$p=ol=null;break;case"mousedown":Kp=!0;break;case"contextmenu":case"mouseup":case"dragend":Kp=!1,Gv(re,o,W);break;case"selectionchange":if(xA)break;case"keydown":case"keyup":Gv(re,o,W)}var qe;if(ut)e:{switch(r){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else al?to(r,o)&&(Je="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Je="onCompositionStart");Je&&(js&&o.locale!=="ko"&&(al||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&al&&(qe=Dc()):(Cs=W,kc="value"in Cs?Cs.value:Cs.textContent,al=!0)),Ae=Vd(H,Je),0<Ae.length&&(Je=new Ds(Je,r,null,o,W),re.push({event:Je,listeners:Ae}),qe?Je.data=qe:(qe=il(o),qe!==null&&(Je.data=qe)))),(qe=Kr?hA(r,o):dA(r,o))&&(Je=Vd(H,"onBeforeInput"),0<Je.length&&(Ae=new Ds("onBeforeInput","beforeinput",null,o,W),re.push({event:Ae,listeners:Je}),Ae.data=qe)),rI(re,r,H,o,W)}m_(re,i)})}function uu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Vd(r,i){for(var o=i+"Capture",u=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=cs(r,o),m!=null&&u.unshift(uu(r,m,y)),m=cs(r,i),m!=null&&u.push(uu(r,m,y))),r.tag===3)return u;r=r.return}return[]}function oI(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function y_(r,i,o,u,m){for(var y=i._reactName,_=[];o!==null&&o!==u;){var S=o,D=S.alternate,H=S.stateNode;if(S=S.tag,D!==null&&D===u)break;S!==5&&S!==26&&S!==27||H===null||(D=H,m?(H=cs(o,y),H!=null&&_.unshift(uu(o,H,D))):m||(H=cs(o,y),H!=null&&_.push(uu(o,H,D)))),o=o.return}_.length!==0&&r.push({event:i,listeners:_})}var lI=/\r\n?/g,cI=/\u0000|\uFFFD/g;function v_(r){return(typeof r=="string"?r:""+r).replace(lI,`
`).replace(cI,"")}function b_(r,i){return i=v_(i),v_(r)===i}function At(r,i,o,u,m,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||se(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&se(r,""+u);break;case"className":hn(r,"class",u);break;case"tabIndex":hn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":hn(r,o,u);break;case"style":gt(r,u,y);break;case"data":if(i!=="object"){hn(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=el(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&At(r,i,"name",m.name,m,null),At(r,i,"formEncType",m.formEncType,m,null),At(r,i,"formMethod",m.formMethod,m,null),At(r,i,"formTarget",m.formTarget,m,null)):(At(r,i,"encType",m.encType,m,null),At(r,i,"method",m.method,m,null),At(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=el(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=ls);break;case"onScroll":u!=null&&Qe("scroll",r);break;case"onScrollEnd":u!=null&&Qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(n(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=el(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Qe("beforetoggle",r),Qe("toggle",r),Wn(r,"popover",u);break;case"xlinkActuate":Lt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Lt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Lt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Lt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Lt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Lt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Lt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Lt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Lt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Wn(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Vh.get(o)||o,Wn(r,o,u))}}function vg(r,i,o,u,m,y){switch(o){case"style":gt(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(n(60));r.innerHTML=o}}break;case"children":typeof u=="string"?se(r,u):(typeof u=="number"||typeof u=="bigint")&&se(r,""+u);break;case"onScroll":u!=null&&Qe("scroll",r);break;case"onScrollEnd":u!=null&&Qe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=ls);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ka.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),y=r[Yt]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(i,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Wn(r,o,u)}}}function Dn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",r),Qe("load",r);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var _=o[y];if(_!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:At(r,i,y,_,o,null)}}m&&At(r,i,"srcSet",o.srcSet,o,null),u&&At(r,i,"src",o.src,o,null);return;case"input":Qe("invalid",r);var S=y=_=m=null,D=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":m=W;break;case"type":_=W;break;case"checked":D=W;break;case"defaultChecked":H=W;break;case"value":y=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,i));break;default:At(r,i,u,W,o,null)}}Qa(r,y,S,D,H,_,m,!1);return;case"select":Qe("invalid",r),u=_=y=null;for(m in o)if(o.hasOwnProperty(m)&&(S=o[m],S!=null))switch(m){case"value":y=S;break;case"defaultValue":_=S;break;case"multiple":u=S;default:At(r,i,m,S,o,null)}i=y,o=_,r.multiple=!!u,i!=null?T(r,!!u,i,!1):o!=null&&T(r,!!u,o,!0);return;case"textarea":Qe("invalid",r),y=m=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(S=o[_],S!=null))switch(_){case"value":u=S;break;case"defaultValue":m=S;break;case"children":y=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:At(r,i,_,S,o,null)}U(r,u,m,y);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:At(r,i,D,u,o,null)}return;case"dialog":Qe("beforetoggle",r),Qe("toggle",r),Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":Qe("load",r);break;case"video":case"audio":for(u=0;u<cu.length;u++)Qe(cu[u],r);break;case"image":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"embed":case"source":case"link":Qe("error",r),Qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:At(r,i,H,u,o,null)}return;default:if(Zn(i)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&vg(r,i,W,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&At(r,i,S,u,o,null))}function uI(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,_=null,S=null,D=null,H=null,W=null;for(Q in o){var re=o[Q];if(o.hasOwnProperty(Q)&&re!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=re;default:u.hasOwnProperty(Q)||At(r,i,Q,null,u,re)}}for(var $ in u){var Q=u[$];if(re=o[$],u.hasOwnProperty($)&&(Q!=null||re!=null))switch($){case"type":y=Q;break;case"name":m=Q;break;case"checked":H=Q;break;case"defaultChecked":W=Q;break;case"value":_=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,i));break;default:Q!==re&&At(r,i,$,Q,u,re)}}Pi(r,_,S,D,H,W,y,m);return;case"select":Q=_=S=$=null;for(y in o)if(D=o[y],o.hasOwnProperty(y)&&D!=null)switch(y){case"value":break;case"multiple":Q=D;default:u.hasOwnProperty(y)||At(r,i,y,null,u,D)}for(m in u)if(y=u[m],D=o[m],u.hasOwnProperty(m)&&(y!=null||D!=null))switch(m){case"value":$=y;break;case"defaultValue":S=y;break;case"multiple":_=y;default:y!==D&&At(r,i,m,y,u,D)}i=S,o=_,u=Q,$!=null?T(r,!!o,$,!1):!!u!=!!o&&(i!=null?T(r,!!o,i,!0):T(r,!!o,o?[]:"",!1));return;case"textarea":Q=$=null;for(S in o)if(m=o[S],o.hasOwnProperty(S)&&m!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:At(r,i,S,null,u,m)}for(_ in u)if(m=u[_],y=o[_],u.hasOwnProperty(_)&&(m!=null||y!=null))switch(_){case"value":$=m;break;case"defaultValue":Q=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==y&&At(r,i,_,m,u,y)}ee(r,$,Q);return;case"option":for(var we in o)if($=o[we],o.hasOwnProperty(we)&&$!=null&&!u.hasOwnProperty(we))switch(we){case"selected":r.selected=!1;break;default:At(r,i,we,null,u,$)}for(D in u)if($=u[D],Q=o[D],u.hasOwnProperty(D)&&$!==Q&&($!=null||Q!=null))switch(D){case"selected":r.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:At(r,i,D,$,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in o)$=o[Pe],o.hasOwnProperty(Pe)&&$!=null&&!u.hasOwnProperty(Pe)&&At(r,i,Pe,null,u,$);for(H in u)if($=u[H],Q=o[H],u.hasOwnProperty(H)&&$!==Q&&($!=null||Q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,i));break;default:At(r,i,H,$,u,Q)}return;default:if(Zn(i)){for(var It in o)$=o[It],o.hasOwnProperty(It)&&$!==void 0&&!u.hasOwnProperty(It)&&vg(r,i,It,void 0,u,$);for(W in u)$=u[W],Q=o[W],!u.hasOwnProperty(W)||$===Q||$===void 0&&Q===void 0||vg(r,i,W,$,u,Q);return}}for(var B in o)$=o[B],o.hasOwnProperty(B)&&$!=null&&!u.hasOwnProperty(B)&&At(r,i,B,null,u,$);for(re in u)$=u[re],Q=o[re],!u.hasOwnProperty(re)||$===Q||$==null&&Q==null||At(r,i,re,$,u,Q)}function x_(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],y=m.transferSize,_=m.initiatorType,S=m.duration;if(y&&S&&x_(_)){for(_=0,S=m.responseEnd,u+=1;u<o.length;u++){var D=o[u],H=D.startTime;if(H>S)break;var W=D.transferSize,re=D.initiatorType;W&&x_(re)&&(D=D.responseEnd,_+=W*(D<S?1:(S-H)/(D-H)))}if(--u,i+=8*(y+_)/(m.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var bg=null,xg=null;function Ld(r){return r.nodeType===9?r:r.ownerDocument}function __(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function _g(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wg=null;function dI(){var r=window.event;return r&&r.type==="popstate"?r===wg?!1:(wg=r,!0):(wg=null,!1)}var E_=typeof setTimeout=="function"?setTimeout:void 0,fI=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,pI=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(r){return T_.resolve(null).then(r).catch(mI)}:E_;function mI(r){setTimeout(function(){throw r})}function ia(r){return r==="head"}function S_(r,i){var o=i,u=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(m),Ol(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")hu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,hu(o);for(var y=o.firstChild;y;){var _=y.nextSibling,S=y.nodeName;y[_r]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=_}}else o==="body"&&hu(r.ownerDocument.body);o=m}while(o);Ol(i)}function N_(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Eg(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Eg(o),Js(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function gI(r,i,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[_r])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=es(r.nextSibling),r===null)break}return null}function yI(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=es(r.nextSibling),r===null))return null;return r}function A_(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=es(r.nextSibling),r===null))return null;return r}function Tg(r){return r.data==="$?"||r.data==="$~"}function Sg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function vI(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function es(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Ng=null;function I_(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return es(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function C_(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function R_(r,i,o){switch(i=Ld(o),r){case"html":if(r=i.documentElement,!r)throw Error(n(452));return r;case"head":if(r=i.head,!r)throw Error(n(453));return r;case"body":if(r=i.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function hu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Js(r)}var ts=new Map,k_=new Set;function Ud(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var mi=ue.d;ue.d={f:bI,r:xI,D:_I,C:wI,L:EI,m:TI,X:NI,S:SI,M:AI};function bI(){var r=mi.f(),i=Rd();return r||i}function xI(r){var i=Jn(r);i!==null&&i.tag===5&&i.type==="form"?Qb(i):mi.r(r)}var kl=typeof document>"u"?null:document;function D_(r,i,o){var u=kl;if(u&&typeof i=="string"&&i){var m=Un(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),k_.has(m)||(k_.add(m),r={rel:r,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),Dn(i,"link",r),Xt(i),u.head.appendChild(i)))}}function _I(r){mi.D(r),D_("dns-prefetch",r,null)}function wI(r,i){mi.C(r,i),D_("preconnect",r,i)}function EI(r,i,o){mi.L(r,i,o);var u=kl;if(u&&r&&i){var m='link[rel="preload"][as="'+Un(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Un(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Un(o.imageSizes)+'"]')):m+='[href="'+Un(r)+'"]';var y=m;switch(i){case"style":y=Dl(r);break;case"script":y=jl(r)}ts.has(y)||(r=x({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),ts.set(y,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(du(y))||i==="script"&&u.querySelector(fu(y))||(i=u.createElement("link"),Dn(i,"link",r),Xt(i),u.head.appendChild(i)))}}function TI(r,i){mi.m(r,i);var o=kl;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Un(u)+'"][href="'+Un(r)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=jl(r)}if(!ts.has(y)&&(r=x({rel:"modulepreload",href:r},i),ts.set(y,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(fu(y)))return}u=o.createElement("link"),Dn(u,"link",r),Xt(u),o.head.appendChild(u)}}}function SI(r,i,o){mi.S(r,i,o);var u=kl;if(u&&r){var m=zr(u).hoistableStyles,y=Dl(r);i=i||"default";var _=m.get(y);if(!_){var S={loading:0,preload:null};if(_=u.querySelector(du(y)))S.loading=5;else{r=x({rel:"stylesheet",href:r,"data-precedence":i},o),(o=ts.get(y))&&Ag(r,o);var D=_=u.createElement("link");Xt(D),Dn(D,"link",r),D._p=new Promise(function(H,W){D.onload=H,D.onerror=W}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Bd(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:S},m.set(y,_)}}}function NI(r,i){mi.X(r,i);var o=kl;if(o&&r){var u=zr(o).hoistableScripts,m=jl(r),y=u.get(m);y||(y=o.querySelector(fu(m)),y||(r=x({src:r,async:!0},i),(i=ts.get(m))&&Ig(r,i),y=o.createElement("script"),Xt(y),Dn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function AI(r,i){mi.M(r,i);var o=kl;if(o&&r){var u=zr(o).hoistableScripts,m=jl(r),y=u.get(m);y||(y=o.querySelector(fu(m)),y||(r=x({src:r,async:!0,type:"module"},i),(i=ts.get(m))&&Ig(r,i),y=o.createElement("script"),Xt(y),Dn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function j_(r,i,o,u){var m=(m=ke.current)?Ud(m):null;if(!m)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Dl(o.href),o=zr(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Dl(o.href);var y=zr(m).hoistableStyles,_=y.get(r);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,_),(y=m.querySelector(du(r)))&&!y._p&&(_.instance=y,_.state.loading=5),ts.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ts.set(r,o),y||II(m,r,o,_.state))),i&&u===null)throw Error(n(528,""));return _}if(i&&u!==null)throw Error(n(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=jl(o),o=zr(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function Dl(r){return'href="'+Un(r)+'"'}function du(r){return'link[rel="stylesheet"]['+r+"]"}function O_(r){return x({},r,{"data-precedence":r.precedence,precedence:null})}function II(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Dn(i,"link",o),Xt(i),r.head.appendChild(i))}function jl(r){return'[src="'+Un(r)+'"]'}function fu(r){return"script[async]"+r}function P_(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Un(o.href)+'"]');if(u)return i.instance=u,Xt(u),u;var m=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Xt(u),Dn(u,"style",m),Bd(u,o.precedence,r),i.instance=u;case"stylesheet":m=Dl(o.href);var y=r.querySelector(du(m));if(y)return i.state.loading|=4,i.instance=y,Xt(y),y;u=O_(o),(m=ts.get(m))&&Ag(u,m),y=(r.ownerDocument||r).createElement("link"),Xt(y);var _=y;return _._p=new Promise(function(S,D){_.onload=S,_.onerror=D}),Dn(y,"link",u),i.state.loading|=4,Bd(y,o.precedence,r),i.instance=y;case"script":return y=jl(o.src),(m=r.querySelector(fu(y)))?(i.instance=m,Xt(m),m):(u=o,(m=ts.get(y))&&(u=x({},o),Ig(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),Xt(m),Dn(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Bd(u,o.precedence,r));return i.instance}function Bd(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,_=0;_<u.length;_++){var S=u[_];if(S.dataset.precedence===i)y=S;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Ag(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Ig(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var zd=null;function M_(r,i,o){if(zd===null){var u=new Map,m=zd=new Map;m.set(o,u)}else m=zd,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var y=o[m];if(!(y[_r]||y[Vt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(i)||"";_=r+_;var S=u.get(_);S?S.push(y):u.set(_,[y])}}return u}function V_(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function CI(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function L_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function RI(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Dl(u.href),y=i.querySelector(du(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Fd.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=y,Xt(y);return}y=i.ownerDocument||i,u=O_(u),(m=ts.get(m))&&Ag(u,m),y=y.createElement("link"),Xt(y);var _=y;_._p=new Promise(function(S,D){_.onload=S,_.onerror=D}),Dn(y,"link",u),o.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Fd.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Cg=0;function kI(r,i){return r.stylesheets&&r.count===0&&qd(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&qd(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+i);0<r.imgBytes&&Cg===0&&(Cg=62500*hI());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&qd(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Cg?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Fd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Gd=null;function qd(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Gd=new Map,i.forEach(DI,r),Gd=null,Fd.call(r))}function DI(r,i){if(!(i.state.loading&4)){var o=Gd.get(r);if(o)var u=o.get(null);else{o=new Map,Gd.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var _=m[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}m=i.instance,_=m.getAttribute("data-precedence"),y=o.get(_)||u,y===u&&o.set(null,m),o.set(_,m),this.count++,u=Fd.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var pu={$$typeof:le,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function jI(r,i,o,u,m,y,_,S,D){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=br(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=br(0),this.hiddenUpdates=br(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function U_(r,i,o,u,m,y,_,S,D,H,W,re){return r=new jI(r,i,o,_,D,H,W,re,S),i=1,y===!0&&(i|=24),y=Sr(3,null,null,i),r.current=y,y.stateNode=r,i=lm(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},dm(y),r}function B_(r){return r?(r=ul,r):ul}function z_(r,i,o,u,m,y){m=B_(m),u.context===null?u.context=m:u.pendingContext=m,u=Qi(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=Yi(r,u,i),o!==null&&(pr(o,r,i),$c(o,r,i))}function F_(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Rg(r,i){F_(r,i),(r=r.alternate)&&F_(r,i)}function G_(r){if(r.tag===13||r.tag===31){var i=so(r,67108864);i!==null&&pr(i,r,67108864),Rg(r,67108864)}}function q_(r){if(r.tag===13||r.tag===31){var i=Rr();i=Ss(i);var o=so(r,i);o!==null&&pr(o,r,i),Rg(r,i)}}var Hd=!0;function OI(r,i,o,u){var m=X.T;X.T=null;var y=ue.p;try{ue.p=2,kg(r,i,o,u)}finally{ue.p=y,X.T=m}}function PI(r,i,o,u){var m=X.T;X.T=null;var y=ue.p;try{ue.p=8,kg(r,i,o,u)}finally{ue.p=y,X.T=m}}function kg(r,i,o,u){if(Hd){var m=Dg(u);if(m===null)yg(r,i,u,$d,o),$_(r,u);else if(VI(m,r,i,o,u))u.stopPropagation();else if($_(r,u),i&4&&-1<MI.indexOf(r)){for(;m!==null;){var y=Jn(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=xn(y.pendingLanes);if(_!==0){var S=y;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var D=1<<31-xe(_);S.entanglements[1]|=D,_&=~D}Vs(y),(ht&6)===0&&(Id=bn()+500,lu(0))}}break;case 31:case 13:S=so(y,2),S!==null&&pr(S,y,2),Rd(),Rg(y,2)}if(y=Dg(u),y===null&&yg(r,i,u,$d,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else yg(r,i,u,null,o)}}function Dg(r){return r=Hr(r),jg(r)}var $d=null;function jg(r){if($d=null,r=wr(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return $d=r,null}function H_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rn()){case ir:return 2;case ar:return 8;case Y:case pe:return 32;case mt:return 268435456;default:return 32}default:return 32}}var Og=!1,aa=null,oa=null,la=null,mu=new Map,gu=new Map,ca=[],MI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $_(r,i){switch(r){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":mu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(i.pointerId)}}function yu(r,i,o,u,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},i!==null&&(i=Jn(i),i!==null&&G_(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function VI(r,i,o,u,m){switch(i){case"focusin":return aa=yu(aa,r,i,o,u,m),!0;case"dragenter":return oa=yu(oa,r,i,o,u,m),!0;case"mouseover":return la=yu(la,r,i,o,u,m),!0;case"pointerover":var y=m.pointerId;return mu.set(y,yu(mu.get(y)||null,r,i,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,gu.set(y,yu(gu.get(y)||null,r,i,o,u,m)),!0}return!1}function K_(r){var i=wr(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,xr(r.priority,function(){q_(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,xr(r.priority,function(){q_(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Kd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Dg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Rc=u,o.target.dispatchEvent(u),Rc=null}else return i=Jn(o),i!==null&&G_(i),r.blockedOn=o,!1;i.shift()}return!0}function Q_(r,i,o){Kd(r)&&o.delete(i)}function LI(){Og=!1,aa!==null&&Kd(aa)&&(aa=null),oa!==null&&Kd(oa)&&(oa=null),la!==null&&Kd(la)&&(la=null),mu.forEach(Q_),gu.forEach(Q_)}function Qd(r,i){r.blockedOn===i&&(r.blockedOn=null,Og||(Og=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,LI)))}var Yd=null;function Y_(r){Yd!==r&&(Yd=r,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Yd===r&&(Yd=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(jg(u||o)===null)continue;break}var y=Jn(o);y!==null&&(r.splice(i,3),i-=3,Dm(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Ol(r){function i(D){return Qd(D,r)}aa!==null&&Qd(aa,r),oa!==null&&Qd(oa,r),la!==null&&Qd(la,r),mu.forEach(i),gu.forEach(i);for(var o=0;o<ca.length;o++){var u=ca[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ca.length&&(o=ca[0],o.blockedOn===null);)K_(o),o.blockedOn===null&&ca.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],_=m[Yt]||null;if(typeof y=="function")_||Y_(o);else if(_){var S=null;if(y&&y.hasAttribute("formAction")){if(m=y,_=y[Yt]||null)S=_.formAction;else if(jg(m)!==null)continue}else S=_.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),Y_(o)}}}function X_(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function Pg(r){this._internalRoot=r}Xd.prototype.render=Pg.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));var o=i.current,u=Rr();z_(o,u,r,i,null,null)},Xd.prototype.unmount=Pg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;z_(r.current,2,null,r,null,null),Rd(),i[Br]=null}};function Xd(r){this._internalRoot=r}Xd.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ha();r={blockedOn:null,target:r,priority:i};for(var o=0;o<ca.length&&i!==0&&i<ca[o].priority;o++);ca.splice(o,0,r),o===0&&K_(r)}};var J_=e.version;if(J_!=="19.2.4")throw Error(n(527,J_,"19.2.4"));ue.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=g(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var UI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{Mn=Jd.inject(UI),at=Jd}catch{}}return xu.createRoot=function(r,i){if(!a(r))throw Error(n(299));var o=!1,u="",m=sx,y=ix,_=ax;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=U_(r,1,!1,null,null,o,u,null,m,y,_,X_),r[Br]=i.current,gg(r),new Pg(i)},xu.hydrateRoot=function(r,i,o){if(!a(r))throw Error(n(299));var u=!1,m="",y=sx,_=ix,S=ax,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=U_(r,1,!0,i,o??null,u,m,D,y,_,S,X_),i.context=B_(null),o=i.current,u=Rr(),u=Ss(u),m=Qi(u),m.callback=null,Yi(o,m,u),o=u,i.current.lanes=o,Xs(i,o),Vs(i),r[Br]=i.current,gg(r),new Xd(i)},xu.version="19.2.4",xu}var ow;function WI(){if(ow)return Lg.exports;ow=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Lg.exports=JI(),Lg.exports}var ZI=WI();const eC=cp(ZI);var Pl={},Fg={exports:{}},Gg,lw;function tC(){if(lw)return Gg;lw=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Gg=s,Gg}var qg,cw;function nC(){if(cw)return qg;cw=1;var s=tC();function e(){}function t(){}return t.resetWarningCache=e,qg=function(){function n(c,d,p,g,v,x){if(x!==s){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}n.isRequired=n;function a(){return n}var l={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},qg}var uw;function UE(){return uw||(uw=1,Fg.exports=nC()()),Fg.exports}var Hg,hw;function BE(){return hw||(hw=1,Hg={L:1,M:0,Q:3,H:2}),Hg}var $g,dw;function zE(){return dw||(dw=1,$g={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),$g}var Kg,fw;function rC(){if(fw)return Kg;fw=1;var s=zE();function e(t){this.mode=s.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var n=0;n<this.data.length;n++)t.put(this.data.charCodeAt(n),8)}},Kg=e,Kg}var Qg,pw;function sC(){if(pw)return Qg;pw=1;var s=BE();function e(t,n){this.totalCount=t,this.dataCount=n}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,n){var a=e.getRsBlockTable(t,n);if(a==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+n);for(var l=a.length/3,c=new Array,d=0;d<l;d++)for(var p=a[d*3+0],g=a[d*3+1],v=a[d*3+2],x=0;x<p;x++)c.push(new e(g,v));return c},e.getRsBlockTable=function(t,n){switch(n){case s.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case s.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case s.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case s.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},Qg=e,Qg}var Yg,mw;function iC(){if(mw)return Yg;mw=1;function s(){this.buffer=new Array,this.length=0}return s.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Yg=s,Yg}var Xg,gw;function FE(){if(gw)return Xg;gw=1;for(var s={glog:function(t){if(t<1)throw new Error("glog("+t+")");return s.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return s.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)s.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)s.EXP_TABLE[e]=s.EXP_TABLE[e-4]^s.EXP_TABLE[e-5]^s.EXP_TABLE[e-6]^s.EXP_TABLE[e-8];for(var e=0;e<255;e++)s.LOG_TABLE[s.EXP_TABLE[e]]=e;return Xg=s,Xg}var Jg,yw;function GE(){if(yw)return Jg;yw=1;var s=FE();function e(t,n){if(t.length==null)throw new Error(t.length+"/"+n);for(var a=0;a<t.length&&t[a]==0;)a++;this.num=new Array(t.length-a+n);for(var l=0;l<t.length-a;l++)this.num[l]=t[l+a]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var n=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var l=0;l<t.getLength();l++)n[a+l]^=s.gexp(s.glog(this.get(a))+s.glog(t.get(l)));return new e(n,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var n=s.glog(this.get(0))-s.glog(t.get(0)),a=new Array(this.getLength()),l=0;l<this.getLength();l++)a[l]=this.get(l);for(var l=0;l<t.getLength();l++)a[l]^=s.gexp(s.glog(t.get(l))+n);return new e(a,0).mod(t)}},Jg=e,Jg}var Wg,vw;function aC(){if(vw)return Wg;vw=1;var s=zE(),e=GE(),t=FE(),n={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(l){for(var c=l<<10;a.getBCHDigit(c)-a.getBCHDigit(a.G15)>=0;)c^=a.G15<<a.getBCHDigit(c)-a.getBCHDigit(a.G15);return(l<<10|c)^a.G15_MASK},getBCHTypeNumber:function(l){for(var c=l<<12;a.getBCHDigit(c)-a.getBCHDigit(a.G18)>=0;)c^=a.G18<<a.getBCHDigit(c)-a.getBCHDigit(a.G18);return l<<12|c},getBCHDigit:function(l){for(var c=0;l!=0;)c++,l>>>=1;return c},getPatternPosition:function(l){return a.PATTERN_POSITION_TABLE[l-1]},getMask:function(l,c,d){switch(l){case n.PATTERN000:return(c+d)%2==0;case n.PATTERN001:return c%2==0;case n.PATTERN010:return d%3==0;case n.PATTERN011:return(c+d)%3==0;case n.PATTERN100:return(Math.floor(c/2)+Math.floor(d/3))%2==0;case n.PATTERN101:return c*d%2+c*d%3==0;case n.PATTERN110:return(c*d%2+c*d%3)%2==0;case n.PATTERN111:return(c*d%3+(c+d)%2)%2==0;default:throw new Error("bad maskPattern:"+l)}},getErrorCorrectPolynomial:function(l){for(var c=new e([1],0),d=0;d<l;d++)c=c.multiply(new e([1,t.gexp(d)],0));return c},getLengthInBits:function(l,c){if(1<=c&&c<10)switch(l){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw new Error("mode:"+l)}else if(c<27)switch(l){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+l)}else if(c<41)switch(l){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+l)}else throw new Error("type:"+c)},getLostPoint:function(l){for(var c=l.getModuleCount(),d=0,p=0;p<c;p++)for(var g=0;g<c;g++){for(var v=0,x=l.isDark(p,g),E=-1;E<=1;E++)if(!(p+E<0||c<=p+E))for(var A=-1;A<=1;A++)g+A<0||c<=g+A||E==0&&A==0||x==l.isDark(p+E,g+A)&&v++;v>5&&(d+=3+v-5)}for(var p=0;p<c-1;p++)for(var g=0;g<c-1;g++){var O=0;l.isDark(p,g)&&O++,l.isDark(p+1,g)&&O++,l.isDark(p,g+1)&&O++,l.isDark(p+1,g+1)&&O++,(O==0||O==4)&&(d+=3)}for(var p=0;p<c;p++)for(var g=0;g<c-6;g++)l.isDark(p,g)&&!l.isDark(p,g+1)&&l.isDark(p,g+2)&&l.isDark(p,g+3)&&l.isDark(p,g+4)&&!l.isDark(p,g+5)&&l.isDark(p,g+6)&&(d+=40);for(var g=0;g<c;g++)for(var p=0;p<c-6;p++)l.isDark(p,g)&&!l.isDark(p+1,g)&&l.isDark(p+2,g)&&l.isDark(p+3,g)&&l.isDark(p+4,g)&&!l.isDark(p+5,g)&&l.isDark(p+6,g)&&(d+=40);for(var G=0,g=0;g<c;g++)for(var p=0;p<c;p++)l.isDark(p,g)&&G++;var J=Math.abs(100*G/c/c-50)/5;return d+=J*10,d}};return Wg=a,Wg}var Zg,bw;function oC(){if(bw)return Zg;bw=1;var s=rC(),e=sC(),t=iC(),n=aC(),a=GE();function l(d,p){this.typeNumber=d,this.errorCorrectLevel=p,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=l.prototype;return c.addData=function(d){var p=new s(d);this.dataList.push(p),this.dataCache=null},c.isDark=function(d,p){if(d<0||this.moduleCount<=d||p<0||this.moduleCount<=p)throw new Error(d+","+p);return this.modules[d][p]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var d=1;for(d=1;d<40;d++){for(var p=e.getRSBlocks(d,this.errorCorrectLevel),g=new t,v=0,x=0;x<p.length;x++)v+=p[x].dataCount;for(var x=0;x<this.dataList.length;x++){var E=this.dataList[x];g.put(E.mode,4),g.put(E.getLength(),n.getLengthInBits(E.mode,d)),E.write(g)}if(g.getLengthInBits()<=v*8)break}this.typeNumber=d}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(d,p){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var g=0;g<this.moduleCount;g++){this.modules[g]=new Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++)this.modules[g][v]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(d,p),this.typeNumber>=7&&this.setupTypeNumber(d),this.dataCache==null&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,p)},c.setupPositionProbePattern=function(d,p){for(var g=-1;g<=7;g++)if(!(d+g<=-1||this.moduleCount<=d+g))for(var v=-1;v<=7;v++)p+v<=-1||this.moduleCount<=p+v||(0<=g&&g<=6&&(v==0||v==6)||0<=v&&v<=6&&(g==0||g==6)||2<=g&&g<=4&&2<=v&&v<=4?this.modules[d+g][p+v]=!0:this.modules[d+g][p+v]=!1)},c.getBestMaskPattern=function(){for(var d=0,p=0,g=0;g<8;g++){this.makeImpl(!0,g);var v=n.getLostPoint(this);(g==0||d>v)&&(d=v,p=g)}return p},c.createMovieClip=function(d,p,g){var v=d.createEmptyMovieClip(p,g),x=1;this.make();for(var E=0;E<this.modules.length;E++)for(var A=E*x,O=0;O<this.modules[E].length;O++){var G=O*x,J=this.modules[E][O];J&&(v.beginFill(0,100),v.moveTo(G,A),v.lineTo(G+x,A),v.lineTo(G+x,A+x),v.lineTo(G,A+x),v.endFill())}return v},c.setupTimingPattern=function(){for(var d=8;d<this.moduleCount-8;d++)this.modules[d][6]==null&&(this.modules[d][6]=d%2==0);for(var p=8;p<this.moduleCount-8;p++)this.modules[6][p]==null&&(this.modules[6][p]=p%2==0)},c.setupPositionAdjustPattern=function(){for(var d=n.getPatternPosition(this.typeNumber),p=0;p<d.length;p++)for(var g=0;g<d.length;g++){var v=d[p],x=d[g];if(this.modules[v][x]==null)for(var E=-2;E<=2;E++)for(var A=-2;A<=2;A++)E==-2||E==2||A==-2||A==2||E==0&&A==0?this.modules[v+E][x+A]=!0:this.modules[v+E][x+A]=!1}},c.setupTypeNumber=function(d){for(var p=n.getBCHTypeNumber(this.typeNumber),g=0;g<18;g++){var v=!d&&(p>>g&1)==1;this.modules[Math.floor(g/3)][g%3+this.moduleCount-8-3]=v}for(var g=0;g<18;g++){var v=!d&&(p>>g&1)==1;this.modules[g%3+this.moduleCount-8-3][Math.floor(g/3)]=v}},c.setupTypeInfo=function(d,p){for(var g=this.errorCorrectLevel<<3|p,v=n.getBCHTypeInfo(g),x=0;x<15;x++){var E=!d&&(v>>x&1)==1;x<6?this.modules[x][8]=E:x<8?this.modules[x+1][8]=E:this.modules[this.moduleCount-15+x][8]=E}for(var x=0;x<15;x++){var E=!d&&(v>>x&1)==1;x<8?this.modules[8][this.moduleCount-x-1]=E:x<9?this.modules[8][15-x-1+1]=E:this.modules[8][15-x-1]=E}this.modules[this.moduleCount-8][8]=!d},c.mapData=function(d,p){for(var g=-1,v=this.moduleCount-1,x=7,E=0,A=this.moduleCount-1;A>0;A-=2)for(A==6&&A--;;){for(var O=0;O<2;O++)if(this.modules[v][A-O]==null){var G=!1;E<d.length&&(G=(d[E]>>>x&1)==1);var J=n.getMask(p,v,A-O);J&&(G=!G),this.modules[v][A-O]=G,x--,x==-1&&(E++,x=7)}if(v+=g,v<0||this.moduleCount<=v){v-=g,g=-g;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(d,p,g){for(var v=e.getRSBlocks(d,p),x=new t,E=0;E<g.length;E++){var A=g[E];x.put(A.mode,4),x.put(A.getLength(),n.getLengthInBits(A.mode,d)),A.write(x)}for(var O=0,E=0;E<v.length;E++)O+=v[E].dataCount;if(x.getLengthInBits()>O*8)throw new Error("code length overflow. ("+x.getLengthInBits()+">"+O*8+")");for(x.getLengthInBits()+4<=O*8&&x.put(0,4);x.getLengthInBits()%8!=0;)x.putBit(!1);for(;!(x.getLengthInBits()>=O*8||(x.put(l.PAD0,8),x.getLengthInBits()>=O*8));)x.put(l.PAD1,8);return l.createBytes(x,v)},l.createBytes=function(d,p){for(var g=0,v=0,x=0,E=new Array(p.length),A=new Array(p.length),O=0;O<p.length;O++){var G=p[O].dataCount,J=p[O].totalCount-G;v=Math.max(v,G),x=Math.max(x,J),E[O]=new Array(G);for(var ie=0;ie<E[O].length;ie++)E[O][ie]=255&d.buffer[ie+g];g+=G;var ce=n.getErrorCorrectPolynomial(J),le=new a(E[O],ce.getLength()-1),ge=le.mod(ce);A[O]=new Array(ce.getLength()-1);for(var ie=0;ie<A[O].length;ie++){var Ee=ie+ge.getLength()-A[O].length;A[O][ie]=Ee>=0?ge.get(Ee):0}}for(var ve=0,ie=0;ie<p.length;ie++)ve+=p[ie].totalCount;for(var C=new Array(ve),I=0,ie=0;ie<v;ie++)for(var O=0;O<p.length;O++)ie<E[O].length&&(C[I++]=E[O][ie]);for(var ie=0;ie<x;ie++)for(var O=0;O<p.length;O++)ie<A[O].length&&(C[I++]=A[O][ie]);return C},Zg=l,Zg}var Wd={},xw;function lC(){if(xw)return Wd;xw=1,Object.defineProperty(Wd,"__esModule",{value:!0});var s=Object.assign||function(g){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(g[E]=x[E])}return g},e=UE(),t=l(e),n=bh(),a=l(n);function l(g){return g&&g.__esModule?g:{default:g}}function c(g,v){var x={};for(var E in g)v.indexOf(E)>=0||Object.prototype.hasOwnProperty.call(g,E)&&(x[E]=g[E]);return x}var d={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},p=(0,n.forwardRef)(function(g,v){var x=g.bgColor,E=g.bgD,A=g.fgD,O=g.fgColor,G=g.size,J=g.title,ie=g.viewBoxSize,ce=g.xmlns,le=ce===void 0?"http://www.w3.org/2000/svg":ce,ge=c(g,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",s({},ge,{height:G,ref:v,viewBox:"0 0 "+ie+" "+ie,width:G,xmlns:le}),J?a.default.createElement("title",null,J):null,a.default.createElement("path",{d:E,fill:x}),a.default.createElement("path",{d:A,fill:O}))});return p.displayName="QRCodeSvg",p.propTypes=d,Wd.default=p,Wd}var _w;function cC(){if(_w)return Pl;_w=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.QRCode=void 0;var s=Object.assign||function(G){for(var J=1;J<arguments.length;J++){var ie=arguments[J];for(var ce in ie)Object.prototype.hasOwnProperty.call(ie,ce)&&(G[ce]=ie[ce])}return G},e=UE(),t=x(e),n=BE(),a=x(n),l=oC(),c=x(l),d=bh(),p=x(d),g=lC(),v=x(g);function x(G){return G&&G.__esModule?G:{default:G}}function E(G,J){var ie={};for(var ce in G)J.indexOf(ce)>=0||Object.prototype.hasOwnProperty.call(G,ce)&&(ie[ce]=G[ce]);return ie}var A={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},O=(0,d.forwardRef)(function(G,J){var ie=G.bgColor,ce=ie===void 0?"#FFFFFF":ie,le=G.fgColor,ge=le===void 0?"#000000":le,Ee=G.level,ve=Ee===void 0?"L":Ee,C=G.size,I=C===void 0?256:C,R=G.value,L=E(G,["bgColor","fgColor","level","size","value"]),j=new c.default(-1,a.default[ve]);j.addData(R),j.make();var P=j.modules;return p.default.createElement(v.default,s({},L,{bgColor:ce,bgD:P.map(function(k,rt){return k.map(function(Et,X){return Et?"":"M "+X+" "+rt+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ge,fgD:P.map(function(k,rt){return k.map(function(Et,X){return Et?"M "+X+" "+rt+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:J,size:I,viewBoxSize:P.length}))});return Pl.QRCode=O,O.displayName="QRCode",O.propTypes=A,Pl.default=O,Pl}var uC=cC();const ww=cp(uC);var Gt=(s=>(s.READY="ready to sing",s.STANDBY="standby",s))(Gt||{}),dt=(s=>(s.SINGING="Singing",s.LISTENING="Listening",s))(dt||{}),Fe=(s=>(s.PENDING="Pending Approval",s.APPROVED="Approved",s.DONE="Done",s))(Fe||{}),Us=(s=>(s.FRESH_MEAT="FRESH_MEAT",s.FAIR_ROTATION="FAIR_ROTATION",s.FIFO="FIFO",s.OLDEST_MEMBER="OLDEST_MEMBER",s.RANDOM="RANDOM",s))(Us||{});class hC{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return dC(e).buffer}}function dC(s){let e=0;for(const a of s)e+=a.byteLength;const t=new Uint8Array(e);let n=0;for(const a of s){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);t.set(l,n),n+=a.byteLength}return t}function qE(s){return new fC(s).unpack()}function HE(s){const e=new pC,t=e.pack(s);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class fC{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let n=0,a="",l,c;for(;n<e;)l=t[n],l<160?(c=l,n++):(l^192)<32?(c=(l&31)<<6|t[n+1]&63,n+=2):(l^224)<16?(c=(l&15)<<12|(t[n+1]&63)<<6|t[n+2]&63,n+=3):(c=(l&7)<<18|(t[n+1]&63)<<12|(t[n+2]&63)<<6|t[n+3]&63,n+=4),a+=String.fromCodePoint(c);return this.index+=e,a}unpack_array(e){const t=new Array(e);for(let n=0;n<e;n++)t[n]=this.unpack();return t}unpack_map(e){const t={};for(let n=0;n<e;n++){const a=this.unpack();t[a]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,n=(e>>23&255)-127,a=e&8388607|8388608;return(t===0?1:-1)*a*2**(n-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),n=e>>31,a=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(a-20)+t*2**(a-52);return(n===0?1:-1)*c}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class pC{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const n=this.pack_array(e);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const n=e;this.pack_bin(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(n=>{this.pack_bin(new Uint8Array(n)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const n=this.pack_object(e);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),n=t.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const n=a=>{if(a<t){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>n(a+1)):n(a+1)}};return n(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const n=Math.floor(Math.log(e)/Math.LN2),a=e/2**n-1,l=Math.floor(a*2**52),c=2**32,d=t<<31|n+1023<<20|l/c&1048575,p=l%c;this._bufferBuilder.append(203),this.pack_int32(d),this.pack_int32(p)}pack_object(e){const t=Object.keys(e),n=t.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");const a=l=>{if(l<t.length){const c=t[l];if(e.hasOwnProperty(c)){this.pack(c);const d=this.pack(e[c]);if(d instanceof Promise)return d.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,n=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),n=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}constructor(){this._bufferBuilder=new hC,this._textEncoder=new TextEncoder}}let $E=!0,KE=!0;function ku(s,e,t){const n=s.match(e);return n&&n.length>=t&&parseFloat(n[t],10)}function Ho(s,e,t){if(!s.RTCPeerConnection)return;const n=s.RTCPeerConnection.prototype,a=n.addEventListener;n.addEventListener=function(c,d){if(c!==e)return a.apply(this,arguments);const p=g=>{const v=t(g);v&&(d.handleEvent?d.handleEvent(v):d(v))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(d,p),a.apply(this,[c,p])};const l=n.removeEventListener;n.removeEventListener=function(c,d){if(c!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(d))return l.apply(this,arguments);const p=this._eventMap[e].get(d);return this._eventMap[e].delete(d),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[c,p])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function mC(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):($E=s,s?"adapter.js logging disabled":"adapter.js logging enabled")}function gC(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(KE=!s,"adapter.js deprecation warnings "+(s?"disabled":"enabled"))}function QE(){if(typeof window=="object"){if($E)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function vy(s,e){KE&&console.warn(s+" is deprecated, please use "+e+" instead.")}function yC(s){const e={browser:null,version:null};if(typeof s>"u"||!s.navigator||!s.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=s;if(t.userAgentData&&t.userAgentData.brands){const n=t.userAgentData.brands.find(a=>a.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(ku(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||s.isSecureContext===!1&&s.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(ku(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(s.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(ku(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=s.RTCRtpTransceiver&&"currentDirection"in s.RTCRtpTransceiver.prototype,e._safariVersion=ku(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Ew(s){return Object.prototype.toString.call(s)==="[object Object]"}function YE(s){return Ew(s)?Object.keys(s).reduce(function(e,t){const n=Ew(s[t]),a=n?YE(s[t]):s[t],l=n&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[t]:a})},{}):s}function x0(s,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?x0(s,s.get(e[n]),t):n.endsWith("Ids")&&e[n].forEach(a=>{x0(s,s.get(a),t)})}))}function Tw(s,e,t){const n=t?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return s.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&l.push(c)}),l.forEach(c=>{s.forEach(d=>{d.type===n&&d.trackId===c.id&&x0(s,d,a)})}),a}const Sw=QE;function XE(s,e){const t=s&&s.navigator;if(!t.mediaDevices)return;const n=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const p={};return Object.keys(d).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const v=typeof d[g]=="object"?d[g]:{ideal:d[g]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const x=function(E,A){return E?E+A.charAt(0).toUpperCase()+A.slice(1):A==="deviceId"?"sourceId":A};if(v.ideal!==void 0){p.optional=p.optional||[];let E={};typeof v.ideal=="number"?(E[x("min",g)]=v.ideal,p.optional.push(E),E={},E[x("max",g)]=v.ideal,p.optional.push(E)):(E[x("",g)]=v.ideal,p.optional.push(E))}v.exact!==void 0&&typeof v.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[x("",g)]=v.exact):["min","max"].forEach(E=>{v[E]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[x(E,g)]=v[E])})}),d.advanced&&(p.optional=(p.optional||[]).concat(d.advanced)),p},a=function(d,p){if(e.version>=61)return p(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const g=function(v,x,E){x in v&&!(E in v)&&(v[E]=v[x],delete v[x])};d=JSON.parse(JSON.stringify(d)),g(d.audio,"autoGainControl","googAutoGainControl"),g(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=n(d.audio)}if(d&&typeof d.video=="object"){let g=d.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const v=e.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete d.video.facingMode;let x;if(g.exact==="environment"||g.ideal==="environment"?x=["back","rear"]:(g.exact==="user"||g.ideal==="user")&&(x=["front"]),x)return t.mediaDevices.enumerateDevices().then(E=>{E=E.filter(O=>O.kind==="videoinput");let A=E.find(O=>x.some(G=>O.label.toLowerCase().includes(G)));return!A&&E.length&&x.includes("back")&&(A=E[E.length-1]),A&&(d.video.deviceId=g.exact?{exact:A.deviceId}:{ideal:A.deviceId}),d.video=n(d.video),Sw("chrome: "+JSON.stringify(d)),p(d)})}d.video=n(d.video)}return Sw("chrome: "+JSON.stringify(d)),p(d)},l=function(d){return e.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(d,p,g){a(d,v=>{t.webkitGetUserMedia(v,p,x=>{g&&g(l(x))})})};if(t.getUserMedia=c.bind(t),t.mediaDevices.getUserMedia){const d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(p){return a(p,g=>d(g).then(v=>{if(g.audio&&!v.getAudioTracks().length||g.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(x=>{x.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(l(v))))}}}function JE(s){s.MediaStream=s.MediaStream||s.webkitMediaStream}function WE(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("ontrack"in s.RTCPeerConnection.prototype)){Object.defineProperty(s.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",a=>{let l;s.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(d=>d.track&&d.track.id===a.track.id):l={track:a.track};const c=new Event("track");c.track=a.track,c.receiver=l,c.transceiver={receiver:l},c.streams=[n.stream],this.dispatchEvent(c)}),n.stream.getTracks().forEach(a=>{let l;s.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(d=>d.track&&d.track.id===a.id):l={track:a};const c=new Event("track");c.track=a,c.receiver=l,c.transceiver={receiver:l},c.streams=[n.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Ho(s,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function ZE(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("getSenders"in s.RTCPeerConnection.prototype)&&"createDTMFSender"in s.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!s.RTCPeerConnection.prototype.getSenders){s.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(d,p){let g=a.apply(this,arguments);return g||(g=e(this,d),this._senders.push(g)),g};const l=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(d){l.apply(this,arguments);const p=this._senders.indexOf(d);p!==-1&&this._senders.splice(p,1)}}const t=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],t.apply(this,[l]),l.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const n=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],n.apply(this,[l]),l.getTracks().forEach(c=>{const d=this._senders.find(p=>p.track===c);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof s=="object"&&s.RTCPeerConnection&&"getSenders"in s.RTCPeerConnection.prototype&&"createDTMFSender"in s.RTCPeerConnection.prototype&&s.RTCRtpSender&&!("dtmf"in s.RTCRtpSender.prototype)){const e=s.RTCPeerConnection.prototype.getSenders;s.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(a=>a._pc=this),n},Object.defineProperty(s.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function eT(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender&&s.RTCRtpReceiver))return;if(!("getStats"in s.RTCRtpSender.prototype)){const t=s.RTCPeerConnection.prototype.getSenders;t&&(s.RTCPeerConnection.prototype.getSenders=function(){const l=t.apply(this,[]);return l.forEach(c=>c._pc=this),l});const n=s.RTCPeerConnection.prototype.addTrack;n&&(s.RTCPeerConnection.prototype.addTrack=function(){const l=n.apply(this,arguments);return l._pc=this,l}),s.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(c=>Tw(c,l.track,!0))}}if(!("getStats"in s.RTCRtpReceiver.prototype)){const t=s.RTCPeerConnection.prototype.getReceivers;t&&(s.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Ho(s,"track",n=>(n.receiver._pc=n.srcElement,n)),s.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>Tw(l,a.track,!1))}}if(!("getStats"in s.RTCRtpSender.prototype&&"getStats"in s.RTCRtpReceiver.prototype))return;const e=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof s.MediaStreamTrack){const n=arguments[0];let a,l,c;return this.getSenders().forEach(d=>{d.track===n&&(a?c=!0:a=d)}),this.getReceivers().forEach(d=>(d.track===n&&(l?c=!0:l=d),d.track===n)),c||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function tT(s){s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(c,d){if(!d)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=e.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(p)===-1&&this._shimmedLocalStreams[d.id].push(p):this._shimmedLocalStreams[d.id]=[d,p],p};const t=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(g=>{if(this.getSenders().find(x=>x.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();t.apply(this,arguments);const p=this.getSenders().filter(g=>d.indexOf(g)===-1);this._shimmedLocalStreams[c.id]=[c].concat(p)};const n=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],n.apply(this,arguments)};const a=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const p=this._shimmedLocalStreams[d].indexOf(c);p!==-1&&this._shimmedLocalStreams[d].splice(p,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),a.apply(this,arguments)}}function nT(s,e){if(!s.RTCPeerConnection)return;if(s.RTCPeerConnection.prototype.addTrack&&e.version>=65)return tT(s);const t=s.RTCPeerConnection.prototype.getLocalStreams;s.RTCPeerConnection.prototype.getLocalStreams=function(){const v=t.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(x=>this._reverseStreams[x.id])};const n=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(x=>{if(this.getSenders().find(A=>A.track===x))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const x=new s.MediaStream(v.getTracks());this._streams[v.id]=x,this._reverseStreams[x.id]=v,v=x}n.apply(this,[v])};const a=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},s.RTCPeerConnection.prototype.addTrack=function(v,x){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const E=[].slice.call(arguments,1);if(E.length!==1||!E[0].getTracks().find(G=>G===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(G=>G.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const O=this._streams[x.id];if(O)O.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const G=new s.MediaStream([v]);this._streams[x.id]=G,this._reverseStreams[G.id]=x,this.addStream(G)}return this.getSenders().find(G=>G.track===v)};function l(g,v){let x=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(E=>{const A=g._reverseStreams[E],O=g._streams[A.id];x=x.replace(new RegExp(O.id,"g"),A.id)}),new RTCSessionDescription({type:v.type,sdp:x})}function c(g,v){let x=v.sdp;return Object.keys(g._reverseStreams||[]).forEach(E=>{const A=g._reverseStreams[E],O=g._streams[A.id];x=x.replace(new RegExp(A.id,"g"),O.id)}),new RTCSessionDescription({type:v.type,sdp:x})}["createOffer","createAnswer"].forEach(function(g){const v=s.RTCPeerConnection.prototype[g],x={[g](){const E=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[O=>{const G=l(this,O);E[0].apply(null,[G])},O=>{E[1]&&E[1].apply(null,O)},arguments[2]]):v.apply(this,arguments).then(O=>l(this,O))}};s.RTCPeerConnection.prototype[g]=x[g]});const d=s.RTCPeerConnection.prototype.setLocalDescription;s.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=c(this,arguments[0]),d.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(s.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(s.RTCPeerConnection.prototype,"localDescription",{get(){const g=p.get.apply(this);return g.type===""?g:l(this,g)}}),s.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let E;Object.keys(this._streams).forEach(A=>{this._streams[A].getTracks().find(G=>v.track===G)&&(E=this._streams[A])}),E&&(E.getTracks().length===1?this.removeStream(this._reverseStreams[E.id]):E.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function _0(s,e){!s.RTCPeerConnection&&s.webkitRTCPeerConnection&&(s.RTCPeerConnection=s.webkitRTCPeerConnection),s.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=s.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};s.RTCPeerConnection.prototype[t]=a[t]})}function rT(s,e){Ho(s,"negotiationneeded",t=>{const n=t.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return t})}const Nw=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:rT,shimAddTrackRemoveTrack:nT,shimAddTrackRemoveTrackWithNative:tT,shimGetSendersWithDtmf:ZE,shimGetUserMedia:XE,shimMediaStream:JE,shimOnTrack:WE,shimPeerConnection:_0,shimSenderReceiverGetStats:eT},Symbol.toStringTag,{value:"Module"}));function sT(s,e){const t=s&&s.navigator,n=s&&s.MediaStreamTrack;if(t.getUserMedia=function(a,l,c){vy("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(l,c)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(c,d,p){d in c&&!(p in c)&&(c[p]=c[d],delete c[d])},l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),a(c.audio,"autoGainControl","mozAutoGainControl"),a(c.audio,"noiseSuppression","mozNoiseSuppression")),l(c)},n&&n.prototype.getSettings){const c=n.prototype.getSettings;n.prototype.getSettings=function(){const d=c.apply(this,arguments);return a(d,"mozAutoGainControl","autoGainControl"),a(d,"mozNoiseSuppression","noiseSuppression"),d}}if(n&&n.prototype.applyConstraints){const c=n.prototype.applyConstraints;n.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),a(d,"autoGainControl","mozAutoGainControl"),a(d,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[d])}}}}function vC(s,e){s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices||s.navigator.mediaDevices&&(s.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,s.navigator.mediaDevices.getUserMedia(n)})}function iT(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function w0(s,e){if(typeof s!="object"||!(s.RTCPeerConnection||s.mozRTCPeerConnection))return;!s.RTCPeerConnection&&s.mozRTCPeerConnection&&(s.RTCPeerConnection=s.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=s.RTCPeerConnection.prototype[a],c={[a](){return arguments[0]=new(a==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};s.RTCPeerConnection.prototype[a]=c[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[l,c,d]=arguments;return n.apply(this,[l||null]).then(p=>{if(e.version<53&&!c)try{p.forEach(g=>{g.type=t[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;p.forEach((v,x)=>{p.set(x,Object.assign({},v,{type:t[v.type]||v.type}))})}return p}).then(c,d)}}function aT(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpSender.prototype)return;const e=s.RTCPeerConnection.prototype.getSenders;e&&(s.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const t=s.RTCPeerConnection.prototype.addTrack;t&&(s.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),s.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function oT(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpReceiver.prototype)return;const e=s.RTCPeerConnection.prototype.getReceivers;e&&(s.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(a=>a._pc=this),n}),Ho(s,"track",t=>(t.receiver._pc=t.srcElement,t)),s.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function lT(s){!s.RTCPeerConnection||"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(t){vy("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&t.getTracks().includes(n.track)&&this.removeTrack(n)})})}function cT(s){s.DataChannel&&!s.RTCDataChannel&&(s.RTCDataChannel=s.DataChannel)}function uT(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.addTransceiver;e&&(s.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const a=n.length>0;a&&n.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:c}=l,d=c.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=n,c.sendEncodings=n,this.setParametersPromises.push(c.setParameters(d).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return l})}function hT(s){if(!(typeof s=="object"&&s.RTCRtpSender))return;const e=s.RTCRtpSender.prototype.getParameters;e&&(s.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function dT(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function fT(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.createAnswer;s.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Aw=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:uT,shimCreateAnswer:fT,shimCreateOffer:dT,shimGetDisplayMedia:vC,shimGetParameters:hT,shimGetUserMedia:sT,shimOnTrack:iT,shimPeerConnection:w0,shimRTCDataChannel:cT,shimReceiverGetStats:oT,shimRemoveStream:lT,shimSenderGetStats:aT},Symbol.toStringTag,{value:"Module"}));function pT(s){if(!(typeof s!="object"||!s.RTCPeerConnection)){if("getLocalStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in s.RTCPeerConnection.prototype)){const e=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(a=>e.call(this,a,n)),n.getVideoTracks().forEach(a=>e.call(this,a,n))},s.RTCPeerConnection.prototype.addTrack=function(n,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(t);if(n===-1)return;this._localStreams.splice(n,1);const a=t.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function mT(s){if(!(typeof s!="object"||!s.RTCPeerConnection)&&("getRemoteStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in s.RTCPeerConnection.prototype))){Object.defineProperty(s.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(l)>=0)return;n._remoteStreams.push(l);const c=new Event("addstream");c.stream=l,n.dispatchEvent(c)})}),e.apply(n,arguments)}}}function gT(s){if(typeof s!="object"||!s.RTCPeerConnection)return;const e=s.RTCPeerConnection.prototype,t=e.createOffer,n=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(g,v){const x=arguments.length>=2?arguments[2]:arguments[0],E=t.apply(this,[x]);return v?(E.then(g,v),Promise.resolve()):E},e.createAnswer=function(g,v){const x=arguments.length>=2?arguments[2]:arguments[0],E=n.apply(this,[x]);return v?(E.then(g,v),Promise.resolve()):E};let d=function(p,g,v){const x=a.apply(this,[p]);return v?(x.then(g,v),Promise.resolve()):x};e.setLocalDescription=d,d=function(p,g,v){const x=l.apply(this,[p]);return v?(x.then(g,v),Promise.resolve()):x},e.setRemoteDescription=d,d=function(p,g,v){const x=c.apply(this,[p]);return v?(x.then(g,v),Promise.resolve()):x},e.addIceCandidate=d}function yT(s){const e=s&&s.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,n=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=a=>n(vT(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(n,a,l){e.mediaDevices.getUserMedia(n).then(a,l)}).bind(e))}function vT(s){return s&&s.video!==void 0?Object.assign({},s,{video:YE(s.video)}):s}function bT(s){if(!s.RTCPeerConnection)return;const e=s.RTCPeerConnection;s.RTCPeerConnection=function(n,a){if(n&&n.iceServers){const l=[];for(let c=0;c<n.iceServers.length;c++){let d=n.iceServers[c];d.urls===void 0&&d.url?(vy("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,l.push(d)):l.push(n.iceServers[c])}n.iceServers=l}return new e(n,a)},s.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(s.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function xT(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _T(s){const e=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const l=this.getTransceivers().find(c=>c.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):n.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function wT(s){typeof s!="object"||s.AudioContext||(s.AudioContext=s.webkitAudioContext)}const Iw=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:wT,shimCallbacksAPI:gT,shimConstraints:vT,shimCreateOfferLegacy:_T,shimGetUserMedia:yT,shimLocalStreamsAPI:pT,shimRTCIceServerUrls:bT,shimRemoteStreamsAPI:mT,shimTrackEventTransceiver:xT},Symbol.toStringTag,{value:"Module"}));var e0={exports:{}},Cw;function bC(){return Cw||(Cw=1,(function(s){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(t){return t.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(t){const n=e.splitSections(t);return n&&n[0]},e.getMediaSections=function(t){const n=e.splitSections(t);return n.shift(),n},e.matchPrefix=function(t,n){return e.splitLines(t).filter(a=>a.indexOf(n)===0)},e.parseCandidate=function(t){let n;t.indexOf("a=candidate:")===0?n=t.substring(12).split(" "):n=t.substring(10).split(" ");const a={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let l=8;l<n.length;l+=2)switch(n[l]){case"raddr":a.relatedAddress=n[l+1];break;case"rport":a.relatedPort=parseInt(n[l+1],10);break;case"tcptype":a.tcpType=n[l+1];break;case"ufrag":a.ufrag=n[l+1],a.usernameFragment=n[l+1];break;default:a[n[l]]===void 0&&(a[n[l]]=n[l+1]);break}return a},e.writeCandidate=function(t){const n=[];n.push(t.foundation);const a=t.component;a==="rtp"?n.push(1):a==="rtcp"?n.push(2):n.push(a),n.push(t.protocol.toUpperCase()),n.push(t.priority),n.push(t.address||t.ip),n.push(t.port);const l=t.type;return n.push("typ"),n.push(l),l!=="host"&&t.relatedAddress&&t.relatedPort&&(n.push("raddr"),n.push(t.relatedAddress),n.push("rport"),n.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(n.push("ufrag"),n.push(t.usernameFragment||t.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let n=t.substring(9).split(" ");const a={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),a.name=n[0],a.clockRate=parseInt(n[1],10),a.channels=n.length===3?parseInt(n[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(t){let n=t.payloadType;t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+n+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(t){const n=t.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const n={};let a;const l=t.substring(t.indexOf(" ")+1).split(";");for(let c=0;c<l.length;c++)a=l[c].trim().split("="),n[a[0].trim()]=a[1];return n},e.writeFmtp=function(t){let n="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const l=[];Object.keys(t.parameters).forEach(c=>{t.parameters[c]!==void 0?l.push(c+"="+t.parameters[c]):l.push(c)}),n+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return n},e.parseRtcpFb=function(t){const n=t.substring(t.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(t){let n="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(l=>{n+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(t){const n=t.indexOf(" "),a={ssrc:parseInt(t.substring(7,n),10)},l=t.indexOf(":",n);return l>-1?(a.attribute=t.substring(n+1,l),a.value=t.substring(l+1)):a.attribute=t.substring(n+1),a},e.parseSsrcGroup=function(t){const n=t.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(a=>parseInt(a,10))}},e.getMid=function(t){const n=e.matchPrefix(t,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(t){const n=t.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(t,n){return{role:"auto",fingerprints:e.matchPrefix(t+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,n){let a="a=setup:"+n+`\r
`;return t.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(t){const n=t.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const n=t.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,n){return e.matchPrefix(t+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,n){const a=e.matchPrefix(t+n,"a=ice-ufrag:")[0],l=e.matchPrefix(t+n,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(t){let n="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(t){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(t)[0].split(" ");n.profile=l[2];for(let d=3;d<l.length;d++){const p=l[d],g=e.matchPrefix(t,"a=rtpmap:"+p+" ")[0];if(g){const v=e.parseRtpMap(g),x=e.matchPrefix(t,"a=fmtp:"+p+" ");switch(v.parameters=x.length?e.parseFmtp(x[0]):{},v.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+p+" ").map(e.parseRtcpFb),n.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(v.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(d=>{n.headerExtensions.push(e.parseExtmap(d))});const c=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(d=>{c.forEach(p=>{d.rtcpFeedback.find(v=>v.type===p.type&&v.parameter===p.parameter)||d.rtcpFeedback.push(p)})}),n},e.writeRtpDescription=function(t,n){let a="";a+="m="+t+" ",a+=n.codecs.length>0?"9":"0",a+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=n.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(c=>{a+=e.writeRtpMap(c),a+=e.writeFmtp(c),a+=e.writeRtcpFb(c)});let l=0;return n.codecs.forEach(c=>{c.maxptime>l&&(l=c.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(c=>{a+=e.writeExtmap(c)}),a},e.parseRtpEncodingParameters=function(t){const n=[],a=e.parseRtpParameters(t),l=a.fecMechanisms.indexOf("RED")!==-1,c=a.fecMechanisms.indexOf("ULPFEC")!==-1,d=e.matchPrefix(t,"a=ssrc:").map(E=>e.parseSsrcMedia(E)).filter(E=>E.attribute==="cname"),p=d.length>0&&d[0].ssrc;let g;const v=e.matchPrefix(t,"a=ssrc-group:FID").map(E=>E.substring(17).split(" ").map(O=>parseInt(O,10)));v.length>0&&v[0].length>1&&v[0][0]===p&&(g=v[0][1]),a.codecs.forEach(E=>{if(E.name.toUpperCase()==="RTX"&&E.parameters.apt){let A={ssrc:p,codecPayloadType:parseInt(E.parameters.apt,10)};p&&g&&(A.rtx={ssrc:g}),n.push(A),l&&(A=JSON.parse(JSON.stringify(A)),A.fec={ssrc:p,mechanism:c?"red+ulpfec":"red"},n.push(A))}}),n.length===0&&p&&n.push({ssrc:p});let x=e.matchPrefix(t,"b=");return x.length&&(x[0].indexOf("b=TIAS:")===0?x=parseInt(x[0].substring(7),10):x[0].indexOf("b=AS:")===0?x=parseInt(x[0].substring(5),10)*1e3*.95-2e3*8:x=void 0,n.forEach(E=>{E.maxBitrate=x})),n},e.parseRtcpParameters=function(t){const n={},a=e.matchPrefix(t,"a=ssrc:").map(d=>e.parseSsrcMedia(d)).filter(d=>d.attribute==="cname")[0];a&&(n.cname=a.value,n.ssrc=a.ssrc);const l=e.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=l.length>0,n.compound=l.length===0;const c=e.matchPrefix(t,"a=rtcp-mux");return n.mux=c.length>0,n},e.writeRtcpParameters=function(t){let n="";return t.reducedSize&&(n+=`a=rtcp-rsize\r
`),t.mux&&(n+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(n+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),n},e.parseMsid=function(t){let n;const a=e.matchPrefix(t,"a=msid:");if(a.length===1)return n=a[0].substring(7).split(" "),{stream:n[0],track:n[1]};const l=e.matchPrefix(t,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(l.length>0)return n=l[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(t){const n=e.parseMLine(t),a=e.matchPrefix(t,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const c=e.matchPrefix(t,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:n.fmt,maxMessageSize:l};const d=e.matchPrefix(t,"a=sctpmap:");if(d.length>0){const p=d[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:l}}},e.writeSctpDescription=function(t,n){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&a.push("a=max-message-size:"+n.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,n,a){let l;const c=n!==void 0?n:2;return t?l=t:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,n){const a=e.splitLines(t);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const a=e.splitLines(t)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(t){const a=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const n=e.splitLines(t);for(let a=0;a<n.length;a++)if(n[a].length<2||n[a].charAt(1)!=="=")return!1;return!0},s.exports=e})(e0)),e0.exports}var ET=bC();const Yl=cp(ET),xC=FI({__proto__:null,default:Yl},[ET]);function lf(s){if(!s.RTCIceCandidate||s.RTCIceCandidate&&"foundation"in s.RTCIceCandidate.prototype)return;const e=s.RTCIceCandidate;s.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const a=new e(n),l=Yl.parseCandidate(n.candidate);for(const c in l)c in a||Object.defineProperty(a,c,{value:l[c]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(n)},s.RTCIceCandidate.prototype=e.prototype,Ho(s,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new s.RTCIceCandidate(t.candidate),writable:"false"}),t))}function E0(s){!s.RTCIceCandidate||s.RTCIceCandidate&&"relayProtocol"in s.RTCIceCandidate.prototype||Ho(s,"icecandidate",e=>{if(e.candidate){const t=Yl.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function cf(s,e){if(!s.RTCPeerConnection)return;"sctp"in s.RTCPeerConnection.prototype||Object.defineProperty(s.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(d){if(!d||!d.sdp)return!1;const p=Yl.splitSections(d.sdp);return p.shift(),p.some(g=>{const v=Yl.parseMLine(g);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},n=function(d){const p=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const g=parseInt(p[1],10);return g!==g?-1:g},a=function(d){let p=65536;return e.browser==="firefox"&&(e.version<57?d===-1?p=16384:p=2147483637:e.version<60?p=e.version===57?65535:65536:p=2147483637),p},l=function(d,p){let g=65536;e.browser==="firefox"&&e.version===57&&(g=65535);const v=Yl.matchPrefix(d.sdp,"a=max-message-size:");return v.length>0?g=parseInt(v[0].substring(19),10):e.browser==="firefox"&&p!==-1&&(g=2147483637),g},c=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const p=n(arguments[0]),g=a(p),v=l(arguments[0],p);let x;g===0&&v===0?x=Number.POSITIVE_INFINITY:g===0||v===0?x=Math.max(g,v):x=Math.min(g,v);const E={};Object.defineProperty(E,"maxMessageSize",{get(){return x}}),this._sctp=E}return c.apply(this,arguments)}}function uf(s){if(!(s.RTCPeerConnection&&"createDataChannel"in s.RTCPeerConnection.prototype))return;function e(n,a){const l=n.send;n.send=function(){const d=arguments[0],p=d.length||d.size||d.byteLength;if(n.readyState==="open"&&a.sctp&&p>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(n,arguments)}}const t=s.RTCPeerConnection.prototype.createDataChannel;s.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return e(a,this),a},Ho(s,"datachannel",n=>(e(n.channel,n.target),n))}function T0(s){if(!s.RTCPeerConnection||"connectionState"in s.RTCPeerConnection.prototype)return;const e=s.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const n=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const c=new Event("connectionstatechange",a);l.dispatchEvent(c)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function S0(s,e){if(!s.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);s.RTCSessionDescription&&a instanceof s.RTCSessionDescription?arguments[0]=new s.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return t.apply(this,arguments)}}function hf(s,e){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const t=s.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(s.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function df(s,e){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const t=s.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(s.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>t.apply(this,[c]))})}const _C=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:S0,shimAddIceCandidateNullOrEmpty:hf,shimConnectionState:T0,shimMaxMessageSize:cf,shimParameterlessSetLocalDescription:df,shimRTCIceCandidate:lf,shimRTCIceCandidateRelayProtocol:E0,shimSendThrowTypeError:uf},Symbol.toStringTag,{value:"Module"}));function wC({window:s}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=QE,n=yC(s),a={browserDetails:n,commonShim:_C,extractVersion:ku,disableLog:mC,disableWarnings:gC,sdp:xC};switch(n.browser){case"chrome":if(!Nw||!_0||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(n.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=Nw,hf(s,n),df(s),XE(s,n),JE(s),_0(s,n),WE(s),nT(s,n),ZE(s),eT(s),rT(s,n),lf(s),E0(s),T0(s),cf(s,n),uf(s),S0(s,n);break;case"firefox":if(!Aw||!w0||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=Aw,hf(s,n),df(s),sT(s,n),w0(s,n),iT(s),lT(s),aT(s),oT(s),cT(s),uT(s),hT(s),dT(s),fT(s),lf(s),T0(s),cf(s,n),uf(s);break;case"safari":if(!Iw||!e.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=Iw,hf(s,n),df(s),bT(s),_T(s),gT(s),pT(s),mT(s),xT(s),yT(s),wT(s),lf(s),E0(s),cf(s,n),uf(s),S0(s,n);break;default:t("Unsupported browser!");break}return a}const Rw=wC({window:typeof window>"u"?void 0:window});function $o(s,e,t,n){Object.defineProperty(s,e,{get:t,set:n,enumerable:!0,configurable:!0})}class TT{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],n=e.byteLength,a=Math.ceil(n/this.chunkedMTU);let l=0,c=0;for(;c<n;){const d=Math.min(n,c+this.chunkedMTU),p=e.slice(c,d),g={__peerData:this._dataCount,n:l,data:p,total:a};t.push(g),c=d,l++}return this._dataCount++,t}}}function EC(s){let e=0;for(const a of s)e+=a.byteLength;const t=new Uint8Array(e);let n=0;for(const a of s)t.set(a,n),n+=a.byteLength;return t}const t0=Rw.default||Rw,_u=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const s=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(s)?s==="chrome"?e>=this.minChromeVersion:s==="firefox"?e>=this.minFirefoxVersion:s==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return t0.browserDetails.browser}getVersion(){return t0.browserDetails.version||0}isUnifiedPlanSupported(){const s=this.getBrowser(),e=t0.browserDetails.version||0;if(s==="chrome"&&e<this.minChromeVersion)return!1;if(s==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,n=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),n=!0}catch{}finally{t&&t.close()}return n}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},TC=s=>!s||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(s),ST=()=>Math.random().toString(36).slice(2),kw={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class SC extends TT{noop(){}blobToArrayBuffer(e,t){const n=new FileReader;return n.onload=function(a){a.target&&t(a.target.result)},n.readAsArrayBuffer(e),n}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=kw,this.browser=_u.getBrowser(),this.browserVersion=_u.getVersion(),this.pack=HE,this.unpack=qE,this.supports=(function(){const t={browser:_u.isBrowserSupported(),webRTC:_u.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let n;try{n=new RTCPeerConnection(kw),t.audioVideo=!0;let a;try{a=n.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!a.ordered;try{a.binaryType="blob",t.binaryBlob=!_u.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{n&&n.close()}return t})(),this.validateId=TC,this.randomToken=ST}}const mr=new SC,NC="PeerJS: ";class AC{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const n=[NC,...t];for(const a in n)n[a]instanceof Error&&(n[a]="("+n[a].name+") "+n[a].message);e>=3?console.log(...n):e>=2?console.warn("WARNING",...n):e>=1&&console.error("ERROR",...n)}constructor(){this._logLevel=0}}var Se=new AC,by={},IC=Object.prototype.hasOwnProperty,sr="~";function eh(){}Object.create&&(eh.prototype=Object.create(null),new eh().__proto__||(sr=!1));function CC(s,e,t){this.fn=s,this.context=e,this.once=t||!1}function NT(s,e,t,n,a){if(typeof t!="function")throw new TypeError("The listener must be a function");var l=new CC(t,n||s,a),c=sr?sr+e:e;return s._events[c]?s._events[c].fn?s._events[c]=[s._events[c],l]:s._events[c].push(l):(s._events[c]=l,s._eventsCount++),s}function ff(s,e){--s._eventsCount===0?s._events=new eh:delete s._events[e]}function Qn(){this._events=new eh,this._eventsCount=0}Qn.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)IC.call(t,n)&&e.push(sr?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Qn.prototype.listeners=function(e){var t=sr?sr+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,l=n.length,c=new Array(l);a<l;a++)c[a]=n[a].fn;return c};Qn.prototype.listenerCount=function(e){var t=sr?sr+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Qn.prototype.emit=function(e,t,n,a,l,c){var d=sr?sr+e:e;if(!this._events[d])return!1;var p=this._events[d],g=arguments.length,v,x;if(p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,t),!0;case 3:return p.fn.call(p.context,t,n),!0;case 4:return p.fn.call(p.context,t,n,a),!0;case 5:return p.fn.call(p.context,t,n,a,l),!0;case 6:return p.fn.call(p.context,t,n,a,l,c),!0}for(x=1,v=new Array(g-1);x<g;x++)v[x-1]=arguments[x];p.fn.apply(p.context,v)}else{var E=p.length,A;for(x=0;x<E;x++)switch(p[x].once&&this.removeListener(e,p[x].fn,void 0,!0),g){case 1:p[x].fn.call(p[x].context);break;case 2:p[x].fn.call(p[x].context,t);break;case 3:p[x].fn.call(p[x].context,t,n);break;case 4:p[x].fn.call(p[x].context,t,n,a);break;default:if(!v)for(A=1,v=new Array(g-1);A<g;A++)v[A-1]=arguments[A];p[x].fn.apply(p[x].context,v)}}return!0};Qn.prototype.on=function(e,t,n){return NT(this,e,t,n,!1)};Qn.prototype.once=function(e,t,n){return NT(this,e,t,n,!0)};Qn.prototype.removeListener=function(e,t,n,a){var l=sr?sr+e:e;if(!this._events[l])return this;if(!t)return ff(this,l),this;var c=this._events[l];if(c.fn)c.fn===t&&(!a||c.once)&&(!n||c.context===n)&&ff(this,l);else{for(var d=0,p=[],g=c.length;d<g;d++)(c[d].fn!==t||a&&!c[d].once||n&&c[d].context!==n)&&p.push(c[d]);p.length?this._events[l]=p.length===1?p[0]:p:ff(this,l)}return this};Qn.prototype.removeAllListeners=function(e){var t;return e?(t=sr?sr+e:e,this._events[t]&&ff(this,t)):(this._events=new eh,this._eventsCount=0),this};Qn.prototype.off=Qn.prototype.removeListener;Qn.prototype.addListener=Qn.prototype.on;Qn.prefixed=sr;Qn.EventEmitter=Qn;by=Qn;var Ko={};$o(Ko,"ConnectionType",()=>Aa);$o(Ko,"PeerErrorType",()=>yn);$o(Ko,"BaseConnectionErrorType",()=>N0);$o(Ko,"DataConnectionErrorType",()=>xy);$o(Ko,"SerializationType",()=>up);$o(Ko,"SocketEventType",()=>Ea);$o(Ko,"ServerMessageType",()=>qn);var Aa=(function(s){return s.Data="data",s.Media="media",s})({}),yn=(function(s){return s.BrowserIncompatible="browser-incompatible",s.Disconnected="disconnected",s.InvalidID="invalid-id",s.InvalidKey="invalid-key",s.Network="network",s.PeerUnavailable="peer-unavailable",s.SslUnavailable="ssl-unavailable",s.ServerError="server-error",s.SocketError="socket-error",s.SocketClosed="socket-closed",s.UnavailableID="unavailable-id",s.WebRTC="webrtc",s})({}),N0=(function(s){return s.NegotiationFailed="negotiation-failed",s.ConnectionClosed="connection-closed",s})({}),xy=(function(s){return s.NotOpenYet="not-open-yet",s.MessageToBig="message-too-big",s})({}),up=(function(s){return s.Binary="binary",s.BinaryUTF8="binary-utf8",s.JSON="json",s.None="raw",s})({}),Ea=(function(s){return s.Message="message",s.Disconnected="disconnected",s.Error="error",s.Close="close",s})({}),qn=(function(s){return s.Heartbeat="HEARTBEAT",s.Candidate="CANDIDATE",s.Offer="OFFER",s.Answer="ANSWER",s.Open="OPEN",s.Error="ERROR",s.IdTaken="ID-TAKEN",s.InvalidKey="INVALID-KEY",s.Leave="LEAVE",s.Expire="EXPIRE",s})({});const AT="1.5.5";class RC extends by.EventEmitter{constructor(e,t,n,a,l,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const d=e?"wss://":"ws://";this._baseUrl=d+t+":"+n+a+"peerjs?key="+l}start(e,t){this._id=e;const n=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(n+"&version="+AT),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),Se.log("Server message received:",l)}catch{Se.log("Invalid server message",a.data);return}this.emit(Ea.Message,l)},this._socket.onclose=a=>{this._disconnected||(Se.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(Ea.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Se.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Se.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:qn.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ea.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class IT{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Aa.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const n=this.connection,a={ordered:!!e.reliable},l=t.createDataChannel(n.label,a);n._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Se.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,n=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;Se.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||(Se.log(`Received ICE candidates for ${t}:`,c.candidate),l.socket.send({type:qn.Candidate,payload:{candidate:c.candidate,type:a,connectionId:n},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Se.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(N0.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":Se.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(N0.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":Se.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Se.log("Listening for data channel"),e.ondatachannel=c=>{Se.log("Received data channel");const d=c.channel;l.getConnection(t,n)._initializeDataChannel(d)},Se.log("Listening for remote stream"),e.ontrack=c=>{Se.log("Received remote stream");const d=c.streams[0],p=l.getConnection(t,n);if(p.type===Aa.Media){const g=p;this._addStreamToMediaConnection(d,g)}}}cleanup(){Se.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let n=!1;const a=this.connection.dataChannel;a&&(n=!!a.readyState&&a.readyState!=="closed"),(t||n)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const n=await e.createOffer(this.connection.options.constraints);Se.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),Se.log("Set localDescription:",n,`for:${this.connection.peer}`);let a={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Aa.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}t.socket.send({type:qn.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(yn.WebRTC,a),Se.log("Failed to setLocalDescription, ",a))}}catch(n){t.emitError(yn.WebRTC,n),Se.log("Failed to createOffer, ",n)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const n=await e.createAnswer();Se.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),Se.log("Set localDescription:",n,`for:${this.connection.peer}`),t.socket.send({type:qn.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){t.emitError(yn.WebRTC,a),Se.log("Failed to setLocalDescription, ",a)}}catch(n){t.emitError(yn.WebRTC,n),Se.log("Failed to create answer, ",n)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const n=this.connection.peerConnection,a=this.connection.provider;Se.log("Setting remote description",t);const l=this;try{await n.setRemoteDescription(t),Se.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(c){a.emitError(yn.WebRTC,c),Se.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){Se.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Se.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(yn.WebRTC,t),Se.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(Se.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return Se.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(n=>{t.addTrack(n,e)})}_addStreamToMediaConnection(e,t){Se.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class CT extends by.EventEmitter{emitError(e,t){Se.error("Error:",t),this.emit("error",new kC(`${e}`,t))}}class kC extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class RT extends CT{get open(){return this._open}constructor(e,t,n){super(),this.peer=e,this.provider=t,this.options=n,this._open=!1,this.metadata=n.metadata}}var py;const Wu=class Wu extends RT{get type(){return Aa.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,n){super(e,t,n),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Wu.ID_PREFIX+mr.randomToken(),this._negotiator=new IT(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Se.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Se.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Se.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,n=e.payload;switch(e.type){case qn.Answer:this._negotiator.handleSDP(t,n.sdp),this._open=!0;break;case qn.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:Se.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){Se.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const n=this.provider._getMessages(this.connectionId);for(const a of n)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};py=new WeakMap,vu(Wu,py,Wu.ID_PREFIX="mc_");let kf=Wu;class DC{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:n,port:a,path:l,key:c}=this._options,d=new URL(`${t}://${n}:${a}${l}${c}/${e}`);return d.searchParams.set("ts",`${Date.now()}${Math.random()}`),d.searchParams.set("version",AT),fetch(d.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Se.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==mr.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===mr.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Se.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var my,gy;const No=class No extends RT{get type(){return Aa.Data}constructor(e,t,n){super(e,t,n),this.connectionId=this.options.connectionId||No.ID_PREFIX+ST(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new IT(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Se.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{Se.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{Se.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(xy.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case qn.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case qn.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:Se.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};my=new WeakMap,gy=new WeakMap,vu(No,my,No.ID_PREFIX="dc_"),vu(No,gy,No.MAX_BUFFERED_AMOUNT=8388608);let Df=No;class _y extends Df{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Df.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return Se.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class n0 extends _y{close(e){super.close(e),this._chunkedData={}}constructor(e,t,n){super(e,t,n),this.chunker=new TT,this.serialization=up.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=qE(e),n=t.__peerData;if(n){if(n.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=new Uint8Array(e.data),n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];const a=EC(n.data);this._handleDataMessage({data:a})}}_send(e,t){const n=HE(e);if(n instanceof Promise)return this._send_blob(n);if(!t&&n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);Se.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const n of t)this.send(n,!0)}}class jC extends _y{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=up.None}}class OC extends _y{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),n=t.__peerData;if(n&&n.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const n=this.encoder.encode(this.stringify(e));if(n.byteLength>=mr.chunkedMTU){this.emitError(xy.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(n)}constructor(...e){super(...e),this.serialization=up.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var yy;const Zu=class Zu extends CT{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,n]of this._connections)e[t]=n;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:jC,json:OC,binary:n0,"binary-utf8":n0,default:n0},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let n;if(e&&e.constructor==Object?t=e:e&&(n=e.toString()),t={debug:0,host:mr.CLOUD_HOST,port:mr.CLOUD_PORT,path:"/",key:Zu.DEFAULT_KEY,token:mr.randomToken(),config:mr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==mr.CLOUD_HOST?this._options.secure=mr.isSecure():this._options.host==mr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Se.setLogFunction(this._options.logFunction),Se.logLevel=this._options.debug||0,this._api=new DC(t),this._socket=this._createServerConnection(),!mr.supports.audioVideo&&!mr.supports.data){this._delayedAbort(yn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(n&&!mr.validateId(n)){this._delayedAbort(yn.InvalidID,`ID "${n}" is invalid`);return}n?this._initialize(n):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(yn.ServerError,a))}_createServerConnection(){const e=new RC(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ea.Message,t=>{this._handleMessage(t)}),e.on(Ea.Error,t=>{this._abort(yn.SocketError,t)}),e.on(Ea.Disconnected,()=>{this.disconnected||(this.emitError(yn.Network,"Lost connection to server."),this.disconnect())}),e.on(Ea.Close,()=>{this.disconnected||this._abort(yn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,n=e.payload,a=e.src;switch(t){case qn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case qn.Error:this._abort(yn.ServerError,n.msg);break;case qn.IdTaken:this._abort(yn.UnavailableID,`ID "${this.id}" is taken`);break;case qn.InvalidKey:this._abort(yn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case qn.Leave:Se.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case qn.Expire:this.emitError(yn.PeerUnavailable,`Could not connect to peer ${a}`);break;case qn.Offer:{const l=n.connectionId;let c=this.getConnection(a,l);if(c&&(c.close(),Se.warn(`Offer received for existing Connection ID:${l}`)),n.type===Aa.Media){const p=new kf(a,this,{connectionId:l,_payload:n,metadata:n.metadata});c=p,this._addConnection(a,c),this.emit("call",p)}else if(n.type===Aa.Data){const p=new this._serializers[n.serialization](a,this,{connectionId:l,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});c=p,this._addConnection(a,c),this.emit("connection",p)}else{Se.warn(`Received malformed connection type:${n.type}`);return}const d=this._getMessages(l);for(const p of d)c.handleMessage(p);break}default:{if(!n){Se.warn(`You received a malformed message from ${a} of type ${t}`);return}const l=n.connectionId,c=this.getConnection(a,l);c&&c.peerConnection?c.handleMessage(e):l?this._storeMessage(l,e):Se.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){Se.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(yn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const n=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,n),n}call(e,t,n={}){if(this.disconnected){Se.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(yn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){Se.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new kf(e,this,{...n,_stream:t});return this._addConnection(e,a),a}_addConnection(e,t){Se.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const n=t.indexOf(e);n!==-1&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const n=this._connections.get(e);if(!n)return null;for(const a of n)if(a.connectionId===t)return a;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){Se.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Se.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const n of t)n.close()}disconnect(){if(this.disconnected)return;const e=this.id;Se.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Se.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Se.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(yn.ServerError,t))}};yy=new WeakMap,vu(Zu,yy,Zu.DEFAULT_KEY="peerjs");let jf=Zu;const PC=()=>{};var Dw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=function(s){const e=[];let t=0;for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++n)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},MC=function(s){const e=[];let t=0,n=0;for(;t<s.length;){const a=s[t++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[n++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(p>>10)),e[n++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],c=s[t++];e[n++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},DT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,p=a+2<s.length,g=p?s[a+2]:0,v=l>>2,x=(l&3)<<4|d>>4;let E=(d&15)<<2|g>>6,A=g&63;p||(A=64,c||(E=64)),n.push(t[v],t[x],t[E],t[A])}return n.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(kT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):MC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const g=a<s.length?t[s.charAt(a)]:64;++a;const x=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||g==null||x==null)throw new VC;const E=l<<2|d>>4;if(n.push(E),g!==64){const A=d<<4&240|g>>2;if(n.push(A),x!==64){const O=g<<6&192|x;n.push(O)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class VC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LC=function(s){const e=kT(s);return DT.encodeByteArray(e,!0)},jT=function(s){return LC(s).replace(/\./g,"")},OT=function(s){try{return DT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=()=>PT().__FIREBASE_DEFAULTS__,BC=()=>{if(typeof process>"u"||typeof Dw>"u")return;const s=Dw.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},zC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&OT(s[1]);return e&&JSON.parse(e)},hp=()=>{try{return PC()||UC()||BC()||zC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},FC=s=>{var e,t;return(t=(e=hp())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},MT=()=>{var s;return(s=hp())==null?void 0:s.config},VT=s=>{var e;return(e=hp())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LT(s){return(await fetch(s,{credentials:"include"})).ok}const Uu={};function qC(){const s={prod:[],emulator:[]};for(const e of Object.keys(Uu))Uu[e]?s.emulator.push(e):s.prod.push(e);return s}function HC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let jw=!1;function $C(s,e){if(typeof window>"u"||typeof document>"u"||!_c(window.location.host)||Uu[s]===e||Uu[s]||jw)return;Uu[s]=e;function t(E){return`__firebase__banner__${E}`}const n="__firebase__banner",l=qC().prod.length>0;function c(){const E=document.getElementById(n);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function g(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{jw=!0,c()},E}function v(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=HC(n),A=t("text"),O=document.getElementById(A)||document.createElement("span"),G=t("learnmore"),J=document.getElementById(G)||document.createElement("a"),ie=t("preprendIcon"),ce=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const le=E.element;d(le),v(J,G);const ge=g();p(ce,ie),le.append(ce,O,J,ge),document.body.appendChild(le)}l?(O.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function UT(){var e;const s=(e=hp())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function XC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JC(){const s=wn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function BT(){return!UT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zT(){return!UT()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function FT(){try{return typeof indexedDB=="object"}catch{return!1}}function WC(){return new Promise((s,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(n),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="FirebaseError";class Si extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=ZC,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xh.prototype.create)}}class xh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?eR(l,n):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Si(a,d,n)}}function eR(s,e){return s.replace(tR,(t,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const tR=/\{\$([^}]+)}/g;function nR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function jo(s,e){if(s===e)return!0;const t=Object.keys(s),n=Object.keys(e);for(const a of t){if(!n.includes(a))return!1;const l=s[a],c=e[a];if(Ow(l)&&Ow(c)){if(!jo(l,c))return!1}else if(l!==c)return!1}for(const a of n)if(!t.includes(a))return!1;return!0}function Ow(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(s){const e=[];for(const[t,n]of Object.entries(s))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Du(s){const e={};return s.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,l]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function ju(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function rR(s,e){const t=new sR(s,e);return t.subscribe.bind(t)}class sR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let a;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");iR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:n},a.next===void 0&&(a.next=r0),a.error===void 0&&(a.error=r0),a.complete===void 0&&(a.complete=r0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iR(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function r0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(s){return s&&s._delegate?s._delegate:s}class Oo{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new GC;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lR(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});n.resolve(l)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);n===d&&c.resolve(a)}return a}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const l=this.instances.get(n);return l&&e(l,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:oR(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oR(s){return s===bo?void 0:s}function lR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(We||(We={}));const uR={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},hR=We.INFO,dR={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},fR=(s,e,...t)=>{if(e<s.logLevel)return;const n=new Date().toISOString(),a=dR[e];if(a)console[a](`[${n}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wy{constructor(e){this.name=e,this._logLevel=hR,this._logHandler=fR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const pR=(s,e)=>e.some(t=>s instanceof t);let Pw,Mw;function mR(){return Pw||(Pw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gR(){return Mw||(Mw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GT=new WeakMap,A0=new WeakMap,qT=new WeakMap,s0=new WeakMap,Ey=new WeakMap;function yR(s){const e=new Promise((t,n)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(Ia(s.result)),a()},c=()=>{n(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&GT.set(t,s)}).catch(()=>{}),Ey.set(e,s),e}function vR(s){if(A0.has(s))return;const e=new Promise((t,n)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{n(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});A0.set(s,e)}let I0={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return A0.get(s);if(e==="objectStoreNames")return s.objectStoreNames||qT.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ia(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function bR(s){I0=s(I0)}function xR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=s.call(i0(this),e,...t);return qT.set(n,e.sort?e.sort():[e]),Ia(n)}:gR().includes(s)?function(...e){return s.apply(i0(this),e),Ia(GT.get(this))}:function(...e){return Ia(s.apply(i0(this),e))}}function _R(s){return typeof s=="function"?xR(s):(s instanceof IDBTransaction&&vR(s),pR(s,mR())?new Proxy(s,I0):s)}function Ia(s){if(s instanceof IDBRequest)return yR(s);if(s0.has(s))return s0.get(s);const e=_R(s);return e!==s&&(s0.set(s,e),Ey.set(e,s)),e}const i0=s=>Ey.get(s);function wR(s,e,{blocked:t,upgrade:n,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=Ia(c);return n&&c.addEventListener("upgradeneeded",p=>{n(Ia(c.result),p.oldVersion,p.newVersion,Ia(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const ER=["get","getKey","getAll","getAllKeys","count"],TR=["put","add","delete","clear"],a0=new Map;function Vw(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(a0.get(e))return a0.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,a=TR.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(a||ER.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return n&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return a0.set(e,l),l}bR(s=>({...s,get:(e,t,n)=>Vw(e,t)||s.get(e,t,n),has:(e,t)=>!!Vw(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NR(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function NR(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const C0="@firebase/app",Lw="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new wy("@firebase/app"),AR="@firebase/app-compat",IR="@firebase/analytics-compat",CR="@firebase/analytics",RR="@firebase/app-check-compat",kR="@firebase/app-check",DR="@firebase/auth",jR="@firebase/auth-compat",OR="@firebase/database",PR="@firebase/data-connect",MR="@firebase/database-compat",VR="@firebase/functions",LR="@firebase/functions-compat",UR="@firebase/installations",BR="@firebase/installations-compat",zR="@firebase/messaging",FR="@firebase/messaging-compat",GR="@firebase/performance",qR="@firebase/performance-compat",HR="@firebase/remote-config",$R="@firebase/remote-config-compat",KR="@firebase/storage",QR="@firebase/storage-compat",YR="@firebase/firestore",XR="@firebase/ai",JR="@firebase/firestore-compat",WR="firebase",ZR="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="[DEFAULT]",ek={[C0]:"fire-core",[AR]:"fire-core-compat",[CR]:"fire-analytics",[IR]:"fire-analytics-compat",[kR]:"fire-app-check",[RR]:"fire-app-check-compat",[DR]:"fire-auth",[jR]:"fire-auth-compat",[OR]:"fire-rtdb",[PR]:"fire-data-connect",[MR]:"fire-rtdb-compat",[VR]:"fire-fn",[LR]:"fire-fn-compat",[UR]:"fire-iid",[BR]:"fire-iid-compat",[zR]:"fire-fcm",[FR]:"fire-fcm-compat",[GR]:"fire-perf",[qR]:"fire-perf-compat",[HR]:"fire-rc",[$R]:"fire-rc-compat",[KR]:"fire-gcs",[QR]:"fire-gcs-compat",[YR]:"fire-fst",[JR]:"fire-fst-compat",[XR]:"fire-vertex","fire-js":"fire-js",[WR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=new Map,tk=new Map,k0=new Map;function Uw(s,e){try{s.container.addComponent(e)}catch(t){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function tc(s){const e=s.name;if(k0.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;k0.set(e,s);for(const t of Of.values())Uw(t,s);for(const t of tk.values())Uw(t,s);return!0}function Ty(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ns(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ca=new xh("app","Firebase",nk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ca.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=ZR;function HT(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const n={name:R0,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Ca.create("bad-app-name",{appName:String(a)});if(t||(t=MT()),!t)throw Ca.create("no-options");const l=Of.get(a);if(l){if(jo(t,l.options)&&jo(n,l.config))return l;throw Ca.create("duplicate-app",{appName:a})}const c=new cR(a);for(const p of k0.values())c.addComponent(p);const d=new rk(t,n,c);return Of.set(a,d),d}function sk(s=R0){const e=Of.get(s);if(!e&&s===R0&&MT())return HT();if(!e)throw Ca.create("no-app",{appName:s});return e}function Ra(s,e,t){let n=ek[s]??s;t&&(n+=`-${t}`);const a=n.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${n}" with version "${e}":`];a&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(c.join(" "));return}tc(new Oo(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="firebase-heartbeat-database",ak=1,th="firebase-heartbeat-store";let o0=null;function $T(){return o0||(o0=wR(ik,ak,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(th)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ca.create("idb-open",{originalErrorMessage:s.message})})),o0}async function ok(s){try{const t=(await $T()).transaction(th),n=await t.objectStore(th).get(KT(s));return await t.done,n}catch(e){if(e instanceof Si)xi.warn(e.message);else{const t=Ca.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(t.message)}}}async function Bw(s,e){try{const n=(await $T()).transaction(th,"readwrite");await n.objectStore(th).put(e,KT(s)),await n.done}catch(t){if(t instanceof Si)xi.warn(t.message);else{const n=Ca.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xi.warn(n.message)}}}function KT(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=1024,ck=30;class uk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dk(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=zw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>ck){const c=fk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){xi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zw(),{heartbeatsToSend:n,unsentEntries:a}=hk(this._heartbeatsCache.heartbeats),l=jT(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xi.warn(t),""}}}function zw(){return new Date().toISOString().substring(0,10)}function hk(s,e=lk){const t=[];let n=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Fw(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Fw(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class dk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FT()?WC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ok(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Bw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Bw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Fw(s){return jT(JSON.stringify({version:2,heartbeats:s})).length}function fk(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let n=1;n<s.length;n++)s[n].date<t&&(t=s[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(s){tc(new Oo("platform-logger",e=>new SR(e),"PRIVATE")),tc(new Oo("heartbeat",e=>new uk(e),"PRIVATE")),Ra(C0,Lw,s),Ra(C0,Lw,"esm2020"),Ra("fire-js","")}pk("");var mk="firebase",gk="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ra(mk,gk,"app");function QT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yk=QT,YT=new xh("auth","Firebase",QT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new wy("@firebase/auth");function vk(s,...e){Pf.logLevel<=We.WARN&&Pf.warn(`Auth (${wc}): ${s}`,...e)}function pf(s,...e){Pf.logLevel<=We.ERROR&&Pf.error(`Auth (${wc}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(s,...e){throw Sy(s,...e)}function Gs(s,...e){return Sy(s,...e)}function XT(s,e,t){const n={...yk(),[e]:t};return new xh("auth","Firebase",n).create(e,{appName:s.name})}function bi(s){return XT(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sy(s,...e){if(typeof s!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=s.name),s._errorFactory.create(t,...n)}return YT.create(s,...e)}function Me(s,e,...t){if(!s)throw Sy(e,...t)}function gi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw pf(e),new Error(e)}function _i(s,e){s||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function bk(){return Gw()==="http:"||Gw()==="https:"}function Gw(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bk()||YC()||"connection"in navigator)?navigator.onLine:!0}function _k(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t){this.shortDelay=e,this.longDelay=t,_i(t>e,"Short delay should be less than long delay!"),this.isMobile=KC()||XC()}get(){return xk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(s,e){_i(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Tk=new wh(3e4,6e4);function La(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ua(s,e,t,n,a={}){return WT(s,a,async()=>{let l={},c={};n&&(e==="GET"?c=n:l={body:JSON.stringify(n)});const d=_h({key:s.config.apiKey,...c}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:p,...l};return QC()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&_c(s.emulatorConfig.host)&&(g.credentials="include"),JT.fetch()(await ZT(s,s.config.apiHost,t,d),g)})}async function WT(s,e,t){s._canInitEmulator=!1;const n={...wk,...e};try{const a=new Nk(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Zd(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zd(s,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Zd(s,"email-already-in-use",c);if(p==="USER_DISABLED")throw Zd(s,"user-disabled",c);const v=n[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw XT(s,v,g);bs(s,v)}}catch(a){if(a instanceof Si)throw a;bs(s,"network-request-failed",{message:String(a)})}}async function Eh(s,e,t,n,a={}){const l=await Ua(s,e,t,n,a);return"mfaPendingCredential"in l&&bs(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function ZT(s,e,t,n){const a=`${e}${t}?${n}`,l=s,c=l.config.emulator?Ny(s.config,a):`${s.config.apiScheme}://${a}`;return Ek.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Sk(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Nk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Gs(this.auth,"network-request-failed")),Tk.get())})}}function Zd(s,e,t){const n={appName:s.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const a=Gs(s,e,n);return a.customData._tokenResponse=t,a}function qw(s){return s!==void 0&&s.enterprise!==void 0}class Ak{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Sk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ik(s,e){return Ua(s,"GET","/v2/recaptchaConfig",La(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(s,e){return Ua(s,"POST","/v1/accounts:delete",e)}async function Mf(s,e){return Ua(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Rk(s,e=!1){const t=Nn(s),n=await t.getIdToken(e),a=Ay(n);Me(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:n,authTime:Bu(l0(a.auth_time)),issuedAtTime:Bu(l0(a.iat)),expirationTime:Bu(l0(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function l0(s){return Number(s)*1e3}function Ay(s){const[e,t,n]=s.split(".");if(e===void 0||t===void 0||n===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const a=OT(t);return a?JSON.parse(a):(pf("Failed to decode base64 JWT payload"),null)}catch(a){return pf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Hw(s){const e=Ay(s);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nh(s,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Si&&kk(n)&&s.auth.currentUser===s&&await s.auth.signOut(),n}}function kk({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vf(s){var x;const e=s.auth,t=await s.getIdToken(),n=await nh(s,Mf(e,{idToken:t}));Me(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];s._notifyReloadListener(a);const l=(x=a.providerUserInfo)!=null&&x.length?eS(a.providerUserInfo):[],c=Ok(s.providerData,l),d=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new j0(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(s,v)}async function jk(s){const e=Nn(s);await Vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ok(s,e){return[...s.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function eS(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(s,e){const t=await WT(s,{},async()=>{const n=_h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=await ZT(s,a,"/v1/token",`key=${l}`),d=await s._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:n};return s.emulatorConfig&&_c(s.emulatorConfig.host)&&(p.credentials="include"),JT.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Mk(s,e){return Ua(s,"POST","/v2/accounts:revokeToken",La(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=Hw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:a,expiresIn:l}=await Pk(e,t);this.updateTokensAndExpiration(n,a,Number(l))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:a,expirationTime:l}=t,c=new Xl;return n&&(Me(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),a&&(Me(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Me(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(s,e){Me(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ys{constructor({uid:e,auth:t,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new Dk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new j0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await nh(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Rk(this,e)}reload(){return jk(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Vf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await nh(this,Ck(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:x,emailVerified:E,isAnonymous:A,providerData:O,stsTokenManager:G}=t;Me(x&&G,e,"internal-error");const J=Xl.fromJSON(this.name,G);Me(typeof x=="string",e,"internal-error"),ha(n,e.name),ha(a,e.name),Me(typeof E=="boolean",e,"internal-error"),Me(typeof A=="boolean",e,"internal-error"),ha(l,e.name),ha(c,e.name),ha(d,e.name),ha(p,e.name),ha(g,e.name),ha(v,e.name);const ie=new ys({uid:x,auth:e,email:a,emailVerified:E,displayName:n,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:J,createdAt:g,lastLoginAt:v});return O&&Array.isArray(O)&&(ie.providerData=O.map(ce=>({...ce}))),p&&(ie._redirectEventId=p),ie}static async _fromIdTokenResponse(e,t,n=!1){const a=new Xl;a.updateFromServerResponse(t);const l=new ys({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Vf(l),l}static async _fromGetAccountInfoResponse(e,t,n){const a=t.users[0];Me(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?eS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Xl;d.updateFromIdToken(n);const p=new ys({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new j0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=new Map;function yi(s){_i(s instanceof Function,"Expected a class definition");let e=$w.get(s);return e?(_i(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,$w.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tS.type="NONE";const Kw=tS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(s,e,t){return`firebase:${s}:${e}:${t}`}class Jl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:a,name:l}=this.auth;this.fullUserKey=mf(this.userKey,a.apiKey,l),this.fullPersistenceKey=mf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Mf(this.auth,{idToken:e}).catch(()=>{});return t?ys._fromGetAccountInfoResponse(this.auth,t,e):null}return ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Jl(yi(Kw),e,n);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||yi(Kw);const c=mf(n,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let x;if(typeof v=="string"){const E=await Mf(e,{idToken:v}).catch(()=>{});if(!E)break;x=await ys._fromGetAccountInfoResponse(e,E,v)}else x=ys._fromJSON(e,v);g!==l&&(d=x),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Jl(l,e,n):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Jl(l,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oS(e))return"Blackberry";if(lS(e))return"Webos";if(rS(e))return"Safari";if((e.includes("chrome/")||sS(e))&&!e.includes("edge/"))return"Chrome";if(aS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=s.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function nS(s=wn()){return/firefox\//i.test(s)}function rS(s=wn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sS(s=wn()){return/crios\//i.test(s)}function iS(s=wn()){return/iemobile/i.test(s)}function aS(s=wn()){return/android/i.test(s)}function oS(s=wn()){return/blackberry/i.test(s)}function lS(s=wn()){return/webos/i.test(s)}function Iy(s=wn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Vk(s=wn()){var e;return Iy(s)&&!!((e=window.navigator)!=null&&e.standalone)}function Lk(){return JC()&&document.documentMode===10}function cS(s=wn()){return Iy(s)||aS(s)||lS(s)||oS(s)||/windows phone/i.test(s)||iS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(s,e=[]){let t;switch(s){case"Browser":t=Qw(wn());break;case"Worker":t=`${Qw(wn())}-${s}`;break;default:t=s}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});n.onAbort=t,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(s,e={}){return Ua(s,"GET","/v2/passwordPolicy",La(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=6;class Fk{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t,n,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yw(this),this.idTokenSubscription=new Yw(this),this.beforeStateQueue=new Uk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(async()=>{var n,a,l;if(!this._deleted&&(this.persistenceManager=await Jl.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mf(this,{idToken:e}),n=await ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ns(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=n==null?void 0:n._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(n=p.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(c){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_k()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(bi(this));const t=e?Nn(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Bk(this),t=new Fk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await Mk(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,n,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&vk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qo(s){return Nn(s)}class Yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=rR(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qk(s){dp=s}function hS(s){return dp.loadJS(s)}function Hk(){return dp.recaptchaEnterpriseScript}function $k(){return dp.gapiScript}function Kk(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Qk{constructor(){this.enterprise=new Yk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Yk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Xk="recaptcha-enterprise",dS="NO_RECAPTCHA";class Jk{constructor(e){this.type=Xk,this.auth=Qo(e)}async verify(e="verify",t=!1){async function n(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Ik(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new Ak(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;qw(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(dS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Qk().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{n(this.auth).then(d=>{if(!t&&qw(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Hk();p.length!==0&&(p+=d),hS(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Xw(s,e,t,n=!1,a=!1){const l=new Jk(s);let c;if(a)c=dS;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return n?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function O0(s,e,t,n,a){var l;if((l=s._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Xw(s,e,t,t==="getOobCode");return n(s,c)}else return n(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Xw(s,e,t,t==="getOobCode");return n(s,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(s,e){const t=Ty(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(jo(l,e??{}))return a;bs(a,"already-initialized")}return t.initialize({options:e})}function Zk(s,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(yi);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function e5(s,e,t){const n=Qo(s);Me(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,l=fS(e),{host:c,port:d}=t5(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Me(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Me(jo(g,n.config.emulator)&&jo(v,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=g,n.emulatorConfig=v,n.settings.appVerificationDisabledForTesting=!0,_c(c)?(LT(`${l}//${c}${p}`),$C("Auth",!0)):n5()}function fS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function t5(s){const e=fS(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const l=a[1];return{host:l,port:Jw(n.substr(l.length+1))}}else{const[l,c]=n.split(":");return{host:l,port:Jw(c)}}}function Jw(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function n5(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function r5(s,e){return Ua(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(s,e){return Eh(s,"POST","/v1/accounts:signInWithPassword",La(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(s,e){return Eh(s,"POST","/v1/accounts:signInWithEmailLink",La(s,e))}async function a5(s,e){return Eh(s,"POST","/v1/accounts:signInWithEmailLink",La(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends Cy{constructor(e,t,n,a=null){super("password",n),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new rh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new rh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return O0(e,t,"signInWithPassword",s5);case"emailLink":return i5(e,{email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return O0(e,n,"signUpPassword",r5);case"emailLink":return a5(e,{idToken:t,email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(s,e){return Eh(s,"POST","/v1/accounts:signInWithIdp",La(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5="http://localhost";class Po extends Cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...l}=t;if(!n||!a)return null;const c=new Po(n,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Wl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Wl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wl(e,t)}buildRequest(){const e={requestUri:o5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_h(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function c5(s){const e=Du(ju(s)).link,t=e?Du(ju(e)).deep_link_id:null,n=Du(ju(s)).deep_link_id;return(n?Du(ju(n)).link:null)||n||t||e||s}class Ry{constructor(e){const t=Du(ju(e)),n=t.apiKey??null,a=t.oobCode??null,l=l5(t.mode??null);Me(n&&a&&l,"argument-error"),this.apiKey=n,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=c5(e);try{return new Ry(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this.providerId=Ec.PROVIDER_ID}static credential(e,t){return rh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ry.parseLink(t);return Me(n,"argument-error"),rh._fromEmailAndCode(e,n.code,n.tenantId)}}Ec.PROVIDER_ID="password";Ec.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ec.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends pS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Th{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return va.credential(e.oauthAccessToken)}catch{return null}}}va.FACEBOOK_SIGN_IN_METHOD="facebook.com";va.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends Th{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Po._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return ba.credential(t,n)}catch{return null}}}ba.GOOGLE_SIGN_IN_METHOD="google.com";ba.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Th{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xa.credential(e.oauthAccessToken)}catch{return null}}}xa.GITHUB_SIGN_IN_METHOD="github.com";xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Th{constructor(){super("twitter.com")}static credential(e,t){return Po._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return _a.credential(t,n)}catch{return null}}}_a.TWITTER_SIGN_IN_METHOD="twitter.com";_a.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(s,e){return Eh(s,"POST","/v1/accounts:signUp",La(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,a=!1){const l=await ys._fromIdTokenResponse(e,n,a),c=Ww(n);return new Mo({user:l,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const a=Ww(n);return new Mo({user:e,providerId:a,_tokenResponse:n,operationType:t})}}function Ww(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends Si{constructor(e,t,n,a){super(t.code,t.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,a){return new Lf(e,t,n,a)}}function mS(s,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(s,l,e,n):l})}async function h5(s,e,t=!1){const n=await nh(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Mo._forOperation(s,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(s,e,t=!1){const{auth:n}=s;if(ns(n.app))return Promise.reject(bi(n));const a="reauthenticate";try{const l=await nh(s,mS(n,a,e,s),t);Me(l.idToken,n,"internal-error");const c=Ay(l.idToken);Me(c,n,"internal-error");const{sub:d}=c;return Me(s.uid===d,n,"user-mismatch"),Mo._forOperation(s,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&bs(n,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(s,e,t=!1){if(ns(s.app))return Promise.reject(bi(s));const n="signIn",a=await mS(s,n,e),l=await Mo._fromIdTokenResponse(s,n,a);return t||await s._updateCurrentUser(l.user),l}async function f5(s,e){return gS(Qo(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(s){const e=Qo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function p5(s,e,t){if(ns(s.app))return Promise.reject(bi(s));const n=Qo(s),c=await O0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",u5).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&yS(s),p}),d=await Mo._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(d.user),d}function m5(s,e,t){return ns(s.app)?Promise.reject(bi(s)):f5(Nn(s),Ec.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&yS(s),n})}function g5(s,e,t,n){return Nn(s).onIdTokenChanged(e,t,n)}function y5(s,e,t){return Nn(s).beforeAuthStateChanged(e,t)}function v5(s){return Nn(s).signOut()}const Uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=1e3,x5=10;class bS extends vS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),a=this.localCache[t];n!==a&&e(t,a,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const n=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},l=this.storage.getItem(n);Lk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,x5):a()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},b5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bS.type="LOCAL";const _5=bS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends vS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xS.type="SESSION";const _S=xS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const n=new fp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await w5(d);t.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(s="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=ky("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},n);c={messageChannel:a,onMessage(x){const E=x;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(){return window}function T5(s){qs().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return typeof qs().WorkerGlobalScope<"u"&&typeof qs().importScripts=="function"}async function S5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N5(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function A5(){return wS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebaseLocalStorageDb",I5=1,Bf="firebaseLocalStorage",TS="fbase_key";class Sh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pp(s,e){return s.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function C5(){const s=indexedDB.deleteDatabase(ES);return new Sh(s).toPromise()}function P0(){const s=indexedDB.open(ES,I5);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const n=s.result;try{n.createObjectStore(Bf,{keyPath:TS})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const n=s.result;n.objectStoreNames.contains(Bf)?e(n):(n.close(),await C5(),e(await P0()))})})}async function Zw(s,e,t){const n=pp(s,!0).put({[TS]:e,value:t});return new Sh(n).toPromise()}async function R5(s,e){const t=pp(s,!1).get(e),n=await new Sh(t).toPromise();return n===void 0?null:n.value}function e1(s,e){const t=pp(s,!0).delete(e);return new Sh(t).toPromise()}const k5=800,D5=3;class SS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>D5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fp._getInstance(A5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await S5(),!this.activeServiceWorker)return;this.sender=new E5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await P0();return await Zw(e,Uf,"1"),await e1(e,Uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zw(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>R5(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>e1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=pp(a,!1).getAll();return new Sh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SS.type="LOCAL";const j5=SS;new wh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(s,e){return e?yi(e):(Me(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends Cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function P5(s){return gS(s.auth,new Dy(s),s.bypassAuthState)}function M5(s){const{auth:e,user:t}=s;return Me(t,e,"internal-error"),d5(t,new Dy(s),s.bypassAuthState)}async function V5(s){const{auth:e,user:t}=s;return Me(t,e,"internal-error"),h5(t,new Dy(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t,n,a,l=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:n,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P5;case"linkViaPopup":case"linkViaRedirect":return V5;case"reauthViaPopup":case"reauthViaRedirect":return M5;default:bs(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=new wh(2e3,1e4);class Ql extends NS{constructor(e,t,n,a,l){super(e,t,a,l),this.provider=n,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,L5.get())};e()}}Ql.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5="pendingRedirect",gf=new Map;class B5 extends NS{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=gf.get(this.auth._key());if(!e){try{const n=await z5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}gf.set(this.auth._key(),e)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z5(s,e){const t=q5(e),n=G5(s);if(!await n._isAvailable())return!1;const a=await n._get(t)==="true";return await n._remove(t),a}function F5(s,e){gf.set(s._key(),e)}function G5(s){return yi(s._redirectPersistence)}function q5(s){return mf(U5,s.config.apiKey,s.name)}async function H5(s,e,t=!1){if(ns(s.app))return Promise.reject(bi(s));const n=Qo(s),a=O5(n,e),c=await new B5(n,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=600*1e3;class K5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Q5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!AS(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gs(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$5&&this.cachedEventUids.clear(),this.cachedEventUids.has(t1(e))}saveEventToCache(e){this.cachedEventUids.add(t1(e)),this.lastProcessedEventTime=Date.now()}}function t1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function AS({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Q5(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AS(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(s,e={}){return Ua(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J5=/^https?/;async function W5(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Y5(s);for(const t of e)try{if(Z5(t))return}catch{}bs(s,"unauthorized-domain")}function Z5(s){const e=D0(),{protocol:t,hostname:n}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&n===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!J5.test(t))return!1;if(X5.test(s))return n===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new wh(3e4,6e4);function n1(){const s=qs().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function t4(s){return new Promise((e,t)=>{var a,l,c;function n(){n1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n1(),t(Gs(s,"network-request-failed"))},timeout:e4.get()})}if((l=(a=qs().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=qs().gapi)!=null&&c.load)n();else{const d=Kk("iframefcb");return qs()[d]=()=>{gapi.load?n():t(Gs(s,"network-request-failed"))},hS(`${$k()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw yf=null,e})}let yf=null;function n4(s){return yf=yf||t4(s),yf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new wh(5e3,15e3),s4="__/auth/iframe",i4="emulator/auth/iframe",a4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l4(s){const e=s.config;Me(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Ny(e,i4):`https://${s.config.authDomain}/${s4}`,n={apiKey:e.apiKey,appName:s.name,v:wc},a=o4.get(s.config.apiHost);a&&(n.eid=a);const l=s._getFrameworks();return l.length&&(n.fw=l.join(",")),`${t}?${_h(n).slice(1)}`}async function c4(s){const e=await n4(s),t=qs().gapi;return Me(t,s,"internal-error"),e.open({where:document.body,url:l4(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a4,dontclear:!0},n=>new Promise(async(a,l)=>{await n.restyle({setHideOnLeave:!1});const c=Gs(s,"network-request-failed"),d=qs().setTimeout(()=>{l(c)},r4.get());function p(){qs().clearTimeout(d),a(n)}n.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h4=500,d4=600,f4="_blank",p4="http://localhost";class r1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m4(s,e,t,n=h4,a=d4){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let d="";const p={...u4,width:n.toString(),height:a.toString(),top:l,left:c},g=wn().toLowerCase();t&&(d=sS(g)?f4:t),nS(g)&&(e=e||p4,p.scrollbars="yes");const v=Object.entries(p).reduce((E,[A,O])=>`${E}${A}=${O},`,"");if(Vk(g)&&d!=="_self")return g4(e||"",d),new r1(null);const x=window.open(e||"",d,v);Me(x,s,"popup-blocked");try{x.focus()}catch{}return new r1(x)}function g4(s,e){const t=document.createElement("a");t.href=s,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="__/auth/handler",v4="emulator/auth/handler",b4=encodeURIComponent("fac");async function s1(s,e,t,n,a,l){Me(s.config.authDomain,s,"auth-domain-config-required"),Me(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:n,v:wc,eventId:a};if(e instanceof pS){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",nR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,x]of Object.entries({}))c[v]=x}if(e instanceof Th){const v=e.getScopes().filter(x=>x!=="");v.length>0&&(c.scopes=v.join(","))}s.tenantId&&(c.tid=s.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await s._getAppCheckToken(),g=p?`#${b4}=${encodeURIComponent(p)}`:"";return`${x4(s)}?${_h(d).slice(1)}${g}`}function x4({config:s}){return s.emulator?Ny(s,v4):`https://${s.authDomain}/${y4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="webStorageSupport";class _4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_S,this._completeRedirectFn=H5,this._overrideRedirectResult=F5}async _openPopup(e,t,n,a){var c;_i((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await s1(e,t,n,D0(),a);return m4(e,l,ky())}async _openRedirect(e,t,n,a){await this._originValidation(e);const l=await s1(e,t,n,D0(),a);return T5(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(_i(l,"If manager is not set, promise should be"),l)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await c4(e),n=new K5(e);return t.register("authEvent",a=>(Me(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(c0,{type:c0},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[c0];l!==void 0&&t(!!l),bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=W5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cS()||rS()||Iy()}}const w4=_4;var i1="@firebase/auth",a1="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S4(s){tc(new Oo("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=n.options;Me(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const p={apiKey:c,authDomain:d,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uS(s)},g=new Gk(n,a,l,p);return Zk(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),tc(new Oo("auth-internal",e=>{const t=Qo(e.getProvider("auth").getImmediate());return(n=>new E4(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ra(i1,a1,T4(s)),Ra(i1,a1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=300,A4=VT("authIdTokenMaxAge")||N4;let o1=null;const I4=s=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>A4)return;const a=t==null?void 0:t.token;o1!==a&&(o1=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function C4(s=sk()){const e=Ty(s,"auth");if(e.isInitialized())return e.getImmediate();const t=Wk(s,{popupRedirectResolver:w4,persistence:[j5,_5,_S]}),n=VT("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(n,location.origin);if(location.origin===l.origin){const c=I4(l.toString());y5(t,c,()=>c(t.currentUser)),g5(t,d=>c(d))}}const a=FC("auth");return a&&e5(t,`http://${a}`),t}function R4(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}qk({loadJS(s){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",s),n.onload=e,n.onerror=a=>{const l=Gs("internal-error");l.customData=a,t(l)},n.type="text/javascript",n.charset="UTF-8",R4().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S4("Browser");var l1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ka,IS;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function R(){}R.prototype=I.prototype,C.F=I.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(L,j,P){for(var k=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)k[rt-2]=arguments[rt];return I.prototype[j].apply(L,k)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,I,R){R||(R=0);const L=Array(16);if(typeof I=="string")for(var j=0;j<16;++j)L[j]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(j=0;j<16;++j)L[j]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=C.g[0],R=C.g[1],j=C.g[2];let P=C.g[3],k;k=I+(P^R&(j^P))+L[0]+3614090360&4294967295,I=R+(k<<7&4294967295|k>>>25),k=P+(j^I&(R^j))+L[1]+3905402710&4294967295,P=I+(k<<12&4294967295|k>>>20),k=j+(R^P&(I^R))+L[2]+606105819&4294967295,j=P+(k<<17&4294967295|k>>>15),k=R+(I^j&(P^I))+L[3]+3250441966&4294967295,R=j+(k<<22&4294967295|k>>>10),k=I+(P^R&(j^P))+L[4]+4118548399&4294967295,I=R+(k<<7&4294967295|k>>>25),k=P+(j^I&(R^j))+L[5]+1200080426&4294967295,P=I+(k<<12&4294967295|k>>>20),k=j+(R^P&(I^R))+L[6]+2821735955&4294967295,j=P+(k<<17&4294967295|k>>>15),k=R+(I^j&(P^I))+L[7]+4249261313&4294967295,R=j+(k<<22&4294967295|k>>>10),k=I+(P^R&(j^P))+L[8]+1770035416&4294967295,I=R+(k<<7&4294967295|k>>>25),k=P+(j^I&(R^j))+L[9]+2336552879&4294967295,P=I+(k<<12&4294967295|k>>>20),k=j+(R^P&(I^R))+L[10]+4294925233&4294967295,j=P+(k<<17&4294967295|k>>>15),k=R+(I^j&(P^I))+L[11]+2304563134&4294967295,R=j+(k<<22&4294967295|k>>>10),k=I+(P^R&(j^P))+L[12]+1804603682&4294967295,I=R+(k<<7&4294967295|k>>>25),k=P+(j^I&(R^j))+L[13]+4254626195&4294967295,P=I+(k<<12&4294967295|k>>>20),k=j+(R^P&(I^R))+L[14]+2792965006&4294967295,j=P+(k<<17&4294967295|k>>>15),k=R+(I^j&(P^I))+L[15]+1236535329&4294967295,R=j+(k<<22&4294967295|k>>>10),k=I+(j^P&(R^j))+L[1]+4129170786&4294967295,I=R+(k<<5&4294967295|k>>>27),k=P+(R^j&(I^R))+L[6]+3225465664&4294967295,P=I+(k<<9&4294967295|k>>>23),k=j+(I^R&(P^I))+L[11]+643717713&4294967295,j=P+(k<<14&4294967295|k>>>18),k=R+(P^I&(j^P))+L[0]+3921069994&4294967295,R=j+(k<<20&4294967295|k>>>12),k=I+(j^P&(R^j))+L[5]+3593408605&4294967295,I=R+(k<<5&4294967295|k>>>27),k=P+(R^j&(I^R))+L[10]+38016083&4294967295,P=I+(k<<9&4294967295|k>>>23),k=j+(I^R&(P^I))+L[15]+3634488961&4294967295,j=P+(k<<14&4294967295|k>>>18),k=R+(P^I&(j^P))+L[4]+3889429448&4294967295,R=j+(k<<20&4294967295|k>>>12),k=I+(j^P&(R^j))+L[9]+568446438&4294967295,I=R+(k<<5&4294967295|k>>>27),k=P+(R^j&(I^R))+L[14]+3275163606&4294967295,P=I+(k<<9&4294967295|k>>>23),k=j+(I^R&(P^I))+L[3]+4107603335&4294967295,j=P+(k<<14&4294967295|k>>>18),k=R+(P^I&(j^P))+L[8]+1163531501&4294967295,R=j+(k<<20&4294967295|k>>>12),k=I+(j^P&(R^j))+L[13]+2850285829&4294967295,I=R+(k<<5&4294967295|k>>>27),k=P+(R^j&(I^R))+L[2]+4243563512&4294967295,P=I+(k<<9&4294967295|k>>>23),k=j+(I^R&(P^I))+L[7]+1735328473&4294967295,j=P+(k<<14&4294967295|k>>>18),k=R+(P^I&(j^P))+L[12]+2368359562&4294967295,R=j+(k<<20&4294967295|k>>>12),k=I+(R^j^P)+L[5]+4294588738&4294967295,I=R+(k<<4&4294967295|k>>>28),k=P+(I^R^j)+L[8]+2272392833&4294967295,P=I+(k<<11&4294967295|k>>>21),k=j+(P^I^R)+L[11]+1839030562&4294967295,j=P+(k<<16&4294967295|k>>>16),k=R+(j^P^I)+L[14]+4259657740&4294967295,R=j+(k<<23&4294967295|k>>>9),k=I+(R^j^P)+L[1]+2763975236&4294967295,I=R+(k<<4&4294967295|k>>>28),k=P+(I^R^j)+L[4]+1272893353&4294967295,P=I+(k<<11&4294967295|k>>>21),k=j+(P^I^R)+L[7]+4139469664&4294967295,j=P+(k<<16&4294967295|k>>>16),k=R+(j^P^I)+L[10]+3200236656&4294967295,R=j+(k<<23&4294967295|k>>>9),k=I+(R^j^P)+L[13]+681279174&4294967295,I=R+(k<<4&4294967295|k>>>28),k=P+(I^R^j)+L[0]+3936430074&4294967295,P=I+(k<<11&4294967295|k>>>21),k=j+(P^I^R)+L[3]+3572445317&4294967295,j=P+(k<<16&4294967295|k>>>16),k=R+(j^P^I)+L[6]+76029189&4294967295,R=j+(k<<23&4294967295|k>>>9),k=I+(R^j^P)+L[9]+3654602809&4294967295,I=R+(k<<4&4294967295|k>>>28),k=P+(I^R^j)+L[12]+3873151461&4294967295,P=I+(k<<11&4294967295|k>>>21),k=j+(P^I^R)+L[15]+530742520&4294967295,j=P+(k<<16&4294967295|k>>>16),k=R+(j^P^I)+L[2]+3299628645&4294967295,R=j+(k<<23&4294967295|k>>>9),k=I+(j^(R|~P))+L[0]+4096336452&4294967295,I=R+(k<<6&4294967295|k>>>26),k=P+(R^(I|~j))+L[7]+1126891415&4294967295,P=I+(k<<10&4294967295|k>>>22),k=j+(I^(P|~R))+L[14]+2878612391&4294967295,j=P+(k<<15&4294967295|k>>>17),k=R+(P^(j|~I))+L[5]+4237533241&4294967295,R=j+(k<<21&4294967295|k>>>11),k=I+(j^(R|~P))+L[12]+1700485571&4294967295,I=R+(k<<6&4294967295|k>>>26),k=P+(R^(I|~j))+L[3]+2399980690&4294967295,P=I+(k<<10&4294967295|k>>>22),k=j+(I^(P|~R))+L[10]+4293915773&4294967295,j=P+(k<<15&4294967295|k>>>17),k=R+(P^(j|~I))+L[1]+2240044497&4294967295,R=j+(k<<21&4294967295|k>>>11),k=I+(j^(R|~P))+L[8]+1873313359&4294967295,I=R+(k<<6&4294967295|k>>>26),k=P+(R^(I|~j))+L[15]+4264355552&4294967295,P=I+(k<<10&4294967295|k>>>22),k=j+(I^(P|~R))+L[6]+2734768916&4294967295,j=P+(k<<15&4294967295|k>>>17),k=R+(P^(j|~I))+L[13]+1309151649&4294967295,R=j+(k<<21&4294967295|k>>>11),k=I+(j^(R|~P))+L[4]+4149444226&4294967295,I=R+(k<<6&4294967295|k>>>26),k=P+(R^(I|~j))+L[11]+3174756917&4294967295,P=I+(k<<10&4294967295|k>>>22),k=j+(I^(P|~R))+L[2]+718787259&4294967295,j=P+(k<<15&4294967295|k>>>17),k=R+(P^(j|~I))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+P&4294967295}n.prototype.v=function(C,I){I===void 0&&(I=C.length);const R=I-this.blockSize,L=this.C;let j=this.h,P=0;for(;P<I;){if(j==0)for(;P<=R;)a(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<I;)if(L[j++]=C.charCodeAt(P++),j==this.blockSize){a(this,L),j=0;break}}else for(;P<I;)if(L[j++]=C[P++],j==this.blockSize){a(this,L),j=0;break}}this.h=j,this.o+=I},n.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,R=0;R<4;++R)for(let L=0;L<32;L+=8)C[I++]=this.g[R]>>>L&255;return C};function l(C,I){var R=d;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=I(C)}function c(C,I){this.h=I;const R=[];let L=!0;for(let j=C.length-1;j>=0;j--){const P=C[j]|0;L&&P==I||(R[j]=P,L=!1)}this.g=R}var d={};function p(C){return-128<=C&&C<128?l(C,function(I){return new c([I|0],I<0?-1:0)}):new c([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return x;if(C<0)return J(g(-C));const I=[];let R=1;for(let L=0;C>=R;L++)I[L]=C/R|0,R*=4294967296;return new c(I,0)}function v(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return J(v(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(I,8));let L=x;for(let P=0;P<C.length;P+=8){var j=Math.min(8,C.length-P);const k=parseInt(C.substring(P,P+j),I);j<8?(j=g(Math.pow(I,j)),L=L.j(j).add(g(k))):(L=L.j(R),L=L.add(g(k)))}return L}var x=p(0),E=p(1),A=p(16777216);s=c.prototype,s.m=function(){if(G(this))return-J(this).m();let C=0,I=1;for(let R=0;R<this.g.length;R++){const L=this.i(R);C+=(L>=0?L:4294967296+L)*I,I*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(O(this))return"0";if(G(this))return"-"+J(this).toString(C);const I=g(Math.pow(C,6));var R=this;let L="";for(;;){const j=ge(R,I).g;R=ie(R,j.j(I));let P=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=j,O(R))return P+L;for(;P.length<6;)P="0"+P;L=P+L}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function O(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function G(C){return C.h==-1}s.l=function(C){return C=ie(this,C),G(C)?-1:O(C)?0:1};function J(C){const I=C.g.length,R=[];for(let L=0;L<I;L++)R[L]=~C.g[L];return new c(R,~C.h).add(E)}s.abs=function(){return G(this)?J(this):this},s.add=function(C){const I=Math.max(this.g.length,C.g.length),R=[];let L=0;for(let j=0;j<=I;j++){let P=L+(this.i(j)&65535)+(C.i(j)&65535),k=(P>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);L=k>>>16,P&=65535,k&=65535,R[j]=k<<16|P}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ie(C,I){return C.add(J(I))}s.j=function(C){if(O(this)||O(C))return x;if(G(this))return G(C)?J(this).j(J(C)):J(J(this).j(C));if(G(C))return J(this.j(J(C)));if(this.l(A)<0&&C.l(A)<0)return g(this.m()*C.m());const I=this.g.length+C.g.length,R=[];for(var L=0;L<2*I;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(let j=0;j<C.g.length;j++){const P=this.i(L)>>>16,k=this.i(L)&65535,rt=C.i(j)>>>16,Et=C.i(j)&65535;R[2*L+2*j]+=k*Et,ce(R,2*L+2*j),R[2*L+2*j+1]+=P*Et,ce(R,2*L+2*j+1),R[2*L+2*j+1]+=k*rt,ce(R,2*L+2*j+1),R[2*L+2*j+2]+=P*rt,ce(R,2*L+2*j+2)}for(C=0;C<I;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=I;C<2*I;C++)R[C]=0;return new c(R,0)};function ce(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function le(C,I){this.g=C,this.h=I}function ge(C,I){if(O(I))throw Error("division by zero");if(O(C))return new le(x,x);if(G(C))return I=ge(J(C),I),new le(J(I.g),J(I.h));if(G(I))return I=ge(C,J(I)),new le(J(I.g),I.h);if(C.g.length>30){if(G(C)||G(I))throw Error("slowDivide_ only works with positive integers.");for(var R=E,L=I;L.l(C)<=0;)R=Ee(R),L=Ee(L);var j=ve(R,1),P=ve(L,1);for(L=ve(L,2),R=ve(R,2);!O(L);){var k=P.add(L);k.l(C)<=0&&(j=j.add(R),P=k),L=ve(L,1),R=ve(R,1)}return I=ie(C,j.j(I)),new le(j,I)}for(j=x;C.l(I)>=0;){for(R=Math.max(1,Math.floor(C.m()/I.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),P=g(R),k=P.j(I);G(k)||k.l(C)>0;)R-=L,P=g(R),k=P.j(I);O(P)&&(P=E),j=j.add(P),C=ie(C,k)}return new le(j,C)}s.B=function(C){return ge(this,C).h},s.and=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let L=0;L<I;L++)R[L]=this.i(L)&C.i(L);return new c(R,this.h&C.h)},s.or=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let L=0;L<I;L++)R[L]=this.i(L)|C.i(L);return new c(R,this.h|C.h)},s.xor=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let L=0;L<I;L++)R[L]=this.i(L)^C.i(L);return new c(R,this.h^C.h)};function Ee(C){const I=C.g.length+1,R=[];for(let L=0;L<I;L++)R[L]=C.i(L)<<1|C.i(L-1)>>>31;return new c(R,C.h)}function ve(C,I){const R=I>>5;I%=32;const L=C.g.length-R,j=[];for(let P=0;P<L;P++)j[P]=I>0?C.i(P+R)>>>I|C.i(P+R+1)<<32-I:C.i(P+R);return new c(j,C.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,IS=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,ka=c}).apply(typeof l1<"u"?l1:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CS,Ou,RS,vf,M0,kS,DS,jS;(function(){var s,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var b=0;b<f.length;++b){var w=f[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var n=t(this);function a(f,b){if(b)e:{var w=n;f=f.split(".");for(var N=0;N<f.length-1;N++){var F=f[N];if(!(F in w))break e;w=w[F]}f=f[f.length-1],N=w[f],b=b(N),b!=N&&b!=null&&e(w,f,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(b){var w=[],N;for(N in b)Object.prototype.hasOwnProperty.call(b,N)&&w.push([N,b[N]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function p(f,b,w){return f.call.apply(f.bind,arguments)}function g(f,b,w){return g=p,g.apply(null,arguments)}function v(f,b){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function x(f,b){function w(){}w.prototype=b.prototype,f.Z=b.prototype,f.prototype=new w,f.prototype.constructor=f,f.Ob=function(N,F,K){for(var de=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)de[Be-2]=arguments[Be];return b.prototype[F].apply(N,de)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function A(f){const b=f.length;if(b>0){const w=Array(b);for(let N=0;N<b;N++)w[N]=f[N];return w}return[]}function O(f,b){for(let N=1;N<arguments.length;N++){const F=arguments[N];var w=typeof F;if(w=w!="object"?w:F?Array.isArray(F)?"array":w:"null",w=="array"||w=="object"&&typeof F.length=="number"){w=f.length||0;const K=F.length||0;f.length=w+K;for(let de=0;de<K;de++)f[w+de]=F[de]}else f.push(F)}}class G{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function J(f){c.setTimeout(()=>{throw f},0)}function ie(){var f=C;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class ce{constructor(){this.h=this.g=null}add(b,w){const N=le.get();N.set(b,w),this.h?this.h.next=N:this.g=N,this.h=N}}var le=new G(()=>new ge,f=>f.reset());class ge{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ve=!1,C=new ce,I=()=>{const f=Promise.resolve(void 0);Ee=()=>{f.then(R)}};function R(){for(var f;f=ie();){try{f.h.call(f.g)}catch(w){J(w)}var b=le;b.j(f),b.h<100&&(b.h++,f.next=b.g,b.g=f)}ve=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};c.addEventListener("test",w,b),c.removeEventListener("test",w,b)}catch{}return f})();function k(f){return/^[\s\xa0]*$/.test(f)}function rt(f,b){j.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,b)}x(rt,j),rt.prototype.init=function(f,b){const w=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget,b||(w=="mouseover"?b=f.fromElement:w=="mouseout"&&(b=f.toElement)),this.relatedTarget=b,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Et="closure_listenable_"+(Math.random()*1e6|0),X=0;function ue(f,b,w,N,F){this.listener=f,this.proxy=null,this.src=b,this.type=w,this.capture=!!N,this.ha=F,this.key=++X,this.da=this.fa=!1}function Ie(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ge(f,b,w){for(const N in f)b.call(w,f[N],N,f)}function $e(f,b){for(const w in f)b.call(void 0,f[w],w,f)}function M(f){const b={};for(const w in f)b[w]=f[w];return b}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(f,b){let w,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(w in N)f[w]=N[w];for(let K=0;K<ne.length;K++)w=ne[K],Object.prototype.hasOwnProperty.call(N,w)&&(f[w]=N[w])}}function be(f){this.src=f,this.g={},this.h=0}be.prototype.add=function(f,b,w,N,F){const K=f.toString();f=this.g[K],f||(f=this.g[K]=[],this.h++);const de=ke(f,b,N,F);return de>-1?(b=f[de],w||(b.fa=!1)):(b=new ue(b,this.src,K,!!N,F),b.fa=w,f.push(b)),b};function Re(f,b){const w=b.type;if(w in f.g){var N=f.g[w],F=Array.prototype.indexOf.call(N,b,void 0),K;(K=F>=0)&&Array.prototype.splice.call(N,F,1),K&&(Ie(b),f.g[w].length==0&&(delete f.g[w],f.h--))}}function ke(f,b,w,N){for(let F=0;F<f.length;++F){const K=f[F];if(!K.da&&K.listener==b&&K.capture==!!w&&K.ha==N)return F}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Dt={};function pt(f,b,w,N,F){if(Array.isArray(b)){for(let K=0;K<b.length;K++)pt(f,b[K],w,N,F);return null}return w=Ys(w),f&&f[Et]?f.J(b,w,d(N)?!!N.capture:!1,F):ss(f,b,w,!1,N,F)}function ss(f,b,w,N,F,K){if(!b)throw Error("Invalid event type");const de=d(F)?!!F.capture:!!F;let Be=is(f);if(Be||(f[Ue]=Be=new be(f)),w=Be.add(b,w,N,de,K),w.proxy)return w;if(N=Kt(),w.proxy=N,N.src=f,N.listener=w,f.addEventListener)P||(F=de),F===void 0&&(F=!1),f.addEventListener(b.toString(),N,F);else if(f.attachEvent)f.attachEvent(vr(b.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Kt(){function f(w){return b.call(f.src,f.listener,w)}const b=Ii;return f}function _s(f,b,w,N,F){if(Array.isArray(b))for(var K=0;K<b.length;K++)_s(f,b[K],w,N,F);else N=d(N)?!!N.capture:!!N,w=Ys(w),f&&f[Et]?(f=f.i,K=String(b).toString(),K in f.g&&(b=f.g[K],w=ke(b,w,N,F),w>-1&&(Ie(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete f.g[K],f.h--)))):f&&(f=is(f))&&(b=f.g[b.toString()],f=-1,b&&(f=ke(b,w,N,F)),(w=f>-1?b[f]:null)&&ws(w))}function ws(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[Et])Re(b.i,f);else{var w=f.type,N=f.proxy;b.removeEventListener?b.removeEventListener(w,N,f.capture):b.detachEvent?b.detachEvent(vr(w),N):b.addListener&&b.removeListener&&b.removeListener(N),(w=is(b))?(Re(w,f),w.h==0&&(w.src=null,b[Ue]=null)):Ie(f)}}}function vr(f){return f in Dt?Dt[f]:Dt[f]="on"+f}function Ii(f,b){if(f.da)f=!0;else{b=new rt(b,this);const w=f.listener,N=f.ha||f.src;f.fa&&ws(f),f=w.call(N,b)}return f}function is(f){return f=f[Ue],f instanceof be?f:null}var Qs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ys(f){return typeof f=="function"?f:(f[Qs]||(f[Qs]=function(b){return f.handleEvent(b)}),f[Qs])}function Tt(){L.call(this),this.i=new be(this),this.M=this,this.G=null}x(Tt,L),Tt.prototype[Et]=!0,Tt.prototype.removeEventListener=function(f,b,w,N){_s(this,f,b,w,N)};function st(f,b){var w,N=f.G;if(N)for(w=[];N;N=N.G)w.push(N);if(f=f.M,N=b.type||b,typeof b=="string")b=new j(b,f);else if(b instanceof j)b.target=b.target||f;else{var F=b;b=new j(N,f),fe(b,F)}F=!0;let K,de;if(w)for(de=w.length-1;de>=0;de--)K=b.g=w[de],F=nn(K,N,!0,b)&&F;if(K=b.g=f,F=nn(K,N,!0,b)&&F,F=nn(K,N,!1,b)&&F,w)for(de=0;de<w.length;de++)K=b.g=w[de],F=nn(K,N,!1,b)&&F}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var f=this.i;for(const b in f.g){const w=f.g[b];for(let N=0;N<w.length;N++)Ie(w[N]);delete f.g[b],f.h--}}this.G=null},Tt.prototype.J=function(f,b,w,N){return this.i.add(String(f),b,!1,w,N)},Tt.prototype.K=function(f,b,w,N){return this.i.add(String(f),b,!0,w,N)};function nn(f,b,w,N){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();let F=!0;for(let K=0;K<b.length;++K){const de=b[K];if(de&&!de.da&&de.capture==w){const Be=de.listener,sn=de.ha||de.src;de.fa&&Re(f.i,de),F=Be.call(sn,N)!==!1&&F}}return F&&!N.defaultPrevented}function Es(f,b){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(f,b||0)}function Yn(f){f.g=Es(()=>{f.g=null,f.i&&(f.i=!1,Yn(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class bn extends L{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Yn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rn(f){L.call(this),this.h=f,this.g={}}x(rn,L);var ir=[];function ar(f){Ge(f.g,function(b,w){this.g.hasOwnProperty(w)&&ws(b)},f),f.g={}}rn.prototype.N=function(){rn.Z.N.call(this),ar(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Y=c.JSON.stringify,pe=c.JSON.parse,mt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Xn(){}function Vr(){}var Mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function at(){j.call(this,"d")}x(at,j);function Rt(){j.call(this,"c")}x(Rt,j);var xe={},un=null;function or(){return un=un||new Tt}xe.Ia="serverreachability";function Ts(f){j.call(this,xe.Ia,f)}x(Ts,j);function An(f){const b=or();st(b,new Ts(b))}xe.STAT_EVENT="statevent";function Lr(f,b){j.call(this,xe.STAT_EVENT,f),this.stat=b}x(Lr,j);function jt(f){const b=or();st(b,new Lr(b,f))}xe.Ja="timingevent";function xn(f,b){j.call(this,xe.Ja,f),this.size=b}x(xn,j);function Ur(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},b)}function Vn(){this.g=!0}Vn.prototype.ua=function(){this.g=!1};function Jo(f,b,w,N,F,K){f.info(function(){if(f.g)if(K){var de="",Be=K.split("&");for(let ut=0;ut<Be.length;ut++){var sn=Be[ut].split("=");if(sn.length>1){const Ut=sn[0];sn=sn[1];const Kr=Ut.split("_");de=Kr.length>=2&&Kr[1]=="type"?de+(Ut+"="+sn+"&"):de+(Ut+"=redacted&")}}}else de=null;else de=K;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+b+`
`+w+`
`+de})}function Ci(f,b,w,N,F,K,de){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+b+`
`+w+`
`+K+" "+de})}function br(f,b,w,N){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+qa(f,w)+(N?" "+N:"")})}function Xs(f,b){f.info(function(){return"TIMEOUT: "+b})}Vn.prototype.info=function(){};function qa(f,b){if(!f.g)return b;if(!b)return null;try{const K=JSON.parse(b);if(K){for(f=0;f<K.length;f++)if(Array.isArray(K[f])){var w=K[f];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let de=1;de<N.length;de++)N[de]=""}}}}return Y(K)}catch{return b}}var as={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Te;function Ss(){}x(Ss,Xn),Ss.prototype.g=function(){return new XMLHttpRequest},Te=new Ss;function os(f){return encodeURIComponent(String(f))}function Ha(f){var b=1;f=f.split(":");const w=[];for(;b>0&&f.length;)w.push(f.shift()),b--;return f.length&&w.push(f.join(":")),w}function xr(f,b,w,N){this.j=f,this.i=b,this.l=w,this.S=N||1,this.V=new rn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lr}function lr(){this.i=null,this.g="",this.h=!1}var Vt={},Yt={};function Br(f,b,w){f.M=1,f.A=Ft(Lt(b)),f.u=w,f.R=!0,Ri(f,null)}function Ri(f,b){f.F=Date.now(),_r(f),f.B=Lt(f.A);var w=f.B,N=f.S;Array.isArray(N)||(N=[String(N)]),Zn(w.i,"t",N),f.C=0,w=f.j.L,f.h=new lr,f.g=Hh(f.j,w?b:null,!f.u),f.P>0&&(f.O=new bn(g(f.Y,f,f.g),f.P)),b=f.V,w=f.g,N=f.ba;var F="readystatechange";Array.isArray(F)||(F&&(ir[0]=F.toString()),F=ir);for(let K=0;K<F.length;K++){const de=pt(w,F[K],N||b.handleEvent,!1,b.h||b);if(!de)break;b.g[de.key]=de}b=f.J?M(f.J):{},f.u?(f.v||(f.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,b)):(f.v="GET",f.g.ea(f.B,f.v,null,b)),An(),Jo(f.i,f.v,f.B,f.l,f.S,f.u)}xr.prototype.ba=function(f){f=f.target;const b=this.O;b&&us(f)==3?b.j():this.Y(f)},xr.prototype.Y=function(f){try{if(f==this.g)e:{const Be=us(this.g),sn=this.g.ya(),ut=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||In(this.g)))){this.K||Be!=4||sn==7||(sn==8||ut<=0?An(3):An(2)),wr(this);var b=this.g.ca();this.X=b;var w=ki(this);if(this.o=b==200,Ci(this.i,this.v,this.B,this.l,this.S,Be,b),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(N)){var K=N;break t}}K=null}if(f=K)br(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zr(this,f);else{this.o=!1,this.m=3,jt(12),Ln(this),Jn(this);break e}}if(this.R){f=!0;let Ut;for(;!this.K&&this.C<w.length;)if(Ut=Wo(this,w),Ut==Yt){Be==4&&(this.m=4,jt(14),f=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Vt){this.m=4,jt(15),br(this.i,this.l,w,"[Invalid Chunk]"),f=!1;break}else br(this.i,this.l,Ut,null),zr(this,Ut);if($a(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||w.length!=0||this.h.h||(this.m=1,jt(16),f=!1),this.o=this.o&&f,!f)br(this.i,this.l,w,"[Invalid Chunked Response]"),Ln(this),Jn(this);else if(w.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Pc(de),de.P=!0,jt(11))}}else br(this.i,this.l,w,null),zr(this,w);Be==4&&Ln(this),this.o&&!this.K&&(Be==4?zh(this.j,this):(this.o=!1,_r(this)))}else Zs(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),Ln(this),Jn(this)}}}catch{}finally{}};function ki(f){if(!$a(f))return f.g.la();const b=In(f.g);if(b==="")return"";let w="";const N=b.length,F=us(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Ln(f),Jn(f),"";f.h.i=new c.TextDecoder}for(let K=0;K<N;K++)f.h.h=!0,w+=f.h.i.decode(b[K],{stream:!(F&&K==N-1)});return b.length=0,f.h.g+=w,f.C=0,f.h.g}function $a(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Wo(f,b){var w=f.C,N=b.indexOf(`
`,w);return N==-1?Yt:(w=Number(b.substring(w,N)),isNaN(w)?Vt:(N+=1,N+w>b.length?Yt:(b=b.slice(N,N+w),f.C=N+w,b)))}xr.prototype.cancel=function(){this.K=!0,Ln(this)};function _r(f){f.T=Date.now()+f.H,Js(f,f.H)}function Js(f,b){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Ur(g(f.aa,f),b)}function wr(f){f.D&&(c.clearTimeout(f.D),f.D=null)}xr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Xs(this.i,this.B),this.M!=2&&(An(),jt(17)),Ln(this),this.m=2,Jn(this)):Js(this,this.T-f)};function Jn(f){f.j.I==0||f.K||zh(f.j,f)}function Ln(f){wr(f);var b=f.O;b&&typeof b.dispose=="function"&&b.dispose(),f.O=null,ar(f.V),f.g&&(b=f.g,f.g=null,b.abort(),b.dispose())}function zr(f,b){try{var w=f.j;if(w.I!=0&&(w.g==f||Gr(w.h,f))){if(!f.L&&Gr(w.h,f)&&w.I==3){try{var N=w.Ba.g.parse(b)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<f.F)sl(w),zi(w);else break e;eo(w),jt(18)}}else w.xa=F[1],0<w.xa-w.K&&F[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ur(g(w.Va,w),6e3));Fr(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ds(w,11)}else if((f.L||w.g==f)&&sl(w),!k(b))for(F=w.Ba.g.parse(b),b=0;b<F.length;b++){let ut=F[b];const Ut=ut[0];if(!(Ut<=w.K))if(w.K=Ut,ut=ut[1],w.I==2)if(ut[0]=="c"){w.M=ut[1],w.ba=ut[2];const Kr=ut[3];Kr!=null&&(w.ka=Kr,w.j.info("VER="+w.ka));const js=ut[4];js!=null&&(w.za=js,w.j.info("SVER="+w.za));const hs=ut[5];hs!=null&&typeof hs=="number"&&hs>0&&(N=1.5*hs,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const ds=f.g;if(ds){const to=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(to){var K=N.h;K.g||to.indexOf("spdy")==-1&&to.indexOf("quic")==-1&&to.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(qr(K,K.h),K.h=null))}if(N.G){const il=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;il&&(N.wa=il,et(N.J,N.G,il))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-f.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var de=f;if(N.na=qh(N,N.L?N.ba:null,N.W),de.L){Ns(N.h,de);var Be=de,sn=N.O;sn&&(Be.H=sn),Be.D&&(wr(Be),_r(Be)),N.g=de}else Uh(N);w.i.length>0&&ks(w)}else ut[0]!="stop"&&ut[0]!="close"||Ds(w,7);else w.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Ds(w,7):jc(w):ut[0]!="noop"&&w.l&&w.l.qa(ut),w.A=0)}}An(4)}catch{}}var Xt=class{constructor(f,b){this.g=f,this.map=b}};function Di(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ka(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Fr(f){return f.h?1:f.g?f.g.size:0}function Gr(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function qr(f,b){f.g?f.g.add(b):f.h=b}function Ns(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Di.prototype.cancel=function(){if(this.i=ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ji(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const w of f.g.values())b=b.concat(w.G);return b}return A(f.i)}var Zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wn(f,b){if(f){f=f.split("&");for(let w=0;w<f.length;w++){const N=f[w].indexOf("=");let F,K=null;N>=0?(F=f[w].substring(0,N),K=f[w].substring(N+1)):F=f[w],b(F,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function hn(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;f instanceof hn?(this.l=f.l,Jt(this,f.j),this.o=f.o,this.g=f.g,cr(this,f.u),this.h=f.h,Oi(this,Vh(f.i)),this.m=f.m):f&&(b=String(f).match(Zo))?(this.l=!1,Jt(this,b[1]||"",!0),this.o=Er(b[2]||""),this.g=Er(b[3]||"",!0),cr(this,b[4]),this.h=Er(b[5]||"",!0),Oi(this,b[6]||"",!0),this.m=Er(b[7]||"")):(this.l=!1,this.i=new U(null,this.l))}hn.prototype.toString=function(){const f=[];var b=this.j;b&&f.push(As(b,Pi,!0),":");var w=this.g;return(w||b=="file")&&(f.push("//"),(b=this.o)&&f.push(As(b,Pi,!0),"@"),f.push(os(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&f.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(As(w,w.charAt(0)=="/"?Mi:Qa,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",As(w,ee)),f.join("")},hn.prototype.resolve=function(f){const b=Lt(this);let w=!!f.j;w?Jt(b,f.j):w=!!f.o,w?b.o=f.o:w=!!f.g,w?b.g=f.g:w=f.u!=null;var N=f.h;if(w)cr(b,f.u);else if(w=!!f.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=b.h.lastIndexOf("/");F!=-1&&(N=b.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const K=[];for(let de=0;de<F.length;){const Be=F[de++];Be=="."?N&&de==F.length&&K.push(""):Be==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),N&&de==F.length&&K.push("")):(K.push(Be),N=!0)}N=K.join("/")}else N=F}return w?b.h=N:w=f.i.toString()!=="",w?Oi(b,Vh(f.i)):w=!!f.m,w&&(b.m=f.m),b};function Lt(f){return new hn(f)}function Jt(f,b,w){f.j=w?Er(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function cr(f,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);f.u=b}else f.u=null}function Oi(f,b,w){b instanceof U?(f.i=b,el(f.i,f.l)):(w||(b=As(b,T)),f.i=new U(b,f.l))}function et(f,b,w){f.i.set(b,w)}function Ft(f){return et(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Er(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function As(f,b,w){return typeof f=="string"?(f=encodeURI(f).replace(b,Un),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Un(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Pi=/[#\/\?@]/g,Qa=/[#\?:]/g,Mi=/[#\?]/g,T=/[#\?@]/g,ee=/#/g;function U(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function se(f){f.g||(f.g=new Map,f.h=0,f.i&&Wn(f.i,function(b,w){f.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}s=U.prototype,s.add=function(f,b){se(this),this.i=null,f=Vi(this,f);let w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(b),this.h+=1,this};function me(f,b){se(f),b=Vi(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function Oe(f,b){return se(f),b=Vi(f,b),f.g.has(b)}s.forEach=function(f,b){se(this),this.g.forEach(function(w,N){w.forEach(function(F){f.call(b,F,N,this)},this)},this)};function gt(f,b){se(f);let w=[];if(typeof b=="string")Oe(f,b)&&(w=w.concat(f.g.get(Vi(f,b))));else for(f=Array.from(f.g.values()),b=0;b<f.length;b++)w=w.concat(f[b]);return w}s.set=function(f,b){return se(this),this.i=null,f=Vi(this,f),Oe(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},s.get=function(f,b){return f?(f=gt(this,f),f.length>0?String(f[0]):b):b};function Zn(f,b,w){me(f,b),w.length>0&&(f.i=null,f.g.set(Vi(f,b),A(w)),f.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(let N=0;N<b.length;N++){var w=b[N];const F=os(w);w=gt(this,w);for(let K=0;K<w.length;K++){let de=F;w[K]!==""&&(de+="="+os(w[K])),f.push(de)}}return this.i=f.join("&")};function Vh(f){const b=new U;return b.i=f.i,f.g&&(b.g=new Map(f.g),b.h=f.h),b}function Vi(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function el(f,b){b&&!f.j&&(se(f),f.i=null,f.g.forEach(function(w,N){const F=N.toLowerCase();N!=F&&(me(this,N),Zn(this,F,w))},f)),f.j=b}function ls(f,b){const w=new Vn;if(c.Image){const N=new Image;N.onload=v(Hr,w,"TestLoadImage: loaded",!0,b,N),N.onerror=v(Hr,w,"TestLoadImage: error",!1,b,N),N.onabort=v(Hr,w,"TestLoadImage: abort",!1,b,N),N.ontimeout=v(Hr,w,"TestLoadImage: timeout",!1,b,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else b(!1)}function Rc(f,b){const w=new Vn,N=new AbortController,F=setTimeout(()=>{N.abort(),Hr(w,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:N.signal}).then(K=>{clearTimeout(F),K.ok?Hr(w,"TestPingServer: ok",!0,b):Hr(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(F),Hr(w,"TestPingServer: error",!1,b)})}function Hr(f,b,w,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(w)}catch{}}function Li(){this.g=new mt}function Is(f){this.i=f.Sb||null,this.h=f.ab||!1}x(Is,Xn),Is.prototype.g=function(){return new Ya(this.i,this.h)};function Ya(f,b){Tt.call(this),this.H=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Ya,Tt),s=Ya.prototype,s.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=b,this.readyState=1,cs(this)},s.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(b.body=f),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ui(this)),this.readyState=0},s.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tl(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function tl(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}s.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?Ui(this):cs(this),this.readyState==3&&tl(this)}},s.Oa=function(f){this.g&&(this.response=this.responseText=f,Ui(this))},s.Na=function(f){this.g&&(this.response=f,Ui(this))},s.ga=function(){this.g&&Ui(this)};function Ui(f){f.readyState=4,f.l=null,f.j=null,f.B=null,cs(f)}s.setRequestHeader=function(f,b){this.A.append(f,b)},s.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=b.next();return f.join(`\r
`)};function cs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function $r(f){let b="";return Ge(f,function(w,N){b+=N,b+=":",b+=w,b+=`\r
`}),b}function Xa(f,b,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=$r(w),typeof f=="string"?w!=null&&os(w):et(f,b,w))}function St(f){Tt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(St,Tt);var Cs=/^https?$/i,kc=["POST","PUT"];s=St.prototype,s.Fa=function(f){this.H=f},s.ea=function(f,b,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Te.g(),this.g.onreadystatechange=E(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(K){Ja(this,K);return}if(f=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)w.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const K of N.keys())w.set(K,N.get(K));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),F=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(kc,b,void 0)>=0)||N||F||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,de]of w)this.g.setRequestHeader(K,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(K){Ja(this,K)}};function Ja(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.o=5,Dc(f),Ws(f)}function Dc(f){f.A||(f.A=!0,st(f,"complete"),st(f,"error"))}s.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,st(this,"complete"),st(this,"abort"),Ws(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ws(this,!0)),St.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Wa(this):this.Xa())},s.Xa=function(){Wa(this)};function Wa(f){if(f.h&&typeof l<"u"){if(f.v&&us(f)==4)setTimeout(f.Ca.bind(f),0);else if(st(f,"readystatechange"),us(f)==4){f.h=!1;try{const K=f.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var N;if(N=K===0){let de=String(f.D).match(Zo)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),N=!Cs.test(de?de.toLowerCase():"")}w=N}if(w)st(f,"complete"),st(f,"success");else{f.o=6;try{var F=us(f)>2?f.g.statusText:""}catch{F=""}f.l=F+" ["+f.ca()+"]",Dc(f)}}finally{Ws(f)}}}}function Ws(f,b){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const w=f.g;f.g=null,b||st(f,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function us(f){return f.g?f.g.readyState:0}s.ca=function(){try{return us(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),pe(b)}};function In(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Zs(f){const b={};f=(f.g&&us(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(k(f[N]))continue;var w=Ha(f[N]);const F=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=b[F]||[];b[F]=K,K.push(w)}$e(b,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(f,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||b}function Bi(f){this.za=0,this.i=[],this.j=new Vn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rs("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rs("baseRetryDelayMs",5e3,f),this.Za=Rs("retryDelaySeedMs",1e4,f),this.Ta=Rs("forwardChannelMaxRetries",2,f),this.va=Rs("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Di(f&&f.concurrentRequestLimit),this.Ba=new Li,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Bi.prototype,s.ka=8,s.I=1,s.connect=function(f,b,w,N){jt(0),this.W=f,this.H=b||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=qh(this,null,this.W),ks(this)};function jc(f){if(nl(f),f.I==3){var b=f.V++,w=Lt(f.J);if(et(w,"SID",f.M),et(w,"RID",b),et(w,"TYPE","terminate"),Za(f,w),b=new xr(f,f.j,b),b.M=2,b.A=Ft(Lt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=b.A,w=!0),w||(b.g=Hh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),_r(b)}Gh(f)}function zi(f){f.g&&(Pc(f),f.g.cancel(),f.g=null)}function nl(f){zi(f),f.v&&(c.clearTimeout(f.v),f.v=null),sl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function ks(f){if(!Ka(f.h)&&!f.m){f.m=!0;var b=f.Ea;Ee||I(),ve||(Ee(),ve=!0),C.add(b,f),f.D=0}}function rl(f,b){return Fr(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=b.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Ur(g(f.Ea,f,b),Fh(f,f.D)),f.D++,!0)}s.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const F=new xr(this,this.j,f);let K=this.o;if(this.U&&(K?(K=M(K),fe(K,this.U)):K=this.U),this.u!==null||this.R||(F.J=K,K=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(b+=N,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Lh(this,F,b),w=Lt(this.J),et(w,"RID",f),et(w,"CVER",22),this.G&&et(w,"X-HTTP-Session-Id",this.G),Za(this,w),K&&(this.R?b="headers="+os($r(K))+"&"+b:this.u&&Xa(w,this.u,K)),qr(this.h,F),this.Ra&&et(w,"TYPE","init"),this.S?(et(w,"$req",b),et(w,"SID","null"),F.U=!0,Br(F,w,null)):Br(F,w,b),this.I=2}}else this.I==3&&(f?Oc(this,f):this.i.length==0||Ka(this.h)||Oc(this))};function Oc(f,b){var w;b?w=b.l:w=f.V++;const N=Lt(f.J);et(N,"SID",f.M),et(N,"RID",w),et(N,"AID",f.K),Za(f,N),f.u&&f.o&&Xa(N,f.u,f.o),w=new xr(f,f.j,w,f.D+1),f.u===null&&(w.J=f.o),b&&(f.i=b.G.concat(f.i)),b=Lh(f,w,1e3),w.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),qr(f.h,w),Br(w,N,b)}function Za(f,b){f.H&&Ge(f.H,function(w,N){et(b,N,w)}),f.l&&Ge({},function(w,N){et(b,N,w)})}function Lh(f,b,w){w=Math.min(f.i.length,w);const N=f.l?g(f.l.Ka,f.l,f):null;e:{var F=f.i;let Be=-1;for(;;){const sn=["count="+w];Be==-1?w>0?(Be=F[0].g,sn.push("ofs="+Be)):Be=0:sn.push("ofs="+Be);let ut=!0;for(let Ut=0;Ut<w;Ut++){var K=F[Ut].g;const Kr=F[Ut].map;if(K-=Be,K<0)Be=Math.max(0,F[Ut].g-100),ut=!1;else try{K="req"+K+"_"||"";try{var de=Kr instanceof Map?Kr:Object.entries(Kr);for(const[js,hs]of de){let ds=hs;d(hs)&&(ds=Y(hs)),sn.push(K+js+"="+encodeURIComponent(ds))}}catch(js){throw sn.push(K+"type="+encodeURIComponent("_badmap")),js}}catch{N&&N(Kr)}}if(ut){de=sn.join("&");break e}}de=void 0}return f=f.i.splice(0,w),b.G=f,de}function Uh(f){if(!f.g&&!f.v){f.Y=1;var b=f.Da;Ee||I(),ve||(Ee(),ve=!0),C.add(b,f),f.A=0}}function eo(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Ur(g(f.Da,f),Fh(f,f.A)),f.A++,!0)}s.Da=function(){if(this.v=null,Bh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Ur(g(this.Wa,this),f)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),zi(this),Bh(this))};function Pc(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function Bh(f){f.g=new xr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var b=Lt(f.na);et(b,"RID","rpc"),et(b,"SID",f.M),et(b,"AID",f.K),et(b,"CI",f.F?"0":"1"),!f.F&&f.ia&&et(b,"TO",f.ia),et(b,"TYPE","xmlhttp"),Za(f,b),f.u&&f.o&&Xa(b,f.u,f.o),f.O&&(f.g.H=f.O);var w=f.g;f=f.ba,w.M=1,w.A=Ft(Lt(b)),w.u=null,w.R=!0,Ri(w,f)}s.Va=function(){this.C!=null&&(this.C=null,zi(this),eo(this),jt(19))};function sl(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function zh(f,b){var w=null;if(f.g==b){sl(f),Pc(f),f.g=null;var N=2}else if(Gr(f.h,b))w=b.G,Ns(f.h,b),N=1;else return;if(f.I!=0){if(b.o)if(N==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var F=f.D;N=or(),st(N,new xn(N,w)),ks(f)}else Uh(f);else if(F=b.m,F==3||F==0&&b.X>0||!(N==1&&rl(f,b)||N==2&&eo(f)))switch(w&&w.length>0&&(b=f.h,b.i=b.i.concat(w)),F){case 1:Ds(f,5);break;case 4:Ds(f,10);break;case 3:Ds(f,6);break;default:Ds(f,2)}}}function Fh(f,b){let w=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(w*=2),w*b}function Ds(f,b){if(f.j.info("Error code "+b),b==2){var w=g(f.bb,f),N=f.Ua;const F=!N;N=new hn(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jt(N,"https"),Ft(N),F?ls(N.toString(),w):Rc(N.toString(),w)}else jt(2);f.I=0,f.l&&f.l.pa(b),Gh(f),nl(f)}s.bb=function(f){f?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Gh(f){if(f.I=0,f.ja=[],f.l){const b=ji(f.h);(b.length!=0||f.i.length!=0)&&(O(f.ja,b),O(f.ja,f.i),f.h.i.length=0,A(f.i),f.i.length=0),f.l.oa()}}function qh(f,b,w){var N=w instanceof hn?Lt(w):new hn(w);if(N.g!="")b&&(N.g=b+"."+N.g),cr(N,N.u);else{var F=c.location;N=F.protocol,b=b?b+"."+F.hostname:F.hostname,F=+F.port;const K=new hn(null);N&&Jt(K,N),b&&(K.g=b),F&&cr(K,F),w&&(K.h=w),N=K}return w=f.G,b=f.wa,w&&b&&et(N,w,b),et(N,"VER",f.ka),Za(f,N),N}function Hh(f,b,w){if(b&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Aa&&!f.ma?new St(new Is({ab:w})):new St(f.ma),b.Fa(f.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function $h(){}s=$h.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Fi(){}Fi.prototype.g=function(f,b){return new er(f,b)};function er(f,b){Tt.call(this),this.g=new Bi(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(f?f["X-WebChannel-Client-Profile"]=b.sa:f={"X-WebChannel-Client-Profile":b.sa}),this.g.U=f,(f=b&&b.Qb)&&!k(f)&&(this.g.u=f),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!k(b)&&(this.g.G=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new ei(this)}x(er,Tt),er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){jc(this.g)},er.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.v&&(w={},w.__data__=Y(f),f=w);b.i.push(new Xt(b.Ya++,f)),b.I==3&&ks(b)},er.prototype.N=function(){this.g.l=null,delete this.j,jc(this.g),delete this.g,er.Z.N.call(this)};function Kh(f){at.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const w in b){f=w;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}x(Kh,at);function Qh(){Rt.call(this),this.status=1}x(Qh,Rt);function ei(f){this.g=f}x(ei,$h),ei.prototype.ra=function(){st(this.g,"a")},ei.prototype.qa=function(f){st(this.g,new Kh(f))},ei.prototype.pa=function(f){st(this.g,new Qh)},ei.prototype.oa=function(){st(this.g,"b")},Fi.prototype.createWebChannel=Fi.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,jS=function(){return new Fi},DS=function(){return or()},kS=xe,M0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,vf=as,Qt.COMPLETE="complete",RS=Qt,Vr.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,Ou=Vr,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,CS=St}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc="12.9.0";function k4(s){Tc=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new wy("@firebase/firestore");function Gl(){return Vo.logLevel}function oe(s,...e){if(Vo.logLevel<=We.DEBUG){const t=e.map(jy);Vo.debug(`Firestore (${Tc}): ${s}`,...t)}}function ln(s,...e){if(Vo.logLevel<=We.ERROR){const t=e.map(jy);Vo.error(`Firestore (${Tc}): ${s}`,...t)}}function nc(s,...e){if(Vo.logLevel<=We.WARN){const t=e.map(jy);Vo.warn(`Firestore (${Tc}): ${s}`,...t)}}function jy(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(s,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,OS(s,n,t)}function OS(s,e,t){let n=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw ln(n),new Error(n)}function Ce(s,e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,s||OS(e,a,n)}function Ne(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Si{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Fn.UNAUTHENTICATED)))}shutdown(){}}class O4{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let n=this.i;const a=p=>this.i!==n?(n=this.i,t(p)):Promise.resolve();let l=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Hs,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Hs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ce(typeof n.accessToken=="string",31837,{l:n}),new D4(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class P4{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class M4{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new P4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class c1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const n=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>n(l)))};const a=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new c1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new c1(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<s;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=L4(40);for(let l=0;l<a.length;++l)n.length<20&&a[l]<t&&(n+=e.charAt(a[l]%62))}return n}}function Ve(s,e){return s<e?-1:s>e?1:0}function V0(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++){const a=s.charAt(n),l=e.charAt(n);if(a!==l)return u0(a)===u0(l)?Ve(a,l):u0(a)?1:-1}return Ve(s.length,e.length)}const U4=55296,B4=57343;function u0(s){const e=s.charCodeAt(0);return e>=U4&&e<=B4}function rc(s,e,t){return s.length===e.length&&s.every(((n,a)=>t(n,e[a])))}function PS(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="__name__";class Ls{constructor(e,t,n){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&_e(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ls.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let a=0;a<n;a++){const l=Ls.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const n=Ls.isNumericId(e),a=Ls.isNumericId(t);return n&&!a?-1:!n&&a?1:n&&a?Ls.extractNumericId(e).compare(Ls.extractNumericId(t)):V0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ka.fromString(e.substring(4,e.length-2))}}class ft extends Ls{construct(e,t,n){return new ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((a=>a.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const z4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Ls{construct(e,t,n){return new qt(e,t,n)}static isValidIdentifier(e){return z4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u1}static keyField(){return new qt([u1])}static fromServerFormat(e){const t=[];let n="",a=0;const l=()=>{if(n.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(n+=d,a++):(l(),a++)}if(l(),c)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(t)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(ft.fromString(e))}static fromName(e){return new ye(ft.fromString(e).popFirst(5))}static empty(){return new ye(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(s,e,t){if(!t)throw new he(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function F4(s,e,t,n){if(e===!0&&n===!0)throw new he(Z.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function h1(s){if(!ye.isDocumentKey(s))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function d1(s){if(ye.isDocumentKey(s))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function VS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function mp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function jr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mp(s);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(s,e){const t={typeString:s};return e&&(t.value=e),t}function Nh(s,e){if(!VS(s))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const a=e[n].typeString,l="value"in e[n]?{value:e[n].value}:void 0;if(!(n in s)){t=`JSON missing required field: '${n}'`;break}const c=s[n];if(a&&typeof c!==a){t=`JSON field '${n}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${n}' field to equal '${l.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=-62135596800,p1=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*p1);return new bt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<f1)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p1}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nh(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-f1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:vn("string",bt._jsonSchemaVersion),seconds:vn("number"),nanoseconds:vn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new bt(0,0))}static max(){return new je(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=-1;class zf{constructor(e,t,n,a){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=a}}function L0(s){return s.fields.find((e=>e.kind===2))}function xo(s){return s.fields.filter((e=>e.kind!==2))}zf.UNKNOWN_ID=-1;class bf{constructor(e,t){this.fieldPath=e,this.kind=t}}class sh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sh(0,Pr.min())}}function LS(s,e){const t=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,a=je.fromTimestamp(n===1e9?new bt(t+1,0):new bt(t,n));return new Pr(a,ye.empty(),e)}function US(s){return new Pr(s.readTime,s.key,sc)}class Pr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Pr(je.min(),ye.empty(),sc)}static max(){return new Pr(je.max(),ye.empty(),sc)}}function Py(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(s.documentKey,e.documentKey),t!==0?t:Ve(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==BS)throw s;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((n,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(n,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(n,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,n)=>{t(e)}))}static reject(e){return new z(((t,n)=>{n(e)}))}static waitFor(e){return new z(((t,n)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>n(p)))})),c=!0,l===a&&t()}))}static or(e){let t=z.resolve(!1);for(const n of e)t=t.next((a=>a?z.resolve(a):n()));return t}static forEach(e,t){const n=[];return e.forEach(((a,l)=>{n.push(t.call(this,a,l))})),this.waitFor(n)}static mapArray(e,t){return new z(((n,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&n(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new z(((n,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):n()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="SimpleDb";class gp{static open(e,t,n,a){try{return new gp(t,e.transaction(a,n))}catch(l){throw new zu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Hs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new zu(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const a=My(n.target.error);this.S.reject(new zu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(oe(kr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new q4(t)}}class Da{static delete(e){return oe(kr,"Removing database:",e),wo(PT().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!FT())return!1;if(Da.F())return!0;const e=wn(),t=Da.M(e),n=0<t&&t<10,a=FS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,Da.M(wn())===12.2&&ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(oe(kr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{n(new zu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?n(new he(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new he(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new zu(e,c))},a.onupgradeneeded=l=>{oe(kr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{oe(kr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=gp.open(this.db,e,l?"readonly":"readwrite",n),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),z.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(oe(kr,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function FS(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class G4{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return wo(this.U.delete())}}class zu extends he{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function za(s){return s.name==="IndexedDbTransactionError"}class q4{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(oe(kr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(oe(kr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wo(n)}add(e){return oe(kr,"ADD",this.store.name,e,e),wo(this.store.add(e))}get(e){return wo(this.store.get(e)).next((t=>(t===void 0&&(t=null),oe(kr,"GET",this.store.name,e,t),t)))}delete(e){return oe(kr,"DELETE",this.store.name,e),wo(this.store.delete(e))}count(){return oe(kr,"COUNT",this.store.name),wo(this.store.count())}H(e,t){const n=this.options(e,t),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(n.range);return new z(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(n),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new z(((a,l)=>{n.onerror=c=>{l(c.target.error)},n.onsuccess=c=>{a(c.target.result)}}))}X(e,t){oe(kr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const a=this.cursor(n);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const a=this.cursor(n);return this.J(a,t)}te(e){const t=this.cursor({});return new z(((n,a)=>{t.onerror=l=>{const c=My(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():n()})):n()}}))}J(e,t){const n=[];return new z(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new G4(d),g=t(d.primaryKey,d.value,p);if(g instanceof z){const v=g.catch((x=>(p.done(),z.reject(x))));n.push(v)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>z.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wo(s){return new z(((e,t)=>{s.onsuccess=n=>{const a=n.target.result;e(a)},s.onerror=n=>{const a=My(n.target.error);t(a)}}))}let m1=!1;function My(s){const e=Da.M(wn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const n=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m1||(m1=!0,setTimeout((()=>{throw n}),0)),n}}return s}const Fu="IndexBackfiller";class H4{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){oe(Fu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();oe(Fu,`Documents written: ${t}`)}catch(t){za(t)?oe(Fu,"Ignoring IndexedDB error during index backfill: ",t):await Ba(t)}await this.re(6e4)}))}}class $4{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let a=t,l=!0;return z.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return oe(Fu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,n.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,n).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(oe(Fu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((a,l)=>{const c=US(l);Py(c,n)>0&&(n=c)})),new Pr(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=-1;function yp(s){return s==null}function ih(s){return s===0&&1/s==-1/0}function GS(s){return typeof s=="number"&&Number.isInteger(s)&&!ih(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="";function Kn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=g1(e)),e=K4(s.get(t),e);return g1(e)}function K4(s,e){let t=e;const n=s.length;for(let a=0;a<n;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Ff:t+="";break;default:t+=l}}return t}function g1(s){return s+Ff+""}function zs(s){const e=s.length;if(Ce(e>=2,64408,{path:s}),e===2)return Ce(s.charAt(0)===Ff&&s.charAt(1)==="",56145,{path:s}),ft.emptyPath();const t=e-2,n=[];let a="";for(let l=0;l<e;){const c=s.indexOf(Ff,l);switch((c<0||c>t)&&_e(50515,{path:s}),s.charAt(c+1)){case"":const d=s.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),n.push(p);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:_e(61167,{path:s})}l=c+2}return new ft(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="remoteDocuments",Ah="owner",Ml="owner",ah="mutationQueues",Q4="userId",gs="mutations",y1="batchId",Ao="userMutationsIndex",v1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(s,e){return[s,Kn(e)]}function qS(s,e,t){return[s,Kn(e),t]}const Y4={},ic="documentMutations",Gf="remoteDocumentsV14",X4=["prefixPath","collectionGroup","readTime","documentId"],_f="documentKeyIndex",J4=["prefixPath","collectionGroup","documentId"],HS="collectionGroupIndex",W4=["collectionGroup","readTime","prefixPath","documentId"],oh="remoteDocumentGlobal",U0="remoteDocumentGlobalKey",ac="targets",$S="queryTargetsIndex",Z4=["canonicalId","targetId"],oc="targetDocuments",eD=["targetId","path"],Vy="documentTargetsIndex",tD=["path","targetId"],qf="targetGlobalKey",Co="targetGlobal",lh="collectionParents",nD=["collectionId","parent"],lc="clientMetadata",rD="clientId",vp="bundles",sD="bundleId",bp="namedQueries",iD="name",Ly="indexConfiguration",aD="indexId",B0="collectionGroupIndex",oD="collectionGroup",Gu="indexState",lD=["indexId","uid"],KS="sequenceNumberIndex",cD=["uid","sequenceNumber"],qu="indexEntries",uD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QS="documentKeyIndex",hD=["indexId","uid","orderedDocumentKey"],xp="documentOverlays",dD=["userId","collectionPath","documentId"],z0="collectionPathOverlayIndex",fD=["userId","collectionPath","largestBatchId"],YS="collectionGroupOverlayIndex",pD=["userId","collectionGroup","largestBatchId"],Uy="globals",mD="name",XS=[ah,gs,ic,_o,ac,Ah,Co,oc,lc,oh,lh,vp,bp],gD=[...XS,xp],JS=[ah,gs,ic,Gf,ac,Ah,Co,oc,lc,oh,lh,vp,bp,xp],WS=JS,By=[...WS,Ly,Gu,qu],yD=By,ZS=[...By,Uy],vD=ZS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends zS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function En(s,e){const t=Ne(s);return Da.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Fa(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function e2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return t+n.left.size;a<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,t,n,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?n(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jn{constructor(e,t,n,a,l){this.key=e,this.value=t,this.color=n??jn.RED,this.left=a??jn.EMPTY,this.right=l??jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,a,l){return new jn(e??this.key,t??this.value,n??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let a=this;const l=n(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,n),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return jn.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,n,a,l){return this}insert(e,t,n){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new x1(this.data.getIterator())}getIteratorFrom(e){return new x1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=n.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class x1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new yr([])}unionWith(e){let t=new _t(qt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new t2("Invalid base64 string: "+l):l}})(e);return new cn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const bD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(s){if(Ce(!!s,39018),typeof s=="string"){let e=0;const t=bD.exec(s);if(Ce(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:zt(s.seconds),nanos:zt(s.nanos)}}function zt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ei(s){return typeof s=="string"?cn.fromBase64String(s):cn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="server_timestamp",r2="__type__",s2="__previous_value__",i2="__local_write_time__";function zy(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[r2])==null?void 0:n.stringValue)===n2}function _p(s){const e=s.mapValue.fields[s2];return zy(e)?_p(e):e}function ch(s){const e=wi(s.mapValue.fields[i2].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,t,n,a,l,c,d,p,g,v,x){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=x}}const Hf="(default)";class Lo{constructor(e,t){this.projectId=e,this.database=t||Hf}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}function _D(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="__type__",a2="__max__",Ta={mapValue:{fields:{__type__:{stringValue:a2}}}},Gy="__vector__",cc="value",wf={nullValue:"NULL_VALUE"};function Oa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?zy(s)?4:o2(s)?9007199254740991:wp(s)?10:11:_e(28295,{value:s})}function Ks(s,e){if(s===e)return!0;const t=Oa(s);if(t!==Oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ch(s).isEqual(ch(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=wi(a.timestampValue),d=wi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return Ei(a.bytesValue).isEqual(Ei(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return zt(a.geoPointValue.latitude)===zt(l.geoPointValue.latitude)&&zt(a.geoPointValue.longitude)===zt(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return zt(a.integerValue)===zt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=zt(a.doubleValue),d=zt(l.doubleValue);return c===d?ih(c)===ih(d):isNaN(c)&&isNaN(d)}return!1})(s,e);case 9:return rc(s.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(b1(c)!==b1(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ks(c[p],d[p])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function uh(s,e){return(s.values||[]).find((t=>Ks(t,e)))!==void 0}function Pa(s,e){if(s===e)return 0;const t=Oa(s),n=Oa(e);if(t!==n)return Ve(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=zt(l.integerValue||l.doubleValue),p=zt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(s,e);case 3:return _1(s.timestampValue,e.timestampValue);case 4:return _1(ch(s),ch(e));case 5:return V0(s.stringValue,e.stringValue);case 6:return(function(l,c){const d=Ei(l),p=Ei(c);return d.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=Ve(d[g],p[g]);if(v!==0)return v}return Ve(d.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ve(zt(l.latitude),zt(c.latitude));return d!==0?d:Ve(zt(l.longitude),zt(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return w1(s.arrayValue,e.arrayValue);case 10:return(function(l,c){var E,A,O,G;const d=l.fields||{},p=c.fields||{},g=(E=d[cc])==null?void 0:E.arrayValue,v=(A=p[cc])==null?void 0:A.arrayValue,x=Ve(((O=g==null?void 0:g.values)==null?void 0:O.length)||0,((G=v==null?void 0:v.values)==null?void 0:G.length)||0);return x!==0?x:w1(g,v)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ta.mapValue&&c===Ta.mapValue)return 0;if(l===Ta.mapValue)return 1;if(c===Ta.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let x=0;x<p.length&&x<v.length;++x){const E=V0(p[x],v[x]);if(E!==0)return E;const A=Pa(d[p[x]],g[v[x]]);if(A!==0)return A}return Ve(p.length,v.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function _1(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ve(s,e);const t=wi(s),n=wi(e),a=Ve(t.seconds,n.seconds);return a!==0?a:Ve(t.nanos,n.nanos)}function w1(s,e){const t=s.values||[],n=e.values||[];for(let a=0;a<t.length&&a<n.length;++a){const l=Pa(t[a],n[a]);if(l)return l}return Ve(t.length,n.length)}function uc(s){return G0(s)}function G0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const n=wi(t);return`time(${n.seconds},${n.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ei(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ye.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let n="[",a=!0;for(const l of t.values||[])a?a=!1:n+=",",n+=G0(l);return n+"]"})(s.arrayValue):"mapValue"in s?(function(t){const n=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of n)l?l=!1:a+=",",a+=`${c}:${G0(t.fields[c])}`;return a+"}"})(s.mapValue):_e(61005,{value:s})}function Ef(s){switch(Oa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_p(s);return e?16+Ef(e):16;case 5:return 2*s.stringValue.length;case 6:return Ei(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((a,l)=>a+Ef(l)),0)})(s.arrayValue);case 10:case 11:return(function(n){let a=0;return Fa(n.fields,((l,c)=>{a+=l.length+Ef(c)})),a})(s.mapValue);default:throw _e(13486,{value:s})}}function hh(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function q0(s){return!!s&&"integerValue"in s}function dh(s){return!!s&&"arrayValue"in s}function E1(s){return!!s&&"nullValue"in s}function T1(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Tf(s){return!!s&&"mapValue"in s}function wp(s){var t,n;return((n=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[Fy])==null?void 0:n.stringValue)===Gy}function Hu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Fa(s.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Hu(n))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(s.arrayValue.values[t]);return e}return{...s}}function o2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===a2}const l2={mapValue:{fields:{[Fy]:{stringValue:Gy},[cc]:{arrayValue:{}}}}};function wD(s){return"nullValue"in s?wf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?hh(Lo.empty(),ye.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?wp(s)?l2:{mapValue:{}}:_e(35942,{value:s})}function ED(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?hh(Lo.empty(),ye.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?l2:"mapValue"in s?wp(s)?{mapValue:{}}:Ta:_e(61959,{value:s})}function S1(s,e){const t=Pa(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function N1(s,e){const t=Pa(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Tf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=qt.emptyPath(),n={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,n,a),n={},a=[],t=d.popLast()}c?n[d.lastSegment()]=Hu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,n,a)}delete(e){const t=this.field(e.popLast());Tf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=t.mapValue.fields[e.get(n)];Tf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,n){Fa(t,((a,l)=>e[a]=l));for(const a of n)delete e[a]}clone(){return new Hn(Hu(this.value))}}function c2(s){const e=[];return Fa(s.fields,((t,n)=>{const a=new qt([t]);if(Tf(n)){const l=c2(n.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,n,a,l,c,d){this.key=e,this.documentType=t,this.version=n,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new en(e,0,je.min(),je.min(),je.min(),Hn.empty(),0)}static newFoundDocument(e,t,n,a){return new en(e,1,t,je.min(),n,a,0)}static newNoDocument(e,t){return new en(e,2,t,je.min(),je.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,je.min(),je.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.position=e,this.inclusive=t}}function A1(s,e,t){let n=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?n=ye.comparator(ye.fromName(c.referenceValue),t.key):n=Pa(c,t.data.field(l.field)),l.dir==="desc"&&(n*=-1),n!==0)break}return n}function I1(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ks(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t="asc"){this.field=e,this.dir=t}}function TD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{}class Ze extends u2{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new SD(e,t,n):t==="array-contains"?new ID(e,n):t==="in"?new g2(e,n):t==="not-in"?new CD(e,n):t==="array-contains-any"?new RD(e,n):new Ze(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new ND(e,n):new AD(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pa(t,this.value)):t!==null&&Oa(this.value)===Oa(t)&&this.matchesComparison(Pa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xt extends u2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xt(e,t)}matches(e){return dc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dc(s){return s.op==="and"}function H0(s){return s.op==="or"}function qy(s){return h2(s)&&dc(s)}function h2(s){for(const e of s.filters)if(e instanceof xt)return!1;return!0}function $0(s){if(s instanceof Ze)return s.field.canonicalString()+s.op.toString()+uc(s.value);if(qy(s))return s.filters.map((e=>$0(e))).join(",");{const e=s.filters.map((t=>$0(t))).join(",");return`${s.op}(${e})`}}function d2(s,e){return s instanceof Ze?(function(n,a){return a instanceof Ze&&n.op===a.op&&n.field.isEqual(a.field)&&Ks(n.value,a.value)})(s,e):s instanceof xt?(function(n,a){return a instanceof xt&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((l,c,d)=>l&&d2(c,a.filters[d])),!0):!1})(s,e):void _e(19439)}function f2(s,e){const t=s.filters.concat(e);return xt.create(t,s.op)}function p2(s){return s instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${uc(t.value)}`})(s):s instanceof xt?(function(t){return t.op.toString()+" {"+t.getFilters().map(p2).join(" ,")+"}"})(s):"Filter"}class SD extends Ze{constructor(e,t,n){super(e,t,n),this.key=ye.fromName(n.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class ND extends Ze{constructor(e,t){super(e,"in",t),this.keys=m2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class AD extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=m2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function m2(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>ye.fromName(n.referenceValue)))}class ID extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dh(t)&&uh(t.arrayValue,this.value)}}class g2 extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uh(this.value.arrayValue,t)}}class CD extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uh(this.value.arrayValue,t)}}class RD extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>uh(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t=null,n=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function K0(s,e=null,t=[],n=[],a=null,l=null,c=null){return new kD(s,e,t,n,a,l,c)}function Uo(s){const e=Ne(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>$0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(l){return l.field.canonicalString()+l.dir})(n))).join(","),yp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>uc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>uc(n))).join(",")),e.Te=t}return e.Te}function Ih(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!TD(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!d2(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!I1(s.startAt,e.startAt)&&I1(s.endAt,e.endAt)}function Kf(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Qf(s,e){return s.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function C1(s,e,t){let n=wf,a=!0;for(const l of Qf(s,e)){let c=wf,d=!0;switch(l.op){case"<":case"<=":c=wD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=wf}S1({value:n,inclusive:a},{value:c,inclusive:d})<0&&(n=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];S1({value:n,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(n=c,a=t.inclusive);break}}return{value:n,inclusive:a}}function R1(s,e,t){let n=Ta,a=!0;for(const l of Qf(s,e)){let c=Ta,d=!0;switch(l.op){case">=":case">":c=ED(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Ta}N1({value:n,inclusive:a},{value:c,inclusive:d})>0&&(n=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];N1({value:n,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(n=c,a=t.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t=null,n=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function y2(s,e,t,n,a,l,c,d){return new Ch(s,e,t,n,a,l,c,d)}function Rh(s){return new Ch(s)}function k1(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function DD(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function v2(s){return s.collectionGroup!==null}function $u(s){const e=Ne(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new _t(qt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new $f(l,n))})),t.has(qt.keyField().canonicalString())||e.Ie.push(new $f(qt.keyField(),n))}return e.Ie}function Or(s){const e=Ne(s);return e.Ee||(e.Ee=jD(e,$u(s))),e.Ee}function jD(s,e){if(s.limitType==="F")return K0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new $f(a.field,l)}));const t=s.endAt?new hc(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new hc(s.startAt.position,s.startAt.inclusive):null;return K0(s.path,s.collectionGroup,e,s.filters,s.limit,t,n)}}function Q0(s,e){const t=s.filters.concat([e]);return new Ch(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Y0(s,e,t){return new Ch(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Ep(s,e){return Ih(Or(s),Or(e))&&s.limitType===e.limitType}function b2(s){return`${Uo(Or(s))}|lt:${s.limitType}`}function ql(s){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((a=>p2(a))).join(", ")}]`),yp(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((a=>uc(a))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((a=>uc(a))).join(",")),`Target(${n})`})(Or(s))}; limitType=${s.limitType})`}function kh(s,e){return e.isFoundDocument()&&(function(n,a){const l=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):ye.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)})(s,e)&&(function(n,a){for(const l of $u(n))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(n,a){for(const l of n.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(n,a){return!(n.startAt&&!(function(c,d,p){const g=A1(c,d,p);return c.inclusive?g<=0:g<0})(n.startAt,$u(n),a)||n.endAt&&!(function(c,d,p){const g=A1(c,d,p);return c.inclusive?g>=0:g>0})(n.endAt,$u(n),a))})(s,e)}function x2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function _2(s){return(e,t)=>{let n=!1;for(const a of $u(s)){const l=OD(a,e,t);if(l!==0)return l;n=n||a.field.isKeyField()}return 0}}function OD(s,e,t){const n=s.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Pa(p,g):_e(42886)})(s.field,e,t);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return _e(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[a,l]of n)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[t]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,((t,n)=>{for(const[a,l]of n)e(a,l)}))}isEmpty(){return e2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new kt(ye.comparator);function Dr(){return PD}const w2=new kt(ye.comparator);function Pu(...s){let e=w2;for(const t of s)e=e.insert(t.key,t);return e}function E2(s){let e=w2;return s.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Fs(){return Ku()}function T2(){return Ku()}function Ku(){return new Ni((s=>s.toString()),((s,e)=>s.isEqual(e)))}const MD=new kt(ye.comparator),VD=new _t(ye.comparator);function He(...s){let e=VD;for(const t of s)e=e.add(t);return e}const LD=new _t(Ve);function Hy(){return LD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function S2(s){return{integerValue:""+s}}function UD(s,e){return GS(e)?S2(e):$y(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this._=void 0}}function BD(s,e,t){return s instanceof fh?(function(a,l){const c={fields:{[r2]:{stringValue:n2},[i2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&zy(l)&&(l=_p(l)),l&&(c.fields[s2]=l),{mapValue:c}})(t,e):s instanceof fc?A2(s,e):s instanceof pc?I2(s,e):(function(a,l){const c=N2(a,l),d=D1(c)+D1(a.Ae);return q0(c)&&q0(a.Ae)?S2(d):$y(a.serializer,d)})(s,e)}function zD(s,e,t){return s instanceof fc?A2(s,e):s instanceof pc?I2(s,e):t}function N2(s,e){return s instanceof ph?(function(n){return q0(n)||(function(l){return!!l&&"doubleValue"in l})(n)})(e)?e:{integerValue:0}:null}class fh extends Tp{}class fc extends Tp{constructor(e){super(),this.elements=e}}function A2(s,e){const t=C2(e);for(const n of s.elements)t.some((a=>Ks(a,n)))||t.push(n);return{arrayValue:{values:t}}}class pc extends Tp{constructor(e){super(),this.elements=e}}function I2(s,e){let t=C2(e);for(const n of s.elements)t=t.filter((a=>!Ks(a,n)));return{arrayValue:{values:t}}}class ph extends Tp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function D1(s){return zt(s.integerValue||s.doubleValue)}function C2(s){return dh(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t){this.field=e,this.transform=t}}function GD(s,e){return s.field.isEqual(e.field)&&(function(n,a){return n instanceof fc&&a instanceof fc||n instanceof pc&&a instanceof pc?rc(n.elements,a.elements,Ks):n instanceof ph&&a instanceof ph?Ks(n.Ae,a.Ae):n instanceof fh&&a instanceof fh})(s.transform,e.transform)}class qD{constructor(e,t){this.version=e,this.transformResults=t}}class $n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Sp{}function R2(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Np(s.key,$n.none()):new Sc(s.key,s.data,$n.none());{const t=s.data,n=Hn.empty();let a=new _t(qt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?n.delete(l):n.set(l,c),a=a.add(l)}return new Ai(s.key,n,new yr(a.toArray()),$n.none())}}function HD(s,e,t){s instanceof Sc?(function(a,l,c){const d=a.value.clone(),p=O1(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(s,e,t):s instanceof Ai?(function(a,l,c){if(!Sf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=O1(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(k2(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qu(s,e,t,n){return s instanceof Sc?(function(l,c,d,p){if(!Sf(l.precondition,c))return d;const g=l.value.clone(),v=P1(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(s,e,t,n):s instanceof Ai?(function(l,c,d,p){if(!Sf(l.precondition,c))return d;const g=P1(l.fieldTransforms,p,c),v=c.data;return v.setAll(k2(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(s,e,t,n):(function(l,c,d){return Sf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(s,e,t)}function $D(s,e){let t=null;for(const n of s.fieldTransforms){const a=e.data.field(n.field),l=N2(n.transform,a||null);l!=null&&(t===null&&(t=Hn.empty()),t.set(n.field,l))}return t||null}function j1(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&rc(n,a,((l,c)=>GD(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Sc extends Sp{constructor(e,t,n,a=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ai extends Sp{constructor(e,t,n,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function k2(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=s.data.field(t);e.set(t,n)}})),e}function O1(s,e,t){const n=new Map;Ce(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);n.set(l.field,zD(c,d,t[a]))}return n}function P1(s,e,t){const n=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);n.set(a.field,BD(l,c,e))}return n}class Np extends Sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D2 extends Sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,t,n,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&HD(l,e,n[a])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=T2();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=R2(c,d);p!==null&&n.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(je.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,((t,n)=>j1(t,n)))&&rc(this.baseMutations,e.baseMutations,((t,n)=>j1(t,n)))}}class Qy{constructor(e,t,n,a){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=a}static from(e,t,n){Ce(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=(function(){return MD})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,n[c].version);return new Qy(e,t,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,it;function QD(s){switch(s){case Z.OK:return _e(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function j2(s){if(s===void 0)return ln("GRPC error has no .code"),Z.UNKNOWN;switch(s){case gn.OK:return Z.OK;case gn.CANCELLED:return Z.CANCELLED;case gn.UNKNOWN:return Z.UNKNOWN;case gn.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case gn.INTERNAL:return Z.INTERNAL;case gn.UNAVAILABLE:return Z.UNAVAILABLE;case gn.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case gn.NOT_FOUND:return Z.NOT_FOUND;case gn.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case gn.ABORTED:return Z.ABORTED;case gn.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case gn.DATA_LOSS:return Z.DATA_LOSS;default:return _e(39323,{code:s})}}(it=gn||(gn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new ka([4294967295,4294967295],0);function M1(s){const e=YD().encode(s),t=new IS;return t.update(e),new Uint8Array(t.digest())}function V1(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ka([t,n],0),new ka([a,l],0)]}class Xy{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(n<0)throw new Mu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ka.fromNumber(this.ge)}ye(e,t,n){let a=e.add(t.multiply(ka.fromNumber(n)));return a.compare(XD)===1&&(a=new ka([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=M1(e),[n,a]=V1(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(n,a,l);if(!this.we(c))return!1}return!0}static create(e,t,n){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Xy(l,a,t);return n.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=M1(e),[n,a]=V1(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(n,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t,n,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const a=new Map;return a.set(e,jh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Dh(je.min(),a,new kt(Ve),Dr(),He())}}class jh{constructor(e,t,n,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jh(n,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t,n,a){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=a}}class O2{constructor(e,t){this.targetId=e,this.Ce=t}}class P2{constructor(e,t,n=cn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=a}}class L1{constructor(){this.ve=0,this.Fe=U1(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),n=He();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:n=n.add(a);break;default:_e(38017,{changeType:l})}})),new jh(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=U1()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class JD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dr(),this.He=nf(),this.Je=nf(),this.Ze=new kt(Ve)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,n=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Kf(l))if(n===0){const c=new ye(l.path);this.et(t,c,en.newNoDocument(c,je.min()))}else Ce(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ei(n).toUint8Array()}catch(p){if(p instanceof t2)return nc("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Xy(c,a,l)}catch(p){return nc(p instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let a=0;return n.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Kf(d.target)){const p=new ye(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,en.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let n=He();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(n=n.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Dh(e,t,this.Ze,this.je,n);return this.je=Dr(),this.He=nf(),this.Je=nf(),this.Ze=new kt(Ve),a}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new L1,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new _t(Ve),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new _t(Ve),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new L1),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nf(){return new kt(ye.comparator)}function U1(){return new kt(ye.comparator)}const WD={asc:"ASCENDING",desc:"DESCENDING"},ZD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ej={and:"AND",or:"OR"};class tj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function X0(s,e){return s.useProto3Json||yp(e)?e:{value:e}}function mc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M2(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function nj(s,e){return mc(s,e.toTimestamp())}function nr(s){return Ce(!!s,49232),je.fromTimestamp((function(t){const n=wi(t);return new bt(n.seconds,n.nanos)})(s))}function Jy(s,e){return J0(s,e).canonicalString()}function J0(s,e){const t=(function(a){return new ft(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function V2(s){const e=ft.fromString(s);return Ce($2(e),10190,{key:e.toString()}),e}function Yf(s,e){return Jy(s.databaseId,e.path)}function Ro(s,e){const t=V2(e);if(t.get(1)!==s.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ye(B2(t))}function L2(s,e){return Jy(s.databaseId,e)}function U2(s){const e=V2(s);return e.length===4?ft.emptyPath():B2(e)}function W0(s){return new ft(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function B2(s){return Ce(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function B1(s,e,t){return{name:Yf(s,e),fields:t.value.mapValue.fields}}function rj(s,e,t){const n=Ro(s,e.name),a=nr(e.updateTime),l=e.createTime?nr(e.createTime):je.min(),c=new Hn({mapValue:{fields:e.fields}}),d=en.newFoundDocument(n,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function sj(s,e){let t;if("targetChange"in e){e.targetChange;const n=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_e(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(Ce(v===void 0||typeof v=="string",58123),cn.fromBase64String(v||"")):(Ce(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),cn.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?Z.UNKNOWN:j2(g.code);return new he(v,g.message||"")})(c);t=new P2(n,a,l,d||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Ro(s,n.document.name),l=nr(n.document.updateTime),c=n.document.createTime?nr(n.document.createTime):je.min(),d=new Hn({mapValue:{fields:n.document.fields}}),p=en.newFoundDocument(a,l,c,d),g=n.targetIds||[],v=n.removedTargetIds||[];t=new Nf(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Ro(s,n.document),l=n.readTime?nr(n.readTime):je.min(),c=en.newNoDocument(a,l),d=n.removedTargetIds||[];t=new Nf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Ro(s,n.document),l=n.removedTargetIds||[];t=new Nf([],l,a,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:l}=n,c=new KD(a,l),d=n.targetId;t=new O2(d,c)}}return t}function Xf(s,e){let t;if(e instanceof Sc)t={update:B1(s,e.key,e.value)};else if(e instanceof Np)t={delete:Yf(s,e.key)};else if(e instanceof Ai)t={update:B1(s,e.key,e.data),updateMask:uj(e.fieldMask)};else{if(!(e instanceof D2))return _e(16599,{dt:e.type});t={verify:Yf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(l,c){const d=c.transform;if(d instanceof fh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof fc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof pc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ph)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw _e(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:nj(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(s,e.precondition)),t}function Z0(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?$n.updateTime(nr(l.updateTime)):l.exists!==void 0?$n.exists(l.exists):$n.none()})(e.currentDocument):$n.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)Ce(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new fh;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new fc(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new pc(v)}else"increment"in d?p=new ph(c,d.increment):_e(16584,{proto:d});const g=qt.fromServerFormat(d.fieldPath);return new FD(g,p)})(s,a))):[];if(e.update){e.update.name;const a=Ro(s,e.update.name),l=new Hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new yr(g.map((v=>qt.fromServerFormat(v))))})(e.updateMask);return new Ai(a,l,c,t,n)}return new Sc(a,l,t,n)}if(e.delete){const a=Ro(s,e.delete);return new Np(a,t)}if(e.verify){const a=Ro(s,e.verify);return new D2(a,t)}return _e(1463,{proto:e})}function ij(s,e){return s&&s.length>0?(Ce(e!==void 0,14353),s.map((t=>(function(a,l){let c=a.updateTime?nr(a.updateTime):nr(l);return c.isEqual(je.min())&&(c=nr(l)),new qD(c,a.transformResults||[])})(t,e)))):[]}function z2(s,e){return{documents:[L2(s,e.path)]}}function F2(s,e){const t={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=L2(s,a);const l=(function(g){if(g.length!==0)return H2(xt.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(E){return{field:Hl(E.field),direction:oj(E.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=X0(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function G2(s){let e=U2(s.parent);const t=s.structuredQuery,n=t.from?t.from.length:0;let a=null;if(n>0){Ce(n===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(x){const E=q2(x);return E instanceof xt&&qy(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(x){return x.map((E=>(function(O){return new $f($l(O.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(x){let E;return E=typeof x=="object"?x.value:x,yp(E)?null:E})(t.limit));let p=null;t.startAt&&(p=(function(x){const E=!!x.before,A=x.values||[];return new hc(A,E)})(t.startAt));let g=null;return t.endAt&&(g=(function(x){const E=!x.before,A=x.values||[];return new hc(A,E)})(t.endAt)),y2(e,a,c,l,d,"F",p,g)}function aj(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function q2(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=$l(t.unaryFilter.field);return Ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=$l(t.unaryFilter.field);return Ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=$l(t.unaryFilter.field);return Ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=$l(t.unaryFilter.field);return Ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ze.create($l(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return xt.create(t.compositeFilter.filters.map((n=>q2(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(s):_e(30097,{filter:s})}function oj(s){return WD[s]}function lj(s){return ZD[s]}function cj(s){return ej[s]}function Hl(s){return{fieldPath:s.canonicalString()}}function $l(s){return qt.fromServerFormat(s.fieldPath)}function H2(s){return s instanceof Ze?(function(t){if(t.op==="=="){if(T1(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NAN"}};if(E1(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(T1(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NAN"}};if(E1(t.value))return{unaryFilter:{field:Hl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(t.field),op:lj(t.op),value:t.value}}})(s):s instanceof xt?(function(t){const n=t.getFilters().map((a=>H2(a)));return n.length===1?n[0]:{compositeFilter:{op:cj(t.op),filters:n}}})(s):_e(54877,{filter:s})}function uj(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function K2(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t,n,a,l=je.min(),c=je.min(),d=cn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.yt=e}}function hj(s,e){let t;if(e.document)t=rj(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ye.fromSegments(e.noDocument.path),a=zo(e.noDocument.readTime);t=en.newNoDocument(n,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e(56709);{const n=ye.fromSegments(e.unknownDocument.path),a=zo(e.unknownDocument.version);t=en.newUnknownDocument(n,a)}}return e.readTime&&t.setReadTime((function(a){const l=new bt(a[0],a[1]);return je.fromTimestamp(l)})(e.readTime)),t}function z1(s,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(l,c){return{name:Yf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:mc(l,c.version.toTimestamp()),createTime:mc(l,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Bo(e.version)};else{if(!e.isUnknownDocument())return _e(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Bo(e.version)}}return n}function Jf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Bo(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zo(s){const e=new bt(s.seconds,s.nanoseconds);return je.fromTimestamp(e)}function Eo(s,e){const t=(e.baseMutations||[]).map((l=>Z0(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const n=e.mutations.map((l=>Z0(s.yt,l))),a=bt.fromMillis(e.localWriteTimeMs);return new Ky(e.batchId,a,t,n)}function Vu(s){const e=zo(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?zo(s.lastLimboFreeSnapshotVersion):je.min();let n;return n=(function(l){return l.documents!==void 0})(s.query)?(function(l){const c=l.documents.length;return Ce(c===1,1966,{count:c}),Or(Rh(U2(l.documents[0])))})(s.query):(function(l){return Or(G2(l))})(s.query),new vi(n,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,cn.fromBase64String(s.resumeToken))}function Y2(s,e){const t=Bo(e.snapshotVersion),n=Bo(e.lastLimboFreeSnapshotVersion);let a;a=Kf(e.target)?z2(s.yt,e.target):F2(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function X2(s){const e=G2({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Y0(e,e.limit,"L"):e}function h0(s,e){return new Yy(e.largestBatchId,Z0(s.yt,e.overlayMutation))}function F1(s,e){const t=e.path.lastSegment();return[s,Kn(e.path.popLast()),t]}function G1(s,e,t,n){return{indexId:s,uid:e,sequenceNumber:t,readTime:Bo(n.readTime),documentKey:Kn(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{getBundleMetadata(e,t){return q1(e).get(t).next((n=>{if(n)return(function(l){return{id:l.bundleId,createTime:zo(l.createTime),version:l.version}})(n)}))}saveBundleMetadata(e,t){return q1(e).put((function(a){return{bundleId:a.id,createTime:Bo(nr(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return H1(e).get(t).next((n=>{if(n)return(function(l){return{name:l.name,query:X2(l.bundledQuery),readTime:zo(l.readTime)}})(n)}))}saveNamedQuery(e,t){return H1(e).put((function(a){return{name:a.name,readTime:Bo(nr(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function q1(s){return En(s,vp)}function H1(s){return En(s,bp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Ap(e,n)}getOverlay(e,t){return wu(e).get(F1(this.userId,t)).next((n=>n?h0(this.serializer,n):null))}getOverlays(e,t){const n=Fs();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&n.set(a,l)})))).next((()=>n))}saveOverlays(e,t,n){const a=[];return n.forEach(((l,c)=>{const d=new Yy(t,c);a.push(this.bt(e,d))})),z.waitFor(a)}removeOverlaysForBatchId(e,t,n){const a=new Set;t.forEach((c=>a.add(Kn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);l.push(wu(e).X(z0,d))})),z.waitFor(l)}getOverlaysForCollection(e,t,n){const a=Fs(),l=Kn(t),c=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,Number.POSITIVE_INFINITY],!0);return wu(e).H(z0,c).next((d=>{for(const p of d){const g=h0(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,n,a){const l=Fs();let c;const d=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wu(e).ee({index:YS,range:d},((p,g,v)=>{const x=h0(this.serializer,g);l.size()<a||x.largestBatchId===c?(l.set(x.getKey(),x),c=x.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return wu(e).put((function(a,l,c){const[d,p,g]=F1(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Xf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function wu(s){return En(s,xp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{St(e){return En(e,Uy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const n=t==null?void 0:t.value;return n?cn.fromUint8Array(n):cn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(zt(e.integerValue));else if("doubleValue"in e){const n=zt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ih(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=wi(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ei(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?o2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):wp(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):_e(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const n=e.fields||{};this.Ft(t,55);for(const a of Object.keys(n))this.Ot(a,t),this.Ct(n[a],t)}kt(e,t){var c,d;const n=e.fields||{};this.Ft(t,53);const a=cc,l=((d=(c=n[a].arrayValue)==null?void 0:c.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(zt(l)),this.Ot(a,t),this.Ct(n[a],t)}qt(e,t){const n=e.values||[];this.Ft(t,50);for(const a of n)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((n=>{this.Ft(t,60),this.$t(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}To.Wt=new To;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=255;function pj(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function $1(s){const e=64-(function(n){let a=0;for(let l=0;l<8;++l){const c=pj(255&n[l]);if(a+=c,c!==8)break}return a})(s);return Math.ceil(e/8)}class mj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ht(n.value),n=t.next();this.Jt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ht(n);else if(n<2048)this.Ht(960|n>>>6),this.Ht(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|n>>>12),this.Ht(128|63&n>>>6),this.Ht(128|63&n);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),n=$1(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let a=t.length-n;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),n=$1(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let a=t.length-n;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Ll),this.sn(255)}_n(){this.an(Ll),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let a=1;a<t.length;++a)t[a]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ll?(this.sn(Ll),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ll?(this.an(Ll),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class gj{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class yj{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Eu{constructor(){this.cn=new mj,this.ascending=new gj(this.cn),this.descending=new yj(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,n,a){this.hn=e,this.Pn=t,this.Tn=n,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.In,0),t!==e?n.set([0],this.In.length):++n[n.length-1],new So(this.hn,this.Pn,this.Tn,n)}Rn(e,t,n){return{indexId:this.hn,uid:e,arrayValue:Af(this.Tn),directionalValue:Af(this.In),orderedDocumentKey:Af(t),documentKey:n.path.toArray()}}An(e,t,n){const a=this.Rn(e,t,n);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function da(s,e){let t=s.hn-e.hn;return t!==0?t:(t=K1(s.Tn,e.Tn),t!==0?t:(t=K1(s.In,e.In),t!==0?t:ye.comparator(s.Pn,e.Pn)))}function K1(s,e){for(let t=0;t<s.length&&t<e.length;++t){const n=s[t]-e[t];if(n!==0)return n}return s.length-e.length}function Af(s){return zT()?(function(t){let n="";for(let a=0;a<t.length;a++)n+=String.fromCharCode(t[a]);return n})(s):s}function Q1(s){return typeof s!="string"?s:(function(t){const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n})(s)}class Y1{constructor(e){this.Vn=new _t(((t,n)=>qt.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const n=t;n.isInequality()?this.Vn=this.Vn.add(n):this.mn.push(n)}}get fn(){return this.Vn.size>1}gn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=L0(e);if(t!==void 0&&!this.pn(t))return!1;const n=xo(e);let a=new Set,l=0,c=0;for(;l<n.length&&this.pn(n[l]);++l)a=a.add(n[l].fieldPath.canonicalString());if(l===n.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=n[l];if(!this.yn(d,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<n.length;++l){const d=n[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new _t(qt.comparator);const t=[];for(const n of this.mn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new bf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new bf(n.field,0))}for(const n of this.dn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new bf(n.field,n.dir==="asc"?0:1)));return new zf(zf.UNKNOWN_ID,this.collectionId,t,sh.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(s){var t,n;if(Ce(s instanceof Ze||s instanceof xt,20012),s instanceof Ze){if(s instanceof g2){const a=((n=(t=s.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map((l=>Ze.create(s.field,"==",l))))||[];return xt.create(a,"or")}return s}const e=s.filters.map((a=>J2(a)));return xt.create(e,s.op)}function vj(s){if(s.getFilters().length===0)return[];const e=ny(J2(s));return Ce(W2(e),7391),ey(e)||ty(e)?[e]:e.getFilters()}function ey(s){return s instanceof Ze}function ty(s){return s instanceof xt&&qy(s)}function W2(s){return ey(s)||ty(s)||(function(t){if(t instanceof xt&&H0(t)){for(const n of t.getFilters())if(!ey(n)&&!ty(n))return!1;return!0}return!1})(s)}function ny(s){if(Ce(s instanceof Ze||s instanceof xt,34018),s instanceof Ze)return s;if(s.filters.length===1)return ny(s.filters[0]);const e=s.filters.map((n=>ny(n)));let t=xt.create(e,s.op);return t=Wf(t),W2(t)?t:(Ce(t instanceof xt,64498),Ce(dc(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((n,a)=>Wy(n,a))))}function Wy(s,e){let t;return Ce(s instanceof Ze||s instanceof xt,38388),Ce(e instanceof Ze||e instanceof xt,25473),t=s instanceof Ze?e instanceof Ze?(function(a,l){return xt.create([a,l],"and")})(s,e):X1(s,e):e instanceof Ze?X1(e,s):(function(a,l){if(Ce(a.filters.length>0&&l.filters.length>0,48005),dc(a)&&dc(l))return f2(a,l.getFilters());const c=H0(a)?a:l,d=H0(a)?l:a,p=c.filters.map((g=>Wy(g,d)));return xt.create(p,"or")})(s,e),Wf(t)}function X1(s,e){if(dc(e))return f2(e,s.getFilters());{const t=e.filters.map((n=>Wy(s,n)));return xt.create(t,"or")}}function Wf(s){if(Ce(s instanceof Ze||s instanceof xt,11850),s instanceof Ze)return s;const e=s.getFilters();if(e.length===1)return Wf(e[0]);if(h2(s))return s;const t=e.map((a=>Wf(a))),n=[];return t.forEach((a=>{a instanceof Ze?n.push(a):a instanceof xt&&(a.op===s.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:xt.create(n,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.Sn=new Zy}addToCollectionParentIndex(e,t){return this.Sn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Pr.min())}updateCollectionGroup(e,t,n){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class Zy{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t]||new _t(ft.comparator),l=!a.has(n);return this.index[t]=a.add(n),l}has(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t];return a&&a.has(n)}getEntries(e){return(this.index[e]||new _t(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="IndexedDbIndexManager",rf=new Uint8Array(0);class xj{constructor(e,t){this.databaseId=t,this.Dn=new Zy,this.Cn=new Ni((n=>Uo(n)),((n,a)=>Ih(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const n=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:n,parent:Kn(a)};return W1(e).put(l)}return z.resolve()}getCollectionParents(e,t){const n=[],a=IDBKeyRange.bound([t,""],[PS(t),""],!1,!0);return W1(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;n.push(zs(c.parent))}return n}))}addFieldIndex(e,t){const n=Tu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=n.add(a);if(t.indexState){const c=Bl(e);return l.next((d=>{c.put(G1(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const n=Tu(e),a=Bl(e),l=Ul(e);return n.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Tu(e),n=Ul(e),a=Bl(e);return t.X().next((()=>n.X())).next((()=>a.X()))}createTargetIndexes(e,t){return z.forEach(this.vn(t),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const l=new Y1(n).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const n=Ul(e);let a=!0;const l=new Map;return z.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=He();const d=[];return z.forEach(l,((p,g)=>{oe(J1,`Using index ${(function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map((ge=>`${ge.fieldPath}:${ge.kind}`)).join(",")}`})(p)} to execute ${Uo(t)}`);const v=(function(le,ge){const Ee=L0(ge);if(Ee===void 0)return null;for(const ve of Qf(le,Ee.fieldPath))switch(ve.op){case"array-contains-any":return ve.value.arrayValue.values||[];case"array-contains":return[ve.value]}return null})(g,p),x=(function(le,ge){const Ee=new Map;for(const ve of xo(ge))for(const C of Qf(le,ve.fieldPath))switch(C.op){case"==":case"in":Ee.set(ve.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return Ee.set(ve.fieldPath.canonicalString(),C.value),Array.from(Ee.values())}return null})(g,p),E=(function(le,ge){const Ee=[];let ve=!0;for(const C of xo(ge)){const I=C.kind===0?C1(le,C.fieldPath,le.startAt):R1(le,C.fieldPath,le.startAt);Ee.push(I.value),ve&&(ve=I.inclusive)}return new hc(Ee,ve)})(g,p),A=(function(le,ge){const Ee=[];let ve=!0;for(const C of xo(ge)){const I=C.kind===0?R1(le,C.fieldPath,le.endAt):C1(le,C.fieldPath,le.endAt);Ee.push(I.value),ve&&(ve=I.inclusive)}return new hc(Ee,ve)})(g,p),O=this.Mn(p,g,E),G=this.Mn(p,g,A),J=this.xn(p,g,x),ie=this.On(p.indexId,v,O,E.inclusive,G,A.inclusive,J);return z.forEach(ie,(ce=>n.Z(ce,t.limit).next((le=>{le.forEach((ge=>{const Ee=ye.fromSegments(ge.documentKey);c.has(Ee)||(c=c.add(Ee),d.push(Ee))}))}))))})).next((()=>d))}return z.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=vj(xt.create(e.filters,"and")).map((n=>K0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,n,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(n.length,l.length),g=p/(t!=null?t.length:1),v=[];for(let x=0;x<p;++x){const E=t?this.Nn(t[x/g]):rf,A=this.Bn(e,E,n[x%g],a),O=this.Ln(e,E,l[x%g],c),G=d.map((J=>this.Bn(e,E,J,!0)));v.push(...this.createRange(A,O,G))}return v}Bn(e,t,n,a){const l=new So(e,ye.empty(),t,n);return a?l:l.En()}Ln(e,t,n,a){const l=new So(e,ye.empty(),t,n);return a?l.En():l}Fn(e,t){const n=new Y1(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)n.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let n=2;const a=this.vn(t);return z.forEach(a,(l=>this.Fn(e,l).next((c=>{c?n!==0&&c.fields.length<(function(p){let g=new _t(qt.comparator),v=!1;for(const x of p.filters)for(const E of x.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?v=!0:g=g.add(E.field));for(const x of p.orderBy)x.field.isKeyField()||(g=g.add(x.field));return g.size+(v?1:0)})(l)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&n===2?1:n))}kn(e,t){const n=new Eu;for(const a of xo(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=n.ln(a.kind);To.Wt.Dt(l,c)}return n.un()}Nn(e){const t=new Eu;return To.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const n=new Eu;return To.Wt.Dt(hh(this.databaseId,t),n.ln((function(l){const c=xo(l);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}xn(e,t,n){if(n===null)return[];let a=[];a.push(new Eu);let l=0;for(const c of xo(e)){const d=n[l++];for(const p of a)if(this.qn(t,c.fieldPath)&&dh(d))a=this.Un(a,c,d);else{const g=p.ln(c.kind);To.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,n){return this.xn(e,t,n.position)}$n(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Un(e,t,n){const a=[...e],l=[];for(const c of n.arrayValue.values||[])for(const d of a){const p=new Eu;p.seed(d.un()),To.Wt.Dt(c,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((n=>n instanceof Ze&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Tu(e),a=Bl(e);return(t?n.H(B0,IDBKeyRange.bound(t,t)):n.H()).next((l=>{const c=[];return z.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(v,x){const E=x?new sh(x.sequenceNumber,new Pr(zo(x.readTime),new ye(zs(x.documentKey)),x.largestBatchId)):sh.empty(),A=v.fields.map((([O,G])=>new bf(qt.fromServerFormat(O),G)));return new zf(v.indexId,v.collectionGroup,A,E)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,a)=>{const l=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ve(n.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const a=Tu(e),l=Bl(e);return this.Wn(e).next((c=>a.H(B0,IDBKeyRange.bound(t,t)).next((d=>z.forEach(d,(p=>l.put(G1(p.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return z.forEach(t,((a,l)=>{const c=n.get(a.collectionGroup);return(c?z.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(n.set(a.collectionGroup,d),z.forEach(d,(p=>this.Qn(e,a,p).next((g=>{const v=this.Gn(l,p);return g.isEqual(v)?z.resolve():this.zn(e,l,p,g,v)})))))))}))}jn(e,t,n,a){return Ul(e).put(a.Rn(this.uid,this.Kn(n,t.key),t.key))}Hn(e,t,n,a){return Ul(e).delete(a.An(this.uid,this.Kn(n,t.key),t.key))}Qn(e,t,n){const a=Ul(e);let l=new _t(da);return a.ee({index:QS,range:IDBKeyRange.only([n.indexId,this.uid,Af(this.Kn(n,t))])},((c,d)=>{l=l.add(new So(n.indexId,t,Q1(d.arrayValue),Q1(d.directionalValue)))})).next((()=>l))}Gn(e,t){let n=new _t(da);const a=this.kn(t,e);if(a==null)return n;const l=L0(t);if(l!=null){const c=e.data.field(l.fieldPath);if(dh(c))for(const d of c.arrayValue.values||[])n=n.add(new So(t.indexId,e.key,this.Nn(d),a))}else n=n.add(new So(t.indexId,e.key,rf,a));return n}zn(e,t,n,a,l){oe(J1,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,v,x,E){const A=p.getIterator(),O=g.getIterator();let G=Vl(A),J=Vl(O);for(;G||J;){let ie=!1,ce=!1;if(G&&J){const le=v(G,J);le<0?ce=!0:le>0&&(ie=!0)}else G!=null?ce=!0:ie=!0;ie?(x(J),J=Vl(O)):ce?(E(G),G=Vl(A)):(G=Vl(A),J=Vl(O))}})(a,l,da,(d=>{c.push(this.jn(e,t,n,d))}),(d=>{c.push(this.Hn(e,t,n,d))})),z.waitFor(c)}Wn(e){let t=1;return Bl(e).ee({index:KS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,d)=>da(c,d))).filter(((c,d,p)=>!d||da(c,p[d-1])!==0));const a=[];a.push(e);for(const c of n){const d=da(c,e),p=da(c,t);if(d===0)a[0]=e.En();else if(d>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,rf,ye.empty()),p=a[c+1].An(this.uid,rf,ye.empty());l.push(IDBKeyRange.bound(d,p))}return l}Jn(e,t){return da(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Z1)}getMinOffset(e,t){return z.mapArray(this.vn(t),(n=>this.Fn(e,n).next((a=>a||_e(44426))))).next(Z1)}}function W1(s){return En(s,lh)}function Ul(s){return En(s,qu)}function Tu(s){return En(s,Ly)}function Bl(s){return En(s,Gu)}function Z1(s){Ce(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<s.length;n++){const a=s[n].indexState.offset;Py(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Pr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Z2=41943040;class Gn{static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(s,e,t){const n=s.store(gs),a=s.store(ic),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=n.ee({range:c},((v,x,E)=>(d++,E.delete())));l.push(p.next((()=>{Ce(d===1,47070,{batchId:t.batchId})})));const g=[];for(const v of t.mutations){const x=qS(e,v.key.path,t.batchId);l.push(a.delete(x)),g.push(v.key)}return z.waitFor(l).next((()=>g))}function Zf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw _e(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(Z2,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);class Ip{constructor(e,t,n,a){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=a,this.Zn={}}static wt(e,t,n,a){Ce(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Ip(l,t,n,a)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fa(e).ee({index:Ao,range:n},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,a){const l=Kl(e),c=fa(e);return c.add({}).next((d=>{Ce(typeof d=="number",49019);const p=new Ky(d,t,n,a),g=(function(A,O,G){const J=G.baseMutations.map((ce=>Xf(A.yt,ce))),ie=G.mutations.map((ce=>Xf(A.yt,ce)));return{userId:O,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:J,mutations:ie}})(this.serializer,this.userId,p),v=[];let x=new _t(((E,A)=>Ve(E.canonicalString(),A.canonicalString())));for(const E of a){const A=qS(this.userId,E.key.path,d);x=x.add(E.key.path.popLast()),v.push(c.put(g)),v.push(l.put(A,Y4))}return x.forEach((E=>{v.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),z.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return fa(e).get(t).next((n=>n?(Ce(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),Eo(this.serializer,n)):null))}Xn(e,t){return this.Zn[t]?z.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const a=n.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=IDBKeyRange.lowerBound([this.userId,n]);let l=null;return fa(e).ee({index:Ao,range:a},((c,d,p)=>{d.userId===this.userId&&(Ce(d.batchId>=n,47524,{Yn:n}),l=Eo(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Io;return fa(e).ee({index:Ao,range:t,reverse:!0},((a,l,c)=>{n=l.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Io],[this.userId,Number.POSITIVE_INFINITY]);return fa(e).H(Ao,t).next((n=>n.map((a=>Eo(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=xf(this.userId,t.path),a=IDBKeyRange.lowerBound(n),l=[];return Kl(e).ee({range:a},((c,d,p)=>{const[g,v,x]=c,E=zs(v);if(g===this.userId&&t.path.isEqual(E))return fa(e).get(x).next((A=>{if(!A)throw _e(61480,{er:c,batchId:x});Ce(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:x}),l.push(Eo(this.serializer,A))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new _t(Ve);const a=[];return t.forEach((l=>{const c=xf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Kl(e).ee({range:d},((g,v,x)=>{const[E,A,O]=g,G=zs(A);E===this.userId&&l.path.isEqual(G)?n=n.add(O):x.done()}));a.push(p)})),z.waitFor(a).next((()=>this.tr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1,l=xf(this.userId,n),c=IDBKeyRange.lowerBound(l);let d=new _t(Ve);return Kl(e).ee({range:c},((p,g,v)=>{const[x,E,A]=p,O=zs(E);x===this.userId&&n.isPrefixOf(O)?O.length===a&&(d=d.add(A)):v.done()})).next((()=>this.tr(e,d)))}tr(e,t){const n=[],a=[];return t.forEach((l=>{a.push(fa(e).get(l).next((c=>{if(c===null)throw _e(35274,{batchId:l});Ce(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),n.push(Eo(this.serializer,c))})))})),z.waitFor(a).next((()=>n))}removeMutationBatch(e,t){return eN(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),z.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Kl(e).ee({range:n},((l,c,d)=>{if(l[0]===this.userId){const p=zs(l[1]);a.push(p)}else d.done()})).next((()=>{Ce(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return tN(e,this.userId,t)}ir(e){return nN(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Io,lastStreamToken:""}))}}function tN(s,e,t){const n=xf(e,t.path),a=n[1],l=IDBKeyRange.lowerBound(n);let c=!1;return Kl(s).ee({range:l,Y:!0},((d,p,g)=>{const[v,x,E]=d;v===e&&x===a&&(c=!0),g.done()})).next((()=>c))}function fa(s){return En(s,gs)}function Kl(s){return En(s,ic)}function nN(s){return En(s,ah)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Fo(0)}static ar(){return new Fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const n=new Fo(t.highestTargetId);return t.highestTargetId=n.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>je.fromTimestamp(new bt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((n=>(n.targetCount+=1,this.hr(t,n),this.cr(e,n))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>zl(e).delete(t.targetId))).next((()=>this.ur(e))).next((n=>(Ce(n.targetCount>0,8065),n.targetCount-=1,this.cr(e,n))))}removeTargets(e,t,n){let a=0;const l=[];return zl(e).ee(((c,d)=>{const p=Vu(d);p.sequenceNumber<=t&&n.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>z.waitFor(l))).next((()=>a))}forEachTarget(e,t){return zl(e).ee(((n,a)=>{const l=Vu(a);t(l)}))}ur(e){return tE(e).get(qf).next((t=>(Ce(t!==null,2888),t)))}cr(e,t){return tE(e).put(qf,t)}lr(e,t){return zl(e).put(Y2(this.serializer,t))}hr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Uo(t),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let l=null;return zl(e).ee({range:a,index:$S},((c,d,p)=>{const g=Vu(d);Ih(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,n){const a=[],l=wa(e);return t.forEach((c=>{const d=Kn(c.path);a.push(l.put({targetId:n,path:d})),a.push(this.referenceDelegate.addReference(e,n,c))})),z.waitFor(a)}removeMatchingKeys(e,t,n){const a=wa(e);return z.forEach(t,(l=>{const c=Kn(l.path);return z.waitFor([a.delete([n,c]),this.referenceDelegate.removeReference(e,n,l)])}))}removeMatchingKeysForTargetId(e,t){const n=wa(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),a=wa(e);let l=He();return a.ee({range:n,Y:!0},((c,d,p)=>{const g=zs(c[1]),v=new ye(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const n=Kn(t.path),a=IDBKeyRange.bound([n],[PS(n)],!1,!0);let l=0;return wa(e).ee({index:Vy,Y:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return zl(e).get(t).next((n=>n?Vu(n):null))}}function zl(s){return En(s,ac)}function tE(s){return En(s,Co)}function wa(s){return En(s,oc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="LruGarbageCollector",rN=1048576;function rE([s,e],[t,n]){const a=Ve(s,t);return a===0?Ve(e,n):a}class wj{constructor(e){this.Pr=e,this.buffer=new _t(rE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();rE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sN{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){oe(nE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){za(t)?oe(nE,"Ignoring IndexedDB error during garbage collection: ",t):await Ba(t)}await this.Ar(3e5)}))}}class Ej{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(gr.ce);const n=new wj(t);return this.Vr.forEachTarget(e,(a=>n.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>n.Er(a))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(eE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,c=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(n=x,d=Date.now(),this.removeTargets(e,n,t)))).next((x=>(l=x,p=Date.now(),this.removeOrphanedDocuments(e,n)))).next((x=>(g=Date.now(),Gl()<=We.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${x} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:x}))))}}function iN(s,e){return new Ej(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,t){this.db=e,this.garbageCollector=iN(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((a=>n+a))))}pr(e){let t=0;return this.mr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((n,a)=>t(a)))}addReference(e,t,n){return sf(e,n)}removeReference(e,t,n){return sf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return sf(e,t)}wr(e,t){return(function(a,l){let c=!1;return nN(a).te((d=>tN(a,d,l).next((p=>(p&&(c=!0),z.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const p=this.wr(e,c).next((g=>{if(!g)return l++,n.getEntry(e,c).next((()=>(n.removeEntry(c,je.min()),wa(e).delete((function(x){return[0,Kn(x.path)]})(c)))))}));a.push(p)}})).next((()=>z.waitFor(a))).next((()=>n.apply(e))).next((()=>l))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return sf(e,t)}yr(e,t){const n=wa(e);let a,l=gr.ce;return n.ee({index:Vy},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==gr.ce&&t(new ye(zs(a)),l),l=g,a=p):l=gr.ce})).next((()=>{l!==gr.ce&&t(new ye(zs(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sf(s,e){return wa(s).put((function(n,a){return{targetId:0,path:Kn(n.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.changes=new Ni((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?z.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return vo(e).put(n)}removeEntry(e,t,n){return vo(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Jf(c),d[d.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.br(e,n))))}getEntry(e,t){let n=en.newInvalidDocument(t);return vo(e).ee({index:_f,range:IDBKeyRange.only(Su(t))},((a,l)=>{n=this.Sr(t,l)})).next((()=>n))}Dr(e,t){let n={size:0,document:en.newInvalidDocument(t)};return vo(e).ee({index:_f,range:IDBKeyRange.only(Su(t))},((a,l)=>{n={document:this.Sr(t,l),size:Zf(l)}})).next((()=>n))}getEntries(e,t){let n=Dr();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);n=n.insert(a,c)})).next((()=>n))}vr(e,t){let n=Dr(),a=new kt(ye.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);n=n.insert(l,d),a=a.insert(l,Zf(c))})).next((()=>({documents:n,Fr:a})))}Cr(e,t,n){if(t.isEmpty())return z.resolve();let a=new _t(aE);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Su(a.first()),Su(a.last())),c=a.getIterator();let d=c.getNext();return vo(e).ee({index:_f,range:l},((p,g,v)=>{const x=ye.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&aE(d,x)<0;)n(d,null),d=c.getNext();d&&d.isEqual(x)&&(n(d,g),d=c.hasNext()?c.getNext():null),d?v.j(Su(d)):v.done()})).next((()=>{for(;d;)n(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Jf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vo(e).H(IDBKeyRange.bound(d,p,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let v=Dr();for(const x of g){const E=this.Sr(ye.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);E.isFoundDocument()&&(kh(t,E)||a.has(E.key))&&(v=v.insert(E.key,E))}return v}))}getAllFromCollectionGroup(e,t,n,a){let l=Dr();const c=iE(t,n),d=iE(t,Pr.max());return vo(e).ee({index:HS,range:IDBKeyRange.bound(c,d,!0)},((p,g,v)=>{const x=this.Sr(ye.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(x.key,x),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new Nj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return sE(e).get(U0).next((t=>(Ce(!!t,20021),t)))}br(e,t){return sE(e).put(U0,t)}Sr(e,t){if(t){const n=hj(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(je.min())))return n}return en.newInvalidDocument(e)}}function oN(s){return new Sj(s)}class Nj extends aN{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Ni((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const t=[];let n=0,a=new _t(((l,c)=>Ve(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=z1(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=Zf(p);n+=g-d.size,t.push(this.Mr.addEntry(e,l,p))}else if(n-=d.size,this.trackRemovals){const p=z1(this.Mr.serializer,c.convertToNoDocument(je.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,n)),z.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((n=>(this.Or.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:n,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:n.get(l).readTime})})),n)))}}function sE(s){return En(s,oh)}function vo(s){return En(s,Gf)}function Su(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iE(s,e){const t=e.documentKey.path.toArray();return[s,Jf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aE(s,e){const t=s.path.toArray(),n=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<n.length-2;++l)if(a=Ve(t[l],n[l]),a)return a;return a=Ve(t.length,n.length),a||(a=Ve(t[t.length-2],n[n.length-2]),a||Ve(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t,n,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(n!==null&&Qu(n.mutation,a,yr.empty(),bt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,He()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=He()){const a=Fs();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,n).next((l=>{let c=Pu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Fs();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,He())))}populateOverlays(e,t,n){const a=[];return n.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,n,a){let l=Dr();const c=Ku(),d=(function(){return Ku()})();return t.forEach(((p,g)=>{const v=n.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Ai)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Qu(v.mutation,g,v.mutation.getFieldMask(),bt.now())):c.set(g.key,yr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new Aj(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const n=Ku();let a=new kt(((c,d)=>c-d)),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=n.get(p)||yr.empty();v=d.applyToLocalView(g,v),n.set(p,v);const x=(a.get(d.batchId)||He()).add(p);a=a.insert(d.batchId,x)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,x=T2();v.forEach((E=>{if(!l.has(E)){const A=R2(t.get(E),n.get(E));A!==null&&x.set(E,A),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,x))}return z.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,a){return DD(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):v2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,a):this.getDocumentsMatchingCollectionQuery(e,t,n,a)}getNextDocuments(e,t,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,a-l.size):z.resolve(Fs());let d=sc,p=l;return c.next((g=>z.forEach(g,((v,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),l.get(v)?z.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{p=p.insert(v,E)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,He()))).next((v=>({batchId:d,changes:E2(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((n=>{let a=Pu();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,a){const l=t.collectionGroup;let c=Pu();return this.indexManager.getCollectionParents(e,l).next((d=>z.forEach(d,(p=>{const g=(function(x,E){return new Ch(E,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,n,a).next((v=>{v.forEach(((x,E)=>{c=c.insert(x,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,en.newInvalidDocument(v)))}));let d=Pu();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Qu(v.mutation,g,yr.empty(),bt.now()),kh(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:nr(a.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:X2(a.bundledQuery),readTime:nr(a.readTime)}})(t)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(){this.overlays=new kt(ye.comparator),this.Lr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fs();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&n.set(a,l)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((a,l)=>{this.bt(e,t,l)})),z.resolve()}removeOverlaysForBatchId(e,t,n){const a=this.Lr.get(n);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(n)),z.resolve()}getOverlaysForCollection(e,t,n){const a=Fs(),l=t.length+1,c=new ye(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>n&&a.set(p.getKey(),p)}return z.resolve(a)}getOverlaysForCollectionGroup(e,t,n,a){let l=new kt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>n){let v=l.get(g.largestBatchId);v===null&&(v=Fs(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Fs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return z.resolve(d)}bt(e,t,n){const a=this.overlays.get(n.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(n.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new Yy(t,n));let l=this.Lr.get(t);l===void 0&&(l=He(),this.Lr.set(t,l)),this.Lr.set(t,l.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.kr=new _t(Sn.Kr),this.qr=new _t(Sn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new Sn(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Wr(new Sn(e,t))}Qr(e,t){e.forEach((n=>this.removeReference(n,t)))}Gr(e){const t=new ye(new ft([])),n=new Sn(t,e),a=new Sn(t,e+1),l=[];return this.qr.forEachInRange([n,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new ft([])),n=new Sn(t,e),a=new Sn(t,e+1);let l=He();return this.qr.forEachInRange([n,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Sn(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Sn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||Ve(e.Hr,t.Hr)}static Ur(e,t){return Ve(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new _t(Sn.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ky(l,t,n,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new Sn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return z.resolve(c)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=this.Xr(n),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Io:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Sn(t,0),a=new Sn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([n,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new _t(Ve);return t.forEach((a=>{const l=new Sn(a,0),c=new Sn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{n=n.add(d.Hr)}))})),z.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1;let l=n;ye.isDocumentKey(l)||(l=l.child(""));const c=new Sn(new ye(l),0);let d=new _t(Ve);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!n.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),z.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((n=>{const a=this.Zr(n);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ce(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return z.forEach(t.mutations,(a=>{const l=new Sn(a.key,t.batchId);return n=n.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){const n=new Sn(t,0),a=this.Jr.firstAfterOrEqual(n);return z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.ti=e,this.docs=(function(){return new kt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,a=this.docs.get(n),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return z.resolve(n?n.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let n=Dr();return t.forEach((a=>{const l=this.docs.get(a);n=n.insert(a,l?l.document.mutableCopy():en.newInvalidDocument(a))})),z.resolve(n)}getDocumentsMatchingQuery(e,t,n,a){let l=Dr();const c=t.path,d=new ye(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Py(US(v),n)<=0||(a.has(v.key)||kh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(e,t,n,a){_e(9500)}ni(e,t){return z.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new jj(this)}getSize(e){return z.resolve(this.size)}}class jj extends aN{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(n)})),z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.persistence=e,this.ri=new Ni((t=>Uo(t)),Ih),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.ii=0,this.si=new ev,this.targetCount=0,this.oi=Fo._r()}forEachTarget(e,t){return this.ri.forEach(((n,a)=>t(a))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.lr(t),z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,n){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&n.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),z.waitFor(l).next((()=>a))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return z.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),z.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return z.resolve(n)}containsKey(e,t){return z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t){this._i={},this.overlays={},this.ai=new gr(0),this.ui=!1,this.ui=!0,this.ci=new Rj,this.referenceDelegate=e(this),this.li=new Oj(this),this.indexManager=new bj,this.remoteDocumentCache=(function(a){return new Dj(a)})((n=>this.referenceDelegate.hi(n))),this.serializer=new Q2(t),this.Pi=new Ij(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new kj(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){oe("MemoryPersistence","Starting transaction:",e);const a=new Pj(this.ai.next());return this.referenceDelegate.Ti(),n(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return z.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}}class Pj extends zS{constructor(e){super(),this.currentSequenceNumber=e}}class Cp{constructor(e){this.persistence=e,this.Ri=new ev,this.Ai=null}static Vi(e){return new Cp(e)}get di(){if(this.Ai)return this.Ai;throw _e(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),z.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,(n=>{const a=ye.fromPath(n);return this.mi(e,a).next((l=>{l||t.removeEntry(a,je.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((n=>{n?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ep{constructor(e,t){this.persistence=e,this.fi=new Ni((n=>Kn(n.path)),((n,a)=>n.isEqual(a))),this.garbageCollector=iN(this,t)}static Vi(e,t){return new ep(e,t)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((a=>n+a))))}pr(e){let t=0;return this.mr(e,(n=>{t++})).next((()=>t))}mr(e,t){return z.forEach(this.fi,((n,a)=>this.wr(e,n,a).next((l=>l?z.resolve():t(a)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(n++,l.removeEntry(c,je.min()))})))).next((()=>l.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),z.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ef(e.data.value)),t}wr(e,t,n){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return z.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.serializer=e}k(e,t,n,a){const l=new gp("createOrUpgrade",t);n<1&&a>=1&&((function(p){p.createObjectStore(Ah)})(e),(function(p){p.createObjectStore(ah,{keyPath:Q4}),p.createObjectStore(gs,{keyPath:y1,autoIncrement:!0}).createIndex(Ao,v1,{unique:!0}),p.createObjectStore(ic)})(e),oE(e),(function(p){p.createObjectStore(_o)})(e));let c=z.resolve();return n<3&&a>=3&&(n!==0&&((function(p){p.deleteObjectStore(oc),p.deleteObjectStore(ac),p.deleteObjectStore(Co)})(e),oE(e)),c=c.next((()=>(function(p){const g=p.store(Co),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:je.min().toTimestamp(),targetCount:0};return g.put(qf,v)})(l)))),n<4&&a>=4&&(n!==0&&(c=c.next((()=>(function(p,g){return g.store(gs).H().next((x=>{p.deleteObjectStore(gs),p.createObjectStore(gs,{keyPath:y1,autoIncrement:!0}).createIndex(Ao,v1,{unique:!0});const E=g.store(gs),A=x.map((O=>E.put(O)));return z.waitFor(A)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(lc,{keyPath:rD})})(e)}))),n<5&&a>=5&&(c=c.next((()=>this.gi(l)))),n<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(oh)})(e),this.pi(l))))),n<7&&a>=7&&(c=c.next((()=>this.yi(l)))),n<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),n<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(c=c.next((()=>this.bi(l)))),n<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(vp,{keyPath:sD})})(e),(function(p){p.createObjectStore(bp,{keyPath:iD})})(e)}))),n<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(xp,{keyPath:dD});g.createIndex(z0,fD,{unique:!1}),g.createIndex(YS,pD,{unique:!1})})(e)}))),n<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(Gf,{keyPath:X4});g.createIndex(_f,J4),g.createIndex(HS,W4)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(_o)))),n<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),n<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(Ly,{keyPath:aD,autoIncrement:!0}).createIndex(B0,oD,{unique:!1}),p.createObjectStore(Gu,{keyPath:lD}).createIndex(KS,cD,{unique:!1}),p.createObjectStore(qu,{keyPath:uD}).createIndex(QS,hD,{unique:!1})})(e)))),n<16&&a>=16&&(c=c.next((()=>{t.objectStore(Gu).clear()})).next((()=>{t.objectStore(qu).clear()}))),n<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(Uy,{keyPath:mD})})(e)}))),n<18&&a>=18&&zT()&&(c=c.next((()=>{t.objectStore(Gu).clear()})).next((()=>{t.objectStore(qu).clear()}))),c}pi(e){let t=0;return e.store(_o).ee(((n,a)=>{t+=Zf(a)})).next((()=>{const n={byteSize:t};return e.store(oh).put(U0,n)}))}gi(e){const t=e.store(ah),n=e.store(gs);return t.H().next((a=>z.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Io],[l.userId,l.lastAcknowledgedBatchId]);return n.H(Ao,c).next((d=>z.forEach(d,(p=>{Ce(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=Eo(this.serializer,p);return eN(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(oc),n=e.store(_o);return e.store(Co).get(qf).next((a=>{const l=[];return n.ee(((c,d)=>{const p=new ft(c),g=(function(x){return[0,Kn(x)]})(p);l.push(t.get(g).next((v=>v?z.resolve():(x=>t.put({targetId:0,path:Kn(x),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>z.waitFor(l)))}))}wi(e,t){e.createObjectStore(lh,{keyPath:nD});const n=t.store(lh),a=new Zy,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return n.put({collectionId:d,parent:Kn(p)})}};return t.store(_o).ee({Y:!0},((c,d)=>{const p=new ft(c);return l(p.popLast())})).next((()=>t.store(ic).ee({Y:!0},(([c,d,p],g)=>{const v=zs(d);return l(v.popLast())}))))}bi(e){const t=e.store(ac);return t.ee(((n,a)=>{const l=Vu(a),c=Y2(this.serializer,l);return t.put(c)}))}Si(e,t){const n=t.store(_o),a=[];return n.ee(((l,c)=>{const d=t.store(Gf),p=(function(x){return x.document?new ye(ft.fromString(x.document.name).popFirst(5)):x.noDocument?ye.fromSegments(x.noDocument.path):x.unknownDocument?ye.fromSegments(x.unknownDocument.path):_e(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>z.waitFor(a)))}Di(e,t){const n=t.store(gs),a=oN(this.serializer),l=new tv(Cp.Vi,this.serializer.yt);return n.H().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??He();Eo(this.serializer,p).keys().forEach((v=>g=g.add(v))),d.set(p.userId,g)})),z.forEach(d,((p,g)=>{const v=new Fn(g),x=Ap.wt(this.serializer,v),E=l.getIndexManager(v),A=Ip.wt(v,this.serializer,E,l.referenceDelegate);return new lN(a,A,x,E).recalculateAndSaveOverlaysForDocumentKeys(new F0(t,gr.ce),p).next()}))}))}}function oE(s){s.createObjectStore(oc,{keyPath:eD}).createIndex(Vy,tD,{unique:!0}),s.createObjectStore(ac,{keyPath:"targetId"}).createIndex($S,Z4,{unique:!0}),s.createObjectStore(Co)}const pa="IndexedDbPersistence",d0=18e5,f0=5e3,p0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Vj="main";class nv{constructor(e,t,n,a,l,c,d,p,g,v,x=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=v,this.xi=x,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=E=>Promise.resolve(),!nv.v())throw new he(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tj(this,a),this.Ki=t+Vj,this.serializer=new Q2(p),this.qi=new Da(this.Ki,this.xi,new Mj(this.serializer)),this.ci=new fj,this.li=new _j(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oN(this.serializer),this.Pi=new dj,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&ln(pa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(Z.FAILED_PRECONDITION,p0);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new gr(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>af(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(za(e))return oe(pa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe(pa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Nu(e).get(Ml).next((t=>z.resolve(this.Xi(t))))}Yi(e){return af(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,d0)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=En(t,lc);return n.H().next((a=>{const l=this.ns(a,d0),c=a.filter((d=>l.indexOf(d)===-1));return z.forEach(c,(d=>n.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?z.resolve(!0):Nu(e).get(Ml).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,f0)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new he(Z.FAILED_PRECONDITION,p0);return!1}}return!(!this.networkEnabled||!this.inForeground)||af(e).H().next((n=>this.ns(n,f0).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&oe(pa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Ah,lc],(e=>{const t=new F0(e,gr.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((n=>this.ts(n.updateTimeMs,t)&&!this.ss(n.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>af(e).H().next((t=>this.ns(t,d0).map((n=>n.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Ip.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xj(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ap.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,n){oe(pa,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?vD:p===17?ZS:p===16?yD:p===15?By:p===14?WS:p===13?JS:p===12?gD:p===11?XS:void _e(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new F0(d,this.ai?this.ai.next():gr.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new he(Z.FAILED_PRECONDITION,BS);return n(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>n(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return Nu(e).get(Ml).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,f0)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(Z.FAILED_PRECONDITION,p0)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nu(e).put(Ml,t)}static v(){return Da.v()}Ji(e){const t=Nu(e);return t.get(Ml).next((n=>this.Xi(n)?(oe(pa,"Releasing primary lease."),t.delete(Ml)):z.resolve()))}ts(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ln(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;BT()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const n=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return oe(pa,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ln(pa,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){ln("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nu(s){return En(s,Ah)}function af(s){return En(s,lc)}function cN(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t,n,a){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=a}static Es(e,t){let n=He(),a=He();for(const l of t.docChanges)switch(l.type){case 0:n=n.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new rv(e,t.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return BT()?8:FS(wn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,n).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Lj;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,n,a){return n.documentReadCount<this.Vs?(Gl()<=We.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(Gl()<=We.DEBUG&&oe("QueryEngine","Query:",ql(t),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.ds*a?(Gl()<=We.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(t))):z.resolve())}gs(e,t){if(k1(t))return z.resolve(null);let n=Or(t);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Y0(t,null,"F"),n=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((l=>{const c=He(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,n).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,Y0(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,n,a){return k1(t)||a.isEqual(je.min())?z.resolve(null):this.fs.getDocuments(e,n).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,n,a)?z.resolve(null):(Gl()<=We.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ql(t)),this.Ds(e,c,t,LS(a,sc)).next((d=>d)))}))}bs(e,t){let n=new _t(_2(e));return t.forEach(((a,l)=>{kh(e,l)&&(n=n.add(l))})),n}Ss(e,t,n,a){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,n){return Gl()<=We.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ql(t)),this.fs.getDocumentsMatchingQuery(e,t,Pr.min(),n)}Ds(e,t,n,a){return this.fs.getDocumentsMatchingQuery(e,n,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="LocalStore",Uj=3e8;class Bj{constructor(e,t,n,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new kt(Ve),this.Fs=new Ni((l=>Uo(l)),Ih),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function hN(s,e,t,n){return new Bj(s,e,t,n)}async function dN(s,e){const t=Ne(s);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return t.mutationQueue.getAllMutationBatches(n).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(n)))).next((l=>{const c=[],d=[];let p=He();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(n,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function zj(s,e){const t=Ne(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const x=g.batch,E=x.keys();let A=z.resolve();return E.forEach((O=>{A=A.next((()=>v.getEntry(p,O))).next((G=>{const J=g.docVersions.get(O);Ce(J!==null,48541),G.version.compareTo(J)<0&&(x.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),v.addEntry(G)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(p,x)))})(t,n,e,l).next((()=>l.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(d){let p=He();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(n,a)))}))}function fN(s){const e=Ne(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function Fj(s,e){const t=Ne(s),n=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,x)=>{const E=a.get(x);if(!E)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,x).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,x))));let A=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?A=A.withResumeToken(cn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,n)),a=a.insert(x,A),(function(G,J,ie){return G.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=Uj?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(E,A,v)&&d.push(t.li.updateTargetData(l,A))}));let p=Dr(),g=He();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(Gj(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!n.isEqual(je.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((x=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,n)));d.push(v)}return z.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function Gj(s,e,t){let n=He(),a=He();return t.forEach((l=>n=n.add(l))),e.getEntries(s,n).next((l=>{let c=Dr();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(je.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):oe(sv,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function qj(s,e){const t=Ne(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=Io),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function tp(s,e){const t=Ne(s);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return t.li.getTargetData(n,e).next((l=>l?(a=l,z.resolve(a)):t.li.allocateTargetId(n).next((c=>(a=new vi(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.li.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=t.vs.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(n.targetId,n),t.Fs.set(e,n.targetId)),n}))}async function gc(s,e,t){const n=Ne(s),a=n.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",l,(c=>n.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!za(c))throw c;oe(sv,`Failed to update sequence numbers for target ${e}: ${c}`)}n.vs=n.vs.remove(e),n.Fs.delete(a.target)}function ry(s,e,t){const n=Ne(s);let a=je.min(),l=He();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const x=Ne(p),E=x.Fs.get(v);return E!==void 0?z.resolve(x.vs.get(E)):x.li.getTargetData(g,v)})(n,c,Or(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>n.Cs.getDocumentsMatchingQuery(c,e,t?a:je.min(),t?l:He()))).next((d=>(gN(n,x2(e),d),{documents:d,ks:l})))))}function pN(s,e){const t=Ne(s),n=Ne(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>n.At(l,e).next((c=>c?c.target:null))))}function mN(s,e){const t=Ne(s),n=t.Ms.get(e)||je.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,LS(n,sc),Number.MAX_SAFE_INTEGER))).then((a=>(gN(t,e,a),a)))}function gN(s,e,t){let n=s.Ms.get(e)||je.min();t.forEach(((a,l)=>{l.readTime.compareTo(n)>0&&(n=l.readTime)})),s.Ms.set(e,n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="firestore_clients";function lE(s,e){return`${yN}_${s}_${e}`}const vN="firestore_mutations";function cE(s,e,t){let n=`${vN}_${s}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const bN="firestore_targets";function m0(s,e){return`${bN}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="SharedClientState";class np{constructor(e,t,n,a){this.user=e,this.batchId=t,this.state=n,this.error=a}static $s(e,t,n){const a=JSON.parse(n);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new he(a.error.code,a.error.message))),c?new np(e,t,a.state,l):(ln(Bs,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yu{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let a,l=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return l&&n.error&&(l=typeof n.error.message=="string"&&typeof n.error.code=="string",l&&(a=new he(n.error.code,n.error.message))),l?new Yu(e,n.state,a):(ln(Bs,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,l=Hy();for(let c=0;a&&c<n.activeTargetIds.length;++c)a=GS(n.activeTargetIds[c]),l=l.add(n.activeTargetIds[c]);return a?new rp(e,l):(ln(Bs,`Failed to parse client data for instance '${e}': ${t}`),null)}}class iv{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new iv(t.clientId,t.onlineState):(ln(Bs,`Failed to parse online state: ${e}`),null)}}class sy{constructor(){this.activeTargetIds=Hy()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g0{constructor(e,t,n,a,l){this.window=e,this.Ci=t,this.persistenceKey=n,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new kt(Ve),this.started=!1,this.Zs=[];const c=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=lE(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new sy),this.eo=new RegExp(`^${yN}_${c}_([^_]*)$`),this.no=new RegExp(`^${vN}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${bN}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const n of e){if(n===this.zs)continue;const a=this.getItem(lE(this.persistenceKey,n));if(a){const l=rp.$s(n,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const n=this._o(t);n&&this.ao(n)}for(const n of this.Zs)this.Hs(n);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,n){this.co(e,t,n),this.lo(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(m0(this.persistenceKey,e));if(a){const l=Yu.$s(e,a);l&&(n=l.state)}}return t&&this.ho.Qs(e),this.oo(),n}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(m0(this.persistenceKey,e))}updateQueryState(e,t,n){this.Po(e,t,n)}handleUserChange(e,t,n){t.forEach((a=>{this.lo(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe(Bs,"READ",e,t),t}setItem(e,t){oe(Bs,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe(Bs,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(oe(Bs,"EVENT",t.key,t.newValue),t.key===this.Xs)return void ln("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const n=this.Eo(t.key);return this.Ro(n,null)}{const n=this.Ao(t.key,t.newValue);if(n)return this.Ro(n.clientId,n)}}else if(this.no.test(t.key)){if(t.newValue!==null){const n=this.Vo(t.key,t.newValue);if(n)return this.mo(n)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const n=this.fo(t.key,t.newValue);if(n)return this.po(n)}}else if(t.key===this.io){if(t.newValue!==null){const n=this._o(t.newValue);if(n)return this.ao(n)}}else if(t.key===this.Ys){const n=(function(l){let c=gr.ce;if(l!=null)try{const d=JSON.parse(l);Ce(typeof d=="number",30636,{yo:l}),c=d}catch(d){ln(Bs,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);n!==gr.ce&&this.sequenceNumberHandler(n)}else if(t.key===this.so){const n=this.wo(t.newValue);await Promise.all(n.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,n){const a=new np(this.currentUser,e,t,n),l=cE(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=cE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,n){const a=m0(this.persistenceKey,e),l=new Yu(e,t,n);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const n=this.Eo(e);return rp.$s(n,t)}Vo(e,t){const n=this.no.exec(e),a=Number(n[1]),l=n[2]!==void 0?n[2]:null;return np.$s(new Fn(l),a,t)}fo(e,t){const n=this.ro.exec(e),a=Number(n[1]);return Yu.$s(a,t)}_o(e){return iv.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);oe(Bs,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const n=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(n),c=[],d=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||d.push(p)})),this.syncEngine.Co(c,d).then((()=>{this.Js=n}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=Hy();return e.forEach(((n,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class xN{constructor(){this.vo=new sy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new sy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="ConnectivityMonitor";class hE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){oe(uE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){oe(uE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=null;function iy(){return of===null?of=(function(){return 268435456+Math.round(2147483648*Math.random())})():of++,"0x"+of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="RestConnection",$j={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Kj{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${n}/databases/${a}`,this.$o=this.databaseId.database===Hf?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Wo(e,t,n,a,l){const c=iy(),d=this.Qo(e,t.toUriEncodedString());oe(y0,`Sending RPC '${e}' ${c}:`,d,n);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=_c(g);return this.zo(e,d,p,n,v).then((x=>(oe(y0,`Received RPC '${e}' ${c}: `,x),x)),(x=>{throw nc(y0,`RPC '${e}' ${c} failed with error: `,x,"url: ",d,"request:",n),x}))}jo(e,t,n,a,l,c){return this.Wo(e,t,n,a,l)}Go(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),n&&n.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const n=$j[e];let a=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="WebChannelConnection",Au=(s,e,t)=>{s.listen(e,(n=>{try{t(n)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Zl extends Kj{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Zl.c_){const e=DS();Au(e,kS.STAT_EVENT,(t=>{t.stat===M0.PROXY?oe(zn,"STAT_EVENT: detected buffering proxy"):t.stat===M0.NOPROXY&&oe(zn,"STAT_EVENT: detected no buffering proxy")})),Zl.c_=!0}}zo(e,t,n,a,l){const c=iy();return new Promise(((d,p)=>{const g=new CS;g.setWithCredentials(!0),g.listenOnce(RS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case vf.NO_ERROR:const x=g.getResponseJson();oe(zn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),d(x);break;case vf.TIMEOUT:oe(zn,`RPC '${e}' ${c} timed out`),p(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const E=g.getStatus();if(oe(zn,`RPC '${e}' ${c} failed with status:`,E,"response text:",g.getResponseText()),E>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const O=A==null?void 0:A.error;if(O&&O.status&&O.message){const G=(function(ie){const ce=ie.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ce)>=0?ce:Z.UNKNOWN})(O.status);p(new he(G,O.message))}else p(new he(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(Z.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{oe(zn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);oe(zn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,n,15)}))}T_(e,t,n){const a=iy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=l.join("");oe(zn,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let x=!1,E=!1;const A=new Qj({Ho:O=>{E?oe(zn,`Not sending because RPC '${e}' stream ${a} is closed:`,O):(x||(oe(zn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),x=!0),oe(zn,`RPC '${e}' stream ${a} sending:`,O),v.send(O))},Jo:()=>v.close()});return Au(v,Ou.EventType.OPEN,(()=>{E||(oe(zn,`RPC '${e}' stream ${a} transport opened.`),A.i_())})),Au(v,Ou.EventType.CLOSE,(()=>{E||(E=!0,oe(zn,`RPC '${e}' stream ${a} transport closed`),A.o_(),this.E_(v))})),Au(v,Ou.EventType.ERROR,(O=>{E||(E=!0,nc(zn,`RPC '${e}' stream ${a} transport errored. Name:`,O.name,"Message:",O.message),A.o_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),Au(v,Ou.EventType.MESSAGE,(O=>{var G;if(!E){const J=O.data[0];Ce(!!J,16349);const ie=J,ce=(ie==null?void 0:ie.error)||((G=ie[0])==null?void 0:G.error);if(ce){oe(zn,`RPC '${e}' stream ${a} received error:`,ce);const le=ce.status;let ge=(function(C){const I=gn[C];if(I!==void 0)return j2(I)})(le),Ee=ce.message;le==="NOT_FOUND"&&Ee.includes("database")&&Ee.includes("does not exist")&&Ee.includes(this.databaseId.database)&&nc(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ge===void 0&&(ge=Z.INTERNAL,Ee="Unknown error status: "+le+" with message "+ce.message),E=!0,A.o_(new he(ge,Ee)),v.close()}else oe(zn,`RPC '${e}' stream ${a} received:`,J),A.__(J)}})),Zl.u_(),setTimeout((()=>{A.s_()}),0),A}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jS()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(s){return new Zl(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(){return typeof window<"u"?window:null}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(s){return new tj(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zl.c_=!1;class wN{constructor(e,t,n=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-n);a>0&&oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="PersistentStream";class EN{constructor(e,t,n,a,l,c,d,p){this.Ci=e,this.b_=n,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(ln(t.toString()),ln("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.D_===t&&this.G_(n,a)}),(n=>{e((()=>{const a=new he(Z.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)}))}))}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{n((()=>this.z_(a)))})),this.stream.onMessage((a=>{n((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(dE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(oe(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Xj extends EN{constructor(e,t,n,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=sj(this.serializer,e),n=(function(l){if(!("targetChange"in l))return je.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?je.min():c.readTime?nr(c.readTime):je.min()})(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=W0(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Kf(p)?{documents:z2(l,p)}:{query:F2(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=M2(l,c.resumeToken);const g=X0(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(je.min())>0){d.readTime=mc(l,c.snapshotVersion.toTimestamp());const g=X0(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const n=aj(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=W0(this.serializer),t.removeTarget=e,this.K_(t)}}class Jj extends EN{constructor(e,t,n,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ij(e.writeResults,e.commitTime),n=nr(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=W0(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Xf(this.serializer,n)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{}class Zj extends Wj{constructor(e,t,n,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,J0(t,n),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(Z.UNKNOWN,l.toString())}))}jo(e,t,n,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,J0(t,n),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(Z.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function eO(s,e,t,n){return new Zj(s,e,t,n)}class tO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ln(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class nO{constructor(e,t,n,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{n.enqueueAndForget((async()=>{Yo(this)&&(oe(Go,"Restarting streams for network reachability change."),await(async function(p){const g=Ne(p);g.Ea.add(4),await Oh(g),g.Va.set("Unknown"),g.Ea.delete(4),await kp(g)})(this))}))})),this.Va=new tO(n,a)}}async function kp(s){if(Yo(s))for(const e of s.Ra)await e(!0)}async function Oh(s){for(const e of s.Ra)await e(!1)}function Dp(s,e){const t=Ne(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),lv(t)?ov(t):Ac(t).O_()&&av(t,e))}function yc(s,e){const t=Ne(s),n=Ac(t);t.Ia.delete(e),n.O_()&&TN(t,e),t.Ia.size===0&&(n.O_()?n.L_():Yo(t)&&t.Va.set("Unknown"))}function av(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ac(s).Z_(e)}function TN(s,e){s.da.$e(e),Ac(s).X_(e)}function ov(s){s.da=new JD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ac(s).start(),s.Va.ua()}function lv(s){return Yo(s)&&!Ac(s).x_()&&s.Ia.size>0}function Yo(s){return Ne(s).Ea.size===0}function SN(s){s.da=void 0}async function rO(s){s.Va.set("Online")}async function sO(s){s.Ia.forEach(((e,t)=>{av(s,e)}))}async function iO(s,e){SN(s),lv(s)?(s.Va.ha(e),ov(s)):s.Va.set("Unknown")}async function aO(s,e,t){if(s.Va.set("Online"),e instanceof P2&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(s,e)}catch(n){oe(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await sp(s,n)}else if(e instanceof Nf?s.da.Xe(e):e instanceof O2?s.da.st(e):s.da.tt(e),!t.isEqual(je.min()))try{const n=await fN(s.localStore);t.compareTo(n)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(cn.EMPTY_BYTE_STRING,v.snapshotVersion)),TN(l,p);const x=new vi(v.target,p,g,v.sequenceNumber);av(l,x)})),l.remoteSyncer.applyRemoteEvent(d)})(s,t)}catch(n){oe(Go,"Failed to raise snapshot:",n),await sp(s,n)}}async function sp(s,e,t){if(!za(e))throw e;s.Ea.add(1),await Oh(s),s.Va.set("Offline"),t||(t=()=>fN(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{oe(Go,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await kp(s)}))}function NN(s,e){return e().catch((t=>sp(s,t,e)))}async function Nc(s){const e=Ne(s),t=Ma(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Io;for(;oO(e);)try{const a=await qj(e.localStore,n);if(a===null){e.Ta.length===0&&t.L_();break}n=a.batchId,lO(e,a)}catch(a){await sp(e,a)}AN(e)&&IN(e)}function oO(s){return Yo(s)&&s.Ta.length<10}function lO(s,e){s.Ta.push(e);const t=Ma(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function AN(s){return Yo(s)&&!Ma(s).x_()&&s.Ta.length>0}function IN(s){Ma(s).start()}async function cO(s){Ma(s).ra()}async function uO(s){const e=Ma(s);for(const t of s.Ta)e.ea(t.mutations)}async function hO(s,e,t){const n=s.Ta.shift(),a=Qy.from(n,e,t);await NN(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Nc(s)}async function dO(s,e){e&&Ma(s).Y_&&await(async function(n,a){if((function(c){return QD(c)&&c!==Z.ABORTED})(a.code)){const l=n.Ta.shift();Ma(n).B_(),await NN(n,(()=>n.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Nc(n)}})(s,e),AN(s)&&IN(s)}async function fE(s,e){const t=Ne(s);t.asyncQueue.verifyOperationInProgress(),oe(Go,"RemoteStore received new credentials");const n=Yo(t);t.Ea.add(3),await Oh(t),n&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kp(t)}async function ay(s,e){const t=Ne(s);e?(t.Ea.delete(2),await kp(t)):e||(t.Ea.add(2),await Oh(t),t.Va.set("Unknown"))}function Ac(s){return s.ma||(s.ma=(function(t,n,a){const l=Ne(t);return l.sa(),new Xj(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:rO.bind(null,s),Yo:sO.bind(null,s),t_:iO.bind(null,s),J_:aO.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),lv(s)?ov(s):s.Va.set("Unknown")):(await s.ma.stop(),SN(s))}))),s.ma}function Ma(s){return s.fa||(s.fa=(function(t,n,a){const l=Ne(t);return l.sa(),new Jj(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:cO.bind(null,s),t_:dO.bind(null,s),ta:uO.bind(null,s),na:hO.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Nc(s)):(await s.fa.stop(),s.Ta.length>0&&(oe(Go,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,n,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=a,this.removalCallback=l,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,a,l){const c=Date.now()+n,d=new cv(e,t,c,a,l);return d.start(n),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uv(s,e){if(ln("AsyncQueue",`${e}: ${s}`),za(s))return new he(Z.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ye.comparator(t.key,n.key):(t,n)=>ye.comparator(t.key,n.key),this.keyedMap=Pu(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=n.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ec;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.ga=new kt(ye.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class vc{constructor(e,t,n,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,n,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new vc(e,t,ec.emptySet(t),c,n,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==n[a].type||!t[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class pO{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const a=Ne(t),l=a.queries;a.queries=mE(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(n)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function mE(){return new Ni((s=>b2(s)),Ep)}async function hv(s,e){const t=Ne(s);let n=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(n=2):(l=new fO,n=e.Da()?0:1);try{switch(n){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=uv(c,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&fv(t)}async function dv(s,e){const t=Ne(s),n=e.query;let a=3;const l=t.queries.get(n);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function mO(s,e){const t=Ne(s);let n=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(n=!0);c.wa=a}}n&&fv(t)}function gO(s,e,t){const n=Ne(s),a=n.queries.get(e);if(a)for(const l of a.ba)l.onError(t);n.queries.delete(e)}function fv(s){s.Ca.forEach((e=>{e.next()}))}var oy,gE;(gE=oy||(oy={})).Ma="default",gE.Cache="cache";class pv{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new vc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==oy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.key=e}}class RN{constructor(e){this.key=e}}class yO{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=He(),this.mutatedKeys=He(),this.eu=_2(e),this.tu=new ec(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new pE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,x)=>{const E=a.get(v),A=kh(this.query,x)?x:null,O=!!E&&this.mutatedKeys.has(E.key),G=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let J=!1;E&&A?E.data.isEqual(A.data)?O!==G&&(n.track({type:3,doc:A}),J=!0):this.su(E,A)||(n.track({type:2,doc:A}),J=!0,(p&&this.eu(A,p)>0||g&&this.eu(A,g)<0)&&(d=!0)):!E&&A?(n.track({type:0,doc:A}),J=!0):E&&!A&&(n.track({type:1,doc:E}),J=!0,(p||g)&&(d=!0)),J&&(A?(c=c.add(A),l=G?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),n.track({type:1,doc:v})}return{tu:c,iu:n,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,x)=>(function(A,O){const G=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:J})}};return G(A)-G(O)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(n),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new vc(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=He(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const t=[];return e.forEach((n=>{this.Ya.has(n)||t.push(new RN(n))})),this.Ya.forEach((n=>{e.has(n)||t.push(new CN(n))})),t}cu(e){this.Za=e.ks,this.Ya=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return vc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ic="SyncEngine";class vO{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class bO{constructor(e){this.key=e,this.hu=!1}}class xO{constructor(e,t,n,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ni((d=>b2(d)),Ep),this.Iu=new Map,this.Eu=new Set,this.Ru=new kt(ye.comparator),this.Au=new Map,this.Vu=new ev,this.du={},this.mu=new Map,this.fu=Fo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _O(s,e,t=!0){const n=jp(s);let a;const l=n.Tu.get(e);return l?(n.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await kN(n,e,t,!0),a}async function wO(s,e){const t=jp(s);await kN(t,e,!0,!1)}async function kN(s,e,t,n){const a=await tp(s.localStore,Or(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return n&&(d=await mv(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&Dp(s.remoteStore,a),d}async function mv(s,e,t,n,a){s.pu=(x,E,A)=>(async function(G,J,ie,ce){let le=J.view.ru(ie);le.Ss&&(le=await ry(G.localStore,J.query,!1).then((({documents:C})=>J.view.ru(C,le))));const ge=ce&&ce.targetChanges.get(J.targetId),Ee=ce&&ce.targetMismatches.get(J.targetId)!=null,ve=J.view.applyChanges(le,G.isPrimaryClient,ge,Ee);return ly(G,J.targetId,ve.au),ve.snapshot})(s,x,E,A);const l=await ry(s.localStore,e,!0),c=new yO(e,l.ks),d=c.ru(l.documents),p=jh.createSynthesizedTargetChangeForCurrentChange(t,n&&s.onlineState!=="Offline",a),g=c.applyChanges(d,s.isPrimaryClient,p);ly(s,t,g.au);const v=new vO(e,t,c);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),g.snapshot}async function EO(s,e,t){const n=Ne(s),a=n.Tu.get(e),l=n.Iu.get(a.targetId);if(l.length>1)return n.Iu.set(a.targetId,l.filter((c=>!Ep(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await gc(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),t&&yc(n.remoteStore,a.targetId),bc(n,a.targetId)})).catch(Ba)):(bc(n,a.targetId),await gc(n.localStore,a.targetId,!0))}async function TO(s,e){const t=Ne(s),n=t.Tu.get(e),a=t.Iu.get(n.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),yc(t.remoteStore,n.targetId))}async function SO(s,e,t){const n=bv(s);try{const a=await(function(c,d){const p=Ne(c),g=bt.now(),v=d.reduce(((A,O)=>A.add(O.key)),He());let x,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let O=Dr(),G=He();return p.xs.getEntries(A,v).next((J=>{O=J,O.forEach(((ie,ce)=>{ce.isValidDocument()||(G=G.add(ie))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,O))).next((J=>{x=J;const ie=[];for(const ce of d){const le=$D(ce,x.get(ce.key).overlayedDocument);le!=null&&ie.push(new Ai(ce.key,le,c2(le.value.mapValue),$n.exists(!0)))}return p.mutationQueue.addMutationBatch(A,g,ie,d)})).next((J=>{E=J;const ie=J.applyToLocalDocumentSet(x,G);return p.documentOverlayCache.saveOverlays(A,J.batchId,ie)}))})).then((()=>({batchId:E.batchId,changes:E2(x)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new kt(Ve)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(n,a.batchId,t),await Ga(n,a.changes),await Nc(n.remoteStore)}catch(a){const l=uv(a,"Failed to persist write");t.reject(l)}}async function DN(s,e){const t=Ne(s);try{const n=await Fj(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Ce(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Ce(c.hu,14607):a.removedDocuments.size>0&&(Ce(c.hu,42227),c.hu=!1))})),await Ga(t,n,e)}catch(n){await Ba(n)}}function yE(s,e,t){const n=Ne(s);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const a=[];n.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Ne(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,x)=>{for(const E of x.ba)E.va(d)&&(g=!0)})),g&&fv(p)})(n.eventManager,e),a.length&&n.Pu.J_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function NO(s,e,t){const n=Ne(s);n.sharedClientState.updateQueryState(e,"rejected",t);const a=n.Au.get(e),l=a&&a.key;if(l){let c=new kt(ye.comparator);c=c.insert(l,en.newNoDocument(l,je.min()));const d=He().add(l),p=new Dh(je.min(),new Map,new kt(Ve),c,d);await DN(n,p),n.Ru=n.Ru.remove(l),n.Au.delete(e),vv(n)}else await gc(n.localStore,e,!1).then((()=>bc(n,e,t))).catch(Ba)}async function AO(s,e){const t=Ne(s),n=e.batch.batchId;try{const a=await zj(t.localStore,e);yv(t,n,null),gv(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Ga(t,a)}catch(a){await Ba(a)}}async function IO(s,e,t){const n=Ne(s);try{const a=await(function(c,d){const p=Ne(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((x=>(Ce(x!==null,37113),v=x.keys(),p.mutationQueue.removeMutationBatch(g,x)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(n.localStore,e);yv(n,e,t),gv(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Ga(n,a)}catch(a){await Ba(a)}}function gv(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function yv(s,e,t){const n=Ne(s);let a=n.du[n.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),n.du[n.currentUser.toKey()]=a}}function bc(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const n of s.Iu.get(e))s.Tu.delete(n),t&&s.Pu.yu(n,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((n=>{s.Vu.containsKey(n)||jN(s,n)}))}function jN(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(yc(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),vv(s))}function ly(s,e,t){for(const n of t)n instanceof CN?(s.Vu.addReference(n.key,e),CO(s,n)):n instanceof RN?(oe(Ic,"Document no longer in limbo: "+n.key),s.Vu.removeReference(n.key,e),s.Vu.containsKey(n.key)||jN(s,n.key)):_e(19791,{wu:n})}function CO(s,e){const t=e.key,n=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(n)||(oe(Ic,"New document in limbo: "+t),s.Eu.add(n),vv(s))}function vv(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ye(ft.fromString(e)),n=s.fu.next();s.Au.set(n,new bO(t)),s.Ru=s.Ru.insert(t,n),Dp(s.remoteStore,new vi(Or(Rh(t.path)),n,"TargetPurposeLimboResolution",gr.ce))}}async function Ga(s,e,t){const n=Ne(s),a=[],l=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((d,p)=>{c.push(n.pu(p,e,t).then((g=>{var v;if((g||t)&&n.isPrimaryClient){const x=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;n.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(g){a.push(g);const x=rv.Es(p.targetId,g);l.push(x)}})))})),await Promise.all(c),n.Pu.J_(a),await(async function(p,g){const v=Ne(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>z.forEach(g,(E=>z.forEach(E.Ts,(A=>v.persistence.referenceDelegate.addReference(x,E.targetId,A))).next((()=>z.forEach(E.Is,(A=>v.persistence.referenceDelegate.removeReference(x,E.targetId,A)))))))))}catch(x){if(!za(x))throw x;oe(sv,"Failed to update sequence numbers: "+x)}for(const x of g){const E=x.targetId;if(!x.fromCache){const A=v.vs.get(E),O=A.snapshotVersion,G=A.withLastLimboFreeSnapshotVersion(O);v.vs=v.vs.insert(E,G)}}})(n.localStore,l))}async function RO(s,e){const t=Ne(s);if(!t.currentUser.isEqual(e)){oe(Ic,"User change. New user:",e.toKey());const n=await dN(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new he(Z.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ga(t,n.Ns)}}function kO(s,e){const t=Ne(s),n=t.Au.get(e);if(n&&n.hu)return He().add(n.key);{let a=He();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function DO(s,e){const t=Ne(s),n=await ry(t.localStore,e.query,!0),a=e.view.cu(n);return t.isPrimaryClient&&ly(t,e.targetId,a.au),a}async function jO(s,e){const t=Ne(s);return mN(t.localStore,e).then((n=>Ga(t,n)))}async function OO(s,e,t,n){const a=Ne(s),l=await(function(d,p){const g=Ne(d),v=Ne(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(x=>v.Xn(x,p).next((E=>E?g.localDocuments.getDocuments(x,E):z.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Nc(a.remoteStore):t==="acknowledged"||t==="rejected"?(yv(a,e,n||null),gv(a,e),(function(d,p){Ne(Ne(d).mutationQueue).nr(p)})(a.localStore,e)):_e(6720,"Unknown batchState",{bu:t}),await Ga(a,l)):oe(Ic,"Cannot apply mutation batch with id: "+e)}async function PO(s,e){const t=Ne(s);if(jp(t),bv(t),e===!0&&t.gu!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),a=await vE(t,n.toArray());t.gu=!0,await ay(t.remoteStore,!0);for(const l of a)Dp(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const n=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?n.push(c):a=a.then((()=>(bc(t,c),gc(t.localStore,c,!0)))),yc(t.remoteStore,c)})),await a,await vE(t,n),(function(c){const d=Ne(c);d.Au.forEach(((p,g)=>{yc(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new kt(ye.comparator)})(t),t.gu=!1,await ay(t.remoteStore,!1)}}async function vE(s,e,t){const n=Ne(s),a=[],l=[];for(const c of e){let d;const p=n.Iu.get(c);if(p&&p.length!==0){d=await tp(n.localStore,Or(p[0]));for(const g of p){const v=n.Tu.get(g),x=await DO(n,v);x.snapshot&&l.push(x.snapshot)}}else{const g=await pN(n.localStore,c);d=await tp(n.localStore,g),await mv(n,ON(g),c,!1,d.resumeToken)}a.push(d)}return n.Pu.J_(l),a}function ON(s){return y2(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function MO(s){return(function(t){return Ne(Ne(t).persistence).hs()})(Ne(s).localStore)}async function VO(s,e,t,n){const a=Ne(s);if(a.gu)return void oe(Ic,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await mN(a.localStore,x2(l[0])),d=Dh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",cn.EMPTY_BYTE_STRING);await Ga(a,c,d);break}case"rejected":await gc(a.localStore,e,!0),bc(a,e,n);break;default:_e(64155,t)}}async function LO(s,e,t){const n=jp(s);if(n.gu){for(const a of e){if(n.Iu.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){oe(Ic,"Adding an already active target "+a);continue}const l=await pN(n.localStore,a),c=await tp(n.localStore,l);await mv(n,ON(l),c.targetId,!1,c.resumeToken),Dp(n.remoteStore,c)}for(const a of t)n.Iu.has(a)&&await gc(n.localStore,a,!1).then((()=>{yc(n.remoteStore,a),bc(n,a)})).catch(Ba)}}function jp(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=DN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NO.bind(null,e),e.Pu.J_=mO.bind(null,e.eventManager),e.Pu.yu=gO.bind(null,e.eventManager),e}function bv(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IO.bind(null,e),e}class mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hN(this.persistence,new uN,e.initialUser,this.serializer)}Cu(e){return new tv(Cp.Vi,this.serializer)}Du(e){return new xN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mh.provider={build:()=>new mh};class UO extends mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof ep,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new sN(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new tv((n=>ep.Vi(n,t)),this.serializer)}}class PN extends mh{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await bv(this.xu.syncEngine),await Nc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return hN(this.persistence,new uN,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new sN(n,e.asyncQueue,t)}Mu(e,t){const n=new $4(t,this.persistence);return new H4(e.asyncQueue,n)}Cu(e){const t=cN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new nv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,_N(),If(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new xN}}class BO extends PN{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof g0&&(this.sharedClientState.syncEngine={So:OO.bind(null,t),Do:VO.bind(null,t),Co:LO.bind(null,t),hs:MO.bind(null,t),bo:jO.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async n=>{await PO(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Du(e){const t=_N();if(!g0.v(t))throw new he(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=cN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new g0(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class gh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>yE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=RO.bind(null,this.syncEngine),await ay(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pO})()}createDatastore(e){const t=Rp(e.databaseInfo.databaseId),n=Yj(e.databaseInfo);return eO(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,a,l,c,d){return new nO(n,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>yE(this.syncEngine,t,0)),(function(){return hE.v()?new hE:new Hj})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const x=new xO(a,l,c,d,p,g);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ne(a);oe(Go,"RemoteStore shutting down."),l.Ea.add(5),await Oh(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}gh.provider={build:()=>new gh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ln("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="FirestoreClient";class zO{constructor(e,t,n,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=a,this.user=Fn.UNAUTHENTICATED,this.clientId=Oy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(n,(async c=>{oe(Va,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(oe(Va,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=uv(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function v0(s,e){s.asyncQueue.verifyOperationInProgress(),oe(Va,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let n=t.initialUser;s.setCredentialChangeListener((async a=>{n.isEqual(a)||(await dN(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function bE(s,e){s.asyncQueue.verifyOperationInProgress();const t=await FO(s);oe(Va,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((n=>fE(e.remoteStore,n))),s.setAppCheckTokenChangeListener(((n,a)=>fE(e.remoteStore,a))),s._onlineComponents=e}async function FO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){oe(Va,"Using user provided OfflineComponentProvider");try{await v0(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;nc("Error using user provided cache. Falling back to memory cache: "+t),await v0(s,new mh)}}else oe(Va,"Using default OfflineComponentProvider"),await v0(s,new UO(void 0));return s._offlineComponents}async function MN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(oe(Va,"Using user provided OnlineComponentProvider"),await bE(s,s._uninitializedComponentsProvider._online)):(oe(Va,"Using default OnlineComponentProvider"),await bE(s,new gh))),s._onlineComponents}function GO(s){return MN(s).then((e=>e.syncEngine))}async function ip(s){const e=await MN(s),t=e.eventManager;return t.onListen=_O.bind(null,e.syncEngine),t.onUnlisten=EO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TO.bind(null,e.syncEngine),t}function qO(s,e,t,n){const a=new xv(n),l=new pv(e,a,t);return s.asyncQueue.enqueueAndForget((async()=>hv(await ip(s),l))),()=>{a.Nu(),s.asyncQueue.enqueueAndForget((async()=>dv(await ip(s),l)))}}function HO(s,e,t={}){const n=new Hs;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new xv({next:E=>{v.Nu(),c.enqueueAndForget((()=>dv(l,x)));const A=E.docs.has(d);!A&&E.fromCache?g.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&p&&p.source==="server"?g.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(E)},error:E=>g.reject(E)}),x=new pv(Rh(d.path),v,{includeMetadataChanges:!0,Ka:!0});return hv(l,x)})(await ip(s),s.asyncQueue,e,t,n))),n.promise}function $O(s,e,t={}){const n=new Hs;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new xv({next:E=>{v.Nu(),c.enqueueAndForget((()=>dv(l,x))),E.fromCache&&p.source==="server"?g.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(E)},error:E=>g.reject(E)}),x=new pv(d,v,{includeMetadataChanges:!0,Ka:!0});return hv(l,x)})(await ip(s),s.asyncQueue,e,t,n))),n.promise}function KO(s,e){const t=new Hs;return s.asyncQueue.enqueueAndForget((async()=>SO(await GO(s),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="ComponentProvider",xE=new Map;function YO(s,e,t,n,a){return new xD(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,VN(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="firestore.googleapis.com",_E=!0;class wE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XO,this.ssl=_E}else this.host=e.host,this.ssl=e.ssl??_E;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Z2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rN)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VN(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _v{constructor(e,t,n,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new j4;switch(n.type){case"firstParty":return new M4(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=xE.get(t);n&&(oe(QO,"Removing Datastore"),xE.delete(t),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xo(this.firestore,e,this._query)}}class tn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}toJSON(){return{type:tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Nh(t,tn._jsonSchema))return new tn(e,n||null,new ye(ft.fromString(t.referencePath)))}}tn._jsonSchemaVersion="firestore/documentReference/1.0",tn._jsonSchema={type:vn("string",tn._jsonSchemaVersion),referencePath:vn("string")};class ja extends Xo{constructor(e,t,n){super(e,t,Rh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new ye(e))}withConverter(e){return new ja(this.firestore,e,this._path)}}function xs(s,e,...t){if(s=Nn(s),MS("collection","path",e),s instanceof _v){const n=ft.fromString(e,...t);return d1(n),new ja(s,null,n)}{if(!(s instanceof tn||s instanceof ja))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(ft.fromString(e,...t));return d1(n),new ja(s.firestore,null,n)}}function Mr(s,e,...t){if(s=Nn(s),arguments.length===1&&(e=Oy.newId()),MS("doc","path",e),s instanceof _v){const n=ft.fromString(e,...t);return h1(n),new tn(s,null,new ye(n))}{if(!(s instanceof tn||s instanceof ja))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(ft.fromString(e,...t));return h1(n),new tn(s.firestore,s instanceof ja?s.converter:null,new ye(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="AsyncQueue";class TE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wN(this,"async_queue_retry"),this._c=()=>{const n=If();n&&oe(EE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Hs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!za(e))throw e;oe(EE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,ln("INTERNAL UNHANDLED ERROR: ",SE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=cv.createAndSchedule(this,e,t,n,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&_e(47125,{Pc:SE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function SE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ti extends _v{constructor(e,t,n,a){super(e,t,n,a),this.type="firestore",this._queue=new TE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}}function JO(s,e,t){t||(t=Hf);const n=Ty(s,"firestore");if(n.isInitialized(t)){const a=n.getImmediate({identifier:t}),l=n.getOptions(t);if(jo(l,e))return a;throw new he(Z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(Z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rN)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&_c(e.host)&&LT(e.host),n.initialize({options:e,instanceIdentifier:t})}function Op(s){if(s._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||WO(s),s._firestoreClient}function WO(s){var n,a,l,c;const e=s._freezeSettings(),t=YO(s._databaseId,((n=s._app)==null?void 0:n.options.appId)||"",s._persistenceKey,(a=s._app)==null?void 0:a.options.apiKey,e);s._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new zO(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(cn.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rs(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nh(e,rs._jsonSchema))return rs.fromBase64String(e.bytes)}}rs._jsonSchemaVersion="firestore/bytes/1.0",rs._jsonSchema={type:vn("string",rs._jsonSchemaVersion),bytes:vn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$s._jsonSchemaVersion}}static fromJSON(e){if(Nh(e,$s._jsonSchema))return new $s(e.latitude,e.longitude)}}$s._jsonSchemaVersion="firestore/geoPoint/1.0",$s._jsonSchema={type:vn("string",$s._jsonSchemaVersion),latitude:vn("number"),longitude:vn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let l=0;l<n.length;++l)if(n[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nh(e,vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vs(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vs._jsonSchemaVersion="firestore/vectorValue/1.0",vs._jsonSchema={type:vn("string",vs._jsonSchemaVersion),vectorValues:vn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=/^__.*__$/;class eP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sc(e,this.data,t,this.fieldTransforms)}}class LN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{dataSource:s})}}class Tv{constructor(e,t,n,a,l,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ap(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(UN(this.dataSource)&&ZO.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class tP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Rp(e)}createContext(e,t,n,a=!1){return new Tv({dataSource:e,methodName:t,targetDoc:n,path:qt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pp(s){const e=s._freezeSettings(),t=Rp(s._databaseId);return new tP(s._databaseId,!!e.ignoreUndefinedProperties,t)}function BN(s,e,t,n,a,l={}){const c=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);Sv("Data must be an object, but it was:",c,n);const d=zN(n,c);let p,g;if(l.merge)p=new yr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const x of l.mergeFields){const E=xc(e,x,t);if(!c.contains(E))throw new he(Z.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);qN(v,E)||v.push(E)}p=new yr(v),g=c.fieldTransforms.filter((x=>p.covers(x.field)))}else p=null,g=c.fieldTransforms;return new eP(new Hn(d),p,g)}class Mp extends Ev{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}function nP(s,e,t,n){const a=s.createContext(1,e,t);Sv("Data must be an object, but it was:",a,n);const l=[],c=Hn.empty();Fa(n,((p,g)=>{const v=GN(e,p,t);g=Nn(g);const x=a.childContextForFieldPath(v);if(g instanceof Mp)l.push(v);else{const E=Ph(g,x);E!=null&&(l.push(v),c.set(v,E))}}));const d=new yr(l);return new LN(c,d,a.fieldTransforms)}function rP(s,e,t,n,a,l){const c=s.createContext(1,e,t),d=[xc(e,n,t)],p=[a];if(l.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(xc(e,l[E])),p.push(l[E+1]);const g=[],v=Hn.empty();for(let E=d.length-1;E>=0;--E)if(!qN(g,d[E])){const A=d[E];let O=p[E];O=Nn(O);const G=c.childContextForFieldPath(A);if(O instanceof Mp)g.push(A);else{const J=Ph(O,G);J!=null&&(g.push(A),v.set(A,J))}}const x=new yr(g);return new LN(v,x,c.fieldTransforms)}function sP(s,e,t,n=!1){return Ph(t,s.createContext(n?4:3,e))}function Ph(s,e){if(FN(s=Nn(s)))return Sv("Unsupported field value:",e,s),zN(s,e);if(s instanceof Ev)return(function(n,a){if(!UN(a.dataSource))throw a.createError(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(n,a){const l=[];let c=0;for(const d of n){let p=Ph(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(s,e)}return(function(n,a){if((n=Nn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return UD(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const l=bt.fromDate(n);return{timestampValue:mc(a.serializer,l)}}if(n instanceof bt){const l=new bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:mc(a.serializer,l)}}if(n instanceof $s)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof rs)return{bytesValue:M2(a.serializer,n._byteString)};if(n instanceof tn){const l=a.databaseId,c=n.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jy(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof vs)return(function(c,d){const p=c instanceof vs?c.toArray():c;return{mapValue:{fields:{[Fy]:{stringValue:Gy},[cc]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return $y(d.serializer,v)}))}}}}}})(n,a);if(K2(n))return n._toProto(a.serializer);throw a.createError(`Unsupported field value: ${mp(n)}`)})(s,e)}function zN(s,e){const t={};return e2(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fa(s,((n,a)=>{const l=Ph(a,e.childContextForField(n));l!=null&&(t[n]=l)})),{mapValue:{fields:t}}}function FN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof bt||s instanceof $s||s instanceof rs||s instanceof tn||s instanceof Ev||s instanceof vs||K2(s))}function Sv(s,e,t){if(!FN(t)||!VS(t)){const n=mp(t);throw n==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+n)}}function xc(s,e,t){if((e=Nn(e))instanceof wv)return e._internalPath;if(typeof e=="string")return GN(s,e);throw ap("Field path arguments must be of type string or ",s,!1,void 0,t)}const iP=new RegExp("[~\\*/\\[\\]]");function GN(s,e,t){if(e.search(iP)>=0)throw ap(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new wv(...e.split("."))._internalPath}catch{throw ap(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function ap(s,e,t,n,a){const l=n&&!n.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${n}`),c&&(p+=` in document ${a}`),p+=")"),new he(Z.INVALID_ARGUMENT,d+s+p)}function qN(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{convertValue(e,t="none"){switch(Oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Fa(e,((a,l)=>{n[a]=this.convertValue(l,t)})),n}convertVectorValue(e){var n,a,l;const t=(l=(a=(n=e.fields)==null?void 0:n[cc].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>zt(c.doubleValue)));return new vs(t)}convertGeoPoint(e){return new $s(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_p(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ch(e));default:return null}}convertTimestamp(e){const t=wi(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ft.fromString(e);Ce($2(n),9688,{name:e});const a=new Lo(n.get(1),n.get(3)),l=new ye(n.popFirst(5));return a.isEqual(t)||ln(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv extends aP{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}const NE="@firebase/firestore",AE="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(s){return(function(t,n){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of n)if(l in a&&typeof a[l]=="function")return!0;return!1})(s,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t,n,a,l){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(xc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oP extends HN{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Av{}class lP extends Av{}function Vp(s,e,...t){let n=[];e instanceof Av&&n.push(e),n=n.concat(t),(function(l){const c=l.filter((p=>p instanceof Iv)).length,d=l.filter((p=>p instanceof Lp)).length;if(c>1||c>0&&d>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)s=a._apply(s);return s}class Lp extends lP{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Lp(e,t,n)}_apply(e){const t=this._parse(e);return KN(e._query,t),new Xo(e.firestore,e.converter,Q0(e._query,t))}_parse(e){const t=Pp(e.firestore);return(function(l,c,d,p,g,v,x){let E;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){RE(x,v);const O=[];for(const G of x)O.push(CE(p,l,G));E={arrayValue:{values:O}}}else E=CE(p,l,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||RE(x,v),E=sP(d,c,x,v==="in"||v==="not-in");return Ze.create(g,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Up(s,e,t){const n=e,a=xc("where",s);return Lp._create(a,n,t)}class Iv extends Av{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iv(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:xt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)KN(c,p),c=Q0(c,p)})(e._query,t),new Xo(e.firestore,e.converter,Q0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function CE(s,e,t){if(typeof(t=Nn(t))=="string"){if(t==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v2(e)&&t.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ft.fromString(t));if(!ye.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return hh(s,new ye(n))}if(t instanceof tn)return hh(s,t._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mp(t)}.`)}function RE(s,e){if(!Array.isArray(s)||s.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KN(s,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function QN(s,e,t){let n;return n=s?s.toFirestore(e):e,n}class cP{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=fP(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function uP(s){return new cP(s)}class hP{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=gh.provider,this._offlineComponentProvider={build:t=>new PN(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class dP{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=gh.provider,this._offlineComponentProvider={build:t=>new BO(t,e==null?void 0:e.cacheSizeBytes)}}}function fP(s){return new hP(s==null?void 0:s.forceOwnership)}function pP(){return new dP}class Lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ko extends HN{constructor(e,t,n,a,l,c){super(e,t,n,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(xc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ko._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",ko._jsonSchema={type:vn("string",ko._jsonSchemaVersion),bundleSource:vn("string","DocumentSnapshot"),bundleName:vn("string"),bundle:vn("string")};class Cf extends ko{data(e={}){return super.data(e)}}class Do{constructor(e,t,n,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Lu(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Cf(this._firestore,this._userDataWriter,n.key,n,new Lu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new Cf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Lu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Cf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Lu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:mP(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Do._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Oy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),n.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mP(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Do._jsonSchemaVersion="firestore/querySnapshot/1.0",Do._jsonSchema={type:vn("string",Do._jsonSchemaVersion),bundleSource:vn("string","QuerySnapshot"),bundleName:vn("string"),bundle:vn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(s){s=jr(s,tn);const e=jr(s.firestore,Ti),t=Op(e);return HO(t,s._key).then((n=>XN(e,s,n)))}function Cc(s){s=jr(s,Xo);const e=jr(s.firestore,Ti),t=Op(e),n=new Nv(e);return $N(s._query),$O(t,s._query).then((a=>new Do(e,n,s,a)))}function YN(s,e,t){s=jr(s,tn);const n=jr(s.firestore,Ti),a=QN(s.converter,e),l=Pp(n);return zp(n,[BN(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,$n.none())])}function Bp(s,e,t,...n){s=jr(s,tn);const a=jr(s.firestore,Ti),l=Pp(a);let c;return c=typeof(e=Nn(e))=="string"||e instanceof wv?rP(l,"updateDoc",s._key,e,t,n):nP(l,"updateDoc",s._key,e),zp(a,[c.toMutation(s._key,$n.exists(!0))])}function yh(s){return zp(jr(s.firestore,Ti),[new Np(s._key,$n.none())])}function gP(s,e){const t=jr(s.firestore,Ti),n=Mr(s),a=QN(s.converter,e),l=Pp(s.firestore);return zp(t,[BN(l,"addDoc",n._key,a,s.converter!==null,{}).toMutation(n._key,$n.exists(!1))]).then((()=>n))}function op(s,...e){var g,v,x;s=Nn(s);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||IE(e[n])||(t=e[n++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(IE(e[n])){const E=e[n];e[n]=(g=E.next)==null?void 0:g.bind(E),e[n+1]=(v=E.error)==null?void 0:v.bind(E),e[n+2]=(x=E.complete)==null?void 0:x.bind(E)}let l,c,d;if(s instanceof tn)c=jr(s.firestore,Ti),d=Rh(s._key.path),l={next:E=>{e[n]&&e[n](XN(c,s,E))},error:e[n+1],complete:e[n+2]};else{const E=jr(s,Xo);c=jr(E.firestore,Ti),d=E._query;const A=new Nv(c);l={next:O=>{e[n]&&e[n](new Do(c,A,E,O))},error:e[n+1],complete:e[n+2]},$N(s._query)}const p=Op(c);return qO(p,d,a,l)}function zp(s,e){const t=Op(s);return KO(t,e)}function XN(s,e,t){const n=t.docs.get(e._key),a=new Nv(s);return new ko(s,a,e._key,n,new Lu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){k4(wc),tc(new Oo("firestore",((n,{instanceIdentifier:a,options:l})=>{const c=n.getProvider("app").getImmediate(),d=new Ti(new O4(n.getProvider("auth-internal")),new V4(c,n.getProvider("app-check-internal")),_D(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Ra(NE,AE,e),Ra(NE,AE,"esm2020")})();const yP={apiKey:"AIzaSyD2rR0OH2OzSlt4fs2w72TKOUNDngp0zXQ",authDomain:"singmode-7c657.firebaseapp.com",projectId:"singmode-7c657",storageBucket:"singmode-7c657.firebasestorage.app",messagingSenderId:"292866266443",appId:"1:292866266443:web:190d34e55980509c1b04ce"},JN=HT(yP),Rv=C4(JN),Ht=JO(JN,{localCache:uP({tabManager:pP()})});class vP{constructor(){this.peer=null,this.lockPeer=null,this.connections=new Map,this.hostId=null,this.isHost=!1,this.heartbeatInterval=null,this.retryCount=0,this.maxRetries=10,this.actionQueue=[],this.onStateReceived=null,this.onActionReceived=null,this.onConnectionStatus=null,this.onPeerConnected=null,this.onDeviceConnected=null,this.onDeviceDisconnected=null,this.loadQueue()}loadQueue(){try{const e=localStorage.getItem("singmode_pending_actions");e&&(this.actionQueue=JSON.parse(e),console.log(`[Sync] Loaded ${this.actionQueue.length} pending actions from storage.`))}catch(e){console.warn("[Sync] Failed to load pending actions:",e)}}persistQueue(){try{localStorage.setItem("singmode_pending_actions",JSON.stringify(this.actionQueue)),typeof window<"u"&&window.dispatchEvent(new Event("kstar_sync"))}catch(e){console.warn("[Sync] Failed to persist pending actions:",e)}}async getPublicIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown-network"}catch(e){return console.warn("[Sync] Could not fetch public IP for lock, using fallback",e),"local-fallback"}}async initialize(e,t){if(this.isHost=e==="DJ",!this.isHost&&t&&(this.hostId=t),this.peer&&this.destroy(),this.isHost&&!t){const n=await this.getPublicIP(),a=`singmode-lock-${btoa(n).replace(/=/g,"").substr(0,12)}`;if(console.log(`[Sync] Attempting to claim network lock: ${a}`),!await new Promise(c=>{const d=new jf(a,{debug:1});d.on("open",()=>{this.lockPeer=d,c(!0)}),d.on("error",p=>{p.type==="unavailable-id"?c(!1):c(!0),d.destroy()})}))throw new Error("COLLISION: A SingMode DJ session is already active on this network.")}return new Promise((n,a)=>{const l=this.isHost?t||`singmode-${Math.random().toString(36).substr(2,6)}`:void 0;this.peer=new jf(l,{debug:1,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.stuntmanit.com:3478"},{urls:"stun:stun.ekiga.net"},{urls:"stun:stun.ideasip.com"},{urls:"stun:stun.schlund.de"},{urls:"stun:stun.voiparound.com"},{urls:"stun:stun.voipbuster.com"},{urls:"stun:stun.voipstunt.com"}]}}),this.peer.on("open",c=>{console.log(`[Sync] Peer opened with ID: ${c}`),this.isHost&&(this.hostId=c),this.retryCount=0,this.startHeartbeat(),!this.isHost&&t&&this.connectToHost(t),this.onConnectionStatus&&(!t||this.connections.size>0)&&this.onConnectionStatus("connected"),n(c)}),this.peer.on("disconnected",()=>{var c;console.warn("[Sync] Peer disconnected from signaling server. Attempting reconnect..."),this.onConnectionStatus&&this.onConnectionStatus("connecting"),(c=this.peer)==null||c.reconnect()}),this.peer.on("connection",c=>{this.handleConnection(c)}),this.peer.on("error",c=>{var d;console.error("[Sync] Peer error:",c.type,c),c.type==="unavailable-id"?(this.destroy(),this.initialize(e).then(n).catch(a)):c.type==="network"||c.type==="server-error"||(d=c.message)!=null&&d.includes("Lost connection")?(this.onConnectionStatus&&this.onConnectionStatus("disconnected"),this.handleNetworkError(e,t)):c.type==="peer-unavailable"&&this.onConnectionStatus&&this.onConnectionStatus("disconnected")})})}handleNetworkError(e,t){if(this.retryCount<this.maxRetries){this.retryCount++;const n=Math.min(1e3*Math.pow(2,this.retryCount),3e4);console.log(`[Sync] Network failure. Retrying in ${n}ms... (Attempt ${this.retryCount})`),setTimeout(()=>{this.initialize(e,t)},n)}}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=window.setInterval(()=>{this.peer&&this.peer.disconnected&&!this.peer.destroyed&&this.peer.reconnect(),this.lockPeer&&this.lockPeer.disconnected&&!this.lockPeer.destroyed&&this.lockPeer.reconnect()},5e3)}connectToHost(e){if(!this.peer||this.isHost||this.peer.destroyed)return;this.onConnectionStatus&&this.onConnectionStatus("connecting");const t=this.peer.connect(e,{reliable:!0});this.handleConnection(t)}handleConnection(e){e.on("open",()=>{console.log(`[Sync] Data connection established with: ${e.peer}`),this.connections.set(e.peer,e),!this.isHost&&this.actionQueue.length>0&&(console.log(`[Sync] Resending ${this.actionQueue.length} queued actions to host.`),this.actionQueue.forEach(t=>{e.send(t)})),this.onConnectionStatus&&this.onConnectionStatus("connected"),this.isHost&&this.onPeerConnected&&this.onPeerConnected(),this.isHost&&this.onDeviceConnected&&this.onDeviceConnected(e.peer)}),e.on("data",t=>{if(t&&typeof t=="object")if("type"in t){const n={...t,senderId:e.peer};this.onActionReceived&&this.onActionReceived(n)}else"participants"in t&&this.applyIncomingState(t)}),e.on("close",()=>{console.log(`[Sync] Connection closed: ${e.peer}`),this.connections.delete(e.peer),this.connections.size===0&&this.onConnectionStatus&&(this.isHost||this.onConnectionStatus("disconnected")),this.isHost&&this.onDeviceDisconnected&&this.onDeviceDisconnected(e.peer)}),e.on("error",t=>{console.error("[Sync] Connection error:",t),this.connections.delete(e.peer)})}broadcastState(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}broadcastAction(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}async sendAction(e){if(this.isHost)return;this.actionQueue.some(n=>n.type===e.type&&JSON.stringify(n.payload)===JSON.stringify(e.payload))||(console.log("[Sync] Queuing new action locally:",e.type),this.actionQueue.push(e),this.persistQueue(),this.hostId&&(xs(Ht,"sessions",this.hostId,"pending_actions"),gP(xs(Ht,"sessions",this.hostId,"pending_actions"),{...e,bufferedAt:Date.now()}).then(()=>{console.log(`[Sync] Action ${e.type} buffered successfully to Firestore.`)}).catch(n=>{console.warn("[Sync] Firestore buffering delayed (will sync when online):",n.message)}))),this.connections.forEach(n=>{n.open&&(console.log("[Sync] Sending action directly via PeerJS:",e.type),n.send(e))})}getRoomId(){return this.hostId}getMyPeerId(){var e;return((e=this.peer)==null?void 0:e.id)||null}applyIncomingState(e){if(!this.isHost&&this.actionQueue.length>0){const t=this.actionQueue.length;this.actionQueue=this.actionQueue.filter(n=>{if(n.type==="ADD_REQUEST"){const a=n.payload;return!e.requests.some(l=>l.participantId===a.participantId&&l.songName.toLowerCase().trim()===a.songName.toLowerCase().trim()&&l.artist.toLowerCase().trim()===a.artist.toLowerCase().trim())}return!0}),this.actionQueue.length!==t&&(console.log(`[Sync] Self-cleaned ${t-this.actionQueue.length} processed actions from queue.`),this.persistQueue())}this.onStateReceived&&this.onStateReceived(e)}getPendingActions(){return this.actionQueue}destroy(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.connections.forEach(e=>e.close()),this.connections.clear(),this.peer&&(this.peer.destroy(),this.peer=null),this.lockPeer&&(this.lockPeer.destroy(),this.lockPeer=null)}}const ct=new vP,kv="kstar_karaoke_session",On="kstar_active_user",Pn="kstar_user_accounts";let Mt=!1,kE=Promise.resolve();const Mh=async s=>await(kE=kE.then(async()=>{const t=await Ye(),n=await s(t);return await wt(t),n})),WN={id:"current-session",participants:[],requests:[],currentRound:null,history:[],messages:[],tickerMessages:[],verifiedSongbook:[],isPlayingVideo:!1,nextRequestNumber:1,maxRequestsPerUser:5,bannedUsers:[],deviceConnections:[],queueStrategy:Us.FRESH_MEAT,startedAt:Date.now()},cy=typeof window<"u"&&window.chrome&&window.chrome.storage,nt={get:async s=>{if(cy)return(await window.chrome.storage.local.get([s]))[s];const e=localStorage.getItem(s);return e?JSON.parse(e):null},set:async(s,e)=>{cy?await window.chrome.storage.local.set({[s]:e}):localStorage.setItem(s,JSON.stringify(e)),typeof window<"u"&&(window.dispatchEvent(new Event("kstar_sync")),window.dispatchEvent(new Event("storage")))}};ct.onStateReceived=s=>{Mt&&nt.set(kv,s)};ct.onActionReceived=s=>{ZN(s)};ct.onPeerConnected=async()=>{if(!Mt){const s=await Ye();ct.broadcastState(s)}};async function ZN(s){switch(s.type){case"ADD_REQUEST":await ga(s.payload);break;case"JOIN_SESSION":{const{id:n,profile:a}=s.payload;if(a){const l=await $t(),c=l.findIndex(d=>d.id===n);c===-1?(l.push(a),await nt.set(Pn,l)):(l[c]={...l[c],...a},await nt.set(Pn,l))}await Sa(n),uy(`${(a==null?void 0:a.name)||n} joined the session`,"info"),await Mh(l=>{l.deviceConnections||(l.deviceConnections=[]);const c=l.deviceConnections.findIndex(d=>d.peerId===s.senderId);c>-1?(l.deviceConnections[c].userId=n,l.deviceConnections[c].isGuest=(a==null?void 0:a.isGuest)??!1,s.payload.userAgent&&(l.deviceConnections[c].userAgent=s.payload.userAgent)):l.deviceConnections.push({id:`D-${Math.random().toString(36).substr(2,4).toUpperCase()}`,peerId:s.senderId,connectedAt:Date.now(),lastSeen:Date.now(),status:"connected",userAgent:s.payload.userAgent||"Unknown",userId:n,isGuest:(a==null?void 0:a.isGuest)??!1})});break}case"TOGGLE_STATUS":await Na(s.payload.id,s.payload.status);break;case"TOGGLE_MIC":await MP(s.payload.id,s.payload.enabled);break;case"DELETE_REQUEST":await ya(s.payload);break;case"UPDATE_REQUEST":await Ju(s.payload.id,s.payload.updates);break;case"ADD_CHAT":await zP(s.senderId,s.payload.name,s.payload.text);break;case"SYNC_PROFILE":if(Mt){const n=await rr();n&&n.id===s.payload.id&&await nt.set(On,s.payload)}const e=await $t(),t=e.findIndex(n=>n.id===s.payload.id);t>-1?e[t]=s.payload:e.push(s.payload),await nt.set(Pn,e);break;case"TOGGLE_FAVORITE":Mt||await nA(s.payload,s.senderId);break;case"REORDER_ROUND":await rA(s.payload);break;case"REORDER_REQUESTS":await sA(s.payload);break;case"REORDER_PENDING":await iA(s.payload);break;case"REORDER_MY_REQUESTS":await dy(s.senderId,s.payload.requestId,s.payload.direction);break}}const Xu=async(s,e)=>{Mt=s==="PARTICIPANT"&&!!e;const t=await ct.initialize(s,e);if(!Mt&&t){const n=await rr(),a=(n==null?void 0:n.name)||"SingMode DJ",l=n==null?void 0:n.id;await GP({id:t,hostName:a,hostUid:l,isActive:!0,startedAt:Date.now()});const c=setInterval(()=>{qP(t)},120*1e3);window.addEventListener("beforeunload",()=>{clearInterval(c),aA(t)});const d=xs(Ht,"users");op(d,g=>{const v=[];g.forEach(x=>{v.push(x.data())}),console.log("Synced users from Firestore:",v.length),nt.set(Pn,v)}),ct.onDeviceConnected=g=>{bP(g),uy(`New device connected: ${g.substr(0,8)}...`,"info")},ct.onDeviceDisconnected=async g=>{const v=await Ye();if(v.deviceConnections){const x=v.deviceConnections.findIndex(E=>E.peerId===g);if(x>-1){const E=v.deviceConnections[x].id;v.deviceConnections[x].status="disconnected",v.deviceConnections[x].lastSeen=Date.now(),await wt(v),uy(`Device disconnected: ${E}`,"warn")}}};const p=xs(Ht,"sessions",t,"pending_actions");op(p,g=>{g.docChanges().forEach(async v=>{if(v.type==="added"){const x=v.doc.data();console.log("[SessionManager] Received buffered action from Firestore:",x.type),await ZN(x),await yh(v.doc.ref)}})})}Mt&&e&&(console.log("[Sync] Initializing robust Firestore fallback sync for room:",e),EP(e,n=>{console.log("[Sync] Received state update via Firestore fallback"),ct.applyIncomingState(n)}))},bP=async s=>{await Mh(e=>{e.deviceConnections||(e.deviceConnections=[]);const t=e.deviceConnections.findIndex(n=>n.peerId===s);t>-1?(e.deviceConnections[t].status="connected",e.deviceConnections[t].lastSeen=Date.now()):e.deviceConnections.push({id:`D-${Math.random().toString(36).substr(2,4).toUpperCase()}`,peerId:s,connectedAt:Date.now(),lastSeen:Date.now(),status:"connected",userAgent:"Unknown"})})},xP=async(s,e,t=!1)=>{await Mh(n=>{if(!n.deviceConnections)return;const a=n.deviceConnections.findIndex(l=>l.id===s);a>-1&&(n.deviceConnections[a].userId=e,n.deviceConnections[a].isGuest=t)})},_P=async s=>{await Mh(e=>{e.deviceConnections&&(e.deviceConnections=e.deviceConnections.filter(t=>t.id!==s))})},Ye=async s=>{if(!Mt&&s){const t=await wP(s);if(t)return t}const e=await nt.get(kv)||{...WN};return e.history||(e.history=[]),e.messages||(e.messages=[]),e.tickerMessages||(e.tickerMessages=[]),e.verifiedSongbook||(e.verifiedSongbook=[]),e.isPlayingVideo===void 0&&(e.isPlayingVideo=!1),e.nextRequestNumber||(e.nextRequestNumber=1),e.maxRequestsPerUser===void 0&&(e.maxRequestsPerUser=5),e.bannedUsers||(e.bannedUsers=[]),e.deviceConnections||(e.deviceConnections=[]),e.logs||(e.logs=[]),e.queueStrategy||(e.queueStrategy=Us.FRESH_MEAT),e},wt=async s=>{if(await nt.set(kv,s),ct.broadcastState(s),!Mt&&s.id)try{const e=Mr(Ht,"sessions",s.id);await Bp(e,{fullState:JSON.stringify(s),lastHeartbeat:Date.now(),participantsCount:s.participants.length})}catch(e){console.error("[SessionManager] Error persisting full state to Firestore:",e)}},wP=async s=>{try{const e=Mr(Ht,"sessions",s),t=await Cv(e);if(t.exists()){const n=t.data();if(n.fullState)return JSON.parse(n.fullState)}return null}catch(e){return console.error(`[SessionManager] Error fetching session ${s}:`,e),null}},EP=(s,e)=>{const t=Mr(Ht,"sessions",s);return op(t,n=>{if(n.exists()){const a=n.data();if(a.fullState)try{const l=JSON.parse(a.fullState);e(l)}catch(l){console.error("[SessionManager] Error parsing session state from Firestore:",l)}}})},uy=async(s,e="info")=>{await Mh(t=>{t.logs||(t.logs=[]),t.logs.push({timestamp:Date.now(),message:s,type:e}),t.logs.length>100&&(t.logs=t.logs.slice(-100))})},eA=(s,e)=>{if(e.youtubeUrl&&e.youtubeUrl.trim()!==""){const t=s.verifiedSongbook.find(n=>n.songName.toLowerCase()===e.songName.toLowerCase()&&n.artist.toLowerCase()===e.artist.toLowerCase());if(t)t.youtubeUrl!==e.youtubeUrl&&(t.youtubeUrl=e.youtubeUrl);else{const n={id:Math.random().toString(36).substr(2,9),songName:e.songName,artist:e.artist,youtubeUrl:e.youtubeUrl,type:e.type,addedAt:Date.now()};s.verifiedSongbook.push(n)}}},TP=async s=>{const e=await Ye(),t={...s,id:Math.random().toString(36).substr(2,9),addedAt:Date.now()};e.verifiedSongbook.push(t),await wt(e)},SP=async(s,e)=>{const t=await Ye(),n=t.verifiedSongbook.findIndex(a=>a.id===s);n!==-1&&(t.verifiedSongbook[n]={...t.verifiedSongbook[n],...e},await wt(t))},DE=async s=>{const e=await Ye();e.verifiedSongbook=e.verifiedSongbook.filter(t=>t.id!==s),await wt(e)},NP=async()=>{const s=await Ye(),e={...WN,id:`session-${Date.now()}`,verifiedSongbook:s.verifiedSongbook,nextRequestNumber:1,startedAt:Date.now()};await wt(e)},$t=async()=>{let s=await nt.get(Pn);if(!s||s.length===0){try{const t=xs(Ht,"users"),n=await Cc(t),a=[];if(n.forEach(l=>a.push(l.data())),a.length>0)return await nt.set(Pn,a),a}catch(t){console.error("Error fetching users from Firebase:",t)}return Array.from({length:5},(t,n)=>({id:`singer-${n+1}`,name:`Singer${n+1}`,favorites:[],personalHistory:[],createdAt:Date.now()}))}return s},qo=async(s,e)=>{try{const t=Mr(Ht,"users",s);if(e.name&&(await $t()).find(d=>{var p;return d.id!==s&&d.name.toLowerCase()===((p=e.name)==null?void 0:p.toLowerCase())}))return{success:!1,error:"Username already exists."};await Bp(t,e);const n=await $t(),a=n.findIndex(l=>l.id===s);if(a>-1){n[a]={...n[a],...e},await nt.set(Pn,n);const l=await rr();l&&l.id===s&&await nt.set(On,n[a]),Mt||ct.broadcastAction({type:"SYNC_PROFILE",payload:n[a],senderId:"DJ"})}return{success:!0}}catch(t){return console.error("Error updating account:",t),{success:!1,error:t.message}}},AP=async(s,e)=>{const t=await $t(),n=t.findIndex(a=>a.id===s);if(n>-1){const a=t[n].favorites.filter(l=>l.id!==e);await qo(s,{favorites:a})}},IP=async(s,e,t)=>{const n=await $t(),a=n.findIndex(l=>l.id===s);if(a>-1){const l=[...n[a].favorites],c=l.findIndex(d=>d.id===e);c>-1&&(l[c]={...l[c],...t},await qo(s,{favorites:l}))}},CP=async(s,e)=>{const t=await $t(),n=t.findIndex(a=>a.id===s);if(n>-1){const a={...e,id:Math.random().toString(36).substr(2,9)},l=[...t[n].favorites,a];await qo(s,{favorites:l})}},RP=async(s,e)=>{const t=await $t(),n=t.findIndex(a=>a.id===s);if(n>-1){const a=t[n].personalHistory.filter(l=>l.id!==e);await qo(s,{personalHistory:a})}},kP=async(s,e,t)=>{const n=await $t(),a=n.findIndex(l=>l.id===s);if(a>-1){const l=[...n[a].personalHistory],c=l.findIndex(d=>d.id===e);c>-1&&(l[c]={...l[c],...t},await qo(s,{personalHistory:l}))}},Rf=async s=>{await hy(s);try{await yh(Mr(Ht,"users",s));let t=await $t();t=t.filter(n=>n.id!==s),await nt.set(Pn,t)}catch(t){console.error("Error deleting account",t)}const e=await rr();e&&e.id===s&&await Fp()},tA=async()=>{try{const s=await $t(),e=[],t=new Map;for(const n of s){if(!n.password){e.push(n.id);continue}const a=n.name.toLowerCase().trim();t.has(a)?e.push(n.id):t.set(a,n.id)}if(e.length>0){for(const c of e)await yh(Mr(Ht,"users",c));const n=xs(Ht,"users"),a=await Cc(n),l=[];a.forEach(c=>l.push(c.data())),await nt.set(Pn,l)}return{success:!0,deletedCount:e.length}}catch(s){return console.error("Cleanup failed:",s),{success:!1,error:String(s)}}},rr=async()=>await nt.get(On),vh=async(s,e=!1)=>{var t;try{let n=s.id;const a=!!(s.password&&s.email),l=!!(s.password&&!s.email);if(a)try{n=(await p5(Rv,s.email,s.password)).user.uid}catch(g){if(g.code==="auth/email-already-in-use")return{success:!1,error:"Email already in use."};throw g}else if(l){if((await $t()).find(x=>{var E;return x.name.toLowerCase()===((E=s.name)==null?void 0:E.trim().toLowerCase())}))return{success:!1,error:"Username already taken."};n=jE()||`user-${Date.now()}-${Math.random().toString(36).substr(2,5)}`}else n=s.id||jE()||`guest-${Math.random().toString(36).substr(2,9)}`;const c={id:n,name:((t=s.name)==null?void 0:t.trim())||"Guest",email:s.email||void 0,password:l?s.password:void 0,isGuest:!a&&!l,favorites:s.favorites||[],personalHistory:s.personalHistory||[],createdAt:Date.now()},d=JSON.parse(JSON.stringify(c));await YN(Mr(Ht,"users",n),d);const p=await $t();return p.some(g=>g.id===n)||(p.push(c),await nt.set(Pn,p)),e?await nt.set(On,c):Mt||ct.broadcastAction({type:"SYNC_PROFILE",payload:c,senderId:"DJ"}),{success:!0,profile:c}}catch(n){return console.error("Registration error:",n),{success:!1,error:n.message}}},jE=()=>{},DP=async(s,e)=>{if(s.toLowerCase()==="singmaster"&&e==="Organized"){const a={id:"admin-singmaster",name:"SingMaster",password:"Organized",favorites:[],personalHistory:[],createdAt:Date.now()};return await nt.set(On,a),{success:!0,profile:a}}const t=await $t();let n=t.find(a=>a.name.toLowerCase()===s.toLowerCase());if(!n)try{const a=xs(Ht,"users"),l=Vp(a,Up("name","==",s)),c=await Cc(l);c.empty||(n=c.docs[0].data(),t.push(n),await nt.set(Pn,t))}catch(a){console.warn("Error checking remote user:",a)}if(!n&&!e)return await vh({name:s},!0);if(e)try{const a=`${s.replace(/\s+/g,"").toLowerCase()}@singmode.app`,c=(await m5(Rv,a,e)).user.uid,d=await Cv(Mr(Ht,"users",c));if(d.exists()){const p=d.data();return await nt.set(On,p),{success:!0,profile:p}}else return n?{success:!0,profile:n}:{success:!1,error:"Profile data missing."}}catch(a){return console.warn("Firebase login failed, checking legacy local storage:",a),n?n.password&&n.password===e?(await nt.set(On,n),{success:!0,profile:n}):{success:!1,error:"Incorrect passkey."}:{success:!1,error:a.message||"Login failed."}}return n?(await nt.set(On,n),{success:!0,profile:n}):{success:!1,error:"User not found"}},jP=async s=>{const e=await $t();let t=e.find(n=>n.id===s);if(!t)try{const n=Mr(Ht,"users",s),a=await Cv(n);a.exists()&&(t=a.data(),e.push(t),await nt.set(Pn,e))}catch(n){console.error("Error fetching user by ID:",n)}return t?(await nt.set(On,t),{success:!0,profile:t}):{success:!1,error:"User not found"}},Fp=async()=>{await v5(Rv),cy?await window.chrome.storage.local.remove([On]):localStorage.removeItem(On),window.dispatchEvent(new Event("kstar_sync"))},Sa=async s=>{var l;const e=await Ye(),t=(l=e.bannedUsers)==null?void 0:l.find(c=>c.id===s);if(t)throw new Error(`ACCESS DENIED: ${t.reason}`);if(Mt){const c=await rr();return ct.sendAction({type:"JOIN_SESSION",payload:{id:s,profile:c,userAgent:typeof navigator<"u"?navigator.userAgent:"Unknown"},senderId:ct.getMyPeerId()||s}),{id:s,name:(c==null?void 0:c.name)||"Joining...",status:Gt.STANDBY,joinedAt:Date.now()}}const a=(await $t()).find(c=>c.id===s);if(!a){const c=await rr();if(c&&c.id===s)return await OE(e,c);throw new Error("Profile not found")}return await OE(e,a)},OE=async(s,e)=>{const t={id:e.id,name:e.name,status:Gt.STANDBY,micEnabled:!1,joinedAt:Date.now()},n=s.participants.findIndex(a=>a.id===e.id);return n>-1?s.participants[n]={...s.participants[n],...t,status:s.participants[n].status}:s.participants.push(t),await wt(s),t},OP=async(s,e)=>{const t=await $t(),n=t.findIndex(a=>a.id===s);if(n>-1){t[n].vocalRange=e,await nt.set(Pn,t),Mt||ct.broadcastAction({type:"SYNC_PROFILE",payload:t[n],senderId:"DJ"});const a=await rr();a&&a.id===s&&await nt.set(On,t[n])}},nA=async(s,e)=>{var l;const t=e||((l=await rr())==null?void 0:l.id);if(!t)return;if(Mt&&!e){ct.sendAction({type:"TOGGLE_FAVORITE",payload:s,senderId:t});const c=await rr();if(c){const d=c.favorites.findIndex(p=>p.songName===s.songName&&p.artist===s.artist);d>-1?c.favorites.splice(d,1):c.favorites.push({...s,id:Math.random().toString(36).substr(2,9)}),await nt.set(On,c)}return}const n=await $t(),a=n.findIndex(c=>c.id===t);if(a>-1){const c=n[a].favorites.findIndex(p=>p.songName===s.songName&&p.artist===s.artist);c>-1?n[a].favorites.splice(c,1):n[a].favorites.push({...s,id:Math.random().toString(36).substr(2,9)}),await nt.set(Pn,n),Mt||ct.broadcastAction({type:"SYNC_PROFILE",payload:n[a],senderId:"DJ"});const d=await rr();d&&d.id===t&&await nt.set(On,n[a])}},hy=async s=>{const e=await Ye(),n=e.requests.filter(a=>a.participantId===s).map(a=>({...a,playedAt:Date.now(),status:Fe.DONE,isInRound:!1}));n.length>0&&(e.history=[...n,...e.history].slice(0,100)),e.participants=e.participants.filter(a=>a.id!==s),e.requests=e.requests.filter(a=>a.participantId!==s),e.currentRound&&(e.currentRound=e.currentRound.filter(a=>a.participantId!==s),e.currentRound.length===0&&(e.currentRound=null)),await wt(e)},Na=async(s,e)=>{if(Mt){ct.sendAction({type:"TOGGLE_STATUS",payload:{id:s,status:e},senderId:s});return}const t=await Ye(),n=t.participants.find(a=>a.id===s);n&&(n.status=e,await wt(t))},PP=async s=>{const e=await Ye();e.maxRequestsPerUser=s,await wt(e)},dy=async(s,e,t)=>{if(Mt){ct.sendAction({type:"REORDER_MY_REQUESTS",payload:{requestId:e,direction:t},senderId:s});return}const n=await Ye(),a=n.requests.filter(v=>v.participantId===s&&v.status!==Fe.DONE),l=a.findIndex(v=>v.id===e);if(l===-1)return;const c=t==="up"?l-1:l+1;if(c<0||c>=a.length)return;const[d]=a.splice(l,1);a.splice(c,0,d);const p=[...n.requests];p.map((v,x)=>v.participantId===s&&v.status!==Fe.DONE?x:-1).filter(v=>v!==-1).forEach((v,x)=>{p[v]=a[x]}),n.requests=p,await wt(n)},MP=async(s,e)=>{if(Mt){ct.sendAction({type:"TOGGLE_MIC",payload:{id:s,enabled:e},senderId:s});return}const t=await Ye(),n=t.participants.find(a=>a.id===s);n&&(n.micEnabled=e,await wt(t))},ga=async s=>{if(Mt)return ct.sendAction({type:"ADD_REQUEST",payload:s,senderId:s.participantId}),null;const e=await Ye(),t=e.nextRequestNumber++,n={...s,id:Math.random().toString(36).substr(2,9),requestNumber:t,createdAt:Date.now(),status:Fe.PENDING,isInRound:!1},a=e.requests.filter(g=>g.participantId===s.participantId&&g.status===Fe.PENDING);if(e.maxRequestsPerUser&&a.length>=e.maxRequestsPerUser)throw new Error(`Request limit reached. Max ${e.maxRequestsPerUser} requests allowed per performer.`);if(a.some(g=>g.songName.toLowerCase().trim()===s.songName.toLowerCase().trim()&&g.artist.toLowerCase().trim()===s.artist.toLowerCase().trim()))return console.log("[SessionManager] Duplicate request detected, skipping:",s.songName),null;e.requests.unshift(n),eA(e,n);const c=await $t(),d=c.findIndex(g=>g.id===s.participantId);d>-1&&(c[d].personalHistory=[n,...c[d].personalHistory].slice(0,50),await nt.set(Pn,c),Mt||ct.broadcastAction({type:"SYNC_PROFILE",payload:c[d],senderId:"DJ"}));const p=await rr();if(p&&p.id===s.participantId){const g=c.find(v=>v.id===s.participantId);g&&await nt.set(On,g)}return await wt(e),n},Ju=async(s,e)=>{if(Mt){ct.sendAction({type:"UPDATE_REQUEST",payload:{id:s,updates:e},senderId:"client"});return}const t=await Ye(),n=t.requests.findIndex(l=>l.id===s);let a="";if(n!==-1&&(t.requests[n]={...t.requests[n],...e},a=t.requests[n].participantId,eA(t,t.requests[n])),t.currentRound){const l=t.currentRound.findIndex(c=>c.id===s);l!==-1&&(t.currentRound[l]={...t.currentRound[l],...e},a=t.currentRound[l].participantId)}if(a){const l=await $t(),c=l.findIndex(p=>p.id===a);if(c>-1){const p=l[c].personalHistory.findIndex(g=>g.id===s);p!==-1&&(l[c].personalHistory[p]={...l[c].personalHistory[p],...e},await nt.set(Pn,l),Mt||ct.broadcastAction({type:"SYNC_PROFILE",payload:l[c],senderId:"DJ"}))}const d=await rr();if(d&&d.id===a){const p=l.find(g=>g.id===a);p&&await nt.set(On,p)}}await wt(t)},Iu=async s=>{const e=await Ye(),t=e.requests.find(n=>n.id===s);t&&(t.status=Fe.APPROVED,await wt(e))},VP=async s=>{const e=await Ye(),t=e.requests.findIndex(a=>a.id===s);if(t===-1)return;const n=e.requests[t];n.status=Fe.APPROVED,n.isInRound=!0,e.currentRound?e.currentRound.push({...n}):e.currentRound=[{...n}],await wt(e)},PE=async s=>{if(Mt)return;const e=await Ye(),t=e.requests.find(n=>n.id===s);if(t){if(t.status=Fe.DONE,t.completedAt=Date.now(),e.currentRound){const n=e.currentRound.find(a=>a.id===s);n&&(n.status=Fe.DONE,n.completedAt=Date.now())}await wt(e)}},ya=async s=>{if(Mt){ct.sendAction({type:"DELETE_REQUEST",payload:s,senderId:"client"});return}const e=await Ye();e.requests=e.requests.filter(t=>t.id!==s),e.currentRound&&(e.currentRound=e.currentRound.filter(t=>t.id!==s),e.currentRound.length===0&&(e.currentRound=null)),await wt(e)},ME=async(s,e)=>{const t=await Ye(),n=t.requests.findIndex(l=>l.id===s);if(n===-1)return;const a=e==="up"?n-1:n+1;if(a>=0&&a<t.requests.length){const l=t.requests[n];t.requests[n]=t.requests[a],t.requests[a]=l,await wt(t)}},LP=async s=>{const e=await Ye();e.queueStrategy=s,await wt(e)},UP=async()=>{const s=await Ye(),e=s.queueStrategy||Us.FRESH_MEAT,t=s.requests.filter(a=>a.status===Fe.APPROVED&&a.type===dt.SINGING&&!a.isInRound),n=[];if(e===Us.FIFO){const a=[...t].sort((l,c)=>l.createdAt-c.createdAt);n.push(...a.slice(0,10))}else{let l=[...s.participants.filter(c=>t.some(d=>d.participantId===c.id))];switch(e){case Us.FRESH_MEAT:l.sort((p,g)=>(g.joinedAt||0)-(p.joinedAt||0));break;case Us.OLDEST_MEMBER:l.sort((p,g)=>(p.joinedAt||0)-(g.joinedAt||0));break;case Us.RANDOM:l.sort(()=>Math.random()-.5);break;case Us.FAIR_ROTATION:const c=p=>s.requests.filter(g=>g.participantId===p&&g.status===Fe.DONE).length,d=p=>{var v;return((v=t.filter(x=>x.participantId===p).sort((x,E)=>x.createdAt-E.createdAt)[0])==null?void 0:v.createdAt)||Date.now()};l.sort((p,g)=>{const v=c(p.id),x=c(g.id);return v!==x?v-x:d(p.id)-d(g.id)});break}l.forEach(c=>{const p=t.filter(g=>g.participantId===c.id).sort((g,v)=>g.createdAt-v.createdAt)[0];p&&n.push(p)})}if(n.length===0){const a=s.requests.filter(l=>l.status===Fe.APPROVED&&l.type===dt.LISTENING&&!l.isInRound).sort((l,c)=>l.createdAt-c.createdAt);a.length>0&&n.push(...a.slice(0,5))}n.forEach(a=>{const l=s.requests.find(c=>c.id===a.id);if(l&&(l.isInRound=!0),a.type===dt.SINGING){const c=s.participants.find(d=>d.id===a.participantId);c&&(c.status=Gt.READY)}}),n.length>0&&(s.currentRound=n,await wt(s))},rA=async s=>{const e=await Ye();e.currentRound=s,await wt(e)},sA=async s=>{const e=await Ye(),t=e.requests.filter(n=>!(n.status===Fe.APPROVED&&n.type===dt.SINGING&&!n.isInRound));e.requests=[...s,...t],await wt(e)},iA=async s=>{const e=await Ye(),t=e.requests.filter(n=>!(n.status===Fe.PENDING&&!n.isInRound));e.requests=[...s,...t],await wt(e)},BP=async()=>{const s=await Ye();if(!s.currentRound)return;const e=[...s.currentRound].sort((d,p)=>d.completedAt&&p.completedAt?d.completedAt-p.completedAt:d.completedAt?-1:p.completedAt?1:0),t=Date.now(),n=e.map(d=>({...d,playedAt:t,isInRound:!1,status:Fe.DONE,completedAt:d.completedAt||t})),a=s.currentRound.map(d=>d.id);s.history=[...n,...s.history].slice(0,100),s.requests=s.requests.filter(d=>!a.includes(d.id));const l=await $t();for(const d of n){const p=l.findIndex(g=>g.id===d.participantId);p!==-1&&(l[p].personalHistory=[d,...l[p].personalHistory].slice(0,50))}await nt.set(Pn,l);const c=await rr();if(c){const d=l.find(p=>p.id===c.id);d&&await nt.set(On,d)}s.currentRound=null,s.isPlayingVideo=!1,await wt(s)},b0=async(s,e)=>{const t=await Ye(),n=t.nextRequestNumber++,a={...s,id:Math.random().toString(36).substr(2,9),requestNumber:n,createdAt:Date.now(),status:Fe.APPROVED,isInRound:!1,playedAt:void 0,aiIntro:void 0};t.requests.push(a),await wt(t)},VE=async()=>{const s=await Ye();s.history=[],await wt(s)},zP=async(s,e,t)=>{if(Mt){ct.sendAction({type:"ADD_CHAT",payload:{name:e,text:t},senderId:s});return}const n=await Ye(),a={id:Math.random().toString(36).substr(2,9),senderId:s,senderName:e,text:t,timestamp:Date.now()};n.messages||(n.messages=[]),n.messages.push(a),await wt(n)},FP=async()=>{const s=await $t(),e=Date.now(),t=1440*60*1e3,n=s.filter(a=>!a.password&&a.createdAt&&e-a.createdAt>t);if(n.length>0){for(const a of n)await Rf(a.id);console.log(`Cleaned up ${n.length} expired guest accounts.`)}},GP=async s=>{try{const e={id:s.id,hostName:s.hostName||"SingMode DJ",hostUid:s.hostUid||"anonymous-host",appVersion:"singmode-v2",isActive:s.isActive??!0,startedAt:s.startedAt||Date.now(),lastHeartbeat:Date.now(),participantsCount:0,venueName:s.venueName||"SingMode Venue"};await YN(Mr(Ht,"sessions",s.id),e)}catch(e){console.error("Error registering session:",e)}},qP=async s=>{try{const e=Mr(Ht,"sessions",s);await Bp(e,{lastHeartbeat:Date.now()})}catch(e){console.error("Error sending heartbeat:",e)}},aA=async s=>{try{const e=Mr(Ht,"sessions",s);await Bp(e,{isActive:!1,endedAt:Date.now()})}catch(e){console.error("Error unregistering session:",e)}},HP=async()=>{try{const s=xs(Ht,"sessions"),e=Vp(s,Up("isActive","==",!1)),t=await Cc(e),n=[];return t.forEach(a=>{n.push(a.data())}),n.sort((a,l)=>(l.endedAt||0)-(a.endedAt||0))}catch(s){return console.error("Error fetching session history:",s),[]}},$P=async()=>{try{const s=xs(Ht,"sessions"),e=Vp(s,Up("isActive","==",!0)),t=await Cc(e),n=new Map,a=Date.now(),l=300*1e3;return t.forEach(c=>{const d=c.data();if(d.lastHeartbeat&&a-d.lastHeartbeat<l){const g=d.hostUid||`${d.hostName}-${d.venueName}`,v=n.get(g);(!v||d.lastHeartbeat>v.lastHeartbeat)&&n.set(g,d)}}),Array.from(n.values()).sort((c,d)=>d.lastHeartbeat-c.lastHeartbeat)}catch(s){return console.error("Error fetching sessions:",s),[]}},KP=async()=>{try{const s=xs(Ht,"sessions"),e=await Cc(s),t=Date.now(),n=1800*1e3;let a=0;for(const l of e.docs){const c=l.data();c.lastHeartbeat&&t-c.lastHeartbeat>n?(await yh(l.ref),a++):!c.lastHeartbeat&&t-c.startedAt>n&&(await yh(l.ref),a++)}return{success:!0,deletedCount:a}}catch(s){return console.error("Cleanup failed:",s),{success:!1,error:String(s)}}},oA=s=>{const e=xs(Ht,"sessions"),t=Vp(e,Up("isActive","==",!0));return op(t,n=>{const a=new Map,l=Date.now(),c=300*1e3;n.forEach(p=>{const g=p.data(),v=g.lastHeartbeat&&l-g.lastHeartbeat<c,x=g.appVersion==="singmode-v2";if(v&&x){const E=g.hostUid||`${g.hostName}-${g.venueName}`,A=a.get(E);(!A||g.lastHeartbeat>A.lastHeartbeat)&&a.set(E,g)}});const d=Array.from(a.values()).sort((p,g)=>g.lastHeartbeat-p.lastHeartbeat);s(d)})},lA=({onSubmit:s,onCancel:e,title:t="Song Request",showSingerName:n=!1,initialSingerName:a="",initialSongName:l="",initialArtist:c="",initialYoutubeUrl:d="",initialType:p=dt.SINGING,submitLabel:g="SEND REQUEST",participants:v=[],currentUserId:x=""})=>{const[E,A]=ae.useState(a),O=E?`${t}: ${E}`:t,[G,J]=ae.useState(l),[ie,ce]=ae.useState(c),[le,ge]=ae.useState(d),[Ee,ve]=ae.useState(p),[C,I]=ae.useState(""),[R,L]=ae.useState(""),j=P=>{if(P.preventDefault(),(!G||!ie)&&!le||n&&!E)return;const k=v.find(rt=>rt.id===R);s({singerName:E,songName:G,artist:ie,youtubeUrl:le,type:Ee,message:C,duetPartnerId:R||void 0,duetPartnerName:k==null?void 0:k.name})};return h.jsxs("form",{onSubmit:j,className:"relative w-full bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in fade-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"mb-8 text-center",children:[h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase tracking-tight neon-text-glow-purple mb-2",children:O}),h.jsx("p",{className:"text-[10px] text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80",children:"NEW REQUEST"})]}),h.jsxs("div",{className:"space-y-6",children:[n&&h.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Your Name"}),h.jsx("input",{type:"text",required:!0,value:E,onChange:P=>A(P.target.value),placeholder:"e.g. STAR_VIBE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Song Title"}),h.jsx("input",{type:"text",value:G,onChange:P=>J(P.target.value),placeholder:"TITLE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Artist"}),h.jsx("input",{type:"text",value:ie,onChange:P=>ce(P.target.value),placeholder:"ARTIST",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"YouTube URL (Optional)"}),h.jsx("input",{type:"url",value:le,onChange:P=>ge(P.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all text-xs font-mono shadow-inner tracking-wider"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Note for DJ"}),h.jsx("textarea",{value:C,onChange:P=>I(P.target.value),placeholder:"Key change? Dedication?",rows:2,className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest resize-none"})]}),Ee===dt.SINGING&&v.length>1&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Duet Partner (Optional)"}),h.jsxs("select",{value:R,onChange:P=>L(P.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-green)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest appearance-none",children:[h.jsx("option",{value:"",children:"-- NO PARTNER --"}),v.filter(P=>P.id!==x).map(P=>h.jsx("option",{value:P.id,children:P.name},P.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Performance Mode"}),h.jsx("div",{className:"flex bg-black/40 p-1.5 rounded-2xl border-2 border-white/5",children:Object.values(dt).map(P=>h.jsx("button",{type:"button",onClick:()=>ve(P),className:`flex-1 py-3 rounded-xl font-bold text-[9px] uppercase tracking-widest transition-all font-righteous ${Ee===P?"bg-[var(--neon-cyan)] text-black shadow-[0_0_20px_rgba(0,229,255,0.4)]":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:P},P))})]}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{type:"button",onClick:e,className:"flex-1 py-4 bg-black hover:bg-white/5 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all border-2 border-white/10 font-righteous",children:"DISCARD"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_30px_rgba(255,0,127,0.4)] transition-all font-righteous hover:scale-105",children:g})]})]})]})};function QP(){if(typeof window>"u")return"/";const s=window.location.pathname.match(/^(\/[^/]+\/)/);return s?s[1]:"/"}function lp(){if(typeof window>"u")return"";const s=window.location.port?`:${window.location.port}`:"",e=QP(),t=localStorage.getItem("kstar_network_ip");if(t){if(t.startsWith("http")){const l=t.replace(/\/$/,"");return l.endsWith(e.replace(/\/$/,""))?l+"/":l+e}return`http://${t.trim()}${s}${e}`}const n=window.location.origin;return!n.includes("localhost")&&!n.includes("127.0.0.1"),n+e}function fy(s){localStorage.setItem("kstar_network_ip",s),window.dispatchEvent(new Event("kstar_sync"))}function cA(){return localStorage.getItem("kstar_network_ip")}const YP=[{songName:"Bohemian Rhapsody",artist:"Queen"},{songName:"Toxic",artist:"Britney Spears"},{songName:"Someone Like You",artist:"Adele"},{songName:"Sweet Caroline",artist:"Neil Diamond"},{songName:"Wonderwall",artist:"Oasis"},{songName:"Dancing Queen",artist:"ABBA"},{songName:"I Will Survive",artist:"Gloria Gaynor"},{songName:"Don't Stop Believin'",artist:"Journey"},{songName:"Livin' on a Prayer",artist:"Bon Jovi"},{songName:"My Way",artist:"Frank Sinatra"}],ma=({url:s})=>s?h.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-3 rounded-2xl text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border-2 border-[var(--neon-cyan)]/10 transition-all shadow-xl",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,XP=({url:s})=>{const[e,t]=ae.useState(!1);if(!s)return null;const n=()=>{navigator.clipboard.writeText(s).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:n,title:"Copy Video URL",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-cyan)] text-black border-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)]":"text-slate-400 hover:text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1-2-2h9a2 2 0 0 1 2 2v1"})]})})},Cu=({request:s})=>{const[e,t]=ae.useState(!1),n=s.songName||s.songName,a=()=>{const c=(s.type||s.type||dt.SINGING)===dt.SINGING?" Karaoke":" Lyric",d=`${n} ${s.artist}${c}`;navigator.clipboard.writeText(d).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:a,title:"Copy Command String",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-green)] text-black border-[var(--neon-green)] shadow-[0_0_20px_rgba(0,255,157,0.4)]":"text-slate-400 hover:text-[var(--neon-green)] hover:bg-[var(--neon-green)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})},Ru=({request:s})=>{const e=s.songName||s.songName,t=()=>{const a=(s.type||s.type||dt.SINGING)===dt.SINGING?" Karaoke":" Lyric",l=encodeURIComponent(`${e} ${s.artist}${a}`);window.open(`https://www.youtube.com/results?search_query=${l}`,"_blank")};return h.jsx("button",{onClick:t,title:"Search on YouTube",className:"p-3 rounded-2xl transition-all border-2 text-rose-500 hover:text-white hover:bg-rose-500 border-white/5 shadow-xl",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})})},JP=({onAdminAccess:s})=>{var Qa,Mi;const[e,t]=ae.useState(null),[n,a]=ae.useState([]),[l,c]=ae.useState(!1),[d,p]=ae.useState(!1),[g,v]=ae.useState(null),[x,E]=ae.useState(!1),[A,O]=ae.useState(!1),[G,J]=ae.useState(!1),[ie,ce]=ae.useState(!1),[le,ge]=ae.useState(!1),[Ee,ve]=ae.useState([]),[C,I]=ae.useState(null),[R,L]=ae.useState(null),[j,P]=ae.useState(null),[k,rt]=ae.useState({}),[Et,X]=ae.useState(!1),[ue,Ie]=ae.useState(!1),[Ge,$e]=ae.useState([]),[M,ne]=ae.useState("DAY_SHOW"),[fe,be]=ae.useState(!1),[Re,ke]=ae.useState(cA()||""),[Ue,Dt]=ae.useState(""),[pt,ss]=ae.useState(!1),[Kt,_s]=ae.useState(0),[ws,vr]=ae.useState(null),[Ii,is]=ae.useState(new Set),[Qs,Ys]=ae.useState(""),[Tt,st]=ae.useState(null),[nn,Es]=ae.useState("COMMAND"),[Yn,bn]=ae.useState(""),[rn,ir]=ae.useState(null),[ar,Y]=ae.useState(""),[pe,mt]=ae.useState(localStorage.getItem("singmode_last_session_name")),Xn=ae.useRef(null);ae.useRef(null);const Vr=ae.useRef(null),Mn=ae.useRef(null),[at,Rt]=ae.useState(null),[xe,un]=ae.useState(null),[or,Ts]=ae.useState(!1),[An,Lr]=ae.useState({name:"",password:""}),[jt,xn]=ae.useState(""),[Ur,Vn]=ae.useState(!1),[Jo,Ci]=ae.useState(""),[br,Xs]=ae.useState([]),[qa,as]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),Qt=(T,ee)=>{as({isOpen:!0,message:T,onConfirm:ee})};ae.useEffect(()=>{const T=oA(ee=>{Xs(ee)});return()=>T()},[]);const Te=ae.useCallback(async()=>{const T=await Ye();t(T);const ee=await $t();a(ee)},[]);ae.useEffect(()=>{if(xe&&n.length>0){const T=n.find(ee=>ee.id===xe.id);T&&JSON.stringify(T)!==JSON.stringify(xe)&&un(T)}},[n,xe]),ae.useEffect(()=>(Te(),window.addEventListener("kstar_sync",Te),window.addEventListener("storage",Te),()=>{window.removeEventListener("kstar_sync",Te),window.removeEventListener("storage",Te),os()}),[Te]),ae.useEffect(()=>{ue&&HP().then($e).catch(console.error)},[ue]);const Ss=async T=>{be(!0);const ee=T||M;try{await Xu("DJ",ee),localStorage.setItem("singmode_last_session_name",ee),mt(ee),Te()}catch(U){alert(U.message)}finally{be(!1)}};ae.useEffect(()=>{(!(e!=null&&e.currentRound)||e.currentRound.length===0)&&is(new Set)},[e==null?void 0:e.currentRound]);const os=()=>{Mn.current&&cancelAnimationFrame(Mn.current),Vr.current&&(Vr.current.getTracks().forEach(T=>T.stop()),Vr.current=null),Xn.current&&(Xn.current.close(),Xn.current=null),ss(!1),_s(0)},Ha=async(T,ee,U)=>{const se=`Taking the stage now, it's ${T} with "${ee}"!`;await Ju(U,{aiIntro:se}),rt(me=>({...me,[U]:se})),await Te()},xr=async T=>{if(R&&xe)R.type==="favorite"?await IP(xe.id,R.itemId,{songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type}):await kP(xe.id,R.itemId,{songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type,message:T.message}),L(null);else if(C)await Ju(C.id,{participantName:T.singerName||C.participantName,songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type,message:T.message}),I(null);else if(g)await SP(g.id,{songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type}),v(null);else if(d)await TP({songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type}),p(!1);else{let ee=(j==null?void 0:j.id)||"DJ-MANUAL",U=T.singerName||(j==null?void 0:j.name)||"Guest";if(!j&&T.singerName){const se=await vh({name:T.singerName});se.success&&se.profile&&(ee=se.profile.id,U=se.profile.name,await Sa(ee))}await ga({participantId:ee,participantName:U,songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type,message:T.message}),c(!1),P(null)}await Te()},lr=async T=>{await Sa(T.id);const ee=[],U=new Set,se=me=>{me.forEach(Oe=>{if(ee.length>=3)return;const gt=`${Oe.songName.toLowerCase().trim()}|${Oe.artist.toLowerCase().trim()}`;U.has(gt)||(U.add(gt),ee.push({songName:Oe.songName,artist:Oe.artist,youtubeUrl:Oe.youtubeUrl||""}))})};se([...T.favorites].sort(()=>Math.random()-.5)),ee.length<3&&se([...T.personalHistory].sort(()=>Math.random()-.5)),ee.length<3&&(e!=null&&e.verifiedSongbook)&&se([...e.verifiedSongbook].sort(()=>Math.random()-.5)),ee.length<3&&se([...YP].sort(()=>Math.random()-.5));for(const me of ee){const Oe=await ga({participantId:T.id,participantName:T.name,songName:me.songName,artist:me.artist,youtubeUrl:me.youtubeUrl,type:dt.SINGING});Oe&&await Iu(Oe.id)}await Na(T.id,Gt.READY),await Te()},Vt=(T,ee,U)=>{const se=U===dt.SINGING?`${T} ${ee} karaoke`:`${T} ${ee} Lyrics Letra`,me=`https://www.youtube.com/results?search_query=${encodeURIComponent(se)}`;window.open(me,"_blank")},Yt=async T=>{var se;await VP(T),await Te();const U=(se=(await Ye()).currentRound)==null?void 0:se.find(me=>me.id===T);U&&Ha(U.participantName,U.songName,U.id)},Br=T=>{T.youtubeUrl?window.open(T.youtubeUrl,"_blank"):Vt(T.songName,T.artist,T.type)},Ri=async T=>{T.preventDefault(),xn("");const ee={name:An.name,password:An.password||void 0};let U;at?U=await qo(at.id,ee):U=await vh(ee),U.success?(Rt(null),Ts(!1),Lr({name:"",password:""}),xn(""),await Te()):xn(U.error||"Action failed.")},[ki,$a]=ae.useState(null),[Wo,_r]=ae.useState(null),Js=(T,ee,U)=>{$a(ee),_r(U),T.dataTransfer.effectAllowed="move"},wr=T=>{T.preventDefault(),T.dataTransfer.dropEffect="move"},Jn=async(T,ee,U)=>{if(T.preventDefault(),!(ki===null||Wo!==U)){if(U==="ROUND"&&(e!=null&&e.currentRound)){const se=Array.from(e.currentRound),[me]=se.splice(ki,1);se.splice(ee,0,me),await rA(se)}else if(U==="QUEUE"){const me=Array.from(hn),[Oe]=me.splice(ki,1);me.splice(ee,0,Oe),await sA(me)}else if(U==="PENDING"){const me=Array.from(Ns),[Oe]=me.splice(ki,1);me.splice(ee,0,Oe),await iA(me)}$a(null),_r(null),await Te()}},Ln=T=>{Rt(T),Ts(!0),Lr({name:T.name,password:T.password||""})},zr=T=>{Rt(T),Ci(""),Vn(!0),xn(""),un(null)},Xt=async T=>{if(T.preventDefault(),!at)return;const ee=await qo(at.id,{password:Jo});ee.success?(un(at),Rt(null),Vn(!1),Ci(""),xn(""),await Te()):xn(ee.error||"Update failed.")},Di=()=>{c(!1),I(null),L(null),P(null),E(!1),O(!1),J(!1),ce(!1),ge(!1),Ts(!1),Vn(!1),Rt(null),un(null),X(!1),p(!1),v(null),st(null),ir(null)},Ka=()=>{fy(Re),X(!1),Te()},Fr=async()=>{await UP(),O(!1),await Te();const T=await Ye();T.currentRound&&T.currentRound.forEach(ee=>{ee.aiIntro||Ha(ee.participantName,ee.songName,ee.id)})},Gr=async()=>{await NP(),ge(!1),await Te()},qr=T=>{const ee=n.find(U=>U.id===T);ee&&(un(ee),J(!0))};if(!e)return h.jsx("div",{className:"flex items-center justify-center p-20 min-h-screen",children:h.jsx("div",{className:"w-12 h-12 border-4 border-teal-400 border-t-transparent rounded-full animate-spin"})});const Ns=e.requests.filter(T=>T.status===Fe.PENDING&&!T.isInRound),ji=e.requests.filter(T=>T.status===Fe.APPROVED&&T.type===dt.SINGING&&!T.isInRound),Zo=e.participants.filter(T=>ji.some(ee=>ee.participantId===T.id)).sort((T,ee)=>(ee.joinedAt||0)-(T.joinedAt||0)),Wn={};ji.forEach(T=>{Wn[T.participantId]||(Wn[T.participantId]=[]),Wn[T.participantId].push(T)}),Object.keys(Wn).forEach(T=>{Wn[T].sort((ee,U)=>ee.createdAt-U.createdAt)});const hn=[];let Lt=0,Jt=!0;for(;Jt;)Jt=!1,Zo.forEach(T=>{Wn[T.id]&&Wn[T.id][Lt]&&(hn.push(Wn[T.id][Lt]),Jt=!0)}),Lt++;const cr=e.requests.filter(T=>T.status===Fe.APPROVED&&T.type===dt.LISTENING&&!T.isInRound),Oi=e.participants.filter(T=>T.status===Gt.READY).length,et=e.verifiedSongbook||[],Ft=ct.getRoomId();lp()+(Ft?`?room=${Ft}`:"");const Er=({name:T,isActive:ee})=>{const U=T.split(" ").map(Oe=>Oe[0]).join("").toUpperCase().slice(0,2),se=["from-teal-400 to-indigo-500","from-rose-400 to-orange-500","from-amber-400 to-rose-500","from-indigo-400 to-purple-500","from-emerald-400 to-teal-500"],me=T.length%se.length;return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${se[me]} p-[2px] shadow-lg shadow-black/20`,children:h.jsx("div",{className:"w-full h-full bg-slate-950 rounded-[14px] flex items-center justify-center",children:h.jsx("span",{className:"text-xl font-black text-white tracking-widest",children:U})})}),ee&&h.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-[var(--neon-green)] rounded-full border-4 border-slate-950 animate-pulse"})]})},As=et.filter(T=>T.songName.toLowerCase().includes(Yn.toLowerCase())||T.artist.toLowerCase().includes(Yn.toLowerCase())),Un=async T=>{if(Tt){const ee=await ga({participantId:Tt.id,participantName:Tt.name,songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl||"",type:T.type});ee&&await Iu(ee.id),st(null),bn(""),await Te()}},Pi=T=>{v(T)};return h.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-8 space-y-12 relative font-inter text-slate-300",children:[h.jsxs("header",{className:"relative rounded-[4rem] p-1 overflow-hidden shadow-3xl mb-12 group",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] opacity-80 group-hover:opacity-100 transition-all duration-1000 animate-gradient-x"}),h.jsxs("div",{className:"relative glass-panel rounded-[3.9rem] p-10 flex flex-col md:flex-row justify-between items-center gap-12 border border-white/20 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex items-center gap-10",children:[h.jsxs("div",{className:"relative group/logo",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-[var(--neon-yellow)] to-[var(--neon-pink)] rounded-full blur-xl opacity-60 group-hover/logo:opacity-100 transition-opacity duration-500"}),h.jsx("div",{className:"relative p-1.5 rounded-full border-4 border-white/10 shadow-2xl bg-black/40",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-32 h-32 rounded-full transition-transform duration-700 group-hover/logo:rotate-[360deg]"})})]}),h.jsxs("div",{children:[h.jsxs("h1",{className:"text-8xl font-bold font-bungee text-white flex items-center gap-6 uppercase tracking-tight neon-glow-pink leading-none",children:["Singmode v.2 ",h.jsx("span",{className:"text-[var(--neon-blue)] neon-glow-cyan text-5xl font-righteous translate-y-2",children:"beta"})]}),h.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[h.jsx("span",{className:"px-4 py-1.5 rounded-full bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] text-lg font-bold uppercase tracking-widest font-righteous",children:"DJ CONSOLE"}),h.jsx("span",{className:"text-[var(--neon-blue)]/30",children:"||"}),h.jsxs("span",{className:"text-[var(--neon-blue)] text-lg font-bold uppercase tracking-widest font-righteous neon-glow-cyan",children:["SINGERS: ",e.participants.length]})]})]})]}),h.jsx("div",{className:"flex gap-4",children:h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-base text-[var(--neon-yellow)] font-bold uppercase tracking-widest font-righteous mb-1",children:"STATUS"}),h.jsxs("div",{className:"text-4xl text-white font-bold uppercase tracking-widest font-bungee flex items-center justify-end gap-3",children:["ONLINE ",h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-pulse shadow-[0_0_10px_var(--neon-green)]"})]})]})})]})]}),h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[2.5rem] p-6 border border-white/5 shadow-xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[var(--neon-purple)]/5 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6 relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-5",children:[h.jsx("span",{className:"text-4xl",children:""}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold font-bungee text-white uppercase neon-glow-purple",children:"DAY_SHOW SESSION"}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:`text-xs font-black uppercase tracking-widest font-righteous ${Ft?"text-[var(--neon-green)]":"text-slate-500"}`,children:Ft?" ACTIVE":" OFFLINE"}),Ft&&h.jsxs("span",{className:"text-slate-400 font-mono text-xs",children:["ROOM: ",h.jsx("span",{className:"text-white font-bold",children:Ft})]})]})]})]}),h.jsxs("div",{className:"flex gap-3",children:[!Ft&&h.jsx("button",{onClick:()=>Es("SESSION"),className:"px-6 py-3 bg-[var(--neon-purple)] text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-fuchsia-500 transition-all font-righteous shadow-[0_0_20px_rgba(180,0,255,0.3)]",children:" OPEN BROADCAST"}),h.jsx("button",{onClick:()=>Ie(!ue),className:"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl font-black text-xs uppercase tracking-widest font-righteous text-slate-400 hover:text-white transition-all",children:ue?" HIDE HISTORY":" SESSION HISTORY"})]})]}),ue&&h.jsx("div",{className:"mt-6 pt-6 border-t border-white/5",children:Ge.length===0?h.jsx("p",{className:"text-slate-600 font-black uppercase tracking-widest text-xs font-righteous py-4 text-center",children:"NO PREVIOUS SESSIONS RECORDED"}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Ge.slice().reverse().map(T=>h.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl hover:border-white/10 transition-all",children:[h.jsx("div",{className:"text-white font-bold font-bungee text-sm truncate",children:T.hostName||"DAY_SHOW"}),h.jsx("div",{className:"text-[var(--neon-cyan)] font-mono text-[10px] mt-1",children:new Date(T.startedAt).toLocaleString()}),T.endedAt&&h.jsxs("div",{className:"text-slate-500 text-[10px] font-righteous mt-0.5",children:["DURATION: ",Math.round((T.endedAt-T.startedAt)/6e4),"m"]})]},T.id))})})]}),h.jsx("div",{className:"sticky top-4 z-50",children:h.jsxs("div",{className:"glass-panel p-4 rounded-[2.5rem] border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-col gap-3 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[h.jsxs("div",{className:"flex gap-3 p-2 bg-black/40 rounded-[2rem] border border-white/5",children:[h.jsxs("button",{onClick:()=>c(!0),className:"px-8 py-4 bg-[var(--neon-pink)] text-black font-black hover:bg-white transition-all active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(255,42,109,0.4)] text-lg uppercase tracking-[0.2em] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:rotate-90 transition-transform",children:""})," ADD SONG"]}),h.jsxs("button",{onClick:()=>{O(!0),Te()},className:"px-8 py-4 bg-[var(--neon-blue)] text-black font-black hover:bg-white transition-all uppercase tracking-[0.2em] text-lg active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(5,217,232,0.4)] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:animate-spin",children:""})," NEXT ROUND"]})]}),h.jsx("div",{className:"w-[1px] h-12 bg-white/10 mx-2"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{ir(null),E(!0)},className:"w-14 h-14 flex items-center justify-center text-[var(--neon-yellow)] border border-[var(--neon-yellow)]/30 bg-[var(--neon-yellow)]/5 hover:bg-[var(--neon-yellow)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(255,200,87,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),h.jsx("button",{onClick:()=>J(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-blue)] border border-[var(--neon-blue)]/30 bg-[var(--neon-blue)]/5 hover:bg-[var(--neon-blue)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(5,217,232,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),h.jsx("button",{onClick:()=>ge(!0),className:"w-14 h-14 flex items-center justify-center text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:rotate-12 transition-transform",children:""})}),s&&h.jsxs("button",{onClick:s,title:"ADMIN PORTAL",className:"w-14 h-14 flex items-center justify-center text-[var(--neon-purple)] border border-[var(--neon-purple)]/30 bg-[var(--neon-purple)]/5 hover:bg-[var(--neon-purple)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(147,51,234,0.1)] group ml-4 relative",children:[h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""}),h.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[var(--neon-pink)] rounded-full animate-pulse border-2 border-black"})]}),h.jsxs("button",{onClick:()=>{Qt("Are you sure you want to sign out?",async()=>{await Fp(),window.location.reload()})},title:"SIGN OUT",className:"px-6 h-14 flex items-center justify-center gap-3 text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group ml-2",children:[h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-righteous",children:"SIGN_OUT"})]})]})]}),h.jsx("div",{className:"flex gap-1.5 overflow-x-auto no-scrollbar border-t border-white/5 pt-3",children:["COMMAND","ROTATION","PERFORMERS","LIBRARY","SESSION"].map(T=>h.jsx("button",{onClick:()=>Es(T),className:`px-6 py-2.5 rounded-full font-bungee text-sm tracking-widest transition-all whitespace-nowrap border-2 ${nn===T?"bg-white text-black border-white shadow-[0_0_20px_rgba(255,255,255,0.3)]":"bg-transparent text-slate-400 border-white/20 hover:border-white/40 hover:text-white"}`,children:T==="COMMAND"?"DECK":T==="ROTATION"?"ROTATION":T==="PERFORMERS"?"PERFORMERS":T==="LIBRARY"?"LIBRARY":"SESSION"},T))})]})}),h.jsxs("main",{className:"min-h-[600px] animate-in fade-in duration-500",children:[nn==="COMMAND"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 animate-in slide-in-from-bottom-2",children:[h.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[e.currentRound&&h.jsxs("section",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-[0_0_100px_rgba(255,42,109,0.3)] zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-orange)] opacity-20 animate-pulse"}),h.jsxs("div",{className:"relative bg-[#150030]/90 p-10 rounded-[2.8rem] backdrop-blur-xl border-2 border-[var(--neon-green)]/50",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-6xl animate-pulse",children:""})," NOW PLAYING"]}),h.jsx("button",{onClick:async()=>{await BP(),await Te()},className:"px-8 py-3 bg-[var(--neon-pink)] text-black text-base font-bold uppercase hover:bg-white transition-all rounded-[1rem] tracking-widest font-righteous shadow-[0_0_20px_var(--neon-pink)] active:scale-95",children:"END ROUND"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:e.currentRound.map((T,ee)=>{const U=e.participants.find(gt=>gt.id===T.participantId),se=(U==null?void 0:U.status)===Gt.READY,me=e.currentRound.findIndex(gt=>gt.status!==Fe.DONE),Oe=ee===(me===-1?0:me);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${Oe?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"relative",children:[Oe&&h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-[var(--neon-green)] text-black text-[8px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] z-20",children:"LIVE"}),h.jsx("button",{onClick:()=>{const gt=T.type===dt.SINGING?" Karaoke":" Lyric",Zn=`${T.songName} ${T.artist}${gt}`;navigator.clipboard.writeText(Zn)},title:"Copy Command String",className:`w-16 h-16 flex flex-col justify-center items-center border-2 rounded-2xl transition-all shrink-0 active:scale-95 ${Oe?"border-[var(--neon-green)] bg-[var(--neon-green)]/10 text-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"border-white/10 text-slate-400 hover:border-white/30 hover:bg-white/5"}`,children:h.jsx("span",{className:"text-2xl font-bold font-mono tracking-tighter",children:T.requestNumber})})]}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-2xl font-black uppercase font-righteous tracking-tight leading-tight ${Oe?"text-white":"text-slate-300"}`,children:T.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:T.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("button",{onClick:()=>qr(T.participantId),className:"flex items-center gap-2 group/singer hover:underline",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${se?"bg-[var(--neon-green)] shadow-[0_0_5px_var(--neon-green)]":"bg-slate-700"}`}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",T.participantName]})]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[h.jsx("button",{onClick:async()=>{T.status===Fe.DONE?await Ju(T.id,{status:Fe.APPROVED}):await PE(T.id),await Te()},title:T.status===Fe.DONE?"Undo Done":"Mark as Done",className:`p-2 rounded-xl transition-all border-2 ${T.status===Fe.DONE?"text-yellow-500 border-yellow-500/30 bg-yellow-500/10 shadow-[0_0_15px_rgba(234,179,8,0.2)]":"text-slate-600 border-white/5 hover:border-white/20 hover:text-white"}`,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})})}),h.jsx("button",{onClick:()=>{Qt("Remove from active round?",async()=>{await ya(T.id),await Te()})},className:"w-8 h-8 flex items-center justify-center rounded bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white transition-all border border-rose-500/20",title:"REMOVE",children:""})]})]},T.id)})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/80 border-2 border-[var(--neon-blue)]/30 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(5,217,232,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8 px-2",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-cyan",children:[h.jsx("span",{className:"text-[var(--neon-blue)]",children:""})," REQUESTS"]}),h.jsxs("span",{className:"px-6 py-2 bg-[var(--neon-blue)]/10 border border-[var(--neon-blue)]/30 rounded-full text-base text-[var(--neon-blue)] font-bold tracking-widest font-righteous",children:[Ns.length," PENDING"]})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[Ns.map((T,ee)=>h.jsxs("div",{draggable:!0,onDragStart:U=>Js(U,ee,"PENDING"),onDragOver:wr,onDrop:U=>Jn(U,ee,"PENDING"),className:"bg-black/40 border border-white/5 p-4 rounded-3xl flex items-center gap-6 hover:border-[var(--neon-blue)] transition-all group cursor-move shadow-xl",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[h.jsx("div",{className:"text-xs font-black font-righteous text-[var(--neon-pink)] uppercase tracking-[0.2em] bg-[var(--neon-pink)]/10 px-2 py-0.5 rounded-full border border-[var(--neon-pink)]/20 shrink-0",children:"NEW_SIGNAL"}),h.jsx("div",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:T.songName}),h.jsxs("div",{className:"text-slate-500 text-base font-black uppercase tracking-[0.2em] font-righteous truncate",children:["/ ",T.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:()=>qr(T.participantId),className:"text-base font-bold text-[var(--neon-pink)] uppercase truncate hover:text-white transition-colors font-righteous tracking-[0.2em]",children:["@",T.participantName]}),T.message&&h.jsx("div",{className:"flex-1 max-w-md px-3 py-1 bg-black/40 border-l-2 border-[var(--neon-pink)] rounded-r-lg",children:h.jsxs("p",{className:"text-base text-white/60 font-medium italic truncate",children:['"',T.message,'"']})})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Cu,{request:T}),h.jsx(Ru,{request:T}),h.jsx(ma,{url:T.youtubeUrl}),h.jsx("button",{onClick:()=>I(T),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white/50 hover:text-white border border-white/5",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:async()=>{await Iu(T.id),await Te()},className:"px-6 py-3 bg-[var(--neon-blue)] text-black text-sm font-black uppercase hover:bg-white transition-all rounded-xl tracking-[0.1em] shadow-[0_0_20px_rgba(5,217,232,0.3)]",children:"ACCEPT"}),h.jsx("button",{onClick:()=>{Qt("Delete pending request?",async()=>{await ya(T.id),await Te()})},className:"w-11 h-11 flex items-center justify-center text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all",children:""})]})]})]},T.id)),Ns.length===0&&h.jsx("div",{className:"col-span-full py-24 text-center border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-30",children:h.jsx("p",{className:"text-4xl font-black font-righteous uppercase tracking-[0.4em] italic text-slate-500",children:"NO SIGNAL DETECTED"})})]})]}),h.jsxs("div",{className:"flex flex-col gap-10",children:[h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-yellow)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-5xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-yellow flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-yellow)] animate-pulse",children:""})," QUEUE"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[hn.map((T,ee)=>h.jsxs("div",{draggable:!0,onDragStart:U=>Js(U,ee,"QUEUE"),onDragOver:wr,onDrop:U=>Jn(U,ee,"QUEUE"),className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-yellow)] transition-all cursor-move shadow-lg relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-yellow)] font-bungee text-3xl shrink-0 group-hover:scale-110 transition-transform",children:ee+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-2xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-yellow)] transition-colors",children:T.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",T.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:U=>{U.stopPropagation(),qr(T.participantId)},className:"text-sm font-black text-[var(--neon-yellow)] uppercase tracking-[0.2em] font-righteous hover:text-white transition-colors",children:["@",T.participantName]}),T.message&&h.jsxs("div",{className:"flex-1 max-w-sm px-2 py-0.5 bg-[var(--neon-yellow)]/5 border-l border-[var(--neon-yellow)]/30 rounded-r text-xs text-[var(--neon-yellow)]/70 italic truncate",children:['"',T.message,'"']})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[h.jsx("button",{onClick:async()=>{await ME(T.id,"up"),await Te()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""}),h.jsx("button",{onClick:async()=>{await ME(T.id,"down"),await Te()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Cu,{request:T}),h.jsx(Ru,{request:T}),h.jsx(ma,{url:T.youtubeUrl}),h.jsx("button",{onClick:()=>I(T),className:"p-2 text-slate-600 hover:text-white text-xs font-black uppercase tracking-widest font-righteous transition-colors border border-white/5 rounded-lg",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5",children:[h.jsx("button",{onClick:()=>Yt(T.id),className:"px-4 py-2 bg-[var(--neon-yellow)] text-black text-sm font-black uppercase rounded-lg hover:bg-white transition-all shadow-[0_0_15px_rgba(255,200,87,0.3)] tracking-wider",children:"STAGE"}),h.jsx("button",{onClick:()=>{Qt("Remove from queue?",async()=>{await ya(T.id),await Te()})},className:"w-9 h-9 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-all",children:""})]})]})]},T.id)),hn.length===0&&h.jsx("div",{className:"flex-1 py-12 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-xl font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"QUEUE EMPTY"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-blue)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-blue flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-blue)] animate-pulse",children:""})," TO HEAR (",cr.length,")"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[cr.map((T,ee)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-blue)] transition-all relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-blue)] font-bungee text-xl shrink-0",children:ee+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:T.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",T.artist]})]}),h.jsxs("div",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-[0.2em] font-righteous",children:["@",T.participantName]})]}),h.jsx("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx("button",{onClick:async()=>{await ya(T.id),await Te()},className:"px-4 py-2 text-rose-500 hover:bg-rose-500 hover:text-white rounded-lg transition-all font-black text-xs uppercase tracking-widest font-righteous",children:"REMOVE"})})]},T.id)),cr.length===0&&h.jsx("div",{className:"flex-1 py-8 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-base font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"NO LISTENING TRACKS"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-green)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl md:text-4xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-green flex items-center gap-4 flex-wrap",children:[h.jsx("span",{className:"text-[var(--neon-green)] animate-pulse",children:""})," ATMOSPHERE"]}),h.jsxs("div",{className:"space-y-10",children:[h.jsxs("div",{className:"p-6 bg-black/40 rounded-3xl border border-white/5 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[h.jsx("label",{className:"text-sm md:text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.2em] font-righteous opacity-80 break-words",children:"REQUEST LIMIT"}),h.jsx("span",{className:"text-4xl font-black text-white font-bungee neon-glow-cyan",children:e.maxRequestsPerUser||5})]}),h.jsx("input",{type:"range",min:"1",max:"20",value:e.maxRequestsPerUser||5,onChange:async T=>{await PP(parseInt(T.target.value)),await Te()},className:"w-full accent-[var(--neon-cyan)] bg-white/5 rounded-lg appearance-none h-2 cursor-pointer transition-all"}),h.jsxs("div",{className:"flex justify-between text-xs font-black text-slate-600 font-righteous uppercase tracking-widest",children:[h.jsx("span",{children:"STRICT (1)"}),h.jsx("span",{children:"UNLIMITED (20)"})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-base font-black text-[var(--neon-pink)] uppercase tracking-[0.4em] mb-4 flex items-center gap-4 font-righteous opacity-80",children:"BACKGROUND THREADS"}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...cr].reverse().map(T=>h.jsxs("div",{className:"bg-black/60 p-5 rounded-[2rem] border border-white/10 flex flex-col justify-between group hover:border-[var(--neon-pink)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4 cursor-pointer",onClick:()=>Vt(T.songName,T.artist,T.type),children:[h.jsx("div",{className:"text-2xl font-black text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-pink)] transition-all",children:T.songName}),h.jsx("div",{className:"text-base text-slate-500 uppercase tracking-widest mt-1 font-righteous opacity-60 truncate",children:T.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsx(ma,{url:T.youtubeUrl}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Yt(T.id),className:"px-4 py-2 bg-[var(--neon-purple)] text-white text-sm font-black uppercase rounded-lg hover:bg-white hover:text-black transition-all shadow-[0_0_10px_var(--neon-purple)] tracking-[0.1em]",children:"BOOST"}),h.jsx("button",{onClick:()=>{Qt("Remove from atmosphere?",async()=>{await ya(T.id),await Te()})},className:"text-rose-500/20 hover:text-rose-500 p-2 font-black",children:""})]})]})]},T.id)),cr.length===0&&h.jsx("p",{className:"text-base text-slate-700 italic px-4 font-righteous uppercase tracking-widest opacity-50",children:"NO BACKGROUND TRACKS"})]})]}),h.jsxs("div",{className:"pt-6 border-t border-white/5",children:[h.jsxs("h4",{className:"text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.4em] mb-6 flex justify-between items-center font-righteous opacity-80",children:[h.jsx("span",{children:"VERIFIED_LINKS"}),h.jsx("button",{onClick:()=>p(!0),className:"text-[var(--neon-cyan)] hover:text-white transition-colors underline decoration-dotted",children:"+ ADD NEW"})]}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...et].reverse().map(T=>h.jsxs("div",{className:"bg-black/80 p-5 rounded-[2rem] border border-white/5 flex flex-col justify-between group hover:border-[var(--neon-cyan)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4",children:[h.jsx("div",{className:"text-2xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors font-bungee mb-1",children:T.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous font-bold",children:T.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx(XP,{url:T.youtubeUrl}),h.jsx("button",{onClick:()=>v(T),className:"text-slate-600 hover:text-white p-2",children:""})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:()=>Vt(T.songName,T.artist,T.type),className:"px-3 py-1 bg-black border border-[var(--neon-cyan)] text-[var(--neon-cyan)] text-sm font-black uppercase rounded-md hover:bg-[var(--neon-cyan)] hover:text-black transition-all tracking-widest",children:"RUN"}),h.jsx("button",{onClick:()=>{c(!0)},className:"px-3 py-1 bg-[var(--neon-pink)] text-black text-sm font-black uppercase rounded-md hover:bg-white transition-all shadow-lg tracking-widest",children:"PUSH"}),h.jsx("button",{onClick:()=>{Qt("Delete verified song?",async()=>{await DE(T.id),await Te()})},className:"text-rose-500/20 hover:text-rose-500 px-1 font-black",children:""})]})]})]},T.id)),et.length===0&&h.jsx("p",{className:"text-xl text-slate-800 italic px-4 font-righteous uppercase tracking-widest opacity-30",children:"NO VERIFIED SONGS"})]})]})]})]})]})]}),h.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[600px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"PERFORMERS"}),h.jsxs("div",{className:"flex items-center gap-2 bg-white/5 px-3 py-1 rounded-full border border-white/5",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-sm text-[var(--neon-cyan)] font-bold uppercase tracking-widest",children:[Oi," ONLINE"]})]})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.participants.map(T=>{const ee=T.status===Gt.READY,se=e.requests.filter(me=>me.participantId===T.id).filter(me=>me.status===Fe.APPROVED&&me.type===dt.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] transition-all border ${ee?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"bg-black/40 border-white/5 hover:bg-white/5"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-4",children:[h.jsx("button",{onClick:async()=>{await Na(T.id,ee?Gt.STANDBY:Gt.READY),await Te()},className:`w-3 h-3 rounded-full shrink-0 transition-all ${ee?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-800"}`}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>qr(T.id),className:`text-xl font-black uppercase truncate text-left transition-colors font-righteous ${ee?"text-white":"text-slate-500 hover:text-[var(--neon-green)]"}`,children:T.name}),se>0&&h.jsxs("span",{className:"block text-xs text-[var(--neon-cyan)] font-black mt-0.5 tracking-[0.2em]",children:[se," REQUESTS"]})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>P(T),className:"p-2 hover:text-[var(--neon-cyan)] transition-colors text-slate-600",children:"+"}),h.jsx("button",{onClick:()=>{Qt(`Remove ${T.name}?`,async()=>{await hy(T.id),await Te()})},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-colors",children:""})]})]},T.id)}),e.participants.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg font-righteous uppercase tracking-widest",children:"NO DATA"})})]})]}),h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[400px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await VE(),await Te()},className:"text-sm font-bold text-rose-500/40 hover:text-rose-500 uppercase tracking-widest transition-all",children:"CLEAR"})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.history.map((T,ee)=>h.jsxs("div",{className:"bg-black/40 p-4 rounded-2xl border border-white/5 flex flex-col group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{className:"min-w-0 pr-2",children:[h.jsx("div",{className:"text-xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-purple)] transition-colors font-bungee",children:T.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous",children:T.artist})]}),h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[h.jsx(Cu,{request:T}),h.jsx(Ru,{request:T}),h.jsx(ma,{url:T.youtubeUrl})]})]}),h.jsxs("div",{className:"flex items-center justify-between mt-2 border-t border-white/5 pt-2",children:[h.jsxs("span",{className:"text-base font-black text-[var(--neon-pink)] uppercase truncate",children:["@",T.participantName]}),h.jsx("button",{onClick:async()=>{await b0(T),await Te()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-pink)] hover:underline transition-all uppercase tracking-widest",children:"RE-QUEUE"})]})]},ee)),e.history.length===0&&h.jsx("div",{className:"text-center py-16 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-800",children:"EMPTY"})})]})]})]})]}),nn==="ROTATION"&&h.jsxs("div",{className:"space-y-16 animate-in slide-in-from-bottom-2 pb-32",children:[e.currentRound&&e.currentRound.length>0&&h.jsxs("section",{className:"glass-panel border-4 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(0,255,157,0.3)] relative overflow-hidden neon-sign-border-green",children:[h.jsxs("div",{className:"flex items-center gap-8 mb-12",children:[h.jsx("div",{className:"w-8 h-8 bg-[var(--neon-green)] rounded-full animate-ping shadow-[0_0_25px_var(--neon-green)]"}),h.jsx("h3",{className:"text-6xl font-black text-white uppercase tracking-tighter font-righteous neon-glow-green",children:"NOW PLAYING"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:e.currentRound.map((T,ee)=>{const U=e.currentRound.findIndex(me=>me.status!==Fe.DONE),se=ee===(U===-1?0:U);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${se?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsx("div",{className:"w-16 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:h.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${se?"text-[var(--neon-green)]":"text-slate-400"}`,children:T.requestNumber})}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-3xl font-black uppercase truncate font-righteous tracking-tight ${se?"text-white":"text-slate-300"}`,children:T.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:T.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",T.participantName]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-6 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[se&&h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] mr-2 shrink-0",children:"LIVE"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Cu,{request:T}),h.jsx(Ru,{request:T}),h.jsx(ma,{url:T.youtubeUrl}),h.jsx("button",{onClick:()=>I(T),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white/5 hover:bg-white hover:text-black border border-white/10 transition-all text-slate-400 group",title:"EDIT",children:h.jsx("span",{className:"text-sm font-black font-righteous",children:"EDIT"})}),h.jsx("button",{onClick:()=>Br(T),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-black border border-white/20 hover:bg-white hover:text-black hover:border-white transition-all group",title:"RESET TRACK",children:h.jsx("span",{className:"text-lg",children:""})}),h.jsxs("button",{disabled:T.status===Fe.DONE,onClick:async()=>{await PE(T.id),await Te()},className:`h-10 px-6 rounded-lg text-sm font-black uppercase tracking-widest font-righteous transition-all flex items-center gap-2 ${T.status===Fe.DONE?"bg-white/10 text-white/40 cursor-not-allowed border border-white/5":"bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black border border-[var(--neon-cyan)]/50"}`,children:[h.jsx("span",{children:T.status===Fe.DONE?"COMPLETED":"DONE"}),T.status!==Fe.DONE&&h.jsx("span",{className:"text-lg leading-none",children:""})]})]})]})]},T.id)})})]}),h.jsxs("section",{className:"bg-[#050510] border-4 border-[var(--neon-cyan)]/30 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(0,229,255,0.15)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[h.jsx("div",{className:"w-4 h-4 bg-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)] rounded-full animate-pulse"}),h.jsx("h3",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"UPCOMING"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-6",children:[hn.map(T=>h.jsxs("div",{className:"relative group perspective-1000",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-purple)] to-[var(--neon-blue)] rounded-[2.5rem] blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),h.jsxs("div",{className:"relative bg-[#101015] p-8 rounded-[2.5rem] border border-white/10 flex justify-between items-center group-hover:border-[var(--neon-cyan)] transition-all shadow-2xl h-full",children:[h.jsxs("div",{className:"min-w-0 pr-6 flex-1",children:[h.jsx("div",{className:"text-white font-black uppercase truncate text-4xl font-bungee tracking-tight mb-2 group-hover:text-[var(--neon-cyan)] transition-colors",children:T.songName}),h.jsxs("div",{className:"text-lg text-slate-500 uppercase flex items-center gap-3 font-righteous tracking-[0.2em] opacity-80",children:[h.jsxs("span",{className:"text-[var(--neon-green)] font-black",children:["@",T.participantName]}),h.jsx("span",{className:"opacity-20",children:"|"}),h.jsx("span",{className:"truncate",children:T.artist})]})]}),h.jsxs("div",{className:"flex gap-3 shrink-0 flex-col",children:[h.jsx("button",{onClick:()=>Yt(T.id),className:"px-6 py-3 bg-[var(--neon-green)] text-black text-base font-black rounded-xl uppercase tracking-[0.2em] font-righteous shadow-[0_0_20px_var(--neon-green)] transition-all hover:bg-white hover:scale-105",children:"STAGE"}),h.jsx("button",{onClick:async()=>{await ya(T.id),await Te()},className:"px-6 py-3 border border-white/10 text-white/40 hover:text-rose-500 hover:border-rose-500/50 rounded-xl transition-all text-lg font-black uppercase tracking-[0.2em]",children:"REMOVE"})]})]})]},T.id)),hn.length===0&&h.jsx("div",{className:"col-span-full py-32 text-center border-4 border-dashed border-white/5 rounded-[4rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] italic font-righteous text-slate-700",children:"NO DATA STREAM"})})]})]})]}),nn==="PERFORMERS"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 animate-in slide-in-from-bottom-2 pb-32",children:[h.jsxs("section",{className:"lg:col-span-8 bg-[#0a0a0a] border-4 border-[var(--neon-cyan)]/20 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(0,229,255,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"SINGERS"}),h.jsxs("div",{className:"flex items-center gap-4 px-6 py-2 bg-black/40 border border-[var(--neon-cyan)]/30 rounded-full shadow-lg",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-lg font-bold text-[var(--neon-cyan)] uppercase tracking-widest font-righteous",children:[Oi," ACTIVE"]})]})]}),h.jsxs("div",{className:"grid gap-6",children:[e.participants.map(T=>{const ee=T.status===Gt.READY,se=e.requests.filter(me=>me.participantId===T.id).filter(me=>me.status===Fe.APPROVED&&me.type===dt.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-6 rounded-[2rem] transition-all border-2 ${ee?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.15)]":"bg-black/40 border-white/5 hover:border-white/20"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-6 text-left",children:[h.jsx("button",{onClick:async()=>{await Na(T.id,ee?Gt.STANDBY:Gt.READY),await Te()},className:`w-12 h-12 rounded-full shrink-0 border-2 transition-all flex items-center justify-center ${ee?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_20px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-white/50"}`,children:ee&&h.jsx("div",{className:"w-4 h-4 bg-white rounded-full animate-pulse"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>qr(T.id),className:`font-bold text-4xl uppercase truncate font-bungee tracking-tight transition-colors ${ee?"text-white":"text-slate-600 hover:text-[var(--neon-green)]"}`,children:T.name}),se>0&&h.jsxs("div",{className:"text-base font-bold text-[var(--neon-cyan)] uppercase mt-1 tracking-widest font-righteous opacity-90",children:[se," TRACKS READY"]})]})]}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("button",{onClick:()=>P(T),className:"px-6 py-3 bg-[var(--neon-cyan)]/10 text-[var(--neon-cyan)] rounded-xl border border-[var(--neon-cyan)]/50 transition-all font-righteous text-base font-black uppercase tracking-[0.2em] hover:bg-[var(--neon-cyan)] hover:text-black hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"ADD TRACK"}),h.jsx("button",{onClick:()=>{Qt(`Remove ${T.name}?`,async()=>{await hy(T.id),await Te()})},className:"text-rose-500/30 hover:text-rose-500 p-3 transition-colors text-3xl font-black",children:""})]})]},T.id)}),e.participants.length===0&&h.jsx("div",{className:"py-32 text-center border-4 border-dashed border-white/5 rounded-[3rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.6em] italic font-righteous text-slate-800",children:"NO SIGNALS"})})]})]}),h.jsxs("section",{className:"lg:col-span-4 lg:sticky lg:top-36 h-fit bg-[#050510] border-4 border border-white/5 rounded-[3.5rem] p-8 shadow-[0_0_60px_rgba(157,0,255,0.15)] relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-purple",children:"SESSION LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await VE(),await Te()},className:"text-sm font-black text-rose-500/40 hover:text-rose-500 uppercase tracking-[0.3em] font-righteous transition-all",children:"CLEAR ALL"})]}),h.jsxs("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[e.history.filter(T=>(T.playedAt||0)>=(e.startedAt||0)).map((T,ee)=>h.jsxs("div",{className:"bg-black/40 p-5 rounded-[1.5rem] border border-white/5 group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-2xl font-black text-white uppercase truncate font-bungee tracking-tight group-hover:text-[var(--neon-purple)] transition-colors",children:T.songName}),h.jsx("div",{className:"text-sm text-slate-600 font-bold uppercase truncate font-righteous tracking-widest mt-1",children:T.artist})]}),h.jsx(ma,{url:T.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-3 mt-1",children:[h.jsxs("button",{onClick:()=>qr(T.participantId),className:"text-sm font-black text-[var(--neon-pink)] uppercase truncate hover:text-white font-righteous tracking-widest transition-colors mb-0",children:["@",T.participantName]}),h.jsx("button",{onClick:async()=>{await b0(T),await Te()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-cyan)] hover:text-white transition-all font-righteous tracking-widest uppercase ml-auto",children:"RELOAD"})]})]},ee)),e.history.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-700",children:"EMPTY"})})]})]}),h.jsxs("section",{className:"lg:col-span-12 bg-black/40 border-4 border-white/5 rounded-[3rem] p-10 mt-10 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-cyan",children:"COMPLETED ROUNDS"}),h.jsx("div",{className:"text-[var(--neon-cyan)]/40 text-sm font-black uppercase tracking-[0.4em] font-righteous",children:"HISTORY"})]}),h.jsx("div",{className:"grid gap-12",children:(()=>{const T={};e.history.filter(U=>(U.playedAt||0)>=(e.startedAt||0)).forEach(U=>{const se=U.playedAt||0;T[se]||(T[se]=[]),T[se].push(U)});const ee=Object.keys(T).map(Number).sort((U,se)=>se-U);return ee.length===0?h.jsx("div",{className:"text-center py-24 border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-20",children:h.jsx("p",{className:"text-2xl font-black uppercase tracking-[0.4em] font-righteous text-slate-500",children:"HISTORY_NULL"})}):ee.map(U=>h.jsxs("div",{className:"bg-[#050510] border-2 border-white/5 rounded-[2.5rem] p-8 relative group hover:border-[var(--neon-cyan)]/30 transition-all",children:[h.jsxs("div",{className:"absolute top-0 left-10 py-1 px-4 bg-[var(--neon-cyan)] text-black text-[10px] font-black uppercase tracking-widest rounded-b-lg font-righteous shadow-[0_0_15px_rgba(0,229,255,0.4)]",children:["ROUND_",new Date(U).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",children:T[U].map((se,me)=>h.jsxs("div",{className:"flex flex-col p-4 bg-black/40 rounded-2xl border border-white/5 group/song hover:bg-white/5 transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("div",{className:"text-lg font-black text-white uppercase truncate font-bungee tracking-tight group-hover/song:text-[var(--neon-cyan)] transition-colors",children:se.songName}),h.jsx(ma,{url:se.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-widest font-righteous",children:["@",se.participantName]}),h.jsxs("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-tighter",children:["POS_",me+1]})]})]},se.id))})]},U))})()})]})]}),nn==="LIBRARY"&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-2 space-y-10 pb-32",children:[h.jsx("div",{className:"sticky top-0 z-40 pt-4 -mt-4",children:h.jsxs("div",{className:"relative group p-1 rounded-[2.5rem] bg-[#050510]/90 shadow-2xl backdrop-blur-xl border border-white/10",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)]/20 via-[var(--neon-purple)]/20 to-[var(--neon-cyan)]/20 blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),h.jsx("input",{type:"text",placeholder:"SEARCH SONGBOOK...",value:ar,onChange:T=>Y(T.target.value),className:"w-full bg-black/50 border-2 border-white/10 rounded-[2.3rem] py-6 pl-16 pr-32 text-2xl font-bold tracking-widest text-white placeholder:text-slate-600 focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous uppercase"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors pointer-events-none",children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),h.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:h.jsx("button",{onClick:()=>p(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-[2rem] font-black text-base uppercase tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.4)] active:scale-95 transition-all font-righteous hover:bg-white hover:scale-105",children:"+ ADD NEW"})})]})}),h.jsx("div",{className:"flex flex-col gap-3",children:(()=>{const ee=((e==null?void 0:e.verifiedSongbook)||[]).map(U=>({...U,isVerified:!0,title:U.songName,source:"VERIFIED"})).filter(U=>{if(!ar)return!0;const se=ar.toLowerCase();return U.title.toLowerCase().includes(se)||U.artist.toLowerCase().includes(se)});return ee.length===0?h.jsxs("div",{className:"col-span-full text-center py-40 opacity-30 border-4 border-dashed border-white/5 rounded-[4rem]",children:[h.jsx("div",{className:"text-8xl mb-6 opacity-50 grayscale animate-pulse",children:ar?"":""}),h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] font-righteous text-slate-600",children:ar?"NO MATCH FOUND":"SONGBOOK EMPTY"})]}):ee.map((U,se)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-4 rounded-[2rem] flex items-center justify-between group hover:border-[var(--neon-cyan)] transition-all relative hover:z-50 shadow-lg",children:[h.jsxs("div",{className:"flex items-center gap-6 flex-1 min-w-0",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black rounded-lg border border-white/10 text-[var(--neon-cyan)] text-2xl",children:""}),h.jsx("div",{className:"min-w-0 pr-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[U.isVerified&&h.jsx("div",{className:"px-2 py-0.5 bg-[var(--neon-pink)] text-black rounded-full text-[10px] font-black uppercase tracking-widest font-righteous shrink-0",children:"VERIFIED"}),h.jsx("h4",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-cyan)] transition-colors",children:U.title}),h.jsxs("span",{className:"text-base text-slate-600 font-bold uppercase font-righteous tracking-widest truncate",children:["/ ",U.artist]})]})})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Cu,{request:U}),h.jsx(Ru,{request:U}),h.jsx(ma,{url:U.youtubeUrl}),h.jsx("button",{onClick:async()=>{await DE(U.id).then(Te)},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-all text-xl",children:""})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 ml-4",children:[h.jsxs("div",{className:"relative group/assign",children:[h.jsx("button",{className:"px-6 py-2.5 bg-white text-black text-sm font-black uppercase rounded-lg hover:bg-[var(--neon-cyan)] transition-all font-righteous tracking-wider",children:"ASSIGN"}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-cyan)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/assign:opacity-100 group-hover/assign:visible transition-all p-4 z-50 backdrop-blur-xl w-[200px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"TRANSMIT TO:"}),h.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:[e.participants.map(me=>h.jsx("button",{onClick:async()=>{const Oe=await ga({participantId:me.id,participantName:me.name,songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:dt.SINGING});Oe&&await Iu(Oe.id),await Te()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-cyan)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:me.name},me.id)),h.jsx("div",{className:"h-[1px] bg-white/10 my-2"}),h.jsx("button",{onClick:async()=>{const me=await ga({participantId:"DJ-MANUAL",participantName:"GUEST",songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:dt.SINGING});me&&await Iu(me.id),await Te()},className:"w-full text-left p-2 rounded-lg bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)] hover:text-black text-sm font-black uppercase font-righteous transition-all",children:"+ GUEST"})]})]})]}),h.jsxs("div",{className:"relative group/star",children:[h.jsx("button",{className:"px-4 py-2.5 bg-black border border-white/10 text-[var(--neon-pink)] rounded-lg font-black text-sm uppercase tracking-widest hover:border-[var(--neon-pink)] transition-all font-righteous",children:""}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-pink)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/star:opacity-100 group-hover/star:visible transition-all p-4 z-50 backdrop-blur-xl w-[180px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-pink)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"ADD FAVORITE:"}),h.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:e.participants.map(me=>h.jsx("button",{onClick:async()=>{await CP(me.id,{songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:U.type}),await Te()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-pink)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:me.name},me.id))})]})]})]})]})]},se))})()})]})]}),A&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-6 z-[100] backdrop-blur-xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 shadow-[0_0_100px_rgba(255,42,109,0.2)] animate-in zoom-in-95 duration-500 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-start mb-8",children:[h.jsx("h2",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee neon-glow-pink",children:"REVIEW LINEUP"}),h.jsx("button",{onClick:()=>O(!1),className:"text-slate-600 hover:text-white font-bold text-5xl px-2 transition-all transform hover:scale-110",children:""})]}),h.jsx("div",{className:"mb-8 text-lg text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80 decoration-dotted underline underline-offset-4",children:"OPERATIONAL READY CHECK"}),h.jsx("div",{className:"space-y-4 mb-10 max-h-[400px] overflow-y-auto pr-4 custom-scrollbar",children:(()=>{var ee;const T=e.participants.filter(U=>{var se;return(se=e.requests)==null?void 0:se.some(me=>me.participantId===U.id&&me.status===Fe.APPROVED&&me.type===dt.SINGING&&!me.isInRound)}).sort((U,se)=>(se.joinedAt||0)-(U.joinedAt||0));if(T.length>0)return T.map(U=>{var Oe;const se=U.status===Gt.READY,me=(Oe=e.requests)==null?void 0:Oe.find(gt=>gt.participantId===U.id&&gt.status===Fe.APPROVED&&gt.type===dt.SINGING&&!gt.isInRound);return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] border-2 transition-all duration-300 ${se?"bg-[#150030] border-[var(--neon-green)] shadow-[0_0_20px_rgba(57,255,20,0.15)]":"bg-black/40 border-white/5 opacity-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsx("button",{onClick:async()=>{await Na(U.id,se?Gt.STANDBY:Gt.READY),await Te()},className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center transition-all border-2 ${se?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-slate-600"}`,children:se&&h.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:`font-bold uppercase text-2xl truncate tracking-tight font-bungee ${se?"text-white":"text-slate-600"}`,children:U.name}),se?me?h.jsx("div",{className:"text-[var(--neon-cyan)] text-base font-black uppercase tracking-[0.2em] font-righteous mt-0.5 opacity-90",children:me.songName}):h.jsx("div",{className:"text-rose-500 text-sm font-black uppercase tracking-[0.1em] font-righteous mt-0.5",children:" NO SIGNAL"}):h.jsx("div",{className:"text-slate-700 text-sm font-black uppercase tracking-[0.2em] font-righteous mt-0.5",children:"STANDBY"})]})]}),se&&me&&h.jsx("div",{className:"shrink-0 text-sm bg-[var(--neon-cyan)] text-black px-4 py-1.5 rounded-full font-black uppercase tracking-widest font-righteous shadow-[0_0_10px_var(--neon-cyan)] animate-in fade-in zoom-in",children:"READY"})]},U.id)});{const U=((ee=e.requests)==null?void 0:ee.filter(se=>se.status===Fe.APPROVED&&se.type===dt.LISTENING&&!se.isInRound).sort((se,me)=>se.createdAt-me.createdAt).slice(0,5))||[];return U.length>0?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-dashed border-white/10 text-center",children:h.jsx("p",{className:"text-[var(--neon-blue)] font-black uppercase tracking-widest font-righteous",children:"FALLBACK: LISTENING MODE"})}),U.map(se=>h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-[1.5rem] border-2 bg-[#0a0a20] border-[var(--neon-blue)]/30",children:[h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"text-[var(--neon-blue)] text-xl font-black uppercase tracking-tight font-bungee",children:se.songName}),h.jsx("div",{className:"text-slate-500 text-sm font-bold uppercase tracking-widest font-righteous",children:se.artist})]}),h.jsxs("div",{className:"text-xs font-black uppercase tracking-widest text-[var(--neon-pink)] font-righteous",children:["@",se.participantName]})]},se.id))]}):h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[2.5rem] border-4 border-dashed border-white/5 animate-in fade-in duration-700",children:h.jsx("p",{className:"text-slate-700 text-2xl font-black uppercase tracking-[0.4em] font-righteous",children:"NO DATA"})})}})()}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>O(!1),className:"flex-1 py-4 bg-black hover:bg-white hover:text-black text-white border border-white/10 rounded-xl font-black uppercase text-base tracking-widest transition-all font-righteous",children:"CANCEL"}),(()=>{var me;const T=e.participants.filter(Oe=>{var gt;return(gt=e.requests)==null?void 0:gt.some(Zn=>Zn.participantId===Oe.id&&Zn.status===Fe.APPROVED&&Zn.type===dt.SINGING&&!Zn.isInRound)}).length,ee=((me=e.requests)==null?void 0:me.filter(Oe=>Oe.status===Fe.APPROVED&&Oe.type===dt.LISTENING&&!Oe.isInRound).length)||0,U=T>0?T:ee,se=T>0?"ACTIVATE ROUND":"ACTIVATE LISTENING";return h.jsx("button",{onClick:Fr,disabled:U===0,className:`flex-[2] py-4 rounded-xl font-black uppercase text-base tracking-widest transition-all flex items-center justify-center gap-3 shadow-lg font-righteous ${U>0?"bg-[var(--neon-green)] hover:bg-white hover:text-black text-black hover:scale-105":"bg-slate-900 text-slate-800 cursor-not-allowed border border-white/5"}`,children:U>0?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-ping"}),se," (",U,")"]}):"IDLE"})})()]}),h.jsxs("div",{className:"bg-[#151520] p-6 rounded-[2rem] border border-white/5 mt-8",children:[h.jsxs("h3",{className:"text-xl font-black text-white uppercase tracking-widest font-righteous mb-4 flex items-center gap-3",children:[h.jsx("span",{className:"text-[var(--neon-purple)]",children:""})," Priority Protocol"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.values(Us).map(T=>h.jsxs("button",{onClick:()=>{LP(T)},className:`p-4 rounded-xl border-2 text-left transition-all relative overflow-hidden group ${e.queueStrategy===T?"bg-[var(--neon-purple)]/20 border-[var(--neon-purple)] text-white shadow-[0_0_15px_var(--neon-purple)]":"bg-black/40 border-white/5 text-slate-500 hover:border-white/20 hover:text-slate-300"}`,children:[h.jsx("div",{className:"font-bold font-righteous uppercase tracking-wider relative z-10",children:T.replace("_"," ")}),h.jsxs("div",{className:"text-[10px] uppercase font-mono mt-1 opacity-60 relative z-10",children:[T==="FRESH_MEAT"&&"New Singers First",T==="FAIR_ROTATION"&&"Fewest Songs + Oldest Wait",T==="FIFO"&&"Strict First In First Out",T==="OLDEST_MEMBER"&&"Oldest Singers First",T==="RANDOM"&&"Chaotic Shuffle"]}),e.queueStrategy===T&&h.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-[var(--neon-green)] animate-pulse"})]},T))})]})]})}),le&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-rose-500/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(244,63,94,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-rose-500 shadow-[0_0_20px_rgba(244,63,94,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-[2rem] border-2 border-rose-500/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(244,63,94,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-rose",children:"SYSTEM RESET"}),h.jsxs("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:["This will ",h.jsx("span",{className:"text-rose-500 underline decoration-2 underline-offset-4 decoration-rose-500",children:"TERMINATE ALL SESSIONS"}),", clear requests, and wipe history logs."]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>ge(!1),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:Gr,className:"flex-[2] py-4 bg-rose-500 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(244,63,94,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"EXECUTE WIPE"})]})]})}),(G||xe)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[70] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-6xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-purple",children:"User Directory"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] uppercase font-black tracking-[0.3em] font-righteous opacity-80 mt-1",children:"Authenticated Identities & Signal History"})]}),h.jsxs("div",{className:"flex gap-3",children:[xe&&h.jsx("button",{onClick:()=>un(null),className:"px-6 py-3 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/10 transition-all",children:" ALL ACCOUNTS"}),h.jsx("button",{onClick:()=>{Qt("DANGER: This will permanently delete ALL GUEST ACCOUNTS and DUPLICATE ENTRIES from the Firestore database. Proceed?",async()=>{const T=await tA();T.success?(alert(`DATABASE CLEANUP SUCCESS: Removed ${T.deletedCount} orphan records.`),await Te()):alert(`CLEANUP FAILED: ${T.error}`)})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/50 text-rose-500 rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-rose-500 hover:text-white transition-all hover:scale-105",children:"PURGE GUESTS"}),h.jsx("button",{onClick:()=>Ts(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"+ NEW ACCOUNT"}),h.jsx("button",{onClick:Di,className:"text-slate-600 hover:text-white p-2 ml-2 font-black text-4xl transition-colors transform hover:scale-110",children:""})]})]}),h.jsx("div",{className:"p-6 border-b-2 border-white/5 bg-black/20",children:h.jsxs("div",{className:"relative group max-w-2xl mx-auto",children:[h.jsx("input",{type:"text",placeholder:"SCANNING DIRECTORY RECORDS...",value:Ue,onChange:T=>Dt(T.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-10 py-4 text-white font-black uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-12 custom-scrollbar bg-black/20",children:xe?h.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500 grid lg:grid-cols-12 gap-8",children:[h.jsx("div",{className:"lg:col-span-4 space-y-6",children:h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[3rem] p-8 shadow-2xl relative overflow-hidden group hover:border-[var(--neon-purple)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-[var(--neon-purple)]/10 blur-[60px] rounded-full -mr-24 -mt-24 group-hover:bg-[var(--neon-purple)]/20 transition-all"}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[h.jsx("div",{className:"scale-125 mb-4",children:h.jsx(Er,{name:xe.name,isActive:e.participants.some(T=>T.id===xe.id)})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"text-sm font-bold text-[var(--neon-cyan)] uppercase tracking-widest mb-2 font-righteous",children:"SINGER PROFILE"}),h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee break-words",children:xe.name})]}),h.jsxs("div",{className:"w-full mt-8 space-y-3 pt-6 border-t border-white/5",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"SINGER ID"}),h.jsxs("span",{className:"text-[var(--neon-pink)] font-mono opacity-80",children:[xe.id.slice(0,8),"..."]})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"SECURITY"}),h.jsx("span",{className:`px-2 py-0.5 rounded-full ${xe.password?"bg-[var(--neon-pink)]/10 text-[var(--neon-pink)]":"bg-slate-900 text-slate-600"}`,children:xe.password?"SECURE PIN":"OPEN LINK"})]})]}),h.jsxs("div",{className:"w-full mt-10 space-y-3",children:[h.jsx("button",{onClick:()=>zr(xe),className:"w-full py-3 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"CHANGE PASSWORD"}),h.jsx("button",{onClick:async()=>{ir(xe),E(!0),await Sa(xe.id),await Te()},className:"w-full py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all shadow-[0_0_15px_rgba(0,229,255,0.3)] font-righteous hover:bg-white",children:"SYNC QR CODE"}),h.jsx("div",{className:"pt-2 border-t border-white/5 mt-2 space-y-2"}),h.jsx("button",{onClick:()=>{Qt("Permanently delete this account?",async()=>{await Rf(xe.id),un(null),await Te()})},className:"w-full py-3 bg-rose-500/5 hover:bg-rose-500 text-rose-500/40 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all border border-transparent hover:border-rose-500/30 font-righteous mt-2",children:"TERMINATE ACCOUNT"})]})]})]})}),h.jsx("div",{className:"lg:col-span-8 space-y-6",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-pink)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["LIBRARY STARS (",xe.favorites.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[xe.favorites.map(T=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl flex justify-between items-center group hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-black text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-pink)] transition-colors",children:T.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:T.artist})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:async()=>{await ga({participantId:xe.id,participantName:xe.name,songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type}),await Te()},className:"px-3 py-1.5 bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[var(--neon-cyan)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-cyan)] hover:text-black transition-all",children:"ADD"}),h.jsx("button",{onClick:()=>L({type:"favorite",itemId:T.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:()=>{Qt("Remove from stars?",async()=>{await AP(xe.id,T.id),await Te()})},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]},T.id)),xe.favorites.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"Catalog is empty"})]})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-cyan)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["PERFORMANCE LOG (",xe.personalHistory.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[xe.personalHistory.map((T,ee)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:T.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:T.artist})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:[h.jsx("button",{onClick:()=>L({type:"history",itemId:T.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:()=>{Qt("Erase from history?",async()=>{await RP(xe.id,T.id),await Te()})},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]}),h.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[h.jsx("span",{className:"text-xs text-slate-700 font-black uppercase font-righteous tracking-widest",children:new Date(T.createdAt).toLocaleDateString()}),h.jsx("button",{onClick:async()=>{await b0(T),await Te()},className:"px-3 py-1.5 bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-pink)] hover:text-black transition-all",children:"RE-QUEUE"})]})]},ee)),xe.personalHistory.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"No transmissions recorded"})]})]})]})]})})]}):Ur?h.jsxs("form",{onSubmit:Xt,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:"SECURITY UPDATE"}),h.jsxs("p",{className:"text-center text-slate-400 font-righteous uppercase tracking-widest mb-8",children:["UPDATING KEY FOR: ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:at==null?void 0:at.name})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"NEW ENCRYPTION PIN"}),h.jsx("input",{required:!0,type:"password",value:Jo,onChange:T=>{Ci(T.target.value),xn("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all",placeholder:"ENTER NEW PIN"})]}),jt&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",jt]})})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{Vn(!1),un(at),Rt(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"UPDATE KEY"})]})]}):or?h.jsxs("form",{onSubmit:Ri,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:at?"Modify Profile":"New User Account"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"IDENTITY HANDLE"}),h.jsx("input",{required:!0,type:"text",value:An.name,onChange:T=>{Lr({...An,name:T.target.value}),xn("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]}),jt&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",jt]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"ENCRYPTION PIN (OPTIONAL)"}),h.jsx("input",{type:"password",value:An.password,onChange:T=>Lr({...An,password:T.target.value}),className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{Ts(!1),Rt(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"AUTHORIZE ACCOUNT"})]})]}):h.jsx("div",{className:"space-y-16",children:(()=>{const T=n.filter(U=>!U.password&&e.participants.some(se=>se.id===U.id)&&(U.name.toLowerCase().includes(Ue.toLowerCase())||U.id.toLowerCase().includes(Ue.toLowerCase()))),ee=n.filter(U=>(U.password||!e.participants.some(se=>se.id===U.id))&&(U.name.toLowerCase().includes(Ue.toLowerCase())||U.id.toLowerCase().includes(Ue.toLowerCase())));return h.jsxs(h.Fragment,{children:[T.length>0&&h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-[var(--neon-green)] uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ACTIVE SIGNALS"}),h.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-[var(--neon-green)]/30 to-transparent"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:T.map(U=>h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 rounded-[2rem] p-4 flex items-center justify-between hover:border-[var(--neon-green)] transition-all shadow-lg group relative overflow-hidden",children:[h.jsxs("div",{className:"flex items-center gap-6 min-w-0 pr-4",children:[h.jsx(Er,{name:U.name,isActive:!0}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>un(U),className:"text-white font-bold text-3xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-green)] transition-colors font-bungee",children:U.name}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:"text-[10px] bg-[var(--neon-green)] text-black px-2 py-0.5 rounded-full font-black uppercase tracking-widest font-righteous shrink-0",children:"LIVE"}),h.jsxs("span",{className:"text-sm text-slate-600 uppercase font-black font-righteous tracking-widest truncate",children:[U.favorites.length,"   ",U.personalHistory.length," TX"]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 bg-black/40 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:()=>un(U),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>Ln(U),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>lr(U),className:"py-2.5 px-6 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO_SET"}),h.jsx("button",{onClick:()=>st(U),className:"py-2.5 px-6 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"MANUAL"})]}),h.jsx("button",{onClick:()=>{Qt("Terminate temporary link?",async()=>{await Rf(U.id),await Te()})},className:"w-10 h-10 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all font-black",children:""})]})]},U.id))})]}),h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-slate-600 uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ARCHIVE DIRECTORY"}),h.jsx("div",{className:"h-[1px] w-full bg-white/5"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:ee.map(U=>{const se=e.participants.some(me=>me.id===U.id);return h.jsxs("div",{className:`bg-[#101015] border-2 ${se?"border-[var(--neon-cyan)] shadow-[0_0_20px_rgba(0,229,255,0.1)]":"border-white/5"} rounded-[2.5rem] p-6 flex flex-col justify-between hover:border-[var(--neon-purple)] transition-all group`,children:[h.jsxs("div",{className:"flex justify-between items-start gap-4 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-2xl font-black border-2 ${U.password?"bg-indigo-900/50 border-[var(--neon-purple)] text-white shadow-[0_0_15px_rgba(167,139,250,0.3)]":"bg-slate-800 border-white/10 text-slate-500"}`,children:U.name.charAt(0).toUpperCase()}),U.isAdmin&&h.jsx("div",{className:"absolute -top-2 -right-2 bg-[var(--neon-pink)] text-black text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg border border-white/20",children:"ADMIN"})]}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"flex justify-between items-start gap-2",children:h.jsx("button",{onClick:()=>un(U),className:"text-white font-bold text-2xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-purple)] transition-colors font-bungee",children:U.name})}),h.jsxs("p",{className:"text-xs text-slate-500 uppercase font-black tracking-[0.2em] mt-1 font-righteous",children:[U.password?" AUTHENTICATED":"GUEST ID","  ",U.favorites.length," "]})]})]}),h.jsx("button",{onClick:()=>{ir(U),E(!0)},className:"p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-[var(--neon-cyan)]/20 hover:border-[var(--neon-cyan)] hover:text-[var(--neon-cyan)] transition-all group/qr",title:"Generate SINC QR",children:h.jsxs("div",{className:"w-6 h-6 flex flex-col justify-between items-center p-0.5",children:[h.jsx("div",{className:"w-full h-[2px] bg-current"}),h.jsxs("div",{className:"w-full flex justify-between",children:[h.jsx("div",{className:"w-[2px] h-[2px] bg-current"}),h.jsx("div",{className:"w-[2px] h-[2px] bg-current"})]}),h.jsx("div",{className:"w-full h-[2px] bg-current"}),h.jsxs("div",{className:"w-full flex justify-between",children:[h.jsx("div",{className:"w-[2px] h-[2px] bg-current"}),h.jsx("div",{className:"w-[2px] h-[2px] bg-current"})]}),h.jsx("div",{className:"w-full h-[2px] bg-current"})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>un(U),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>Ln(U),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>lr(U),className:"flex-[2] py-2.5 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO-SET"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>st(U),className:"flex-[4] py-2.5 bg-slate-900 border border-white/5 hover:border-[var(--neon-pink)] text-slate-500 hover:text-white rounded-lg flex items-center justify-center gap-2 transition-all text-xs font-black uppercase font-righteous",children:"MANUAL SELECT"}),h.jsx("button",{onClick:()=>{Qt("Erase this record permanently?",async()=>{await Rf(U.id),await Te()})},className:"flex-1 py-2.5 bg-rose-500/5 text-rose-500/20 hover:text-rose-500 border border-transparent hover:border-rose-500/30 rounded-lg transition-all flex items-center justify-center",children:""})]})]})]},U.id)})}),ee.length===0&&T.length===0&&h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-slate-800 text-base font-black uppercase tracking-[0.5em] font-righteous",children:"EMPTY DIRECTORY - NO SIGNALS DETECTED"})})]})]})})()})})]})}),(l||C||R||j||d||g)&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-[100] backdrop-blur-xl",children:h.jsx("div",{className:"w-full max-w-md",children:(()=>{let T={singerName:"",songName:"",artist:"",youtubeUrl:"",type:dt.SINGING},ee="Global Track Input";if(R&&xe)if(R.type==="favorite"){const U=xe.favorites.find(se=>se.id===R.itemId);U&&(T={singerName:xe.name,songName:U.songName,artist:U.artist,youtubeUrl:U.youtubeUrl||"",type:U.type},ee=`Edit Permanent Favorite for ${xe.name}`)}else{const U=xe.personalHistory.find(se=>se.id===R.itemId);U&&(T={singerName:xe.name,songName:U.songName,artist:U.artist,youtubeUrl:U.youtubeUrl||"",type:U.type},ee=`Edit History Entry for ${xe.name}`)}else C?(T={singerName:C.participantName,songName:C.songName,artist:C.artist,youtubeUrl:C.youtubeUrl||"",type:C.type},ee="Modify Track"):g?(T={singerName:"",songName:g.songName,artist:g.artist,youtubeUrl:g.youtubeUrl||"",type:g.type},ee="Edit Verified Song"):d?(T={singerName:"",songName:"",artist:"",youtubeUrl:"",type:dt.SINGING},ee="Add to Verified Songbook"):j&&(T.singerName=j.name,ee=`Song for ${j.name}`);return h.jsx(lA,{title:ee,showSingerName:!R&&!g&&!d,initialSingerName:T.singerName,initialSongName:T.songName,initialArtist:T.artist,initialYoutubeUrl:T.youtubeUrl,initialType:T.type,submitLabel:C||R||g?"Save Update":d?"Add to Library":"Queue Track",onSubmit:xr,onCancel:Di,participants:e.participants},(C==null?void 0:C.id)||(R==null?void 0:R.itemId)||(j==null?void 0:j.id)||(g==null?void 0:g.id)||(d?"new-verified":"new-request"))})()})}),(x||rn)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-500",children:h.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-white/10 rounded-[3rem] p-8 relative overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] via-[var(--neon-purple)] to-[var(--neon-pink)] animate-gradient-x"}),h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tight font-bungee neon-glow-white",children:rn?"USER SINC":"JOIN ROOM"}),rn&&h.jsxs("p",{className:"text-[var(--neon-cyan)] text-xs font-black uppercase tracking-widest font-righteous mt-1",children:["TARGET: ",rn.name]})]}),h.jsx("button",{onClick:()=>{E(!1),ir(null)},className:"text-slate-600 hover:text-white p-2 font-black text-3xl transition-colors",children:""})]}),h.jsx("div",{className:"flex flex-col items-center gap-4",children:(()=>{const T=lp(),ee=T.includes("localhost")||T.includes("127.0.0.1"),U=Oe=>{const gt=Oe.replace(/\/$/,"")+"/";return rn?`${gt}?userId=${rn.id}&room=${Ft||""}`:`${gt}?room=${Ft||""}`};if(!ee){const Oe=U(T);return h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.2em] text-[10px] font-righteous self-start",children:" LIVE URL  SCAN TO JOIN"}),h.jsx("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm mx-auto shadow-[0_0_40px_rgba(255,255,255,0.1)] hover:scale-105 transition-transform",children:h.jsx(ww,{value:Oe,size:300,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),h.jsx("div",{className:"w-full p-3 bg-[var(--neon-green)]/10 border border-[var(--neon-green)]/30 rounded-xl",children:h.jsx("p",{className:"text-[10px] font-mono text-[var(--neon-green)] break-all text-center",children:Oe})})]})}const se=Re.trim()?Re.trim().startsWith("http")?Re.trim():`http://${Re.trim()}:5173/SingMode-v.2/`:null,me=se?U(se):"http://enter-your-ip-below";return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"w-full p-3 bg-rose-500/20 border border-rose-500/40 rounded-xl",children:[h.jsx("p",{className:"text-rose-400 text-[10px] font-black uppercase tracking-widest text-center",children:" LOCALHOST  phones can't connect via this URL"}),h.jsx("p",{className:"text-slate-500 text-[10px] text-center mt-1 font-mono",children:"Deploy to GitHub Pages for automatic public URLs, or enter your LAN IP below"})]}),h.jsx("p",{className:"text-[var(--neon-yellow)] font-black uppercase tracking-[0.2em] text-[10px] font-righteous self-start",children:"MANUAL NETWORK IP"}),h.jsx("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm mx-auto shadow-[0_0_40px_rgba(255,255,255,0.1)] hover:scale-105 transition-transform",children:h.jsx(ww,{value:me,size:300,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),h.jsx("div",{className:"w-full p-3 bg-black/60 border border-white/10 rounded-xl",children:h.jsx("p",{className:"text-[10px] font-mono text-[var(--neon-cyan)] break-all text-center",children:se?me:"Enter IP below to generate URL"})}),h.jsx("input",{type:"text",value:Re,onChange:Oe=>ke(Oe.target.value),placeholder:"e.g. 192.168.0.160",className:"w-full bg-black border-2 border-[var(--neon-yellow)]/40 focus:border-[var(--neon-yellow)] rounded-xl px-4 py-3 text-white font-mono text-sm outline-none transition-all placeholder:text-slate-600"}),h.jsx("button",{onClick:()=>{fy(Re.trim())},className:"w-full py-3 bg-[var(--neon-yellow)] text-black rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous",children:"SAVE & USE THIS IP"})]})})()}),h.jsx("div",{className:"mt-6 p-3 bg-white/5 rounded-2xl border border-white/5 text-center",children:h.jsx("p",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-widest text-sm font-righteous",children:rn?"AUTO-LOGIN ENABLED":`ROOM ID: ${Ft}`})})]})}),Et&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-xl bg-[#050510] border-4 border-white/10 p-12 rounded-[3.5rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-glow-purple",children:"Signal Origin"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mb-12 font-righteous opacity-80",children:"Set the endpoint for guest terminal connections"}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-black/40 p-8 rounded-[2rem] border-2 border-white/5 border-dashed",children:[h.jsx("p",{className:"text-sm text-slate-500 uppercase font-black mb-3 tracking-[0.3em] font-righteous",children:"LOCAL ENVIRONMENT DETECTION"}),h.jsxs("div",{className:"text-xl text-[var(--neon-cyan)] font-mono font-black tracking-widest",children:[window.location.hostname," ",h.jsx("span",{className:"text-sm text-slate-700 opacity-60",children:"(CURRENT HOST)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-black text-slate-500 uppercase mb-4 ml-4 tracking-[0.3em] font-righteous",children:"TERMINAL ADDRESS / PUBLIC TUNNEL URL"}),h.jsx("input",{type:"text",value:Re,onChange:T=>ke(T.target.value),placeholder:"E.G. 192.168.1.15 OR HTTPS://SIGNAL.NGROK.APP",className:"w-full bg-black border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-black uppercase font-mono tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all placeholder:text-slate-800 text-lg"})]}),h.jsx("div",{className:"bg-[var(--neon-pink)]/5 border border-[var(--neon-pink)]/10 p-6 rounded-2xl",children:h.jsx("p",{className:"text-sm text-[var(--neon-pink)]/60 font-black leading-relaxed uppercase tracking-widest font-righteous italic",children:"Note: Cross-network connectivity requires tunneling (ngrok) for public-private bridge."})}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{onClick:()=>X(!1),className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:Ka,className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"AUTHORIZE CONFIG"})]})]})]})}),Tt&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-pink",children:"Signal Selection"}),h.jsxs("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mt-1 font-righteous opacity-80",children:["Verified Catalog  Target: ",h.jsx("span",{className:"text-[var(--neon-pink)]",children:Tt.name})]})]}),h.jsx("button",{onClick:()=>st(null),className:"text-slate-600 hover:text-white p-3 font-black text-4xl transition-colors transform hover:scale-110",children:""})]}),h.jsx("div",{className:"p-6 bg-black/20 border-b-2 border-white/5",children:h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"FILTER VERIFIED TRANSMISSIONS...",value:Yn,onChange:T=>bn(T.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-12 py-4 text-white font-black uppercase tracking-widest font-righteous outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:[Yn&&As.length===0&&h.jsx("div",{className:"text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO MATCHING TRANSMISSIONS"})}),!Yn&&et.length===0&&h.jsx("div",{className:"text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO VERIFIED SONGS IN LIBRARY"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(Yn?As:et).map(T=>h.jsxs("div",{className:"bg-black/40 border-2 border-white/5 rounded-2xl p-4 relative overflow-hidden group hover:border-[var(--neon-pink)] transition-all",children:[h.jsx("h3",{className:"text-lg font-black text-white uppercase truncate font-righteous",children:T.songName}),h.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-4 font-righteous",children:T.artist}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Un(T),className:"flex-1 py-2 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"SELECT"}),h.jsx("button",{onClick:()=>Pi(T),className:"flex-1 py-2 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"})]})]},T.id))})]}),h.jsx("div",{className:"p-6 border-t-2 border-white/5 flex justify-end bg-black/40 backdrop-blur-xl",children:h.jsx("button",{onClick:()=>p(!0),className:"py-3 px-6 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"ADD NEW VERIFIED SONG"})})]})}),h.jsx("style",{children:`
        @keyframes gradient-x {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient-x {
          background-size: 200% 200%;
          animation: gradient-x 3s ease infinite;
        }
        .neon-glow-pink {
          text-shadow: 0 0 10px rgba(255, 0, 255, 0.5), 0 0 20px rgba(255, 0, 255, 0.3);
        }
        .neon-glow-cyan {
          text-shadow: 0 0 10px rgba(0, 229, 255, 0.5), 0 0 20px rgba(0, 229, 255, 0.3);
        }
        .neon-glow-purple {
          text-shadow: 0 0 10px rgba(167, 139, 250, 0.5), 0 0 20px rgba(167, 139, 250, 0.3);
        }
        .neon-glow-green {
           text-shadow: 0 0 10px rgba(0, 255, 157, 0.5), 0 0 20px rgba(0, 255, 157, 0.3);
        }
        .neon-glow-white {
           text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.02);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(255, 255, 255, 0.1);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(255, 255, 255, 0.2);
        }
      `}),nn==="ADMIN"&&h.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/5 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--neon-green)]/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsx("div",{className:"flex justify-between items-center mb-10 relative z-10",children:h.jsxs("div",{children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-5xl",children:""})," SESSION CONTROL"]}),h.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest mt-2 font-righteous",children:"MANAGE ACTIVE INSTANCES"})]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[br.map(T=>h.jsxs("div",{className:"bg-black/40 border-2 border-white/5 rounded-[2rem] p-6 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("div",{className:"w-12 h-12 bg-black rounded-xl border border-white/10 flex items-center justify-center text-2xl",children:T.id===(e==null?void 0:e.id)?"":""}),h.jsx("div",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border ${T.id===(e==null?void 0:e.id)?"bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] border-[var(--neon-cyan)]":"bg-slate-800 text-slate-400 border-white/10"}`,children:T.id===(e==null?void 0:e.id)?"CURRENT":"REMOTE"})]}),h.jsx("h3",{className:"text-xl font-black text-white uppercase truncate font-bungee mb-1",children:T.venueName||"Unknown Venue"}),h.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-6 font-righteous",children:["HOST: ",T.hostName,"  ID: ",T.id]}),h.jsx("button",{onClick:()=>{Qt(`Force close session "${T.venueName}"? This cannot be undone.`,async()=>{await aA(T.id)})},className:"w-full py-3 bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white border border-rose-500/30 rounded-xl font-black uppercase tracking-widest text-xs transition-all font-righteous",children:"FORCE CLOSE"})]},T.id)),br.length===0&&h.jsx("div",{className:"col-span-full text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO ACTIVE SESSIONS FOUND"})})]})]})}),nn==="SESSION"&&h.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/5 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--neon-purple)]/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-10 relative z-10",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-purple",children:[h.jsx("span",{className:"text-5xl",children:""})," DAY_SHOW SESSION"]}),h.jsx("p",{className:"text-slate-400 mt-2 font-mono",children:"Monitor all connected devices and manage active synchronization."})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"px-6 py-3 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-3",children:[h.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest font-righteous",children:"STATUS"}),h.jsx("span",{className:`text-xl font-black ${Ft?"text-[var(--neon-green)]":"text-rose-500"} uppercase font-bungee`,children:Ft?"ACTIVE":"OFFLINE"})]}),h.jsxs("div",{className:"px-6 py-3 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-3",children:[h.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest font-righteous",children:"ROOM"}),h.jsx("span",{className:"text-2xl font-black text-white font-mono",children:Ft||"----"})]})]})]}),Ft?h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[(Qa=e.deviceConnections)==null?void 0:Qa.map(T=>{var me;const ee=T.status==="connected",U=T.userId?n.find(Oe=>Oe.id===T.userId)||((me=e.participants)==null?void 0:me.find(Oe=>Oe.id===T.userId)):null,se=T.isGuest||(U&&"isGuest"in U?U.isGuest:!1);return h.jsxs("div",{className:`p-6 rounded-[2rem] border transition-all relative overflow-hidden group ${ee?"bg-[#151520] border-[var(--neon-purple)]/30 hover:border-[var(--neon-purple)]":"bg-[#05050A] border-white/5 opacity-60"}`,children:[h.jsx("div",{className:`absolute top-6 right-6 w-3 h-3 rounded-full ${ee?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-rose-500"}`}),h.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[h.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-3xl shadow-lg ${U?se?"bg-[var(--neon-orange)]/20 text-[var(--neon-orange)]":"bg-[var(--neon-blue)]/20 text-[var(--neon-blue)]":"bg-white/5 text-slate-500"}`,children:U?se?"":"":""}),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-xl font-bold text-white font-righteous tracking-wide flex items-center gap-3",children:[T.id,se&&h.jsx("span",{className:"px-2 py-0.5 rounded bg-rose-500 text-[8px] font-black text-white",children:"GUEST"})]}),h.jsxs("div",{className:"text-xs font-mono text-slate-500 mt-1 flex flex-col gap-1",children:[h.jsx("div",{className:"truncate max-w-[150px]",title:T.peerId,children:T.peerId}),T.userAgent&&h.jsx("div",{className:"text-[10px] text-[var(--neon-cyan)]/60 font-black uppercase flex items-center gap-1",children:T.userAgent.toLowerCase().includes("mobile")?" MOBILE":" DESKTOP"})]}),h.jsx("div",{className:`mt-2 text-xs font-bold uppercase tracking-widest px-2 py-0.5 rounded inline-block ${ee?"bg-[var(--neon-green)]/10 text-[var(--neon-green)]":"bg-rose-500/10 text-rose-500"}`,children:T.status})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"p-4 bg-black/40 rounded-xl border border-white/5",children:[h.jsx("div",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-widest mb-1",children:"Assigned Session"}),h.jsx("div",{className:"text-white font-medium truncate",children:U?U.name:h.jsx("span",{className:"text-slate-600 italic",children:"Unassigned"})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{const Oe=prompt("Enter User Name to link (must exist in Directory):");if(Oe){const gt=n.find(Zn=>Zn.name.toLowerCase()===Oe.toLowerCase());gt?(xP(T.id,gt.id,gt.isGuest),Te()):alert("User not found!")}},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 text-sm font-bold text-white transition-all",children:U?"CHANGE":"LINK USER"}),h.jsx("button",{onClick:()=>{Qt("Forget this device?",async()=>{await _P(T.id),Te()})},className:"px-4 py-3 rounded-xl bg-rose-500/10 hover:bg-rose-500/20 border border-rose-500/20 text-rose-500 transition-all",children:"Forget"})]})]})]},T.id)}),(!e.deviceConnections||e.deviceConnections.length===0)&&h.jsx("div",{className:"col-span-full py-20 text-center text-slate-500 font-mono",children:"No devices detected yet. Scan the QR code to connect."})]}):h.jsx("div",{className:"flex items-center justify-center py-20",children:h.jsxs("div",{className:"max-w-xl w-full bg-[#0a0a0a] border-4 border-dashed border-white/5 rounded-[4rem] p-16 text-center",children:[h.jsx("div",{className:"w-24 h-24 bg-[var(--neon-purple)]/10 text-[var(--neon-purple)] rounded-[2.5rem] flex items-center justify-center text-5xl mx-auto mb-10 shadow-[0_0_50px_rgba(180,0,255,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-4xl font-black text-white uppercase mb-4 font-bungee tracking-tight",children:"OPEN BROADCAST"}),h.jsxs("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-xs mb-10 font-righteous leading-relaxed",children:["ACTIVATE THE WORLDWIDE SYNC PROTOCOL. ",h.jsx("br",{}),"ALLOW SINGER CONNECTIONS AND REMOTE COMMANDS."]}),h.jsx("button",{onClick:()=>Ie(!0),className:"mb-10 px-6 py-3 bg-white/5 hover:bg-white/10 rounded-2xl border border-white/10 flex items-center justify-center gap-3 text-xs font-black text-slate-400 hover:text-white transition-all uppercase tracking-[0.2em] font-righteous mx-auto shadow-inner",children:" VIEW SESSION HISTORY"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-black text-[var(--neon-purple)] uppercase tracking-[0.3em] mb-3 font-righteous",children:"SESSION NAME / ROOM ID"}),h.jsx("input",{type:"text",value:M,onChange:T=>ne(T.target.value.toUpperCase().replace(/\s+/g,"_")),className:"w-full bg-black border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono text-center text-2xl tracking-widest focus:border-[var(--neon-purple)] outline-none transition-all"})]}),h.jsx("button",{onClick:()=>Ss(),disabled:fe||!M,className:"w-full py-6 bg-[var(--neon-purple)] text-white rounded-[1.5rem] font-black uppercase tracking-[0.2em] text-xl shadow-[0_0_40px_rgba(180,0,255,0.4)] hover:scale-105 hover:bg-fuchsia-500 transition-all disabled:opacity-50 disabled:scale-100 font-righteous",children:fe?"INITIALIZING...":"OPEN DAY_SHOW SESSION"}),pe&&pe!==M&&h.jsxs("button",{onClick:()=>Ss(pe),disabled:fe,className:"w-full py-4 bg-black border-2 border-[var(--neon-cyan)] text-[var(--neon-cyan)] rounded-[1.5rem] font-black uppercase tracking-[0.2em] text-sm shadow-[0_0_20px_rgba(0,229,255,0.2)] hover:bg-[var(--neon-cyan)]/10 transition-all font-righteous mt-4",children:["RECONNECT TO PREVIOUS: ",pe]})]})]})}),Ft&&h.jsxs("div",{className:"mt-10 p-8 bg-black/40 rounded-[2.5rem] border border-white/5 relative overflow-hidden animate-in slide-in-from-bottom-4 duration-700",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-cyan)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight font-bungee neon-text-glow-cyan",children:"Live Session Log"}),h.jsx("span",{className:"px-3 py-1 rounded-full bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[9px] font-black text-[var(--neon-cyan)] uppercase tracking-widest animate-pulse",children:" REALTIME_FEED"})]}),h.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-4 no-scrollbar custom-scrollbar",children:[(Mi=e.logs)==null?void 0:Mi.slice().reverse().map((T,ee)=>h.jsxs("div",{className:"flex gap-4 items-start animate-in slide-in-from-left-2 duration-300 group",children:[h.jsxs("span",{className:"text-[10px] font-mono text-slate-600 shrink-0 mt-0.5 group-hover:text-slate-400 transition-colors",children:["[",new Date(T.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),h.jsx("span",{className:`text-xs font-righteous uppercase tracking-wide px-2 py-0.5 rounded ${T.type==="error"?"text-rose-500 bg-rose-500/5":T.type==="warn"?"text-[var(--neon-yellow)] bg-[var(--neon-yellow)]/5":"text-slate-300 group-hover:text-white transition-colors"}`,children:T.message})]},ee)),(!e.logs||e.logs.length===0)&&h.jsx("div",{className:"text-center py-10 text-slate-700 font-black uppercase tracking-widest text-[10px] italic",children:"AWAITING_INITIAL_SYNC_EVENTS..."})]})]})]})}),ue&&h.jsx("div",{className:"fixed inset-0 bg-black/98 flex items-center justify-center p-6 z-[400] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl bg-[#050510] border-4 border-[var(--neon-purple)]/30 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(180,0,255,0.2)] flex flex-col max-h-[85vh] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[var(--neon-purple)]/5 blur-[100px] rounded-full -mr-48 -mt-48 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-12",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white uppercase tracking-tight font-bungee neon-text-glow-purple",children:"SESSION_HISTORY"}),h.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-[0.2em] text-xs mt-2 font-righteous",children:"ARCHIVE OF PREVIOUS SINGMODE V.2 BROADCASTS"})]}),h.jsx("button",{onClick:()=>Ie(!1),className:"w-16 h-16 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center text-2xl transition-all",children:""})]}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-4 space-y-4 no-scrollbar",children:Ge.length===0?h.jsx("div",{className:"py-32 text-center text-slate-600 font-black uppercase tracking-widest font-righteous italic",children:"NO PREVIOUS SESSIONS RECORDED"}):h.jsx("div",{className:"grid gap-4",children:Ge.map(T=>h.jsxs("div",{className:"p-8 bg-white/5 rounded-[2.5rem] border border-white/5 hover:border-white/10 transition-all group flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-8",children:[h.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[var(--neon-purple)]/10 border border-[var(--neon-purple)]/20 flex flex-col items-center justify-center",children:h.jsx("span",{className:"text-2xl",children:""})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight font-righteous",children:T.venueName||"Main Lounge"}),h.jsxs("div",{className:"flex items-center gap-4 mt-1 text-slate-500 font-mono text-sm",children:[h.jsxs("span",{children:["ID: ",T.id]}),h.jsx("span",{children:""}),h.jsx("span",{children:new Date(T.startedAt).toLocaleDateString()})]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-1 font-righteous",children:"Duration"}),h.jsx("div",{className:"text-white font-mono text-xl",children:T.endedAt?Math.floor((T.endedAt-T.startedAt)/(60*1e3))+" MINS":"---"})]})]},T.id))})})]})}),qa.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:qa.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>as(T=>({...T,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{as(T=>({...T,isOpen:!1})),await qa.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]})},WP=({onJoin:s,filterHostName:e})=>{const[t,n]=ae.useState([]),[a,l]=ae.useState(!0);ae.useEffect(()=>{const d=oA(p=>{n(p),l(!1)});return()=>d()},[]);const c=e?t.filter(d=>{var p;return((p=d.hostName)==null?void 0:p.toLowerCase())===e.toLowerCase()}):t;return a?h.jsx("div",{className:"text-center py-20 animate-pulse",children:h.jsx("div",{className:"text-[var(--neon-cyan)] text-xl font-black uppercase tracking-widest font-righteous",children:"SEARCHING FOR STAGES..."})}):c.length===0?h.jsxs("div",{className:"text-center py-20 px-6 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5 mx-auto max-w-2xl",children:[h.jsx("p",{className:"text-[var(--neon-pink)] text-2xl font-black uppercase tracking-widest font-bungee mb-4",children:"NO STAGES FOUND"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-wider text-sm",children:"There are no active sessions nearby."})]}):h.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-ping"}),h.jsx("h2",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] font-righteous text-lg",children:"LIVE STAGES"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(d=>h.jsxs("div",{className:"group relative bg-[#101015] border-2 border-white/5 hover:border-[var(--neon-cyan)] p-8 rounded-[2.5rem] transition-all hover:-translate-y-2 hover:shadow-[0_0_50px_rgba(0,229,255,0.15)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 via-transparent to-[var(--neon-purple)]/0 group-hover:from-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-purple)]/5 transition-all duration-500"}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("div",{className:"w-16 h-16 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-3xl shadow-xl group-hover:scale-110 transition-transform duration-500 group-hover:border-[var(--neon-cyan)]",children:""}),h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)]/10 text-[var(--neon-green)] border border-[var(--neon-green)]/20 rounded-lg text-[10px] font-black uppercase tracking-widest font-righteous",children:"ONLINE"})]}),h.jsx("h3",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors truncate",children:d.venueName||"OPEN MIC"}),h.jsxs("div",{className:"flex items-center gap-2 mb-8 text-slate-400 font-righteous uppercase tracking-wider text-xs",children:[h.jsx("span",{className:"text-[var(--neon-pink)]",children:"HOST:"})," ",d.hostName]}),h.jsx("button",{onClick:()=>s(d.id),className:"w-full py-4 bg-white text-black font-black uppercase tracking-[0.2em] rounded-xl hover:bg-[var(--neon-cyan)] transition-all font-righteous hover:scale-[1.02] active:scale-95 shadow-lg",children:"JOIN STAGE"})]})]},d.id))})]})},ZP=({size:s="md",className:e=""})=>{const t={sm:"w-10 h-10 text-[10px]",md:"w-14 h-14 text-sm",lg:"w-28 h-28 text-2xl"};return h.jsxs("div",{className:`flex items-center gap-4 ${e} group cursor-pointer`,children:[h.jsx("div",{className:`${t[s]} bg-black border-2 border-cyan-400 rounded-2xl flex items-center justify-center font-black text-cyan-400 shadow-[0_0_20px_rgba(34,211,238,0.2)] transition-all group-hover:neon-border-pink group-hover:text-pink-500 group-hover:scale-110 font-bungee`,children:"SM"}),h.jsxs("div",{className:"font-bungee tracking-tighter flex flex-col leading-none",children:[h.jsx("span",{className:"text-pink-500 text-[0.5em] tracking-[0.5em] mb-1 font-righteous uppercase",children:"Terminal"}),h.jsx("span",{className:"text-white uppercase group-hover:neon-glow-pink transition-all",children:"Singmode v.2"})]})]})},LE=({url:s})=>s?h.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-2 rounded-lg text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border border-[var(--neon-cyan)]/30 transition-all shadow-[0_0_10px_rgba(0,229,255,0.2)]",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,e3=()=>{var ar;const[s,e]=ae.useState(null),[t,n]=ae.useState(null),[a,l]=ae.useState(!0),[c,d]=ae.useState(""),[p,g]=ae.useState(""),[v,x]=ae.useState(""),[E,A]=ae.useState(""),[O,G]=ae.useState(""),[J,ie]=ae.useState(null),[ce,le]=ae.useState(!1),[ge,Ee]=ae.useState(null),[ve,C]=ae.useState(null),[I,R]=ae.useState("ROTATION"),[L,j]=ae.useState(!1),[P,k]=ae.useState(""),[rt,Et]=ae.useState(!1),[X,ue]=ae.useState(0),[Ie,Ge]=ae.useState(!1),[$e,M]=ae.useState("connecting"),[ne,fe]=ae.useState(void 0),[be,Re]=ae.useState([]),ke=ct.getRoomId(),Ue=lp()+(ke?`?room=${ke}`:"");new URLSearchParams(window.location.search).get("room")||new URLSearchParams(window.location.search).get("userId"),ae.useEffect(()=>{ke&&$P().then(Y=>{const pe=Y.find(mt=>mt.id===ke);pe&&fe(pe.hostName)})},[ke]);const[Dt,pt]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),ss=(Y,pe)=>{pt({isOpen:!0,message:Y,onConfirm:pe})};ae.useEffect(()=>{(async()=>{const Vr=new URLSearchParams(window.location.search).get("userId");if(Vr){console.log(`[Participant] SINC Login detected for userId: ${Vr}`);const xe=await jP(Vr);xe.success&&xe.profile&&(n(xe.profile),l(!1),window.history.replaceState({},"",window.location.pathname+(ke?`?room=${ke}`:"")))}const Mn=new URLSearchParams(window.location.search).get("room"),at=ke||Mn,Rt=await rr();if(Rt){n(Rt);const xe=await Ye(at||void 0);ie(xe);const un=xe.participants.find(or=>or.id===Rt.id);if(un)e(un);else{console.log(`[Participant] Auto-joining session ${at} for profile ${Rt.id}`);try{const or=await Sa(Rt.id);e(or)}catch(or){console.error("Auto-join failed:",or)}}}else{const xe=await Ye(at||void 0);ie(xe)}Kt()})();const pe=new URLSearchParams(window.location.search).get("room"),mt=ke||pe;mt&&(console.log(`[Participant] Initializing sync for room: ${mt}`),Xu("PARTICIPANT",mt)),ct.onConnectionStatus=Xn=>{M(Xn)}},[ke]);const Kt=async()=>{const Y=await Ye();ie(Y);const pe=await rr();if(n(pe),!pe)e(null);else{const mt=Y.participants.find(Xn=>Xn.id===pe.id);mt&&e(mt)}Re(ct.getPendingActions())};ae.useEffect(()=>(window.addEventListener("kstar_sync",Kt),window.addEventListener("storage",Kt),()=>{window.removeEventListener("kstar_sync",Kt),window.removeEventListener("storage",Kt)}),[]);const _s=async Y=>{Y.preventDefault(),d("");try{if(a){const pe=await DP(p,E);if(pe.success&&pe.profile){const mt=await Sa(pe.profile.id);e(mt),n(pe.profile)}else d(pe.error||"Authorization failed.")}else{if(E!==O){d("PASSWORDS_DO_NOT_MATCH");return}const pe=await vh({name:p,email:v||void 0,password:E||void 0},!0);if(pe.success&&pe.profile){const mt=await Sa(pe.profile.id);e(mt),n(pe.profile)}else d(pe.error||"Initialization failed.")}}catch(pe){d(pe.message||"An unexpected error occurred.")}},ws=async Y=>{s&&(await Na(s.id,Y),await Kt())},vr=async Y=>{s&&(ge?(await Ju(ge.id,{songName:Y.songName,artist:Y.artist,youtubeUrl:Y.youtubeUrl,type:Y.type,message:Y.message}),Ee(null),await Kt()):(await ga({participantId:s.id,participantName:s.name,songName:Y.songName,artist:Y.artist,youtubeUrl:Y.youtubeUrl,type:Y.type,message:Y.message}),le(!1),await Kt(),s.status!==Gt.READY&&await Na(s.id,Gt.READY)),C(null),await Kt())},Ii=()=>{le(!1),Ee(null),C(null)},is=async()=>{d("");try{const Y=`Guest-${Math.floor(Math.random()*1e4)}`,pe=await vh({name:Y},!0);if(pe.success&&pe.profile){const mt=await Sa(pe.profile.id);e(mt),n(pe.profile),C(null),le(!0),await Na(pe.profile.id,Gt.READY)}else d(pe.error||"Guest initialization failed.")}catch(Y){d(Y.message||"An unexpected error occurred.")}};if(!s)return h.jsxs("div",{className:"max-w-2xl mx-auto p-8 flex flex-col items-center justify-center min-h-[90vh] text-center animate-in fade-in duration-1000 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-[#10002B] to-black -z-10"}),h.jsxs("div",{className:"w-48 h-48 flex items-center justify-center mb-12 relative group",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)] blur-[60px] opacity-40 group-hover:opacity-60 transition-opacity"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 relative z-10 bg-black shadow-2xl",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_40px_rgba(255,0,127,0.5)] w-full h-full",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"})})})]}),h.jsx("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none",children:"Singmode v.2"}),h.jsx("p",{className:"text-[var(--neon-cyan)] font-righteous mb-16 uppercase tracking-[0.6em] text-lg font-black neon-glow-cyan",children:"SINGER LOGIN"}),h.jsxs("div",{className:"w-full max-w-lg mb-12 relative z-20",children:[h.jsx("button",{onClick:is,className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-widest text-xs mt-4",children:"GUEST PASS"})]}),h.jsxs("div",{className:"relative w-full max-w-lg",children:[h.jsx("div",{className:"absolute inset-0 flex items-center mb-8",children:h.jsx("div",{className:"w-full border-t border-white/10"})}),h.jsx("div",{className:"relative flex justify-center mb-8",children:h.jsx("span",{className:"bg-black px-4 text-slate-500 font-righteous uppercase tracking-widest text-sm",children:"MEMBER LOGIN"})})]}),h.jsxs("form",{onSubmit:_s,className:"w-full space-y-8 bg-[#050510] p-10 md:p-14 rounded-[4rem] border-4 border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)]"}),c&&h.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-500 text-base py-4 px-6 rounded-2xl font-black uppercase tracking-widest animate-pulse font-righteous",children:c}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"STAGE NAME"}),h.jsx("input",{type:"text",required:!0,value:p,onChange:Y=>g(Y.target.value),placeholder:"Stage Name",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-2xl uppercase tracking-wider placeholder:text-slate-600 font-righteous"})]}),!a&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"EMAIL (OPTIONAL)"}),h.jsx("input",{type:"email",value:v,onChange:Y=>x(Y.target.value),placeholder:"myname@emailserver.com",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all shadow-inner text-xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"PASSWORD"}),h.jsx("input",{type:"password",required:!a,value:E,onChange:Y=>A(Y.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),!a&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"CONFIRM PASSWORD"}),h.jsx("input",{type:"password",required:!0,value:O,onChange:Y=>G(Y.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsx("button",{type:"submit",className:"w-full py-6 mt-6 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-2xl font-black text-3xl shadow-[0_0_40px_rgba(255,0,127,0.3)] transition-all uppercase tracking-[0.2em] font-bungee hover:scale-[1.02] active:scale-95",children:a?"SIGN IN":"CREATE PROFILE"}),h.jsx("button",{type:"button",onClick:()=>{l(!a),d("")},className:"text-slate-600 hover:text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.3em] pt-6 block mx-auto transition-colors font-righteous border-b-2 border-transparent hover:border-[var(--neon-cyan)] pb-1",children:a?"CREATE ACCOUNT":"BACK TO START"})]})]});if(!J||!s)return h.jsxs("div",{className:"min-h-screen bg-[#050510] flex flex-col items-center justify-center p-8 space-y-12",children:[h.jsx("div",{className:"scale-125 mb-8",children:h.jsx(ZP,{})}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute -inset-4 bg-[var(--neon-cyan)]/10 rounded-full blur-xl animate-pulse"}),h.jsxs("div",{className:"relative w-32 h-32",children:[h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-cyan)]/10 border-t-[var(--neon-cyan)] rounded-full animate-spin shadow-[0_0_20px_rgba(0,229,255,0.4)]"}),h.jsx("div",{className:"absolute inset-4 border-4 border-[var(--neon-pink)]/10 border-b-[var(--neon-pink)] rounded-full animate-spin shadow-[0_0_20px_rgba(255,42,109,0.4)]",style:{animationDirection:"reverse",animationDuration:"1.5s"}}),h.jsx("div",{className:"absolute inset-8 border-4 border-white/5 border-l-white/40 rounded-full animate-spin",style:{animationDuration:"3s"}})]})]}),h.jsxs("div",{className:"text-center space-y-4 max-w-xs transition-all",children:[h.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-[0.4em] font-bungee animate-pulse drop-shadow-[0_0_10px_rgba(255,255,255,0.3)]",children:"Connecting"}),h.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-transparent via-[var(--neon-cyan)] to-transparent mx-auto opacity-50"}),h.jsx("p",{className:"text-slate-400 font-righteous tracking-[0.2em] text-xs uppercase leading-relaxed",children:ct.getRoomId()?h.jsxs(h.Fragment,{children:["Syncing with Room",h.jsx("br",{}),h.jsx("span",{className:"text-[var(--neon-cyan)] font-bold",children:ct.getRoomId()})]}):"Waiting for session data..."})]}),h.jsx("div",{className:"fixed bottom-12 left-0 right-0 flex justify-center",children:h.jsxs("div",{className:"px-4 py-2 bg-black/40 backdrop-blur-md border border-white/5 rounded-full flex items-center space-x-3",children:[h.jsx("div",{className:`w-2 h-2 rounded-full animate-ping ${$e==="connected"?"bg-green-500":"bg-amber-500"}`}),h.jsxs("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:["Network: ",$e]})]})})]});const Qs=J.requests.filter(Y=>Y.participantId===s.id),Ys=J.requests.filter(Y=>Y.status===Fe.APPROVED&&Y.type===dt.SINGING&&!Y.isInRound),Tt=J.participants.filter(Y=>Ys.some(pe=>pe.participantId===Y.id)).sort((Y,pe)=>(pe.joinedAt||0)-(Y.joinedAt||0)),st={};Ys.forEach(Y=>{st[Y.participantId]||(st[Y.participantId]=[]),st[Y.participantId].push(Y)}),Object.keys(st).forEach(Y=>{st[Y].sort((pe,mt)=>pe.createdAt-mt.createdAt)});const nn=[];let Es=0,Yn=!0;for(;Yn;)Yn=!1,Tt.forEach(Y=>{st[Y.id]&&st[Y.id][Es]&&(nn.push(st[Y.id][Es]),Yn=!0)}),Es++;const rn=nn.findIndex(Y=>Y.participantId===s.id)+1,ir=(ar=J.currentRound)==null?void 0:ar.some(Y=>Y.participantId===s.id);return h.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-10 relative",children:[h.jsxs("header",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-2xl group",children:[h.jsx("div",{className:"absolute inset-0 bg-[#0a0a0a] rounded-[2.9rem]"}),h.jsx("div",{className:"absolute top-0 inset-x-0 h-32 bg-[var(--neon-purple)]/10 blur-[50px]"}),h.jsxs("div",{className:"relative p-8 flex flex-col items-center text-center",children:[h.jsx("div",{className:"absolute top-6 right-6 z-20"}),h.jsxs("div",{className:"w-24 h-24 p-1 rounded-full border-2 border-white/10 mb-6 relative",children:[h.jsx("div",{className:"absolute inset-0 rounded-full bg-[var(--neon-pink)]/20 blur-xl"}),h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full object-cover relative z-10"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 bg-black rounded-full flex items-center justify-center border-2 border-black z-20",children:h.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse shadow-[0_0_10px_currentColor] ${$e==="connected"?"bg-[var(--neon-green)] text-[var(--neon-green)]":$e==="connecting"?"bg-[var(--neon-yellow)] text-[var(--neon-yellow)]":"bg-rose-500 text-rose-500"}`})}),h.jsx("div",{className:"absolute -bottom-2 -left-2 bg-[#101015] border border-white/10 rounded-lg px-2 py-0.5 text-[8px] font-black tracking-widest text-[var(--neon-cyan)] shadow-xl z-30 uppercase font-righteous",children:$e==="connected"?"P2P+CLOUD":"CLOUD-ONLY"})]}),h.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight uppercase leading-none font-bungee mb-2",children:s.name}),rn>0&&!ir&&h.jsxs("div",{className:"mb-4 px-6 py-2 bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 rounded-full inline-flex items-center gap-3",children:[h.jsx("span",{className:"w-2 h-2 bg-[var(--neon-cyan)] rounded-full animate-pulse"}),h.jsx("span",{className:"text-[var(--neon-cyan)] font-black text-xs uppercase tracking-[0.2em] font-righteous",children:rn===1?"NEXT UP IN ROTATION":`${rn}${rn===2?"ND":rn===3?"RD":"TH"} IN LINE`})]}),ir&&h.jsxs("div",{className:"mb-4 px-6 py-2 bg-[var(--neon-green)]/10 border border-[var(--neon-green)]/30 rounded-full inline-flex items-center gap-3 shadow-[0_0_20px_rgba(0,255,157,0.2)]",children:[h.jsx("span",{className:"w-2 h-2 bg-[var(--neon-green)] rounded-full animate-blink"}),h.jsx("span",{className:"text-[var(--neon-green)] font-black text-xs uppercase tracking-[0.2em] font-righteous",children:"LIVE ON STAGE"})]}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("button",{onClick:()=>{ss("Are you sure you want to sign out?",async()=>{await Fp(),window.location.reload()})},className:"flex items-center gap-2 px-4 py-2 bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl transition-all font-black uppercase text-[10px] tracking-widest font-righteous border border-rose-500/20 hover:border-transparent",children:[h.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"SIGN OUT"]})})]})]}),J.currentRound&&J.currentRound.length>0&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-top-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4 px-4",children:[h.jsx("div",{className:"w-2 h-2 bg-[var(--neon-green)] rounded-full animate-blink"}),h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-base font-righteous",children:"ON STAGE"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:J.currentRound.map((Y,pe)=>h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${pe===0?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"relative",children:[pe===0&&h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-[var(--neon-green)] text-black text-[8px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] z-20",children:"LIVE"}),h.jsx("div",{className:`w-14 h-14 flex flex-col justify-center items-center border-2 rounded-xl transition-all shrink-0 ${pe===0?"border-[var(--neon-green)] bg-[var(--neon-green)]/10 text-[var(--neon-green)]":"border-white/10 text-slate-400"}`,children:h.jsx("span",{className:"text-xl font-bold font-mono tracking-tighter",children:Y.requestNumber})})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-xl sm:text-2xl font-black uppercase font-righteous tracking-tight leading-tight ${pe===0?"text-white":"text-slate-300"}`,children:Y.songName}),h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-sm sm:text-lg font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:Y.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg hidden sm:inline",children:"/"}),h.jsxs("span",{className:"text-sm sm:text-lg font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",Y.participantName]})]})]})]}),h.jsx("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:pe===0&&h.jsx(LE,{url:Y.youtubeUrl})})]},Y.id))})]}),h.jsx("div",{className:"grid grid-cols-5 gap-2 bg-[#0a0a0a] p-2 rounded-2xl border border-white/5 shadow-inner",children:["ROTATION","REQUESTS","FAVORITES","HISTORY","VOCALS"].map(Y=>h.jsxs("button",{onClick:()=>R(Y),className:`py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all font-righteous flex flex-col items-center justify-center gap-1.5 ${I===Y?"bg-[#151520] text-white shadow-[0_0_20px_rgba(255,255,255,0.05)] border border-white/10":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:[h.jsx("span",{className:`text-2xl mb-0.5 ${I===Y?"text-[var(--neon-pink)]":"grayscale opacity-50"}`,children:Y==="ROTATION"?"":Y==="REQUESTS"?"":Y==="FAVORITES"?"":Y==="HISTORY"?"":""}),Y==="ROTATION"?"STAGE":Y==="REQUESTS"?"MY SONGS":Y==="FAVORITES"?"SONGBOOK":Y==="HISTORY"?"LOG":"MIC SETUP"]},Y))}),h.jsx("button",{onClick:()=>{C(null),le(!0)},className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),h.jsxs("div",{className:"flex gap-4 pt-2",children:[h.jsx("button",{onClick:()=>ws(Gt.READY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${s.status===Gt.READY?"bg-[#051005] border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.2)] text-[var(--neon-green)]":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"READY"})}),h.jsx("button",{onClick:()=>ws(Gt.STANDBY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${s.status===Gt.STANDBY?"bg-[#150505] border-rose-500 shadow-[0_0_30px_rgba(244,63,94,0.2)] text-rose-500":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"NOT YET"})})]}),(ce||ge)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-50 overflow-y-auto backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsx("div",{className:"w-full max-w-lg space-y-6",children:h.jsx(lA,{title:ge?"Remix Request":"New Transmission",submitLabel:ge?"Save Remix":"Transmit",initialSongName:(ge==null?void 0:ge.songName)||(ve==null?void 0:ve.songName)||"",initialArtist:(ge==null?void 0:ge.artist)||(ve==null?void 0:ve.artist)||"",initialYoutubeUrl:(ge==null?void 0:ge.youtubeUrl)||(ve==null?void 0:ve.youtubeUrl)||"",initialType:(ge==null?void 0:ge.type)||(ve==null?void 0:ve.type)||dt.SINGING,onSubmit:vr,onCancel:Ii,participants:J.participants,currentUserId:s.id},(ge==null?void 0:ge.id)||"new-request")})}),h.jsxs("main",{className:"min-h-[300px] pb-32",children:[I==="ROTATION"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-sm px-4 font-righteous opacity-80",children:"COMING UP"}),h.jsx("div",{className:"space-y-4",children:nn.length===0?h.jsx("div",{className:"text-center py-16 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"QUEUE EMPTY"})}):nn.map((Y,pe)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-6 rounded-[2rem] flex justify-between items-center group hover:border-[var(--neon-blue)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-blue)] transition-colors",children:Y.songName}),h.jsxs("div",{className:"text-base text-[var(--neon-cyan)] uppercase tracking-[0.2em] flex items-center gap-2 font-righteous",children:[Y.artist," ",h.jsx("span",{className:"text-white/20",children:"|"})," ",h.jsx("span",{className:"text-slate-400",children:Y.participantName})]})]}),h.jsx("div",{className:"shrink-0 w-12 h-12 rounded-full border border-[var(--neon-blue)]/50 bg-[var(--neon-blue)]/10 flex items-center justify-center text-[var(--neon-blue)] text-xl font-black font-bungee shadow-[0_0_15px_rgba(5,217,232,0.2)]",children:pe+1})]},Y.id))})]}),I==="REQUESTS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[be.filter(Y=>Y.type==="ADD_REQUEST"&&Y.payload.participantId===(s==null?void 0:s.id)).map((Y,pe)=>h.jsx("div",{className:"relative group opacity-60",children:h.jsxs("div",{className:"bg-[#151520] border-2 border-dashed border-[var(--neon-cyan)]/30 p-6 rounded-[2rem]",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"flex items-center gap-3 mb-2",children:h.jsx("div",{className:"font-bold text-white tracking-tight uppercase truncate font-bungee text-3xl italic",children:Y.payload.songName})}),h.jsx("div",{className:"text-base text-slate-400 font-bold uppercase tracking-[0.2em] truncate font-righteous",children:Y.payload.artist})]}),h.jsx("div",{className:"shrink-0 px-3 py-1 rounded-lg border border-[var(--neon-cyan)]/30 text-[var(--neon-cyan)] text-xs font-black uppercase tracking-widest animate-pulse",children:"SENDING..."})]}),h.jsx("div",{className:"mt-4 text-[10px] text-[var(--neon-cyan)] font-bold tracking-widest uppercase opacity-60 font-mono",children:"CLOUD BUFFERED // AUTO-RETRYING"})]})},`pending-${pe}`)),Qs.map(Y=>h.jsx("div",{className:"relative group",children:h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 p-6 rounded-[2rem] hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsxs("div",{className:"font-bold text-white tracking-tight uppercase truncate font-bungee text-3xl group-hover:text-[var(--neon-pink)] transition-colors",children:[h.jsxs("span",{className:"text-slate-500 mr-2 text-[11px] font-mono tracking-widest",children:["#",Y.requestNumber]}),Y.songName]}),h.jsx(LE,{url:Y.youtubeUrl})]}),h.jsx("div",{className:"text-base text-slate-400 font-bold uppercase tracking-[0.2em] truncate font-righteous",children:Y.artist})]}),h.jsx("div",{className:`shrink-0 px-3 py-1 rounded-lg border text-xs font-black uppercase tracking-widest ${Y.status===Fe.APPROVED?Y.isInRound?"bg-[var(--neon-green)] border-[var(--neon-green)] text-black animate-pulse shadow-[0_0_15px_var(--neon-green)]":"bg-[var(--neon-cyan)]/10 border-[var(--neon-cyan)] text-[var(--neon-cyan)]":"border-white/10 text-slate-600"}`,children:Y.status===Fe.APPROVED?Y.isInRound?"LIVE":"QUEUED":"PENDING"})]}),(Y.status===Fe.PENDING||Y.status===Fe.APPROVED)&&h.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/5",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:async()=>{await dy(s.id,Y.id,"up"),await Kt()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Up",children:""}),h.jsx("button",{onClick:async()=>{await dy(s.id,Y.id,"down"),await Kt()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Down",children:""})]}),h.jsx("button",{onClick:()=>Ee(Y),className:"flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white",children:"EDIT"}),h.jsx("button",{onClick:async()=>{await ya(Y.id),await Kt()},className:"flex-1 py-3 bg-rose-500/10 hover:bg-rose-500/20 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-rose-500",children:"CANCEL"})]})]})},Y.id)),Qs.length===0&&h.jsx("div",{className:"text-center py-20 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-base font-black uppercase tracking-[0.5em] font-righteous text-slate-700",children:"NO REQUESTS"})})]}),I==="FAVORITES"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"SEARCH SONGBOOK...",value:P,onChange:Y=>k(Y.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-[2rem] py-5 px-6 pl-14 text-xl font-bold uppercase tracking-wider text-white focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous placeholder:text-slate-600 shadow-inner"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-2xl text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors",children:""})]}),h.jsx("div",{className:"grid gap-3",children:(()=>{const Y=[...t.favorites.map(pe=>({...pe,isFavorite:!0})),...((J==null?void 0:J.verifiedSongbook)||[]).filter(pe=>!t.favorites.some(mt=>mt.songName===pe.songName&&mt.artist===pe.artist)).map(pe=>({...pe,isFavorite:!1}))].filter(pe=>!P||pe.songName.toLowerCase().includes(P.toLowerCase())||pe.artist.toLowerCase().includes(P.toLowerCase()));return Y.length===0?h.jsx("div",{className:"text-center py-20 opacity-30 font-righteous text-sm uppercase tracking-widest text-slate-500",children:"NO_MATCHES"}):Y.map(pe=>h.jsxs("div",{className:"bg-[#101015] p-5 rounded-[2rem] flex justify-between items-center group border-2 border-white/5 hover:border-[var(--neon-yellow)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight group-hover:text-[var(--neon-yellow)] transition-colors",children:pe.songName}),pe.isFavorite&&h.jsx("span",{className:"text-lg text-[var(--neon-yellow)] animate-pulse",children:""})]}),h.jsx("div",{className:"text-sm text-slate-400 font-bold uppercase tracking-[0.2em] font-righteous",children:pe.artist})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{C({...pe}),le(!0)},className:"bg-[var(--neon-pink)] text-black px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous shadow-[0_0_15px_rgba(255,0,127,0.3)] hover:scale-105 active:scale-95",children:"ADD"}),h.jsx("button",{onClick:async()=>{await nA(pe),await Kt()},className:`px-2 transition-colors ${pe.isFavorite?"text-rose-500":"text-slate-700 hover:text-[var(--neon-yellow)]"}`,children:pe.isFavorite?"":""})]})]},pe.id))})()})]}),I==="HISTORY"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[t.personalHistory.map((Y,pe)=>h.jsxs("div",{className:"bg-[#101015] p-6 rounded-[2rem] flex justify-between items-center border-2 border-white/5 hover:border-[var(--neon-purple)] group transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-purple)] transition-colors",children:Y.songName}),h.jsx("div",{className:"text-base text-[var(--neon-cyan)]/70 font-bold uppercase tracking-[0.2em] font-righteous",children:Y.artist})]}),h.jsx("button",{onClick:()=>{C({...Y,type:dt.SINGING}),le(!0)},className:"text-slate-600 hover:text-white border border-white/5 hover:border-white px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest transition-all font-righteous",children:"AGAIN"})]},pe)),t.personalHistory.length===0&&h.jsx("div",{className:"text-center py-20 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"NO HISTORY FOUND"})})]}),I==="VOCALS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-100 transition-opacity",children:h.jsx("span",{className:"text-5xl",children:""})}),h.jsx("h3",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-[0.3em] font-righteous mb-6",children:"VOCAL SETUP"}),h.jsxs("div",{className:"flex flex-col items-center gap-6",children:[h.jsxs("div",{className:"w-full bg-black/40 border border-white/10 rounded-2xl p-6 flex flex-col items-center",children:[h.jsx("span",{className:"text-sm font-black text-slate-500 uppercase tracking-widest font-righteous mb-2",children:"SINGER RANGE"}),h.jsx("span",{className:"text-4xl font-bold text-white uppercase font-bungee tracking-tight neon-text-glow-cyan",children:(t==null?void 0:t.vocalRange)||"UNKNOWN"})]}),rt?h.jsxs("div",{className:"w-full space-y-3 py-2",children:[h.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-[var(--neon-cyan)] animate-pulse shadow-[0_0_10px_var(--neon-cyan)]",style:{width:`${X}%`}})}),h.jsx("div",{className:"text-xs text-[var(--neon-cyan)] font-black animate-pulse font-righteous text-center tracking-[0.2em]",children:"CALIBRATING VOICE..."})]}):h.jsx("button",{onClick:async()=>{Et(!0);let Y=0;const pe=setInterval(()=>{Y+=5,ue(Y),Y>=100&&(clearInterval(pe),setTimeout(async()=>{const mt=["Soprano","Alto","Tenor","Baritone","Bass"],Xn=mt[Math.floor(Math.random()*mt.length)];t&&await OP(t.id,Xn),Et(!1),ue(0),await Kt()},500))},100)},className:"px-8 py-4 bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black rounded-xl font-black uppercase tracking-[0.2em] transition-all font-righteous border border-[var(--neon-cyan)]/30 hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"START_CALIBRATION_SEQUENCE"})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 opacity-50 relative overflow-hidden border-dashed",children:[h.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.3em] font-righteous mb-2",children:"MICROPHONE_TOOLS"}),h.jsx("p",{className:"text-slate-600 font-mono text-xs uppercase tracking-wider",children:"HARDWARE_LINK_OFFLINE // COMING_SOON"})]})]})]}),h.jsxs("footer",{className:"fixed bottom-6 left-6 right-6 z-40 flex gap-4",children:[h.jsxs("button",{onClick:()=>Ge(!0),className:"flex-1 bg-[#101015] border-2 border-[var(--neon-green)]/30 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:bg-[var(--neon-green)] hover:text-black hover:border-[var(--neon-green)] transition-all group",children:[h.jsx("span",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous group-hover:text-black text-[var(--neon-green)]",children:"RECONNECT"}),h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})]}),h.jsxs("button",{onClick:()=>j(!0),className:"flex-1 bg-[#101015] border-2 border-white/10 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:border-[var(--neon-pink)] transition-all group",children:[h.jsx("span",{className:"text-sm text-[var(--neon-pink)] font-black uppercase tracking-[0.3em] font-righteous",children:"SYSTEM_LINK"}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})})]})]}),Ie&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-4 md:p-10 overflow-hidden max-h-[90vh] overflow-y-auto",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-green)] via-[var(--neon-cyan)] to-[var(--neon-blue)] animate-gradient-x"}),h.jsx("button",{onClick:()=>Ge(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors z-50",children:""}),h.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white uppercase tracking-tight mb-8 font-bungee neon-glow-green mt-8",children:"RECONNECT"}),h.jsx(WP,{onJoin:Y=>{window.location.search=`?room=${Y}`},filterHostName:"SingMode DJ"})]})}),L&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-sm text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("button",{onClick:()=>j(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors",children:""}),h.jsx("div",{className:"bg-white p-4 rounded-[2rem] inline-block mb-8 shadow-[0_0_40px_rgba(255,255,255,0.1)]",children:h.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(Ue)}&bgcolor=ffffff`,alt:"Room QR",className:"w-48 h-48"})}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase tracking-tight mb-2 font-bungee neon-glow-white",children:"SYNC_NODE"}),h.jsx("p",{className:"text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.4em] font-righteous opacity-80",children:"SCAN TO INITIALIZE CONNECTION"})]})}),Dt.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:Dt.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>pt(Y=>({...Y,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{pt(Y=>({...Y,isOpen:!1})),await Dt.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]})},Fl=({title:s,icon:e,description:t,items:n})=>h.jsxs("div",{className:"bg-[#101015] border border-white/5 p-10 rounded-[3.5rem] hover:border-[var(--neon-pink)] transition-all backdrop-blur-xl group relative overflow-hidden shadow-2xl",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[var(--neon-pink)]/5 blur-3xl rounded-full -mr-16 -mt-16 group-hover:bg-[var(--neon-pink)]/10 transition-colors"}),h.jsx("div",{className:"w-20 h-20 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-4xl mb-8 group-hover:scale-110 group-hover:border-[var(--neon-pink)] group-hover:text-white transition-all shadow-2xl relative z-10",children:e}),h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase mb-4 tracking-tight group-hover:text-[var(--neon-pink)] transition-colors relative z-10 leading-none",children:s}),h.jsx("p",{className:"text-[var(--neon-cyan)]/70 mb-8 font-bold uppercase text-[10px] tracking-[0.2em] font-righteous leading-relaxed relative z-10 transition-opacity",children:t}),h.jsx("ul",{className:"space-y-4 relative z-10",children:n.map((a,l)=>h.jsxs("li",{className:"flex items-start gap-3 text-[11px] text-slate-500 font-bold uppercase tracking-widest font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:[h.jsx("span",{className:"text-[var(--neon-cyan)] font-bold",children:""}),a]},l))})]}),t3=({onBack:s,onAdminLogin:e})=>{const t=()=>{prompt("Enter Admin Password:")==="Organized"?e():alert("Access Denied: Incorrect Password")};return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-slate-200 p-6 md:p-16 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsx("div",{className:"absolute -top-[500px] -right-[500px] w-[1000px] h-[1000px] bg-[var(--neon-pink)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute -bottom-[500px] -left-[500px] w-[1000px] h-[1000px] bg-[var(--neon-cyan)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-5 pointer-events-none"}),h.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-24 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsx("div",{onClick:s,className:"cursor-pointer hover:scale-105 transition-transform",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-10 h-10 rounded-full border border-[var(--neon-pink)]"}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest",children:"Singmode v.2"})]})}),h.jsx("button",{onClick:s,className:"px-8 py-4 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-slate-400 hover:text-white rounded-2xl font-bold text-[9px] uppercase tracking-widest font-righteous transition-all",children:"RETURN TO HUB"})]}),h.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-32 animate-in fade-in zoom-in duration-700 delay-100",children:[h.jsxs("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-8 tracking-tight uppercase leading-none neon-text-glow-purple",children:["The ultimate ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:"karaoke"})," os"]}),h.jsx("p",{className:"text-[10px] md:text-xs text-[var(--neon-cyan)]/80 font-bold uppercase tracking-[0.4em] font-righteous leading-relaxed max-w-2xl mx-auto border-y border-[var(--neon-cyan)]/20 py-4",children:"Singmode v.2 transforms any arena into a high-fidelity visual theater. Connect instantly, dominate the queue, and emit your signal."})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-32 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200",children:[h.jsx(Fl,{title:"DJ Console",icon:"",description:"The command center for your sessions. Maintain signal flow.",items:["Real-time Queue Logic","Drag & Drop Sequencer","Instant Signal Auth","Master Output Control"]}),h.jsx(Fl,{title:"Singer Web",icon:"",description:"A personal terminal for every guest. Eliminate analog friction.",items:["Identity Transmission","Smart Vector Search","High-Speed Requests","Live Sync Lyrics"]}),h.jsx(Fl,{title:"Theater Box",icon:"",description:"A stunning visual matrix for the main screen. Pure aesthetics.",items:["Ultra-HD Playback","Generative Backgrounds","Active HUD Overlays","QR Signal Entrance"]}),h.jsx(Fl,{title:"Hybrid AI",icon:"",description:"Gemini integration enhances the arena with predictive logic.",items:["Vibe-Matched Vectors","Dynamic Visual Synthesis","Automated Interstitials","Identity Verification"]}),h.jsx(Fl,{title:"Sync Matrix",icon:"",description:"Real-time P2P technology keeps the cluster in perfect sync.",items:["Zero-Latency State","Decentralized Design","Instant Node Creation","Omni-Device Support"]}),h.jsx(Fl,{title:"Prime Suite",icon:"",description:"Unlock premium protocols for venues and power units.",items:["Broadcast Protocols","Branding Overlays","Logic Routing","Priority Channel"]}),h.jsxs("div",{className:"md:col-span-2 lg:col-span-1 border-2 border-dashed border-white/10 rounded-[3.5rem] flex flex-col items-center justify-center p-10 group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("p",{className:"text-[10px] text-slate-700 font-black uppercase tracking-[0.4em] mb-6 font-righteous group-hover:text-[var(--neon-cyan)]",children:"ADMIN LOGIN"}),h.jsx("button",{onClick:t,className:"p-6 bg-black border border-white/5 rounded-2xl text-[10px] font-black uppercase tracking-widest font-righteous text-white/40 hover:text-white hover:border-white transition-all shadow-xl",children:" ENTER ADMIN MODE"})]})]}),h.jsx("div",{className:"text-center animate-in fade-in duration-700 delay-500 pb-32",children:h.jsx("button",{onClick:s,className:"px-16 py-8 bg-[var(--neon-cyan)] hover:bg-white text-black rounded-[3rem] font-bold text-2xl uppercase tracking-widest font-righteous shadow-[0_0_50px_rgba(34,211,238,0.4)] hover:scale-105 transition-all",children:"START SINGING"})})]})]})},n3=({onBack:s})=>{const[e,t]=ae.useState(null),[n,a]=ae.useState(""),[l,c]=ae.useState(!1),[d,p]=ae.useState({primary:"#ff007f",secondary:"#05d9e8",accent:"#feff3f"}),[g,v]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),x=(A,O)=>{v({isOpen:!0,message:A,onConfirm:O})};ae.useEffect(()=>{(async()=>{const O=await Ye();t(O),O.brandIdentity&&(a(O.brandIdentity.venueName),c(O.brandIdentity.isBusinessAccount)),O.customTheme&&p({primary:O.customTheme.primaryNeon,secondary:O.customTheme.secondaryNeon,accent:O.customTheme.accentNeon})})()},[]);const E=async()=>{var O;if(!e)return;const A={...e};A.brandIdentity={venueName:n,isBusinessAccount:l,logoUrl:(O=A.brandIdentity)==null?void 0:O.logoUrl},A.customTheme={primaryNeon:d.primary,secondaryNeon:d.secondary,accentNeon:d.accent},await wt(A),document.documentElement.style.setProperty("--neon-pink",d.primary),document.documentElement.style.setProperty("--neon-cyan",d.secondary),document.documentElement.style.setProperty("--neon-yellow",d.accent),alert("Configurations locked in.")};return e?h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white p-6 md:p-16 relative overflow-hidden font-righteous",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[h.jsxs("header",{className:"flex justify-between items-center mb-20 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsxs("div",{onClick:s,className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-12 h-12 rounded-full border-2 border-[var(--neon-pink)] group-hover:scale-110 transition-all"}),h.jsx("h1",{className:"text-3xl font-bungee tracking-tight",children:"ADMIN SETTINGS"})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:s,className:"px-6 py-3 bg-black border border-white/10 hover:border-white text-slate-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all",children:"CLOSE MENU"}),h.jsxs("button",{onClick:()=>{x("Are you sure you want to sign out?",async()=>{await Fp(),window.location.reload()})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/30 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all flex items-center gap-2",children:[h.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"LOG OUT"]})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-cyan)] mb-2 uppercase",children:"Venue Settings"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"VENUE DISPLAY"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] text-slate-500 uppercase tracking-widest mb-2 ml-4",children:"Venue Display Name"}),h.jsx("input",{type:"text",value:n,onChange:A=>a(A.target.value),placeholder:"Enter Venue Name",className:"w-full bg-black/60 border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold outline-none focus:border-[var(--neon-cyan)] transition-all uppercase"})]}),h.jsxs("div",{className:"flex items-center justify-between p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1",children:"Business Account"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold",children:"Unlocks Revenue Stream Matrix"})]}),h.jsx("button",{onClick:()=>c(!l),className:`w-14 h-8 rounded-full transition-all relative ${l?"bg-[var(--neon-cyan)]":"bg-slate-800"}`,children:h.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white transition-all ${l?"right-1":"left-1"}`})})]})]})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-pink)] mb-2 uppercase",children:"Theme Matrix"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"THEME COLORS"})]}),h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Primary Neon"}),h.jsx("input",{type:"color",value:d.primary,onChange:A=>p({...d,primary:A.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Secondary Neon"}),h.jsx("input",{type:"color",value:d.secondary,onChange:A=>p({...d,secondary:A.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Accent Neon"}),h.jsx("input",{type:"color",value:d.accent,onChange:A=>p({...d,accent:A.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]})]})})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl col-span-full",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-rose-500 mb-2 uppercase",children:"System Maintenance"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"DATABASE PURGE OPERATIONS"})]}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[h.jsxs("div",{className:"flex-1 p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1 text-white",children:"Account Optimization"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold mb-4",children:"Deletes all guests and duplicate entries"}),h.jsx("button",{onClick:()=>{x("DANGER: This will permanently delete all guest accounts and duplicate stage names. Proceed?",async()=>{const A=await tA();A.success?alert(`Cleanup complete. Deleted ${A.deletedCount} items.`):alert(`Cleanup failed: ${A.error}`)})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"PURGE GUESTS & DUPLICATES"})]}),h.jsxs("div",{className:"flex-1 p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1 text-white",children:"Signal Maintenance"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold mb-4",children:"Cleans up dead or abandoned stage signals"}),h.jsx("button",{onClick:()=>{x("This will remove all inactive or stale stage sessions from the public list. Proceed?",async()=>{const A=await KP();A.success?alert(`Signal cleanup complete. Removed ${A.deletedCount} stale sessions.`):alert(`Cleanup failed: ${A.error}`)})},className:"px-6 py-3 bg-[var(--neon-purple)]/10 border border-[var(--neon-purple)] hover:bg-[var(--neon-purple)] text-[var(--neon-purple)] hover:text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"PURGE STALE SIGNALS"})]})]})]})]}),h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsx("button",{onClick:E,className:"px-16 py-6 bg-white text-black rounded-[2rem] font-bold text-xl uppercase tracking-widest font-bungee hover:bg-[var(--neon-cyan)] transition-all shadow-2xl hover:scale-105 active:scale-95",children:"SAVE CHANGES"})})]}),g.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:g.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>v(A=>({...A,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{v(A=>({...A,isOpen:!1})),await g.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]}):null},r3=()=>{const[s,e]=ae.useState("SELECT"),[t,n]=ae.useState(!0),[a,l]=ae.useState(null),[c,d]=ae.useState(!1),[p,g]=ae.useState(!1),[v,x]=ae.useState("");ae.useEffect(()=>{(async()=>{var C;const ce=new URLSearchParams(window.location.search),le=(C=ce.get("view"))==null?void 0:C.toUpperCase(),ge=ce.get("userId"),Ee=ce.get("room");(Ee||ge)&&d(!0);try{Ee||ge?(e("PARTICIPANT"),await Xu("PARTICIPANT",Ee||void 0)):le==="DJ"?e("DJ"):le==="PARTICIPANT"||le==="STAGE"?(e("PARTICIPANT"),await Xu("PARTICIPANT",void 0)):e("SELECT")}catch(I){console.error("[App] Init Error:",I),l(I.message),e("SELECT")}const ve=await Ye();ve.customTheme&&(document.documentElement.style.setProperty("--neon-pink",ve.customTheme.primaryNeon),document.documentElement.style.setProperty("--neon-cyan",ve.customTheme.secondaryNeon),document.documentElement.style.setProperty("--neon-yellow",ve.customTheme.accentNeon)),await FP(),n(!1)})()},[]);const E=async ie=>{n(!0),l(null);try{e(ie),ie==="PARTICIPANT"&&await Xu(ie)}catch(ce){l(ce.message),e("SELECT")}finally{n(!1)}},A=()=>{v.trim()&&(fy(v.trim()),g(!1),x(""))},O=lp(),G=ct.getRoomId(),J=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(O+(G?`?room=${G}`:""))}&bgcolor=ffffff`;if(t)return h.jsxs("div",{className:"min-h-screen bg-[#050510] flex flex-col items-center justify-center space-y-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black"}),h.jsxs("div",{className:"w-24 h-24 relative",children:[h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-pink)]/30 rounded-full animate-ping"}),h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-cyan)]/30 rounded-full animate-ping delay-75"}),h.jsx("div",{className:"relative z-10 w-full h-full border-4 border-t-[var(--neon-pink)] border-r-[var(--neon-purple)] border-b-[var(--neon-cyan)] border-l-[var(--neon-yellow)] rounded-full animate-spin"})]}),h.jsx("h2",{className:"text-2xl font-black font-bungee text-white uppercase tracking-widest animate-pulse z-10",children:"INITIALIZING"})]});if(s==="FEATURES")return h.jsx(t3,{onBack:()=>e("SELECT"),onAdminLogin:()=>e("ADMIN")});if(s==="ADMIN")return h.jsx(n3,{onBack:()=>e("SELECT")});if(s==="SELECT"){const ie=cA(),ce=O.includes("localhost")||O.includes("127.0.0.1");return h.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#050510] relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black -z-10"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-10"}),h.jsxs("div",{className:"max-w-7xl w-full z-10",children:[h.jsxs("div",{className:"text-center mb-20 animate-in fade-in slide-in-from-top-4 duration-1000",children:[h.jsxs("div",{className:"flex justify-center mb-10 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)]/20 blur-[100px] rounded-full"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 bg-black shadow-2xl relative z-10",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_50px_rgba(255,0,127,0.5)] w-48 h-48",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover"})})})]}),h.jsx("h1",{className:"text-6xl md:text-9xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none drop-shadow-2xl",children:"Singmode v.2"}),h.jsx("p",{className:"text-[var(--neon-yellow)] text-xl md:text-2xl font-bold tracking-widest uppercase neon-glow-yellow font-righteous",children:"KARAOKE_LOUNGE_SYSTEM"})]}),a&&h.jsxs("div",{className:"mb-12 p-10 bg-[#150005] border-4 border-rose-500 rounded-[3rem] text-center animate-in zoom-in duration-500 max-w-3xl mx-auto shadow-[0_0_60px_rgba(244,63,94,0.4)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-rose-500 animate-pulse"}),h.jsx("div",{className:"text-6xl mb-6",children:""}),h.jsx("h3",{className:"text-rose-500 font-bold uppercase tracking-widest text-3xl mb-4 font-bungee",children:"SYSTEM_CONFLICT"}),h.jsx("p",{className:"text-white text-xl font-bold leading-relaxed font-righteous",children:a}),h.jsx("p",{className:"text-rose-500/50 text-xs mt-8 uppercase font-bold tracking-widest font-righteous",children:"SINGLE_DJ_PROTOCOL_ACTIVE"})]}),h.jsxs("div",{className:`grid gap-8 ${c?"grid-cols-1 max-w-2xl mx-auto":"md:grid-cols-2"}`,children:[!c&&h.jsxs("button",{onClick:()=>E("DJ"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-pink)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(255,0,127,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-pink)]/0 to-[var(--neon-pink)]/5 group-hover:to-[var(--neon-pink)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-pink)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-pink)] transition-colors",children:"DJ_CONSOLE"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-cyan)] opacity-90 leading-relaxed",children:"COORDINATE ROTATION. APPROVE REQUESTS. COMMAND ATMOSPHERE."})]})]}),h.jsxs("button",{onClick:()=>E("PARTICIPANT"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-cyan)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(0,229,255,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 to-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-cyan)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-cyan)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGER_UI"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-yellow)] opacity-90 leading-relaxed",children:"REQUEST SONGS. FAVORITE VIBES. ACCESS SONGBOOK."})]})]})]}),h.jsxs("div",{className:"mt-16 p-10 bg-[#080808] border-2 border-white/5 rounded-[3rem] flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-green)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),h.jsx("div",{className:"bg-white p-4 rounded-3xl shrink-0 shadow-[0_0_40px_rgba(0,255,157,0.2)] border-4 border-white/10 group-hover:scale-105 transition-transform",children:h.jsx("img",{src:J,alt:"Join QR Code",width:"140",height:"140",className:"block"})}),h.jsxs("div",{className:"text-center md:text-left flex-1 relative z-10",children:[h.jsx("strong",{className:"text-[var(--neon-green)] block mb-3 uppercase tracking-[0.3em] text-xs font-black font-righteous",children:"SCAN TO JOIN"}),h.jsx("div",{className:"text-white text-xl font-mono break-all mb-4 bg-black/50 px-4 py-2 rounded-lg inline-block border border-white/5",children:O}),ce&&h.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl",children:[h.jsx("p",{className:"text-amber-500 text-[10px] font-black uppercase tracking-widest mb-2 font-righteous",children:" LOCALHOST DETECTED"}),h.jsx("button",{onClick:()=>{g(!0),x(ie||"")},className:"text-[10px] font-black text-white hover:text-[var(--neon-cyan)] uppercase tracking-[0.2em] underline decoration-white/30 hover:decoration-[var(--neon-cyan)] transition-all font-righteous",children:"CONFIGURE NETWORK IP"})]})]})]})]}),p&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-6 z-50 backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-lg bg-[#0a0a0a] border-2 border-white/10 rounded-[3rem] p-10 space-y-8 shadow-[0_0_60px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] to-[var(--neon-blue)]"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight",children:"Network Config"}),h.jsx("p",{className:"text-slate-500 text-[10px] uppercase tracking-widest font-righteous",children:"ESTABLISH REMOTE CONNECTION PROTOCOLS"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-[11px] font-bold text-[var(--neon-cyan)] uppercase tracking-[0.2em] ml-4 font-righteous",children:"Network IP Address"}),h.jsx("input",{type:"text",value:v,onChange:le=>x(le.target.value),placeholder:"e.g. 192.168.0.x OR https://....ngrok.io",className:"w-full bg-[#151520] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-sm"}),h.jsxs("p",{className:"text-slate-500 text-[9px] uppercase tracking-widest font-righteous ml-4 opacity-60",children:[h.jsx("span",{className:"text-[var(--neon-yellow)]",children:"PRO TIP:"})," Use ",h.jsx("span",{className:"text-white",children:"ngrok"})," for secure external tunneling."]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-4 bg-black border border-white/10 hover:bg-white/5 text-slate-400 hover:text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all font-righteous",children:"Cancel"}),h.jsx("button",{onClick:A,className:"flex-1 py-4 bg-[var(--neon-cyan)] text-black rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all font-righteous hover:scale-105",children:"Save Configuration"})]})]})})]})}return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white selection:bg-[var(--neon-pink)] selection:text-white",children:[h.jsx("nav",{className:"fixed top-0 inset-x-0 z-[100] backdrop-blur-xl bg-black/80 border-b border-white/5 transition-all duration-300",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>e("SELECT"),className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[var(--neon-pink)] p-0.5 group-hover:shadow-[0_0_20px_rgba(255,0,127,0.4)] transition-all",children:h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full"})}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest group-hover:text-[var(--neon-cyan)] transition-colors",children:"Singmode v.2"})]}),h.jsx("div",{className:"flex items-center gap-6",children:h.jsxs("button",{onClick:()=>{e("SELECT"),l(null)},className:"text-[9px] font-bold uppercase tracking-widest px-5 py-2.5 rounded-xl transition-all font-righteous bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white border border-white/5 hover:border-white/20",children:["EXIT ",s]})})]})}),h.jsx("main",{className:"pb-20",children:s==="DJ"?h.jsx(JP,{onAdminAccess:()=>e("ADMIN")}):h.jsx(e3,{})})]})},uA=document.getElementById("root");if(!uA)throw new Error("Could not find root element to mount to");const s3=eC.createRoot(uA);s3.render(h.jsx($I.StrictMode,{children:h.jsx(r3,{})}));
