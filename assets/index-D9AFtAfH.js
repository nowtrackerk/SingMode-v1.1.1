var _S=r=>{throw TypeError(r)};var dc=(r,e,t)=>e.has(r)?_S("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);function xS(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const c=Object.getOwnPropertyDescriptor(i,o);c&&Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function Hm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Pp={exports:{}},fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function ES(){if(pb)return fc;pb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:u,ref:o!==void 0?o:null,props:c}}return fc.Fragment=e,fc.jsx=t,fc.jsxs=t,fc}var mb;function wS(){return mb||(mb=1,Pp.exports=ES()),Pp.exports}var d=wS(),Vp={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb;function TS(){if(gb)return je;gb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),N=Symbol.iterator;function L(M){return M===null||typeof M!="object"?null:(M=N&&M[N]||M["@@iterator"],typeof M=="function"?M:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,re={};function me(M,$,oe){this.props=M,this.context=$,this.refs=re,this.updater=oe||K}me.prototype.isReactComponent={},me.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},me.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function we(){}we.prototype=me.prototype;function ve(M,$,oe){this.props=M,this.context=$,this.refs=re,this.updater=oe||K}var _e=ve.prototype=new we;_e.constructor=ve,ne(_e,me.prototype),_e.isPureReactComponent=!0;var Ue=Array.isArray;function Ae(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(M,$,oe){var he=oe.ref;return{$$typeof:r,type:M,key:$,ref:he!==void 0?he:null,props:oe}}function P(M,$){return R(M.type,$,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function j(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(oe){return $[oe]})}var k=/\/+/g;function rt(M,$){return typeof M=="object"&&M!==null&&M.key!=null?j(""+M.key):$.toString(36)}function bt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Ae,Ae):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Y(M,$,oe,he,Ce){var De=typeof M;(De==="undefined"||De==="boolean")&&(M=null);var qe=!1;if(M===null)qe=!0;else switch(De){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(M.$$typeof){case r:case e:qe=!0;break;case _:return qe=M._init,Y(qe(M._payload),$,oe,he,Ce)}}if(qe)return Ce=Ce(M),qe=he===""?"."+rt(M,0):he,Ue(Ce)?(oe="",qe!=null&&(oe=qe.replace(k,"$&/")+"/"),Y(Ce,$,oe,"",function(ue){return ue})):Ce!=null&&(D(Ce)&&(Ce=P(Ce,oe+(Ce.key==null||M&&M.key===Ce.key?"":(""+Ce.key).replace(k,"$&/")+"/")+qe)),$.push(Ce)),1;qe=0;var Nt=he===""?".":he+":";if(Ue(M))for(var X=0;X<M.length;X++)he=M[X],De=Nt+rt(he,X),qe+=Y(he,$,oe,De,Ce);else if(X=L(M),typeof X=="function")for(M=X.call(M),X=0;!(he=M.next()).done;)he=he.value,De=Nt+rt(he,X++),qe+=Y(he,$,oe,De,Ce);else if(De==="object"){if(typeof M.then=="function")return Y(bt(M),$,oe,he,Ce);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return qe}function se(M,$,oe){if(M==null)return M;var he=[],Ce=0;return Y(M,he,"","",function(De){return $.call(oe,De,Ce++)}),he}function xe(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(oe){(M._status===0||M._status===-1)&&(M._status=1,M._result=oe)},function(oe){(M._status===0||M._status===-1)&&(M._status=2,M._result=oe)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var Pe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ge={map:se,forEach:function(M,$,oe){se(M,function(){$.apply(this,arguments)},oe)},count:function(M){var $=0;return se(M,function(){$++}),$},toArray:function(M){return se(M,function($){return $})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return je.Activity=E,je.Children=Ge,je.Component=me,je.Fragment=t,je.Profiler=o,je.PureComponent=ve,je.StrictMode=i,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,je.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},je.cache=function(M){return function(){return M.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(M,$,oe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var he=ne({},M.props),Ce=M.key;if($!=null)for(De in $.key!==void 0&&(Ce=""+$.key),$)!A.call($,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&$.ref===void 0||(he[De]=$[De]);var De=arguments.length-2;if(De===1)he.children=oe;else if(1<De){for(var qe=Array(De),Nt=0;Nt<De;Nt++)qe[Nt]=arguments[Nt+2];he.children=qe}return R(M.type,Ce,he)},je.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},je.createElement=function(M,$,oe){var he,Ce={},De=null;if($!=null)for(he in $.key!==void 0&&(De=""+$.key),$)A.call($,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ce[he]=$[he]);var qe=arguments.length-2;if(qe===1)Ce.children=oe;else if(1<qe){for(var Nt=Array(qe),X=0;X<qe;X++)Nt[X]=arguments[X+2];Ce.children=Nt}if(M&&M.defaultProps)for(he in qe=M.defaultProps,qe)Ce[he]===void 0&&(Ce[he]=qe[he]);return R(M,De,Ce)},je.createRef=function(){return{current:null}},je.forwardRef=function(M){return{$$typeof:m,render:M}},je.isValidElement=D,je.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:xe}},je.memo=function(M,$){return{$$typeof:y,type:M,compare:$===void 0?null:$}},je.startTransition=function(M){var $=C.T,oe={};C.T=oe;try{var he=M(),Ce=C.S;Ce!==null&&Ce(oe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Ae,Pe)}catch(De){Pe(De)}finally{$!==null&&oe.types!==null&&($.types=oe.types),C.T=$}},je.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},je.use=function(M){return C.H.use(M)},je.useActionState=function(M,$,oe){return C.H.useActionState(M,$,oe)},je.useCallback=function(M,$){return C.H.useCallback(M,$)},je.useContext=function(M){return C.H.useContext(M)},je.useDebugValue=function(){},je.useDeferredValue=function(M,$){return C.H.useDeferredValue(M,$)},je.useEffect=function(M,$){return C.H.useEffect(M,$)},je.useEffectEvent=function(M){return C.H.useEffectEvent(M)},je.useId=function(){return C.H.useId()},je.useImperativeHandle=function(M,$,oe){return C.H.useImperativeHandle(M,$,oe)},je.useInsertionEffect=function(M,$){return C.H.useInsertionEffect(M,$)},je.useLayoutEffect=function(M,$){return C.H.useLayoutEffect(M,$)},je.useMemo=function(M,$){return C.H.useMemo(M,$)},je.useOptimistic=function(M,$){return C.H.useOptimistic(M,$)},je.useReducer=function(M,$,oe){return C.H.useReducer(M,$,oe)},je.useRef=function(M){return C.H.useRef(M)},je.useState=function(M){return C.H.useState(M)},je.useSyncExternalStore=function(M,$,oe){return C.H.useSyncExternalStore(M,$,oe)},je.useTransition=function(){return C.H.useTransition()},je.version="19.2.4",je}var yb;function Fm(){return yb||(yb=1,Vp.exports=TS()),Vp.exports}var ie=Fm();const SS=Hm(ie);var Lp={exports:{}},pc={},Up={exports:{}},zp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function NS(){return vb||(vb=1,(function(r){function e(Y,se){var xe=Y.length;Y.push(se);e:for(;0<xe;){var Pe=xe-1>>>1,Ge=Y[Pe];if(0<o(Ge,se))Y[Pe]=se,Y[xe]=Ge,xe=Pe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var se=Y[0],xe=Y.pop();if(xe!==se){Y[0]=xe;e:for(var Pe=0,Ge=Y.length,M=Ge>>>1;Pe<M;){var $=2*(Pe+1)-1,oe=Y[$],he=$+1,Ce=Y[he];if(0>o(oe,xe))he<Ge&&0>o(Ce,oe)?(Y[Pe]=Ce,Y[he]=xe,Pe=he):(Y[Pe]=oe,Y[$]=xe,Pe=$);else if(he<Ge&&0>o(Ce,xe))Y[Pe]=Ce,Y[he]=xe,Pe=he;else break e}}return se}function o(Y,se){var xe=Y.sortIndex-se.sortIndex;return xe!==0?xe:Y.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var u=Date,m=u.now();r.unstable_now=function(){return u.now()-m}}var g=[],y=[],_=1,E=null,N=3,L=!1,K=!1,ne=!1,re=!1,me=typeof setTimeout=="function"?setTimeout:null,we=typeof clearTimeout=="function"?clearTimeout:null,ve=typeof setImmediate<"u"?setImmediate:null;function _e(Y){for(var se=t(y);se!==null;){if(se.callback===null)i(y);else if(se.startTime<=Y)i(y),se.sortIndex=se.expirationTime,e(g,se);else break;se=t(y)}}function Ue(Y){if(ne=!1,_e(Y),!K)if(t(g)!==null)K=!0,Ae||(Ae=!0,j());else{var se=t(y);se!==null&&bt(Ue,se.startTime-Y)}}var Ae=!1,C=-1,A=5,R=-1;function P(){return re?!0:!(r.unstable_now()-R<A)}function D(){if(re=!1,Ae){var Y=r.unstable_now();R=Y;var se=!0;try{e:{K=!1,ne&&(ne=!1,we(C),C=-1),L=!0;var xe=N;try{t:{for(_e(Y),E=t(g);E!==null&&!(E.expirationTime>Y&&P());){var Pe=E.callback;if(typeof Pe=="function"){E.callback=null,N=E.priorityLevel;var Ge=Pe(E.expirationTime<=Y);if(Y=r.unstable_now(),typeof Ge=="function"){E.callback=Ge,_e(Y),se=!0;break t}E===t(g)&&i(g),_e(Y)}else i(g);E=t(g)}if(E!==null)se=!0;else{var M=t(y);M!==null&&bt(Ue,M.startTime-Y),se=!1}}break e}finally{E=null,N=xe,L=!1}se=void 0}}finally{se?j():Ae=!1}}}var j;if(typeof ve=="function")j=function(){ve(D)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,rt=k.port2;k.port1.onmessage=D,j=function(){rt.postMessage(null)}}else j=function(){me(D,0)};function bt(Y,se){C=me(function(){Y(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(Y){switch(N){case 1:case 2:case 3:var se=3;break;default:se=N}var xe=N;N=se;try{return Y()}finally{N=xe}},r.unstable_requestPaint=function(){re=!0},r.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var xe=N;N=Y;try{return se()}finally{N=xe}},r.unstable_scheduleCallback=function(Y,se,xe){var Pe=r.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Pe+xe:Pe):xe=Pe,Y){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=xe+Ge,Y={id:_++,callback:se,priorityLevel:Y,startTime:xe,expirationTime:Ge,sortIndex:-1},xe>Pe?(Y.sortIndex=xe,e(y,Y),t(g)===null&&Y===t(y)&&(ne?(we(C),C=-1):ne=!0,bt(Ue,xe-Pe))):(Y.sortIndex=Ge,e(g,Y),K||L||(K=!0,Ae||(Ae=!0,j()))),Y},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(Y){var se=N;return function(){var xe=N;N=se;try{return Y.apply(this,arguments)}finally{N=xe}}}})(zp)),zp}var bb;function AS(){return bb||(bb=1,Up.exports=NS()),Up.exports}var Bp={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function CS(){if(_b)return Nn;_b=1;var r=Fm();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:y,implementation:_}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Nn.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,_)},Nn.flushSync=function(g){var y=u.T,_=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=y,i.p=_,i.d.f()}},Nn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Nn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Nn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,E=m(_,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:N,fetchPriority:L}):_==="script"&&i.d.X(g,{crossOrigin:E,integrity:N,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Nn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=m(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Nn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,E=m(_,y.crossOrigin);i.d.L(g,_,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Nn.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=m(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Nn.requestFormReset=function(g){i.d.r(g)},Nn.unstable_batchedUpdates=function(g,y){return g(y)},Nn.useFormState=function(g,y,_){return u.H.useFormState(g,y,_)},Nn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Nn.version="19.2.4",Nn}var xb;function RS(){if(xb)return Bp.exports;xb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bp.exports=CS(),Bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function kS(){if(Eb)return pc;Eb=1;var r=AS(),e=Fm(),t=RS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(i(188))}function y(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(i(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return g(f),n;if(p===l)return g(f),s;p=p.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=p;else{for(var b=!1,w=f.child;w;){if(w===a){b=!0,a=f,l=p;break}if(w===l){b=!0,l=f,a=p;break}w=w.sibling}if(!b){for(w=p.child;w;){if(w===a){b=!0,a=p,l=f;break}if(w===l){b=!0,l=p,a=f;break}w=w.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,N=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),we=Symbol.for("react.consumer"),ve=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var k=Symbol.for("react.client.reference");function rt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===k?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ne:return"Fragment";case me:return"Profiler";case re:return"StrictMode";case Ue:return"Suspense";case Ae:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case K:return"Portal";case ve:return n.displayName||"Context";case we:return(n._context.displayName||"Context")+".Consumer";case _e:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return s=n.displayName||null,s!==null?s:rt(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return rt(n(s))}catch{}}return null}var bt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Pe=[],Ge=-1;function M(n){return{current:n}}function $(n){0>Ge||(n.current=Pe[Ge],Pe[Ge]=null,Ge--)}function oe(n,s){Ge++,Pe[Ge]=n.current,n.current=s}var he=M(null),Ce=M(null),De=M(null),qe=M(null);function Nt(n,s){switch(oe(De,s),oe(Ce,n),oe(he,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Vv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Vv(s),n=Lv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(he),oe(he,n)}function X(){$(he),$(Ce),$(De)}function ue(n){n.memoizedState!==null&&oe(qe,n);var s=he.current,a=Lv(s,n.type);s!==a&&(oe(Ce,n),oe(he,a))}function Me(n){Ce.current===n&&($(he),$(Ce)),qe.current===n&&($(qe),lc._currentValue=xe)}var Et,Yt;function xn(n){if(Et===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Et=s&&s[1]||"",Yt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+n+Yt}var Ye=!1;function an(n,s){if(!n||Ye)return"";Ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(F){var q=F}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(F){q=F}n.call(Z.prototype)}}else{try{throw Error()}catch(F){q=F}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(F){if(F&&q&&typeof F.stack=="string")return[F.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),b=p[0],w=p[1];if(b&&w){var I=b.split(`
`),B=w.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===B.length)for(l=I.length-1,f=B.length-1;1<=l&&0<=f&&I[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==B[f]){var Q=`
`+I[l].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=l&&0<=f);break}}}finally{Ye=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?xn(a):""}function Wn(n,s){switch(n.tag){case 26:case 27:case 5:return xn(n.type);case 16:return xn("Lazy");case 13:return n.child!==s&&s!==null?xn("Suspense Fallback"):xn("Suspense");case 19:return xn("SuspenseList");case 0:case 15:return an(n.type,!1);case 11:return an(n.type.render,!1);case 1:return an(n.type,!0);case 31:return xn("Activity");default:return""}}function oa(n){try{var s="",a=null;do s+=Wn(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var At=Object.prototype.hasOwnProperty,Dt=r.unstable_scheduleCallback,Mr=r.unstable_cancelCallback,yr=r.unstable_shouldYield,vr=r.unstable_requestPaint,Ee=r.unstable_now,on=r.unstable_getCurrentPriorityLevel,la=r.unstable_ImmediatePriority,Pr=r.unstable_UserBlockingPriority,jn=r.unstable_NormalPriority,Ji=r.unstable_LowPriority,vi=r.unstable_IdlePriority,Zn=r.log,to=r.unstable_setDisableYieldValue,En=null,$t=null;function wn(n){if(typeof Zn=="function"&&to(n),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(En,n)}catch{}}var ce=Math.clz32?Math.clz32:ro,no=Math.log,bi=Math.LN2;function ro(n){return n>>>=0,n===0?32:31-(no(n)/bi|0)|0}var er=256,Vr=262144,Ct=4194304;function br(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _r(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~p,l!==0?f=br(l):(b&=w,b!==0?f=br(b):a||(a=w&~n,a!==0&&(f=br(a))))):(w=l&~p,w!==0?f=br(w):b!==0?f=br(b):a||(a=l&~n,a!==0&&(f=br(a)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,a=s&-s,p>=a||p===32&&(a&4194048)!==0)?s:f}function Tn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function io(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function so(){var n=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),n}function tr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Wr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ao(n,s,a,l,f,p){var b=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,I=n.expirationTimes,B=n.hiddenUpdates;for(a=b&~a;0<a;){var Q=31-ce(a),Z=1<<Q;w[Q]=0,I[Q]=-1;var q=B[Q];if(q!==null)for(B[Q]=null,Q=0;Q<q.length;Q++){var F=q[Q];F!==null&&(F.lane&=-536870913)}a&=~Z}l!==0&&Zr(n,l,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~s))}function Zr(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-ce(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Wi(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-ce(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function ca(n,s){var a=s&-s;return a=(a&42)!==0?1:_i(a),(a&(n.suspendedLanes|s))!==0?0:a}function _i(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function nr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function oo(){var n=se.p;return n!==0?n:(n=window.event,n===void 0?32:ob(n.type))}function rr(n,s){var a=se.p;try{return se.p=n,s()}finally{se.p=a}}var ir=Math.random().toString(36).slice(2),mt="__reactFiber$"+ir,jt="__reactProps$"+ir,sr="__reactContainer$"+ir,Zi="__reactEvents$"+ir,xr="__reactListeners$"+ir,Lr="__reactHandles$"+ir,es="__reactResources$"+ir,Bn="__reactMarker$"+ir;function xi(n){delete n[mt],delete n[jt],delete n[Zi],delete n[xr],delete n[Lr]}function ar(n){var s=n[mt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[sr]||a[mt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Fv(n);n!==null;){if(a=n[mt])return a;n=Fv(n)}return s}n=a,a=n.parentNode}return null}function dn(n){if(n=n[mt]||n[sr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Sn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function On(n){var s=n[es];return s||(s=n[es]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Rt(n){n[Bn]=!0}var ts=new Set,T={};function J(n,s){G(n,s),G(n+"Capture",s)}function G(n,s){for(T[n]=s,n=0;n<s.length;n++)ts.add(s[n])}var le=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ye={},Pt={};function ns(n){return At.call(Pt,n)?!0:At.call(ye,n)?!1:le.test(n)?Pt[n]=!0:(ye[n]=!0,!1)}function lo(n,s,a){if(ns(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function or(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Qt(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function ln(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rs(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _l(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,p.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function lt(n){if(!n._valueTracker){var s=rs(n)?"checked":"value";n._valueTracker=_l(n,s,""+n[s])}}function ua(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=rs(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function ei(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ha=/[\n"\\]/g;function Gn(n){return n.replace(ha,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function co(n,s,a,l,f,p,b,w){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),s!=null?b==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+ln(s)):n.value!==""+ln(s)&&(n.value=""+ln(s)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),s!=null?xl(n,b,ln(s)):a!=null?xl(n,b,ln(a)):l!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+ln(w):n.removeAttribute("name")}function su(n,s,a,l,f,p,b,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){lt(n);return}a=a!=null?""+ln(a):"",s=s!=null?""+ln(s):a,w||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),lt(n)}function xl(n,s,a){s==="number"&&ei(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function is(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+ln(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function au(n,s,a){if(s!=null&&(s=""+ln(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+ln(a):""}function ss(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(bt(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=ln(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),lt(n)}function qn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function El(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||ou.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function wl(n,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&El(n,f,l)}else for(var p in s)s.hasOwnProperty(p)&&El(n,p,s[p])}function uo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),as=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(n){return as.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Ur(){}var Tl=null;function Er(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var os=null,ti=null;function da(n){var s=dn(n);if(s&&(n=s.stateNode)){var a=n[jt]||null;e:switch(n=s.stateNode,s.type){case"input":if(co(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[jt]||null;if(!f)throw Error(i(90));co(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&ua(l)}break e;case"textarea":au(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&is(n,!!a.multiple,s,!1)}}}var fo=!1;function ls(n,s,a){if(fo)return n(s,a);fo=!0;try{var l=n(s);return l}finally{if(fo=!1,(os!==null||ti!==null)&&(th(),os&&(s=os,n=ti,ti=os=null,da(s),n)))for(s=0;s<n.length;s++)da(n[s])}}function zr(n,s){var a=n.stateNode;if(a===null)return null;var l=a[jt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=!1;if(wr)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){fa=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{fa=!1}var ni=null,Sl=null,pa=null;function Nl(){if(pa)return pa;var n,s=Sl,a=s.length,l,f="value"in ni?ni.value:ni.textContent,p=f.length;for(n=0;n<a&&s[n]===f[n];n++);var b=a-n;for(l=1;l<=b&&s[a-l]===f[p-l];l++);return pa=f.slice(n,1<l?1-l:void 0)}function ma(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ei(){return!0}function Br(){return!1}function fn(n){function s(a,l,f,p,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ei:Br,this.isPropagationStopped=Br,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),s}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ri=fn(wi),cs=E({},wi,{view:0,detail:0}),Al=fn(cs),us,po,ii,mo=E({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ii&&(ii&&n.type==="mousemove"?(us=n.screenX-ii.screenX,po=n.screenY-ii.screenY):po=us=0,ii=n),us)},movementY:function(n){return"movementY"in n?n.movementY:po}}),Cl=fn(mo),ga=E({},mo,{dataTransfer:0}),cu=fn(ga),uu=E({},cs,{relatedTarget:0}),ya=fn(uu),Rl=E({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),hu=fn(Rl),go=E({},wi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),du=fn(go),fu=E({},wi,{data:0}),si=fn(fu),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=gu[n])?!!s[n]:!1}function hs(){return yu}var Mn=E({},cs,{key:function(n){if(n.key){var s=pu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ma(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hs,charCode:function(n){return n.type==="keypress"?ma(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ma(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vu=fn(Mn),bu=E({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ti=fn(bu),h=E({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hs}),v=fn(h),x=E({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=fn(x),U=E({},mo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),H=fn(U),ae=E({},wi,{newState:0,oldState:0}),Ve=fn(ae),Bt=[9,13,27,32],it=wr&&"CompositionEvent"in window,kt=null;wr&&"documentMode"in document&&(kt=document.documentMode);var Tr=wr&&"TextEvent"in window&&!kt,ai=wr&&(!it||kt&&8<kt&&11>=kt),Gr=" ",qr=!1;function va(n,s){switch(n){case"keyup":return Bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vo=!1;function HT(n,s){switch(n){case"compositionend":return yo(s);case"keypress":return s.which!==32?null:(qr=!0,Gr);case"textInput":return n=s.data,n===Gr&&qr?null:n;default:return null}}function FT(n,s){if(vo)return n==="compositionend"||!it&&va(n,s)?(n=Nl(),pa=Sl=ni=null,vo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ai&&s.locale!=="ko"?null:s.data;default:return null}}var YT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qg(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!YT[n.type]:s==="textarea"}function Kg(n,s,a,l){os?ti?ti.push(l):ti=[l]:os=l,s=lh(s,"onChange"),0<s.length&&(a=new ri("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var kl=null,Il=null;function $T(n){Iv(n,0)}function _u(n){var s=Sn(n);if(ua(s))return n}function Xg(n,s){if(n==="change")return s}var Jg=!1;if(wr){var Gd;if(wr){var qd="oninput"in document;if(!qd){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),qd=typeof Wg.oninput=="function"}Gd=qd}else Gd=!1;Jg=Gd&&(!document.documentMode||9<document.documentMode)}function Zg(){kl&&(kl.detachEvent("onpropertychange",ey),Il=kl=null)}function ey(n){if(n.propertyName==="value"&&_u(Il)){var s=[];Kg(s,Il,n,Er(n)),ls($T,s)}}function QT(n,s,a){n==="focusin"?(Zg(),kl=s,Il=a,kl.attachEvent("onpropertychange",ey)):n==="focusout"&&Zg()}function KT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _u(Il)}function XT(n,s){if(n==="click")return _u(s)}function JT(n,s){if(n==="input"||n==="change")return _u(s)}function WT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var lr=typeof Object.is=="function"?Object.is:WT;function Dl(n,s){if(lr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!At.call(s,f)||!lr(n[f],s[f]))return!1}return!0}function ty(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ny(n,s){var a=ty(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ty(a)}}function ry(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?ry(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function iy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ei(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=ei(n.document)}return s}function Hd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var ZT=wr&&"documentMode"in document&&11>=document.documentMode,bo=null,Fd=null,jl=null,Yd=!1;function sy(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yd||bo==null||bo!==ei(l)||(l=bo,"selectionStart"in l&&Hd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),jl&&Dl(jl,l)||(jl=l,l=lh(Fd,"onSelect"),0<l.length&&(s=new ri("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=bo)))}function ba(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var _o={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},$d={},ay={};wr&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function _a(n){if($d[n])return $d[n];if(!_o[n])return n;var s=_o[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in ay)return $d[n]=s[a];return n}var oy=_a("animationend"),ly=_a("animationiteration"),cy=_a("animationstart"),e1=_a("transitionrun"),t1=_a("transitionstart"),n1=_a("transitioncancel"),uy=_a("transitionend"),hy=new Map,Qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qd.push("scrollEnd");function Hr(n,s){hy.set(n,s),J(s,[n])}var xu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Sr=[],xo=0,Kd=0;function Eu(){for(var n=xo,s=Kd=xo=0;s<n;){var a=Sr[s];Sr[s++]=null;var l=Sr[s];Sr[s++]=null;var f=Sr[s];Sr[s++]=null;var p=Sr[s];if(Sr[s++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}p!==0&&dy(a,f,p)}}function wu(n,s,a,l){Sr[xo++]=n,Sr[xo++]=s,Sr[xo++]=a,Sr[xo++]=l,Kd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Xd(n,s,a,l){return wu(n,s,a,l),Tu(n)}function xa(n,s){return wu(n,null,null,s),Tu(n)}function dy(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=n.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&s!==null&&(f=31-ce(a),n=p.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),p):null}function Tu(n){if(50<tc)throw tc=0,ap=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Eo={};function r1(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(n,s,a,l){return new r1(n,s,a,l)}function Jd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Si(n,s){var a=n.alternate;return a===null?(a=cr(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function fy(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Su(n,s,a,l,f,p){var b=0;if(l=n,typeof n=="function")Jd(n)&&(b=1);else if(typeof n=="string")b=lS(n,a,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=cr(31,a,s,f),n.elementType=R,n.lanes=p,n;case ne:return Ea(a.children,f,p,s);case re:b=8,f|=24;break;case me:return n=cr(12,a,s,f|2),n.elementType=me,n.lanes=p,n;case Ue:return n=cr(13,a,s,f),n.elementType=Ue,n.lanes=p,n;case Ae:return n=cr(19,a,s,f),n.elementType=Ae,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ve:b=10;break e;case we:b=9;break e;case _e:b=11;break e;case C:b=14;break e;case A:b=16,l=null;break e}b=29,a=Error(i(130,n===null?"null":typeof n,"")),l=null}return s=cr(b,a,s,f),s.elementType=n,s.type=l,s.lanes=p,s}function Ea(n,s,a,l){return n=cr(7,n,l,s),n.lanes=a,n}function Wd(n,s,a){return n=cr(6,n,null,s),n.lanes=a,n}function py(n){var s=cr(18,null,null,0);return s.stateNode=n,s}function Zd(n,s,a){return s=cr(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var my=new WeakMap;function Nr(n,s){if(typeof n=="object"&&n!==null){var a=my.get(n);return a!==void 0?a:(s={value:n,source:s,stack:oa(s)},my.set(n,s),s)}return{value:n,source:s,stack:oa(s)}}var wo=[],To=0,Nu=null,Ol=0,Ar=[],Cr=0,ds=null,oi=1,li="";function Ni(n,s){wo[To++]=Ol,wo[To++]=Nu,Nu=n,Ol=s}function gy(n,s,a){Ar[Cr++]=oi,Ar[Cr++]=li,Ar[Cr++]=ds,ds=n;var l=oi;n=li;var f=32-ce(l)-1;l&=~(1<<f),a+=1;var p=32-ce(s)+f;if(30<p){var b=f-f%5;p=(l&(1<<b)-1).toString(32),l>>=b,f-=b,oi=1<<32-ce(s)+f|a<<f|l,li=p+n}else oi=1<<p|a<<f|l,li=n}function ef(n){n.return!==null&&(Ni(n,1),gy(n,1,0))}function tf(n){for(;n===Nu;)Nu=wo[--To],wo[To]=null,Ol=wo[--To],wo[To]=null;for(;n===ds;)ds=Ar[--Cr],Ar[Cr]=null,li=Ar[--Cr],Ar[Cr]=null,oi=Ar[--Cr],Ar[Cr]=null}function yy(n,s){Ar[Cr++]=oi,Ar[Cr++]=li,Ar[Cr++]=ds,oi=s.id,li=s.overflow,ds=n}var pn=null,wt=null,We=!1,fs=null,Rr=!1,nf=Error(i(519));function ps(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ml(Nr(s,n)),nf}function vy(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[mt]=n,s[jt]=l,a){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(a=0;a<rc.length;a++)Fe(rc[a],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Fe("invalid",s),su(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Fe("invalid",s);break;case"textarea":Fe("invalid",s),ss(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Mv(s.textContent,a)?(l.popover!=null&&(Fe("beforetoggle",s),Fe("toggle",s)),l.onScroll!=null&&Fe("scroll",s),l.onScrollEnd!=null&&Fe("scrollend",s),l.onClick!=null&&(s.onclick=Ur),s=!0):s=!1,s||ps(n,!0)}function by(n){for(pn=n.return;pn;)switch(pn.tag){case 5:case 31:case 13:Rr=!1;return;case 27:case 3:Rr=!0;return;default:pn=pn.return}}function So(n){if(n!==pn)return!1;if(!We)return by(n),We=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||xp(n.type,n.memoizedProps)),a=!a),a&&wt&&ps(n),by(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));wt=Hv(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));wt=Hv(n)}else s===27?(s=wt,Cs(n.type)?(n=Np,Np=null,wt=n):wt=s):wt=pn?Ir(n.stateNode.nextSibling):null;return!0}function wa(){wt=pn=null,We=!1}function rf(){var n=fs;return n!==null&&($n===null?$n=n:$n.push.apply($n,n),fs=null),n}function Ml(n){fs===null?fs=[n]:fs.push(n)}var sf=M(null),Ta=null,Ai=null;function ms(n,s,a){oe(sf,s._currentValue),s._currentValue=a}function Ci(n){n._currentValue=sf.current,$(sf)}function af(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function of(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var b=f.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=f;for(var I=0;I<s.length;I++)if(w.context===s[I]){p.lanes|=a,w=p.alternate,w!==null&&(w.lanes|=a),af(p.return,a,n),l||(b=null);break e}p=w.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=a,p=b.alternate,p!==null&&(p.lanes|=a),af(b,a,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function No(n,s,a,l){n=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var w=f.type;lr(f.pendingProps.value,b.value)||(n!==null?n.push(w):n=[w])}}else if(f===qe.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(lc):n=[lc])}f=f.return}n!==null&&of(s,n,a,l),s.flags|=262144}function Au(n){for(n=n.firstContext;n!==null;){if(!lr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Sa(n){Ta=n,Ai=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function mn(n){return _y(Ta,n)}function Cu(n,s){return Ta===null&&Sa(n),_y(n,s)}function _y(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ai===null){if(n===null)throw Error(i(308));Ai=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ai=Ai.next=s;return a}var i1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},s1=r.unstable_scheduleCallback,a1=r.unstable_NormalPriority,Kt={$$typeof:ve,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lf(){return{controller:new i1,data:new Map,refCount:0}}function Pl(n){n.refCount--,n.refCount===0&&s1(a1,function(){n.controller.abort()})}var Vl=null,cf=0,Ao=0,Co=null;function o1(n,s){if(Vl===null){var a=Vl=[];cf=0,Ao=dp(),Co={status:"pending",value:void 0,then:function(l){a.push(l)}}}return cf++,s.then(xy,xy),s}function xy(){if(--cf===0&&Vl!==null){Co!==null&&(Co.status="fulfilled");var n=Vl;Vl=null,Ao=0,Co=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function l1(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Ey=Y.S;Y.S=function(n,s){sv=Ee(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&o1(n,s),Ey!==null&&Ey(n,s)};var Na=M(null);function uf(){var n=Na.current;return n!==null?n:gt.pooledCache}function Ru(n,s){s===null?oe(Na,Na.current):oe(Na,s.pool)}function wy(){var n=uf();return n===null?null:{parent:Kt._currentValue,pool:n}}var Ro=Error(i(460)),hf=Error(i(474)),ku=Error(i(542)),Iu={then:function(){}};function Ty(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Sy(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Ur,Ur),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ay(n),n;default:if(typeof s.status=="string")s.then(Ur,Ur);else{if(n=gt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ay(n),n}throw Ca=s,Ro}}function Aa(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ca=a,Ro):a}}var Ca=null;function Ny(){if(Ca===null)throw Error(i(459));var n=Ca;return Ca=null,n}function Ay(n){if(n===Ro||n===ku)throw Error(i(483))}var ko=null,Ll=0;function Du(n){var s=Ll;return Ll+=1,ko===null&&(ko=[]),Sy(ko,n,s)}function Ul(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function ju(n,s){throw s.$$typeof===N?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Cy(n){function s(V,O){if(n){var z=V.deletions;z===null?(V.deletions=[O],V.flags|=16):z.push(O)}}function a(V,O){if(!n)return null;for(;O!==null;)s(V,O),O=O.sibling;return null}function l(V){for(var O=new Map;V!==null;)V.key!==null?O.set(V.key,V):O.set(V.index,V),V=V.sibling;return O}function f(V,O){return V=Si(V,O),V.index=0,V.sibling=null,V}function p(V,O,z){return V.index=z,n?(z=V.alternate,z!==null?(z=z.index,z<O?(V.flags|=67108866,O):z):(V.flags|=67108866,O)):(V.flags|=1048576,O)}function b(V){return n&&V.alternate===null&&(V.flags|=67108866),V}function w(V,O,z,W){return O===null||O.tag!==6?(O=Wd(z,V.mode,W),O.return=V,O):(O=f(O,z),O.return=V,O)}function I(V,O,z,W){var Te=z.type;return Te===ne?Q(V,O,z.props.children,W,z.key):O!==null&&(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&Aa(Te)===O.type)?(O=f(O,z.props),Ul(O,z),O.return=V,O):(O=Su(z.type,z.key,z.props,null,V.mode,W),Ul(O,z),O.return=V,O)}function B(V,O,z,W){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=Zd(z,V.mode,W),O.return=V,O):(O=f(O,z.children||[]),O.return=V,O)}function Q(V,O,z,W,Te){return O===null||O.tag!==7?(O=Ea(z,V.mode,W,Te),O.return=V,O):(O=f(O,z),O.return=V,O)}function Z(V,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Wd(""+O,V.mode,z),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case L:return z=Su(O.type,O.key,O.props,null,V.mode,z),Ul(z,O),z.return=V,z;case K:return O=Zd(O,V.mode,z),O.return=V,O;case A:return O=Aa(O),Z(V,O,z)}if(bt(O)||j(O))return O=Ea(O,V.mode,z,null),O.return=V,O;if(typeof O.then=="function")return Z(V,Du(O),z);if(O.$$typeof===ve)return Z(V,Cu(V,O),z);ju(V,O)}return null}function q(V,O,z,W){var Te=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Te!==null?null:w(V,O,""+z,W);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return z.key===Te?I(V,O,z,W):null;case K:return z.key===Te?B(V,O,z,W):null;case A:return z=Aa(z),q(V,O,z,W)}if(bt(z)||j(z))return Te!==null?null:Q(V,O,z,W,null);if(typeof z.then=="function")return q(V,O,Du(z),W);if(z.$$typeof===ve)return q(V,O,Cu(V,z),W);ju(V,z)}return null}function F(V,O,z,W,Te){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return V=V.get(z)||null,w(O,V,""+W,Te);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case L:return V=V.get(W.key===null?z:W.key)||null,I(O,V,W,Te);case K:return V=V.get(W.key===null?z:W.key)||null,B(O,V,W,Te);case A:return W=Aa(W),F(V,O,z,W,Te)}if(bt(W)||j(W))return V=V.get(z)||null,Q(O,V,W,Te,null);if(typeof W.then=="function")return F(V,O,z,Du(W),Te);if(W.$$typeof===ve)return F(V,O,z,Cu(O,W),Te);ju(O,W)}return null}function pe(V,O,z,W){for(var Te=null,tt=null,be=O,ze=O=0,Qe=null;be!==null&&ze<z.length;ze++){be.index>ze?(Qe=be,be=null):Qe=be.sibling;var nt=q(V,be,z[ze],W);if(nt===null){be===null&&(be=Qe);break}n&&be&&nt.alternate===null&&s(V,be),O=p(nt,O,ze),tt===null?Te=nt:tt.sibling=nt,tt=nt,be=Qe}if(ze===z.length)return a(V,be),We&&Ni(V,ze),Te;if(be===null){for(;ze<z.length;ze++)be=Z(V,z[ze],W),be!==null&&(O=p(be,O,ze),tt===null?Te=be:tt.sibling=be,tt=be);return We&&Ni(V,ze),Te}for(be=l(be);ze<z.length;ze++)Qe=F(be,V,ze,z[ze],W),Qe!==null&&(n&&Qe.alternate!==null&&be.delete(Qe.key===null?ze:Qe.key),O=p(Qe,O,ze),tt===null?Te=Qe:tt.sibling=Qe,tt=Qe);return n&&be.forEach(function(js){return s(V,js)}),We&&Ni(V,ze),Te}function Ne(V,O,z,W){if(z==null)throw Error(i(151));for(var Te=null,tt=null,be=O,ze=O=0,Qe=null,nt=z.next();be!==null&&!nt.done;ze++,nt=z.next()){be.index>ze?(Qe=be,be=null):Qe=be.sibling;var js=q(V,be,nt.value,W);if(js===null){be===null&&(be=Qe);break}n&&be&&js.alternate===null&&s(V,be),O=p(js,O,ze),tt===null?Te=js:tt.sibling=js,tt=js,be=Qe}if(nt.done)return a(V,be),We&&Ni(V,ze),Te;if(be===null){for(;!nt.done;ze++,nt=z.next())nt=Z(V,nt.value,W),nt!==null&&(O=p(nt,O,ze),tt===null?Te=nt:tt.sibling=nt,tt=nt);return We&&Ni(V,ze),Te}for(be=l(be);!nt.done;ze++,nt=z.next())nt=F(be,V,ze,nt.value,W),nt!==null&&(n&&nt.alternate!==null&&be.delete(nt.key===null?ze:nt.key),O=p(nt,O,ze),tt===null?Te=nt:tt.sibling=nt,tt=nt);return n&&be.forEach(function(bS){return s(V,bS)}),We&&Ni(V,ze),Te}function pt(V,O,z,W){if(typeof z=="object"&&z!==null&&z.type===ne&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case L:e:{for(var Te=z.key;O!==null;){if(O.key===Te){if(Te=z.type,Te===ne){if(O.tag===7){a(V,O.sibling),W=f(O,z.props.children),W.return=V,V=W;break e}}else if(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&Aa(Te)===O.type){a(V,O.sibling),W=f(O,z.props),Ul(W,z),W.return=V,V=W;break e}a(V,O);break}else s(V,O);O=O.sibling}z.type===ne?(W=Ea(z.props.children,V.mode,W,z.key),W.return=V,V=W):(W=Su(z.type,z.key,z.props,null,V.mode,W),Ul(W,z),W.return=V,V=W)}return b(V);case K:e:{for(Te=z.key;O!==null;){if(O.key===Te)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(V,O.sibling),W=f(O,z.children||[]),W.return=V,V=W;break e}else{a(V,O);break}else s(V,O);O=O.sibling}W=Zd(z,V.mode,W),W.return=V,V=W}return b(V);case A:return z=Aa(z),pt(V,O,z,W)}if(bt(z))return pe(V,O,z,W);if(j(z)){if(Te=j(z),typeof Te!="function")throw Error(i(150));return z=Te.call(z),Ne(V,O,z,W)}if(typeof z.then=="function")return pt(V,O,Du(z),W);if(z.$$typeof===ve)return pt(V,O,Cu(V,z),W);ju(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(a(V,O.sibling),W=f(O,z),W.return=V,V=W):(a(V,O),W=Wd(z,V.mode,W),W.return=V,V=W),b(V)):a(V,O)}return function(V,O,z,W){try{Ll=0;var Te=pt(V,O,z,W);return ko=null,Te}catch(be){if(be===Ro||be===ku)throw be;var tt=cr(29,be,null,V.mode);return tt.lanes=W,tt.return=V,tt}finally{}}}var Ra=Cy(!0),Ry=Cy(!1),gs=!1;function df(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ff(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ys(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function vs(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(st&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Tu(n),dy(n,null,a),s}return wu(n,l,s,a),Tu(n)}function zl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Wi(n,a)}}function pf(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=b:p=p.next=b,a=a.next}while(a!==null);p===null?f=p=s:p=p.next=s}else f=p=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var mf=!1;function Bl(){if(mf){var n=Co;if(n!==null)throw n}}function Gl(n,s,a,l){mf=!1;var f=n.updateQueue;gs=!1;var p=f.firstBaseUpdate,b=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var I=w,B=I.next;I.next=null,b===null?p=B:b.next=B,b=I;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,w=Q.lastBaseUpdate,w!==b&&(w===null?Q.firstBaseUpdate=B:w.next=B,Q.lastBaseUpdate=I))}if(p!==null){var Z=f.baseState;b=0,Q=B=I=null,w=p;do{var q=w.lane&-536870913,F=q!==w.lane;if(F?($e&q)===q:(l&q)===q){q!==0&&q===Ao&&(mf=!0),Q!==null&&(Q=Q.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var pe=n,Ne=w;q=s;var pt=a;switch(Ne.tag){case 1:if(pe=Ne.payload,typeof pe=="function"){Z=pe.call(pt,Z,q);break e}Z=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ne.payload,q=typeof pe=="function"?pe.call(pt,Z,q):pe,q==null)break e;Z=E({},Z,q);break e;case 2:gs=!0}}q=w.callback,q!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[q]:F.push(q))}else F={lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Q===null?(B=Q=F,I=Z):Q=Q.next=F,b|=q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;F=w,w=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);Q===null&&(I=Z),f.baseState=I,f.firstBaseUpdate=B,f.lastBaseUpdate=Q,p===null&&(f.shared.lanes=0),ws|=b,n.lanes=b,n.memoizedState=Z}}function ky(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Iy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ky(a[n],s)}var Io=M(null),Ou=M(0);function Dy(n,s){n=Vi,oe(Ou,n),oe(Io,s),Vi=n|s.baseLanes}function gf(){oe(Ou,Vi),oe(Io,Io.current)}function yf(){Vi=Ou.current,$(Io),$(Ou)}var ur=M(null),kr=null;function bs(n){var s=n.alternate;oe(Gt,Gt.current&1),oe(ur,n),kr===null&&(s===null||Io.current!==null||s.memoizedState!==null)&&(kr=n)}function vf(n){oe(Gt,Gt.current),oe(ur,n),kr===null&&(kr=n)}function jy(n){n.tag===22?(oe(Gt,Gt.current),oe(ur,n),kr===null&&(kr=n)):_s()}function _s(){oe(Gt,Gt.current),oe(ur,ur.current)}function hr(n){$(ur),kr===n&&(kr=null),$(Gt)}var Gt=M(0);function Mu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Tp(a)||Sp(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ri=0,Le=null,dt=null,Xt=null,Pu=!1,Do=!1,ka=!1,Vu=0,ql=0,jo=null,c1=0;function Vt(){throw Error(i(321))}function bf(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!lr(n[a],s[a]))return!1;return!0}function _f(n,s,a,l,f,p){return Ri=p,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=n===null||n.memoizedState===null?g0:Mf,ka=!1,p=a(l,f),ka=!1,Do&&(p=My(s,a,l,f)),Oy(n),p}function Oy(n){Y.H=Yl;var s=dt!==null&&dt.next!==null;if(Ri=0,Xt=dt=Le=null,Pu=!1,ql=0,jo=null,s)throw Error(i(300));n===null||Jt||(n=n.dependencies,n!==null&&Au(n)&&(Jt=!0))}function My(n,s,a,l){Le=n;var f=0;do{if(Do&&(jo=null),ql=0,Do=!1,25<=f)throw Error(i(301));if(f+=1,Xt=dt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=y0,p=s(a,l)}while(Do);return p}function u1(){var n=Y.H,s=n.useState()[0];return s=typeof s.then=="function"?Hl(s):s,n=n.useState()[0],(dt!==null?dt.memoizedState:null)!==n&&(Le.flags|=1024),s}function xf(){var n=Vu!==0;return Vu=0,n}function Ef(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function wf(n){if(Pu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Pu=!1}Ri=0,Xt=dt=Le=null,Do=!1,ql=Vu=0,jo=null}function Pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Le.memoizedState=Xt=n:Xt=Xt.next=n,Xt}function qt(){if(dt===null){var n=Le.alternate;n=n!==null?n.memoizedState:null}else n=dt.next;var s=Xt===null?Le.memoizedState:Xt.next;if(s!==null)Xt=s,dt=n;else{if(n===null)throw Le.alternate===null?Error(i(467)):Error(i(310));dt=n,n={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Xt===null?Le.memoizedState=Xt=n:Xt=Xt.next=n}return Xt}function Lu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(n){var s=ql;return ql+=1,jo===null&&(jo=[]),n=Sy(jo,n,s),s=Le,(Xt===null?s.memoizedState:Xt.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?g0:Mf),n}function Uu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Hl(n);if(n.$$typeof===ve)return mn(n)}throw Error(i(438,String(n)))}function Tf(n){var s=null,a=Le.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Le.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Lu(),Le.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=P;return s.index++,a}function ki(n,s){return typeof s=="function"?s(n):s}function zu(n){var s=qt();return Sf(s,dt,n)}function Sf(n,s,a){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=n.baseQueue,p=l.pending;if(p!==null){if(f!==null){var b=f.next;f.next=p.next,p.next=b}s.baseQueue=f=p,l.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{s=f.next;var w=b=null,I=null,B=s,Q=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?($e&Z)===Z:(Ri&Z)===Z){var q=B.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===Ao&&(Q=!0);else if((Ri&q)===q){B=B.next,q===Ao&&(Q=!0);continue}else Z={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(w=I=Z,b=p):I=I.next=Z,Le.lanes|=q,ws|=q;Z=B.action,ka&&a(p,Z),p=B.hasEagerState?B.eagerState:a(p,Z)}else q={lane:Z,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(w=I=q,b=p):I=I.next=q,Le.lanes|=Z,ws|=Z;B=B.next}while(B!==null&&B!==s);if(I===null?b=p:I.next=w,!lr(p,n.memoizedState)&&(Jt=!0,Q&&(a=Co,a!==null)))throw a;n.memoizedState=p,n.baseState=b,n.baseQueue=I,l.lastRenderedState=p}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Nf(n){var s=qt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,p=s.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do p=n(p,b.action),b=b.next;while(b!==f);lr(p,s.memoizedState)||(Jt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,l]}function Py(n,s,a){var l=Le,f=qt(),p=We;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=s();var b=!lr((dt||f).memoizedState,a);if(b&&(f.memoizedState=a,Jt=!0),f=f.queue,Rf(Uy.bind(null,l,f,n),[n]),f.getSnapshot!==s||b||Xt!==null&&Xt.memoizedState.tag&1){if(l.flags|=2048,Oo(9,{destroy:void 0},Ly.bind(null,l,f,a,s),null),gt===null)throw Error(i(349));p||(Ri&127)!==0||Vy(l,s,a)}return a}function Vy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Le.updateQueue,s===null?(s=Lu(),Le.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Ly(n,s,a,l){s.value=a,s.getSnapshot=l,zy(s)&&By(n)}function Uy(n,s,a){return a(function(){zy(s)&&By(n)})}function zy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!lr(n,a)}catch{return!0}}function By(n){var s=xa(n,2);s!==null&&Qn(s,n,2)}function Af(n){var s=Pn();if(typeof n=="function"){var a=n;if(n=a(),ka){wn(!0);try{a()}finally{wn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:n},s}function Gy(n,s,a,l){return n.baseState=a,Sf(n,dt,typeof l=="function"?l:ki)}function h1(n,s,a,l,f){if(qu(n))throw Error(i(485));if(n=s.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};Y.T!==null?a(!0):p.isTransition=!1,l(p),a=s.pending,a===null?(p.next=s.pending=p,qy(s,p)):(p.next=a.next,s.pending=a.next=p)}}function qy(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var p=Y.T,b={};Y.T=b;try{var w=a(f,l),I=Y.S;I!==null&&I(b,w),Hy(n,s,w)}catch(B){Cf(n,s,B)}finally{p!==null&&b.types!==null&&(p.types=b.types),Y.T=p}}else try{p=a(f,l),Hy(n,s,p)}catch(B){Cf(n,s,B)}}function Hy(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Fy(n,s,l)},function(l){return Cf(n,s,l)}):Fy(n,s,a)}function Fy(n,s,a){s.status="fulfilled",s.value=a,Yy(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,qy(n,a)))}function Cf(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Yy(s),s=s.next;while(s!==l)}n.action=null}function Yy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function $y(n,s){return s}function Qy(n,s){if(We){var a=gt.formState;if(a!==null){e:{var l=Le;if(We){if(wt){t:{for(var f=wt,p=Rr;f.nodeType!==8;){if(!p){f=null;break t}if(f=Ir(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){wt=Ir(f.nextSibling),l=f.data==="F!";break e}}ps(l)}l=!1}l&&(s=a[0])}}return a=Pn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$y,lastRenderedState:s},a.queue=l,a=f0.bind(null,Le,l),l.dispatch=a,l=Af(!1),p=Of.bind(null,Le,!1,l.queue),l=Pn(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=h1.bind(null,Le,f,p,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function Ky(n){var s=qt();return Xy(s,dt,n)}function Xy(n,s,a){if(s=Sf(n,s,$y)[0],n=zu(ki)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Hl(s)}catch(b){throw b===Ro?ku:b}else l=s;s=qt();var f=s.queue,p=f.dispatch;return a!==s.memoizedState&&(Le.flags|=2048,Oo(9,{destroy:void 0},d1.bind(null,f,a),null)),[l,p,n]}function d1(n,s){n.action=s}function Jy(n){var s=qt(),a=dt;if(a!==null)return Xy(s,a,n);qt(),s=s.memoizedState,a=qt();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Oo(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=Le.updateQueue,s===null&&(s=Lu(),Le.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function Wy(){return qt().memoizedState}function Bu(n,s,a,l){var f=Pn();Le.flags|=n,f.memoizedState=Oo(1|s,{destroy:void 0},a,l===void 0?null:l)}function Gu(n,s,a,l){var f=qt();l=l===void 0?null:l;var p=f.memoizedState.inst;dt!==null&&l!==null&&bf(l,dt.memoizedState.deps)?f.memoizedState=Oo(s,p,a,l):(Le.flags|=n,f.memoizedState=Oo(1|s,p,a,l))}function Zy(n,s){Bu(8390656,8,n,s)}function Rf(n,s){Gu(2048,8,n,s)}function f1(n){Le.flags|=4;var s=Le.updateQueue;if(s===null)s=Lu(),Le.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function e0(n){var s=qt().memoizedState;return f1({ref:s,nextImpl:n}),function(){if((st&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function t0(n,s){return Gu(4,2,n,s)}function n0(n,s){return Gu(4,4,n,s)}function r0(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function i0(n,s,a){a=a!=null?a.concat([n]):null,Gu(4,4,r0.bind(null,s,n),a)}function kf(){}function s0(n,s){var a=qt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&bf(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function a0(n,s){var a=qt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&bf(s,l[1]))return l[0];if(l=n(),ka){wn(!0);try{n()}finally{wn(!1)}}return a.memoizedState=[l,s],l}function If(n,s,a){return a===void 0||(Ri&1073741824)!==0&&($e&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=ov(),Le.lanes|=n,ws|=n,a)}function o0(n,s,a,l){return lr(a,s)?a:Io.current!==null?(n=If(n,a,l),lr(n,s)||(Jt=!0),n):(Ri&42)===0||(Ri&1073741824)!==0&&($e&261930)===0?(Jt=!0,n.memoizedState=a):(n=ov(),Le.lanes|=n,ws|=n,s)}function l0(n,s,a,l,f){var p=se.p;se.p=p!==0&&8>p?p:8;var b=Y.T,w={};Y.T=w,Of(n,!1,s,a);try{var I=f(),B=Y.S;if(B!==null&&B(w,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=l1(I,l);Fl(n,s,Q,pr(n))}else Fl(n,s,l,pr(n))}catch(Z){Fl(n,s,{then:function(){},status:"rejected",reason:Z},pr())}finally{se.p=p,b!==null&&w.types!==null&&(b.types=w.types),Y.T=b}}function p1(){}function Df(n,s,a,l){if(n.tag!==5)throw Error(i(476));var f=c0(n).queue;l0(n,f,s,xe,a===null?p1:function(){return u0(n),a(l)})}function c0(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:xe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function u0(n){var s=c0(n);s.next===null&&(s=n.alternate.memoizedState),Fl(n,s.next.queue,{},pr())}function jf(){return mn(lc)}function h0(){return qt().memoizedState}function d0(){return qt().memoizedState}function m1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=pr();n=ys(a);var l=vs(s,n,a);l!==null&&(Qn(l,s,a),zl(l,s,a)),s={cache:lf()},n.payload=s;return}s=s.return}}function g1(n,s,a){var l=pr();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},qu(n)?p0(s,a):(a=Xd(n,s,a,l),a!==null&&(Qn(a,n,l),m0(a,s,l)))}function f0(n,s,a){var l=pr();Fl(n,s,a,l)}function Fl(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(qu(n))p0(s,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var b=s.lastRenderedState,w=p(b,a);if(f.hasEagerState=!0,f.eagerState=w,lr(w,b))return wu(n,s,f,0),gt===null&&Eu(),!1}catch{}finally{}if(a=Xd(n,s,f,l),a!==null)return Qn(a,n,l),m0(a,s,l),!0}return!1}function Of(n,s,a,l){if(l={lane:2,revertLane:dp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},qu(n)){if(s)throw Error(i(479))}else s=Xd(n,a,l,2),s!==null&&Qn(s,n,2)}function qu(n){var s=n.alternate;return n===Le||s!==null&&s===Le}function p0(n,s){Do=Pu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function m0(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Wi(n,a)}}var Yl={readContext:mn,use:Uu,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Yl.useEffectEvent=Vt;var g0={readContext:mn,use:Uu,useCallback:function(n,s){return Pn().memoizedState=[n,s===void 0?null:s],n},useContext:mn,useEffect:Zy,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Bu(4194308,4,r0.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Bu(4194308,4,n,s)},useInsertionEffect:function(n,s){Bu(4,2,n,s)},useMemo:function(n,s){var a=Pn();s=s===void 0?null:s;var l=n();if(ka){wn(!0);try{n()}finally{wn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Pn();if(a!==void 0){var f=a(s);if(ka){wn(!0);try{a(s)}finally{wn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=g1.bind(null,Le,n),[l.memoizedState,n]},useRef:function(n){var s=Pn();return n={current:n},s.memoizedState=n},useState:function(n){n=Af(n);var s=n.queue,a=f0.bind(null,Le,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:kf,useDeferredValue:function(n,s){var a=Pn();return If(a,n,s)},useTransition:function(){var n=Af(!1);return n=l0.bind(null,Le,n.queue,!0,!1),Pn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=Le,f=Pn();if(We){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),gt===null)throw Error(i(349));($e&127)!==0||Vy(l,s,a)}f.memoizedState=a;var p={value:a,getSnapshot:s};return f.queue=p,Zy(Uy.bind(null,l,p,n),[n]),l.flags|=2048,Oo(9,{destroy:void 0},Ly.bind(null,l,p,a,s),null),a},useId:function(){var n=Pn(),s=gt.identifierPrefix;if(We){var a=li,l=oi;a=(l&~(1<<32-ce(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Vu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=c1++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:jf,useFormState:Qy,useActionState:Qy,useOptimistic:function(n){var s=Pn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Of.bind(null,Le,!0,a),a.dispatch=s,[n,s]},useMemoCache:Tf,useCacheRefresh:function(){return Pn().memoizedState=m1.bind(null,Le)},useEffectEvent:function(n){var s=Pn(),a={impl:n};return s.memoizedState=a,function(){if((st&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Mf={readContext:mn,use:Uu,useCallback:s0,useContext:mn,useEffect:Rf,useImperativeHandle:i0,useInsertionEffect:t0,useLayoutEffect:n0,useMemo:a0,useReducer:zu,useRef:Wy,useState:function(){return zu(ki)},useDebugValue:kf,useDeferredValue:function(n,s){var a=qt();return o0(a,dt.memoizedState,n,s)},useTransition:function(){var n=zu(ki)[0],s=qt().memoizedState;return[typeof n=="boolean"?n:Hl(n),s]},useSyncExternalStore:Py,useId:h0,useHostTransitionStatus:jf,useFormState:Ky,useActionState:Ky,useOptimistic:function(n,s){var a=qt();return Gy(a,dt,n,s)},useMemoCache:Tf,useCacheRefresh:d0};Mf.useEffectEvent=e0;var y0={readContext:mn,use:Uu,useCallback:s0,useContext:mn,useEffect:Rf,useImperativeHandle:i0,useInsertionEffect:t0,useLayoutEffect:n0,useMemo:a0,useReducer:Nf,useRef:Wy,useState:function(){return Nf(ki)},useDebugValue:kf,useDeferredValue:function(n,s){var a=qt();return dt===null?If(a,n,s):o0(a,dt.memoizedState,n,s)},useTransition:function(){var n=Nf(ki)[0],s=qt().memoizedState;return[typeof n=="boolean"?n:Hl(n),s]},useSyncExternalStore:Py,useId:h0,useHostTransitionStatus:jf,useFormState:Jy,useActionState:Jy,useOptimistic:function(n,s){var a=qt();return dt!==null?Gy(a,dt,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:d0};y0.useEffectEvent=e0;function Pf(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:E({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Vf={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=pr(),f=ys(l);f.payload=s,a!=null&&(f.callback=a),s=vs(n,f,l),s!==null&&(Qn(s,n,l),zl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=pr(),f=ys(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=vs(n,f,l),s!==null&&(Qn(s,n,l),zl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=pr(),l=ys(a);l.tag=2,s!=null&&(l.callback=s),s=vs(n,l,a),s!==null&&(Qn(s,n,a),zl(s,n,a))}};function v0(n,s,a,l,f,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,p,b):s.prototype&&s.prototype.isPureReactComponent?!Dl(a,l)||!Dl(f,p):!0}function b0(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&Vf.enqueueReplaceState(s,s.state,null)}function Ia(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function _0(n){xu(n)}function x0(n){console.error(n)}function E0(n){xu(n)}function Hu(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function w0(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Lf(n,s,a){return a=ys(a),a.tag=3,a.payload={element:null},a.callback=function(){Hu(n,s)},a}function T0(n){return n=ys(n),n.tag=3,n}function S0(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;n.payload=function(){return f(p)},n.callback=function(){w0(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){w0(s,a,l),typeof f!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function y1(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&No(s,a,f,!0),a=ur.current,a!==null){switch(a.tag){case 31:case 13:return kr===null?nh():a.alternate===null&&Lt===0&&(Lt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Iu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),cp(n,l,f)),!1;case 22:return a.flags|=65536,l===Iu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),cp(n,l,f)),!1}throw Error(i(435,a.tag))}return cp(n,l,f),nh(),!1}if(We)return s=ur.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==nf&&(n=Error(i(422),{cause:l}),Ml(Nr(n,a)))):(l!==nf&&(s=Error(i(423),{cause:l}),Ml(Nr(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Nr(l,a),f=Lf(n.stateNode,l,f),pf(n,f),Lt!==4&&(Lt=2)),!1;var p=Error(i(520),{cause:l});if(p=Nr(p,a),ec===null?ec=[p]:ec.push(p),Lt!==4&&(Lt=2),s===null)return!0;l=Nr(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Lf(a.stateNode,l,n),pf(a,n),!1;case 1:if(s=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ts===null||!Ts.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=T0(f),S0(f,n,a,l),pf(a,f),!1}a=a.return}while(a!==null);return!1}var Uf=Error(i(461)),Jt=!1;function gn(n,s,a,l){s.child=n===null?Ry(s,null,a,l):Ra(s,n.child,a,l)}function N0(n,s,a,l,f){a=a.render;var p=s.ref;if("ref"in l){var b={};for(var w in l)w!=="ref"&&(b[w]=l[w])}else b=l;return Sa(s),l=_f(n,s,a,b,p,f),w=xf(),n!==null&&!Jt?(Ef(n,s,f),Ii(n,s,f)):(We&&w&&ef(s),s.flags|=1,gn(n,s,l,f),s.child)}function A0(n,s,a,l,f){if(n===null){var p=a.type;return typeof p=="function"&&!Jd(p)&&p.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=p,C0(n,s,p,l,f)):(n=Su(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!$f(n,f)){var b=p.memoizedProps;if(a=a.compare,a=a!==null?a:Dl,a(b,l)&&n.ref===s.ref)return Ii(n,s,f)}return s.flags|=1,n=Si(p,l),n.ref=s.ref,n.return=s,s.child=n}function C0(n,s,a,l,f){if(n!==null){var p=n.memoizedProps;if(Dl(p,l)&&n.ref===s.ref)if(Jt=!1,s.pendingProps=l=p,$f(n,f))(n.flags&131072)!==0&&(Jt=!0);else return s.lanes=n.lanes,Ii(n,s,f)}return zf(n,s,a,l,f)}function R0(n,s,a,l){var f=l.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,s.child=null;return k0(n,s,p,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ru(s,p!==null?p.cachePool:null),p!==null?Dy(s,p):gf(),jy(s);else return l=s.lanes=536870912,k0(n,s,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(Ru(s,p.cachePool),Dy(s,p),_s(),s.memoizedState=null):(n!==null&&Ru(s,null),gf(),_s());return gn(n,s,f,a),s.child}function $l(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function k0(n,s,a,l,f){var p=uf();return p=p===null?null:{parent:Kt._currentValue,pool:p},s.memoizedState={baseLanes:a,cachePool:p},n!==null&&Ru(s,null),gf(),jy(s),n!==null&&No(n,s,l,!0),s.childLanes=f,null}function Fu(n,s){return s=$u({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function I0(n,s,a){return Ra(s,n.child,null,a),n=Fu(s,s.pendingProps),n.flags|=2,hr(s),s.memoizedState=null,n}function v1(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(We){if(l.mode==="hidden")return n=Fu(s,l),s.lanes=536870912,$l(null,n);if(vf(s),(n=wt)?(n=qv(n,Rr),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ds!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},a=py(n),a.return=s,s.child=a,pn=s,wt=null)):n=null,n===null)throw ps(s);return s.lanes=536870912,null}return Fu(s,l)}var p=n.memoizedState;if(p!==null){var b=p.dehydrated;if(vf(s),f)if(s.flags&256)s.flags&=-257,s=I0(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Jt||No(n,s,a,!1),f=(a&n.childLanes)!==0,Jt||f){if(l=gt,l!==null&&(b=ca(l,a),b!==0&&b!==p.retryLane))throw p.retryLane=b,xa(n,b),Qn(l,n,b),Uf;nh(),s=I0(n,s,a)}else n=p.treeContext,wt=Ir(b.nextSibling),pn=s,We=!0,fs=null,Rr=!1,n!==null&&yy(s,n),s=Fu(s,l),s.flags|=4096;return s}return n=Si(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Yu(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function zf(n,s,a,l,f){return Sa(s),a=_f(n,s,a,l,void 0,f),l=xf(),n!==null&&!Jt?(Ef(n,s,f),Ii(n,s,f)):(We&&l&&ef(s),s.flags|=1,gn(n,s,a,f),s.child)}function D0(n,s,a,l,f,p){return Sa(s),s.updateQueue=null,a=My(s,l,a,f),Oy(n),l=xf(),n!==null&&!Jt?(Ef(n,s,p),Ii(n,s,p)):(We&&l&&ef(s),s.flags|=1,gn(n,s,a,p),s.child)}function j0(n,s,a,l,f){if(Sa(s),s.stateNode===null){var p=Eo,b=a.contextType;typeof b=="object"&&b!==null&&(p=mn(b)),p=new a(l,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Vf,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=l,p.state=s.memoizedState,p.refs={},df(s),b=a.contextType,p.context=typeof b=="object"&&b!==null?mn(b):Eo,p.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Pf(s,a,b,l),p.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&Vf.enqueueReplaceState(p,p.state,null),Gl(s,l,p,f),Bl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){p=s.stateNode;var w=s.memoizedProps,I=Ia(a,w);p.props=I;var B=p.context,Q=a.contextType;b=Eo,typeof Q=="object"&&Q!==null&&(b=mn(Q));var Z=a.getDerivedStateFromProps;Q=typeof Z=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Q||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||B!==b)&&b0(s,p,l,b),gs=!1;var q=s.memoizedState;p.state=q,Gl(s,l,p,f),Bl(),B=s.memoizedState,w||q!==B||gs?(typeof Z=="function"&&(Pf(s,a,Z,l),B=s.memoizedState),(I=gs||v0(s,a,I,l,q,B,b))?(Q||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=B),p.props=l,p.state=B,p.context=b,l=I):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{p=s.stateNode,ff(n,s),b=s.memoizedProps,Q=Ia(a,b),p.props=Q,Z=s.pendingProps,q=p.context,B=a.contextType,I=Eo,typeof B=="object"&&B!==null&&(I=mn(B)),w=a.getDerivedStateFromProps,(B=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==Z||q!==I)&&b0(s,p,l,I),gs=!1,q=s.memoizedState,p.state=q,Gl(s,l,p,f),Bl();var F=s.memoizedState;b!==Z||q!==F||gs||n!==null&&n.dependencies!==null&&Au(n.dependencies)?(typeof w=="function"&&(Pf(s,a,w,l),F=s.memoizedState),(Q=gs||v0(s,a,Q,l,q,F,I)||n!==null&&n.dependencies!==null&&Au(n.dependencies))?(B||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,F,I),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,F,I)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=F),p.props=l,p.state=F,p.context=I,l=Q):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),l=!1)}return p=l,Yu(n,s),l=(s.flags&128)!==0,p||l?(p=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&l?(s.child=Ra(s,n.child,null,f),s.child=Ra(s,null,a,f)):gn(n,s,a,f),s.memoizedState=p.state,n=s.child):n=Ii(n,s,f),n}function O0(n,s,a,l){return wa(),s.flags|=256,gn(n,s,a,l),s.child}var Bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gf(n){return{baseLanes:n,cachePool:wy()}}function qf(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=fr),n}function M0(n,s,a){var l=s.pendingProps,f=!1,p=(s.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(Gt.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,n===null){if(We){if(f?bs(s):_s(),(n=wt)?(n=qv(n,Rr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ds!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},a=py(n),a.return=s,s.child=a,pn=s,wt=null)):n=null,n===null)throw ps(s);return Sp(n)?s.lanes=32:s.lanes=536870912,null}var w=l.children;return l=l.fallback,f?(_s(),f=s.mode,w=$u({mode:"hidden",children:w},f),l=Ea(l,f,a,null),w.return=s,l.return=s,w.sibling=l,s.child=w,l=s.child,l.memoizedState=Gf(a),l.childLanes=qf(n,b,a),s.memoizedState=Bf,$l(null,l)):(bs(s),Hf(s,w))}var I=n.memoizedState;if(I!==null&&(w=I.dehydrated,w!==null)){if(p)s.flags&256?(bs(s),s.flags&=-257,s=Ff(n,s,a)):s.memoizedState!==null?(_s(),s.child=n.child,s.flags|=128,s=null):(_s(),w=l.fallback,f=s.mode,l=$u({mode:"visible",children:l.children},f),w=Ea(w,f,a,null),w.flags|=2,l.return=s,w.return=s,l.sibling=w,s.child=l,Ra(s,n.child,null,a),l=s.child,l.memoizedState=Gf(a),l.childLanes=qf(n,b,a),s.memoizedState=Bf,s=$l(null,l));else if(bs(s),Sp(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var B=b.dgst;b=B,l=Error(i(419)),l.stack="",l.digest=b,Ml({value:l,source:null,stack:null}),s=Ff(n,s,a)}else if(Jt||No(n,s,a,!1),b=(a&n.childLanes)!==0,Jt||b){if(b=gt,b!==null&&(l=ca(b,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,xa(n,l),Qn(b,n,l),Uf;Tp(w)||nh(),s=Ff(n,s,a)}else Tp(w)?(s.flags|=192,s.child=n.child,s=null):(n=I.treeContext,wt=Ir(w.nextSibling),pn=s,We=!0,fs=null,Rr=!1,n!==null&&yy(s,n),s=Hf(s,l.children),s.flags|=4096);return s}return f?(_s(),w=l.fallback,f=s.mode,I=n.child,B=I.sibling,l=Si(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,B!==null?w=Si(B,w):(w=Ea(w,f,a,null),w.flags|=2),w.return=s,l.return=s,l.sibling=w,s.child=l,$l(null,l),l=s.child,w=n.child.memoizedState,w===null?w=Gf(a):(f=w.cachePool,f!==null?(I=Kt._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=wy(),w={baseLanes:w.baseLanes|a,cachePool:f}),l.memoizedState=w,l.childLanes=qf(n,b,a),s.memoizedState=Bf,$l(n.child,l)):(bs(s),a=n.child,n=a.sibling,a=Si(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(b=s.deletions,b===null?(s.deletions=[n],s.flags|=16):b.push(n)),s.child=a,s.memoizedState=null,a)}function Hf(n,s){return s=$u({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function $u(n,s){return n=cr(22,n,null,s),n.lanes=0,n}function Ff(n,s,a){return Ra(s,n.child,null,a),n=Hf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function P0(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),af(n.return,s,a)}function Yf(n,s,a,l,f,p){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:p}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=p)}function V0(n,s,a){var l=s.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var b=Gt.current,w=(b&2)!==0;if(w?(b=b&1|2,s.flags|=128):b&=1,oe(Gt,b),gn(n,s,l,a),l=We?Ol:0,!w&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&P0(n,a,s);else if(n.tag===19)P0(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Mu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Yf(s,!1,f,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Mu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Yf(s,!0,a,null,p,l);break;case"together":Yf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Ii(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ws|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(No(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,a=Si(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Si(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function $f(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Au(n)))}function b1(n,s,a){switch(s.tag){case 3:Nt(s,s.stateNode.containerInfo),ms(s,Kt,n.memoizedState.cache),wa();break;case 27:case 5:ue(s);break;case 4:Nt(s,s.stateNode.containerInfo);break;case 10:ms(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,vf(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(bs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?M0(n,s,a):(bs(s),n=Ii(n,s,a),n!==null?n.sibling:null);bs(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(No(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return V0(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Gt,Gt.current),l)break;return null;case 22:return s.lanes=0,R0(n,s,a,s.pendingProps);case 24:ms(s,Kt,n.memoizedState.cache)}return Ii(n,s,a)}function L0(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Jt=!0;else{if(!$f(n,a)&&(s.flags&128)===0)return Jt=!1,b1(n,s,a);Jt=(n.flags&131072)!==0}else Jt=!1,We&&(s.flags&1048576)!==0&&gy(s,Ol,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(n=Aa(s.elementType),s.type=n,typeof n=="function")Jd(n)?(l=Ia(n,l),s.tag=1,s=j0(null,s,n,l,a)):(s.tag=0,s=zf(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===_e){s.tag=11,s=N0(null,s,n,l,a);break e}else if(f===C){s.tag=14,s=A0(null,s,n,l,a);break e}}throw s=rt(n)||n,Error(i(306,s,""))}}return s;case 0:return zf(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Ia(l,s.pendingProps),j0(n,s,l,f,a);case 3:e:{if(Nt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));l=s.pendingProps;var p=s.memoizedState;f=p.element,ff(n,s),Gl(s,l,null,a);var b=s.memoizedState;if(l=b.cache,ms(s,Kt,l),l!==p.cache&&of(s,[Kt],a,!0),Bl(),l=b.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=O0(n,s,l,a);break e}else if(l!==f){f=Nr(Error(i(424)),s),Ml(f),s=O0(n,s,l,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(wt=Ir(n.firstChild),pn=s,We=!0,fs=null,Rr=!0,a=Ry(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(wa(),l===f){s=Ii(n,s,a);break e}gn(n,s,l,a)}s=s.child}return s;case 26:return Yu(n,s),n===null?(a=Kv(s.type,null,s.pendingProps,null))?s.memoizedState=a:We||(a=s.type,n=s.pendingProps,l=ch(De.current).createElement(a),l[mt]=s,l[jt]=n,yn(l,a,n),Rt(l),s.stateNode=l):s.memoizedState=Kv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ue(s),n===null&&We&&(l=s.stateNode=Yv(s.type,s.pendingProps,De.current),pn=s,Rr=!0,f=wt,Cs(s.type)?(Np=f,wt=Ir(l.firstChild)):wt=f),gn(n,s,s.pendingProps.children,a),Yu(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&We&&((f=l=wt)&&(l=K1(l,s.type,s.pendingProps,Rr),l!==null?(s.stateNode=l,pn=s,wt=Ir(l.firstChild),Rr=!1,f=!0):f=!1),f||ps(s)),ue(s),f=s.type,p=s.pendingProps,b=n!==null?n.memoizedProps:null,l=p.children,xp(f,p)?l=null:b!==null&&xp(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=_f(n,s,u1,null,null,a),lc._currentValue=f),Yu(n,s),gn(n,s,l,a),s.child;case 6:return n===null&&We&&((n=a=wt)&&(a=X1(a,s.pendingProps,Rr),a!==null?(s.stateNode=a,pn=s,wt=null,n=!0):n=!1),n||ps(s)),null;case 13:return M0(n,s,a);case 4:return Nt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Ra(s,null,l,a):gn(n,s,l,a),s.child;case 11:return N0(n,s,s.type,s.pendingProps,a);case 7:return gn(n,s,s.pendingProps,a),s.child;case 8:return gn(n,s,s.pendingProps.children,a),s.child;case 12:return gn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,ms(s,s.type,l.value),gn(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Sa(s),f=mn(f),l=l(f),s.flags|=1,gn(n,s,l,a),s.child;case 14:return A0(n,s,s.type,s.pendingProps,a);case 15:return C0(n,s,s.type,s.pendingProps,a);case 19:return V0(n,s,a);case 31:return v1(n,s,a);case 22:return R0(n,s,a,s.pendingProps);case 24:return Sa(s),l=mn(Kt),n===null?(f=uf(),f===null&&(f=gt,p=lf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),s.memoizedState={parent:l,cache:f},df(s),ms(s,Kt,f)):((n.lanes&a)!==0&&(ff(n,s),Gl(s,null,null,a),Bl()),f=n.memoizedState,p=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ms(s,Kt,l)):(l=p.cache,ms(s,Kt,l),l!==f.cache&&of(s,[Kt],a,!0))),gn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Di(n){n.flags|=4}function Qf(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(hv())n.flags|=8192;else throw Ca=Iu,hf}else n.flags&=-16777217}function U0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!eb(s))if(hv())n.flags|=8192;else throw Ca=Iu,hf}function Qu(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?so():536870912,n.lanes|=s,Lo|=s)}function Ql(n,s){if(!We)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Tt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function _1(n,s,a){var l=s.pendingProps;switch(tf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ci(Kt),X(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(So(s)?Di(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,rf())),Tt(s),null;case 26:var f=s.type,p=s.memoizedState;return n===null?(Di(s),p!==null?(Tt(s),U0(s,p)):(Tt(s),Qf(s,f,null,l,a))):p?p!==n.memoizedState?(Di(s),Tt(s),U0(s,p)):(Tt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&Di(s),Tt(s),Qf(s,f,n,l,a)),null;case 27:if(Me(s),a=De.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Di(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return Tt(s),null}n=he.current,So(s)?vy(s):(n=Yv(f,l,a),s.stateNode=n,Di(s))}return Tt(s),null;case 5:if(Me(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Di(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return Tt(s),null}if(p=he.current,So(s))vy(s);else{var b=ch(De.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}p[mt]=s,p[jt]=l;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=p;e:switch(yn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Di(s)}}return Tt(s),Qf(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&Di(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(n=De.current,So(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=pn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[mt]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Mv(n.nodeValue,a)),n||ps(s,!0)}else n=ch(n).createTextNode(l),n[mt]=s,s.stateNode=n}return Tt(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=So(s),a!==null){if(n===null){if(!l)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[mt]=s}else wa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),n=!1}else a=rf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(hr(s),s):(hr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Tt(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=So(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[mt]=s}else wa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),f=!1}else f=rf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(hr(s),s):(hr(s),null)}return hr(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Qu(s,s.updateQueue),Tt(s),null);case 4:return X(),n===null&&gp(s.stateNode.containerInfo),Tt(s),null;case 10:return Ci(s.type),Tt(s),null;case 19:if($(Gt),l=s.memoizedState,l===null)return Tt(s),null;if(f=(s.flags&128)!==0,p=l.rendering,p===null)if(f)Ql(l,!1);else{if(Lt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Mu(n),p!==null){for(s.flags|=128,Ql(l,!1),n=p.updateQueue,s.updateQueue=n,Qu(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)fy(a,n),a=a.sibling;return oe(Gt,Gt.current&1|2),We&&Ni(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&Ee()>Zu&&(s.flags|=128,f=!0,Ql(l,!1),s.lanes=4194304)}else{if(!f)if(n=Mu(p),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Qu(s,n),Ql(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!We)return Tt(s),null}else 2*Ee()-l.renderingStartTime>Zu&&a!==536870912&&(s.flags|=128,f=!0,Ql(l,!1),s.lanes=4194304);l.isBackwards?(p.sibling=s.child,s.child=p):(n=l.last,n!==null?n.sibling=p:s.child=p,l.last=p)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Ee(),n.sibling=null,a=Gt.current,oe(Gt,f?a&1|2:a&1),We&&Ni(s,l.treeForkCount),n):(Tt(s),null);case 22:case 23:return hr(s),yf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),a=s.updateQueue,a!==null&&Qu(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&$(Na),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ci(Kt),Tt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function x1(n,s){switch(tf(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ci(Kt),X(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Me(s),null;case 31:if(s.memoizedState!==null){if(hr(s),s.alternate===null)throw Error(i(340));wa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(hr(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));wa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return $(Gt),null;case 4:return X(),null;case 10:return Ci(s.type),null;case 22:case 23:return hr(s),yf(),n!==null&&$(Na),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ci(Kt),null;case 25:return null;default:return null}}function z0(n,s){switch(tf(s),s.tag){case 3:Ci(Kt),X();break;case 26:case 27:case 5:Me(s);break;case 4:X();break;case 31:s.memoizedState!==null&&hr(s);break;case 13:hr(s);break;case 19:$(Gt);break;case 10:Ci(s.type);break;case 22:case 23:hr(s),yf(),n!==null&&$(Na);break;case 24:Ci(Kt)}}function Kl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var p=a.create,b=a.inst;l=p(),b.destroy=l}a=a.next}while(a!==f)}}catch(w){ut(s,s.return,w)}}function xs(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&n)===n){var b=l.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,f=s;var I=a,B=w;try{B()}catch(Q){ut(f,I,Q)}}}l=l.next}while(l!==p)}}catch(Q){ut(s,s.return,Q)}}function B0(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{Iy(s,a)}catch(l){ut(n,n.return,l)}}}function G0(n,s,a){a.props=Ia(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ut(n,s,l)}}function Xl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){ut(n,s,f)}}function ci(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ut(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ut(n,s,f)}else a.current=null}function q0(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ut(n,n.return,f)}}function Kf(n,s,a){try{var l=n.stateNode;q1(l,n.type,a,s),l[jt]=s}catch(f){ut(n,n.return,f)}}function H0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Cs(n.type)||n.tag===4}function Xf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||H0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Cs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jf(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ur));else if(l!==4&&(l===27&&Cs(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Jf(n,s,a),n=n.sibling;n!==null;)Jf(n,s,a),n=n.sibling}function Ku(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&Cs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Ku(n,s,a),n=n.sibling;n!==null;)Ku(n,s,a),n=n.sibling}function F0(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);yn(s,l,a),s[mt]=n,s[jt]=a}catch(p){ut(n,n.return,p)}}var ji=!1,Wt=!1,Wf=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,cn=null;function E1(n,s){if(n=n.containerInfo,bp=gh,n=iy(n),Hd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var b=0,w=-1,I=-1,B=0,Q=0,Z=n,q=null;t:for(;;){for(var F;Z!==a||f!==0&&Z.nodeType!==3||(w=b+f),Z!==p||l!==0&&Z.nodeType!==3||(I=b+l),Z.nodeType===3&&(b+=Z.nodeValue.length),(F=Z.firstChild)!==null;)q=Z,Z=F;for(;;){if(Z===n)break t;if(q===a&&++B===f&&(w=b),q===p&&++Q===l&&(I=b),(F=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=F}a=w===-1||I===-1?null:{start:w,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(_p={focusedElem:n,selectionRange:a},gh=!1,cn=s;cn!==null;)if(s=cn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,cn=n;else for(;cn!==null;){switch(s=cn,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=s,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var pe=Ia(a.type,f);n=l.getSnapshotBeforeUpdate(pe,p),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){ut(a,a.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)wp(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":wp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,cn=n;break}cn=s.return}}function $0(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(n,a),l&4&&Kl(5,a);break;case 1:if(Mi(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(b){ut(a,a.return,b)}else{var f=Ia(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(b){ut(a,a.return,b)}}l&64&&B0(a),l&512&&Xl(a,a.return);break;case 3:if(Mi(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Iy(n,s)}catch(b){ut(a,a.return,b)}}break;case 27:s===null&&l&4&&F0(a);case 26:case 5:Mi(n,a),s===null&&l&4&&q0(a),l&512&&Xl(a,a.return);break;case 12:Mi(n,a);break;case 31:Mi(n,a),l&4&&X0(n,a);break;case 13:Mi(n,a),l&4&&J0(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=I1.bind(null,a),J1(n,a))));break;case 22:if(l=a.memoizedState!==null||ji,!l){s=s!==null&&s.memoizedState!==null||Wt,f=ji;var p=Wt;ji=l,(Wt=s)&&!p?Pi(n,a,(a.subtreeFlags&8772)!==0):Mi(n,a),ji=f,Wt=p}break;case 30:break;default:Mi(n,a)}}function Q0(n){var s=n.alternate;s!==null&&(n.alternate=null,Q0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&xi(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var It=null,Hn=!1;function Oi(n,s,a){for(a=a.child;a!==null;)K0(n,s,a),a=a.sibling}function K0(n,s,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(En,a)}catch{}switch(a.tag){case 26:Wt||ci(a,s),Oi(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Wt||ci(a,s);var l=It,f=Hn;Cs(a.type)&&(It=a.stateNode,Hn=!1),Oi(n,s,a),sc(a.stateNode),It=l,Hn=f;break;case 5:Wt||ci(a,s);case 6:if(l=It,f=Hn,It=null,Oi(n,s,a),It=l,Hn=f,It!==null)if(Hn)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(a.stateNode)}catch(p){ut(a,s,p)}else try{It.removeChild(a.stateNode)}catch(p){ut(a,s,p)}break;case 18:It!==null&&(Hn?(n=It,Bv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Yo(n)):Bv(It,a.stateNode));break;case 4:l=It,f=Hn,It=a.stateNode.containerInfo,Hn=!0,Oi(n,s,a),It=l,Hn=f;break;case 0:case 11:case 14:case 15:xs(2,a,s),Wt||xs(4,a,s),Oi(n,s,a);break;case 1:Wt||(ci(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&G0(a,s,l)),Oi(n,s,a);break;case 21:Oi(n,s,a);break;case 22:Wt=(l=Wt)||a.memoizedState!==null,Oi(n,s,a),Wt=l;break;default:Oi(n,s,a)}}function X0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Yo(n)}catch(a){ut(s,s.return,a)}}}function J0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Yo(n)}catch(a){ut(s,s.return,a)}}function w1(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Y0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Y0),s;default:throw Error(i(435,n.tag))}}function Xu(n,s){var a=w1(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=D1.bind(null,n,l);l.then(f,f)}})}function Fn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=n,b=s,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(Cs(w.type)){It=w.stateNode,Hn=!1;break e}break;case 5:It=w.stateNode,Hn=!1;break e;case 3:case 4:It=w.stateNode.containerInfo,Hn=!0;break e}w=w.return}if(It===null)throw Error(i(160));K0(p,b,f),It=null,Hn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)W0(s,n),s=s.sibling}var Fr=null;function W0(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Fn(s,n),Yn(n),l&4&&(xs(3,n,n.return),Kl(3,n),xs(5,n,n.return));break;case 1:Fn(s,n),Yn(n),l&512&&(Wt||a===null||ci(a,a.return)),l&64&&ji&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Fr;if(Fn(s,n),Yn(n),l&512&&(Wt||a===null||ci(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Bn]||p[mt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),yn(p,l,a),p[mt]=n,Rt(p),l=p;break e;case"link":var b=Wv("link","href",f).get(l+(a.href||""));if(b){for(var w=0;w<b.length;w++)if(p=b[w],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(w,1);break t}}p=f.createElement(l),yn(p,l,a),f.head.appendChild(p);break;case"meta":if(b=Wv("meta","content",f).get(l+(a.content||""))){for(w=0;w<b.length;w++)if(p=b[w],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(w,1);break t}}p=f.createElement(l),yn(p,l,a),f.head.appendChild(p);break;default:throw Error(i(468,l))}p[mt]=n,Rt(p),l=p}n.stateNode=l}else Zv(f,n.type,n.stateNode);else n.stateNode=Jv(f,l,n.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?Zv(f,n.type,n.stateNode):Jv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Kf(n,n.memoizedProps,a.memoizedProps)}break;case 27:Fn(s,n),Yn(n),l&512&&(Wt||a===null||ci(a,a.return)),a!==null&&l&4&&Kf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Fn(s,n),Yn(n),l&512&&(Wt||a===null||ci(a,a.return)),n.flags&32){f=n.stateNode;try{qn(f,"")}catch(pe){ut(n,n.return,pe)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Kf(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Wf=!0);break;case 6:if(Fn(s,n),Yn(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(pe){ut(n,n.return,pe)}}break;case 3:if(dh=null,f=Fr,Fr=uh(s.containerInfo),Fn(s,n),Fr=f,Yn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Yo(s.containerInfo)}catch(pe){ut(n,n.return,pe)}Wf&&(Wf=!1,Z0(n));break;case 4:l=Fr,Fr=uh(n.stateNode.containerInfo),Fn(s,n),Yn(n),Fr=l;break;case 12:Fn(s,n),Yn(n);break;case 31:Fn(s,n),Yn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Xu(n,l)));break;case 13:Fn(s,n),Yn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Wu=Ee()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Xu(n,l)));break;case 22:f=n.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,B=ji,Q=Wt;if(ji=B||f,Wt=Q||I,Fn(s,n),Wt=Q,ji=B,Yn(n),l&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||I||ji||Wt||Da(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){I=a=s;try{if(p=I.stateNode,f)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=I.stateNode;var Z=I.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;w.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(pe){ut(I,I.return,pe)}}}else if(s.tag===6){if(a===null){I=s;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(pe){ut(I,I.return,pe)}}}else if(s.tag===18){if(a===null){I=s;try{var F=I.stateNode;f?Gv(F,!0):Gv(I.stateNode,!1)}catch(pe){ut(I,I.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Xu(n,a))));break;case 19:Fn(s,n),Yn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Xu(n,l)));break;case 30:break;case 21:break;default:Fn(s,n),Yn(n)}}function Yn(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(H0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,p=Xf(n);Ku(n,p,f);break;case 5:var b=a.stateNode;a.flags&32&&(qn(b,""),a.flags&=-33);var w=Xf(n);Ku(n,w,b);break;case 3:case 4:var I=a.stateNode.containerInfo,B=Xf(n);Jf(n,B,I);break;default:throw Error(i(161))}}catch(Q){ut(n,n.return,Q)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Z0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Z0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Mi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)$0(n,s.alternate,s),s=s.sibling}function Da(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:xs(4,s,s.return),Da(s);break;case 1:ci(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&G0(s,s.return,a),Da(s);break;case 27:sc(s.stateNode);case 26:case 5:ci(s,s.return),Da(s);break;case 22:s.memoizedState===null&&Da(s);break;case 30:Da(s);break;default:Da(s)}n=n.sibling}}function Pi(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,p=s,b=p.flags;switch(p.tag){case 0:case 11:case 15:Pi(f,p,a),Kl(4,p);break;case 1:if(Pi(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){ut(l,l.return,B)}if(l=p,f=l.updateQueue,f!==null){var w=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)ky(I[f],w)}catch(B){ut(l,l.return,B)}}a&&b&64&&B0(p),Xl(p,p.return);break;case 27:F0(p);case 26:case 5:Pi(f,p,a),a&&l===null&&b&4&&q0(p),Xl(p,p.return);break;case 12:Pi(f,p,a);break;case 31:Pi(f,p,a),a&&b&4&&X0(f,p);break;case 13:Pi(f,p,a),a&&b&4&&J0(f,p);break;case 22:p.memoizedState===null&&Pi(f,p,a),Xl(p,p.return);break;case 30:break;default:Pi(f,p,a)}s=s.sibling}}function Zf(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Pl(a))}function ep(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Pl(n))}function Yr(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ev(n,s,a,l),s=s.sibling}function ev(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Yr(n,s,a,l),f&2048&&Kl(9,s);break;case 1:Yr(n,s,a,l);break;case 3:Yr(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Pl(n)));break;case 12:if(f&2048){Yr(n,s,a,l),n=s.stateNode;try{var p=s.memoizedProps,b=p.id,w=p.onPostCommit;typeof w=="function"&&w(b,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){ut(s,s.return,I)}}else Yr(n,s,a,l);break;case 31:Yr(n,s,a,l);break;case 13:Yr(n,s,a,l);break;case 23:break;case 22:p=s.stateNode,b=s.alternate,s.memoizedState!==null?p._visibility&2?Yr(n,s,a,l):Jl(n,s):p._visibility&2?Yr(n,s,a,l):(p._visibility|=2,Mo(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Zf(b,s);break;case 24:Yr(n,s,a,l),f&2048&&ep(s.alternate,s);break;default:Yr(n,s,a,l)}}function Mo(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,b=s,w=a,I=l,B=b.flags;switch(b.tag){case 0:case 11:case 15:Mo(p,b,w,I,f),Kl(8,b);break;case 23:break;case 22:var Q=b.stateNode;b.memoizedState!==null?Q._visibility&2?Mo(p,b,w,I,f):Jl(p,b):(Q._visibility|=2,Mo(p,b,w,I,f)),f&&B&2048&&Zf(b.alternate,b);break;case 24:Mo(p,b,w,I,f),f&&B&2048&&ep(b.alternate,b);break;default:Mo(p,b,w,I,f)}s=s.sibling}}function Jl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:Jl(a,l),f&2048&&Zf(l.alternate,l);break;case 24:Jl(a,l),f&2048&&ep(l.alternate,l);break;default:Jl(a,l)}s=s.sibling}}var Wl=8192;function Po(n,s,a){if(n.subtreeFlags&Wl)for(n=n.child;n!==null;)tv(n,s,a),n=n.sibling}function tv(n,s,a){switch(n.tag){case 26:Po(n,s,a),n.flags&Wl&&n.memoizedState!==null&&cS(a,Fr,n.memoizedState,n.memoizedProps);break;case 5:Po(n,s,a);break;case 3:case 4:var l=Fr;Fr=uh(n.stateNode.containerInfo),Po(n,s,a),Fr=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Wl,Wl=16777216,Po(n,s,a),Wl=l):Po(n,s,a));break;default:Po(n,s,a)}}function nv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Zl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];cn=l,iv(l,n)}nv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)rv(n),n=n.sibling}function rv(n){switch(n.tag){case 0:case 11:case 15:Zl(n),n.flags&2048&&xs(9,n,n.return);break;case 3:Zl(n);break;case 12:Zl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ju(n)):Zl(n);break;default:Zl(n)}}function Ju(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];cn=l,iv(l,n)}nv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:xs(8,s,s.return),Ju(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(s));break;default:Ju(s)}n=n.sibling}}function iv(n,s){for(;cn!==null;){var a=cn;switch(a.tag){case 0:case 11:case 15:xs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,cn=l;else e:for(a=n;cn!==null;){l=cn;var f=l.sibling,p=l.return;if(Q0(l),l===a){cn=null;break e}if(f!==null){f.return=p,cn=f;break e}cn=p}}}var T1={getCacheForType:function(n){var s=mn(Kt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return mn(Kt).controller.signal}},S1=typeof WeakMap=="function"?WeakMap:Map,st=0,gt=null,He=null,$e=0,ct=0,dr=null,Es=!1,Vo=!1,tp=!1,Vi=0,Lt=0,ws=0,ja=0,np=0,fr=0,Lo=0,ec=null,$n=null,rp=!1,Wu=0,sv=0,Zu=1/0,eh=null,Ts=null,rn=0,Ss=null,Uo=null,Li=0,ip=0,sp=null,av=null,tc=0,ap=null;function pr(){return(st&2)!==0&&$e!==0?$e&-$e:Y.T!==null?dp():oo()}function ov(){if(fr===0)if(($e&536870912)===0||We){var n=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),fr=n}else fr=536870912;return n=ur.current,n!==null&&(n.flags|=32),fr}function Qn(n,s,a){(n===gt&&(ct===2||ct===9)||n.cancelPendingCommit!==null)&&(zo(n,0),Ns(n,$e,fr,!1)),Wr(n,a),((st&2)===0||n!==gt)&&(n===gt&&((st&2)===0&&(ja|=a),Lt===4&&Ns(n,$e,fr,!1)),ui(n))}function lv(n,s,a){if((st&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Tn(n,s),f=l?C1(n,s):lp(n,s,!0),p=l;do{if(f===0){Vo&&!l&&Ns(n,s,0,!1);break}else{if(a=n.current.alternate,p&&!N1(a)){f=lp(n,s,!1),p=!1;continue}if(f===2){if(p=s,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var w=n;f=ec;var I=w.current.memoizedState.isDehydrated;if(I&&(zo(w,b).flags|=256),b=lp(w,b,!1),b!==2){if(tp&&!I){w.errorRecoveryDisabledLanes|=p,ja|=p,f=4;break e}p=$n,$n=f,p!==null&&($n===null?$n=p:$n.push.apply($n,p))}f=b}if(p=!1,f!==2)continue}}if(f===1){zo(n,0),Ns(n,s,0,!0);break}e:{switch(l=n,p=f,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ns(l,s,fr,!Es);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Wu+300-Ee(),10<f)){if(Ns(l,s,fr,!Es),_r(l,0,!0)!==0)break e;Li=s,l.timeoutHandle=Uv(cv.bind(null,l,a,$n,eh,rp,s,fr,ja,Lo,Es,p,"Throttled",-0,0),f);break e}cv(l,a,$n,eh,rp,s,fr,ja,Lo,Es,p,null,-0,0)}}break}while(!0);ui(n)}function cv(n,s,a,l,f,p,b,w,I,B,Q,Z,q,F){if(n.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ur},tv(s,p,Z);var pe=(p&62914560)===p?Wu-Ee():(p&4194048)===p?sv-Ee():0;if(pe=uS(Z,pe),pe!==null){Li=p,n.cancelPendingCommit=pe(yv.bind(null,n,s,p,a,l,f,b,w,I,Q,Z,null,q,F)),Ns(n,p,b,!B);return}}yv(n,s,p,a,l,f,b,w,I)}function N1(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!lr(p(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ns(n,s,a,l){s&=~np,s&=~ja,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var p=31-ce(f),b=1<<p;l[p]=-1,f&=~b}a!==0&&Zr(n,a,s)}function th(){return(st&6)===0?(nc(0),!1):!0}function op(){if(He!==null){if(ct===0)var n=He.return;else n=He,Ai=Ta=null,wf(n),ko=null,Ll=0,n=He;for(;n!==null;)z0(n.alternate,n),n=n.return;He=null}}function zo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Y1(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Li=0,op(),gt=n,He=a=Si(n.current,null),$e=s,ct=0,dr=null,Es=!1,Vo=Tn(n,s),tp=!1,Lo=fr=np=ja=ws=Lt=0,$n=ec=null,rp=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-ce(l),p=1<<f;s|=n[f],l&=~p}return Vi=s,Eu(),a}function uv(n,s){Le=null,Y.H=Yl,s===Ro||s===ku?(s=Ny(),ct=3):s===hf?(s=Ny(),ct=4):ct=s===Uf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,dr=s,He===null&&(Lt=1,Hu(n,Nr(s,n.current)))}function hv(){var n=ur.current;return n===null?!0:($e&4194048)===$e?kr===null:($e&62914560)===$e||($e&536870912)!==0?n===kr:!1}function dv(){var n=Y.H;return Y.H=Yl,n===null?Yl:n}function fv(){var n=Y.A;return Y.A=T1,n}function nh(){Lt=4,Es||($e&4194048)!==$e&&ur.current!==null||(Vo=!0),(ws&134217727)===0&&(ja&134217727)===0||gt===null||Ns(gt,$e,fr,!1)}function lp(n,s,a){var l=st;st|=2;var f=dv(),p=fv();(gt!==n||$e!==s)&&(eh=null,zo(n,s)),s=!1;var b=Lt;e:do try{if(ct!==0&&He!==null){var w=He,I=dr;switch(ct){case 8:op(),b=6;break e;case 3:case 2:case 9:case 6:ur.current===null&&(s=!0);var B=ct;if(ct=0,dr=null,Bo(n,w,I,B),a&&Vo){b=0;break e}break;default:B=ct,ct=0,dr=null,Bo(n,w,I,B)}}A1(),b=Lt;break}catch(Q){uv(n,Q)}while(!0);return s&&n.shellSuspendCounter++,Ai=Ta=null,st=l,Y.H=f,Y.A=p,He===null&&(gt=null,$e=0,Eu()),b}function A1(){for(;He!==null;)pv(He)}function C1(n,s){var a=st;st|=2;var l=dv(),f=fv();gt!==n||$e!==s?(eh=null,Zu=Ee()+500,zo(n,s)):Vo=Tn(n,s);e:do try{if(ct!==0&&He!==null){s=He;var p=dr;t:switch(ct){case 1:ct=0,dr=null,Bo(n,s,p,1);break;case 2:case 9:if(Ty(p)){ct=0,dr=null,mv(s);break}s=function(){ct!==2&&ct!==9||gt!==n||(ct=7),ui(n)},p.then(s,s);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Ty(p)?(ct=0,dr=null,mv(s)):(ct=0,dr=null,Bo(n,s,p,7));break;case 5:var b=null;switch(He.tag){case 26:b=He.memoizedState;case 5:case 27:var w=He;if(b?eb(b):w.stateNode.complete){ct=0,dr=null;var I=w.sibling;if(I!==null)He=I;else{var B=w.return;B!==null?(He=B,rh(B)):He=null}break t}}ct=0,dr=null,Bo(n,s,p,5);break;case 6:ct=0,dr=null,Bo(n,s,p,6);break;case 8:op(),Lt=6;break e;default:throw Error(i(462))}}R1();break}catch(Q){uv(n,Q)}while(!0);return Ai=Ta=null,Y.H=l,Y.A=f,st=a,He!==null?0:(gt=null,$e=0,Eu(),Lt)}function R1(){for(;He!==null&&!yr();)pv(He)}function pv(n){var s=L0(n.alternate,n,Vi);n.memoizedProps=n.pendingProps,s===null?rh(n):He=s}function mv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=D0(a,s,s.pendingProps,s.type,void 0,$e);break;case 11:s=D0(a,s,s.pendingProps,s.type.render,s.ref,$e);break;case 5:wf(s);default:z0(a,s),s=He=fy(s,Vi),s=L0(a,s,Vi)}n.memoizedProps=n.pendingProps,s===null?rh(n):He=s}function Bo(n,s,a,l){Ai=Ta=null,wf(s),ko=null,Ll=0;var f=s.return;try{if(y1(n,f,s,a,$e)){Lt=1,Hu(n,Nr(a,n.current)),He=null;return}}catch(p){if(f!==null)throw He=f,p;Lt=1,Hu(n,Nr(a,n.current)),He=null;return}s.flags&32768?(We||l===1?n=!0:Vo||($e&536870912)!==0?n=!1:(Es=n=!0,(l===2||l===9||l===3||l===6)&&(l=ur.current,l!==null&&l.tag===13&&(l.flags|=16384))),gv(s,n)):rh(s)}function rh(n){var s=n;do{if((s.flags&32768)!==0){gv(s,Es);return}n=s.return;var a=_1(s.alternate,s,Vi);if(a!==null){He=a;return}if(s=s.sibling,s!==null){He=s;return}He=s=n}while(s!==null);Lt===0&&(Lt=5)}function gv(n,s){do{var a=x1(n.alternate,n);if(a!==null){a.flags&=32767,He=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){He=n;return}He=n=a}while(n!==null);Lt=6,He=null}function yv(n,s,a,l,f,p,b,w,I){n.cancelPendingCommit=null;do ih();while(rn!==0);if((st&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=Kd,ao(n,a,p,b,w,I),n===gt&&(He=gt=null,$e=0),Uo=s,Ss=n,Li=a,ip=p,sp=f,av=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,j1(jn,function(){return Ev(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=se.p,se.p=2,b=st,st|=4;try{E1(n,s,a)}finally{st=b,se.p=f,Y.T=l}}rn=1,vv(),bv(),_v()}}function vv(){if(rn===1){rn=0;var n=Ss,s=Uo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=se.p;se.p=2;var f=st;st|=4;try{W0(s,n);var p=_p,b=iy(n.containerInfo),w=p.focusedElem,I=p.selectionRange;if(b!==w&&w&&w.ownerDocument&&ry(w.ownerDocument.documentElement,w)){if(I!==null&&Hd(w)){var B=I.start,Q=I.end;if(Q===void 0&&(Q=B),"selectionStart"in w)w.selectionStart=B,w.selectionEnd=Math.min(Q,w.value.length);else{var Z=w.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var F=q.getSelection(),pe=w.textContent.length,Ne=Math.min(I.start,pe),pt=I.end===void 0?Ne:Math.min(I.end,pe);!F.extend&&Ne>pt&&(b=pt,pt=Ne,Ne=b);var V=ny(w,Ne),O=ny(w,pt);if(V&&O&&(F.rangeCount!==1||F.anchorNode!==V.node||F.anchorOffset!==V.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var z=Z.createRange();z.setStart(V.node,V.offset),F.removeAllRanges(),Ne>pt?(F.addRange(z),F.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),F.addRange(z))}}}}for(Z=[],F=w;F=F.parentNode;)F.nodeType===1&&Z.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<Z.length;w++){var W=Z[w];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}gh=!!bp,_p=bp=null}finally{st=f,se.p=l,Y.T=a}}n.current=s,rn=2}}function bv(){if(rn===2){rn=0;var n=Ss,s=Uo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=se.p;se.p=2;var f=st;st|=4;try{$0(n,s.alternate,s)}finally{st=f,se.p=l,Y.T=a}}rn=3}}function _v(){if(rn===4||rn===3){rn=0,vr();var n=Ss,s=Uo,a=Li,l=av;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?rn=5:(rn=0,Uo=Ss=null,xv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ts=null),nr(a),s=s.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(En,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Y.T,f=se.p,se.p=2,Y.T=null;try{for(var p=n.onRecoverableError,b=0;b<l.length;b++){var w=l[b];p(w.value,{componentStack:w.stack})}}finally{Y.T=s,se.p=f}}(Li&3)!==0&&ih(),ui(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===ap?tc++:(tc=0,ap=n):tc=0,nc(0)}}function xv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Pl(s)))}function ih(){return vv(),bv(),_v(),Ev()}function Ev(){if(rn!==5)return!1;var n=Ss,s=ip;ip=0;var a=nr(Li),l=Y.T,f=se.p;try{se.p=32>a?32:a,Y.T=null,a=sp,sp=null;var p=Ss,b=Li;if(rn=0,Uo=Ss=null,Li=0,(st&6)!==0)throw Error(i(331));var w=st;if(st|=4,rv(p.current),ev(p,p.current,b,a),st=w,nc(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(En,p)}catch{}return!0}finally{se.p=f,Y.T=l,xv(n,s)}}function wv(n,s,a){s=Nr(a,s),s=Lf(n.stateNode,s,2),n=vs(n,s,2),n!==null&&(Wr(n,2),ui(n))}function ut(n,s,a){if(n.tag===3)wv(n,n,a);else for(;s!==null;){if(s.tag===3){wv(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ts===null||!Ts.has(l))){n=Nr(a,n),a=T0(2),l=vs(s,a,2),l!==null&&(S0(a,l,s,n),Wr(l,2),ui(l));break}}s=s.return}}function cp(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new S1;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(tp=!0,f.add(a),n=k1.bind(null,n,s,a),s.then(n,n))}function k1(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,gt===n&&($e&a)===a&&(Lt===4||Lt===3&&($e&62914560)===$e&&300>Ee()-Wu?(st&2)===0&&zo(n,0):np|=a,Lo===$e&&(Lo=0)),ui(n)}function Tv(n,s){s===0&&(s=so()),n=xa(n,s),n!==null&&(Wr(n,s),ui(n))}function I1(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Tv(n,a)}function D1(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),Tv(n,a)}function j1(n,s){return Dt(n,s)}var sh=null,Go=null,up=!1,ah=!1,hp=!1,As=0;function ui(n){n!==Go&&n.next===null&&(Go===null?sh=Go=n:Go=Go.next=n),ah=!0,up||(up=!0,M1())}function nc(n,s){if(!hp&&ah){hp=!0;do for(var a=!1,l=sh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var b=l.suspendedLanes,w=l.pingedLanes;p=(1<<31-ce(42|n)+1)-1,p&=f&~(b&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Cv(l,p))}else p=$e,p=_r(l,l===gt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Tn(l,p)||(a=!0,Cv(l,p));l=l.next}while(a);hp=!1}}function O1(){Sv()}function Sv(){ah=up=!1;var n=0;As!==0&&F1()&&(n=As);for(var s=Ee(),a=null,l=sh;l!==null;){var f=l.next,p=Nv(l,s);p===0?(l.next=null,a===null?sh=f:a.next=f,f===null&&(Go=a)):(a=l,(n!==0||(p&3)!==0)&&(ah=!0)),l=f}rn!==0&&rn!==5||nc(n),As!==0&&(As=0)}function Nv(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-ce(p),w=1<<b,I=f[b];I===-1?((w&a)===0||(w&l)!==0)&&(f[b]=io(w,s)):I<=s&&(n.expiredLanes|=w),p&=~w}if(s=gt,a=$e,a=_r(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(ct===2||ct===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Mr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Tn(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Mr(l),nr(a)){case 2:case 8:a=Pr;break;case 32:a=jn;break;case 268435456:a=vi;break;default:a=jn}return l=Av.bind(null,n),a=Dt(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Mr(l),n.callbackPriority=2,n.callbackNode=null,2}function Av(n,s){if(rn!==0&&rn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ih()&&n.callbackNode!==a)return null;var l=$e;return l=_r(n,n===gt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(lv(n,l,s),Nv(n,Ee()),n.callbackNode!=null&&n.callbackNode===a?Av.bind(null,n):null)}function Cv(n,s){if(ih())return null;lv(n,s,!0)}function M1(){$1(function(){(st&6)!==0?Dt(la,O1):Sv()})}function dp(){if(As===0){var n=Ao;n===0&&(n=er,er<<=1,(er&261888)===0&&(er=256)),As=n}return As}function Rv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ho(""+n)}function kv(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function P1(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var p=Rv((f[jt]||null).action),b=l.submitter;b&&(s=(s=b[jt]||null)?Rv(s.formAction):b.getAttribute("formAction"),s!==null&&(p=s,b=null));var w=new ri("action","action",null,l,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(As!==0){var I=b?kv(f,b):new FormData(f);Df(a,{pending:!0,data:I,method:f.method,action:p},null,I)}}else typeof p=="function"&&(w.preventDefault(),I=b?kv(f,b):new FormData(f),Df(a,{pending:!0,data:I,method:f.method,action:p},p,I))},currentTarget:f}]})}}for(var fp=0;fp<Qd.length;fp++){var pp=Qd[fp],V1=pp.toLowerCase(),L1=pp[0].toUpperCase()+pp.slice(1);Hr(V1,"on"+L1)}Hr(oy,"onAnimationEnd"),Hr(ly,"onAnimationIteration"),Hr(cy,"onAnimationStart"),Hr("dblclick","onDoubleClick"),Hr("focusin","onFocus"),Hr("focusout","onBlur"),Hr(e1,"onTransitionRun"),Hr(t1,"onTransitionStart"),Hr(n1,"onTransitionCancel"),Hr(uy,"onTransitionEnd"),G("onMouseEnter",["mouseout","mouseover"]),G("onMouseLeave",["mouseout","mouseover"]),G("onPointerEnter",["pointerout","pointerover"]),G("onPointerLeave",["pointerout","pointerover"]),J("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),J("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),J("onBeforeInput",["compositionend","keypress","textInput","paste"]),J("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),J("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),J("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rc));function Iv(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var p=void 0;if(s)for(var b=l.length-1;0<=b;b--){var w=l[b],I=w.instance,B=w.currentTarget;if(w=w.listener,I!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=B;try{p(f)}catch(Q){xu(Q)}f.currentTarget=null,p=I}else for(b=0;b<l.length;b++){if(w=l[b],I=w.instance,B=w.currentTarget,w=w.listener,I!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=B;try{p(f)}catch(Q){xu(Q)}f.currentTarget=null,p=I}}}}function Fe(n,s){var a=s[Zi];a===void 0&&(a=s[Zi]=new Set);var l=n+"__bubble";a.has(l)||(Dv(s,n,2,!1),a.add(l))}function mp(n,s,a){var l=0;s&&(l|=4),Dv(a,n,l,s)}var oh="_reactListening"+Math.random().toString(36).slice(2);function gp(n){if(!n[oh]){n[oh]=!0,ts.forEach(function(a){a!=="selectionchange"&&(U1.has(a)||mp(a,!1,n),mp(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[oh]||(s[oh]=!0,mp("selectionchange",!1,s))}}function Dv(n,s,a,l){switch(ob(s)){case 2:var f=fS;break;case 8:f=pS;break;default:f=Ip}a=f.bind(null,s,a,n),f=void 0,!fa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function yp(n,s,a,l,f){var p=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var w=l.stateNode.containerInfo;if(w===f)break;if(b===4)for(b=l.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;w!==null;){if(b=ar(w),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){l=p=b;continue e}w=w.parentNode}}l=l.return}ls(function(){var B=p,Q=Er(a),Z=[];e:{var q=hy.get(n);if(q!==void 0){var F=ri,pe=n;switch(n){case"keypress":if(ma(a)===0)break e;case"keydown":case"keyup":F=vu;break;case"focusin":pe="focus",F=ya;break;case"focusout":pe="blur",F=ya;break;case"beforeblur":case"afterblur":F=ya;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=v;break;case oy:case ly:case cy:F=hu;break;case uy:F=S;break;case"scroll":case"scrollend":F=Al;break;case"wheel":F=H;break;case"copy":case"cut":case"paste":F=du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Ti;break;case"toggle":case"beforetoggle":F=Ve}var Ne=(s&4)!==0,pt=!Ne&&(n==="scroll"||n==="scrollend"),V=Ne?q!==null?q+"Capture":null:q;Ne=[];for(var O=B,z;O!==null;){var W=O;if(z=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||z===null||V===null||(W=zr(O,V),W!=null&&Ne.push(ic(O,W,z))),pt)break;O=O.return}0<Ne.length&&(q=new F(q,pe,null,a,Q),Z.push({event:q,listeners:Ne}))}}if((s&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",q&&a!==Tl&&(pe=a.relatedTarget||a.fromElement)&&(ar(pe)||pe[sr]))break e;if((F||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,F?(pe=a.relatedTarget||a.toElement,F=B,pe=pe?ar(pe):null,pe!==null&&(pt=c(pe),Ne=pe.tag,pe!==pt||Ne!==5&&Ne!==27&&Ne!==6)&&(pe=null)):(F=null,pe=B),F!==pe)){if(Ne=Cl,W="onMouseLeave",V="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Ti,W="onPointerLeave",V="onPointerEnter",O="pointer"),pt=F==null?q:Sn(F),z=pe==null?q:Sn(pe),q=new Ne(W,O+"leave",F,a,Q),q.target=pt,q.relatedTarget=z,W=null,ar(Q)===B&&(Ne=new Ne(V,O+"enter",pe,a,Q),Ne.target=z,Ne.relatedTarget=pt,W=Ne),pt=W,F&&pe)t:{for(Ne=z1,V=F,O=pe,z=0,W=V;W;W=Ne(W))z++;W=0;for(var Te=O;Te;Te=Ne(Te))W++;for(;0<z-W;)V=Ne(V),z--;for(;0<W-z;)O=Ne(O),W--;for(;z--;){if(V===O||O!==null&&V===O.alternate){Ne=V;break t}V=Ne(V),O=Ne(O)}Ne=null}else Ne=null;F!==null&&jv(Z,q,F,Ne,!1),pe!==null&&pt!==null&&jv(Z,pt,pe,Ne,!0)}}e:{if(q=B?Sn(B):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var tt=Xg;else if(Qg(q))if(Jg)tt=JT;else{tt=KT;var be=QT}else F=q.nodeName,!F||F.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&uo(B.elementType)&&(tt=Xg):tt=XT;if(tt&&(tt=tt(n,B))){Kg(Z,tt,a,Q);break e}be&&be(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&xl(q,"number",q.value)}switch(be=B?Sn(B):window,n){case"focusin":(Qg(be)||be.contentEditable==="true")&&(bo=be,Fd=B,jl=null);break;case"focusout":jl=Fd=bo=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,sy(Z,a,Q);break;case"selectionchange":if(ZT)break;case"keydown":case"keyup":sy(Z,a,Q)}var ze;if(it)e:{switch(n){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else vo?va(n,a)&&(Qe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Qe="onCompositionStart");Qe&&(ai&&a.locale!=="ko"&&(vo||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&vo&&(ze=Nl()):(ni=Q,Sl="value"in ni?ni.value:ni.textContent,vo=!0)),be=lh(B,Qe),0<be.length&&(Qe=new si(Qe,n,null,a,Q),Z.push({event:Qe,listeners:be}),ze?Qe.data=ze:(ze=yo(a),ze!==null&&(Qe.data=ze)))),(ze=Tr?HT(n,a):FT(n,a))&&(Qe=lh(B,"onBeforeInput"),0<Qe.length&&(be=new si("onBeforeInput","beforeinput",null,a,Q),Z.push({event:be,listeners:Qe}),be.data=ze)),P1(Z,n,B,a,Q)}Iv(Z,s)})}function ic(n,s,a){return{instance:n,listener:s,currentTarget:a}}function lh(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=zr(n,a),f!=null&&l.unshift(ic(n,f,p)),f=zr(n,s),f!=null&&l.push(ic(n,f,p))),n.tag===3)return l;n=n.return}return[]}function z1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function jv(n,s,a,l,f){for(var p=s._reactName,b=[];a!==null&&a!==l;){var w=a,I=w.alternate,B=w.stateNode;if(w=w.tag,I!==null&&I===l)break;w!==5&&w!==26&&w!==27||B===null||(I=B,f?(B=zr(a,p),B!=null&&b.unshift(ic(a,B,I))):f||(B=zr(a,p),B!=null&&b.push(ic(a,B,I)))),a=a.return}b.length!==0&&n.push({event:s,listeners:b})}var B1=/\r\n?/g,G1=/\u0000|\uFFFD/g;function Ov(n){return(typeof n=="string"?n:""+n).replace(B1,`
`).replace(G1,"")}function Mv(n,s){return s=Ov(s),Ov(n)===s}function ft(n,s,a,l,f,p){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||qn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&qn(n,""+l);break;case"className":or(n,"class",l);break;case"tabIndex":or(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":or(n,a,l);break;case"style":wl(n,l,p);break;case"data":if(s!=="object"){or(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ho(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(s!=="input"&&ft(n,s,"name",f.name,f,null),ft(n,s,"formEncType",f.formEncType,f,null),ft(n,s,"formMethod",f.formMethod,f,null),ft(n,s,"formTarget",f.formTarget,f,null)):(ft(n,s,"encType",f.encType,f,null),ft(n,s,"method",f.method,f,null),ft(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ho(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Ur);break;case"onScroll":l!=null&&Fe("scroll",n);break;case"onScrollEnd":l!=null&&Fe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=ho(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Fe("beforetoggle",n),Fe("toggle",n),lo(n,"popover",l);break;case"xlinkActuate":Qt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Qt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Qt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Qt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Qt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Qt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Qt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Qt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Qt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":lo(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=lu.get(a)||a,lo(n,a,l))}}function vp(n,s,a,l,f,p){switch(a){case"style":wl(n,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof l=="string"?qn(n,l):(typeof l=="number"||typeof l=="bigint")&&qn(n,""+l);break;case"onScroll":l!=null&&Fe("scroll",n);break;case"onScrollEnd":l!=null&&Fe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!T.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),p=n[jt]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(s,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):lo(n,a,l)}}}function yn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",n),Fe("load",n);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var b=a[p];if(b!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(n,s,p,b,a,null)}}f&&ft(n,s,"srcSet",a.srcSet,a,null),l&&ft(n,s,"src",a.src,a,null);return;case"input":Fe("invalid",n);var w=p=b=f=null,I=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":b=Q;break;case"checked":I=Q;break;case"defaultChecked":B=Q;break;case"value":p=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:ft(n,s,l,Q,a,null)}}su(n,p,w,I,B,b,f,!1);return;case"select":Fe("invalid",n),l=b=p=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":p=w;break;case"defaultValue":b=w;break;case"multiple":l=w;default:ft(n,s,f,w,a,null)}s=p,a=b,n.multiple=!!l,s!=null?is(n,!!l,s,!1):a!=null&&is(n,!!l,a,!0);return;case"textarea":Fe("invalid",n),p=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(w=a[b],w!=null))switch(b){case"value":l=w;break;case"defaultValue":f=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:ft(n,s,b,w,a,null)}ss(n,l,f,p);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ft(n,s,I,l,a,null)}return;case"dialog":Fe("beforetoggle",n),Fe("toggle",n),Fe("cancel",n),Fe("close",n);break;case"iframe":case"object":Fe("load",n);break;case"video":case"audio":for(l=0;l<rc.length;l++)Fe(rc[l],n);break;case"image":Fe("error",n),Fe("load",n);break;case"details":Fe("toggle",n);break;case"embed":case"source":case"link":Fe("error",n),Fe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(n,s,B,l,a,null)}return;default:if(uo(s)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&vp(n,s,Q,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&ft(n,s,w,l,a,null))}function q1(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,b=null,w=null,I=null,B=null,Q=null;for(F in a){var Z=a[F];if(a.hasOwnProperty(F)&&Z!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":I=Z;default:l.hasOwnProperty(F)||ft(n,s,F,null,l,Z)}}for(var q in l){var F=l[q];if(Z=a[q],l.hasOwnProperty(q)&&(F!=null||Z!=null))switch(q){case"type":p=F;break;case"name":f=F;break;case"checked":B=F;break;case"defaultChecked":Q=F;break;case"value":b=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,s));break;default:F!==Z&&ft(n,s,q,F,l,Z)}}co(n,b,w,I,B,Q,p,f);return;case"select":F=b=w=q=null;for(p in a)if(I=a[p],a.hasOwnProperty(p)&&I!=null)switch(p){case"value":break;case"multiple":F=I;default:l.hasOwnProperty(p)||ft(n,s,p,null,l,I)}for(f in l)if(p=l[f],I=a[f],l.hasOwnProperty(f)&&(p!=null||I!=null))switch(f){case"value":q=p;break;case"defaultValue":w=p;break;case"multiple":b=p;default:p!==I&&ft(n,s,f,p,l,I)}s=w,a=b,l=F,q!=null?is(n,!!a,q,!1):!!l!=!!a&&(s!=null?is(n,!!a,s,!0):is(n,!!a,a?[]:"",!1));return;case"textarea":F=q=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ft(n,s,w,null,l,f)}for(b in l)if(f=l[b],p=a[b],l.hasOwnProperty(b)&&(f!=null||p!=null))switch(b){case"value":q=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&ft(n,s,b,f,l,p)}au(n,q,F);return;case"option":for(var pe in a)if(q=a[pe],a.hasOwnProperty(pe)&&q!=null&&!l.hasOwnProperty(pe))switch(pe){case"selected":n.selected=!1;break;default:ft(n,s,pe,null,l,q)}for(I in l)if(q=l[I],F=a[I],l.hasOwnProperty(I)&&q!==F&&(q!=null||F!=null))switch(I){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ft(n,s,I,q,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)q=a[Ne],a.hasOwnProperty(Ne)&&q!=null&&!l.hasOwnProperty(Ne)&&ft(n,s,Ne,null,l,q);for(B in l)if(q=l[B],F=a[B],l.hasOwnProperty(B)&&q!==F&&(q!=null||F!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,s));break;default:ft(n,s,B,q,l,F)}return;default:if(uo(s)){for(var pt in a)q=a[pt],a.hasOwnProperty(pt)&&q!==void 0&&!l.hasOwnProperty(pt)&&vp(n,s,pt,void 0,l,q);for(Q in l)q=l[Q],F=a[Q],!l.hasOwnProperty(Q)||q===F||q===void 0&&F===void 0||vp(n,s,Q,q,l,F);return}}for(var V in a)q=a[V],a.hasOwnProperty(V)&&q!=null&&!l.hasOwnProperty(V)&&ft(n,s,V,null,l,q);for(Z in l)q=l[Z],F=a[Z],!l.hasOwnProperty(Z)||q===F||q==null&&F==null||ft(n,s,Z,q,l,F)}function Pv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function H1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],p=f.transferSize,b=f.initiatorType,w=f.duration;if(p&&w&&Pv(b)){for(b=0,w=f.responseEnd,l+=1;l<a.length;l++){var I=a[l],B=I.startTime;if(B>w)break;var Q=I.transferSize,Z=I.initiatorType;Q&&Pv(Z)&&(I=I.responseEnd,b+=Q*(I<w?1:(w-B)/(I-B)))}if(--l,s+=8*(p+b)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var bp=null,_p=null;function ch(n){return n.nodeType===9?n:n.ownerDocument}function Vv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function xp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ep=null;function F1(){var n=window.event;return n&&n.type==="popstate"?n===Ep?!1:(Ep=n,!0):(Ep=null,!1)}var Uv=typeof setTimeout=="function"?setTimeout:void 0,Y1=typeof clearTimeout=="function"?clearTimeout:void 0,zv=typeof Promise=="function"?Promise:void 0,$1=typeof queueMicrotask=="function"?queueMicrotask:typeof zv<"u"?function(n){return zv.resolve(null).then(n).catch(Q1)}:Uv;function Q1(n){setTimeout(function(){throw n})}function Cs(n){return n==="head"}function Bv(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Yo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")sc(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,sc(a);for(var p=a.firstChild;p;){var b=p.nextSibling,w=p.nodeName;p[Bn]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=b}}else a==="body"&&sc(n.ownerDocument.body);a=f}while(a);Yo(s)}function Gv(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function wp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":wp(a),xi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function K1(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Bn])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Ir(n.nextSibling),n===null)break}return null}function X1(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ir(n.nextSibling),n===null))return null;return n}function qv(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ir(n.nextSibling),n===null))return null;return n}function Tp(n){return n.data==="$?"||n.data==="$~"}function Sp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function J1(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ir(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Np=null;function Hv(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Ir(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function Fv(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function Yv(n,s,a){switch(s=ch(a),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function sc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);xi(n)}var Dr=new Map,$v=new Set;function uh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ui=se.d;se.d={f:W1,r:Z1,D:eS,C:tS,L:nS,m:rS,X:sS,S:iS,M:aS};function W1(){var n=Ui.f(),s=th();return n||s}function Z1(n){var s=dn(n);s!==null&&s.tag===5&&s.type==="form"?u0(s):Ui.r(n)}var qo=typeof document>"u"?null:document;function Qv(n,s,a){var l=qo;if(l&&typeof s=="string"&&s){var f=Gn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),$v.has(f)||($v.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),yn(s,"link",n),Rt(s),l.head.appendChild(s)))}}function eS(n){Ui.D(n),Qv("dns-prefetch",n,null)}function tS(n,s){Ui.C(n,s),Qv("preconnect",n,s)}function nS(n,s,a){Ui.L(n,s,a);var l=qo;if(l&&n&&s){var f='link[rel="preload"][as="'+Gn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Gn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Gn(a.imageSizes)+'"]')):f+='[href="'+Gn(n)+'"]';var p=f;switch(s){case"style":p=Ho(n);break;case"script":p=Fo(n)}Dr.has(p)||(n=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Dr.set(p,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(ac(p))||s==="script"&&l.querySelector(oc(p))||(s=l.createElement("link"),yn(s,"link",n),Rt(s),l.head.appendChild(s)))}}function rS(n,s){Ui.m(n,s);var a=qo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Gn(l)+'"][href="'+Gn(n)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Fo(n)}if(!Dr.has(p)&&(n=E({rel:"modulepreload",href:n},s),Dr.set(p,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(oc(p)))return}l=a.createElement("link"),yn(l,"link",n),Rt(l),a.head.appendChild(l)}}}function iS(n,s,a){Ui.S(n,s,a);var l=qo;if(l&&n){var f=On(l).hoistableStyles,p=Ho(n);s=s||"default";var b=f.get(p);if(!b){var w={loading:0,preload:null};if(b=l.querySelector(ac(p)))w.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Dr.get(p))&&Ap(n,a);var I=b=l.createElement("link");Rt(I),yn(I,"link",n),I._p=new Promise(function(B,Q){I.onload=B,I.onerror=Q}),I.addEventListener("load",function(){w.loading|=1}),I.addEventListener("error",function(){w.loading|=2}),w.loading|=4,hh(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:w},f.set(p,b)}}}function sS(n,s){Ui.X(n,s);var a=qo;if(a&&n){var l=On(a).hoistableScripts,f=Fo(n),p=l.get(f);p||(p=a.querySelector(oc(f)),p||(n=E({src:n,async:!0},s),(s=Dr.get(f))&&Cp(n,s),p=a.createElement("script"),Rt(p),yn(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function aS(n,s){Ui.M(n,s);var a=qo;if(a&&n){var l=On(a).hoistableScripts,f=Fo(n),p=l.get(f);p||(p=a.querySelector(oc(f)),p||(n=E({src:n,async:!0,type:"module"},s),(s=Dr.get(f))&&Cp(n,s),p=a.createElement("script"),Rt(p),yn(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Kv(n,s,a,l){var f=(f=De.current)?uh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ho(a.href),a=On(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Ho(a.href);var p=On(f).hoistableStyles,b=p.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=f.querySelector(ac(n)))&&!p._p&&(b.instance=p,b.state.loading=5),Dr.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dr.set(n,a),p||oS(f,n,a,b.state))),s&&l===null)throw Error(i(528,""));return b}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Fo(a),a=On(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ho(n){return'href="'+Gn(n)+'"'}function ac(n){return'link[rel="stylesheet"]['+n+"]"}function Xv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function oS(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),yn(s,"link",a),Rt(s),n.head.appendChild(s))}function Fo(n){return'[src="'+Gn(n)+'"]'}function oc(n){return"script[async]"+n}function Jv(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Gn(a.href)+'"]');if(l)return s.instance=l,Rt(l),l;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Rt(l),yn(l,"style",f),hh(l,a.precedence,n),s.instance=l;case"stylesheet":f=Ho(a.href);var p=n.querySelector(ac(f));if(p)return s.state.loading|=4,s.instance=p,Rt(p),p;l=Xv(a),(f=Dr.get(f))&&Ap(l,f),p=(n.ownerDocument||n).createElement("link"),Rt(p);var b=p;return b._p=new Promise(function(w,I){b.onload=w,b.onerror=I}),yn(p,"link",l),s.state.loading|=4,hh(p,a.precedence,n),s.instance=p;case"script":return p=Fo(a.src),(f=n.querySelector(oc(p)))?(s.instance=f,Rt(f),f):(l=a,(f=Dr.get(p))&&(l=E({},a),Cp(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Rt(f),yn(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,hh(l,a.precedence,n));return s.instance}function hh(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,b=0;b<l.length;b++){var w=l[b];if(w.dataset.precedence===s)p=w;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Ap(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Cp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var dh=null;function Wv(n,s,a){if(dh===null){var l=new Map,f=dh=new Map;f.set(a,l)}else f=dh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var p=a[f];if(!(p[Bn]||p[mt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(s)||"";b=n+b;var w=l.get(b);w?w.push(p):l.set(b,[p])}}return l}function Zv(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function lS(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function eb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function cS(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Ho(l.href),p=s.querySelector(ac(f));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=fh.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=p,Rt(p);return}p=s.ownerDocument||s,l=Xv(l),(f=Dr.get(f))&&Ap(l,f),p=p.createElement("link"),Rt(p);var b=p;b._p=new Promise(function(w,I){b.onload=w,b.onerror=I}),yn(p,"link",l),a.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=fh.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Rp=0;function uS(n,s){return n.stylesheets&&n.count===0&&mh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&mh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&Rp===0&&(Rp=62500*H1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&mh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Rp?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function fh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ph=null;function mh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ph=new Map,s.forEach(hS,n),ph=null,fh.call(n))}function hS(n,s){if(!(s.state.loading&4)){var a=ph.get(n);if(a)var l=a.get(null);else{a=new Map,ph.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var b=f[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=s.instance,b=f.getAttribute("data-precedence"),p=a.get(b)||l,p===l&&a.set(null,f),a.set(b,f),this.count++,l=fh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var lc={$$typeof:ve,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function dS(n,s,a,l,f,p,b,w,I){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function tb(n,s,a,l,f,p,b,w,I,B,Q,Z){return n=new dS(n,s,a,b,I,B,Q,Z,w),s=1,p===!0&&(s|=24),p=cr(3,null,null,s),n.current=p,p.stateNode=n,s=lf(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:s},df(p),n}function nb(n){return n?(n=Eo,n):Eo}function rb(n,s,a,l,f,p){f=nb(f),l.context===null?l.context=f:l.pendingContext=f,l=ys(s),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=vs(n,l,s),a!==null&&(Qn(a,n,s),zl(a,n,s))}function ib(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function kp(n,s){ib(n,s),(n=n.alternate)&&ib(n,s)}function sb(n){if(n.tag===13||n.tag===31){var s=xa(n,67108864);s!==null&&Qn(s,n,67108864),kp(n,67108864)}}function ab(n){if(n.tag===13||n.tag===31){var s=pr();s=_i(s);var a=xa(n,s);a!==null&&Qn(a,n,s),kp(n,s)}}var gh=!0;function fS(n,s,a,l){var f=Y.T;Y.T=null;var p=se.p;try{se.p=2,Ip(n,s,a,l)}finally{se.p=p,Y.T=f}}function pS(n,s,a,l){var f=Y.T;Y.T=null;var p=se.p;try{se.p=8,Ip(n,s,a,l)}finally{se.p=p,Y.T=f}}function Ip(n,s,a,l){if(gh){var f=Dp(l);if(f===null)yp(n,s,l,yh,a),lb(n,l);else if(gS(f,n,s,a,l))l.stopPropagation();else if(lb(n,l),s&4&&-1<mS.indexOf(n)){for(;f!==null;){var p=dn(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=br(p.pendingLanes);if(b!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var I=1<<31-ce(b);w.entanglements[1]|=I,b&=~I}ui(p),(st&6)===0&&(Zu=Ee()+500,nc(0))}}break;case 31:case 13:w=xa(p,2),w!==null&&Qn(w,p,2),th(),kp(p,2)}if(p=Dp(l),p===null&&yp(n,s,l,yh,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else yp(n,s,l,null,a)}}function Dp(n){return n=Er(n),jp(n)}var yh=null;function jp(n){if(yh=null,n=ar(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===31){if(n=m(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return yh=n,null}function ob(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case la:return 2;case Pr:return 8;case jn:case Ji:return 32;case vi:return 268435456;default:return 32}default:return 32}}var Op=!1,Rs=null,ks=null,Is=null,cc=new Map,uc=new Map,Ds=[],mS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lb(n,s){switch(n){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":cc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(s.pointerId)}}function hc(n,s,a,l,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},s!==null&&(s=dn(s),s!==null&&sb(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function gS(n,s,a,l,f){switch(s){case"focusin":return Rs=hc(Rs,n,s,a,l,f),!0;case"dragenter":return ks=hc(ks,n,s,a,l,f),!0;case"mouseover":return Is=hc(Is,n,s,a,l,f),!0;case"pointerover":var p=f.pointerId;return cc.set(p,hc(cc.get(p)||null,n,s,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,uc.set(p,hc(uc.get(p)||null,n,s,a,l,f)),!0}return!1}function cb(n){var s=ar(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,rr(n.priority,function(){ab(a)});return}}else if(s===31){if(s=m(a),s!==null){n.blockedOn=s,rr(n.priority,function(){ab(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Dp(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Tl=l,a.target.dispatchEvent(l),Tl=null}else return s=dn(a),s!==null&&sb(s),n.blockedOn=a,!1;s.shift()}return!0}function ub(n,s,a){vh(n)&&a.delete(s)}function yS(){Op=!1,Rs!==null&&vh(Rs)&&(Rs=null),ks!==null&&vh(ks)&&(ks=null),Is!==null&&vh(Is)&&(Is=null),cc.forEach(ub),uc.forEach(ub)}function bh(n,s){n.blockedOn===s&&(n.blockedOn=null,Op||(Op=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,yS)))}var _h=null;function hb(n){_h!==n&&(_h=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_h===n&&(_h=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(jp(l||a)===null)continue;break}var p=dn(a);p!==null&&(n.splice(s,3),s-=3,Df(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Yo(n){function s(I){return bh(I,n)}Rs!==null&&bh(Rs,n),ks!==null&&bh(ks,n),Is!==null&&bh(Is,n),cc.forEach(s),uc.forEach(s);for(var a=0;a<Ds.length;a++){var l=Ds[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ds.length&&(a=Ds[0],a.blockedOn===null);)cb(a),a.blockedOn===null&&Ds.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],b=f[jt]||null;if(typeof p=="function")b||hb(a);else if(b){var w=null;if(p&&p.hasAttribute("formAction")){if(f=p,b=p[jt]||null)w=b.formAction;else if(jp(f)!==null)continue}else w=b.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),hb(a)}}}function db(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Mp(n){this._internalRoot=n}xh.prototype.render=Mp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=pr();rb(a,l,n,s,null,null)},xh.prototype.unmount=Mp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;rb(n.current,2,null,n,null,null),th(),s[sr]=null}};function xh(n){this._internalRoot=n}xh.prototype.unstable_scheduleHydration=function(n){if(n){var s=oo();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ds.length&&s!==0&&s<Ds[a].priority;a++);Ds.splice(a,0,n),a===0&&cb(n)}};var fb=e.version;if(fb!=="19.2.4")throw Error(i(527,fb,"19.2.4"));se.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var vS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{En=Eh.inject(vS),$t=Eh}catch{}}return pc.createRoot=function(n,s){if(!o(n))throw Error(i(299));var a=!1,l="",f=_0,p=x0,b=E0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=tb(n,1,!1,null,null,a,l,null,f,p,b,db),n[sr]=s.current,gp(n),new Mp(s)},pc.hydrateRoot=function(n,s,a){if(!o(n))throw Error(i(299));var l=!1,f="",p=_0,b=x0,w=E0,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),s=tb(n,1,!0,s,a??null,l,f,I,p,b,w,db),s.context=nb(null),a=s.current,l=pr(),l=_i(l),f=ys(l),f.callback=null,vs(a,f,l),a=l,s.current.lanes=a,Wr(s,a),ui(s),n[sr]=s.current,gp(n),new xh(s)},pc.version="19.2.4",pc}var wb;function IS(){if(wb)return Lp.exports;wb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lp.exports=kS(),Lp.exports}var DS=IS();const jS=Hm(DS);var Ot=(r=>(r.READY="ready to sing",r.STANDBY="standby",r))(Ot||{}),yt=(r=>(r.SINGING="Singing",r.LISTENING="Listening",r))(yt||{}),Be=(r=>(r.PENDING="Pending Approval",r.APPROVED="Approved",r.DONE="Done",r))(Be||{});class OS{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return MS(e).buffer}}function MS(r){let e=0;for(const o of r)e+=o.byteLength;const t=new Uint8Array(e);let i=0;for(const o of r){const c=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);t.set(c,i),i+=o.byteLength}return t}function vx(r){return new PS(r).unpack()}function bx(r){const e=new VS,t=e.pack(r);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class PS{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let i=0,o="",c,u;for(;i<e;)c=t[i],c<160?(u=c,i++):(c^192)<32?(u=(c&31)<<6|t[i+1]&63,i+=2):(c^224)<16?(u=(c&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=3):(u=(c&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=4),o+=String.fromCodePoint(u);return this.index+=e,o}unpack_array(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=this.unpack();return t}unpack_map(e){const t={};for(let i=0;i<e;i++){const o=this.unpack();t[o]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,i=(e>>23&255)-127,o=e&8388607|8388608;return(t===0?1:-1)*o*2**(i-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),i=e>>31,o=(e>>20&2047)-1023,u=(e&1048575|1048576)*2**(o-20)+t*2**(o-52);return(i===0?1:-1)*u}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class VS{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const i=this.pack_array(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const i=e;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const i=this.pack_object(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),i=t.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const i=o=>{if(o<t){const c=this.pack(e[o]);return c instanceof Promise?c.then(()=>i(o+1)):i(o+1)}};return i(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),o=e/2**i-1,c=Math.floor(o*2**52),u=2**32,m=t<<31|i+1023<<20|c/u&1048575,g=c%u;this._bufferBuilder.append(203),this.pack_int32(m),this.pack_int32(g)}pack_object(e){const t=Object.keys(e),i=t.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const o=c=>{if(c<t.length){const u=t[c];if(e.hasOwnProperty(u)){this.pack(u);const m=this.pack(e[u]);if(m instanceof Promise)return m.then(()=>o(c+1))}return o(c+1)}};return o(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new OS,this._textEncoder=new TextEncoder}}let _x=!0,xx=!0;function bc(r,e,t){const i=r.match(e);return i&&i.length>=t&&parseFloat(i[t],10)}function Qa(r,e,t){if(!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype,o=i.addEventListener;i.addEventListener=function(u,m){if(u!==e)return o.apply(this,arguments);const g=y=>{const _=t(y);_&&(m.handleEvent?m.handleEvent(_):m(_))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(m,g),o.apply(this,[u,g])};const c=i.removeEventListener;i.removeEventListener=function(u,m){if(u!==e||!this._eventMap||!this._eventMap[e])return c.apply(this,arguments);if(!this._eventMap[e].has(m))return c.apply(this,arguments);const g=this._eventMap[e].get(m);return this._eventMap[e].delete(m),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,c.apply(this,[u,g])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function LS(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(_x=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function US(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(xx=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Ex(){if(typeof window=="object"){if(_x)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Ym(r,e){xx&&console.warn(r+" is deprecated, please use "+e+" instead.")}function zS(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=r;if(t.userAgentData&&t.userAgentData.brands){const i=t.userAgentData.brands.find(o=>o.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(bc(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(bc(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(bc(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,e._safariVersion=bc(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Tb(r){return Object.prototype.toString.call(r)==="[object Object]"}function wx(r){return Tb(r)?Object.keys(r).reduce(function(e,t){const i=Tb(r[t]),o=i?wx(r[t]):r[t],c=i&&!Object.keys(o).length;return o===void 0||c?e:Object.assign(e,{[t]:o})},{}):r}function sm(r,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?sm(r,r.get(e[i]),t):i.endsWith("Ids")&&e[i].forEach(o=>{sm(r,r.get(o),t)})}))}function Sb(r,e,t){const i=t?"outbound-rtp":"inbound-rtp",o=new Map;if(e===null)return o;const c=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&c.push(u)}),c.forEach(u=>{r.forEach(m=>{m.type===i&&m.trackId===u.id&&sm(r,m,o)})}),o}const Nb=Ex;function Tx(r,e){const t=r&&r.navigator;if(!t.mediaDevices)return;const i=function(m){if(typeof m!="object"||m.mandatory||m.optional)return m;const g={};return Object.keys(m).forEach(y=>{if(y==="require"||y==="advanced"||y==="mediaSource")return;const _=typeof m[y]=="object"?m[y]:{ideal:m[y]};_.exact!==void 0&&typeof _.exact=="number"&&(_.min=_.max=_.exact);const E=function(N,L){return N?N+L.charAt(0).toUpperCase()+L.slice(1):L==="deviceId"?"sourceId":L};if(_.ideal!==void 0){g.optional=g.optional||[];let N={};typeof _.ideal=="number"?(N[E("min",y)]=_.ideal,g.optional.push(N),N={},N[E("max",y)]=_.ideal,g.optional.push(N)):(N[E("",y)]=_.ideal,g.optional.push(N))}_.exact!==void 0&&typeof _.exact!="number"?(g.mandatory=g.mandatory||{},g.mandatory[E("",y)]=_.exact):["min","max"].forEach(N=>{_[N]!==void 0&&(g.mandatory=g.mandatory||{},g.mandatory[E(N,y)]=_[N])})}),m.advanced&&(g.optional=(g.optional||[]).concat(m.advanced)),g},o=function(m,g){if(e.version>=61)return g(m);if(m=JSON.parse(JSON.stringify(m)),m&&typeof m.audio=="object"){const y=function(_,E,N){E in _&&!(N in _)&&(_[N]=_[E],delete _[E])};m=JSON.parse(JSON.stringify(m)),y(m.audio,"autoGainControl","googAutoGainControl"),y(m.audio,"noiseSuppression","googNoiseSuppression"),m.audio=i(m.audio)}if(m&&typeof m.video=="object"){let y=m.video.facingMode;y=y&&(typeof y=="object"?y:{ideal:y});const _=e.version<66;if(y&&(y.exact==="user"||y.exact==="environment"||y.ideal==="user"||y.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!_)){delete m.video.facingMode;let E;if(y.exact==="environment"||y.ideal==="environment"?E=["back","rear"]:(y.exact==="user"||y.ideal==="user")&&(E=["front"]),E)return t.mediaDevices.enumerateDevices().then(N=>{N=N.filter(K=>K.kind==="videoinput");let L=N.find(K=>E.some(ne=>K.label.toLowerCase().includes(ne)));return!L&&N.length&&E.includes("back")&&(L=N[N.length-1]),L&&(m.video.deviceId=y.exact?{exact:L.deviceId}:{ideal:L.deviceId}),m.video=i(m.video),Nb("chrome: "+JSON.stringify(m)),g(m)})}m.video=i(m.video)}return Nb("chrome: "+JSON.stringify(m)),g(m)},c=function(m){return e.version>=64?m:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[m.name]||m.name,message:m.message,constraint:m.constraint||m.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(m,g,y){o(m,_=>{t.webkitGetUserMedia(_,g,E=>{y&&y(c(E))})})};if(t.getUserMedia=u.bind(t),t.mediaDevices.getUserMedia){const m=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(g){return o(g,y=>m(y).then(_=>{if(y.audio&&!_.getAudioTracks().length||y.video&&!_.getVideoTracks().length)throw _.getTracks().forEach(E=>{E.stop()}),new DOMException("","NotFoundError");return _},_=>Promise.reject(c(_))))}}}function Sx(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function Nx(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",o=>{let c;r.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(m=>m.track&&m.track.id===o.track.id):c={track:o.track};const u=new Event("track");u.track=o.track,u.receiver=c,u.transceiver={receiver:c},u.streams=[i.stream],this.dispatchEvent(u)}),i.stream.getTracks().forEach(o=>{let c;r.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(m=>m.track&&m.track.id===o.id):c={track:o};const u=new Event("track");u.track=o,u.receiver=c,u.transceiver={receiver:c},u.streams=[i.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Qa(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Ax(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(o,c){return{track:c,get dtmf(){return this._dtmf===void 0&&(c.kind==="audio"?this._dtmf=o.createDTMFSender(c):this._dtmf=null),this._dtmf},_pc:o}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(m,g){let y=o.apply(this,arguments);return y||(y=e(this,m),this._senders.push(y)),y};const c=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(m){c.apply(this,arguments);const g=this._senders.indexOf(m);g!==-1&&this._senders.splice(g,1)}}const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(c){this._senders=this._senders||[],t.apply(this,[c]),c.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(c){this._senders=this._senders||[],i.apply(this,[c]),c.getTracks().forEach(u=>{const m=this._senders.find(g=>g.track===u);m&&this._senders.splice(this._senders.indexOf(m),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Cx(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const c=t.apply(this,[]);return c.forEach(u=>u._pc=this),c});const i=r.RTCPeerConnection.prototype.addTrack;i&&(r.RTCPeerConnection.prototype.addTrack=function(){const c=i.apply(this,arguments);return c._pc=this,c}),r.RTCRtpSender.prototype.getStats=function(){const c=this;return this._pc.getStats().then(u=>Sb(u,c.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const o=t.apply(this,[]);return o.forEach(c=>c._pc=this),o}),Qa(r,"track",i=>(i.receiver._pc=i.srcElement,i)),r.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(c=>Sb(c,o.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const i=arguments[0];let o,c,u;return this.getSenders().forEach(m=>{m.track===i&&(o?u=!0:o=m)}),this.getReceivers().forEach(m=>(m.track===i&&(c?u=!0:c=m),m.track===i)),u||o&&c?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():c?c.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Rx(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,m){if(!m)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const g=e.apply(this,arguments);return this._shimmedLocalStreams[m.id]?this._shimmedLocalStreams[m.id].indexOf(g)===-1&&this._shimmedLocalStreams[m.id].push(g):this._shimmedLocalStreams[m.id]=[m,g],g};const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(y=>{if(this.getSenders().find(E=>E.track===y))throw new DOMException("Track already exists.","InvalidAccessError")});const m=this.getSenders();t.apply(this,arguments);const g=this.getSenders().filter(y=>m.indexOf(y)===-1);this._shimmedLocalStreams[u.id]=[u].concat(g)};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],i.apply(this,arguments)};const o=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(m=>{const g=this._shimmedLocalStreams[m].indexOf(u);g!==-1&&this._shimmedLocalStreams[m].splice(g,1),this._shimmedLocalStreams[m].length===1&&delete this._shimmedLocalStreams[m]}),o.apply(this,arguments)}}function kx(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Rx(r);const t=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const _=t.apply(this);return this._reverseStreams=this._reverseStreams||{},_.map(E=>this._reverseStreams[E.id])};const i=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(_){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_.getTracks().forEach(E=>{if(this.getSenders().find(L=>L.track===E))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[_.id]){const E=new r.MediaStream(_.getTracks());this._streams[_.id]=E,this._reverseStreams[E.id]=_,_=E}i.apply(this,[_])};const o=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(_){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[_.id]||_]),delete this._reverseStreams[this._streams[_.id]?this._streams[_.id].id:_.id],delete this._streams[_.id]},r.RTCPeerConnection.prototype.addTrack=function(_,E){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const N=[].slice.call(arguments,1);if(N.length!==1||!N[0].getTracks().find(ne=>ne===_))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(ne=>ne.track===_))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const K=this._streams[E.id];if(K)K.addTrack(_),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const ne=new r.MediaStream([_]);this._streams[E.id]=ne,this._reverseStreams[ne.id]=E,this.addStream(ne)}return this.getSenders().find(ne=>ne.track===_)};function c(y,_){let E=_.sdp;return Object.keys(y._reverseStreams||[]).forEach(N=>{const L=y._reverseStreams[N],K=y._streams[L.id];E=E.replace(new RegExp(K.id,"g"),L.id)}),new RTCSessionDescription({type:_.type,sdp:E})}function u(y,_){let E=_.sdp;return Object.keys(y._reverseStreams||[]).forEach(N=>{const L=y._reverseStreams[N],K=y._streams[L.id];E=E.replace(new RegExp(L.id,"g"),K.id)}),new RTCSessionDescription({type:_.type,sdp:E})}["createOffer","createAnswer"].forEach(function(y){const _=r.RTCPeerConnection.prototype[y],E={[y](){const N=arguments;return arguments.length&&typeof arguments[0]=="function"?_.apply(this,[K=>{const ne=c(this,K);N[0].apply(null,[ne])},K=>{N[1]&&N[1].apply(null,K)},arguments[2]]):_.apply(this,arguments).then(K=>c(this,K))}};r.RTCPeerConnection.prototype[y]=E[y]});const m=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?m.apply(this,arguments):(arguments[0]=u(this,arguments[0]),m.apply(this,arguments))};const g=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const y=g.get.apply(this);return y.type===""?y:c(this,y)}}),r.RTCPeerConnection.prototype.removeTrack=function(_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!_._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(_._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let N;Object.keys(this._streams).forEach(L=>{this._streams[L].getTracks().find(ne=>_.track===ne)&&(N=this._streams[L])}),N&&(N.getTracks().length===1?this.removeStream(this._reverseStreams[N.id]):N.removeTrack(_.track),this.dispatchEvent(new Event("negotiationneeded")))}}function am(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const i=r.RTCPeerConnection.prototype[t],o={[t](){return arguments[0]=new(t==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};r.RTCPeerConnection.prototype[t]=o[t]})}function Ix(r,e){Qa(r,"negotiationneeded",t=>{const i=t.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return t})}const Ab=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Ix,shimAddTrackRemoveTrack:kx,shimAddTrackRemoveTrackWithNative:Rx,shimGetSendersWithDtmf:Ax,shimGetUserMedia:Tx,shimMediaStream:Sx,shimOnTrack:Nx,shimPeerConnection:am,shimSenderReceiverGetStats:Cx},Symbol.toStringTag,{value:"Module"}));function Dx(r,e){const t=r&&r.navigator,i=r&&r.MediaStreamTrack;if(t.getUserMedia=function(o,c,u){Ym("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(o).then(c,u)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const o=function(u,m,g){m in u&&!(g in u)&&(u[g]=u[m],delete u[m])},c=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),c(u)},i&&i.prototype.getSettings){const u=i.prototype.getSettings;i.prototype.getSettings=function(){const m=u.apply(this,arguments);return o(m,"mozAutoGainControl","autoGainControl"),o(m,"mozNoiseSuppression","noiseSuppression"),m}}if(i&&i.prototype.applyConstraints){const u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(m){return this.kind==="audio"&&typeof m=="object"&&(m=JSON.parse(JSON.stringify(m)),o(m,"autoGainControl","mozAutoGainControl"),o(m,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[m])}}}}function BS(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(i)})}function jx(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function om(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const c=r.RTCPeerConnection.prototype[o],u={[o](){return arguments[0]=new(o==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};r.RTCPeerConnection.prototype[o]=u[o]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[c,u,m]=arguments;return i.apply(this,[c||null]).then(g=>{if(e.version<53&&!u)try{g.forEach(y=>{y.type=t[y.type]||y.type})}catch(y){if(y.name!=="TypeError")throw y;g.forEach((_,E)=>{g.set(E,Object.assign({},_,{type:t[_.type]||_.type}))})}return g}).then(u,m)}}function Ox(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const o=e.apply(this,[]);return o.forEach(c=>c._pc=this),o});const t=r.RTCPeerConnection.prototype.addTrack;t&&(r.RTCPeerConnection.prototype.addTrack=function(){const o=t.apply(this,arguments);return o._pc=this,o}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Mx(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Qa(r,"track",t=>(t.receiver._pc=t.srcElement,t)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Px(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){Ym("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&t.getTracks().includes(i.track)&&this.removeTrack(i)})})}function Vx(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function Lx(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const o=i.length>0;o&&i.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const c=e.apply(this,arguments);if(o){const{sender:u}=c,m=u.getParameters();(!("encodings"in m)||m.encodings.length===1&&Object.keys(m.encodings[0]).length===0)&&(m.encodings=i,u.sendEncodings=i,this.setParametersPromises.push(u.setParameters(m).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return c})}function Ux(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function zx(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Bx(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Cb=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Lx,shimCreateAnswer:Bx,shimCreateOffer:zx,shimGetDisplayMedia:BS,shimGetParameters:Ux,shimGetUserMedia:Dx,shimOnTrack:jx,shimPeerConnection:om,shimRTCDataChannel:Vx,shimReceiverGetStats:Mx,shimRemoveStream:Px,shimSenderGetStats:Ox},Symbol.toStringTag,{value:"Module"}));function Gx(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(o=>e.call(this,o,i)),i.getVideoTracks().forEach(o=>e.call(this,o,i))},r.RTCPeerConnection.prototype.addTrack=function(i,...o){return o&&o.forEach(c=>{this._localStreams?this._localStreams.includes(c)||this._localStreams.push(c):this._localStreams=[c]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(t);if(i===-1)return;this._localStreams.splice(i,1);const o=t.getTracks();this.getSenders().forEach(c=>{o.includes(c.track)&&this.removeTrack(c)})})}}function qx(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const c=new Event("addstream");c.stream=o,this.dispatchEvent(c)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(c=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(c)>=0)return;i._remoteStreams.push(c);const u=new Event("addstream");u.stream=c,i.dispatchEvent(u)})}),e.apply(i,arguments)}}}function Hx(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,t=e.createOffer,i=e.createAnswer,o=e.setLocalDescription,c=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(y,_){const E=arguments.length>=2?arguments[2]:arguments[0],N=t.apply(this,[E]);return _?(N.then(y,_),Promise.resolve()):N},e.createAnswer=function(y,_){const E=arguments.length>=2?arguments[2]:arguments[0],N=i.apply(this,[E]);return _?(N.then(y,_),Promise.resolve()):N};let m=function(g,y,_){const E=o.apply(this,[g]);return _?(E.then(y,_),Promise.resolve()):E};e.setLocalDescription=m,m=function(g,y,_){const E=c.apply(this,[g]);return _?(E.then(y,_),Promise.resolve()):E},e.setRemoteDescription=m,m=function(g,y,_){const E=u.apply(this,[g]);return _?(E.then(y,_),Promise.resolve()):E},e.addIceCandidate=m}function Fx(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,i=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=o=>i(Yx(o))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,o,c){e.mediaDevices.getUserMedia(i).then(o,c)}).bind(e))}function Yx(r){return r&&r.video!==void 0?Object.assign({},r,{video:wx(r.video)}):r}function $x(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(i,o){if(i&&i.iceServers){const c=[];for(let u=0;u<i.iceServers.length;u++){let m=i.iceServers[u];m.urls===void 0&&m.url?(Ym("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,c.push(m)):c.push(i.iceServers[u])}i.iceServers=c}return new e(i,o)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Qx(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Kx(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const c=this.getTransceivers().find(u=>u.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):i.offerToReceiveVideo===!0&&!c&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Xx(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Rb=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Xx,shimCallbacksAPI:Hx,shimConstraints:Yx,shimCreateOfferLegacy:Kx,shimGetUserMedia:Fx,shimLocalStreamsAPI:Gx,shimRTCIceServerUrls:$x,shimRemoteStreamsAPI:qx,shimTrackEventTransceiver:Qx},Symbol.toStringTag,{value:"Module"}));var Gp={exports:{}},kb;function GS(){return kb||(kb=1,(function(r){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(t){return t.split(`
m=`).map((o,c)=>(c>0?"m="+o:o).trim()+`\r
`)},e.getDescription=function(t){const i=e.splitSections(t);return i&&i[0]},e.getMediaSections=function(t){const i=e.splitSections(t);return i.shift(),i},e.matchPrefix=function(t,i){return e.splitLines(t).filter(o=>o.indexOf(i)===0)},e.parseCandidate=function(t){let i;t.indexOf("a=candidate:")===0?i=t.substring(12).split(" "):i=t.substring(10).split(" ");const o={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let c=8;c<i.length;c+=2)switch(i[c]){case"raddr":o.relatedAddress=i[c+1];break;case"rport":o.relatedPort=parseInt(i[c+1],10);break;case"tcptype":o.tcpType=i[c+1];break;case"ufrag":o.ufrag=i[c+1],o.usernameFragment=i[c+1];break;default:o[i[c]]===void 0&&(o[i[c]]=i[c+1]);break}return o},e.writeCandidate=function(t){const i=[];i.push(t.foundation);const o=t.component;o==="rtp"?i.push(1):o==="rtcp"?i.push(2):i.push(o),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);const c=t.type;return i.push("typ"),i.push(c),c!=="host"&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let i=t.substring(9).split(" ");const o={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),o.name=i[0],o.clockRate=parseInt(i[1],10),o.channels=i.length===3?parseInt(i[2],10):1,o.numChannels=o.channels,o},e.writeRtpMap=function(t){let i=t.payloadType;t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType);const o=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(o!==1?"/"+o:"")+`\r
`},e.parseExtmap=function(t){const i=t.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const i={};let o;const c=t.substring(t.indexOf(" ")+1).split(";");for(let u=0;u<c.length;u++)o=c[u].trim().split("="),i[o[0].trim()]=o[1];return i},e.writeFmtp=function(t){let i="",o=t.payloadType;if(t.preferredPayloadType!==void 0&&(o=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const c=[];Object.keys(t.parameters).forEach(u=>{t.parameters[u]!==void 0?c.push(u+"="+t.parameters[u]):c.push(u)}),i+="a=fmtp:"+o+" "+c.join(";")+`\r
`}return i},e.parseRtcpFb=function(t){const i=t.substring(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(t){let i="",o=t.payloadType;return t.preferredPayloadType!==void 0&&(o=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(c=>{i+="a=rtcp-fb:"+o+" "+c.type+(c.parameter&&c.parameter.length?" "+c.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(t){const i=t.indexOf(" "),o={ssrc:parseInt(t.substring(7,i),10)},c=t.indexOf(":",i);return c>-1?(o.attribute=t.substring(i+1,c),o.value=t.substring(c+1)):o.attribute=t.substring(i+1),o},e.parseSsrcGroup=function(t){const i=t.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(o=>parseInt(o,10))}},e.getMid=function(t){const i=e.matchPrefix(t,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(t){const i=t.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:e.matchPrefix(t+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,i){let o="a=setup:"+i+`\r
`;return t.fingerprints.forEach(c=>{o+="a=fingerprint:"+c.algorithm+" "+c.value+`\r
`}),o},e.parseCryptoLine=function(t){const i=t.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const i=t.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,i){return e.matchPrefix(t+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,i){const o=e.matchPrefix(t+i,"a=ice-ufrag:")[0],c=e.matchPrefix(t+i,"a=ice-pwd:")[0];return o&&c?{usernameFragment:o.substring(12),password:c.substring(10)}:null},e.writeIceParameters=function(t){let i="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(t){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=e.splitLines(t)[0].split(" ");i.profile=c[2];for(let m=3;m<c.length;m++){const g=c[m],y=e.matchPrefix(t,"a=rtpmap:"+g+" ")[0];if(y){const _=e.parseRtpMap(y),E=e.matchPrefix(t,"a=fmtp:"+g+" ");switch(_.parameters=E.length?e.parseFmtp(E[0]):{},_.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+g+" ").map(e.parseRtcpFb),i.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(_.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(m=>{i.headerExtensions.push(e.parseExtmap(m))});const u=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(m=>{u.forEach(g=>{m.rtcpFeedback.find(_=>_.type===g.type&&_.parameter===g.parameter)||m.rtcpFeedback.push(g)})}),i},e.writeRtpDescription=function(t,i){let o="";o+="m="+t+" ",o+=i.codecs.length>0?"9":"0",o+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=i.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(u=>{o+=e.writeRtpMap(u),o+=e.writeFmtp(u),o+=e.writeRtcpFb(u)});let c=0;return i.codecs.forEach(u=>{u.maxptime>c&&(c=u.maxptime)}),c>0&&(o+="a=maxptime:"+c+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(u=>{o+=e.writeExtmap(u)}),o},e.parseRtpEncodingParameters=function(t){const i=[],o=e.parseRtpParameters(t),c=o.fecMechanisms.indexOf("RED")!==-1,u=o.fecMechanisms.indexOf("ULPFEC")!==-1,m=e.matchPrefix(t,"a=ssrc:").map(N=>e.parseSsrcMedia(N)).filter(N=>N.attribute==="cname"),g=m.length>0&&m[0].ssrc;let y;const _=e.matchPrefix(t,"a=ssrc-group:FID").map(N=>N.substring(17).split(" ").map(K=>parseInt(K,10)));_.length>0&&_[0].length>1&&_[0][0]===g&&(y=_[0][1]),o.codecs.forEach(N=>{if(N.name.toUpperCase()==="RTX"&&N.parameters.apt){let L={ssrc:g,codecPayloadType:parseInt(N.parameters.apt,10)};g&&y&&(L.rtx={ssrc:y}),i.push(L),c&&(L=JSON.parse(JSON.stringify(L)),L.fec={ssrc:g,mechanism:u?"red+ulpfec":"red"},i.push(L))}}),i.length===0&&g&&i.push({ssrc:g});let E=e.matchPrefix(t,"b=");return E.length&&(E[0].indexOf("b=TIAS:")===0?E=parseInt(E[0].substring(7),10):E[0].indexOf("b=AS:")===0?E=parseInt(E[0].substring(5),10)*1e3*.95-2e3*8:E=void 0,i.forEach(N=>{N.maxBitrate=E})),i},e.parseRtcpParameters=function(t){const i={},o=e.matchPrefix(t,"a=ssrc:").map(m=>e.parseSsrcMedia(m)).filter(m=>m.attribute==="cname")[0];o&&(i.cname=o.value,i.ssrc=o.ssrc);const c=e.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=c.length>0,i.compound=c.length===0;const u=e.matchPrefix(t,"a=rtcp-mux");return i.mux=u.length>0,i},e.writeRtcpParameters=function(t){let i="";return t.reducedSize&&(i+=`a=rtcp-rsize\r
`),t.mux&&(i+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(i+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),i},e.parseMsid=function(t){let i;const o=e.matchPrefix(t,"a=msid:");if(o.length===1)return i=o[0].substring(7).split(" "),{stream:i[0],track:i[1]};const c=e.matchPrefix(t,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(c.length>0)return i=c[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(t){const i=e.parseMLine(t),o=e.matchPrefix(t,"a=max-message-size:");let c;o.length>0&&(c=parseInt(o[0].substring(19),10)),isNaN(c)&&(c=65536);const u=e.matchPrefix(t,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:i.fmt,maxMessageSize:c};const m=e.matchPrefix(t,"a=sctpmap:");if(m.length>0){const g=m[0].substring(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:c}}},e.writeSctpDescription=function(t,i){let o=[];return t.protocol!=="DTLS/SCTP"?o=["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:o=["m="+t.kind+" 9 "+t.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&o.push("a=max-message-size:"+i.maxMessageSize+`\r
`),o.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,i,o){let c;const u=i!==void 0?i:2;return t?c=t:c=e.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+c+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,i){const o=e.splitLines(t);for(let c=0;c<o.length;c++)switch(o[c]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[c].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const o=e.splitLines(t)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},e.parseOLine=function(t){const o=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const i=e.splitLines(t);for(let o=0;o<i.length;o++)if(i[o].length<2||i[o].charAt(1)!=="=")return!1;return!0},r.exports=e})(Gp)),Gp.exports}var Jx=GS();const el=Hm(Jx),qS=xS({__proto__:null,default:el},[Jx]);function Rh(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const o=new e(i),c=el.parseCandidate(i.candidate);for(const u in c)u in o||Object.defineProperty(o,u,{value:c[u]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(i)},r.RTCIceCandidate.prototype=e.prototype,Qa(r,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new r.RTCIceCandidate(t.candidate),writable:"false"}),t))}function lm(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||Qa(r,"icecandidate",e=>{if(e.candidate){const t=el.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function kh(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(m){if(!m||!m.sdp)return!1;const g=el.splitSections(m.sdp);return g.shift(),g.some(y=>{const _=el.parseMLine(y);return _&&_.kind==="application"&&_.protocol.indexOf("SCTP")!==-1})},i=function(m){const g=m.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(g===null||g.length<2)return-1;const y=parseInt(g[1],10);return y!==y?-1:y},o=function(m){let g=65536;return e.browser==="firefox"&&(e.version<57?m===-1?g=16384:g=2147483637:e.version<60?g=e.version===57?65535:65536:g=2147483637),g},c=function(m,g){let y=65536;e.browser==="firefox"&&e.version===57&&(y=65535);const _=el.matchPrefix(m.sdp,"a=max-message-size:");return _.length>0?y=parseInt(_[0].substring(19),10):e.browser==="firefox"&&g!==-1&&(y=2147483637),y},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:g}=this.getConfiguration();g==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const g=i(arguments[0]),y=o(g),_=c(arguments[0],g);let E;y===0&&_===0?E=Number.POSITIVE_INFINITY:y===0||_===0?E=Math.max(y,_):E=Math.min(y,_);const N={};Object.defineProperty(N,"maxMessageSize",{get(){return E}}),this._sctp=N}return u.apply(this,arguments)}}function Ih(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(i,o){const c=i.send;i.send=function(){const m=arguments[0],g=m.length||m.size||m.byteLength;if(i.readyState==="open"&&o.sctp&&g>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return c.apply(i,arguments)}}const t=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const o=t.apply(this,arguments);return e(o,this),o},Qa(r,"datachannel",i=>(e(i.channel,i.target),i))}function cm(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const i=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const c=o.target;if(c._lastConnectionState!==c.connectionState){c._lastConnectionState=c.connectionState;const u=new Event("connectionstatechange",o);c.dispatchEvent(u)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function um(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const c=o.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&o instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:o.type,sdp:c}):o.sdp=c}return t.apply(this,arguments)}}function Dh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function jh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return t.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?t.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>t.apply(this,[u]))})}const HS=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:um,shimAddIceCandidateNullOrEmpty:Dh,shimConnectionState:cm,shimMaxMessageSize:kh,shimParameterlessSetLocalDescription:jh,shimRTCIceCandidate:Rh,shimRTCIceCandidateRelayProtocol:lm,shimSendThrowTypeError:Ih},Symbol.toStringTag,{value:"Module"}));function FS({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=Ex,i=zS(r),o={browserDetails:i,commonShim:HS,extractVersion:bc,disableLog:LS,disableWarnings:US,sdp:qS};switch(i.browser){case"chrome":if(!Ab||!am||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),o;if(i.version===null)return t("Chrome shim can not determine version, not shimming."),o;t("adapter.js shimming chrome."),o.browserShim=Ab,Dh(r,i),jh(r),Tx(r,i),Sx(r),am(r,i),Nx(r),kx(r,i),Ax(r),Cx(r),Ix(r,i),Rh(r),lm(r),cm(r),kh(r,i),Ih(r),um(r,i);break;case"firefox":if(!Cb||!om||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),o;t("adapter.js shimming firefox."),o.browserShim=Cb,Dh(r,i),jh(r),Dx(r,i),om(r,i),jx(r),Px(r),Ox(r),Mx(r),Vx(r),Lx(r),Ux(r),zx(r),Bx(r),Rh(r),cm(r),kh(r,i),Ih(r);break;case"safari":if(!Rb||!e.shimSafari)return t("Safari shim is not included in this adapter release."),o;t("adapter.js shimming safari."),o.browserShim=Rb,Dh(r,i),jh(r),$x(r),Kx(r),Hx(r),Gx(r),qx(r),Qx(r),Fx(r),Xx(r),Rh(r),lm(r),kh(r,i),Ih(r),um(r,i);break;default:t("Unsupported browser!");break}return o}const Ib=FS({window:typeof window>"u"?void 0:window});function Ka(r,e,t,i){Object.defineProperty(r,e,{get:t,set:i,enumerable:!0,configurable:!0})}class Wx{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],i=e.byteLength,o=Math.ceil(i/this.chunkedMTU);let c=0,u=0;for(;u<i;){const m=Math.min(i,u+this.chunkedMTU),g=e.slice(u,m),y={__peerData:this._dataCount,n:c,data:g,total:o};t.push(y),u=m,c++}return this._dataCount++,t}}}function YS(r){let e=0;for(const o of r)e+=o.byteLength;const t=new Uint8Array(e);let i=0;for(const o of r)t.set(o,i),i+=o.byteLength;return t}const qp=Ib.default||Ib,mc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?e>=this.minChromeVersion:r==="firefox"?e>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return qp.browserDetails.browser}getVersion(){return qp.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),e=qp.browserDetails.version||0;if(r==="chrome"&&e<this.minChromeVersion)return!1;if(r==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,i=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),i=!0}catch{}finally{t&&t.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},$S=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),Zx=()=>Math.random().toString(36).slice(2),Db={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class QS extends Wx{noop(){}blobToArrayBuffer(e,t){const i=new FileReader;return i.onload=function(o){o.target&&t(o.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Db,this.browser=mc.getBrowser(),this.browserVersion=mc.getVersion(),this.pack=bx,this.unpack=vx,this.supports=(function(){const t={browser:mc.isBrowserSupported(),webRTC:mc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let i;try{i=new RTCPeerConnection(Db),t.audioVideo=!0;let o;try{o=i.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!o.ordered;try{o.binaryType="blob",t.binaryBlob=!mc.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{i&&i.close()}return t})(),this.validateId=$S,this.randomToken=Zx}}const Kn=new QS,KS="PeerJS: ";class XS{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const i=[KS,...t];for(const o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var ge=new XS,$m={},JS=Object.prototype.hasOwnProperty,zn="~";function Oc(){}Object.create&&(Oc.prototype=Object.create(null),new Oc().__proto__||(zn=!1));function WS(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function eE(r,e,t,i,o){if(typeof t!="function")throw new TypeError("The listener must be a function");var c=new WS(t,i||r,o),u=zn?zn+e:e;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],c]:r._events[u].push(c):(r._events[u]=c,r._eventsCount++),r}function Oh(r,e){--r._eventsCount===0?r._events=new Oc:delete r._events[e]}function In(){this._events=new Oc,this._eventsCount=0}In.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)JS.call(t,i)&&e.push(zn?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};In.prototype.listeners=function(e){var t=zn?zn+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,c=i.length,u=new Array(c);o<c;o++)u[o]=i[o].fn;return u};In.prototype.listenerCount=function(e){var t=zn?zn+e:e,i=this._events[t];return i?i.fn?1:i.length:0};In.prototype.emit=function(e,t,i,o,c,u){var m=zn?zn+e:e;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,_,E;if(g.fn){switch(g.once&&this.removeListener(e,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,t),!0;case 3:return g.fn.call(g.context,t,i),!0;case 4:return g.fn.call(g.context,t,i,o),!0;case 5:return g.fn.call(g.context,t,i,o,c),!0;case 6:return g.fn.call(g.context,t,i,o,c,u),!0}for(E=1,_=new Array(y-1);E<y;E++)_[E-1]=arguments[E];g.fn.apply(g.context,_)}else{var N=g.length,L;for(E=0;E<N;E++)switch(g[E].once&&this.removeListener(e,g[E].fn,void 0,!0),y){case 1:g[E].fn.call(g[E].context);break;case 2:g[E].fn.call(g[E].context,t);break;case 3:g[E].fn.call(g[E].context,t,i);break;case 4:g[E].fn.call(g[E].context,t,i,o);break;default:if(!_)for(L=1,_=new Array(y-1);L<y;L++)_[L-1]=arguments[L];g[E].fn.apply(g[E].context,_)}}return!0};In.prototype.on=function(e,t,i){return eE(this,e,t,i,!1)};In.prototype.once=function(e,t,i){return eE(this,e,t,i,!0)};In.prototype.removeListener=function(e,t,i,o){var c=zn?zn+e:e;if(!this._events[c])return this;if(!t)return Oh(this,c),this;var u=this._events[c];if(u.fn)u.fn===t&&(!o||u.once)&&(!i||u.context===i)&&Oh(this,c);else{for(var m=0,g=[],y=u.length;m<y;m++)(u[m].fn!==t||o&&!u[m].once||i&&u[m].context!==i)&&g.push(u[m]);g.length?this._events[c]=g.length===1?g[0]:g:Oh(this,c)}return this};In.prototype.removeAllListeners=function(e){var t;return e?(t=zn?zn+e:e,this._events[t]&&Oh(this,t)):(this._events=new Oc,this._eventsCount=0),this};In.prototype.off=In.prototype.removeListener;In.prototype.addListener=In.prototype.on;In.prefixed=zn;In.EventEmitter=In;$m=In;var Xa={};Ka(Xa,"ConnectionType",()=>Hs);Ka(Xa,"PeerErrorType",()=>en);Ka(Xa,"BaseConnectionErrorType",()=>hm);Ka(Xa,"DataConnectionErrorType",()=>Qm);Ka(Xa,"SerializationType",()=>vd);Ka(Xa,"SocketEventType",()=>Bs);Ka(Xa,"ServerMessageType",()=>Rn);var Hs=(function(r){return r.Data="data",r.Media="media",r})({}),en=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),hm=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),Qm=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),vd=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),Bs=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),Rn=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const tE="1.5.5";class ZS extends $m.EventEmitter{constructor(e,t,i,o,c,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const m=e?"wss://":"ws://";this._baseUrl=m+t+":"+i+o+"peerjs?key="+c}start(e,t){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+tE),this._disconnected=!1,this._socket.onmessage=o=>{let c;try{c=JSON.parse(o.data),ge.log("Server message received:",c)}catch{ge.log("Invalid server message",o.data);return}this.emit(Bs.Message,c)},this._socket.onclose=o=>{this._disconnected||(ge.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Bs.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),ge.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){ge.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Rn.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Bs.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class nE{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Hs.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const i=this.connection,o={ordered:!!e.reliable},c=t.createDataChannel(i.label,o);i._initializeDataChannel(c),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){ge.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,c=this.connection.provider;ge.log("Listening for ICE candidates."),e.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(ge.log(`Received ICE candidates for ${t}:`,u.candidate),c.socket.send({type:Rn.Candidate,payload:{candidate:u.candidate,type:o,connectionId:i},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":ge.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(hm.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":ge.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(hm.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":ge.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},ge.log("Listening for data channel"),e.ondatachannel=u=>{ge.log("Received data channel");const m=u.channel;c.getConnection(t,i)._initializeDataChannel(m)},ge.log("Listening for remote stream"),e.ontrack=u=>{ge.log("Received remote stream");const m=u.streams[0],g=c.getConnection(t,i);if(g.type===Hs.Media){const y=g;this._addStreamToMediaConnection(m,y)}}}cleanup(){ge.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let i=!1;const o=this.connection.dataChannel;o&&(i=!!o.readyState&&o.readyState!=="closed"),(t||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createOffer(this.connection.options.constraints);ge.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),ge.log("Set localDescription:",i,`for:${this.connection.peer}`);let o={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Hs.Data){const c=this.connection;o={...o,label:c.label,reliable:c.reliable,serialization:c.serialization}}t.socket.send({type:Rn.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(en.WebRTC,o),ge.log("Failed to setLocalDescription, ",o))}}catch(i){t.emitError(en.WebRTC,i),ge.log("Failed to createOffer, ",i)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createAnswer();ge.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),ge.log("Set localDescription:",i,`for:${this.connection.peer}`),t.socket.send({type:Rn.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){t.emitError(en.WebRTC,o),ge.log("Failed to setLocalDescription, ",o)}}catch(i){t.emitError(en.WebRTC,i),ge.log("Failed to create answer, ",i)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const i=this.connection.peerConnection,o=this.connection.provider;ge.log("Setting remote description",t);const c=this;try{await i.setRemoteDescription(t),ge.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await c._makeAnswer()}catch(u){o.emitError(en.WebRTC,u),ge.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(e){ge.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),ge.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(en.WebRTC,t),ge.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(ge.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return ge.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(i=>{t.addTrack(i,e)})}_addStreamToMediaConnection(e,t){ge.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class rE extends $m.EventEmitter{emitError(e,t){ge.error("Error:",t),this.emit("error",new eN(`${e}`,t))}}class eN extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class iE extends rE{get open(){return this._open}constructor(e,t,i){super(),this.peer=e,this.provider=t,this.options=i,this._open=!1,this.metadata=i.metadata}}var zm;const Dc=class Dc extends iE{get type(){return Hs.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,i){super(e,t,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Dc.ID_PREFIX+Kn.randomToken(),this._negotiator=new nE(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{ge.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{ge.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){ge.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,i=e.payload;switch(e.type){case Rn.Answer:this._negotiator.handleSDP(t,i.sdp),this._open=!0;break;case Rn.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:ge.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){ge.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const o of i)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};zm=new WeakMap,dc(Dc,zm,Dc.ID_PREFIX="mc_");let Yh=Dc;class tN{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:i,port:o,path:c,key:u}=this._options,m=new URL(`${t}://${i}:${o}${c}${u}/${e}`);return m.searchParams.set("ts",`${Date.now()}${Math.random()}`),m.searchParams.set("version",tE),fetch(m.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){ge.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==Kn.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===Kn.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw ge.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Bm,Gm;const Pa=class Pa extends iE{get type(){return Hs.Data}constructor(e,t,i){super(e,t,i),this.connectionId=this.options.connectionId||Pa.ID_PREFIX+Zx(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new nE(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{ge.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{ge.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{ge.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(Qm.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case Rn.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case Rn.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:ge.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Bm=new WeakMap,Gm=new WeakMap,dc(Pa,Bm,Pa.ID_PREFIX="dc_"),dc(Pa,Gm,Pa.MAX_BUFFERED_AMOUNT=8388608);let $h=Pa;class Km extends $h{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>$h.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return ge.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Hp extends Km{close(e){super.close(e),this._chunkedData={}}constructor(e,t,i){super(e,t,i),this.chunker=new Wx,this.serialization=vd.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=vx(e),i=t.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,i=this._chunkedData[t]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[t]=i,i.total===i.count){delete this._chunkedData[t];const o=YS(i.data);this._handleDataMessage({data:o})}}_send(e,t){const i=bx(e);if(i instanceof Promise)return this._send_blob(i);if(!t&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);ge.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const i of t)this.send(i,!0)}}class nN extends Km{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=vd.None}}class rN extends Km{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),i=t.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const i=this.encoder.encode(this.stringify(e));if(i.byteLength>=Kn.chunkedMTU){this.emitError(Qm.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=vd.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var qm;const jc=class jc extends rE{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,i]of this._connections)e[t]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:nN,json:rN,binary:Hp,"binary-utf8":Hp,default:Hp},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(e&&e.constructor==Object?t=e:e&&(i=e.toString()),t={debug:0,host:Kn.CLOUD_HOST,port:Kn.CLOUD_PORT,path:"/",key:jc.DEFAULT_KEY,token:Kn.randomToken(),config:Kn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Kn.CLOUD_HOST?this._options.secure=Kn.isSecure():this._options.host==Kn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&ge.setLogFunction(this._options.logFunction),ge.logLevel=this._options.debug||0,this._api=new tN(t),this._socket=this._createServerConnection(),!Kn.supports.audioVideo&&!Kn.supports.data){this._delayedAbort(en.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!Kn.validateId(i)){this._delayedAbort(en.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(en.ServerError,o))}_createServerConnection(){const e=new ZS(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Bs.Message,t=>{this._handleMessage(t)}),e.on(Bs.Error,t=>{this._abort(en.SocketError,t)}),e.on(Bs.Disconnected,()=>{this.disconnected||(this.emitError(en.Network,"Lost connection to server."),this.disconnect())}),e.on(Bs.Close,()=>{this.disconnected||this._abort(en.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,i=e.payload,o=e.src;switch(t){case Rn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Rn.Error:this._abort(en.ServerError,i.msg);break;case Rn.IdTaken:this._abort(en.UnavailableID,`ID "${this.id}" is taken`);break;case Rn.InvalidKey:this._abort(en.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Rn.Leave:ge.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case Rn.Expire:this.emitError(en.PeerUnavailable,`Could not connect to peer ${o}`);break;case Rn.Offer:{const c=i.connectionId;let u=this.getConnection(o,c);if(u&&(u.close(),ge.warn(`Offer received for existing Connection ID:${c}`)),i.type===Hs.Media){const g=new Yh(o,this,{connectionId:c,_payload:i,metadata:i.metadata});u=g,this._addConnection(o,u),this.emit("call",g)}else if(i.type===Hs.Data){const g=new this._serializers[i.serialization](o,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});u=g,this._addConnection(o,u),this.emit("connection",g)}else{ge.warn(`Received malformed connection type:${i.type}`);return}const m=this._getMessages(c);for(const g of m)u.handleMessage(g);break}default:{if(!i){ge.warn(`You received a malformed message from ${o} of type ${t}`);return}const c=i.connectionId,u=this.getConnection(o,c);u&&u.peerConnection?u.handleMessage(e):c?this._storeMessage(c,e):ge.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){ge.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(en.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,i),i}call(e,t,i={}){if(this.disconnected){ge.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(en.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){ge.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new Yh(e,this,{...i,_stream:t});return this._addConnection(e,o),o}_addConnection(e,t){ge.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const i=this._connections.get(e);if(!i)return null;for(const o of i)if(o.connectionId===t)return o;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){ge.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(ge.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const i of t)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;ge.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)ge.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)ge.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(en.ServerError,t))}};qm=new WeakMap,dc(jc,qm,jc.DEFAULT_KEY="peerjs");let Qh=jc;class iN{constructor(){this.peer=null,this.lockPeer=null,this.connections=new Map,this.hostId=null,this.isHost=!1,this.heartbeatInterval=null,this.retryCount=0,this.maxRetries=10,this.onStateReceived=null,this.onActionReceived=null,this.onConnectionStatus=null,this.onPeerConnected=null}async getPublicIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown-network"}catch(e){return console.warn("[Sync] Could not fetch public IP for lock, using fallback",e),"local-fallback"}}async initialize(e,t){if(this.isHost=e==="DJ",this.peer&&this.destroy(),this.isHost&&!t){const i=await this.getPublicIP(),o=`singmode-lock-${btoa(i).replace(/=/g,"").substr(0,12)}`;if(console.log(`[Sync] Attempting to claim network lock: ${o}`),!await new Promise(u=>{const m=new Qh(o,{debug:1});m.on("open",()=>{this.lockPeer=m,u(!0)}),m.on("error",g=>{g.type==="unavailable-id"?u(!1):u(!0),m.destroy()})}))throw new Error("COLLISION: A SingMode DJ session is already active on this network.")}return new Promise((i,o)=>{const c=this.isHost?t||`singmode-${Math.random().toString(36).substr(2,6)}`:void 0;this.peer=new Qh(c,{debug:1}),this.peer.on("open",u=>{console.log(`[Sync] Peer opened with ID: ${u}`),this.hostId=u,this.retryCount=0,this.startHeartbeat(),!this.isHost&&t&&this.connectToHost(t),this.onConnectionStatus&&(!t||this.connections.size>0)&&this.onConnectionStatus("connected"),i(u)}),this.peer.on("disconnected",()=>{var u;console.warn("[Sync] Peer disconnected from signaling server. Attempting reconnect..."),this.onConnectionStatus&&this.onConnectionStatus("connecting"),(u=this.peer)==null||u.reconnect()}),this.peer.on("connection",u=>{this.handleConnection(u)}),this.peer.on("error",u=>{var m;console.error("[Sync] Peer error:",u.type,u),u.type==="unavailable-id"?(this.destroy(),this.initialize(e).then(i).catch(o)):u.type==="network"||u.type==="server-error"||(m=u.message)!=null&&m.includes("Lost connection")?(this.onConnectionStatus&&this.onConnectionStatus("disconnected"),this.handleNetworkError(e,t)):u.type==="peer-unavailable"&&this.onConnectionStatus&&this.onConnectionStatus("disconnected")})})}handleNetworkError(e,t){if(this.retryCount<this.maxRetries){this.retryCount++;const i=Math.min(1e3*Math.pow(2,this.retryCount),3e4);console.log(`[Sync] Network failure. Retrying in ${i}ms... (Attempt ${this.retryCount})`),setTimeout(()=>{this.initialize(e,t)},i)}}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=window.setInterval(()=>{this.peer&&this.peer.disconnected&&!this.peer.destroyed&&this.peer.reconnect(),this.lockPeer&&this.lockPeer.disconnected&&!this.lockPeer.destroyed&&this.lockPeer.reconnect()},5e3)}connectToHost(e){if(!this.peer||this.isHost||this.peer.destroyed)return;this.onConnectionStatus&&this.onConnectionStatus("connecting");const t=this.peer.connect(e,{reliable:!0});this.handleConnection(t)}handleConnection(e){e.on("open",()=>{console.log(`[Sync] Data connection established with: ${e.peer}`),this.connections.set(e.peer,e),this.onConnectionStatus&&this.onConnectionStatus("connected"),this.isHost&&this.onPeerConnected&&this.onPeerConnected()}),e.on("data",t=>{t&&typeof t=="object"&&("type"in t?this.onActionReceived&&this.onActionReceived(t):"participants"in t&&this.onStateReceived&&this.onStateReceived(t))}),e.on("close",()=>{console.log(`[Sync] Connection closed: ${e.peer}`),this.connections.delete(e.peer),this.connections.size===0&&this.onConnectionStatus&&(this.isHost||this.onConnectionStatus("disconnected"))}),e.on("error",t=>{console.error("[Sync] Connection error:",t),this.connections.delete(e.peer)})}broadcastState(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}broadcastAction(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}sendAction(e){this.isHost||!this.peer||this.connections.forEach(t=>{t.open&&t.send(e)})}getRoomId(){return this.hostId}destroy(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.connections.forEach(e=>e.close()),this.connections.clear(),this.peer&&(this.peer.destroy(),this.peer=null),this.lockPeer&&(this.lockPeer.destroy(),this.lockPeer=null)}}const xt=new iN,sN=()=>{};var jb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aN=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[t++],u=r[t++],m=r[t++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],u=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},aE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],u=o+1<r.length,m=u?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,_=c>>2,E=(c&3)<<4|m>>4;let N=(m&15)<<2|y>>6,L=y&63;g||(L=64,u||(N=64)),i.push(t[_],t[E],t[N],t[L])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(sE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):aN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||m==null||y==null||E==null)throw new oN;const N=c<<2|m>>4;if(i.push(N),y!==64){const L=m<<4&240|y>>2;if(i.push(L),E!==64){const K=y<<6&192|E;i.push(K)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class oN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lN=function(r){const e=sE(r);return aE.encodeByteArray(e,!0)},Kh=function(r){return lN(r).replace(/\./g,"")},oE=function(r){try{return aE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=()=>cN().__FIREBASE_DEFAULTS__,hN=()=>{if(typeof process>"u"||typeof jb>"u")return;const r=jb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},dN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&oE(r[1]);return e&&JSON.parse(e)},bd=()=>{try{return sN()||uN()||hN()||dN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lE=r=>{var e,t;return(t=(e=bd())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},fN=r=>{const e=lE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},cE=()=>{var r;return(r=bd())==null?void 0:r.config},uE=r=>{var e;return(e=bd())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Kh(JSON.stringify(t)),Kh(JSON.stringify(u)),""].join(".")}const Nc={};function gN(){const r={prod:[],emulator:[]};for(const e of Object.keys(Nc))Nc[e]?r.emulator.push(e):r.prod.push(e);return r}function yN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Ob=!1;function dE(r,e){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||Nc[r]===e||Nc[r]||Ob)return;Nc[r]=e;function t(N){return`__firebase__banner__${N}`}const i="__firebase__banner",c=gN().prod.length>0;function u(){const N=document.getElementById(i);N&&N.remove()}function m(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,L){N.setAttribute("width","24"),N.setAttribute("id",L),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function y(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Ob=!0,u()},N}function _(N,L){N.setAttribute("id",L),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function E(){const N=yN(i),L=t("text"),K=document.getElementById(L)||document.createElement("span"),ne=t("learnmore"),re=document.getElementById(ne)||document.createElement("a"),me=t("preprendIcon"),we=document.getElementById(me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ve=N.element;m(ve),_(re,ne);const _e=y();g(we,me),ve.append(we,K,re,_e),document.body.appendChild(ve)}c?(K.innerText="Preview backend disconnected.",we.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(we.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function bN(){var e;const r=(e=bd())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _N(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function EN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wN(){const r=Dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function TN(){return!bN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SN(){try{return typeof indexedDB=="object"}catch{return!1}}function NN(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="FirebaseError";class Xi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=AN,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fc.prototype.create)}}class Fc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?CN(c,i):"Error",m=`${this.serviceName}: ${u} (${o}).`;return new Xi(o,m,i)}}function CN(r,e){return r.replace(RN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const RN=/\{\$([^}]+)}/g;function kN(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function za(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=r[o],u=e[o];if(Mb(c)&&Mb(u)){if(!za(c,u))return!1}else if(c!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Mb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _c(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function xc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function IN(r,e){const t=new DN(r,e);return t.subscribe.bind(t)}class DN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");jN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Fp),o.error===void 0&&(o.error=Fp),o.complete===void 0&&(o.complete=Fp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Fp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(r){return r&&r._delegate?r._delegate:r}class Ba{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new pN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PN(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:MN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MN(r){return r===Oa?void 0:r}function PN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ON(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const LN={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},UN=Ke.INFO,zN={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},BN=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=zN[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=UN,this._logHandler=BN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const GN=(r,e)=>e.some(t=>r instanceof t);let Pb,Vb;function qN(){return Pb||(Pb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HN(){return Vb||(Vb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fE=new WeakMap,dm=new WeakMap,pE=new WeakMap,Yp=new WeakMap,Jm=new WeakMap;function FN(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",u)},c=()=>{t(Fs(r.result)),o()},u=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&fE.set(t,r)}).catch(()=>{}),Jm.set(e,r),e}function YN(r){if(dm.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",u),r.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",u),r.addEventListener("abort",u)});dm.set(r,e)}let fm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return dm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||pE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $N(r){fm=r(fm)}function QN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call($p(this),e,...t);return pE.set(i,e.sort?e.sort():[e]),Fs(i)}:HN().includes(r)?function(...e){return r.apply($p(this),e),Fs(fE.get(this))}:function(...e){return Fs(r.apply($p(this),e))}}function KN(r){return typeof r=="function"?QN(r):(r instanceof IDBTransaction&&YN(r),GN(r,qN())?new Proxy(r,fm):r)}function Fs(r){if(r instanceof IDBRequest)return FN(r);if(Yp.has(r))return Yp.get(r);const e=KN(r);return e!==r&&(Yp.set(r,e),Jm.set(e,r)),e}const $p=r=>Jm.get(r);function XN(r,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const u=indexedDB.open(r,e),m=Fs(u);return i&&u.addEventListener("upgradeneeded",g=>{i(Fs(u.result),g.oldVersion,g.newVersion,Fs(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const JN=["get","getKey","getAll","getAllKeys","count"],WN=["put","add","delete","clear"],Qp=new Map;function Lb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=WN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||JN.includes(t)))return;const c=async function(u,...m){const g=this.transaction(u,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&g.done]))[0]};return Qp.set(e,c),c}$N(r=>({...r,get:(e,t,i)=>Lb(e,t)||r.get(e,t,i),has:(e,t)=>!!Lb(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(e2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function e2(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pm="@firebase/app",Ub="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Xm("@firebase/app"),t2="@firebase/app-compat",n2="@firebase/analytics-compat",r2="@firebase/analytics",i2="@firebase/app-check-compat",s2="@firebase/app-check",a2="@firebase/auth",o2="@firebase/auth-compat",l2="@firebase/database",c2="@firebase/data-connect",u2="@firebase/database-compat",h2="@firebase/functions",d2="@firebase/functions-compat",f2="@firebase/installations",p2="@firebase/installations-compat",m2="@firebase/messaging",g2="@firebase/messaging-compat",y2="@firebase/performance",v2="@firebase/performance-compat",b2="@firebase/remote-config",_2="@firebase/remote-config-compat",x2="@firebase/storage",E2="@firebase/storage-compat",w2="@firebase/firestore",T2="@firebase/ai",S2="@firebase/firestore-compat",N2="firebase",A2="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",C2={[pm]:"fire-core",[t2]:"fire-core-compat",[r2]:"fire-analytics",[n2]:"fire-analytics-compat",[s2]:"fire-app-check",[i2]:"fire-app-check-compat",[a2]:"fire-auth",[o2]:"fire-auth-compat",[l2]:"fire-rtdb",[c2]:"fire-data-connect",[u2]:"fire-rtdb-compat",[h2]:"fire-fn",[d2]:"fire-fn-compat",[f2]:"fire-iid",[p2]:"fire-iid-compat",[m2]:"fire-fcm",[g2]:"fire-fcm-compat",[y2]:"fire-perf",[v2]:"fire-perf-compat",[b2]:"fire-rc",[_2]:"fire-rc-compat",[x2]:"fire-gcs",[E2]:"fire-gcs-compat",[w2]:"fire-fst",[S2]:"fire-fst-compat",[T2]:"fire-vertex","fire-js":"fire-js",[N2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=new Map,R2=new Map,gm=new Map;function zb(r,e){try{r.container.addComponent(e)}catch(t){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function al(r){const e=r.name;if(gm.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,r);for(const t of Xh.values())zb(t,r);for(const t of R2.values())zb(t,r);return!0}function Wm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function jr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new Fc("app","Firebase",k2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=A2;function mE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:mm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ys.create("bad-app-name",{appName:String(o)});if(t||(t=cE()),!t)throw Ys.create("no-options");const c=Xh.get(o);if(c){if(za(t,c.options)&&za(i,c.config))return c;throw Ys.create("duplicate-app",{appName:o})}const u=new VN(o);for(const g of gm.values())u.addComponent(g);const m=new I2(t,i,u);return Xh.set(o,m),m}function gE(r=mm){const e=Xh.get(r);if(!e&&r===mm&&cE())return mE();if(!e)throw Ys.create("no-app",{appName:r});return e}function $s(r,e,t){let i=C2[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(u.join(" "));return}al(new Ba(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="firebase-heartbeat-database",j2=1,Mc="firebase-heartbeat-store";let Kp=null;function yE(){return Kp||(Kp=XN(D2,j2,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Mc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ys.create("idb-open",{originalErrorMessage:r.message})})),Kp}async function O2(r){try{const t=(await yE()).transaction(Mc),i=await t.objectStore(Mc).get(vE(r));return await t.done,i}catch(e){if(e instanceof Xi)Fi.warn(e.message);else{const t=Ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fi.warn(t.message)}}}async function Bb(r,e){try{const i=(await yE()).transaction(Mc,"readwrite");await i.objectStore(Mc).put(e,vE(r)),await i.done}catch(t){if(t instanceof Xi)Fi.warn(t.message);else{const i=Ys.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fi.warn(i.message)}}}function vE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=1024,P2=30;class V2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new U2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Gb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>P2){const u=z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gb(),{heartbeatsToSend:i,unsentEntries:o}=L2(this._heartbeatsCache.heartbeats),c=Kh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Fi.warn(t),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function L2(r,e=M2){const t=[];let i=r.slice();for(const o of r){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),qb(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),qb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class U2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SN()?NN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await O2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qb(r){return Kh(JSON.stringify({version:2,heartbeats:r})).length}function z2(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(r){al(new Ba("platform-logger",e=>new ZN(e),"PRIVATE")),al(new Ba("heartbeat",e=>new V2(e),"PRIVATE")),$s(pm,Ub,r),$s(pm,Ub,"esm2020"),$s("fire-js","")}B2("");var G2="firebase",q2="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$s(G2,q2,"app");function bE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H2=bE,_E=new Fc("auth","Firebase",bE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Xm("@firebase/auth");function F2(r,...e){Jh.logLevel<=Ke.WARN&&Jh.warn(`Auth (${pl}): ${r}`,...e)}function Mh(r,...e){Jh.logLevel<=Ke.ERROR&&Jh.error(`Auth (${pl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(r,...e){throw Zm(r,...e)}function di(r,...e){return Zm(r,...e)}function xE(r,e,t){const i={...H2(),[e]:t};return new Fc("auth","Firebase",i).create(e,{appName:r.name})}function qi(r){return xE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zm(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return _E.create(r,...e)}function Re(r,e,...t){if(!r)throw Zm(e,...t)}function Bi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mh(e),new Error(e)}function Yi(r,e){r||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function Y2(){return Hb()==="http:"||Hb()==="https:"}function Hb(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y2()||xN()||"connection"in navigator)?navigator.onLine:!0}function Q2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yi(t>e,"Short delay should be less than long delay!"),this.isMobile=vN()||EN()}get(){return $2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(r,e){Yi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J2=new $c(3e4,6e4);function ra(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ia(r,e,t,i,o={}){return wE(r,o,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const m=Yc({key:r.config.apiKey,...u}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...c};return _N()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&fl(r.emulatorConfig.host)&&(y.credentials="include"),EE.fetch()(await TE(r,r.config.apiHost,t,m),y)})}async function wE(r,e,t){r._canInitEmulator=!1;const i={...K2,...e};try{const o=new Z2(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw wh(r,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const m=c.ok?u.errorMessage:u.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw wh(r,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw wh(r,"email-already-in-use",u);if(g==="USER_DISABLED")throw wh(r,"user-disabled",u);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw xE(r,_,y);Xr(r,_)}}catch(o){if(o instanceof Xi)throw o;Xr(r,"network-request-failed",{message:String(o)})}}async function Qc(r,e,t,i,o={}){const c=await ia(r,e,t,i,o);return"mfaPendingCredential"in c&&Xr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function TE(r,e,t,i){const o=`${e}${t}?${i}`,c=r,u=c.config.emulator?eg(r.config,o):`${r.config.apiScheme}://${o}`;return X2.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function W2(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(di(this.auth,"network-request-failed")),J2.get())})}}function wh(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=di(r,e,i);return o.customData._tokenResponse=t,o}function Fb(r){return r!==void 0&&r.enterprise!==void 0}class eA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return W2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tA(r,e){return ia(r,"GET","/v2/recaptchaConfig",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(r,e){return ia(r,"POST","/v1/accounts:delete",e)}async function Wh(r,e){return ia(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rA(r,e=!1){const t=hn(r),i=await t.getIdToken(e),o=tg(i);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:Ac(Xp(o.auth_time)),issuedAtTime:Ac(Xp(o.iat)),expirationTime:Ac(Xp(o.exp)),signInProvider:u||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Xp(r){return Number(r)*1e3}function tg(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const o=oE(t);return o?JSON.parse(o):(Mh("Failed to decode base64 JWT payload"),null)}catch(o){return Mh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Yb(r){const e=tg(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Xi&&iA(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function iA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zh(r){var E;const e=r.auth,t=await r.getIdToken(),i=await Pc(r,Wh(e,{idToken:t}));Re(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const c=(E=o.providerUserInfo)!=null&&E.length?SE(o.providerUserInfo):[],u=oA(r.providerData,c),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(u!=null&&u.length),y=m?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new vm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,_)}async function aA(r){const e=hn(r);await Zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oA(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function SE(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(r,e){const t=await wE(r,{},async()=>{const i=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,u=await TE(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return r.emulatorConfig&&fl(r.emulatorConfig.host)&&(g.credentials="include"),EE.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cA(r,e){return ia(r,"POST","/v2/accounts:revokeToken",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Yb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await lA(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,u=new tl;return i&&(Re(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Re(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Re(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class $r{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new sA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rA(this,e)}reload(){return aA(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $r({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Zh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await Pc(this,nA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:N,isAnonymous:L,providerData:K,stsTokenManager:ne}=t;Re(E&&ne,e,"internal-error");const re=tl.fromJSON(this.name,ne);Re(typeof E=="string",e,"internal-error"),Os(i,e.name),Os(o,e.name),Re(typeof N=="boolean",e,"internal-error"),Re(typeof L=="boolean",e,"internal-error"),Os(c,e.name),Os(u,e.name),Os(m,e.name),Os(g,e.name),Os(y,e.name),Os(_,e.name);const me=new $r({uid:E,auth:e,email:o,emailVerified:N,displayName:i,isAnonymous:L,photoURL:u,phoneNumber:c,tenantId:m,stsTokenManager:re,createdAt:y,lastLoginAt:_});return K&&Array.isArray(K)&&(me.providerData=K.map(we=>({...we}))),g&&(me._redirectEventId=g),me}static async _fromIdTokenResponse(e,t,i=!1){const o=new tl;o.updateFromServerResponse(t);const c=new $r({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Zh(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?SE(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new tl;m.updateFromIdToken(i);const g=new $r({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new vm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new Map;function Gi(r){Yi(r instanceof Function,"Expected a class definition");let e=$b.get(r);return e?(Yi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,$b.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}NE.type="NONE";const Qb=NE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(r,e,t){return`firebase:${r}:${e}:${t}`}class nl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Ph(this.userKey,o.apiKey,c),this.fullPersistenceKey=Ph("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wh(this.auth,{idToken:e}).catch(()=>{});return t?$r._fromGetAccountInfoResponse(this.auth,t,e):null}return $r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new nl(Gi(Qb),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Gi(Qb);const u=Ph(i,e.config.apiKey,e.name);let m=null;for(const y of t)try{const _=await y._get(u);if(_){let E;if(typeof _=="string"){const N=await Wh(e,{idToken:_}).catch(()=>{});if(!N)break;E=await $r._fromGetAccountInfoResponse(e,N,_)}else E=$r._fromJSON(e,_);y!==c&&(m=E),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new nl(c,e,i):(c=g[0],m&&await c._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new nl(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DE(e))return"Blackberry";if(jE(e))return"Webos";if(CE(e))return"Safari";if((e.includes("chrome/")||RE(e))&&!e.includes("edge/"))return"Chrome";if(IE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function AE(r=Dn()){return/firefox\//i.test(r)}function CE(r=Dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RE(r=Dn()){return/crios\//i.test(r)}function kE(r=Dn()){return/iemobile/i.test(r)}function IE(r=Dn()){return/android/i.test(r)}function DE(r=Dn()){return/blackberry/i.test(r)}function jE(r=Dn()){return/webos/i.test(r)}function ng(r=Dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function uA(r=Dn()){var e;return ng(r)&&!!((e=window.navigator)!=null&&e.standalone)}function hA(){return wN()&&document.documentMode===10}function OE(r=Dn()){return ng(r)||IE(r)||jE(r)||DE(r)||/windows phone/i.test(r)||kE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(r,e=[]){let t;switch(r){case"Browser":t=Kb(Dn());break;case"Worker":t=`${Kb(Dn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((u,m)=>{try{const g=e(c);u(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(r,e={}){return ia(r,"GET","/v2/passwordPolicy",ra(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=6;class mA{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??pA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xb(this),this.idTokenSubscription=new Xb(this),this.beforeStateQueue=new dA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_E,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gi(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wh(this,{idToken:e}),i=await $r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(jr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(qi(this));const t=e?hn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fA(this),t=new mA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await cA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gi(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[Gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ME(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&F2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ja(r){return hn(r)}class Xb{constructor(e){this.auth=e,this.observer=null,this.addObserver=IN(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yA(r){_d=r}function PE(r){return _d.loadJS(r)}function vA(){return _d.recaptchaEnterpriseScript}function bA(){return _d.gapiScript}function _A(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class xA{constructor(){this.enterprise=new EA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class EA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const wA="recaptcha-enterprise",VE="NO_RECAPTCHA";class TA{constructor(e){this.type=wA,this.auth=Ja(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,m)=>{tA(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new eA(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,u(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,u,m){const g=window.grecaptcha;Fb(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{u(y)}).catch(()=>{u(VE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xA().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{i(this.auth).then(m=>{if(!t&&Fb(window.grecaptcha))o(m,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=vA();g.length!==0&&(g+=m),PE(g).then(()=>{o(m,c,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function Jb(r,e,t,i=!1,o=!1){const c=new TA(r);let u;if(o)u=VE;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function bm(r,e,t,i,o){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Jb(r,e,t,t==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Jb(r,e,t,t==="getOobCode");return i(r,m)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(r,e){const t=Wm(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(za(c,e??{}))return o;Xr(o,"already-initialized")}return t.initialize({options:e})}function NA(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Gi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function AA(r,e,t){const i=Ja(r);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=LE(e),{host:u,port:m}=CA(e),g=m===null?"":`:${m}`,y={url:`${c}//${u}${g}/`},_=Object.freeze({host:u,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(za(y,i.config.emulator)&&za(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,fl(u)?(hE(`${c}//${u}${g}`),dE("Auth",!0)):RA()}function LE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function CA(r){const e=LE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:Wb(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:Wb(u)}}}function Wb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function RA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,t){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function kA(r,e){return ia(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(r,e){return Qc(r,"POST","/v1/accounts:signInWithPassword",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(r,e){return Qc(r,"POST","/v1/accounts:signInWithEmailLink",ra(r,e))}async function jA(r,e){return Qc(r,"POST","/v1/accounts:signInWithEmailLink",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends rg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Vc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Vc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bm(e,t,"signInWithPassword",IA);case"emailLink":return DA(e,{email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bm(e,i,"signUpPassword",kA);case"emailLink":return jA(e,{idToken:t,email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(r,e){return Qc(r,"POST","/v1/accounts:signInWithIdp",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class Ga extends rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const u=new Ga(i,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return rl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,rl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rl(e,t)}buildRequest(){const e={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PA(r){const e=_c(xc(r)).link,t=e?_c(xc(e)).deep_link_id:null,i=_c(xc(r)).deep_link_id;return(i?_c(xc(i)).link:null)||i||t||e||r}class ig{constructor(e){const t=_c(xc(e)),i=t.apiKey??null,o=t.oobCode??null,c=MA(t.mode??null);Re(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=PA(e);try{return new ig(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,t){return Vc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=ig.parseLink(t);return Re(i,"argument-error"),Vc._fromEmailAndCode(e,i.code,i.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends UE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Kc{constructor(){super("facebook.com")}static credential(e){return Ga._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ga._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ls.credential(t,i)}catch{return null}}}Ls.GOOGLE_SIGN_IN_METHOD="google.com";Ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Kc{constructor(){super("github.com")}static credential(e){return Ga._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.GITHUB_SIGN_IN_METHOD="github.com";Us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Kc{constructor(){super("twitter.com")}static credential(e,t){return Ga._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return zs.credential(t,i)}catch{return null}}}zs.TWITTER_SIGN_IN_METHOD="twitter.com";zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(r,e){return Qc(r,"POST","/v1/accounts:signUp",ra(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await $r._fromIdTokenResponse(e,i,o),u=Zb(i);return new qa({user:c,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Zb(i);return new qa({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Zb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends Xi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new ed(e,t,i,o)}}function zE(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(r,c,e,i):c})}async function LA(r,e,t=!1){const i=await Pc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return qa._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(r,e,t=!1){const{auth:i}=r;if(jr(i.app))return Promise.reject(qi(i));const o="reauthenticate";try{const c=await Pc(r,zE(i,o,e,r),t);Re(c.idToken,i,"internal-error");const u=tg(c.idToken);Re(u,i,"internal-error");const{sub:m}=u;return Re(r.uid===m,i,"user-mismatch"),qa._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Xr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(r,e,t=!1){if(jr(r.app))return Promise.reject(qi(r));const i="signIn",o=await zE(r,i,e),c=await qa._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(c.user),c}async function zA(r,e){return BE(Ja(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(r){const e=Ja(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BA(r,e,t){if(jr(r.app))return Promise.reject(qi(r));const i=Ja(r),u=await bm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VA).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&GE(r),g}),m=await qa._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(m.user),m}function GA(r,e,t){return jr(r.app)?Promise.reject(qi(r)):zA(hn(r),ml.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&GE(r),i})}function qA(r,e,t,i){return hn(r).onIdTokenChanged(e,t,i)}function HA(r,e,t){return hn(r).beforeAuthStateChanged(e,t)}function FA(r){return hn(r).signOut()}const td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=1e3,$A=10;class HE extends qE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);hA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,$A):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},YA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HE.type="LOCAL";const QA=HE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE extends qE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FE.type="SESSION";const YE=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new xd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(u).map(async y=>y(t.origin,c)),g=await KA(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((m,g)=>{const y=sg("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const N=E;if(N.data.eventId===y)switch(N.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(N.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function JA(r){fi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function WA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function eC(){return $E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebaseLocalStorageDb",tC=1,nd="firebaseLocalStorage",KE="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ed(r,e){return r.transaction([nd],e?"readwrite":"readonly").objectStore(nd)}function nC(){const r=indexedDB.deleteDatabase(QE);return new Xc(r).toPromise()}function _m(){const r=indexedDB.open(QE,tC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(nd,{keyPath:KE})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(nd)?e(i):(i.close(),await nC(),e(await _m()))})})}async function e_(r,e,t){const i=Ed(r,!0).put({[KE]:e,value:t});return new Xc(i).toPromise()}async function rC(r,e){const t=Ed(r,!1).get(e),i=await new Xc(t).toPromise();return i===void 0?null:i.value}function t_(r,e){const t=Ed(r,!0).delete(e);return new Xc(t).toPromise()}const iC=800,sC=3;class XE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>sC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(eC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await WA(),!this.activeServiceWorker)return;this.sender=new XA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await e_(e,td,"1"),await t_(e,td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>e_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>rC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>t_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Ed(o,!1).getAll();return new Xc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XE.type="LOCAL";const aC=XE;new $c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r,e){return e?Gi(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lC(r){return BE(r.auth,new ag(r),r.bypassAuthState)}function cC(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),UA(t,new ag(r),r.bypassAuthState)}async function uC(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),LA(t,new ag(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lC;case"linkViaPopup":case"linkViaRedirect":return uC;case"reauthViaPopup":case"reauthViaRedirect":return cC;default:Xr(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new $c(2e3,1e4);class Zo extends JE{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Yi(this.filter.length===1,"Popup operations only handle one event");const e=sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hC.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="pendingRedirect",Vh=new Map;class fC extends JE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Vh.get(this.auth._key());if(!e){try{const i=await pC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Vh.set(this.auth._key(),e)}return this.bypassAuthState||Vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pC(r,e){const t=yC(e),i=gC(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function mC(r,e){Vh.set(r._key(),e)}function gC(r){return Gi(r._redirectPersistence)}function yC(r){return Ph(dC,r.config.apiKey,r.name)}async function vC(r,e,t=!1){if(jr(r.app))return Promise.reject(qi(r));const i=Ja(r),o=oC(i,e),u=await new fC(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=600*1e3;class _C{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!WE(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(di(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bC&&this.cachedEventUids.clear(),this.cachedEventUids.has(n_(e))}saveEventToCache(e){this.cachedEventUids.add(n_(e)),this.lastProcessedEventTime=Date.now()}}function n_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function WE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(r,e={}){return ia(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TC=/^https?/;async function SC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await EC(r);for(const t of e)try{if(NC(t))return}catch{}Xr(r,"unauthorized-domain")}function NC(r){const e=ym(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!TC.test(t))return!1;if(wC.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new $c(3e4,6e4);function r_(){const r=fi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function CC(r){return new Promise((e,t)=>{var o,c,u;function i(){r_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r_(),t(di(r,"network-request-failed"))},timeout:AC.get()})}if((c=(o=fi().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((u=fi().gapi)!=null&&u.load)i();else{const m=_A("iframefcb");return fi()[m]=()=>{gapi.load?i():t(di(r,"network-request-failed"))},PE(`${bA()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Lh=null,e})}let Lh=null;function RC(r){return Lh=Lh||CC(r),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new $c(5e3,15e3),IC="__/auth/iframe",DC="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MC(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?eg(e,DC):`https://${r.config.authDomain}/${IC}`,i={apiKey:e.apiKey,appName:r.name,v:pl},o=OC.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Yc(i).slice(1)}`}async function PC(r){const e=await RC(r),t=fi().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:MC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const u=di(r,"network-request-failed"),m=fi().setTimeout(()=>{c(u)},kC.get());function g(){fi().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LC=500,UC=600,zC="_blank",BC="http://localhost";class i_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GC(r,e,t,i=LC,o=UC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...VC,width:i.toString(),height:o.toString(),top:c,left:u},y=Dn().toLowerCase();t&&(m=RE(y)?zC:t),AE(y)&&(e=e||BC,g.scrollbars="yes");const _=Object.entries(g).reduce((N,[L,K])=>`${N}${L}=${K},`,"");if(uA(y)&&m!=="_self")return qC(e||"",m),new i_(null);const E=window.open(e||"",m,_);Re(E,r,"popup-blocked");try{E.focus()}catch{}return new i_(E)}function qC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="__/auth/handler",FC="emulator/auth/handler",YC=encodeURIComponent("fac");async function s_(r,e,t,i,o,c){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:pl,eventId:o};if(e instanceof UE){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",kN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Kc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}r.tenantId&&(u.tid=r.tenantId);const m=u;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await r._getAppCheckToken(),y=g?`#${YC}=${encodeURIComponent(g)}`:"";return`${$C(r)}?${Yc(m).slice(1)}${y}`}function $C({config:r}){return r.emulator?eg(r,FC):`https://${r.authDomain}/${HC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="webStorageSupport";class QC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YE,this._completeRedirectFn=vC,this._overrideRedirectResult=mC}async _openPopup(e,t,i,o){var u;Yi((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await s_(e,t,i,ym(),o);return GC(e,c,sg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await s_(e,t,i,ym(),o);return JA(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Yi(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await PC(e),i=new _C(e);return t.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jp,{type:Jp},o=>{var u;const c=(u=o==null?void 0:o[0])==null?void 0:u[Jp];c!==void 0&&t(!!c),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OE()||CE()||ng()}}const KC=QC;var a_="@firebase/auth",o_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WC(r){al(new Ba("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=i.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ME(r)},y=new gA(i,o,c,g);return NA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),al(new Ba("auth-internal",e=>{const t=Ja(e.getProvider("auth").getImmediate());return(i=>new XC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(a_,o_,JC(r)),$s(a_,o_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=300,eR=uE("authIdTokenMaxAge")||ZC;let l_=null;const tR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>eR)return;const o=t==null?void 0:t.token;l_!==o&&(l_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function nR(r=gE()){const e=Wm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=SA(r,{popupRedirectResolver:KC,persistence:[aC,QA,YE]}),i=uE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=tR(c.toString());HA(t,u,()=>u(t.currentUser)),qA(t,m=>u(m))}}const o=lE("auth");return o&&AA(t,`http://${o}`),t}function rR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}yA({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=di("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",rR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WC("Browser");var c_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,ZE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function R(){}R.prototype=A.prototype,C.F=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(P,D,j){for(var k=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)k[rt-2]=arguments[rt];return A.prototype[D].apply(P,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,A,R){R||(R=0);const P=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)P[D]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(D=0;D<16;++D)P[D]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],D=C.g[2];let j=C.g[3],k;k=A+(j^R&(D^j))+P[0]+3614090360&4294967295,A=R+(k<<7&4294967295|k>>>25),k=j+(D^A&(R^D))+P[1]+3905402710&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(R^j&(A^R))+P[2]+606105819&4294967295,D=j+(k<<17&4294967295|k>>>15),k=R+(A^D&(j^A))+P[3]+3250441966&4294967295,R=D+(k<<22&4294967295|k>>>10),k=A+(j^R&(D^j))+P[4]+4118548399&4294967295,A=R+(k<<7&4294967295|k>>>25),k=j+(D^A&(R^D))+P[5]+1200080426&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(R^j&(A^R))+P[6]+2821735955&4294967295,D=j+(k<<17&4294967295|k>>>15),k=R+(A^D&(j^A))+P[7]+4249261313&4294967295,R=D+(k<<22&4294967295|k>>>10),k=A+(j^R&(D^j))+P[8]+1770035416&4294967295,A=R+(k<<7&4294967295|k>>>25),k=j+(D^A&(R^D))+P[9]+2336552879&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(R^j&(A^R))+P[10]+4294925233&4294967295,D=j+(k<<17&4294967295|k>>>15),k=R+(A^D&(j^A))+P[11]+2304563134&4294967295,R=D+(k<<22&4294967295|k>>>10),k=A+(j^R&(D^j))+P[12]+1804603682&4294967295,A=R+(k<<7&4294967295|k>>>25),k=j+(D^A&(R^D))+P[13]+4254626195&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(R^j&(A^R))+P[14]+2792965006&4294967295,D=j+(k<<17&4294967295|k>>>15),k=R+(A^D&(j^A))+P[15]+1236535329&4294967295,R=D+(k<<22&4294967295|k>>>10),k=A+(D^j&(R^D))+P[1]+4129170786&4294967295,A=R+(k<<5&4294967295|k>>>27),k=j+(R^D&(A^R))+P[6]+3225465664&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^R&(j^A))+P[11]+643717713&4294967295,D=j+(k<<14&4294967295|k>>>18),k=R+(j^A&(D^j))+P[0]+3921069994&4294967295,R=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(R^D))+P[5]+3593408605&4294967295,A=R+(k<<5&4294967295|k>>>27),k=j+(R^D&(A^R))+P[10]+38016083&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^R&(j^A))+P[15]+3634488961&4294967295,D=j+(k<<14&4294967295|k>>>18),k=R+(j^A&(D^j))+P[4]+3889429448&4294967295,R=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(R^D))+P[9]+568446438&4294967295,A=R+(k<<5&4294967295|k>>>27),k=j+(R^D&(A^R))+P[14]+3275163606&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^R&(j^A))+P[3]+4107603335&4294967295,D=j+(k<<14&4294967295|k>>>18),k=R+(j^A&(D^j))+P[8]+1163531501&4294967295,R=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(R^D))+P[13]+2850285829&4294967295,A=R+(k<<5&4294967295|k>>>27),k=j+(R^D&(A^R))+P[2]+4243563512&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^R&(j^A))+P[7]+1735328473&4294967295,D=j+(k<<14&4294967295|k>>>18),k=R+(j^A&(D^j))+P[12]+2368359562&4294967295,R=D+(k<<20&4294967295|k>>>12),k=A+(R^D^j)+P[5]+4294588738&4294967295,A=R+(k<<4&4294967295|k>>>28),k=j+(A^R^D)+P[8]+2272392833&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^R)+P[11]+1839030562&4294967295,D=j+(k<<16&4294967295|k>>>16),k=R+(D^j^A)+P[14]+4259657740&4294967295,R=D+(k<<23&4294967295|k>>>9),k=A+(R^D^j)+P[1]+2763975236&4294967295,A=R+(k<<4&4294967295|k>>>28),k=j+(A^R^D)+P[4]+1272893353&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^R)+P[7]+4139469664&4294967295,D=j+(k<<16&4294967295|k>>>16),k=R+(D^j^A)+P[10]+3200236656&4294967295,R=D+(k<<23&4294967295|k>>>9),k=A+(R^D^j)+P[13]+681279174&4294967295,A=R+(k<<4&4294967295|k>>>28),k=j+(A^R^D)+P[0]+3936430074&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^R)+P[3]+3572445317&4294967295,D=j+(k<<16&4294967295|k>>>16),k=R+(D^j^A)+P[6]+76029189&4294967295,R=D+(k<<23&4294967295|k>>>9),k=A+(R^D^j)+P[9]+3654602809&4294967295,A=R+(k<<4&4294967295|k>>>28),k=j+(A^R^D)+P[12]+3873151461&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^R)+P[15]+530742520&4294967295,D=j+(k<<16&4294967295|k>>>16),k=R+(D^j^A)+P[2]+3299628645&4294967295,R=D+(k<<23&4294967295|k>>>9),k=A+(D^(R|~j))+P[0]+4096336452&4294967295,A=R+(k<<6&4294967295|k>>>26),k=j+(R^(A|~D))+P[7]+1126891415&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~R))+P[14]+2878612391&4294967295,D=j+(k<<15&4294967295|k>>>17),k=R+(j^(D|~A))+P[5]+4237533241&4294967295,R=D+(k<<21&4294967295|k>>>11),k=A+(D^(R|~j))+P[12]+1700485571&4294967295,A=R+(k<<6&4294967295|k>>>26),k=j+(R^(A|~D))+P[3]+2399980690&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~R))+P[10]+4293915773&4294967295,D=j+(k<<15&4294967295|k>>>17),k=R+(j^(D|~A))+P[1]+2240044497&4294967295,R=D+(k<<21&4294967295|k>>>11),k=A+(D^(R|~j))+P[8]+1873313359&4294967295,A=R+(k<<6&4294967295|k>>>26),k=j+(R^(A|~D))+P[15]+4264355552&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~R))+P[6]+2734768916&4294967295,D=j+(k<<15&4294967295|k>>>17),k=R+(j^(D|~A))+P[13]+1309151649&4294967295,R=D+(k<<21&4294967295|k>>>11),k=A+(D^(R|~j))+P[4]+4149444226&4294967295,A=R+(k<<6&4294967295|k>>>26),k=j+(R^(A|~D))+P[11]+3174756917&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~R))+P[2]+718787259&4294967295,D=j+(k<<15&4294967295|k>>>17),k=R+(j^(D|~A))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+j&4294967295}i.prototype.v=function(C,A){A===void 0&&(A=C.length);const R=A-this.blockSize,P=this.C;let D=this.h,j=0;for(;j<A;){if(D==0)for(;j<=R;)o(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<A;)if(P[D++]=C.charCodeAt(j++),D==this.blockSize){o(this,P),D=0;break}}else for(;j<A;)if(P[D++]=C[j++],D==this.blockSize){o(this,P),D=0;break}}this.h=D,this.o+=A},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,R=0;R<4;++R)for(let P=0;P<32;P+=8)C[A++]=this.g[R]>>>P&255;return C};function c(C,A){var R=m;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function u(C,A){this.h=A;const R=[];let P=!0;for(let D=C.length-1;D>=0;D--){const j=C[D]|0;P&&j==A||(R[D]=j,P=!1)}this.g=R}var m={};function g(C){return-128<=C&&C<128?c(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return re(y(-C));const A=[];let R=1;for(let P=0;C>=R;P++)A[P]=C/R|0,R*=4294967296;return new u(A,0)}function _(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return re(_(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let P=E;for(let j=0;j<C.length;j+=8){var D=Math.min(8,C.length-j);const k=parseInt(C.substring(j,j+D),A);D<8?(D=y(Math.pow(A,D)),P=P.j(D).add(y(k))):(P=P.j(R),P=P.add(y(k)))}return P}var E=g(0),N=g(1),L=g(16777216);r=u.prototype,r.m=function(){if(ne(this))return-re(this).m();let C=0,A=1;for(let R=0;R<this.g.length;R++){const P=this.i(R);C+=(P>=0?P:4294967296+P)*A,A*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(K(this))return"0";if(ne(this))return"-"+re(this).toString(C);const A=y(Math.pow(C,6));var R=this;let P="";for(;;){const D=_e(R,A).g;R=me(R,D.j(A));let j=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=D,K(R))return j+P;for(;j.length<6;)j="0"+j;P=j+P}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function K(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function ne(C){return C.h==-1}r.l=function(C){return C=me(this,C),ne(C)?-1:K(C)?0:1};function re(C){const A=C.g.length,R=[];for(let P=0;P<A;P++)R[P]=~C.g[P];return new u(R,~C.h).add(N)}r.abs=function(){return ne(this)?re(this):this},r.add=function(C){const A=Math.max(this.g.length,C.g.length),R=[];let P=0;for(let D=0;D<=A;D++){let j=P+(this.i(D)&65535)+(C.i(D)&65535),k=(j>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);P=k>>>16,j&=65535,k&=65535,R[D]=k<<16|j}return new u(R,R[R.length-1]&-2147483648?-1:0)};function me(C,A){return C.add(re(A))}r.j=function(C){if(K(this)||K(C))return E;if(ne(this))return ne(C)?re(this).j(re(C)):re(re(this).j(C));if(ne(C))return re(this.j(re(C)));if(this.l(L)<0&&C.l(L)<0)return y(this.m()*C.m());const A=this.g.length+C.g.length,R=[];for(var P=0;P<2*A;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<C.g.length;D++){const j=this.i(P)>>>16,k=this.i(P)&65535,rt=C.i(D)>>>16,bt=C.i(D)&65535;R[2*P+2*D]+=k*bt,we(R,2*P+2*D),R[2*P+2*D+1]+=j*bt,we(R,2*P+2*D+1),R[2*P+2*D+1]+=k*rt,we(R,2*P+2*D+1),R[2*P+2*D+2]+=j*rt,we(R,2*P+2*D+2)}for(C=0;C<A;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=A;C<2*A;C++)R[C]=0;return new u(R,0)};function we(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function ve(C,A){this.g=C,this.h=A}function _e(C,A){if(K(A))throw Error("division by zero");if(K(C))return new ve(E,E);if(ne(C))return A=_e(re(C),A),new ve(re(A.g),re(A.h));if(ne(A))return A=_e(C,re(A)),new ve(re(A.g),A.h);if(C.g.length>30){if(ne(C)||ne(A))throw Error("slowDivide_ only works with positive integers.");for(var R=N,P=A;P.l(C)<=0;)R=Ue(R),P=Ue(P);var D=Ae(R,1),j=Ae(P,1);for(P=Ae(P,2),R=Ae(R,2);!K(P);){var k=j.add(P);k.l(C)<=0&&(D=D.add(R),j=k),P=Ae(P,1),R=Ae(R,1)}return A=me(C,D.j(A)),new ve(D,A)}for(D=E;C.l(A)>=0;){for(R=Math.max(1,Math.floor(C.m()/A.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),j=y(R),k=j.j(A);ne(k)||k.l(C)>0;)R-=P,j=y(R),k=j.j(A);K(j)&&(j=N),D=D.add(j),C=me(C,k)}return new ve(D,C)}r.B=function(C){return _e(this,C).h},r.and=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let P=0;P<A;P++)R[P]=this.i(P)&C.i(P);return new u(R,this.h&C.h)},r.or=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let P=0;P<A;P++)R[P]=this.i(P)|C.i(P);return new u(R,this.h|C.h)},r.xor=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let P=0;P<A;P++)R[P]=this.i(P)^C.i(P);return new u(R,this.h^C.h)};function Ue(C){const A=C.g.length+1,R=[];for(let P=0;P<A;P++)R[P]=C.i(P)<<1|C.i(P-1)>>>31;return new u(R,C.h)}function Ae(C,A){const R=A>>5;A%=32;const P=C.g.length-R,D=[];for(let j=0;j<P;j++)D[j]=A>0?C.i(j+R)>>>A|C.i(j+R+1)<<32-A:C.i(j+R);return new u(D,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ZE=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=_,Qs=u}).apply(typeof c_<"u"?c_:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ew,Ec,tw,Uh,xm,nw,rw,iw;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var v=0;v<h.length;++v){var x=h[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function o(h,v){if(v)e:{var x=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var U=h[S];if(!(U in x))break e;x=x[U]}h=h[h.length-1],S=x[h],v=v(S),v!=S&&v!=null&&e(x,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var x=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&x.push([S,v[S]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,x){return h.call.apply(h.bind,arguments)}function y(h,v,x){return y=g,y.apply(null,arguments)}function _(h,v){var x=Array.prototype.slice.call(arguments,1);return function(){var S=x.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function E(h,v){function x(){}x.prototype=v.prototype,h.Z=v.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(S,U,H){for(var ae=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ae[Ve-2]=arguments[Ve];return v.prototype[U].apply(S,ae)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function L(h){const v=h.length;if(v>0){const x=Array(v);for(let S=0;S<v;S++)x[S]=h[S];return x}return[]}function K(h,v){for(let S=1;S<arguments.length;S++){const U=arguments[S];var x=typeof U;if(x=x!="object"?x:U?Array.isArray(U)?"array":x:"null",x=="array"||x=="object"&&typeof U.length=="number"){x=h.length||0;const H=U.length||0;h.length=x+H;for(let ae=0;ae<H;ae++)h[x+ae]=U[ae]}else h.push(U)}}class ne{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function re(h){u.setTimeout(()=>{throw h},0)}function me(){var h=C;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class we{constructor(){this.h=this.g=null}add(v,x){const S=ve.get();S.set(v,x),this.h?this.h.next=S:this.g=S,this.h=S}}var ve=new ne(()=>new _e,h=>h.reset());class _e{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Ae=!1,C=new we,A=()=>{const h=Promise.resolve(void 0);Ue=()=>{h.then(R)}};function R(){for(var h;h=me();){try{h.h.call(h.g)}catch(x){re(x)}var v=ve;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Ae=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};u.addEventListener("test",x,v),u.removeEventListener("test",x,v)}catch{}return h})();function k(h){return/^[\s\xa0]*$/.test(h)}function rt(h,v){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(rt,D),rt.prototype.init=function(h,v){const x=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(x=="mouseover"?v=h.fromElement:x=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function se(h,v,x,S,U){this.listener=h,this.proxy=null,this.src=v,this.type=x,this.capture=!!S,this.ha=U,this.key=++Y,this.da=this.fa=!1}function xe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,v,x){for(const S in h)v.call(x,h[S],S,h)}function Ge(h,v){for(const x in h)v.call(void 0,h[x],x,h)}function M(h){const v={};for(const x in h)v[x]=h[x];return v}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,v){let x,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(x in S)h[x]=S[x];for(let H=0;H<$.length;H++)x=$[H],Object.prototype.hasOwnProperty.call(S,x)&&(h[x]=S[x])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,v,x,S,U){const H=h.toString();h=this.g[H],h||(h=this.g[H]=[],this.h++);const ae=De(h,v,S,U);return ae>-1?(v=h[ae],x||(v.fa=!1)):(v=new se(v,this.src,H,!!S,U),v.fa=x,h.push(v)),v};function Ce(h,v){const x=v.type;if(x in h.g){var S=h.g[x],U=Array.prototype.indexOf.call(S,v,void 0),H;(H=U>=0)&&Array.prototype.splice.call(S,U,1),H&&(xe(v),h.g[x].length==0&&(delete h.g[x],h.h--))}}function De(h,v,x,S){for(let U=0;U<h.length;++U){const H=h[U];if(!H.da&&H.listener==v&&H.capture==!!x&&H.ha==S)return U}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Nt={};function X(h,v,x,S,U){if(Array.isArray(v)){for(let H=0;H<v.length;H++)X(h,v[H],x,S,U);return null}return x=oa(x),h&&h[bt]?h.J(v,x,m(S)?!!S.capture:!1,U):ue(h,v,x,!1,S,U)}function ue(h,v,x,S,U,H){if(!v)throw Error("Invalid event type");const ae=m(U)?!!U.capture:!!U;let Ve=an(h);if(Ve||(h[qe]=Ve=new he(h)),x=Ve.add(v,x,S,ae,H),x.proxy)return x;if(S=Me(),x.proxy=S,S.src=h,S.listener=x,h.addEventListener)j||(U=ae),U===void 0&&(U=!1),h.addEventListener(v.toString(),S,U);else if(h.attachEvent)h.attachEvent(xn(v.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Me(){function h(x){return v.call(h.src,h.listener,x)}const v=Ye;return h}function Et(h,v,x,S,U){if(Array.isArray(v))for(var H=0;H<v.length;H++)Et(h,v[H],x,S,U);else S=m(S)?!!S.capture:!!S,x=oa(x),h&&h[bt]?(h=h.i,H=String(v).toString(),H in h.g&&(v=h.g[H],x=De(v,x,S,U),x>-1&&(xe(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete h.g[H],h.h--)))):h&&(h=an(h))&&(v=h.g[v.toString()],h=-1,v&&(h=De(v,x,S,U)),(x=h>-1?v[h]:null)&&Yt(x))}function Yt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[bt])Ce(v.i,h);else{var x=h.type,S=h.proxy;v.removeEventListener?v.removeEventListener(x,S,h.capture):v.detachEvent?v.detachEvent(xn(x),S):v.addListener&&v.removeListener&&v.removeListener(S),(x=an(v))?(Ce(x,h),x.h==0&&(x.src=null,v[qe]=null)):xe(h)}}}function xn(h){return h in Nt?Nt[h]:Nt[h]="on"+h}function Ye(h,v){if(h.da)h=!0;else{v=new rt(v,this);const x=h.listener,S=h.ha||h.src;h.fa&&Yt(h),h=x.call(S,v)}return h}function an(h){return h=h[qe],h instanceof he?h:null}var Wn="__closure_events_fn_"+(Math.random()*1e9>>>0);function oa(h){return typeof h=="function"?h:(h[Wn]||(h[Wn]=function(v){return h.handleEvent(v)}),h[Wn])}function At(){P.call(this),this.i=new he(this),this.M=this,this.G=null}E(At,P),At.prototype[bt]=!0,At.prototype.removeEventListener=function(h,v,x,S){Et(this,h,v,x,S)};function Dt(h,v){var x,S=h.G;if(S)for(x=[];S;S=S.G)x.push(S);if(h=h.M,S=v.type||v,typeof v=="string")v=new D(v,h);else if(v instanceof D)v.target=v.target||h;else{var U=v;v=new D(S,h),oe(v,U)}U=!0;let H,ae;if(x)for(ae=x.length-1;ae>=0;ae--)H=v.g=x[ae],U=Mr(H,S,!0,v)&&U;if(H=v.g=h,U=Mr(H,S,!0,v)&&U,U=Mr(H,S,!1,v)&&U,x)for(ae=0;ae<x.length;ae++)H=v.g=x[ae],U=Mr(H,S,!1,v)&&U}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const x=h.g[v];for(let S=0;S<x.length;S++)xe(x[S]);delete h.g[v],h.h--}}this.G=null},At.prototype.J=function(h,v,x,S){return this.i.add(String(h),v,!1,x,S)},At.prototype.K=function(h,v,x,S){return this.i.add(String(h),v,!0,x,S)};function Mr(h,v,x,S){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let U=!0;for(let H=0;H<v.length;++H){const ae=v[H];if(ae&&!ae.da&&ae.capture==x){const Ve=ae.listener,Bt=ae.ha||ae.src;ae.fa&&Ce(h.i,ae),U=Ve.call(Bt,S)!==!1&&U}}return U&&!S.defaultPrevented}function yr(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(h,v||0)}function vr(h){h.g=yr(()=>{h.g=null,h.i&&(h.i=!1,vr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ee extends P{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:vr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function on(h){P.call(this),this.h=h,this.g={}}E(on,P);var la=[];function Pr(h){Pe(h.g,function(v,x){this.g.hasOwnProperty(x)&&Yt(v)},h),h.g={}}on.prototype.N=function(){on.Z.N.call(this),Pr(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=u.JSON.stringify,Ji=u.JSON.parse,vi=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Zn(){}function to(){}var En={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){D.call(this,"d")}E($t,D);function wn(){D.call(this,"c")}E(wn,D);var ce={},no=null;function bi(){return no=no||new At}ce.Ia="serverreachability";function ro(h){D.call(this,ce.Ia,h)}E(ro,D);function er(h){const v=bi();Dt(v,new ro(v))}ce.STAT_EVENT="statevent";function Vr(h,v){D.call(this,ce.STAT_EVENT,h),this.stat=v}E(Vr,D);function Ct(h){const v=bi();Dt(v,new Vr(v,h))}ce.Ja="timingevent";function br(h,v){D.call(this,ce.Ja,h),this.size=v}E(br,D);function _r(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function Tn(){this.g=!0}Tn.prototype.ua=function(){this.g=!1};function io(h,v,x,S,U,H){h.info(function(){if(h.g)if(H){var ae="",Ve=H.split("&");for(let it=0;it<Ve.length;it++){var Bt=Ve[it].split("=");if(Bt.length>1){const kt=Bt[0];Bt=Bt[1];const Tr=kt.split("_");ae=Tr.length>=2&&Tr[1]=="type"?ae+(kt+"="+Bt+"&"):ae+(kt+"=redacted&")}}}else ae=null;else ae=H;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+v+`
`+x+`
`+ae})}function so(h,v,x,S,U,H,ae){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+v+`
`+x+`
`+H+" "+ae})}function tr(h,v,x,S){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+ao(h,x)+(S?" "+S:"")})}function Wr(h,v){h.info(function(){return"TIMEOUT: "+v})}Tn.prototype.info=function(){};function ao(h,v){if(!h.g)return v;if(!v)return null;try{const H=JSON.parse(v);if(H){for(h=0;h<H.length;h++)if(Array.isArray(H[h])){var x=H[h];if(!(x.length<2)){var S=x[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ae=1;ae<S.length;ae++)S[ae]=""}}}}return jn(H)}catch{return v}}var Zr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ca;function _i(){}E(_i,Zn),_i.prototype.g=function(){return new XMLHttpRequest},ca=new _i;function nr(h){return encodeURIComponent(String(h))}function oo(h){var v=1;h=h.split(":");const x=[];for(;v>0&&h.length;)x.push(h.shift()),v--;return h.length&&x.push(h.join(":")),x}function rr(h,v,x,S){this.j=h,this.i=v,this.l=x,this.S=S||1,this.V=new on(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}var mt={},jt={};function sr(h,v,x){h.M=1,h.A=ua(Qt(v)),h.u=x,h.R=!0,Zi(h,null)}function Zi(h,v){h.F=Date.now(),Bn(h),h.B=Qt(h.A);var x=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),uo(x.i,"t",S),h.C=0,x=h.j.L,h.h=new ir,h.g=gu(h.j,x?v:null,!h.u),h.P>0&&(h.O=new Ee(y(h.Y,h,h.g),h.P)),v=h.V,x=h.g,S=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(la[0]=U.toString()),U=la);for(let H=0;H<U.length;H++){const ae=X(x,U[H],S||v.handleEvent,!1,v.h||v);if(!ae)break;v.g[ae.key]=ae}v=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),er(),io(h.i,h.v,h.B,h.l,h.S,h.u)}rr.prototype.ba=function(h){h=h.target;const v=this.O;v&&Br(h)==3?v.j():this.Y(h)},rr.prototype.Y=function(h){try{if(h==this.g)e:{const Ve=Br(this.g),Bt=this.g.ya(),it=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||fn(this.g)))){this.K||Ve!=4||Bt==7||(Bt==8||it<=0?er(3):er(2)),ar(this);var v=this.g.ca();this.X=v;var x=xr(this);if(this.o=v==200,so(this.i,this.v,this.B,this.l,this.S,Ve,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(S)){var H=S;break t}}H=null}if(h=H)tr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,On(this,h);else{this.o=!1,this.m=3,Ct(12),Sn(this),dn(this);break e}}if(this.R){h=!0;let kt;for(;!this.K&&this.C<x.length;)if(kt=es(this,x),kt==jt){Ve==4&&(this.m=4,Ct(14),h=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==mt){this.m=4,Ct(15),tr(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else tr(this.i,this.l,kt,null),On(this,kt);if(Lr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||x.length!=0||this.h.h||(this.m=1,Ct(16),h=!1),this.o=this.o&&h,!h)tr(this.i,this.l,x,"[Invalid Chunked Response]"),Sn(this),dn(this);else if(x.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Rl(ae),ae.P=!0,Ct(11))}}else tr(this.i,this.l,x,null),On(this,x);Ve==4&&Sn(this),this.o&&!this.K&&(Ve==4?du(this.j,this):(this.o=!1,Bn(this)))}else wi(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Sn(this),dn(this)}}}catch{}finally{}};function xr(h){if(!Lr(h))return h.g.la();const v=fn(h.g);if(v==="")return"";let x="";const S=v.length,U=Br(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Sn(h),dn(h),"";h.h.i=new u.TextDecoder}for(let H=0;H<S;H++)h.h.h=!0,x+=h.h.i.decode(v[H],{stream:!(U&&H==S-1)});return v.length=0,h.h.g+=x,h.C=0,h.h.g}function Lr(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function es(h,v){var x=h.C,S=v.indexOf(`
`,x);return S==-1?jt:(x=Number(v.substring(x,S)),isNaN(x)?mt:(S+=1,S+x>v.length?jt:(v=v.slice(S,S+x),h.C=S+x,v)))}rr.prototype.cancel=function(){this.K=!0,Sn(this)};function Bn(h){h.T=Date.now()+h.H,xi(h,h.H)}function xi(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=_r(y(h.aa,h),v)}function ar(h){h.D&&(u.clearTimeout(h.D),h.D=null)}rr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Wr(this.i,this.B),this.M!=2&&(er(),Ct(17)),Sn(this),this.m=2,dn(this)):xi(this,this.T-h)};function dn(h){h.j.I==0||h.K||du(h.j,h)}function Sn(h){ar(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Pr(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function On(h,v){try{var x=h.j;if(x.I!=0&&(x.g==h||G(x.h,h))){if(!h.L&&G(x.h,h)&&x.I==3){try{var S=x.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)go(x),us(x);else break e;ya(x),Ct(18)}}else x.xa=U[1],0<x.xa-x.K&&U[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=_r(y(x.Va,x),6e3));J(x.h)<=1&&x.ta&&(x.ta=void 0)}else si(x,11)}else if((h.L||x.g==h)&&go(x),!k(v))for(U=x.Ba.g.parse(v),v=0;v<U.length;v++){let it=U[v];const kt=it[0];if(!(kt<=x.K))if(x.K=kt,it=it[1],x.I==2)if(it[0]=="c"){x.M=it[1],x.ba=it[2];const Tr=it[3];Tr!=null&&(x.ka=Tr,x.j.info("VER="+x.ka));const ai=it[4];ai!=null&&(x.za=ai,x.j.info("SVER="+x.za));const Gr=it[5];Gr!=null&&typeof Gr=="number"&&Gr>0&&(S=1.5*Gr,x.O=S,x.j.info("backChannelRequestTimeoutMs_="+S)),S=x;const qr=h.g;if(qr){const va=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var H=S.h;H.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(le(H,H.h),H.h=null))}if(S.G){const yo=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(S.wa=yo,lt(S.J,S.G,yo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),S=x;var ae=h;if(S.na=mu(S,S.L?S.ba:null,S.W),ae.L){ye(S.h,ae);var Ve=ae,Bt=S.O;Bt&&(Ve.H=Bt),Ve.D&&(ar(Ve),Bn(Ve)),S.g=ae}else uu(S);x.i.length>0&&ii(x)}else it[0]!="stop"&&it[0]!="close"||si(x,7);else x.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?si(x,7):Al(x):it[0]!="noop"&&x.l&&x.l.qa(it),x.A=0)}}er(4)}catch{}}var Rt=class{constructor(h,v){this.g=h,this.map=v}};function ts(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function T(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function J(h){return h.h?1:h.g?h.g.size:0}function G(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function le(h,v){h.g?h.g.add(v):h.h=v}function ye(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}ts.prototype.cancel=function(){if(this.i=Pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pt(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const x of h.g.values())v=v.concat(x.G);return v}return L(h.i)}var ns=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lo(h,v){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const S=h[x].indexOf("=");let U,H=null;S>=0?(U=h[x].substring(0,S),H=h[x].substring(S+1)):U=h[x],v(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function or(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof or?(this.l=h.l,ln(this,h.j),this.o=h.o,this.g=h.g,rs(this,h.u),this.h=h.h,_l(this,lu(h.i)),this.m=h.m):h&&(v=String(h).match(ns))?(this.l=!1,ln(this,v[1]||"",!0),this.o=ei(v[2]||""),this.g=ei(v[3]||"",!0),rs(this,v[4]),this.h=ei(v[5]||"",!0),_l(this,v[6]||"",!0),this.m=ei(v[7]||"")):(this.l=!1,this.i=new ss(null,this.l))}or.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(ha(v,co,!0),":");var x=this.g;return(x||v=="file")&&(h.push("//"),(v=this.o)&&h.push(ha(v,co,!0),"@"),h.push(nr(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(ha(x,x.charAt(0)=="/"?xl:su,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",ha(x,au)),h.join("")},or.prototype.resolve=function(h){const v=Qt(this);let x=!!h.j;x?ln(v,h.j):x=!!h.o,x?v.o=h.o:x=!!h.g,x?v.g=h.g:x=h.u!=null;var S=h.h;if(x)rs(v,h.u);else if(x=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=v.h.lastIndexOf("/");U!=-1&&(S=v.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let ae=0;ae<U.length;){const Ve=U[ae++];Ve=="."?S&&ae==U.length&&H.push(""):Ve==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ae==U.length&&H.push("")):(H.push(Ve),S=!0)}S=H.join("/")}else S=U}return x?v.h=S:x=h.i.toString()!=="",x?_l(v,lu(h.i)):x=!!h.m,x&&(v.m=h.m),v};function Qt(h){return new or(h)}function ln(h,v,x){h.j=x?ei(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function rs(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function _l(h,v,x){v instanceof ss?(h.i=v,ho(h.i,h.l)):(x||(v=ha(v,is)),h.i=new ss(v,h.l))}function lt(h,v,x){h.i.set(v,x)}function ua(h){return lt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ei(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ha(h,v,x){return typeof h=="string"?(h=encodeURI(h).replace(v,Gn),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var co=/[#\/\?@]/g,su=/[#\?:]/g,xl=/[#\?]/g,is=/[#\?@]/g,au=/#/g;function ss(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function qn(h){h.g||(h.g=new Map,h.h=0,h.i&&lo(h.i,function(v,x){h.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}r=ss.prototype,r.add=function(h,v){qn(this),this.i=null,h=as(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(v),this.h+=1,this};function ou(h,v){qn(h),v=as(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function El(h,v){return qn(h),v=as(h,v),h.g.has(v)}r.forEach=function(h,v){qn(this),this.g.forEach(function(x,S){x.forEach(function(U){h.call(v,U,S,this)},this)},this)};function wl(h,v){qn(h);let x=[];if(typeof v=="string")El(h,v)&&(x=x.concat(h.g.get(as(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)x=x.concat(h[v]);return x}r.set=function(h,v){return qn(this),this.i=null,h=as(this,h),El(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=wl(this,h),h.length>0?String(h[0]):v):v};function uo(h,v,x){ou(h,v),x.length>0&&(h.i=null,h.g.set(as(h,v),L(x)),h.h+=x.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var x=v[S];const U=nr(x);x=wl(this,x);for(let H=0;H<x.length;H++){let ae=U;x[H]!==""&&(ae+="="+nr(x[H])),h.push(ae)}}return this.i=h.join("&")};function lu(h){const v=new ss;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function as(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function ho(h,v){v&&!h.j&&(qn(h),h.i=null,h.g.forEach(function(x,S){const U=S.toLowerCase();S!=U&&(ou(this,S),uo(this,U,x))},h)),h.j=v}function Ur(h,v){const x=new Tn;if(u.Image){const S=new Image;S.onload=_(Er,x,"TestLoadImage: loaded",!0,v,S),S.onerror=_(Er,x,"TestLoadImage: error",!1,v,S),S.onabort=_(Er,x,"TestLoadImage: abort",!1,v,S),S.ontimeout=_(Er,x,"TestLoadImage: timeout",!1,v,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else v(!1)}function Tl(h,v){const x=new Tn,S=new AbortController,U=setTimeout(()=>{S.abort(),Er(x,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:S.signal}).then(H=>{clearTimeout(U),H.ok?Er(x,"TestPingServer: ok",!0,v):Er(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(U),Er(x,"TestPingServer: error",!1,v)})}function Er(h,v,x,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(x)}catch{}}function os(){this.g=new vi}function ti(h){this.i=h.Sb||null,this.h=h.ab||!1}E(ti,Zn),ti.prototype.g=function(){return new da(this.i,this.h)};function da(h,v){At.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(da,At),r=da.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,zr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function fo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ls(this):zr(this),this.readyState==3&&fo(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,ls(this))},r.Na=function(h){this.g&&(this.response=h,ls(this))},r.ga=function(){this.g&&ls(this)};function ls(h){h.readyState=4,h.l=null,h.j=null,h.B=null,zr(h)}r.setRequestHeader=function(h,v){this.A.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=v.next();return h.join(`\r
`)};function zr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function wr(h){let v="";return Pe(h,function(x,S){v+=S,v+=":",v+=x,v+=`\r
`}),v}function fa(h,v,x){e:{for(S in x){var S=!1;break e}S=!0}S||(x=wr(x),typeof h=="string"?x!=null&&nr(x):lt(h,v,x))}function ht(h){At.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ht,At);var ni=/^https?$/i,Sl=["POST","PUT"];r=ht.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,v,x,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ca.g(),this.g.onreadystatechange=N(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(H){pa(this,H);return}if(h=x||"",x=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)x.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())x.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(x.keys()).find(H=>H.toLowerCase()=="content-type"),U=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Sl,v,void 0)>=0)||S||U||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ae]of x)this.g.setRequestHeader(H,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(H){pa(this,H)}};function pa(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Nl(h),Ei(h)}function Nl(h){h.A||(h.A=!0,Dt(h,"complete"),Dt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Dt(this,"complete"),Dt(this,"abort"),Ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),ht.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ma(this):this.Xa())},r.Xa=function(){ma(this)};function ma(h){if(h.h&&typeof c<"u"){if(h.v&&Br(h)==4)setTimeout(h.Ca.bind(h),0);else if(Dt(h,"readystatechange"),Br(h)==4){h.h=!1;try{const H=h.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var S;if(S=H===0){let ae=String(h.D).match(ns)[1]||null;!ae&&u.self&&u.self.location&&(ae=u.self.location.protocol.slice(0,-1)),S=!ni.test(ae?ae.toLowerCase():"")}x=S}if(x)Dt(h,"complete"),Dt(h,"success");else{h.o=6;try{var U=Br(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",Nl(h)}}finally{Ei(h)}}}}function Ei(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,v||Dt(h,"ready");try{x.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Br(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Br(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Ji(v)}};function fn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function wi(h){const v={};h=(h.g&&Br(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(k(h[S]))continue;var x=oo(h[S]);const U=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const H=v[U]||[];v[U]=H,H.push(x)}Ge(v,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ri(h,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||v}function cs(h){this.za=0,this.i=[],this.j=new Tn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ri("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ri("baseRetryDelayMs",5e3,h),this.Za=ri("retryDelaySeedMs",1e4,h),this.Ta=ri("forwardChannelMaxRetries",2,h),this.va=ri("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ts(h&&h.concurrentRequestLimit),this.Ba=new os,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=cs.prototype,r.ka=8,r.I=1,r.connect=function(h,v,x,S){Ct(0),this.W=h,this.H=v||{},x&&S!==void 0&&(this.H.OSID=x,this.H.OAID=S),this.F=this.X,this.J=mu(this,null,this.W),ii(this)};function Al(h){if(po(h),h.I==3){var v=h.V++,x=Qt(h.J);if(lt(x,"SID",h.M),lt(x,"RID",v),lt(x,"TYPE","terminate"),ga(h,x),v=new rr(h,h.j,v),v.M=2,v.A=ua(Qt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=v.A,x=!0),x||(v.g=gu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Bn(v)}pu(h)}function us(h){h.g&&(Rl(h),h.g.cancel(),h.g=null)}function po(h){us(h),h.v&&(u.clearTimeout(h.v),h.v=null),go(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function ii(h){if(!T(h.h)&&!h.m){h.m=!0;var v=h.Ea;Ue||A(),Ae||(Ue(),Ae=!0),C.add(v,h),h.D=0}}function mo(h,v){return J(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=_r(y(h.Ea,h,v),fu(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new rr(this,this.j,h);let H=this.o;if(this.U&&(H?(H=M(H),oe(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var S=this.i[x];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=cu(this,U,v),x=Qt(this.J),lt(x,"RID",h),lt(x,"CVER",22),this.G&&lt(x,"X-HTTP-Session-Id",this.G),ga(this,x),H&&(this.R?v="headers="+nr(wr(H))+"&"+v:this.u&&fa(x,this.u,H)),le(this.h,U),this.Ra&&lt(x,"TYPE","init"),this.S?(lt(x,"$req",v),lt(x,"SID","null"),U.U=!0,sr(U,x,null)):sr(U,x,v),this.I=2}}else this.I==3&&(h?Cl(this,h):this.i.length==0||T(this.h)||Cl(this))};function Cl(h,v){var x;v?x=v.l:x=h.V++;const S=Qt(h.J);lt(S,"SID",h.M),lt(S,"RID",x),lt(S,"AID",h.K),ga(h,S),h.u&&h.o&&fa(S,h.u,h.o),x=new rr(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),v&&(h.i=v.G.concat(h.i)),v=cu(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),le(h.h,x),sr(x,S,v)}function ga(h,v){h.H&&Pe(h.H,function(x,S){lt(v,S,x)}),h.l&&Pe({},function(x,S){lt(v,S,x)})}function cu(h,v,x){x=Math.min(h.i.length,x);const S=h.l?y(h.l.Ka,h.l,h):null;e:{var U=h.i;let Ve=-1;for(;;){const Bt=["count="+x];Ve==-1?x>0?(Ve=U[0].g,Bt.push("ofs="+Ve)):Ve=0:Bt.push("ofs="+Ve);let it=!0;for(let kt=0;kt<x;kt++){var H=U[kt].g;const Tr=U[kt].map;if(H-=Ve,H<0)Ve=Math.max(0,U[kt].g-100),it=!1;else try{H="req"+H+"_"||"";try{var ae=Tr instanceof Map?Tr:Object.entries(Tr);for(const[ai,Gr]of ae){let qr=Gr;m(Gr)&&(qr=jn(Gr)),Bt.push(H+ai+"="+encodeURIComponent(qr))}}catch(ai){throw Bt.push(H+"type="+encodeURIComponent("_badmap")),ai}}catch{S&&S(Tr)}}if(it){ae=Bt.join("&");break e}}ae=void 0}return h=h.i.splice(0,x),v.G=h,ae}function uu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Ue||A(),Ae||(Ue(),Ae=!0),C.add(v,h),h.A=0}}function ya(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=_r(y(h.Da,h),fu(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,hu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=_r(y(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),us(this),hu(this))};function Rl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function hu(h){h.g=new rr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Qt(h.na);lt(v,"RID","rpc"),lt(v,"SID",h.M),lt(v,"AID",h.K),lt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&lt(v,"TO",h.ia),lt(v,"TYPE","xmlhttp"),ga(h,v),h.u&&h.o&&fa(v,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=ua(Qt(v)),x.u=null,x.R=!0,Zi(x,h)}r.Va=function(){this.C!=null&&(this.C=null,us(this),ya(this),Ct(19))};function go(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function du(h,v){var x=null;if(h.g==v){go(h),Rl(h),h.g=null;var S=2}else if(G(h.h,v))x=v.G,ye(h.h,v),S=1;else return;if(h.I!=0){if(v.o)if(S==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var U=h.D;S=bi(),Dt(S,new br(S,x)),ii(h)}else uu(h);else if(U=v.m,U==3||U==0&&v.X>0||!(S==1&&mo(h,v)||S==2&&ya(h)))switch(x&&x.length>0&&(v=h.h,v.i=v.i.concat(x)),U){case 1:si(h,5);break;case 4:si(h,10);break;case 3:si(h,6);break;default:si(h,2)}}}function fu(h,v){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*v}function si(h,v){if(h.j.info("Error code "+v),v==2){var x=y(h.bb,h),S=h.Ua;const U=!S;S=new or(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ln(S,"https"),ua(S),U?Ur(S.toString(),x):Tl(S.toString(),x)}else Ct(2);h.I=0,h.l&&h.l.pa(v),pu(h),po(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function pu(h){if(h.I=0,h.ja=[],h.l){const v=Pt(h.h);(v.length!=0||h.i.length!=0)&&(K(h.ja,v),K(h.ja,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.oa()}}function mu(h,v,x){var S=x instanceof or?Qt(x):new or(x);if(S.g!="")v&&(S.g=v+"."+S.g),rs(S,S.u);else{var U=u.location;S=U.protocol,v=v?v+"."+U.hostname:U.hostname,U=+U.port;const H=new or(null);S&&ln(H,S),v&&(H.g=v),U&&rs(H,U),x&&(H.h=x),S=H}return x=h.G,v=h.wa,x&&v&&lt(S,x,v),lt(S,"VER",h.ka),ga(h,S),S}function gu(h,v,x){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new ht(new ti({ab:x})):new ht(h.ma),v.Fa(h.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function yu(){}r=yu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function hs(){}hs.prototype.g=function(h,v){return new Mn(h,v)};function Mn(h,v){At.call(this),this.g=new cs(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!k(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!k(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Ti(this)}E(Mn,At),Mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){Al(this.g)},Mn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=jn(h),h=x);v.i.push(new Rt(v.Ya++,h)),v.I==3&&ii(v)},Mn.prototype.N=function(){this.g.l=null,delete this.j,Al(this.g),delete this.g,Mn.Z.N.call(this)};function vu(h){$t.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const x in v){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E(vu,$t);function bu(){wn.call(this),this.status=1}E(bu,wn);function Ti(h){this.g=h}E(Ti,yu),Ti.prototype.ra=function(){Dt(this.g,"a")},Ti.prototype.qa=function(h){Dt(this.g,new vu(h))},Ti.prototype.pa=function(h){Dt(this.g,new bu)},Ti.prototype.oa=function(){Dt(this.g,"b")},hs.prototype.createWebChannel=hs.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,iw=function(){return new hs},rw=function(){return bi()},nw=ce,xm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zr.NO_ERROR=0,Zr.TIMEOUT=8,Zr.HTTP_ERROR=6,Uh=Zr,Wi.COMPLETE="complete",tw=Wi,to.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",At.prototype.listen=At.prototype.J,Ec=to,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,ew=ht}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl="12.9.0";function iR(r){gl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=new Xm("@firebase/firestore");function Ko(){return Ha.logLevel}function fe(r,...e){if(Ha.logLevel<=Ke.DEBUG){const t=e.map(og);Ha.debug(`Firestore (${gl}): ${r}`,...t)}}function $i(r,...e){if(Ha.logLevel<=Ke.ERROR){const t=e.map(og);Ha.error(`Firestore (${gl}): ${r}`,...t)}}function Fa(r,...e){if(Ha.logLevel<=Ke.WARN){const t=e.map(og);Ha.warn(`Firestore (${gl}): ${r}`,...t)}}function og(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,sw(r,i,t)}function sw(r,e,t){let i=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw $i(i),new Error(i)}function ot(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||sw(e,o,i)}function Oe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Xi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class aR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class oR{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let c=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Hi,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Hi)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new aw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class lR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class cR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new lR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class u_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const i=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new u_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new u_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=hR(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function Xe(r,e){return r<e?-1:r>e?1:0}function Em(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),c=e.charAt(i);if(o!==c)return Wp(o)===Wp(c)?Xe(o,c):Wp(o)?1:-1}return Xe(r.length,e.length)}const dR=55296,fR=57343;function Wp(r){const e=r.charCodeAt(0);return e>=dR&&e<=fR}function ol(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="__name__";class hi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ke(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=hi.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Xe(e.length,t.length)}static compareSegments(e,t){const i=hi.isNumericId(e),o=hi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?hi.extractNumericId(e).compare(hi.extractNumericId(t)):Em(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qs.fromString(e.substring(4,e.length-2))}}class _t extends hi{construct(e,t,i){return new _t(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new _t(t)}static emptyPath(){return new _t([])}}const pR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends hi{construct(e,t,i){return new bn(e,t,i)}static isValidIdentifier(e){return pR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h_}static keyField(){return new bn([h_])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(u=!u,o++):m!=="."||u?(i+=m,o++):(c(),o++)}if(c(),u)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(t)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(_t.fromString(e))}static fromName(e){return new Se(_t.fromString(e).popFirst(5))}static empty(){return new Se(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function mR(r,e,t,i){if(e===!0&&i===!0)throw new de(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function d_(r){if(!Se.isDocumentKey(r))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function f_(r){if(Se.isDocumentKey(r))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function lw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function wd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ke(12329,{type:typeof r})}function gr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wd(r);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Jc(r,e){if(!lw(r))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const u=r[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new de(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=-62135596800,m_=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*m_);return new St(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<p_)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m_}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jc(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-p_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:nn("string",St._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new St(0,0))}static max(){return new Ie(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=-1;function gR(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new St(t+1,0):new St(t,i));return new Xs(o,Se.empty(),e)}function yR(r){return new Xs(r.readTime,r.key,Lc)}class Xs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xs(Ie.min(),Se.empty(),Lc)}static max(){return new Xs(Ie.max(),Se.empty(),Lc)}}function vR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(r.documentKey,e.documentKey),t!==0?t:Xe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==bR)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,i)=>{t(e)}))}static reject(e){return new te(((t,i)=>{i(e)}))}static waitFor(e){return new te(((t,i)=>{let o=0,c=0,u=!1;e.forEach((m=>{++o,m.next((()=>{++c,u&&c===o&&t()}),(g=>i(g)))})),u=!0,c===o&&t()}))}static or(e){let t=te.resolve(!1);for(const i of e)t=t.next((o=>o?te.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new te(((i,o)=>{const c=e.length,u=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;t(e[y]).next((_=>{u[y]=_,++m,m===c&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new te(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function xR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Td.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=-1;function Sd(r){return r==null}function rd(r){return r===0&&1/r==-1/0}function ER(r){return typeof r=="number"&&Number.isInteger(r)&&!rd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="";function wR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=g_(e)),e=TR(r.get(t),e);return g_(e)}function TR(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const c=r.charAt(o);switch(c){case"\0":t+="";break;case cw:t+="";break;default:t+=c}}return t}function g_(r){return r+cw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function sa(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function uw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||vn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sh(this.root,e,this.comparator,!0)}}class Sh{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??vn.RED,this.left=o??vn.EMPTY,this.right=c??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new vn(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return vn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new v_(this.data.getIterator())}getIteratorFrom(e){return new v_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class v_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new mr([])}unionWith(e){let t=new sn(bn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new mr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new hw("Invalid base64 string: "+c):c}})(e);return new _n(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const SR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(r){if(ot(!!r,39018),typeof r=="string"){let e=0;const t=SR.exec(r);if(ot(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ht(r.seconds),nanos:Ht(r.nanos)}}function Ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ws(r){return typeof r=="string"?_n.fromBase64String(r):_n.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="server_timestamp",fw="__type__",pw="__previous_value__",mw="__local_write_time__";function ug(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[fw])==null?void 0:i.stringValue)===dw}function Nd(r){const e=r.mapValue.fields[pw];return ug(e)?Nd(e):e}function Uc(r){const e=Js(r.mapValue.fields[mw].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,t,i,o,c,u,m,g,y,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_,this.apiKey=E}}const id="(default)";class zc{constructor(e,t){this.projectId=e,this.database=t||id}static empty(){return new zc("","")}get isDefaultDatabase(){return this.database===id}isEqual(e){return e instanceof zc&&e.projectId===this.projectId&&e.database===this.database}}function AR(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="__type__",CR="__max__",Nh={mapValue:{}},yw="__vector__",sd="value";function Zs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ug(r)?4:kR(r)?9007199254740991:RR(r)?10:11:ke(28295,{value:r})}function yi(r,e){if(r===e)return!0;const t=Zs(r);if(t!==Zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Uc(r).isEqual(Uc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=Js(o.timestampValue),m=Js(c.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Ws(o.bytesValue).isEqual(Ws(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Ht(o.geoPointValue.latitude)===Ht(c.geoPointValue.latitude)&&Ht(o.geoPointValue.longitude)===Ht(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ht(o.integerValue)===Ht(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=Ht(o.doubleValue),m=Ht(c.doubleValue);return u===m?rd(u)===rd(m):isNaN(u)&&isNaN(m)}return!1})(r,e);case 9:return ol(r.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},m=c.mapValue.fields||{};if(y_(u)!==y_(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!yi(u[g],m[g])))return!1;return!0})(r,e);default:return ke(52216,{left:r})}}function Bc(r,e){return(r.values||[]).find((t=>yi(t,e)))!==void 0}function ll(r,e){if(r===e)return 0;const t=Zs(r),i=Zs(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(r.booleanValue,e.booleanValue);case 2:return(function(c,u){const m=Ht(c.integerValue||c.doubleValue),g=Ht(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return b_(r.timestampValue,e.timestampValue);case 4:return b_(Uc(r),Uc(e));case 5:return Em(r.stringValue,e.stringValue);case 6:return(function(c,u){const m=Ws(c),g=Ws(u);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,u){const m=c.split("/"),g=u.split("/");for(let y=0;y<m.length&&y<g.length;y++){const _=Xe(m[y],g[y]);if(_!==0)return _}return Xe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,u){const m=Xe(Ht(c.latitude),Ht(u.latitude));return m!==0?m:Xe(Ht(c.longitude),Ht(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return __(r.arrayValue,e.arrayValue);case 10:return(function(c,u){var N,L,K,ne;const m=c.fields||{},g=u.fields||{},y=(N=m[sd])==null?void 0:N.arrayValue,_=(L=g[sd])==null?void 0:L.arrayValue,E=Xe(((K=y==null?void 0:y.values)==null?void 0:K.length)||0,((ne=_==null?void 0:_.values)==null?void 0:ne.length)||0);return E!==0?E:__(y,_)})(r.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Nh.mapValue&&u===Nh.mapValue)return 0;if(c===Nh.mapValue)return 1;if(u===Nh.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=u.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const N=Em(g[E],_[E]);if(N!==0)return N;const L=ll(m[g[E]],y[_[E]]);if(L!==0)return L}return Xe(g.length,_.length)})(r.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function b_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Xe(r,e);const t=Js(r),i=Js(e),o=Xe(t.seconds,i.seconds);return o!==0?o:Xe(t.nanos,i.nanos)}function __(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=ll(t[o],i[o]);if(c)return c}return Xe(t.length,i.length)}function cl(r){return wm(r)}function wm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Js(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ws(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Se.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=wm(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of i)c?c=!1:o+=",",o+=`${u}:${wm(t.fields[u])}`;return o+"}"})(r.mapValue):ke(61005,{value:r})}function zh(r){switch(Zs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nd(r);return e?16+zh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ws(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+zh(c)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return sa(i.fields,((c,u)=>{o+=c.length+zh(u)})),o})(r.mapValue);default:throw ke(13486,{value:r})}}function x_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Tm(r){return!!r&&"integerValue"in r}function hg(r){return!!r&&"arrayValue"in r}function E_(r){return!!r&&"nullValue"in r}function w_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Bh(r){return!!r&&"mapValue"in r}function RR(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[gw])==null?void 0:i.stringValue)===yw}function Cc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return sa(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Cc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cc(r.arrayValue.values[t]);return e}return{...r}}function kR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===CR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(t)}setAll(e){let t=bn.emptyPath(),i={},o=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}u?i[m.lastSegment()]=Cc(u):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());Bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Bh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){sa(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new Jn(Cc(this.value))}}function vw(r){const e=[];return sa(r.fields,((t,i)=>{const o=new bn([t]);if(Bh(i)){const c=vw(i.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t,i,o,c,u,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=u,this.documentState=m}static newInvalidDocument(e){return new kn(e,0,Ie.min(),Ie.min(),Ie.min(),Jn.empty(),0)}static newFoundDocument(e,t,i,o){return new kn(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new kn(e,2,t,Ie.min(),Ie.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Ie.min(),Ie.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.position=e,this.inclusive=t}}function T_(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],u=r.position[o];if(c.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=ll(u,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function S_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!yi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t="asc"){this.field=e,this.dir=t}}function IR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{}class tn extends bw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new jR(e,t,i):t==="array-contains"?new PR(e,i):t==="in"?new VR(e,i):t==="not-in"?new LR(e,i):t==="array-contains-any"?new UR(e,i):new tn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new OR(e,i):new MR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ll(t,this.value)):t!==null&&Zs(this.value)===Zs(t)&&this.matchesComparison(ll(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends bw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Jr(e,t)}matches(e){return _w(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _w(r){return r.op==="and"}function xw(r){return DR(r)&&_w(r)}function DR(r){for(const e of r.filters)if(e instanceof Jr)return!1;return!0}function Sm(r){if(r instanceof tn)return r.field.canonicalString()+r.op.toString()+cl(r.value);if(xw(r))return r.filters.map((e=>Sm(e))).join(",");{const e=r.filters.map((t=>Sm(t))).join(",");return`${r.op}(${e})`}}function Ew(r,e){return r instanceof tn?(function(i,o){return o instanceof tn&&i.op===o.op&&i.field.isEqual(o.field)&&yi(i.value,o.value)})(r,e):r instanceof Jr?(function(i,o){return o instanceof Jr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,u,m)=>c&&Ew(u,o.filters[m])),!0):!1})(r,e):void ke(19439)}function ww(r){return r instanceof tn?(function(t){return`${t.field.canonicalString()} ${t.op} ${cl(t.value)}`})(r):r instanceof Jr?(function(t){return t.op.toString()+" {"+t.getFilters().map(ww).join(" ,")+"}"})(r):"Filter"}class jR extends tn{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class OR extends tn{constructor(e,t){super(e,"in",t),this.keys=Tw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class MR extends tn{constructor(e,t){super(e,"not-in",t),this.keys=Tw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Tw(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class PR extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hg(t)&&Bc(t.arrayValue,this.value)}}class VR extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bc(this.value.arrayValue,t)}}class LR extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bc(this.value.arrayValue,t)}}class UR extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Bc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t=null,i=[],o=[],c=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=u,this.endAt=m,this.Te=null}}function N_(r,e=null,t=[],i=[],o=null,c=null,u=null){return new zR(r,e,t,i,o,c,u)}function dg(r){const e=Oe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Sm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>cl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>cl(i))).join(",")),e.Te=t}return e.Te}function fg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!IR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Ew(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!S_(r.startAt,e.startAt)&&S_(r.endAt,e.endAt)}function Nm(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t=null,i=[],o=[],c=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function BR(r,e,t,i,o,c,u,m){return new Wc(r,e,t,i,o,c,u,m)}function Ad(r){return new Wc(r)}function A_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function GR(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Sw(r){return r.collectionGroup!==null}function Rc(r){const e=Oe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new sn(bn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new od(c,i))})),t.has(bn.keyField().canonicalString())||e.Ie.push(new od(bn.keyField(),i))}return e.Ie}function pi(r){const e=Oe(r);return e.Ee||(e.Ee=qR(e,Rc(r))),e.Ee}function qR(r,e){if(r.limitType==="F")return N_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new od(o.field,c)}));const t=r.endAt?new ad(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ad(r.startAt.position,r.startAt.inclusive):null;return N_(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Am(r,e){const t=r.filters.concat([e]);return new Wc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Cm(r,e,t){return new Wc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Cd(r,e){return fg(pi(r),pi(e))&&r.limitType===e.limitType}function Nw(r){return`${dg(pi(r))}|lt:${r.limitType}`}function Xo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>ww(o))).join(", ")}]`),Sd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>cl(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>cl(o))).join(",")),`Target(${i})`})(pi(r))}; limitType=${r.limitType})`}function Rd(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Se.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of Rc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(u,m,g){const y=T_(u,m,g);return u.inclusive?y<=0:y<0})(i.startAt,Rc(i),o)||i.endAt&&!(function(u,m,g){const y=T_(u,m,g);return u.inclusive?y>=0:y>0})(i.endAt,Rc(i),o))})(r,e)}function HR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Aw(r){return(e,t)=>{let i=!1;for(const o of Rc(r)){const c=FR(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function FR(r,e,t){const i=r.field.isKeyField()?Se.comparator(e.key,t.key):(function(c,u,m){const g=u.data.field(c),y=m.data.field(c);return g!==null&&y!==null?ll(g,y):ke(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return uw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Mt(Se.comparator);function Qi(){return YR}const Cw=new Mt(Se.comparator);function wc(...r){let e=Cw;for(const t of r)e=e.insert(t.key,t);return e}function Rw(r){let e=Cw;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Va(){return kc()}function kw(){return kc()}function kc(){return new Wa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const $R=new Mt(Se.comparator),QR=new sn(Se.comparator);function Je(...r){let e=QR;for(const t of r)e=e.add(t);return e}const KR=new sn(Xe);function XR(){return KR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function Iw(r){return{integerValue:""+r}}function JR(r,e){return ER(e)?Iw(e):pg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function WR(r,e,t){return r instanceof ld?(function(o,c){const u={fields:{[fw]:{stringValue:dw},[mw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&ug(c)&&(c=Nd(c)),c&&(u.fields[pw]=c),{mapValue:u}})(t,e):r instanceof Gc?jw(r,e):r instanceof qc?Ow(r,e):(function(o,c){const u=Dw(o,c),m=C_(u)+C_(o.Ae);return Tm(u)&&Tm(o.Ae)?Iw(m):pg(o.serializer,m)})(r,e)}function ZR(r,e,t){return r instanceof Gc?jw(r,e):r instanceof qc?Ow(r,e):t}function Dw(r,e){return r instanceof cd?(function(i){return Tm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class ld extends kd{}class Gc extends kd{constructor(e){super(),this.elements=e}}function jw(r,e){const t=Mw(e);for(const i of r.elements)t.some((o=>yi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class qc extends kd{constructor(e){super(),this.elements=e}}function Ow(r,e){let t=Mw(e);for(const i of r.elements)t=t.filter((o=>!yi(o,i)));return{arrayValue:{values:t}}}class cd extends kd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function C_(r){return Ht(r.integerValue||r.doubleValue)}function Mw(r){return hg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function ek(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Gc&&o instanceof Gc||i instanceof qc&&o instanceof qc?ol(i.elements,o.elements,yi):i instanceof cd&&o instanceof cd?yi(i.Ae,o.Ae):i instanceof ld&&o instanceof ld})(r.transform,e.transform)}class tk{constructor(e,t){this.version=e,this.transformResults=t}}class Qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Id{}function Pw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new mg(r.key,Qr.none()):new Zc(r.key,r.data,Qr.none());{const t=r.data,i=Jn.empty();let o=new sn(bn.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?i.delete(c):i.set(c,u),o=o.add(c)}return new aa(r.key,i,new mr(o.toArray()),Qr.none())}}function nk(r,e,t){r instanceof Zc?(function(o,c,u){const m=o.value.clone(),g=k_(o.fieldTransforms,c,u.transformResults);m.setAll(g),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(r,e,t):r instanceof aa?(function(o,c,u){if(!Gh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const m=k_(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(Vw(o)),g.setAll(m),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(r,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ic(r,e,t,i){return r instanceof Zc?(function(c,u,m,g){if(!Gh(c.precondition,u))return m;const y=c.value.clone(),_=I_(c.fieldTransforms,g,u);return y.setAll(_),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof aa?(function(c,u,m,g){if(!Gh(c.precondition,u))return m;const y=I_(c.fieldTransforms,g,u),_=u.data;return _.setAll(Vw(c)),_.setAll(y),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(r,e,t,i):(function(c,u,m){return Gh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(r,e,t)}function rk(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=Dw(i.transform,o||null);c!=null&&(t===null&&(t=Jn.empty()),t.set(i.field,c))}return t||null}function R_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ol(i,o,((c,u)=>ek(c,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Zc extends Id{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class aa extends Id{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Vw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function k_(r,e,t){const i=new Map;ot(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const c=r[o],u=c.transform,m=e.data.field(c.field);i.set(c.field,ZR(u,m,t[o]))}return i}function I_(r,e,t){const i=new Map;for(const o of r){const c=o.transform,u=t.data.field(o.field);i.set(o.field,WR(c,u,e))}return i}class mg extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ik extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&nk(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ic(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ic(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=kw();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let m=this.applyToLocalView(u,c.mutatedFields);m=t.has(o.key)?null:m;const g=Pw(u,m);g!==null&&i.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,((t,i)=>R_(t,i)))&&ol(this.baseMutations,e.baseMutations,((t,i)=>R_(t,i)))}}class gg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return $R})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,i[u].version);return new gg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,et;function lk(r){switch(r){case ee.OK:return ke(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return ke(15467,{code:r})}}function Lw(r){if(r===void 0)return $i("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Zt.OK:return ee.OK;case Zt.CANCELLED:return ee.CANCELLED;case Zt.UNKNOWN:return ee.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return ee.INTERNAL;case Zt.UNAVAILABLE:return ee.UNAVAILABLE;case Zt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Zt.NOT_FOUND:return ee.NOT_FOUND;case Zt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Zt.ABORTED:return ee.ABORTED;case Zt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Zt.DATA_LOSS:return ee.DATA_LOSS;default:return ke(39323,{code:r})}}(et=Zt||(Zt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new Qs([4294967295,4294967295],0);function D_(r){const e=ck().encode(r),t=new ZE;return t.update(e),new Uint8Array(t.digest())}function j_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Qs([t,i],0),new Qs([o,c],0)]}class yg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(i<0)throw new Tc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Qs.fromNumber(i)));return o.compare(uk)===1&&(o=new Qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=D_(e),[i,o]=j_(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new yg(c,o,t);return i.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=D_(e),[i,o]=j_(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Dd(Ie.min(),o,new Mt(Xe),Qi(),Je())}}class eu{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new eu(i,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Uw{constructor(e,t){this.targetId=e,this.Ce=t}}class zw{constructor(e,t,i=_n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class O_{constructor(){this.ve=0,this.Fe=M_(),this.Me=_n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),i=Je();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ke(38017,{changeType:c})}})),new eu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=M_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class hk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qi(),this.He=Ah(),this.Je=Ah(),this.Ze=new Mt(Xe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Nm(c))if(i===0){const u=new Se(c.path);this.et(t,u,kn.newNoDocument(u,Ie.min()))}else ot(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let u,m;try{u=Ws(i).toUint8Array()}catch(g){if(g instanceof hw)return Fa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new yg(u,o,c)}catch(g){return Fa(g instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const m=this.ot(u);if(m){if(c.current&&Nm(m.target)){const g=new Se(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,kn.newNoDocument(g,e))}c.Be&&(t.set(u,c.ke()),c.Ke())}}));let i=Je();this.Je.forEach(((c,u)=>{let m=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Dd(e,t,this.Ze,this.je,i);return this.je=Qi(),this.He=Ah(),this.Je=Ah(),this.Ze=new Mt(Xe),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new O_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new sn(Xe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new sn(Xe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new O_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ah(){return new Mt(Se.comparator)}function M_(){return new Mt(Se.comparator)}const dk={asc:"ASCENDING",desc:"DESCENDING"},fk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pk={and:"AND",or:"OR"};class mk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rm(r,e){return r.useProto3Json||Sd(e)?e:{value:e}}function ud(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function gk(r,e){return ud(r,e.toTimestamp())}function mi(r){return ot(!!r,49232),Ie.fromTimestamp((function(t){const i=Js(t);return new St(i.seconds,i.nanos)})(r))}function vg(r,e){return km(r,e).canonicalString()}function km(r,e){const t=(function(o){return new _t(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Gw(r){const e=_t.fromString(r);return ot($w(e),10190,{key:e.toString()}),e}function Im(r,e){return vg(r.databaseId,e.path)}function Zp(r,e){const t=Gw(e);if(t.get(1)!==r.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Se(Hw(t))}function qw(r,e){return vg(r.databaseId,e)}function yk(r){const e=Gw(r);return e.length===4?_t.emptyPath():Hw(e)}function Dm(r){return new _t(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Hw(r){return ot(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function P_(r,e,t){return{name:Im(r,e),fields:t.value.mapValue.fields}}function vk(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ke(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,_){return y.useProto3Json?(ot(_===void 0||typeof _=="string",58123),_n.fromBase64String(_||"")):(ot(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),_n.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(y){const _=y.code===void 0?ee.UNKNOWN:Lw(y.code);return new de(_,y.message||"")})(u);t=new zw(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Zp(r,i.document.name),c=mi(i.document.updateTime),u=i.document.createTime?mi(i.document.createTime):Ie.min(),m=new Jn({mapValue:{fields:i.document.fields}}),g=kn.newFoundDocument(o,c,u,m),y=i.targetIds||[],_=i.removedTargetIds||[];t=new qh(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Zp(r,i.document),c=i.readTime?mi(i.readTime):Ie.min(),u=kn.newNoDocument(o,c),m=i.removedTargetIds||[];t=new qh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Zp(r,i.document),c=i.removedTargetIds||[];t=new qh([],c,o,null)}else{if(!("filter"in e))return ke(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,u=new ok(o,c),m=i.targetId;t=new Uw(m,u)}}return t}function bk(r,e){let t;if(e instanceof Zc)t={update:P_(r,e.key,e.value)};else if(e instanceof mg)t={delete:Im(r,e.key)};else if(e instanceof aa)t={update:P_(r,e.key,e.data),updateMask:Ck(e.fieldMask)};else{if(!(e instanceof ik))return ke(16599,{dt:e.type});t={verify:Im(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,u){const m=u.transform;if(m instanceof ld)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Gc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof qc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof cd)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw ke(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:gk(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ke(27497)})(r,e.precondition)),t}function _k(r,e){return r&&r.length>0?(ot(e!==void 0,14353),r.map((t=>(function(o,c){let u=o.updateTime?mi(o.updateTime):mi(c);return u.isEqual(Ie.min())&&(u=mi(c)),new tk(u,o.transformResults||[])})(t,e)))):[]}function xk(r,e){return{documents:[qw(r,e.path)]}}function Ek(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=qw(r,o);const c=(function(y){if(y.length!==0)return Yw(Jr.create(y,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(y){if(y.length!==0)return y.map((_=>(function(N){return{field:Jo(N.field),direction:Sk(N.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Rm(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function wk(r){let e=yk(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ot(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=(function(E){const N=Fw(E);return N instanceof Jr&&xw(N)?N.getFilters():[N]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((N=>(function(K){return new od(Wo(K.field),(function(re){switch(re){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(N)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let N;return N=typeof E=="object"?E.value:E,Sd(N)?null:N})(t.limit));let g=null;t.startAt&&(g=(function(E){const N=!!E.before,L=E.values||[];return new ad(L,N)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const N=!E.before,L=E.values||[];return new ad(L,N)})(t.endAt)),BR(e,o,u,c,m,"F",g,y)}function Tk(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Fw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Wo(t.unaryFilter.field);return tn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Wo(t.unaryFilter.field);return tn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Wo(t.unaryFilter.field);return tn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Wo(t.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(r):r.fieldFilter!==void 0?(function(t){return tn.create(Wo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Jr.create(t.compositeFilter.filters.map((i=>Fw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(r):ke(30097,{filter:r})}function Sk(r){return dk[r]}function Nk(r){return fk[r]}function Ak(r){return pk[r]}function Jo(r){return{fieldPath:r.canonicalString()}}function Wo(r){return bn.fromServerFormat(r.fieldPath)}function Yw(r){return r instanceof tn?(function(t){if(t.op==="=="){if(w_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NAN"}};if(E_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(w_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NAN"}};if(E_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(t.field),op:Nk(t.op),value:t.value}}})(r):r instanceof Jr?(function(t){const i=t.getFilters().map((o=>Yw(o)));return i.length===1?i[0]:{compositeFilter:{op:Ak(t.op),filters:i}}})(r):ke(54877,{filter:r})}function Ck(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $w(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function Qw(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t,i,o,c=Ie.min(),u=Ie.min(),m=_n.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.yt=e}}function kk(r){const e=wk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Cm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.Sn=new Dk}addToCollectionParentIndex(e,t){return this.Sn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Xs.min())}updateCollectionGroup(e,t,i){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class Dk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new sn(_t.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new sn(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kw=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(Kw,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ul(0)}static ar(){return new ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="LruGarbageCollector",jk=1048576;function U_([r,e],[t,i]){const o=Xe(r,t);return o===0?Xe(e,i):o}class Ok{constructor(e){this.Pr=e,this.buffer=new sn(U_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();U_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Mk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){fe(L_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vl(t)?fe(L_,"Ignoring IndexedDB error during garbage collection: ",t):await yl(t)}await this.Ar(3e5)}))}}class Pk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Td.ce);const i=new Ok(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(V_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,c,u,m,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,m=Date.now(),this.removeTargets(e,i,t)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Ko()<=Ke.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(m-u)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function Vk(r,e){return new Pk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.changes=new Wa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ic(i.mutation,o,mr.empty(),St.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Je()){const o=Va();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let u=wc();return c.forEach(((m,g)=>{u=u.insert(m,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Va();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Je())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,i,o){let c=Qi();const u=kc(),m=(function(){return kc()})();return t.forEach(((g,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof aa)?c=c.insert(y.key,y):_!==void 0?(u.set(y.key,_.mutation.getFieldMask()),Ic(_.mutation,y,_.mutation.getFieldMask(),St.now())):u.set(y.key,mr.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,_)=>u.set(y,_))),t.forEach(((y,_)=>m.set(y,new Uk(_,u.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=kc();let o=new Mt(((u,m)=>u-m)),c=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let _=i.get(g)||mr.empty();_=m.applyToLocalView(y,_),i.set(g,_);const E=(o.get(m.batchId)||Je()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const u=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,_=g.value,E=kw();_.forEach((N=>{if(!c.has(N)){const L=Pw(t.get(N),i.get(N));L!==null&&E.set(N,L),c=c.add(N)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return te.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return GR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):te.resolve(Va());let m=Lc,g=c;return u.next((y=>te.forEach(y,((_,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(_)?te.resolve():this.remoteDocumentCache.getEntry(e,_).next((N=>{g=g.insert(_,N)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Je()))).next((_=>({batchId:m,changes:Rw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let o=wc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let u=wc();return this.indexManager.getCollectionParents(e,c).next((m=>te.forEach(m,(g=>{const y=(function(E,N){return new Wc(N,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((E,N)=>{u=u.insert(E,N)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((u=>{c.forEach(((g,y)=>{const _=y.getKey();u.get(_)===null&&(u=u.insert(_,kn.newInvalidDocument(_)))}));let m=wc();return u.forEach(((g,y)=>{const _=c.get(g);_!==void 0&&Ic(_.mutation,y,mr.empty(),St.now()),Rd(t,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return te.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:mi(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:kk(o.bundledQuery),readTime:mi(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.overlays=new Mt(Se.comparator),this.Lr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Va();return te.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.bt(e,t,c)})),te.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(i)),te.resolve()}getOverlaysForCollection(e,t,i){const o=Va(),c=t.length+1,u=new Se(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new Mt(((y,_)=>y-_));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=c.get(y.largestBatchId);_===null&&(_=Va(),c=c.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const m=Va(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,_)=>m.set(y,_))),!(m.size()>=o)););return te.resolve(m)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new ak(t,i));let c=this.Lr.get(t);c===void 0&&(c=Je(),this.Lr.set(t,c)),this.Lr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.kr=new sn(un.Kr),this.qr=new sn(un.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new un(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new un(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Se(new _t([])),i=new un(t,e),o=new un(t,e+1),c=[];return this.qr.forEachInRange([i,o],(u=>{this.Wr(u),c.push(u.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Se(new _t([])),i=new un(t,e),o=new un(t,e+1);let c=Je();return this.qr.forEachInRange([i,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new un(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class un{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Se.comparator(e.key,t.key)||Xe(e.Hr,t.Hr)}static Ur(e,t){return Xe(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new sn(un.Kr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new sk(c,t,i,o);this.mutationQueue.push(u);for(const m of o)this.Jr=this.Jr.add(new un(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?cg:this.Yn-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new un(t,0),o=new un(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([i,o],(u=>{const m=this.Zr(u.Hr);c.push(m)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(Xe);return t.forEach((o=>{const c=new un(o,0),u=new un(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,u],(m=>{i=i.add(m.Hr)}))})),te.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Se.isDocumentKey(c)||(c=c.child(""));const u=new un(new Se(c),0);let m=new sn(Xe);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Hr)),!0)}),u),te.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ot(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return te.forEach(t.mutations,(o=>{const c=new un(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new un(t,0),o=this.Jr.firstAfterOrEqual(i);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.ti=e,this.docs=(function(){return new Mt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return te.resolve(i?i.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let i=Qi();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():kn.newInvalidDocument(o))})),te.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=Qi();const u=t.path,m=new Se(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||vR(yR(_),i)<=0||(o.has(_.key)||Rd(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(e,t,i,o){ke(9500)}ni(e,t){return te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Yk(this)}getSize(e){return te.resolve(this.size)}}class Yk extends Lk{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),te.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.persistence=e,this.ri=new Wa((t=>dg(t)),fg),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new bg,this.targetCount=0,this.oi=ul._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),te.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ul(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.lr(t),te.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.ri.forEach(((u,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.ri.delete(u),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return te.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),te.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),te.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return te.resolve(i)}containsKey(e,t){return te.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,t){this._i={},this.overlays={},this.ai=new Td(0),this.ui=!1,this.ui=!0,this.ci=new qk,this.referenceDelegate=e(this),this.li=new $k(this),this.indexManager=new Ik,this.remoteDocumentCache=(function(o){return new Fk(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new Rk(t),this.Pi=new Bk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new Hk(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const o=new Qk(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,t){return te.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class Qk extends _R{constructor(e){super(),this.currentSequenceNumber=e}}class _g{constructor(e){this.persistence=e,this.Ri=new bg,this.Ai=null}static Vi(e){return new _g(e)}get di(){if(this.Ai)return this.Ai;throw ke(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.di,(i=>{const o=Se.fromPath(i);return this.mi(e,o).next((c=>{c||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class hd{constructor(e,t){this.persistence=e,this.fi=new Wa((i=>wR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=Vk(this,t)}static Vi(e,t){return new hd(e,t)}Ti(){}Ii(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return te.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((c=>c?te.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(u=>this.wr(e,u,t).next((m=>{m||(i++,c.removeEntry(u,Ie.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),te.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),te.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zh(e.data.value)),t}wr(e,t,i){return te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return te.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Je(),o=Je();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new xg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return TN()?8:xR(Dn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.gs(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ps(e,t,o,i).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new Kk;return this.ys(e,t,u).next((m=>{if(c.result=m,this.As)return this.ws(e,t,u,m.size)}))})).next((()=>c.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(Ko()<=Ke.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(Ko()<=Ke.DEBUG&&fe("QueryEngine","Query:",Xo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(Ko()<=Ke.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(t))):te.resolve())}gs(e,t){if(A_(t))return te.resolve(null);let i=pi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Cm(t,null,"F"),i=pi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const u=Je(...c);return this.fs.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,m);return this.Ss(t,y,u,g.readTime)?this.gs(e,Cm(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,o){return A_(t)||o.isEqual(Ie.min())?te.resolve(null):this.fs.getDocuments(e,i).next((c=>{const u=this.bs(t,c);return this.Ss(t,u,i,o)?te.resolve(null):(Ko()<=Ke.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xo(t)),this.Ds(e,u,t,gR(o,Lc)).next((m=>m)))}))}bs(e,t){let i=new sn(Aw(e));return t.forEach(((o,c)=>{Rd(e,c)&&(i=i.add(c))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,t,i){return Ko()<=Ke.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Xo(t)),this.fs.getDocumentsMatchingQuery(e,t,Xs.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",Jk=3e8;class Wk{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new Mt(Xe),this.Fs=new Wa((c=>dg(c)),fg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Zk(r,e,t,i){return new Wk(r,e,t,i)}async function Jw(r,e){const t=Oe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const u=[],m=[];let g=Je();for(const y of o){u.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of c){m.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:m})))}))}))}function eI(r,e){const t=Oe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,_){const E=y.batch,N=E.keys();let L=te.resolve();return N.forEach((K=>{L=L.next((()=>_.getEntry(g,K))).next((ne=>{const re=y.docVersions.get(K);ot(re!==null,48541),ne.version.compareTo(re)<0&&(E.applyToRemoteDocument(ne,y),ne.isValidDocument()&&(ne.setReadTime(y.commitVersion),_.addEntry(ne)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Je();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Ww(r){const e=Oe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function tI(r,e){const t=Oe(r),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((_,E)=>{const N=o.get(E);if(!N)return;m.push(t.li.removeMatchingKeys(c,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(c,_.addedDocuments,E))));let L=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(_n.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(_.resumeToken,i)),o=o.insert(E,L),(function(ne,re,me){return ne.resumeToken.approximateByteSize()===0||re.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=Jk?!0:me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0})(N,L,_)&&m.push(t.li.updateTargetData(c,L))}));let g=Qi(),y=Je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))})),m.push(nI(c,u,e.documentUpdates).next((_=>{g=_.Bs,y=_.Ls}))),!i.isEqual(Ie.min())){const _=t.li.getLastRemoteSnapshotVersion(c).next((E=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(_)}return te.waitFor(m).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(t.vs=o,c)))}function nI(r,e,t){let i=Je(),o=Je();return t.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let u=Qi();return t.forEach(((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):fe(Eg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:o}}))}function rI(r,e){const t=Oe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=cg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function iI(r,e){const t=Oe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((c=>c?(o=c,te.resolve(o)):t.li.allocateTargetId(i).next((u=>(o=new Gs(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function jm(r,e,t){const i=Oe(r),o=i.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!vl(u))throw u;fe(Eg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function z_(r,e,t){const i=Oe(r);let o=Ie.min(),c=Je();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,_){const E=Oe(g),N=E.Fs.get(_);return N!==void 0?te.resolve(E.vs.get(N)):E.li.getTargetData(y,_)})(i,u,pi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,m.targetId).next((g=>{c=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:Ie.min(),t?c:Je()))).next((m=>(sI(i,HR(e),m),{documents:m,ks:c})))))}function sI(r,e,t){let i=r.Ms.get(e)||Ie.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.Ms.set(e,i)}class B_{constructor(){this.activeTargetIds=XR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aI{constructor(){this.vo=new B_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new B_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="ConnectivityMonitor";class q_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){fe(G_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){fe(G_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function Om(){return Ch===null?Ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="RestConnection",lI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class cI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===id?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,c){const u=Om(),m=this.Qo(e,t.toUriEncodedString());fe(em,`Sending RPC '${e}' ${u}:`,m,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:y}=new URL(m),_=fl(y);return this.zo(e,m,g,i,_).then((E=>(fe(em,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Fa(em,`RPC '${e}' ${u} failed with error: `,E,"url: ",m,"request:",i),E}))}jo(e,t,i,o,c,u){return this.Wo(e,t,i,o,c)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}Qo(e,t){const i=lI[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection",gc=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class il extends cI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!il.c_){const e=rw();gc(e,nw.STAT_EVENT,(t=>{t.stat===xm.PROXY?fe(An,"STAT_EVENT: detected buffering proxy"):t.stat===xm.NOPROXY&&fe(An,"STAT_EVENT: detected no buffering proxy")})),il.c_=!0}}zo(e,t,i,o,c){const u=Om();return new Promise(((m,g)=>{const y=new ew;y.setWithCredentials(!0),y.listenOnce(tw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Uh.NO_ERROR:const E=y.getResponseJson();fe(An,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),m(E);break;case Uh.TIMEOUT:fe(An,`RPC '${e}' ${u} timed out`),g(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Uh.HTTP_ERROR:const N=y.getStatus();if(fe(An,`RPC '${e}' ${u} failed with status:`,N,"response text:",y.getResponseText()),N>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const K=L==null?void 0:L.error;if(K&&K.status&&K.message){const ne=(function(me){const we=me.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(we)>=0?we:ee.UNKNOWN})(K.status);g(new de(ne,K.message))}else g(new de(ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new de(ee.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{fe(An,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);fe(An,`RPC '${e}' ${u} sending request:`,o),y.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Om(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=c.join("");fe(An,`Creating RPC '${e}' stream ${o}: ${y}`,m);const _=u.createWebChannel(y,m);this.I_(_);let E=!1,N=!1;const L=new uI({Ho:K=>{N?fe(An,`Not sending because RPC '${e}' stream ${o} is closed:`,K):(E||(fe(An,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),fe(An,`RPC '${e}' stream ${o} sending:`,K),_.send(K))},Jo:()=>_.close()});return gc(_,Ec.EventType.OPEN,(()=>{N||(fe(An,`RPC '${e}' stream ${o} transport opened.`),L.i_())})),gc(_,Ec.EventType.CLOSE,(()=>{N||(N=!0,fe(An,`RPC '${e}' stream ${o} transport closed`),L.o_(),this.E_(_))})),gc(_,Ec.EventType.ERROR,(K=>{N||(N=!0,Fa(An,`RPC '${e}' stream ${o} transport errored. Name:`,K.name,"Message:",K.message),L.o_(new de(ee.UNAVAILABLE,"The operation could not be completed")))})),gc(_,Ec.EventType.MESSAGE,(K=>{var ne;if(!N){const re=K.data[0];ot(!!re,16349);const me=re,we=(me==null?void 0:me.error)||((ne=me[0])==null?void 0:ne.error);if(we){fe(An,`RPC '${e}' stream ${o} received error:`,we);const ve=we.status;let _e=(function(C){const A=Zt[C];if(A!==void 0)return Lw(A)})(ve),Ue=we.message;ve==="NOT_FOUND"&&Ue.includes("database")&&Ue.includes("does not exist")&&Ue.includes(this.databaseId.database)&&Fa(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),_e===void 0&&(_e=ee.INTERNAL,Ue="Unknown error status: "+ve+" with message "+we.message),N=!0,L.o_(new de(_e,Ue)),_.close()}else fe(An,`RPC '${e}' stream ${o} received:`,re),L.__(re)}})),il.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return iw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(r){return new il(r)}function tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(r){return new mk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */il.c_=!1;class Zw{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="PersistentStream";class eT{constructor(e,t,i,o,c,u,m,g){this.Ci=e,this.b_=i,this.S_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?($i(t.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(H_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(fe(H_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dI extends eT{constructor(e,t,i,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vk(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Ie.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?mi(u.readTime):Ie.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Dm(this.serializer),t.addTarget=(function(c,u){let m;const g=u.target;if(m=Nm(g)?{documents:xk(c,g)}:{query:Ek(c,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=Bw(c,u.resumeToken);const y=Rm(c,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ie.min())>0){m.readTime=ud(c,u.snapshotVersion.toTimestamp());const y=Rm(c,u.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const i=Tk(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Dm(this.serializer),t.removeTarget=e,this.K_(t)}}class fI extends eT{constructor(e,t,i,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_k(e.writeResults,e.commitTime),i=mi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Dm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>bk(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{}class mI extends pI{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Wo(e,km(t,i),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(ee.UNKNOWN,c.toString())}))}jo(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.jo(e,km(t,i),o,u,m,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ee.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function gI(r,e,t,i){return new mI(r,e,t,i)}class yI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($i(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="RemoteStore";class vI{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Za(this)&&(fe(Ya,"Restarting streams for network reachability change."),await(async function(g){const y=Oe(g);y.Ea.add(4),await tu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Od(y)})(this))}))})),this.Va=new yI(i,o)}}async function Od(r){if(Za(r))for(const e of r.Ra)await e(!0)}async function tu(r){for(const e of r.Ra)await e(!1)}function tT(r,e){const t=Oe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ng(t)?Sg(t):bl(t).O_()&&Tg(t,e))}function wg(r,e){const t=Oe(r),i=bl(t);t.Ia.delete(e),i.O_()&&nT(t,e),t.Ia.size===0&&(i.O_()?i.L_():Za(t)&&t.Va.set("Unknown"))}function Tg(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(r).Z_(e)}function nT(r,e){r.da.$e(e),bl(r).X_(e)}function Sg(r){r.da=new hk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),bl(r).start(),r.Va.ua()}function Ng(r){return Za(r)&&!bl(r).x_()&&r.Ia.size>0}function Za(r){return Oe(r).Ea.size===0}function rT(r){r.da=void 0}async function bI(r){r.Va.set("Online")}async function _I(r){r.Ia.forEach(((e,t)=>{Tg(r,e)}))}async function xI(r,e){rT(r),Ng(r)?(r.Va.ha(e),Sg(r)):r.Va.set("Unknown")}async function EI(r,e,t){if(r.Va.set("Online"),e instanceof zw&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,u),o.Ia.delete(m),o.da.removeTarget(m))})(r,e)}catch(i){fe(Ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await dd(r,i)}else if(e instanceof qh?r.da.Xe(e):e instanceof Uw?r.da.st(e):r.da.tt(e),!t.isEqual(Ie.min()))try{const i=await Ww(r.localStore);t.compareTo(i)>=0&&await(function(c,u){const m=c.da.Tt(u);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=c.Ia.get(y);_&&c.Ia.set(y,_.withResumeToken(g.resumeToken,u))}})),m.targetMismatches.forEach(((g,y)=>{const _=c.Ia.get(g);if(!_)return;c.Ia.set(g,_.withResumeToken(_n.EMPTY_BYTE_STRING,_.snapshotVersion)),nT(c,g);const E=new Gs(_.target,g,y,_.sequenceNumber);Tg(c,E)})),c.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){fe(Ya,"Failed to raise snapshot:",i),await dd(r,i)}}async function dd(r,e,t){if(!vl(e))throw e;r.Ea.add(1),await tu(r),r.Va.set("Offline"),t||(t=()=>Ww(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe(Ya,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Od(r)}))}function iT(r,e){return e().catch((t=>dd(r,t,e)))}async function Md(r){const e=Oe(r),t=ea(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cg;for(;wI(e);)try{const o=await rI(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,TI(e,o)}catch(o){await dd(e,o)}sT(e)&&aT(e)}function wI(r){return Za(r)&&r.Ta.length<10}function TI(r,e){r.Ta.push(e);const t=ea(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function sT(r){return Za(r)&&!ea(r).x_()&&r.Ta.length>0}function aT(r){ea(r).start()}async function SI(r){ea(r).ra()}async function NI(r){const e=ea(r);for(const t of r.Ta)e.ea(t.mutations)}async function AI(r,e,t){const i=r.Ta.shift(),o=gg.from(i,e,t);await iT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Md(r)}async function CI(r,e){e&&ea(r).Y_&&await(async function(i,o){if((function(u){return lk(u)&&u!==ee.ABORTED})(o.code)){const c=i.Ta.shift();ea(i).B_(),await iT(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Md(i)}})(r,e),sT(r)&&aT(r)}async function F_(r,e){const t=Oe(r);t.asyncQueue.verifyOperationInProgress(),fe(Ya,"RemoteStore received new credentials");const i=Za(t);t.Ea.add(3),await tu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Od(t)}async function RI(r,e){const t=Oe(r);e?(t.Ea.delete(2),await Od(t)):e||(t.Ea.add(2),await tu(t),t.Va.set("Unknown"))}function bl(r){return r.ma||(r.ma=(function(t,i,o){const c=Oe(t);return c.sa(),new dI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Zo:bI.bind(null,r),Yo:_I.bind(null,r),t_:xI.bind(null,r),J_:EI.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Ng(r)?Sg(r):r.Va.set("Unknown")):(await r.ma.stop(),rT(r))}))),r.ma}function ea(r){return r.fa||(r.fa=(function(t,i,o){const c=Oe(t);return c.sa(),new fI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:SI.bind(null,r),t_:CI.bind(null,r),ta:NI.bind(null,r),na:AI.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Md(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(Ya,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const u=Date.now()+i,m=new Ag(e,t,u,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(r,e){if($i("AsyncQueue",`${e}: ${r}`),vl(r))return new de(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static emptySet(e){return new sl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=wc(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.ga=new Mt(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class hl{constructor(e,t,i,o,c,u,m,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,c){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new hl(e,t,sl.emptySet(t),u,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class II{constructor(){this.queries=$_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Oe(t),c=o.queries;o.queries=$_(),c.forEach(((u,m)=>{for(const g of m.ba)g.onError(i)}))})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function $_(){return new Wa((r=>Nw(r)),Cd)}async function Rg(r,e){const t=Oe(r);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.Sa()&&e.Da()&&(i=2):(c=new kI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const m=Cg(u,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Ig(t)}async function kg(r,e){const t=Oe(r),i=e.query;let o=3;const c=t.queries.get(i);if(c){const u=c.ba.indexOf(e);u>=0&&(c.ba.splice(u,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function DI(r,e){const t=Oe(r);let i=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const m of u.ba)m.Fa(o)&&(i=!0);u.wa=o}}i&&Ig(t)}function jI(r,e,t){const i=Oe(r),o=i.queries.get(e);if(o)for(const c of o.ba)c.onError(t);i.queries.delete(e)}function Ig(r){r.Ca.forEach((e=>{e.next()}))}var Mm,Q_;(Q_=Mm||(Mm={})).Ma="default",Q_.Cache="cache";class Dg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new hl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.key=e}}class lT{constructor(e){this.key=e}}class OI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Je(),this.mutatedKeys=Je(),this.eu=Aw(e),this.tu=new sl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new Y_,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const N=o.get(_),L=Rd(this.query,E)?E:null,K=!!N&&this.mutatedKeys.has(N.key),ne=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let re=!1;N&&L?N.data.isEqual(L.data)?K!==ne&&(i.track({type:3,doc:L}),re=!0):this.su(N,L)||(i.track({type:2,doc:L}),re=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(m=!0)):!N&&L?(i.track({type:0,doc:L}),re=!0):N&&!L&&(i.track({type:1,doc:N}),re=!0,(g||y)&&(m=!0)),re&&(L?(u=u.add(L),c=ne?c.add(_):c.delete(_)):(u=u.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),c=c.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Ss:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(L,K){const ne=re=>{switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Vt:re})}};return ne(L)-ne(K)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new hl(this.query,e.tu,c,u,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Y_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new lT(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new oT(i))})),t}cu(e){this.Za=e.ks,this.Ya=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const jg="SyncEngine";class MI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class PI{constructor(e){this.key=e,this.hu=!1}}class VI{constructor(e,t,i,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Wa((m=>Nw(m)),Cd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Mt(Se.comparator),this.Au=new Map,this.Vu=new bg,this.du={},this.mu=new Map,this.fu=ul.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LI(r,e,t=!0){const i=pT(r);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await cT(i,e,t,!0),o}async function UI(r,e){const t=pT(r);await cT(t,e,!0,!1)}async function cT(r,e,t,i){const o=await iI(r.localStore,pi(e)),c=o.targetId,u=r.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await zI(r,e,c,u==="current",o.resumeToken)),r.isPrimaryClient&&t&&tT(r.remoteStore,o),m}async function zI(r,e,t,i,o){r.pu=(E,N,L)=>(async function(ne,re,me,we){let ve=re.view.ru(me);ve.Ss&&(ve=await z_(ne.localStore,re.query,!1).then((({documents:C})=>re.view.ru(C,ve))));const _e=we&&we.targetChanges.get(re.targetId),Ue=we&&we.targetMismatches.get(re.targetId)!=null,Ae=re.view.applyChanges(ve,ne.isPrimaryClient,_e,Ue);return X_(ne,re.targetId,Ae.au),Ae.snapshot})(r,E,N,L);const c=await z_(r.localStore,e,!0),u=new OI(e,c.ks),m=u.ru(c.documents),g=eu.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=u.applyChanges(m,r.isPrimaryClient,g);X_(r,t,y.au);const _=new MI(e,t,u);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function BI(r,e,t){const i=Oe(r),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((u=>!Cd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await jm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&wg(i.remoteStore,o.targetId),Pm(i,o.targetId)})).catch(yl)):(Pm(i,o.targetId),await jm(i.localStore,o.targetId,!0))}async function GI(r,e){const t=Oe(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),wg(t.remoteStore,i.targetId))}async function qI(r,e,t){const i=XI(r);try{const o=await(function(u,m){const g=Oe(u),y=St.now(),_=m.reduce(((L,K)=>L.add(K.key)),Je());let E,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let K=Qi(),ne=Je();return g.xs.getEntries(L,_).next((re=>{K=re,K.forEach(((me,we)=>{we.isValidDocument()||(ne=ne.add(me))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,K))).next((re=>{E=re;const me=[];for(const we of m){const ve=rk(we,E.get(we.key).overlayedDocument);ve!=null&&me.push(new aa(we.key,ve,vw(ve.value.mapValue),Qr.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,me,m)})).next((re=>{N=re;const me=re.applyToLocalDocumentSet(E,ne);return g.documentOverlayCache.saveOverlays(L,re.batchId,me)}))})).then((()=>({batchId:N.batchId,changes:Rw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,m,g){let y=u.du[u.currentUser.toKey()];y||(y=new Mt(Xe)),y=y.insert(m,g),u.du[u.currentUser.toKey()]=y})(i,o.batchId,t),await nu(i,o.changes),await Md(i.remoteStore)}catch(o){const c=Cg(o,"Failed to persist write");t.reject(c)}}async function uT(r,e){const t=Oe(r);try{const i=await tI(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?ot(u.hu,14607):o.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await nu(t,i,e)}catch(i){await yl(i)}}function K_(r,e,t){const i=Oe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,u)=>{const m=u.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(u,m){const g=Oe(u);g.onlineState=m;let y=!1;g.queries.forEach(((_,E)=>{for(const N of E.ba)N.va(m)&&(y=!0)})),y&&Ig(g)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function HI(r,e,t){const i=Oe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let u=new Mt(Se.comparator);u=u.insert(c,kn.newNoDocument(c,Ie.min()));const m=Je().add(c),g=new Dd(Ie.min(),new Map,new Mt(Xe),u,m);await uT(i,g),i.Ru=i.Ru.remove(c),i.Au.delete(e),Og(i)}else await jm(i.localStore,e,!1).then((()=>Pm(i,e,t))).catch(yl)}async function FI(r,e){const t=Oe(r),i=e.batch.batchId;try{const o=await eI(t.localStore,e);dT(t,i,null),hT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await nu(t,o)}catch(o){await yl(o)}}async function YI(r,e,t){const i=Oe(r);try{const o=await(function(u,m){const g=Oe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return g.mutationQueue.lookupMutationBatch(y,m).next((E=>(ot(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>g.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);dT(i,e,t),hT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await nu(i,o)}catch(o){await yl(o)}}function hT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function dT(r,e,t){const i=Oe(r);let o=i.du[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function Pm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||fT(r,i)}))}function fT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(wg(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Og(r))}function X_(r,e,t){for(const i of t)i instanceof oT?(r.Vu.addReference(i.key,e),$I(r,i)):i instanceof lT?(fe(jg,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||fT(r,i.key)):ke(19791,{wu:i})}function $I(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(fe(jg,"New document in limbo: "+t),r.Eu.add(i),Og(r))}function Og(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Se(_t.fromString(e)),i=r.fu.next();r.Au.set(i,new PI(t)),r.Ru=r.Ru.insert(t,i),tT(r.remoteStore,new Gs(pi(Ad(t.path)),i,"TargetPurposeLimboResolution",Td.ce))}}async function nu(r,e,t){const i=Oe(r),o=[],c=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{u.push(i.pu(g,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=xg.Es(g.targetId,y);c.push(E)}})))})),await Promise.all(u),i.Pu.J_(o),await(async function(g,y){const _=Oe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(y,(N=>te.forEach(N.Ts,(L=>_.persistence.referenceDelegate.addReference(E,N.targetId,L))).next((()=>te.forEach(N.Is,(L=>_.persistence.referenceDelegate.removeReference(E,N.targetId,L)))))))))}catch(E){if(!vl(E))throw E;fe(Eg,"Failed to update sequence numbers: "+E)}for(const E of y){const N=E.targetId;if(!E.fromCache){const L=_.vs.get(N),K=L.snapshotVersion,ne=L.withLastLimboFreeSnapshotVersion(K);_.vs=_.vs.insert(N,ne)}}})(i.localStore,c))}async function QI(r,e){const t=Oe(r);if(!t.currentUser.isEqual(e)){fe(jg,"User change. New user:",e.toKey());const i=await Jw(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new de(ee.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nu(t,i.Ns)}}function KI(r,e){const t=Oe(r),i=t.Au.get(e);if(i&&i.hu)return Je().add(i.key);{let o=Je();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const m=t.Tu.get(u);o=o.unionWith(m.view.nu)}return o}}function pT(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=uT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HI.bind(null,e),e.Pu.J_=DI.bind(null,e.eventManager),e.Pu.yu=jI.bind(null,e.eventManager),e}function XI(r){const e=Oe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YI.bind(null,e),e}class fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Zk(this.persistence,new Xk,e.initialUser,this.serializer)}Cu(e){return new Xw(_g.Vi,this.serializer)}Du(e){return new aI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fd.provider={build:()=>new fd};class JI extends fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof hd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Mk(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new Xw((i=>hd.Vi(i,t)),this.serializer)}}class Vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QI.bind(null,this.syncEngine),await RI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new II})()}createDatastore(e){const t=jd(e.databaseInfo.databaseId),i=hI(e.databaseInfo);return gI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,u,m){return new vI(i,o,c,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>K_(this.syncEngine,t,0)),(function(){return q_.v()?new q_:new oI})())}createSyncEngine(e,t){return(function(o,c,u,m,g,y,_){const E=new VI(o,c,u,m,g,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const c=Oe(o);fe(Ya,"RemoteStore shutting down."),c.Ea.add(5),await tu(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$i("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="FirestoreClient";class WI{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=Cn.UNAUTHENTICATED,this.clientId=lg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async u=>{fe(ta,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(fe(ta,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Cg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function nm(r,e){r.asyncQueue.verifyOperationInProgress(),fe(ta,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Jw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function J_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await ZI(r);fe(ta,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>F_(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>F_(e.remoteStore,o))),r._onlineComponents=e}async function ZI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(ta,"Using user provided OfflineComponentProvider");try{await nm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Fa("Error using user provided cache. Falling back to memory cache: "+t),await nm(r,new fd)}}else fe(ta,"Using default OfflineComponentProvider"),await nm(r,new JI(void 0));return r._offlineComponents}async function mT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(ta,"Using user provided OnlineComponentProvider"),await J_(r,r._uninitializedComponentsProvider._online)):(fe(ta,"Using default OnlineComponentProvider"),await J_(r,new Vm))),r._onlineComponents}function eD(r){return mT(r).then((e=>e.syncEngine))}async function pd(r){const e=await mT(r),t=e.eventManager;return t.onListen=LI.bind(null,e.syncEngine),t.onUnlisten=BI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GI.bind(null,e.syncEngine),t}function tD(r,e,t,i){const o=new Mg(i),c=new Dg(e,o,t);return r.asyncQueue.enqueueAndForget((async()=>Rg(await pd(r),c))),()=>{o.Nu(),r.asyncQueue.enqueueAndForget((async()=>kg(await pd(r),c)))}}function nD(r,e,t={}){const i=new Hi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,u,m,g,y){const _=new Mg({next:N=>{_.Nu(),u.enqueueAndForget((()=>kg(c,E)));const L=N.docs.has(m);!L&&N.fromCache?y.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&g&&g.source==="server"?y.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(N)},error:N=>y.reject(N)}),E=new Dg(Ad(m.path),_,{includeMetadataChanges:!0,Ka:!0});return Rg(c,E)})(await pd(r),r.asyncQueue,e,t,i))),i.promise}function rD(r,e,t={}){const i=new Hi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,u,m,g,y){const _=new Mg({next:N=>{_.Nu(),u.enqueueAndForget((()=>kg(c,E))),N.fromCache&&g.source==="server"?y.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(N)},error:N=>y.reject(N)}),E=new Dg(m,_,{includeMetadataChanges:!0,Ka:!0});return Rg(c,E)})(await pd(r),r.asyncQueue,e,t,i))),i.promise}function iD(r,e){const t=new Hi;return r.asyncQueue.enqueueAndForget((async()=>qI(await eD(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="ComponentProvider",W_=new Map;function aD(r,e,t,i,o){return new NR(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,gT(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firestore.googleapis.com",Z_=!0;class ex{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yT,this.ssl=Z_}else this.host=e.host,this.ssl=e.ssl??Z_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jk)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ex({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ex(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new sR;switch(i.type){case"firstParty":return new cR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=W_.get(t);i&&(fe(sD,"Removing Datastore"),W_.delete(t),i.terminate())})(this),Promise.resolve()}}function oD(r,e,t,i={}){var y;r=gr(r,Pd);const o=fl(e),c=r._getSettings(),u={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(hE(`https://${m}`),dE("Firestore",!0)),c.host!==yT&&c.host!==m&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!za(g,u)&&(r._setSettings(g),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=Cn.MOCK_USER;else{_=mN(i.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const N=i.mockUserToken.sub||i.mockUserToken.user_id;if(!N)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Cn(N)}r._authCredentials=new aR(new aw(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new eo(this.firestore,e,this._query)}}class Ut{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Jc(t,Ut._jsonSchema))return new Ut(e,i||null,new Se(_t.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:nn("string",Ut._jsonSchemaVersion),referencePath:nn("string")};class Ks extends eo{constructor(e,t,i){super(e,t,Ad(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Se(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function Vd(r,e,...t){if(r=hn(r),ow("collection","path",e),r instanceof Pd){const i=_t.fromString(e,...t);return f_(i),new Ks(r,null,i)}{if(!(r instanceof Ut||r instanceof Ks))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(_t.fromString(e,...t));return f_(i),new Ks(r.firestore,null,i)}}function ru(r,e,...t){if(r=hn(r),arguments.length===1&&(e=lg.newId()),ow("doc","path",e),r instanceof Pd){const i=_t.fromString(e,...t);return d_(i),new Ut(r,null,new Se(i))}{if(!(r instanceof Ut||r instanceof Ks))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(_t.fromString(e,...t));return d_(i),new Ut(r.firestore,r instanceof Ks?r.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="AsyncQueue";class nx{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zw(this,"async_queue_retry"),this._c=()=>{const i=tm();i&&fe(tx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=tm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=tm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Hi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!vl(e))throw e;fe(tx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,$i("INTERNAL UNHANDLED ERROR: ",rx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ag.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&ke(47125,{Pc:rx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class na extends Pd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new nx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nx(e),this._firestoreClient=void 0,await e}}}function lD(r,e){const t=typeof r=="object"?r:gE(),i=typeof r=="string"?r:id,o=Wm(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=fN("firestore");c&&oD(o,...c)}return o}function Ld(r){if(r._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||cD(r),r._firestoreClient}function cD(r){var i,o,c,u;const e=r._freezeSettings(),t=aD(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(o=r._app)==null?void 0:o.options.apiKey,e);r._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new WI(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Or(_n.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Or(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jc(e,Or._jsonSchema))return Or.fromBase64String(e.bytes)}}Or._jsonSchemaVersion="firestore/bytes/1.0",Or._jsonSchema={type:nn("string",Or._jsonSchemaVersion),bytes:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(Jc(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:nn("string",gi._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jc(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Kr(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:nn("string",Kr._jsonSchemaVersion),vectorValues:nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=/^__.*__$/;class hD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class vT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new aa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{dataSource:r})}}class Lg{constructor(e,t,i,o,c,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Lg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return md(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(bT(this.dataSource)&&uD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class dD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||jd(e)}createContext(e,t,i,o=!1){return new Lg({dataSource:e,methodName:t,targetDoc:i,path:bn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ug(r){const e=r._freezeSettings(),t=jd(r._databaseId);return new dD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function fD(r,e,t,i,o,c={}){const u=r.createContext(c.merge||c.mergeFields?2:0,e,t,o);zg("Data must be an object, but it was:",u,i);const m=_T(i,u);let g,y;if(c.merge)g=new mr(u.fieldMask),y=u.fieldTransforms;else if(c.mergeFields){const _=[];for(const E of c.mergeFields){const N=dl(e,E,t);if(!u.contains(N))throw new de(ee.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);wT(_,N)||_.push(N)}g=new mr(_),y=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=u.fieldTransforms;return new hD(new Jn(m),g,y)}class Ud extends Vg{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ud}}function pD(r,e,t,i){const o=r.createContext(1,e,t);zg("Data must be an object, but it was:",o,i);const c=[],u=Jn.empty();sa(i,((g,y)=>{const _=ET(e,g,t);y=hn(y);const E=o.childContextForFieldPath(_);if(y instanceof Ud)c.push(_);else{const N=iu(y,E);N!=null&&(c.push(_),u.set(_,N))}}));const m=new mr(c);return new vT(u,m,o.fieldTransforms)}function mD(r,e,t,i,o,c){const u=r.createContext(1,e,t),m=[dl(e,i,t)],g=[o];if(c.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)m.push(dl(e,c[N])),g.push(c[N+1]);const y=[],_=Jn.empty();for(let N=m.length-1;N>=0;--N)if(!wT(y,m[N])){const L=m[N];let K=g[N];K=hn(K);const ne=u.childContextForFieldPath(L);if(K instanceof Ud)y.push(L);else{const re=iu(K,ne);re!=null&&(y.push(L),_.set(L,re))}}const E=new mr(y);return new vT(_,E,u.fieldTransforms)}function gD(r,e,t,i=!1){return iu(t,r.createContext(i?4:3,e))}function iu(r,e){if(xT(r=hn(r)))return zg("Unsupported field value:",e,r),_T(r,e);if(r instanceof Vg)return(function(i,o){if(!bT(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const c=[];let u=0;for(const m of i){let g=iu(m,o.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=hn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return JR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=St.fromDate(i);return{timestampValue:ud(o.serializer,c)}}if(i instanceof St){const c=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ud(o.serializer,c)}}if(i instanceof gi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Or)return{bytesValue:Bw(o.serializer,i._byteString)};if(i instanceof Ut){const c=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(c))throw o.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:vg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Kr)return(function(u,m){const g=u instanceof Kr?u.toArray():u;return{mapValue:{fields:{[gw]:{stringValue:yw},[sd]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw m.createError("VectorValues must only contain numeric values.");return pg(m.serializer,_)}))}}}}}})(i,o);if(Qw(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${wd(i)}`)})(r,e)}function _T(r,e){const t={};return uw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(r,((i,o)=>{const c=iu(o,e.childContextForField(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function xT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof St||r instanceof gi||r instanceof Or||r instanceof Ut||r instanceof Vg||r instanceof Kr||Qw(r))}function zg(r,e,t){if(!xT(t)||!lw(t)){const i=wd(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function dl(r,e,t){if((e=hn(e))instanceof Pg)return e._internalPath;if(typeof e=="string")return ET(r,e);throw md("Field path arguments must be of type string or ",r,!1,void 0,t)}const yD=new RegExp("[~\\*/\\[\\]]");function ET(r,e,t){if(e.search(yD)>=0)throw md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Pg(...e.split("."))._internalPath}catch{throw md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function md(r,e,t,i,o){const c=i&&!i.isEmpty(),u=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${i}`),u&&(g+=` in document ${o}`),g+=")"),new de(ee.INVALID_ARGUMENT,m+r+g)}function wT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{convertValue(e,t="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return sa(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){var i,o,c;const t=(c=(o=(i=e.fields)==null?void 0:i[sd].arrayValue)==null?void 0:o.values)==null?void 0:c.map((u=>Ht(u.doubleValue)));return new Kr(t)}convertGeoPoint(e){return new gi(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Nd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const t=Js(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=_t.fromString(e);ot($w(i),9688,{name:e});const o=new zc(i.get(1),i.get(3)),c=new Se(i.popFirst(5));return o.isEqual(t)||$i(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends vD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}const ix="@firebase/firestore",sx="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(dl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bD extends TT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gg{}class _D extends Gg{}function NT(r,e,...t){let i=[];e instanceof Gg&&i.push(e),i=i.concat(t),(function(c){const u=c.filter((g=>g instanceof qg)).length,m=c.filter((g=>g instanceof zd)).length;if(u>1||u>0&&m>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class zd extends _D{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new zd(e,t,i)}_apply(e){const t=this._parse(e);return CT(e._query,t),new eo(e.firestore,e.converter,Am(e._query,t))}_parse(e){const t=Ug(e.firestore);return(function(c,u,m,g,y,_,E){let N;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){lx(E,_);const K=[];for(const ne of E)K.push(ox(g,c,ne));N={arrayValue:{values:K}}}else N=ox(g,c,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||lx(E,_),N=gD(m,u,E,_==="in"||_==="not-in");return tn.create(y,_,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function AT(r,e,t){const i=e,o=dl("where",r);return zd._create(o,i,t)}class qg extends Gg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const m=c.getFlattenedFilters();for(const g of m)CT(u,g),u=Am(u,g)})(e._query,t),new eo(e.firestore,e.converter,Am(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ox(r,e,t){if(typeof(t=hn(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sw(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(_t.fromString(t));if(!Se.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return x_(r,new Se(i))}if(t instanceof Ut)return x_(r,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wd(t)}.`)}function lx(r,e){if(!Array.isArray(r)||r.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CT(r,e){const t=(function(o,c){for(const u of o)for(const m of u.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function xD(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Sc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class La extends TT{constructor(e,t,i,o,c,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(dl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=La._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}La._jsonSchemaVersion="firestore/documentSnapshot/1.0",La._jsonSchema={type:nn("string",La._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class Hh extends La{data(e={}){return super.data(e)}}class Ua{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Sc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Hh(this._firestore,this._userDataWriter,i.key,i,new Sc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((m=>{const g=new Hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Sc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Sc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),_=u.indexOf(m.doc.key)),{type:ED(m.type),doc:g,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ua._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ED(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ua._jsonSchemaVersion="firestore/querySnapshot/1.0",Ua._jsonSchema={type:nn("string",Ua._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(r){r=gr(r,Ut);const e=gr(r.firestore,na),t=Ld(e);return nD(t,r._key).then((i=>DT(e,r,i)))}function RT(r){r=gr(r,eo);const e=gr(r.firestore,na),t=Ld(e),i=new Bg(e);return ST(r._query),rD(t,r._query).then((o=>new Ua(e,i,r,o)))}function kT(r,e,t){r=gr(r,Ut);const i=gr(r.firestore,na),o=xD(r.converter,e),c=Ug(i);return Hg(i,[fD(c,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Qr.none())])}function TD(r,e,t,...i){r=gr(r,Ut);const o=gr(r.firestore,na),c=Ug(o);let u;return u=typeof(e=hn(e))=="string"||e instanceof Pg?mD(c,"updateDoc",r._key,e,t,i):pD(c,"updateDoc",r._key,e),Hg(o,[u.toMutation(r._key,Qr.exists(!0))])}function SD(r){return Hg(gr(r.firestore,na),[new mg(r._key,Qr.none())])}function IT(r,...e){var y,_,E;r=hn(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||ax(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(ax(e[i])){const N=e[i];e[i]=(y=N.next)==null?void 0:y.bind(N),e[i+1]=(_=N.error)==null?void 0:_.bind(N),e[i+2]=(E=N.complete)==null?void 0:E.bind(N)}let c,u,m;if(r instanceof Ut)u=gr(r.firestore,na),m=Ad(r._key.path),c={next:N=>{e[i]&&e[i](DT(u,r,N))},error:e[i+1],complete:e[i+2]};else{const N=gr(r,eo);u=gr(N.firestore,na),m=N._query;const L=new Bg(u);c={next:K=>{e[i]&&e[i](new Ua(u,L,N,K))},error:e[i+1],complete:e[i+2]},ST(r._query)}const g=Ld(u);return tD(g,m,o,c)}function Hg(r,e){const t=Ld(r);return iD(t,e)}function DT(r,e,t){const i=t.docs.get(e._key),o=new Bg(r);return new La(r,o,e._key,i,new Sc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){iR(pl),al(new Ba("firestore",((i,{instanceIdentifier:o,options:c})=>{const u=i.getProvider("app").getImmediate(),m=new na(new oR(i.getProvider("auth-internal")),new uR(u,i.getProvider("app-check-internal")),AR(u,o),u);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),$s(ix,sx,e),$s(ix,sx,"esm2020")})();const ND={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},jT=mE(ND),Fg=nR(jT),Ki=lD(jT),Yg="kstar_karaoke_session",Vn="kstar_active_user",Ln="kstar_user_accounts";let zt=!1;const OT={id:"current-session",participants:[],requests:[],currentRound:null,history:[],messages:[],tickerMessages:[],verifiedSongbook:[],isPlayingVideo:!1,nextRequestNumber:1,maxRequestsPerUser:5,bannedUsers:[]},Lm=typeof window<"u"&&window.chrome&&window.chrome.storage,at={get:async r=>{if(Lm)return(await window.chrome.storage.local.get([r]))[r];const e=localStorage.getItem(r);return e?JSON.parse(e):null},set:async(r,e)=>{Lm?await window.chrome.storage.local.set({[r]:e}):localStorage.setItem(r,JSON.stringify(e)),typeof window<"u"&&(window.dispatchEvent(new Event("kstar_sync")),window.dispatchEvent(new Event("storage")))}};xt.onStateReceived=r=>{zt&&at.set(Yg,r)};xt.onActionReceived=r=>{AD(r)};xt.onPeerConnected=async()=>{if(!zt){const r=await Ze();xt.broadcastState(r)}};async function AD(r){switch(r.type){case"ADD_REQUEST":await Ps(r.payload);break;case"JOIN_SESSION":{const{id:i,profile:o}=r.payload;if(o){const c=await Ft(),u=c.findIndex(m=>m.id===i);u===-1?(c.push(o),await at.set(Ln,c)):(c[u]={...c[u],...o},await at.set(Ln,c))}await zi(i);break}case"TOGGLE_STATUS":await qs(r.payload.id,r.payload.status);break;case"TOGGLE_MIC":await LD(r.payload.id,r.payload.enabled);break;case"DELETE_REQUEST":await Ma(r.payload);break;case"UPDATE_REQUEST":await yd(r.payload.id,r.payload.updates);break;case"ADD_CHAT":await GD(r.senderId,r.payload.name,r.payload.text);break;case"SYNC_PROFILE":if(zt){const i=await Un();i&&i.id===r.payload.id&&await at.set(Vn,r.payload)}const e=await Ft(),t=e.findIndex(i=>i.id===r.payload.id);t>-1?e[t]=r.payload:e.push(r.payload),await at.set(Ln,e);break;case"TOGGLE_FAVORITE":zt||await PT(r.payload,r.senderId);break;case"REORDER_ROUND":await VT(r.payload);break;case"REORDER_REQUESTS":await LT(r.payload);break;case"REORDER_PENDING":await UT(r.payload);break;case"REORDER_MY_REQUESTS":await Um(r.senderId,r.payload.requestId,r.payload.direction);break}}const rm=async(r,e)=>{zt=r==="PARTICIPANT"&&!!e;const t=await xt.initialize(r,e);if(!zt&&t){const i=await Un(),o=(i==null?void 0:i.name)||"SingMode DJ",c=i==null?void 0:i.id;await HD({id:t,hostName:o,hostUid:c,isActive:!0,startedAt:Date.now()}),window.addEventListener("beforeunload",()=>{FD(t)});const u=Vd(Ki,"users");IT(u,m=>{const g=[];m.forEach(y=>{g.push(y.data())}),console.log("Synced users from Firestore:",g.length),at.set(Ln,g)})}},Ze=async()=>{const r=await at.get(Yg)||{...OT};return r.history||(r.history=[]),r.messages||(r.messages=[]),r.tickerMessages||(r.tickerMessages=[]),r.verifiedSongbook||(r.verifiedSongbook=[]),r.isPlayingVideo===void 0&&(r.isPlayingVideo=!1),r.nextRequestNumber||(r.nextRequestNumber=1),r.maxRequestsPerUser===void 0&&(r.maxRequestsPerUser=5),r.bannedUsers||(r.bannedUsers=[]),r},vt=async r=>{await at.set(Yg,r),xt.broadcastState(r)},MT=(r,e)=>{if(e.youtubeUrl&&e.youtubeUrl.trim()!==""){const t=r.verifiedSongbook.find(i=>i.songName.toLowerCase()===e.songName.toLowerCase()&&i.artist.toLowerCase()===e.artist.toLowerCase());if(t)t.youtubeUrl!==e.youtubeUrl&&(t.youtubeUrl=e.youtubeUrl);else{const i={id:Math.random().toString(36).substr(2,9),songName:e.songName,artist:e.artist,youtubeUrl:e.youtubeUrl,type:e.type,addedAt:Date.now()};r.verifiedSongbook.push(i)}}},CD=async r=>{const e=await Ze(),t={...r,id:Math.random().toString(36).substr(2,9),addedAt:Date.now()};e.verifiedSongbook.push(t),await vt(e)},RD=async(r,e)=>{const t=await Ze(),i=t.verifiedSongbook.findIndex(o=>o.id===r);i!==-1&&(t.verifiedSongbook[i]={...t.verifiedSongbook[i],...e},await vt(t))},cx=async r=>{const e=await Ze();e.verifiedSongbook=e.verifiedSongbook.filter(t=>t.id!==r),await vt(e)},kD=async()=>{const r=await Ze(),e={...OT,id:`session-${Date.now()}`,verifiedSongbook:r.verifiedSongbook,nextRequestNumber:1};await vt(e)},Ft=async()=>{let r=await at.get(Ln);if(!r||r.length===0){try{const t=Vd(Ki,"users"),i=await RT(t),o=[];if(i.forEach(c=>o.push(c.data())),o.length>0)return await at.set(Ln,o),o}catch(t){console.error("Error fetching users from Firebase:",t)}return Array.from({length:5},(t,i)=>({id:`singer-${i+1}`,name:`Singer${i+1}`,favorites:[],personalHistory:[],createdAt:Date.now()}))}return r},$a=async(r,e)=>{try{const t=ru(Ki,"users",r);if(e.name&&(await Ft()).find(m=>{var g;return m.id!==r&&m.name.toLowerCase()===((g=e.name)==null?void 0:g.toLowerCase())}))return{success:!1,error:"Username already exists."};await TD(t,e);const i=await Ft(),o=i.findIndex(c=>c.id===r);if(o>-1){i[o]={...i[o],...e},await at.set(Ln,i);const c=await Un();c&&c.id===r&&await at.set(Vn,i[o]),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:i[o],senderId:"DJ"})}return{success:!0}}catch(t){return console.error("Error updating account:",t),{success:!1,error:t.message}}},ID=async(r,e)=>{const t=await Ft(),i=t.findIndex(o=>o.id===r);if(i>-1){const o=t[i].favorites.filter(c=>c.id!==e);await $a(r,{favorites:o})}},DD=async(r,e,t)=>{const i=await Ft(),o=i.findIndex(c=>c.id===r);if(o>-1){const c=[...i[o].favorites],u=c.findIndex(m=>m.id===e);u>-1&&(c[u]={...c[u],...t},await $a(r,{favorites:c}))}},jD=async(r,e)=>{const t=await Ft(),i=t.findIndex(o=>o.id===r);if(i>-1){const o={...e,id:Math.random().toString(36).substr(2,9)},c=[...t[i].favorites,o];await $a(r,{favorites:c})}},OD=async(r,e)=>{const t=await Ft(),i=t.findIndex(o=>o.id===r);if(i>-1){const o=t[i].personalHistory.filter(c=>c.id!==e);await $a(r,{personalHistory:o})}},MD=async(r,e,t)=>{const i=await Ft(),o=i.findIndex(c=>c.id===r);if(o>-1){const c=[...i[o].personalHistory],u=c.findIndex(m=>m.id===e);u>-1&&(c[u]={...c[u],...t},await $a(r,{personalHistory:c}))}},Fh=async r=>{await gd(r);try{let t=await Ft();t=t.filter(i=>i.id!==r),await at.set(Ln,t)}catch(t){console.error("Error deleting account",t)}const e=await Un();e&&e.id===r&&await Bd()},Un=async()=>await at.get(Vn),Hc=async(r,e=!1)=>{var t;try{let i=r.id;const o=!!(r.password&&r.email),c=!!(r.password&&!r.email);if(o)try{i=(await BA(Fg,r.email,r.password)).user.uid}catch(y){if(y.code==="auth/email-already-in-use")return{success:!1,error:"Email already in use."};throw y}else if(c){if((await Ft()).find(E=>{var N;return E.name.toLowerCase()===((N=r.name)==null?void 0:N.trim().toLowerCase())}))return{success:!1,error:"Username already taken."};i=ux()||`user-${Date.now()}-${Math.random().toString(36).substr(2,5)}`}else i=r.id||ux()||`guest-${Math.random().toString(36).substr(2,9)}`;const u={id:i,name:((t=r.name)==null?void 0:t.trim())||"Guest",email:r.email||void 0,password:c?r.password:void 0,isGuest:!o&&!c,favorites:r.favorites||[],personalHistory:r.personalHistory||[],createdAt:Date.now()},m=JSON.parse(JSON.stringify(u));await kT(ru(Ki,"users",i),m);const g=await Ft();return g.some(y=>y.id===i)||(g.push(u),await at.set(Ln,g)),e?await at.set(Vn,u):zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:u,senderId:"DJ"}),{success:!0,profile:u}}catch(i){return console.error("Registration error:",i),{success:!1,error:i.message}}},ux=()=>{},PD=async(r,e)=>{if(r.toLowerCase()==="singmaster"&&e==="Organized"){const o={id:"admin-singmaster",name:"SingMaster",password:"Organized",favorites:[],personalHistory:[],createdAt:Date.now()};return await at.set(Vn,o),{success:!0,profile:o}}const t=await Ft();let i=t.find(o=>o.name.toLowerCase()===r.toLowerCase());if(!i)try{const o=Vd(Ki,"users"),c=NT(o,AT("name","==",r)),u=await RT(c);u.empty||(i=u.docs[0].data(),t.push(i),await at.set(Ln,t))}catch(o){console.warn("Error checking remote user:",o)}if(!i&&!e)return await Hc({name:r},!0);if(e)try{const o=`${r.replace(/\s+/g,"").toLowerCase()}@singmode.app`,u=(await GA(Fg,o,e)).user.uid,m=await wD(ru(Ki,"users",u));if(m.exists()){const g=m.data();return await at.set(Vn,g),{success:!0,profile:g}}else return i?{success:!0,profile:i}:{success:!1,error:"Profile data missing."}}catch(o){return console.warn("Firebase login failed, checking legacy local storage:",o),i?i.password&&i.password===e?(await at.set(Vn,i),{success:!0,profile:i}):{success:!1,error:"Incorrect passkey."}:{success:!1,error:o.message||"Login failed."}}return i&&!i.password?{success:!0,profile:i}:{success:!1,error:"User handle not found."}},Bd=async()=>{await FA(Fg),Lm?await window.chrome.storage.local.remove([Vn]):localStorage.removeItem(Vn),window.dispatchEvent(new Event("kstar_sync"))},zi=async r=>{var c;const e=await Ze(),t=(c=e.bannedUsers)==null?void 0:c.find(u=>u.id===r);if(t)throw new Error(`ACCESS DENIED: ${t.reason}`);if(zt){const u=await Un();return xt.sendAction({type:"JOIN_SESSION",payload:{id:r,profile:u},senderId:r}),{id:r,name:(u==null?void 0:u.name)||"Joining...",status:Ot.STANDBY,joinedAt:Date.now()}}const o=(await Ft()).find(u=>u.id===r);if(!o){const u=await Un();if(u&&u.id===r)return await hx(e,u);throw new Error("Profile not found")}return await hx(e,o)},hx=async(r,e)=>{const t={id:e.id,name:e.name,status:Ot.STANDBY,micEnabled:!1,joinedAt:Date.now()},i=r.participants.findIndex(o=>o.id===e.id);return i>-1?r.participants[i]={...r.participants[i],...t,status:r.participants[i].status}:r.participants.push(t),await vt(r),t},dx=async(r,e)=>{const t=await Ft(),i=t.findIndex(o=>o.id===r);if(i>-1){t[i].vocalRange=e,await at.set(Ln,t),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:t[i],senderId:"DJ"});const o=await Un();o&&o.id===r&&await at.set(Vn,t[i])}},PT=async(r,e)=>{var c;const t=e||((c=await Un())==null?void 0:c.id);if(!t)return;if(zt&&!e){xt.sendAction({type:"TOGGLE_FAVORITE",payload:r,senderId:t});const u=await Un();if(u){const m=u.favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);m>-1?u.favorites.splice(m,1):u.favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await at.set(Vn,u)}return}const i=await Ft(),o=i.findIndex(u=>u.id===t);if(o>-1){const u=i[o].favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);u>-1?i[o].favorites.splice(u,1):i[o].favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await at.set(Ln,i),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:i[o],senderId:"DJ"});const m=await Un();m&&m.id===t&&await at.set(Vn,i[o])}},gd=async r=>{const e=await Ze(),i=e.requests.filter(o=>o.participantId===r).map(o=>({...o,playedAt:Date.now(),status:Be.DONE,isInRound:!1}));i.length>0&&(e.history=[...i,...e.history].slice(0,100)),e.participants=e.participants.filter(o=>o.id!==r),e.requests=e.requests.filter(o=>o.participantId!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(o=>o.participantId!==r),e.currentRound.length===0&&(e.currentRound=null)),await vt(e)},qs=async(r,e)=>{if(zt){xt.sendAction({type:"TOGGLE_STATUS",payload:{id:r,status:e},senderId:r});return}const t=await Ze(),i=t.participants.find(o=>o.id===r);i&&(i.status=e,await vt(t))},fx=async(r,e,t)=>{const i=await Ze();i.bannedUsers||(i.bannedUsers=[]),i.bannedUsers.push({id:r,name:e,reason:t,bannedAt:Date.now()}),await vt(i),await gd(r)},VD=async r=>{const e=await Ze();e.maxRequestsPerUser=r,await vt(e)},Um=async(r,e,t)=>{if(zt){xt.sendAction({type:"REORDER_MY_REQUESTS",payload:{requestId:e,direction:t},senderId:r});return}const i=await Ze(),o=i.requests.filter(_=>_.participantId===r&&_.status!==Be.DONE),c=o.findIndex(_=>_.id===e);if(c===-1)return;const u=t==="up"?c-1:c+1;if(u<0||u>=o.length)return;const[m]=o.splice(c,1);o.splice(u,0,m);const g=[...i.requests];g.map((_,E)=>_.participantId===r&&_.status!==Be.DONE?E:-1).filter(_=>_!==-1).forEach((_,E)=>{g[_]=o[E]}),i.requests=g,await vt(i)},LD=async(r,e)=>{if(zt){xt.sendAction({type:"TOGGLE_MIC",payload:{id:r,enabled:e},senderId:r});return}const t=await Ze(),i=t.participants.find(o=>o.id===r);i&&(i.micEnabled=e,await vt(t))},Ps=async r=>{if(zt)return xt.sendAction({type:"ADD_REQUEST",payload:r,senderId:r.participantId}),null;const e=await Ze(),t=e.nextRequestNumber++,i={...r,id:Math.random().toString(36).substr(2,9),requestNumber:t,createdAt:Date.now(),status:Be.PENDING,isInRound:!1},o=e.requests.filter(g=>g.participantId===r.participantId&&g.status===Be.PENDING).length;if(e.maxRequestsPerUser&&o>=e.maxRequestsPerUser)throw new Error(`Request limit reached. Max ${e.maxRequestsPerUser} requests allowed per performer.`);e.requests.unshift(i),MT(e,i);const c=await Ft(),u=c.findIndex(g=>g.id===r.participantId);u>-1&&(c[u].personalHistory=[i,...c[u].personalHistory].slice(0,50),await at.set(Ln,c),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:c[u],senderId:"DJ"}));const m=await Un();if(m&&m.id===r.participantId){const g=c.find(y=>y.id===r.participantId);g&&await at.set(Vn,g)}return await vt(e),i},yd=async(r,e)=>{if(zt){xt.sendAction({type:"UPDATE_REQUEST",payload:{id:r,updates:e},senderId:"client"});return}const t=await Ze(),i=t.requests.findIndex(c=>c.id===r);let o="";if(i!==-1&&(t.requests[i]={...t.requests[i],...e},o=t.requests[i].participantId,MT(t,t.requests[i])),t.currentRound){const c=t.currentRound.findIndex(u=>u.id===r);c!==-1&&(t.currentRound[c]={...t.currentRound[c],...e},o=t.currentRound[c].participantId)}if(o){const c=await Ft(),u=c.findIndex(g=>g.id===o);if(u>-1){const g=c[u].personalHistory.findIndex(y=>y.id===r);g!==-1&&(c[u].personalHistory[g]={...c[u].personalHistory[g],...e},await at.set(Ln,c),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:c[u],senderId:"DJ"}))}const m=await Un();if(m&&m.id===o){const g=c.find(y=>y.id===o);g&&await at.set(Vn,g)}}await vt(t)},yc=async r=>{const e=await Ze(),t=e.requests.find(i=>i.id===r);t&&(t.status=Be.APPROVED,await vt(e))},UD=async r=>{const e=await Ze(),t=e.requests.findIndex(o=>o.id===r);if(t===-1)return;const i=e.requests[t];i.status=Be.APPROVED,i.isInRound=!0,e.currentRound?e.currentRound.push({...i}):e.currentRound=[{...i}],await vt(e)},px=async r=>{if(zt)return;const e=await Ze(),t=e.requests.find(i=>i.id===r);if(t){if(t.status=Be.DONE,t.completedAt=Date.now(),e.currentRound){const i=e.currentRound.find(o=>o.id===r);i&&(i.status=Be.DONE,i.completedAt=Date.now())}await vt(e)}},Ma=async r=>{if(zt){xt.sendAction({type:"DELETE_REQUEST",payload:r,senderId:"client"});return}const e=await Ze();e.requests=e.requests.filter(t=>t.id!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(t=>t.id!==r),e.currentRound.length===0&&(e.currentRound=null)),await vt(e)},mx=async(r,e)=>{const t=await Ze(),i=t.requests.findIndex(c=>c.id===r);if(i===-1)return;const o=e==="up"?i-1:i+1;if(o>=0&&o<t.requests.length){const c=t.requests[i];t.requests[i]=t.requests[o],t.requests[o]=c,await vt(t)}},zD=async()=>{const r=await Ze(),e=r.participants.filter(i=>r.requests.some(o=>o.participantId===i.id&&o.status===Be.APPROVED&&o.type===yt.SINGING&&!o.isInRound)).sort((i,o)=>(o.joinedAt||0)-(i.joinedAt||0)),t=[];e.forEach(i=>{const o=r.requests.find(c=>c.participantId===i.id&&c.status===Be.APPROVED&&c.type===yt.SINGING&&!c.isInRound);o&&(o.isInRound=!0,t.push({...o}),i.status=Ot.READY)}),t.length>0&&(r.currentRound=t,await vt(r))},VT=async r=>{const e=await Ze();e.currentRound=r,await vt(e)},LT=async r=>{const e=await Ze(),t=e.requests.filter(i=>!(i.status===Be.APPROVED&&i.type===yt.SINGING&&!i.isInRound));e.requests=[...r,...t],await vt(e)},UT=async r=>{const e=await Ze(),t=e.requests.filter(i=>!(i.status===Be.PENDING&&!i.isInRound));e.requests=[...r,...t],await vt(e)},BD=async()=>{const r=await Ze();if(!r.currentRound)return;const e=[...r.currentRound].sort((m,g)=>m.completedAt&&g.completedAt?m.completedAt-g.completedAt:m.completedAt?-1:g.completedAt?1:0),t=Date.now(),i=e.map(m=>({...m,playedAt:t,isInRound:!1,status:Be.DONE,completedAt:m.completedAt||t})),o=r.currentRound.map(m=>m.id);r.history=[...i,...r.history].slice(0,100),r.requests=r.requests.filter(m=>!o.includes(m.id));const c=await Ft();for(const m of i){const g=c.findIndex(y=>y.id===m.participantId);g!==-1&&(c[g].personalHistory=[m,...c[g].personalHistory].slice(0,50))}await at.set(Ln,c);const u=await Un();if(u){const m=c.find(g=>g.id===u.id);m&&await at.set(Vn,m)}r.currentRound=null,r.isPlayingVideo=!1,await vt(r)},im=async(r,e)=>{const t=await Ze(),i=t.nextRequestNumber++,o={...r,id:Math.random().toString(36).substr(2,9),requestNumber:i,createdAt:Date.now(),status:Be.APPROVED,isInRound:!1,playedAt:void 0,aiIntro:void 0};t.requests.push(o),await vt(t)},gx=async()=>{const r=await Ze();r.history=[],await vt(r)},GD=async(r,e,t)=>{if(zt){xt.sendAction({type:"ADD_CHAT",payload:{name:e,text:t},senderId:r});return}const i=await Ze(),o={id:Math.random().toString(36).substr(2,9),senderId:r,senderName:e,text:t,timestamp:Date.now()};i.messages||(i.messages=[]),i.messages.push(o),await vt(i)},qD=async()=>{const r=await Ft(),e=Date.now(),t=1440*60*1e3,i=r.filter(o=>!o.password&&o.createdAt&&e-o.createdAt>t);if(i.length>0){for(const o of i)await Fh(o.id);console.log(`Cleaned up ${i.length} expired guest accounts.`)}},HD=async r=>{try{const e={...r,participantsCount:0};await kT(ru(Ki,"sessions",r.id),e)}catch(e){console.error("Error registering session:",e)}},FD=async r=>{try{const e=ru(Ki,"sessions",r);await SD(e)}catch(e){console.error("Error unregistering session:",e)}},YD=r=>{const e=Vd(Ki,"sessions"),t=NT(e,AT("isActive","==",!0));return IT(t,i=>{const o=[];i.forEach(c=>{o.push(c.data())}),r(o)})},zT=({onSubmit:r,onCancel:e,title:t="Song Request",showSingerName:i=!1,initialSingerName:o="",initialSongName:c="",initialArtist:u="",initialYoutubeUrl:m="",initialType:g=yt.SINGING,submitLabel:y="SEND REQUEST",participants:_=[],currentUserId:E=""})=>{const[N,L]=ie.useState(o),K=N?`${t}: ${N}`:t,[ne,re]=ie.useState(c),[me,we]=ie.useState(u),[ve,_e]=ie.useState(m),[Ue,Ae]=ie.useState(g),[C,A]=ie.useState(""),[R,P]=ie.useState(""),D=j=>{if(j.preventDefault(),(!ne||!me)&&!ve||i&&!N)return;const k=_.find(rt=>rt.id===R);r({singerName:N,songName:ne,artist:me,youtubeUrl:ve,type:Ue,message:C,duetPartnerId:R||void 0,duetPartnerName:k==null?void 0:k.name})};return d.jsxs("form",{onSubmit:D,className:"relative w-full bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in fade-in zoom-in-95 duration-300",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),d.jsxs("div",{className:"mb-8 text-center",children:[d.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase tracking-tight neon-text-glow-purple mb-2",children:K}),d.jsx("p",{className:"text-[10px] text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80",children:"NEW REQUEST"})]}),d.jsxs("div",{className:"space-y-6",children:[i&&d.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[d.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Your Name"}),d.jsx("input",{type:"text",required:!0,value:N,onChange:j=>L(j.target.value),placeholder:"e.g. STAR_VIBE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Song Title"}),d.jsx("input",{type:"text",value:ne,onChange:j=>re(j.target.value),placeholder:"TITLE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Artist"}),d.jsx("input",{type:"text",value:me,onChange:j=>we(j.target.value),placeholder:"ARTIST",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"YouTube URL (Optional)"}),d.jsx("input",{type:"url",value:ve,onChange:j=>_e(j.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all text-xs font-mono shadow-inner tracking-wider"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Note for DJ"}),d.jsx("textarea",{value:C,onChange:j=>A(j.target.value),placeholder:"Key change? Dedication?",rows:2,className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest resize-none"})]}),Ue===yt.SINGING&&_.length>1&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Duet Partner (Optional)"}),d.jsxs("select",{value:R,onChange:j=>P(j.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-green)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest appearance-none",children:[d.jsx("option",{value:"",children:"-- NO PARTNER --"}),_.filter(j=>j.id!==E).map(j=>d.jsx("option",{value:j.id,children:j.name},j.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Performance Mode"}),d.jsx("div",{className:"flex bg-black/40 p-1.5 rounded-2xl border-2 border-white/5",children:Object.values(yt).map(j=>d.jsx("button",{type:"button",onClick:()=>Ae(j),className:`flex-1 py-3 rounded-xl font-bold text-[9px] uppercase tracking-widest transition-all font-righteous ${Ue===j?"bg-[var(--neon-cyan)] text-black shadow-[0_0_20px_rgba(0,229,255,0.4)]":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:j},j))})]}),d.jsxs("div",{className:"flex gap-4 pt-6",children:[d.jsx("button",{type:"button",onClick:e,className:"flex-1 py-4 bg-black hover:bg-white/5 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all border-2 border-white/10 font-righteous",children:"DISCARD"}),d.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_30px_rgba(255,0,127,0.4)] transition-all font-righteous hover:scale-105",children:y})]})]})]})};function $g(){if(typeof window>"u")return"";const r=window.location.origin;if(!r.includes("localhost")&&!r.includes("127.0.0.1"))return r+window.location.pathname;const e=localStorage.getItem("kstar_network_ip");if(e){if(e.startsWith("http"))return e;const t=window.location.port;return`http://${e}:${t}${window.location.pathname}`}return r+window.location.pathname}function BT(r){localStorage.setItem("kstar_network_ip",r),window.dispatchEvent(new Event("kstar_sync"))}function GT(){return localStorage.getItem("kstar_network_ip")}const $D=[{songName:"Bohemian Rhapsody",artist:"Queen"},{songName:"Toxic",artist:"Britney Spears"},{songName:"Someone Like You",artist:"Adele"},{songName:"Sweet Caroline",artist:"Neil Diamond"},{songName:"Wonderwall",artist:"Oasis"},{songName:"Dancing Queen",artist:"ABBA"},{songName:"I Will Survive",artist:"Gloria Gaynor"},{songName:"Don't Stop Believin'",artist:"Journey"},{songName:"Livin' on a Prayer",artist:"Bon Jovi"},{songName:"My Way",artist:"Frank Sinatra"}],Ms=({url:r})=>r?d.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-3 rounded-2xl text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border-2 border-[var(--neon-cyan)]/10 transition-all shadow-xl",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),d.jsx("polyline",{points:"15 3 21 3 21 9"}),d.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,QD=({url:r})=>{const[e,t]=ie.useState(!1);if(!r)return null;const i=()=>{navigator.clipboard.writeText(r).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return d.jsx("button",{onClick:i,title:"Copy Video URL",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-cyan)] text-black border-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)]":"text-slate-400 hover:text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/10 border-white/5 shadow-xl"}`,children:e?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("polyline",{points:"20 6 9 17 4 12"})}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),d.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1-2-2h9a2 2 0 0 1 2 2v1"})]})})},$o=({request:r})=>{const[e,t]=ie.useState(!1),i=r.songName||r.songName,o=()=>{const u=(r.type||r.type||yt.SINGING)===yt.SINGING?" Karaoke":" Lyric",m=`${i} ${r.artist}${u}`;navigator.clipboard.writeText(m).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return d.jsx("button",{onClick:o,title:"Copy Command String",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-green)] text-black border-[var(--neon-green)] shadow-[0_0_20px_rgba(0,255,157,0.4)]":"text-slate-400 hover:text-[var(--neon-green)] hover:bg-[var(--neon-green)]/10 border-white/5 shadow-xl"}`,children:e?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("polyline",{points:"20 6 9 17 4 12"})}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),d.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})},vc=({request:r})=>{const e=r.songName||r.songName,t=()=>{const o=(r.type||r.type||yt.SINGING)===yt.SINGING?" Karaoke":" Lyric",c=encodeURIComponent(`${e} ${r.artist}${o}`);window.open(`https://www.youtube.com/results?search_query=${c}`,"_blank")};return d.jsx("button",{onClick:t,title:"Search on YouTube",className:"p-3 rounded-2xl transition-all border-2 text-rose-500 hover:text-white hover:bg-rose-500 border-white/5 shadow-xl",children:d.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})})},KD=({onAdminAccess:r})=>{var ts;const[e,t]=ie.useState(null),[i,o]=ie.useState([]),[c,u]=ie.useState(!1),[m,g]=ie.useState(!1),[y,_]=ie.useState(null),[E,N]=ie.useState(!1),[L,K]=ie.useState(!1),[ne,re]=ie.useState(!1),[me,we]=ie.useState(!1),[ve,_e]=ie.useState(!1),[Ue,Ae]=ie.useState([]),[C,A]=ie.useState(null),[R,P]=ie.useState(null),[D,j]=ie.useState(null),[k,rt]=ie.useState({}),[bt,Y]=ie.useState(!1),[se,xe]=ie.useState(GT()||""),[Pe,Ge]=ie.useState(""),[M,$]=ie.useState(!1),[oe,he]=ie.useState(0),[Ce,De]=ie.useState(null),[qe,Nt]=ie.useState(new Set),[X,ue]=ie.useState(""),[Me,Et]=ie.useState(null),[Yt,xn]=ie.useState("COMMAND"),[Ye,an]=ie.useState(""),[Wn,oa]=ie.useState(""),At=ie.useRef(null);ie.useRef(null);const Dt=ie.useRef(null),Mr=ie.useRef(null),[yr,vr]=ie.useState(null),[Ee,on]=ie.useState(null),[la,Pr]=ie.useState(!1),[jn,Ji]=ie.useState({name:"",password:""}),[vi,Zn]=ie.useState(""),[to,En]=ie.useState(!1),[$t,wn]=ie.useState(""),ce=ie.useCallback(async()=>{const T=await Ze();t(T);const J=await Ft();o(J)},[]);ie.useEffect(()=>{if(Ee&&i.length>0){const T=i.find(J=>J.id===Ee.id);T&&JSON.stringify(T)!==JSON.stringify(Ee)&&on(T)}},[i,Ee]),ie.useEffect(()=>(ce(),window.addEventListener("kstar_sync",ce),window.addEventListener("storage",ce),()=>{window.removeEventListener("kstar_sync",ce),window.removeEventListener("storage",ce),no()}),[ce]),ie.useEffect(()=>{(!(e!=null&&e.currentRound)||e.currentRound.length===0)&&Nt(new Set)},[e==null?void 0:e.currentRound]);const no=()=>{Mr.current&&cancelAnimationFrame(Mr.current),Dt.current&&(Dt.current.getTracks().forEach(T=>T.stop()),Dt.current=null),At.current&&(At.current.close(),At.current=null),$(!1),he(0)},bi=async(T,J,G)=>{const le=`Taking the stage now, it's ${T} with "${J}"!`;await yd(G,{aiIntro:le}),rt(ye=>({...ye,[G]:le})),await ce()},ro=async T=>{if(R&&Ee)R.type==="favorite"?await DD(Ee.id,R.itemId,{songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type}):await MD(Ee.id,R.itemId,{songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type,message:T.message}),P(null);else if(C)await yd(C.id,{participantName:T.singerName||C.participantName,songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type,message:T.message}),A(null);else if(y)await RD(y.id,{songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type}),_(null);else if(m)await CD({songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type}),g(!1);else{let J=(D==null?void 0:D.id)||"DJ-MANUAL",G=T.singerName||(D==null?void 0:D.name)||"Guest";if(!D&&T.singerName){const le=await Hc({name:T.singerName});le.success&&le.profile&&(J=le.profile.id,G=le.profile.name,await zi(J))}await Ps({participantId:J,participantName:G,songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type,message:T.message}),u(!1),j(null)}await ce()},er=async T=>{await zi(T.id);const J=[...$D];for(let G=0;G<3&&J.length!==0;G++){const le=Math.floor(Math.random()*J.length),ye=J.splice(le,1)[0],Pt=await Ps({participantId:T.id,participantName:T.name,songName:ye.songName,artist:ye.artist,type:yt.SINGING});Pt&&await yc(Pt.id)}await qs(T.id,Ot.READY),await ce()},Vr=(T,J,G)=>{const le=G===yt.SINGING?`${T} ${J} karaoke`:`${T} ${J} Lyrics Letra`,ye=`https://www.youtube.com/results?search_query=${encodeURIComponent(le)}`;window.open(ye,"_blank")},Ct=async T=>{var le;await UD(T),await ce();const G=(le=(await Ze()).currentRound)==null?void 0:le.find(ye=>ye.id===T);G&&bi(G.participantName,G.songName,G.id)},br=T=>{T.youtubeUrl?window.open(T.youtubeUrl,"_blank"):Vr(T.songName,T.artist,T.type)},_r=async T=>{T.preventDefault(),Zn("");const J={name:jn.name,password:jn.password||void 0};let G;yr?G=await $a(yr.id,J):G=await Hc(J),G.success?(vr(null),Pr(!1),Ji({name:"",password:""}),Zn(""),await ce()):Zn(G.error||"Action failed.")},[Tn,io]=ie.useState(null),[so,tr]=ie.useState(null),Wr=(T,J,G)=>{io(J),tr(G),T.dataTransfer.effectAllowed="move"},ao=T=>{T.preventDefault(),T.dataTransfer.dropEffect="move"},Zr=async(T,J,G)=>{if(T.preventDefault(),!(Tn===null||so!==G)){if(G==="ROUND"&&(e!=null&&e.currentRound)){const le=Array.from(e.currentRound),[ye]=le.splice(Tn,1);le.splice(J,0,ye),await VT(le)}else if(G==="QUEUE"){const ye=Array.from(Lr),[Pt]=ye.splice(Tn,1);ye.splice(J,0,Pt),await LT(ye)}else if(G==="PENDING"){const ye=Array.from(jt),[Pt]=ye.splice(Tn,1);ye.splice(J,0,Pt),await UT(ye)}io(null),tr(null),await ce()}},Wi=T=>{vr(T),Pr(!0),Ji({name:T.name,password:T.password||""})},ca=T=>{vr(T),wn(""),En(!0),Zn("")},_i=async T=>{if(T.preventDefault(),!yr)return;const J=await $a(yr.id,{password:$t});J.success?(vr(null),En(!1),wn(""),Zn(""),await ce()):Zn(J.error||"Update failed.")},nr=()=>{u(!1),A(null),P(null),j(null),N(!1),K(!1),re(!1),we(!1),_e(!1),Pr(!1),En(!1),vr(null),on(null),Y(!1),g(!1),_(null),Et(null)},oo=()=>{BT(se),Y(!1),ce()},rr=async()=>{await zD(),K(!1),await ce();const T=await Ze();T.currentRound&&T.currentRound.forEach(J=>{J.aiIntro||bi(J.participantName,J.songName,J.id)})},ir=async()=>{await kD(),_e(!1),await ce()},mt=T=>{const J=i.find(G=>G.id===T);J&&(on(J),re(!0))};if(!e)return d.jsx("div",{className:"flex items-center justify-center p-20 min-h-screen",children:d.jsx("div",{className:"w-12 h-12 border-4 border-teal-400 border-t-transparent rounded-full animate-spin"})});const jt=e.requests.filter(T=>T.status===Be.PENDING&&!T.isInRound),sr=e.requests.filter(T=>T.status===Be.APPROVED&&T.type===yt.SINGING&&!T.isInRound),Zi=e.participants.filter(T=>sr.some(J=>J.participantId===T.id)).sort((T,J)=>(J.joinedAt||0)-(T.joinedAt||0)),xr={};sr.forEach(T=>{xr[T.participantId]||(xr[T.participantId]=[]),xr[T.participantId].push(T)}),Object.keys(xr).forEach(T=>{xr[T].sort((J,G)=>J.createdAt-G.createdAt)});const Lr=[];let es=0,Bn=!0;for(;Bn;)Bn=!1,Zi.forEach(T=>{xr[T.id]&&xr[T.id][es]&&(Lr.push(xr[T.id][es]),Bn=!0)}),es++;const xi=e.requests.filter(T=>T.status===Be.APPROVED&&T.type===yt.LISTENING&&!T.isInRound),ar=e.participants.filter(T=>T.status===Ot.READY).length,dn=e.verifiedSongbook||[],Sn=xt.getRoomId(),On=$g()+(Sn?`?room=${Sn}`:""),Rt=({name:T,isActive:J})=>{const G=T.split(" ").map(Pt=>Pt[0]).join("").toUpperCase().slice(0,2),le=["from-teal-400 to-indigo-500","from-rose-400 to-orange-500","from-amber-400 to-rose-500","from-indigo-400 to-purple-500","from-emerald-400 to-teal-500"],ye=T.length%le.length;return d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${le[ye]} p-[2px] shadow-lg shadow-black/20`,children:d.jsx("div",{className:"w-full h-full bg-slate-950 rounded-[14px] flex items-center justify-center",children:d.jsx("span",{className:"text-xl font-black text-white tracking-widest",children:G})})}),J&&d.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-[var(--neon-green)] rounded-full border-4 border-slate-950 animate-pulse"})]})};return d.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-8 space-y-12 relative font-inter text-slate-300",children:[d.jsxs("header",{className:"relative rounded-[4rem] p-1 overflow-hidden shadow-3xl mb-12 group",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] opacity-80 group-hover:opacity-100 transition-all duration-1000 animate-gradient-x"}),d.jsxs("div",{className:"relative glass-panel rounded-[3.9rem] p-10 flex flex-col md:flex-row justify-between items-center gap-12 border border-white/20 backdrop-blur-3xl",children:[d.jsxs("div",{className:"flex items-center gap-10",children:[d.jsxs("div",{className:"relative group/logo",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-[var(--neon-yellow)] to-[var(--neon-pink)] rounded-full blur-xl opacity-60 group-hover/logo:opacity-100 transition-opacity duration-500"}),d.jsx("div",{className:"relative p-1.5 rounded-full border-4 border-white/10 shadow-2xl bg-black/40",children:d.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-32 h-32 rounded-full transition-transform duration-700 group-hover/logo:rotate-[360deg]"})})]}),d.jsxs("div",{children:[d.jsxs("h1",{className:"text-8xl font-bold font-bungee text-white flex items-center gap-6 uppercase tracking-tight neon-glow-pink leading-none",children:["SINGMODE ",d.jsx("span",{className:"text-[var(--neon-blue)] neon-glow-cyan text-5xl font-righteous translate-y-2",children:"beta"})]}),d.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[d.jsx("span",{className:"px-4 py-1.5 rounded-full bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] text-lg font-bold uppercase tracking-widest font-righteous",children:"DJ CONSOLE"}),d.jsx("span",{className:"text-[var(--neon-blue)]/30",children:"||"}),d.jsxs("span",{className:"text-[var(--neon-blue)] text-lg font-bold uppercase tracking-widest font-righteous neon-glow-cyan",children:["SINGERS: ",e.participants.length]})]})]})]}),d.jsx("div",{className:"flex gap-4",children:d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-base text-[var(--neon-yellow)] font-bold uppercase tracking-widest font-righteous mb-1",children:"STATUS"}),d.jsxs("div",{className:"text-4xl text-white font-bold uppercase tracking-widest font-bungee flex items-center justify-end gap-3",children:["ONLINE ",d.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-pulse shadow-[0_0_10px_var(--neon-green)]"})]})]})})]})]}),d.jsx("div",{className:"sticky top-4 z-50",children:d.jsxs("div",{className:"glass-panel p-4 rounded-[2.5rem] border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-wrap items-center gap-4 backdrop-blur-3xl",children:[d.jsxs("div",{className:"flex gap-3 p-2 bg-black/40 rounded-[2rem] border border-white/5",children:[d.jsxs("button",{onClick:()=>u(!0),className:"px-8 py-4 bg-[var(--neon-pink)] text-black font-black hover:bg-white transition-all active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(255,42,109,0.4)] text-lg uppercase tracking-[0.2em] font-righteous flex items-center gap-3 group",children:[d.jsx("span",{className:"text-3xl group-hover:rotate-90 transition-transform",children:""})," ADD SONG"]}),d.jsxs("button",{onClick:()=>{K(!0),ce()},className:"px-8 py-4 bg-[var(--neon-blue)] text-black font-black hover:bg-white transition-all uppercase tracking-[0.2em] text-lg active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(5,217,232,0.4)] font-righteous flex items-center gap-3 group",children:[d.jsx("span",{className:"text-3xl group-hover:animate-spin",children:""})," NEXT ROUND"]})]}),d.jsx("div",{className:"w-[1px] h-12 bg-white/10 mx-2"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>N(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-yellow)] border border-[var(--neon-yellow)]/30 bg-[var(--neon-yellow)]/5 hover:bg-[var(--neon-yellow)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(255,200,87,0.1)] group",children:d.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),d.jsx("button",{onClick:()=>re(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-blue)] border border-[var(--neon-blue)]/30 bg-[var(--neon-blue)]/5 hover:bg-[var(--neon-blue)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(5,217,232,0.1)] group",children:d.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),d.jsx("button",{onClick:()=>_e(!0),className:"w-14 h-14 flex items-center justify-center text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group",children:d.jsx("span",{className:"text-4xl group-hover:rotate-12 transition-transform",children:""})}),r&&d.jsxs("button",{onClick:r,title:"ADMIN PORTAL",className:"w-14 h-14 flex items-center justify-center text-[var(--neon-purple)] border border-[var(--neon-purple)]/30 bg-[var(--neon-purple)]/5 hover:bg-[var(--neon-purple)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(147,51,234,0.1)] group ml-4 relative",children:[d.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""}),d.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[var(--neon-pink)] rounded-full animate-pulse border-2 border-black"})]}),d.jsxs("button",{onClick:async()=>{confirm("Are you sure you want to sign out?")&&(await Bd(),window.location.reload())},title:"SIGN OUT",className:"px-6 h-14 flex items-center justify-center gap-3 text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group ml-2",children:[d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.jsx("polyline",{points:"16 17 21 12 16 7"}),d.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),d.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-righteous",children:"SIGN_OUT"})]})]}),d.jsx("div",{className:"flex-1"}),d.jsx("div",{className:"flex gap-2 p-2 bg-black/40 rounded-[2rem] border border-white/5 overflow-x-auto no-scrollbar",children:["COMMAND","ROTATION","PERFORMERS","LIBRARY"].map(T=>d.jsx("button",{onClick:()=>{xn(T)},className:`px-8 py-3 text-base font-bold uppercase tracking-widest transition-all rounded-[1.2rem] font-righteous ${Yt===T?"bg-white text-black shadow-[0_0_30px_rgba(255,255,255,0.4)] scale-105":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:T==="COMMAND"?"CONTROLS":T==="ROTATION"?"STAGE":T==="PERFORMERS"?"SINGERS":"SONGBOOK"},T))})]})}),d.jsxs("main",{className:"min-h-[600px] animate-in fade-in duration-500",children:[Yt==="COMMAND"&&d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 animate-in slide-in-from-bottom-2",children:[d.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[e.currentRound&&d.jsxs("section",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-[0_0_100px_rgba(255,42,109,0.3)] zoom-in-95 duration-500",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-orange)] opacity-20 animate-pulse"}),d.jsxs("div",{className:"relative bg-[#150030]/90 p-10 rounded-[2.8rem] backdrop-blur-xl border-2 border-[var(--neon-green)]/50",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[d.jsx("span",{className:"text-6xl animate-pulse",children:""})," NOW PLAYING"]}),d.jsx("button",{onClick:async()=>{await BD(),await ce()},className:"px-8 py-3 bg-[var(--neon-pink)] text-black text-base font-bold uppercase hover:bg-white transition-all rounded-[1rem] tracking-widest font-righteous shadow-[0_0_20px_var(--neon-pink)] active:scale-95",children:"END ROUND"})]}),d.jsx("div",{className:"flex flex-col gap-3",children:e.currentRound.map((T,J)=>{const G=e.participants.find(ns=>ns.id===T.participantId),le=(G==null?void 0:G.status)===Ot.READY,ye=e.currentRound.findIndex(ns=>ns.status!==Be.DONE),Pt=J===(ye===-1?0:ye);return d.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${Pt?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),d.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[d.jsxs("div",{className:"w-16 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:[d.jsx("span",{className:"text-[10px] text-slate-500 font-mono uppercase tracking-widest hidden sm:block",children:"SEQ_ID"}),d.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${Pt?"text-[var(--neon-green)]":"text-slate-400"}`,children:String(T.requestNumber).padStart(3,"0")})]}),d.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[d.jsx("h3",{className:`text-3xl font-black uppercase truncate font-righteous tracking-tight ${Pt?"text-white":"text-slate-300"}`,children:T.songName}),d.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[d.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:T.artist}),d.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),d.jsxs("button",{onClick:()=>mt(T.participantId),className:"flex items-center gap-2 group/singer hover:underline",children:[d.jsx("div",{className:`w-2 h-2 rounded-full ${le?"bg-[var(--neon-green)] shadow-[0_0_5px_var(--neon-green)]":"bg-slate-700"}`}),d.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",T.participantName]})]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[Pt&&d.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] mr-2 shrink-0",children:"LIVE"}),d.jsx($o,{request:T}),d.jsx("button",{disabled:T.status===Be.DONE,onClick:async()=>{await px(T.id),await ce()},className:`h-8 px-4 rounded text-xs font-black uppercase tracking-wider font-righteous transition-all border ${T.status===Be.DONE?"bg-white/5 text-white/30 border-white/5 cursor-not-allowed":"bg-[var(--neon-cyan)]/10 text-[var(--neon-cyan)] border-[var(--neon-cyan)]/50 hover:bg-[var(--neon-cyan)] hover:text-black"}`,children:T.status===Be.DONE?"DONE":"MARK DONE"}),d.jsx("button",{onClick:async()=>{confirm("Remove from active round?")&&(await Ma(T.id),await ce())},className:"w-8 h-8 flex items-center justify-center rounded bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white transition-all border border-rose-500/20",title:"REMOVE",children:""})]})]},T.id)})})]})]}),d.jsxs("section",{className:"bg-[#10002B]/80 border-2 border-[var(--neon-blue)]/30 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(5,217,232,0.1)] relative overflow-hidden backdrop-blur-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8 px-2",children:[d.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-cyan",children:[d.jsx("span",{className:"text-[var(--neon-blue)]",children:""})," QUEUE VALIDATION"]}),d.jsxs("span",{className:"px-6 py-2 bg-[var(--neon-blue)]/10 border border-[var(--neon-blue)]/30 rounded-full text-base text-[var(--neon-blue)] font-bold tracking-widest font-righteous",children:[jt.length," PENDING"]})]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[jt.map((T,J)=>d.jsxs("div",{draggable:!0,onDragStart:G=>Wr(G,J,"PENDING"),onDragOver:ao,onDrop:G=>Zr(G,J,"PENDING"),className:"bg-black/40 border border-white/5 p-4 rounded-3xl flex items-center gap-6 hover:border-[var(--neon-blue)] transition-all group cursor-move shadow-xl",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[d.jsx("div",{className:"text-xs font-black font-righteous text-[var(--neon-pink)] uppercase tracking-[0.2em] bg-[var(--neon-pink)]/10 px-2 py-0.5 rounded-full border border-[var(--neon-pink)]/20 shrink-0",children:"NEW_SIGNAL"}),d.jsx("div",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:T.songName}),d.jsxs("div",{className:"text-slate-500 text-base font-black uppercase tracking-[0.2em] font-righteous truncate",children:["/ ",T.artist]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:()=>mt(T.participantId),className:"text-base font-bold text-[var(--neon-pink)] uppercase truncate hover:text-white transition-colors font-righteous tracking-[0.2em]",children:["@",T.participantName]}),T.message&&d.jsx("div",{className:"flex-1 max-w-md px-3 py-1 bg-black/40 border-l-2 border-[var(--neon-pink)] rounded-r-lg",children:d.jsxs("p",{className:"text-base text-white/60 font-medium italic truncate",children:['"',T.message,'"']})})]})]}),d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx($o,{request:T}),d.jsx(vc,{request:T}),d.jsx(Ms,{url:T.youtubeUrl}),d.jsx("button",{onClick:()=>A(T),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white/50 hover:text-white border border-white/5",children:"EDIT"})]}),d.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-2xl border border-white/5",children:[d.jsx("button",{onClick:async()=>{await yc(T.id),await ce()},className:"px-6 py-3 bg-[var(--neon-blue)] text-black text-sm font-black uppercase hover:bg-white transition-all rounded-xl tracking-[0.1em] shadow-[0_0_20px_rgba(5,217,232,0.3)]",children:"ACCEPT"}),d.jsx("button",{onClick:async()=>{await Ma(T.id),await ce()},className:"w-11 h-11 flex items-center justify-center text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all",children:""})]})]})]},T.id)),jt.length===0&&d.jsx("div",{className:"col-span-full py-24 text-center border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-30",children:d.jsx("p",{className:"text-4xl font-black font-righteous uppercase tracking-[0.4em] italic text-slate-500",children:"NO SIGNAL DETECTED"})})]})]}),d.jsxs("div",{className:"flex flex-col gap-10",children:[d.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-yellow)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[d.jsxs("h3",{className:"text-5xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-yellow flex items-center gap-4",children:[d.jsx("span",{className:"text-[var(--neon-yellow)] animate-pulse",children:""})," READY NODES"]}),d.jsxs("div",{className:"flex flex-col gap-3",children:[Lr.map((T,J)=>d.jsxs("div",{draggable:!0,onDragStart:G=>Wr(G,J,"QUEUE"),onDragOver:ao,onDrop:G=>Zr(G,J,"QUEUE"),className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-yellow)] transition-all cursor-move shadow-lg relative",children:[d.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-yellow)] font-bungee text-3xl shrink-0 group-hover:scale-110 transition-transform",children:J+1}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[d.jsx("div",{className:"text-2xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-yellow)] transition-colors",children:T.songName}),d.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",T.artist]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:G=>{G.stopPropagation(),mt(T.participantId)},className:"text-sm font-black text-[var(--neon-yellow)] uppercase tracking-[0.2em] font-righteous hover:text-white transition-colors",children:["@",T.participantName]}),T.message&&d.jsxs("div",{className:"flex-1 max-w-sm px-2 py-0.5 bg-[var(--neon-yellow)]/5 border-l border-[var(--neon-yellow)]/30 rounded-r text-xs text-[var(--neon-yellow)]/70 italic truncate",children:['"',T.message,'"']})]})]}),d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[d.jsx("button",{onClick:async()=>{await mx(T.id,"up"),await ce()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""}),d.jsx("button",{onClick:async()=>{await mx(T.id,"down"),await ce()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""})]}),d.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx($o,{request:T}),d.jsx(vc,{request:T}),d.jsx(Ms,{url:T.youtubeUrl}),d.jsx("button",{onClick:()=>A(T),className:"p-2 text-slate-600 hover:text-white text-xs font-black uppercase tracking-widest font-righteous transition-colors border border-white/5 rounded-lg",children:"EDIT"})]}),d.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5",children:[d.jsx("button",{onClick:()=>Ct(T.id),className:"px-4 py-2 bg-[var(--neon-yellow)] text-black text-sm font-black uppercase rounded-lg hover:bg-white transition-all shadow-[0_0_15px_rgba(255,200,87,0.3)] tracking-wider",children:"STAGE"}),d.jsx("button",{onClick:async()=>{await Ma(T.id),await ce()},className:"w-9 h-9 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-all",children:""})]})]})]},T.id)),Lr.length===0&&d.jsx("div",{className:"flex-1 py-12 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:d.jsx("p",{className:"text-xl font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"QUEUE EMPTY"})})]})]}),d.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-green)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[d.jsxs("h3",{className:"text-3xl md:text-4xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-green flex items-center gap-4 flex-wrap",children:[d.jsx("span",{className:"text-[var(--neon-green)] animate-pulse",children:""})," ATMOSPHERE"]}),d.jsxs("div",{className:"space-y-10",children:[d.jsxs("div",{className:"p-6 bg-black/40 rounded-3xl border border-white/5 space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[d.jsx("label",{className:"text-sm md:text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.2em] font-righteous opacity-80 break-words",children:"MAX_REQUESTS_PER_NODE"}),d.jsx("span",{className:"text-4xl font-black text-white font-bungee neon-glow-cyan",children:e.maxRequestsPerUser||5})]}),d.jsx("input",{type:"range",min:"1",max:"20",value:e.maxRequestsPerUser||5,onChange:async T=>{await VD(parseInt(T.target.value)),await ce()},className:"w-full accent-[var(--neon-cyan)] bg-white/5 rounded-lg appearance-none h-2 cursor-pointer transition-all"}),d.jsxs("div",{className:"flex justify-between text-xs font-black text-slate-600 font-righteous uppercase tracking-widest",children:[d.jsx("span",{children:"STRICT (1)"}),d.jsx("span",{children:"UNLIMITED (20)"})]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-base font-black text-[var(--neon-pink)] uppercase tracking-[0.4em] mb-4 flex items-center gap-4 font-righteous opacity-80",children:"BACKGROUND THREADS"}),d.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...xi].reverse().map(T=>d.jsxs("div",{className:"bg-black/60 p-5 rounded-[2rem] border border-white/10 flex flex-col justify-between group hover:border-[var(--neon-pink)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[d.jsxs("div",{className:"min-w-0 mb-4 cursor-pointer",onClick:()=>Vr(T.songName,T.artist,T.type),children:[d.jsx("div",{className:"text-2xl font-black text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-pink)] transition-all",children:T.songName}),d.jsx("div",{className:"text-base text-slate-500 uppercase tracking-widest mt-1 font-righteous opacity-60 truncate",children:T.artist})]}),d.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[d.jsx(Ms,{url:T.youtubeUrl}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>Ct(T.id),className:"px-4 py-2 bg-[var(--neon-purple)] text-white text-sm font-black uppercase rounded-lg hover:bg-white hover:text-black transition-all shadow-[0_0_10px_var(--neon-purple)] tracking-[0.1em]",children:"BOOST"}),d.jsx("button",{onClick:async()=>{await Ma(T.id),await ce()},className:"text-rose-500/20 hover:text-rose-500 p-2 font-black",children:""})]})]})]},T.id)),xi.length===0&&d.jsx("p",{className:"text-base text-slate-700 italic px-4 font-righteous uppercase tracking-widest opacity-50",children:"NO BACKGROUND TRACKS"})]})]}),d.jsxs("div",{className:"pt-6 border-t border-white/5",children:[d.jsxs("h4",{className:"text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.4em] mb-6 flex justify-between items-center font-righteous opacity-80",children:[d.jsx("span",{children:"VERIFIED_LINKS"}),d.jsx("button",{onClick:()=>g(!0),className:"text-[var(--neon-cyan)] hover:text-white transition-colors underline decoration-dotted",children:"+ ADD NEW"})]}),d.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...dn].reverse().map(T=>d.jsxs("div",{className:"bg-black/80 p-5 rounded-[2rem] border border-white/5 flex flex-col justify-between group hover:border-[var(--neon-cyan)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[d.jsxs("div",{className:"min-w-0 mb-4",children:[d.jsx("div",{className:"text-2xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors font-bungee mb-1",children:T.songName}),d.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous font-bold",children:T.artist})]}),d.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx(QD,{url:T.youtubeUrl}),d.jsx("button",{onClick:()=>_(T),className:"text-slate-600 hover:text-white p-2",children:""})]}),d.jsxs("div",{className:"flex gap-2 shrink-0",children:[d.jsx("button",{onClick:()=>Vr(T.songName,T.artist,T.type),className:"px-3 py-1 bg-black border border-[var(--neon-cyan)] text-[var(--neon-cyan)] text-sm font-black uppercase rounded-md hover:bg-[var(--neon-cyan)] hover:text-black transition-all tracking-widest",children:"RUN"}),d.jsx("button",{onClick:()=>{u(!0)},className:"px-3 py-1 bg-[var(--neon-pink)] text-black text-sm font-black uppercase rounded-md hover:bg-white transition-all shadow-lg tracking-widest",children:"PUSH"}),d.jsx("button",{onClick:async()=>{confirm("Delete verified song?")&&(await cx(T.id),await ce())},className:"text-rose-500/20 hover:text-rose-500 px-1 font-black",children:""})]})]})]},T.id)),dn.length===0&&d.jsx("p",{className:"text-xl text-slate-800 italic px-4 font-righteous uppercase tracking-widest opacity-30",children:"NO VERIFIED SONGS"})]})]})]})]})]})]}),d.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[d.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[600px]",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[d.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"PERFORMERS"}),d.jsxs("div",{className:"flex items-center gap-2 bg-white/5 px-3 py-1 rounded-full border border-white/5",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),d.jsxs("span",{className:"text-sm text-[var(--neon-cyan)] font-bold uppercase tracking-widest",children:[ar," ONLINE"]})]})]}),d.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.participants.map(T=>{const J=T.status===Ot.READY,le=e.requests.filter(ye=>ye.participantId===T.id).filter(ye=>ye.status===Be.APPROVED&&ye.type===yt.SINGING).length;return d.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] transition-all border ${J?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"bg-black/40 border-white/5 hover:bg-white/5"}`,children:[d.jsxs("div",{className:"min-w-0 flex items-center gap-4",children:[d.jsx("button",{onClick:async()=>{await qs(T.id,J?Ot.STANDBY:Ot.READY),await ce()},className:`w-3 h-3 rounded-full shrink-0 transition-all ${J?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-800"}`}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("button",{onClick:()=>mt(T.id),className:`text-xl font-black uppercase truncate text-left transition-colors font-righteous ${J?"text-white":"text-slate-500 hover:text-[var(--neon-green)]"}`,children:T.name}),le>0&&d.jsxs("span",{className:"block text-xs text-[var(--neon-cyan)] font-black mt-0.5 tracking-[0.2em]",children:[le," REQUESTS"]})]})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx("button",{onClick:()=>j(T),className:"p-2 hover:text-[var(--neon-cyan)] transition-colors text-slate-600",children:"+"}),d.jsx("button",{onClick:async()=>{confirm(`Remove ${T.name}?`)&&(await gd(T.id),await ce())},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-colors",children:""})]})]},T.id)}),e.participants.length===0&&d.jsx("div",{className:"text-center py-20 opacity-20",children:d.jsx("p",{className:"text-lg font-righteous uppercase tracking-widest",children:"NO DATA"})})]})]}),d.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[400px]",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[d.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"LOG"}),e.history.length>0&&d.jsx("button",{onClick:async()=>{await gx(),await ce()},className:"text-sm font-bold text-rose-500/40 hover:text-rose-500 uppercase tracking-widest transition-all",children:"CLEAR"})]}),d.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.history.map((T,J)=>d.jsxs("div",{className:"bg-black/40 p-4 rounded-2xl border border-white/5 flex flex-col group hover:border-[var(--neon-purple)] transition-all",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{className:"min-w-0 pr-2",children:[d.jsx("div",{className:"text-xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-purple)] transition-colors font-bungee",children:T.songName}),d.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous",children:T.artist})]}),d.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[d.jsx($o,{request:T}),d.jsx(vc,{request:T}),d.jsx(Ms,{url:T.youtubeUrl})]})]}),d.jsxs("div",{className:"flex items-center justify-between mt-2 border-t border-white/5 pt-2",children:[d.jsxs("span",{className:"text-base font-black text-[var(--neon-pink)] uppercase truncate",children:["@",T.participantName]}),d.jsx("button",{onClick:async()=>{await im(T),await ce()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-pink)] hover:underline transition-all uppercase tracking-widest",children:"RE-QUEUE"})]})]},J)),e.history.length===0&&d.jsx("div",{className:"text-center py-16 opacity-20",children:d.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-800",children:"EMPTY"})})]})]})]})]}),Yt==="ROTATION"&&d.jsxs("div",{className:"space-y-16 animate-in slide-in-from-bottom-2 pb-32",children:[e.currentRound&&e.currentRound.length>0&&d.jsxs("section",{className:"glass-panel border-4 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(0,255,157,0.3)] relative overflow-hidden neon-sign-border-green",children:[d.jsxs("div",{className:"flex items-center gap-8 mb-12",children:[d.jsx("div",{className:"w-8 h-8 bg-[var(--neon-green)] rounded-full animate-ping shadow-[0_0_25px_var(--neon-green)]"}),d.jsx("h3",{className:"text-6xl font-black text-white uppercase tracking-tighter font-righteous neon-glow-green",children:"CURRENT_ROTATION"})]}),d.jsx("div",{className:"flex flex-col gap-4",children:e.currentRound.map((T,J)=>{const G=e.currentRound.findIndex(ye=>ye.status!==Be.DONE),le=J===(G===-1?0:G);return d.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${le?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),d.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[d.jsxs("div",{className:"w-16 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:[d.jsx("span",{className:"text-[10px] text-slate-500 font-mono uppercase tracking-widest",children:"SEQ_ID"}),d.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${le?"text-[var(--neon-green)]":"text-slate-400"}`,children:String(T.requestNumber).padStart(3,"0")})]}),d.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[d.jsx("h3",{className:`text-3xl font-black uppercase truncate font-righteous tracking-tight ${le?"text-white":"text-slate-300"}`,children:T.songName}),d.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[d.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:T.artist}),d.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),d.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",T.participantName]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3 z-10 pl-6 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[le&&d.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] mr-2 shrink-0",children:"LIVE"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx($o,{request:T}),d.jsx(vc,{request:T}),d.jsx(Ms,{url:T.youtubeUrl}),d.jsx("button",{onClick:()=>A(T),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white/5 hover:bg-white hover:text-black border border-white/10 transition-all text-slate-400 group",title:"EDIT",children:d.jsx("span",{className:"text-sm font-black font-righteous",children:"EDIT"})}),d.jsx("button",{onClick:()=>br(T),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-black border border-white/20 hover:bg-white hover:text-black hover:border-white transition-all group",title:"RESET TRACK",children:d.jsx("span",{className:"text-lg",children:""})}),d.jsxs("button",{disabled:T.status===Be.DONE,onClick:async()=>{await px(T.id),await ce()},className:`h-10 px-6 rounded-lg text-sm font-black uppercase tracking-widest font-righteous transition-all flex items-center gap-2 ${T.status===Be.DONE?"bg-white/10 text-white/40 cursor-not-allowed border border-white/5":"bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black border border-[var(--neon-cyan)]/50"}`,children:[d.jsx("span",{children:T.status===Be.DONE?"COMPLETED":"DONE"}),T.status!==Be.DONE&&d.jsx("span",{className:"text-lg leading-none",children:""})]})]})]})]},T.id)})})]}),d.jsxs("section",{className:"bg-[#050510] border-4 border-[var(--neon-cyan)]/30 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(0,229,255,0.15)] relative overflow-hidden backdrop-blur-md",children:[d.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[d.jsx("div",{className:"w-4 h-4 bg-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)] rounded-full animate-pulse"}),d.jsx("h3",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"UPCOMING NODES"})]}),d.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-6",children:[Lr.map(T=>d.jsxs("div",{className:"relative group perspective-1000",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-purple)] to-[var(--neon-blue)] rounded-[2.5rem] blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),d.jsxs("div",{className:"relative bg-[#101015] p-8 rounded-[2.5rem] border border-white/10 flex justify-between items-center group-hover:border-[var(--neon-cyan)] transition-all shadow-2xl h-full",children:[d.jsxs("div",{className:"min-w-0 pr-6 flex-1",children:[d.jsx("div",{className:"text-white font-black uppercase truncate text-4xl font-bungee tracking-tight mb-2 group-hover:text-[var(--neon-cyan)] transition-colors",children:T.songName}),d.jsxs("div",{className:"text-lg text-slate-500 uppercase flex items-center gap-3 font-righteous tracking-[0.2em] opacity-80",children:[d.jsxs("span",{className:"text-[var(--neon-green)] font-black",children:["@",T.participantName]}),d.jsx("span",{className:"opacity-20",children:"|"}),d.jsx("span",{className:"truncate",children:T.artist})]})]}),d.jsxs("div",{className:"flex gap-3 shrink-0 flex-col",children:[d.jsx("button",{onClick:()=>Ct(T.id),className:"px-6 py-3 bg-[var(--neon-green)] text-black text-base font-black rounded-xl uppercase tracking-[0.2em] font-righteous shadow-[0_0_20px_var(--neon-green)] transition-all hover:bg-white hover:scale-105",children:"STAGE"}),d.jsx("button",{onClick:async()=>{await Ma(T.id),await ce()},className:"px-6 py-3 border border-white/10 text-white/40 hover:text-rose-500 hover:border-rose-500/50 rounded-xl transition-all text-lg font-black uppercase tracking-[0.2em]",children:"REMOVE"})]})]})]},T.id)),Lr.length===0&&d.jsx("div",{className:"col-span-full py-32 text-center border-4 border-dashed border-white/5 rounded-[4rem] opacity-30",children:d.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] italic font-righteous text-slate-700",children:"NO DATA STREAM"})})]})]})]}),Yt==="PERFORMERS"&&d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 animate-in slide-in-from-bottom-2 pb-32",children:[d.jsxs("section",{className:"lg:col-span-8 bg-[#0a0a0a] border-4 border-[var(--neon-cyan)]/20 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(0,229,255,0.1)] relative overflow-hidden backdrop-blur-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[d.jsx("h2",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"PERFORMER INDEX"}),d.jsxs("div",{className:"flex items-center gap-4 px-6 py-2 bg-black/40 border border-[var(--neon-cyan)]/30 rounded-full shadow-lg",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),d.jsxs("span",{className:"text-lg font-bold text-[var(--neon-cyan)] uppercase tracking-widest font-righteous",children:[ar," ACTIVE"]})]})]}),d.jsxs("div",{className:"grid gap-6",children:[e.participants.map(T=>{const J=T.status===Ot.READY,le=e.requests.filter(ye=>ye.participantId===T.id).filter(ye=>ye.status===Be.APPROVED&&ye.type===yt.SINGING).length;return d.jsxs("div",{className:`flex items-center justify-between p-6 rounded-[2rem] transition-all border-2 ${J?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.15)]":"bg-black/40 border-white/5 hover:border-white/20"}`,children:[d.jsxs("div",{className:"min-w-0 flex items-center gap-6 text-left",children:[d.jsx("button",{onClick:async()=>{await qs(T.id,J?Ot.STANDBY:Ot.READY),await ce()},className:`w-12 h-12 rounded-full shrink-0 border-2 transition-all flex items-center justify-center ${J?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_20px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-white/50"}`,children:J&&d.jsx("div",{className:"w-4 h-4 bg-white rounded-full animate-pulse"})}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("button",{onClick:()=>mt(T.id),className:`font-bold text-4xl uppercase truncate font-bungee tracking-tight transition-colors ${J?"text-white":"text-slate-600 hover:text-[var(--neon-green)]"}`,children:T.name}),le>0&&d.jsxs("div",{className:"text-base font-bold text-[var(--neon-cyan)] uppercase mt-1 tracking-widest font-righteous opacity-90",children:[le," TRACKS READY"]})]})]}),d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("button",{onClick:()=>j(T),className:"px-6 py-3 bg-[var(--neon-cyan)]/10 text-[var(--neon-cyan)] rounded-xl border border-[var(--neon-cyan)]/50 transition-all font-righteous text-base font-black uppercase tracking-[0.2em] hover:bg-[var(--neon-cyan)] hover:text-black hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"ADD TRACK"}),d.jsx("button",{onClick:async()=>{confirm(`Remove ${T.name}?`)&&(await gd(T.id),await ce())},className:"text-rose-500/30 hover:text-rose-500 p-3 transition-colors text-3xl font-black",children:""})]})]},T.id)}),e.participants.length===0&&d.jsx("div",{className:"py-32 text-center border-4 border-dashed border-white/5 rounded-[3rem] opacity-30",children:d.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.6em] italic font-righteous text-slate-800",children:"NO SIGNALS"})})]})]}),d.jsxs("section",{className:"lg:col-span-4 lg:sticky lg:top-36 h-fit bg-[#050510] border-4 border border-white/5 rounded-[3.5rem] p-8 shadow-[0_0_60px_rgba(157,0,255,0.15)] relative overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[d.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-purple",children:"SESSION LOG"}),e.history.length>0&&d.jsx("button",{onClick:async()=>{await gx(),await ce()},className:"text-sm font-black text-rose-500/40 hover:text-rose-500 uppercase tracking-[0.3em] font-righteous transition-all",children:"CLEAR ALL"})]}),d.jsxs("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[e.history.map((T,J)=>d.jsxs("div",{className:"bg-black/40 p-5 rounded-[1.5rem] border border-white/5 group hover:border-[var(--neon-purple)] transition-all",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{className:"min-w-0 pr-4",children:[d.jsx("div",{className:"text-2xl font-black text-white uppercase truncate font-bungee tracking-tight group-hover:text-[var(--neon-purple)] transition-colors",children:T.songName}),d.jsx("div",{className:"text-sm text-slate-600 font-bold uppercase truncate font-righteous tracking-widest mt-1",children:T.artist})]}),d.jsx(Ms,{url:T.youtubeUrl})]}),d.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-3 mt-1",children:[d.jsxs("button",{onClick:()=>mt(T.participantId),className:"text-sm font-black text-[var(--neon-pink)] uppercase truncate hover:text-white font-righteous tracking-widest transition-colors mb-0",children:["@",T.participantName]}),d.jsx("button",{onClick:async()=>{await im(T),await ce()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-cyan)] hover:text-white transition-all font-righteous tracking-widest uppercase ml-auto",children:"RELOAD"})]})]},J)),e.history.length===0&&d.jsx("div",{className:"text-center py-20 opacity-20",children:d.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-700",children:"EMPTY"})})]})]}),d.jsxs("section",{className:"lg:col-span-12 bg-black/40 border-4 border-white/5 rounded-[3rem] p-10 mt-10 relative overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[d.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-cyan",children:"COMPLETED ROUNDS"}),d.jsx("div",{className:"text-[var(--neon-cyan)]/40 text-sm font-black uppercase tracking-[0.4em] font-righteous",children:"CHRONOLOGICAL_ARCHIVE"})]}),d.jsx("div",{className:"grid gap-12",children:(()=>{const T={};e.history.forEach(G=>{const le=G.playedAt||0;T[le]||(T[le]=[]),T[le].push(G)});const J=Object.keys(T).map(Number).sort((G,le)=>le-G);return J.length===0?d.jsx("div",{className:"text-center py-24 border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-20",children:d.jsx("p",{className:"text-2xl font-black uppercase tracking-[0.4em] font-righteous text-slate-500",children:"HISTORY_NULL"})}):J.map(G=>d.jsxs("div",{className:"bg-[#050510] border-2 border-white/5 rounded-[2.5rem] p-8 relative group hover:border-[var(--neon-cyan)]/30 transition-all",children:[d.jsxs("div",{className:"absolute top-0 left-10 py-1 px-4 bg-[var(--neon-cyan)] text-black text-[10px] font-black uppercase tracking-widest rounded-b-lg font-righteous shadow-[0_0_15px_rgba(0,229,255,0.4)]",children:["ROUND_",new Date(G).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",children:T[G].map((le,ye)=>d.jsxs("div",{className:"flex flex-col p-4 bg-black/40 rounded-2xl border border-white/5 group/song hover:bg-white/5 transition-all",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("div",{className:"text-lg font-black text-white uppercase truncate font-bungee tracking-tight group-hover/song:text-[var(--neon-cyan)] transition-colors",children:le.songName}),d.jsx(Ms,{url:le.youtubeUrl})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-widest font-righteous",children:["@",le.participantName]}),d.jsxs("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-tighter",children:["POS_",ye+1]})]})]},le.id))})]},G))})()})]})]}),Yt==="LIBRARY"&&d.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-2 space-y-10 pb-32",children:[d.jsx("div",{className:"sticky top-0 z-40 pt-4 -mt-4",children:d.jsxs("div",{className:"relative group p-1 rounded-[2.5rem] bg-[#050510]/90 shadow-2xl backdrop-blur-xl border border-white/10",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)]/20 via-[var(--neon-purple)]/20 to-[var(--neon-cyan)]/20 blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),d.jsx("input",{type:"text",placeholder:"SCANNING GLOBAL SONGBOOK...",value:Wn,onChange:T=>oa(T.target.value),className:"w-full bg-black/50 border-2 border-white/10 rounded-[2.3rem] py-6 pl-16 pr-32 text-2xl font-bold tracking-widest text-white placeholder:text-slate-600 focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous uppercase"}),d.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors pointer-events-none",children:d.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),d.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:d.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-[2rem] font-black text-base uppercase tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.4)] active:scale-95 transition-all font-righteous hover:bg-white hover:scale-105",children:"+ ADD NEW"})})]})}),d.jsx("div",{className:"flex flex-col gap-3",children:(()=>{const J=((e==null?void 0:e.verifiedSongbook)||[]).map(G=>({...G,isVerified:!0,title:G.songName,source:"VERIFIED"})).filter(G=>{if(!Wn)return!0;const le=Wn.toLowerCase();return G.title.toLowerCase().includes(le)||G.artist.toLowerCase().includes(le)});return J.length===0?d.jsxs("div",{className:"col-span-full text-center py-40 opacity-30 border-4 border-dashed border-white/5 rounded-[4rem]",children:[d.jsx("div",{className:"text-8xl mb-6 opacity-50 grayscale animate-pulse",children:Wn?"":""}),d.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] font-righteous text-slate-600",children:Wn?"NO MATCH FOUND":"DATABASE OFFLINE"})]}):J.map((G,le)=>d.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-4 rounded-[2rem] flex items-center justify-between group hover:border-[var(--neon-cyan)] transition-all relative overflow-hidden shadow-lg",children:[d.jsxs("div",{className:"flex items-center gap-6 flex-1 min-w-0",children:[d.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black rounded-lg border border-white/10 text-[var(--neon-cyan)] text-2xl",children:""}),d.jsx("div",{className:"min-w-0 pr-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[G.isVerified&&d.jsx("div",{className:"px-2 py-0.5 bg-[var(--neon-pink)] text-black rounded-full text-[10px] font-black uppercase tracking-widest font-righteous shrink-0",children:"VERIFIED"}),d.jsx("h4",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-cyan)] transition-colors",children:G.title}),d.jsxs("span",{className:"text-base text-slate-600 font-bold uppercase font-righteous tracking-widest truncate",children:["/ ",G.artist]})]})})]}),d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx($o,{request:G}),d.jsx(vc,{request:G}),d.jsx(Ms,{url:G.youtubeUrl}),d.jsx("button",{onClick:async()=>{await cx(G.id).then(ce)},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-all text-xl",children:""})]}),d.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 ml-4",children:[d.jsxs("div",{className:"relative group/assign",children:[d.jsx("button",{className:"px-6 py-2.5 bg-white text-black text-sm font-black uppercase rounded-lg hover:bg-[var(--neon-cyan)] transition-all font-righteous tracking-wider",children:"ASSIGN"}),d.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-cyan)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/assign:opacity-100 group-hover/assign:visible transition-all p-4 z-50 backdrop-blur-xl w-[200px]",children:[d.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"TRANSMIT TO:"}),d.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:[e.participants.map(ye=>d.jsx("button",{onClick:async()=>{const Pt=await Ps({participantId:ye.id,participantName:ye.name,songName:G.title,artist:G.artist,youtubeUrl:G.youtubeUrl,type:yt.SINGING});Pt&&await yc(Pt.id),await ce()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-cyan)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:ye.name},ye.id)),d.jsx("div",{className:"h-[1px] bg-white/10 my-2"}),d.jsx("button",{onClick:async()=>{const ye=await Ps({participantId:"DJ-MANUAL",participantName:"GUEST",songName:G.title,artist:G.artist,youtubeUrl:G.youtubeUrl,type:yt.SINGING});ye&&await yc(ye.id),await ce()},className:"w-full text-left p-2 rounded-lg bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)] hover:text-black text-sm font-black uppercase font-righteous transition-all",children:"+ GUEST"})]})]})]}),d.jsxs("div",{className:"relative group/star",children:[d.jsx("button",{className:"px-4 py-2.5 bg-black border border-white/10 text-[var(--neon-pink)] rounded-lg font-black text-sm uppercase tracking-widest hover:border-[var(--neon-pink)] transition-all font-righteous",children:""}),d.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-pink)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/star:opacity-100 group-hover/star:visible transition-all p-4 z-50 backdrop-blur-xl w-[180px]",children:[d.jsx("p",{className:"text-base text-[var(--neon-pink)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"ADD FAVORITE:"}),d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:e.participants.map(ye=>d.jsx("button",{onClick:async()=>{await jD(ye.id,{songName:G.title,artist:G.artist,youtubeUrl:G.youtubeUrl,type:G.type}),await ce()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-pink)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:ye.name},ye.id))})]})]})]})]})]},le))})()})]})]}),L&&d.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-6 z-[100] backdrop-blur-xl animate-in fade-in duration-300",children:d.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 shadow-[0_0_100px_rgba(255,42,109,0.2)] animate-in zoom-in-95 duration-500 relative overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-start mb-8",children:[d.jsx("h2",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee neon-glow-pink",children:"REVIEW LINEUP"}),d.jsx("button",{onClick:()=>K(!1),className:"text-slate-600 hover:text-white font-bold text-5xl px-2 transition-all transform hover:scale-110",children:""})]}),d.jsx("div",{className:"mb-8 text-lg text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80 decoration-dotted underline underline-offset-4",children:"OPERATIONAL READY CHECK"}),d.jsxs("div",{className:"space-y-4 mb-10 max-h-[400px] overflow-y-auto pr-4 custom-scrollbar",children:[e.participants.filter(T=>{var J;return(J=e.requests)==null?void 0:J.some(G=>G.participantId===T.id&&G.status===Be.APPROVED&&G.type===yt.SINGING&&!G.isInRound)}).sort((T,J)=>(J.joinedAt||0)-(T.joinedAt||0)).map(T=>{var le;const J=T.status===Ot.READY,G=(le=e.requests)==null?void 0:le.find(ye=>ye.participantId===T.id&&ye.status===Be.APPROVED&&ye.type===yt.SINGING&&!ye.isInRound);return d.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] border-2 transition-all duration-300 ${J?"bg-[#150030] border-[var(--neon-green)] shadow-[0_0_20px_rgba(57,255,20,0.15)]":"bg-black/40 border-white/5 opacity-50"}`,children:[d.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[d.jsx("button",{onClick:async()=>{await qs(T.id,J?Ot.STANDBY:Ot.READY),await ce()},className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center transition-all border-2 ${J?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-slate-600"}`,children:J&&d.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("div",{className:`font-bold uppercase text-2xl truncate tracking-tight font-bungee ${J?"text-white":"text-slate-600"}`,children:T.name}),J?G?d.jsx("div",{className:"text-[var(--neon-cyan)] text-base font-black uppercase tracking-[0.2em] font-righteous mt-0.5 opacity-90",children:G.songName}):d.jsx("div",{className:"text-rose-500 text-sm font-black uppercase tracking-[0.1em] font-righteous mt-0.5",children:" NO SIGNAL"}):d.jsx("div",{className:"text-slate-700 text-sm font-black uppercase tracking-[0.2em] font-righteous mt-0.5",children:"STANDBY"})]})]}),J&&G&&d.jsx("div",{className:"shrink-0 text-sm bg-[var(--neon-cyan)] text-black px-4 py-1.5 rounded-full font-black uppercase tracking-widest font-righteous shadow-[0_0_10px_var(--neon-cyan)] animate-in fade-in zoom-in",children:"READY"})]},T.id)}),e.participants.length===0&&d.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[2.5rem] border-4 border-dashed border-white/5 animate-in fade-in duration-700",children:d.jsx("p",{className:"text-slate-700 text-2xl font-black uppercase tracking-[0.4em] font-righteous",children:"NO DATA"})})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:()=>K(!1),className:"flex-1 py-4 bg-black hover:bg-white hover:text-black text-white border border-white/10 rounded-xl font-black uppercase text-base tracking-widest transition-all font-righteous",children:"CANCEL"}),(()=>{const T=e.participants.filter(J=>{var G;return(G=e.requests)==null?void 0:G.some(le=>le.participantId===J.id&&le.status===Be.APPROVED&&le.type===yt.SINGING&&!le.isInRound)}).length;return d.jsx("button",{onClick:rr,disabled:T===0,className:`flex-[2] py-4 rounded-xl font-black uppercase text-base tracking-widest transition-all flex items-center justify-center gap-3 shadow-lg font-righteous ${T>0?"bg-[var(--neon-green)] hover:bg-white hover:text-black text-black hover:scale-105":"bg-slate-900 text-slate-800 cursor-not-allowed border border-white/5"}`,children:T>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-ping"}),"ACTIVATE ROUND (",T,")"]}):"IDLE"})})()]})]})}),ve&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:d.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-rose-500/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(244,63,94,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-rose-500 shadow-[0_0_20px_rgba(244,63,94,0.8)]"}),d.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-[2rem] border-2 border-rose-500/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(244,63,94,0.2)] animate-pulse",children:""}),d.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-rose",children:"SYSTEM RESET"}),d.jsxs("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:["This will ",d.jsx("span",{className:"text-rose-500 underline decoration-2 underline-offset-4 decoration-rose-500",children:"TERMINATE ALL SESSIONS"}),", clear requests, and wipe history logs."]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:()=>_e(!1),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"ABORT"}),d.jsx("button",{onClick:ir,className:"flex-[2] py-4 bg-rose-500 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(244,63,94,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"EXECUTE WIPE"})]})]})}),(ne||Ee)&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[70] backdrop-blur-3xl animate-in fade-in duration-300",children:d.jsxs("div",{className:"w-full max-w-6xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),d.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-purple",children:"User Directory"}),d.jsx("p",{className:"text-base text-[var(--neon-cyan)] uppercase font-black tracking-[0.3em] font-righteous opacity-80 mt-1",children:"Authenticated Identities & Signal History"})]}),d.jsxs("div",{className:"flex gap-3",children:[Ee&&d.jsx("button",{onClick:()=>on(null),className:"px-6 py-3 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/10 transition-all",children:" ALL ACCOUNTS"}),d.jsx("button",{onClick:()=>Pr(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"+ NEW ACCOUNT"}),d.jsx("button",{onClick:nr,className:"text-slate-600 hover:text-white p-2 ml-2 font-black text-4xl transition-colors transform hover:scale-110",children:""})]})]}),d.jsx("div",{className:"p-6 border-b-2 border-white/5 bg-black/20",children:d.jsxs("div",{className:"relative group max-w-2xl mx-auto",children:[d.jsx("input",{type:"text",placeholder:"SCANNING DIRECTORY RECORDS...",value:Pe,onChange:T=>Ge(T.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-10 py-4 text-white font-black uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),d.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:d.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),d.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-12 custom-scrollbar bg-black/20",children:Ee?d.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500 grid lg:grid-cols-12 gap-8",children:[d.jsx("div",{className:"lg:col-span-4 space-y-6",children:d.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[3rem] p-8 shadow-2xl relative overflow-hidden group hover:border-[var(--neon-purple)] transition-all",children:[d.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-[var(--neon-purple)]/10 blur-[60px] rounded-full -mr-24 -mt-24 group-hover:bg-[var(--neon-purple)]/20 transition-all"}),d.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[d.jsx("div",{className:"scale-125 mb-4",children:d.jsx(Rt,{name:Ee.name,isActive:e.participants.some(T=>T.id===Ee.id)})}),d.jsxs("div",{className:"mt-4",children:[d.jsx("div",{className:"text-sm font-bold text-[var(--neon-cyan)] uppercase tracking-widest mb-2 font-righteous",children:"AUTHENTICATED IDENTITY"}),d.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee break-words",children:Ee.name})]}),d.jsxs("div",{className:"w-full mt-8 space-y-3 pt-6 border-t border-white/5",children:[d.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[d.jsx("span",{className:"text-slate-600",children:"ID SIGNATURE"}),d.jsxs("span",{className:"text-[var(--neon-pink)] font-mono opacity-80",children:[Ee.id.slice(0,8),"..."]})]}),d.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[d.jsx("span",{className:"text-slate-600",children:"ENCRYPTION"}),d.jsx("span",{className:`px-2 py-0.5 rounded-full ${Ee.password?"bg-[var(--neon-pink)]/10 text-[var(--neon-pink)]":"bg-slate-900 text-slate-600"}`,children:Ee.password?"SECURE PIN":"OPEN LINK"})]})]}),d.jsxs("div",{className:"w-full mt-10 space-y-3",children:[d.jsx("button",{onClick:()=>ca(Ee),className:"w-full py-3 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"MODIFY SECURITY"}),d.jsx("button",{onClick:async()=>{await zi(Ee.id),await ce()},className:"w-full py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all shadow-[0_0_15px_rgba(0,229,255,0.3)] font-righteous hover:bg-white",children:"FORCE RE-JOIN"}),d.jsx("div",{className:"pt-2 border-t border-white/5 mt-2 space-y-2",children:(ts=e.bannedUsers)!=null&&ts.some(T=>T.id===Ee.id)?d.jsx("button",{onClick:async()=>{await fx(Ee.id,Ee.name,"unban"),await ce()},className:"w-full py-3 bg-[var(--neon-green)]/10 hover:bg-[var(--neon-green)] text-[var(--neon-green)] hover:text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous border border-[var(--neon-green)]/30",children:"LIFT_BAN_IDENTITY"}):d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"text",placeholder:"JUSTIFICATION REQUIRED...",value:X,onChange:T=>ue(T.target.value),className:"w-full bg-black/60 border border-white/10 rounded-xl px-4 py-2 text-base text-white font-bold uppercase tracking-widest font-righteous outline-none focus:border-rose-500 transition-all mb-1"}),d.jsx("button",{onClick:async()=>{if(!X)return alert("Provide a reason for the ban sequence.");await fx(Ee.id,Ee.name,X),ue(""),on(null),await ce()},className:"w-full py-3 bg-rose-500/10 hover:bg-rose-500 text-rose-500 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous border border-rose-500/30",children:"TERMINATE_SIGNAL (BAN)"})]})}),d.jsx("button",{onClick:async()=>{confirm("Permanently delete this account?")&&(await Fh(Ee.id),on(null),await ce())},className:"w-full py-3 bg-rose-500/5 hover:bg-rose-500 text-rose-500/40 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all border border-transparent hover:border-rose-500/30 font-righteous mt-2",children:"TERMINATE ACCOUNT"})]})]})]})}),d.jsx("div",{className:"lg:col-span-8 space-y-6",children:d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[d.jsxs("h4",{className:"text-sm font-black text-[var(--neon-pink)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["LIBRARY STARS (",Ee.favorites.length,")"]}),d.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[Ee.favorites.map(T=>d.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl flex justify-between items-center group hover:border-[var(--neon-pink)] transition-all",children:[d.jsxs("div",{className:"min-w-0 pr-4",children:[d.jsx("div",{className:"text-xl font-black text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-pink)] transition-colors",children:T.songName}),d.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:T.artist})]}),d.jsxs("div",{className:"flex gap-2 shrink-0",children:[d.jsx("button",{onClick:async()=>{await Ps({participantId:Ee.id,participantName:Ee.name,songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type}),await ce()},className:"px-3 py-1.5 bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[var(--neon-cyan)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-cyan)] hover:text-black transition-all",children:"ADD"}),d.jsx("button",{onClick:()=>P({type:"favorite",itemId:T.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),d.jsx("button",{onClick:async()=>{await ID(Ee.id,T.id),await ce()},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]},T.id)),Ee.favorites.length===0&&d.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[d.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),d.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"Catalog is empty"})]})]})]}),d.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[d.jsxs("h4",{className:"text-sm font-black text-[var(--neon-cyan)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["PERFORMANCE LOG (",Ee.personalHistory.length,")"]}),d.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[Ee.personalHistory.map((T,J)=>d.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl group hover:border-[var(--neon-cyan)] transition-all",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"min-w-0 pr-4",children:[d.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:T.songName}),d.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:T.artist})]}),d.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:[d.jsx("button",{onClick:()=>P({type:"history",itemId:T.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),d.jsx("button",{onClick:async()=>{await OD(Ee.id,T.id),await ce()},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]}),d.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[d.jsx("span",{className:"text-xs text-slate-700 font-black uppercase font-righteous tracking-widest",children:new Date(T.createdAt).toLocaleDateString()}),d.jsx("button",{onClick:async()=>{await im(T),await ce()},className:"px-3 py-1.5 bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-pink)] hover:text-black transition-all",children:"RE-QUEUE"})]})]},J)),Ee.personalHistory.length===0&&d.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[d.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),d.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"No transmissions recorded"})]})]})]})]})})]}):to?d.jsxs("form",{onSubmit:_i,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[d.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:"SECURITY UPDATE"}),d.jsxs("p",{className:"text-center text-slate-400 font-righteous uppercase tracking-widest mb-8",children:["UPDATING KEY FOR: ",d.jsx("span",{className:"text-[var(--neon-cyan)]",children:yr==null?void 0:yr.name})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"NEW ENCRYPTION PIN"}),d.jsx("input",{required:!0,type:"password",value:$t,onChange:T=>{wn(T.target.value),Zn("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all",placeholder:"ENTER NEW PIN"})]}),vi&&d.jsx("div",{className:"mb-4 animate-pulse",children:d.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:""})," ",vi]})})]}),d.jsxs("div",{className:"flex gap-4 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{En(!1),vr(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),d.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"UPDATE KEY"})]})]}):la?d.jsxs("form",{onSubmit:_r,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[d.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:yr?"Modify Profile":"New User Account"}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"IDENTITY HANDLE"}),d.jsx("input",{required:!0,type:"text",value:jn.name,onChange:T=>{Ji({...jn,name:T.target.value}),Zn("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]}),vi&&d.jsx("div",{className:"mb-4 animate-pulse",children:d.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:""})," ",vi]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"ENCRYPTION PIN (OPTIONAL)"}),d.jsx("input",{type:"password",value:jn.password,onChange:T=>Ji({...jn,password:T.target.value}),className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]})]}),d.jsxs("div",{className:"flex gap-4 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{Pr(!1),vr(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),d.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"AUTHORIZE ACCOUNT"})]})]}):d.jsx("div",{className:"space-y-16",children:(()=>{const T=i.filter(G=>!G.password&&e.participants.some(le=>le.id===G.id)&&(G.name.toLowerCase().includes(Pe.toLowerCase())||G.id.toLowerCase().includes(Pe.toLowerCase()))),J=i.filter(G=>(G.password||!e.participants.some(le=>le.id===G.id))&&(G.name.toLowerCase().includes(Pe.toLowerCase())||G.id.toLowerCase().includes(Pe.toLowerCase())));return d.jsxs(d.Fragment,{children:[T.length>0&&d.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsx("h3",{className:"text-base font-black text-[var(--neon-green)] uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ACTIVE SIGNALS"}),d.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-[var(--neon-green)]/30 to-transparent"})]}),d.jsx("div",{className:"flex flex-col gap-4",children:T.map(G=>d.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 rounded-[2rem] p-4 flex items-center justify-between hover:border-[var(--neon-green)] transition-all shadow-lg group relative overflow-hidden",children:[d.jsxs("div",{className:"flex items-center gap-6 min-w-0 pr-4",children:[d.jsx(Rt,{name:G.name,isActive:!0}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("button",{onClick:()=>on(G),className:"text-white font-bold text-3xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-green)] transition-colors font-bungee",children:G.name}),d.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[d.jsx("span",{className:"text-[10px] bg-[var(--neon-green)] text-black px-2 py-0.5 rounded-full font-black uppercase tracking-widest font-righteous shrink-0",children:"LIVE"}),d.jsxs("span",{className:"text-sm text-slate-600 uppercase font-black font-righteous tracking-widest truncate",children:[G.favorites.length,"   ",G.personalHistory.length," TX"]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 bg-black/40 rounded-2xl border border-white/5",children:[d.jsx("button",{onClick:()=>on(G),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous",children:"LOG"}),d.jsx("button",{onClick:()=>Wi(G),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),d.jsx("button",{onClick:()=>er(G),className:"py-2.5 px-6 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO_SET"}),d.jsx("button",{onClick:()=>Et(G),className:"py-2.5 px-6 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"MANUAL"})]}),d.jsx("button",{onClick:async()=>{confirm("Terminate temporary link?")&&(await Fh(G.id),await ce())},className:"w-10 h-10 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all font-black",children:""})]})]},G.id))})]}),d.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-700",children:[d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsx("h3",{className:"text-base font-black text-slate-600 uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ARCHIVE DIRECTORY"}),d.jsx("div",{className:"h-[1px] w-full bg-white/5"})]}),d.jsx("div",{className:"flex flex-col gap-4",children:J.map(G=>{const le=e.participants.some(ye=>ye.id===G.id);return d.jsxs("div",{className:`bg-[#101015] border-2 ${le?"border-[var(--neon-cyan)] shadow-[0_0_20px_rgba(0,229,255,0.1)]":"border-white/5"} rounded-[2.5rem] p-6 flex flex-col justify-between hover:border-[var(--neon-purple)] transition-all group`,children:[d.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[d.jsx(Rt,{name:G.name,isActive:le}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("div",{className:"flex justify-between items-start gap-2",children:d.jsx("button",{onClick:()=>on(G),className:"text-white font-bold text-2xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-purple)] transition-colors font-bungee",children:G.name})}),d.jsxs("p",{className:"text-xs text-slate-500 uppercase font-black tracking-[0.2em] mt-1 font-righteous",children:[G.password?" AUTHENTICATED":"GUEST ID","  ",G.favorites.length," "]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>on(G),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"LOG"}),d.jsx("button",{onClick:()=>Wi(G),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),d.jsx("button",{onClick:()=>er(G),className:"flex-[2] py-2.5 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO-SET"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>Et(G),className:"flex-[4] py-2.5 bg-slate-900 border border-white/5 hover:border-[var(--neon-pink)] text-slate-500 hover:text-white rounded-lg flex items-center justify-center gap-2 transition-all text-xs font-black uppercase font-righteous",children:"MANUAL SELECT"}),d.jsx("button",{onClick:async()=>{confirm("Erase this record permanently?")&&(await Fh(G.id),await ce())},className:"flex-1 py-2.5 bg-rose-500/5 text-rose-500/20 hover:text-rose-500 border border-transparent hover:border-rose-500/30 rounded-lg transition-all flex items-center justify-center",children:""})]})]})]},G.id)})}),J.length===0&&T.length===0&&d.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:d.jsx("p",{className:"text-slate-800 text-base font-black uppercase tracking-[0.5em] font-righteous",children:"EMPTY DIRECTORY - NO SIGNALS DETECTED"})})]})]})})()})})]})}),(c||C||R||D||m||y)&&d.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-[100] backdrop-blur-xl",children:d.jsx("div",{className:"w-full max-w-md",children:(()=>{let T={singerName:"",songName:"",artist:"",youtubeUrl:"",type:yt.SINGING},J="Global Track Input";if(R&&Ee)if(R.type==="favorite"){const G=Ee.favorites.find(le=>le.id===R.itemId);G&&(T={singerName:Ee.name,songName:G.songName,artist:G.artist,youtubeUrl:G.youtubeUrl||"",type:G.type},J=`Edit Permanent Favorite for ${Ee.name}`)}else{const G=Ee.personalHistory.find(le=>le.id===R.itemId);G&&(T={singerName:Ee.name,songName:G.songName,artist:G.artist,youtubeUrl:G.youtubeUrl||"",type:G.type},J=`Edit History Entry for ${Ee.name}`)}else C?(T={singerName:C.participantName,songName:C.songName,artist:C.artist,youtubeUrl:C.youtubeUrl||"",type:C.type},J="Modify Track"):y?(T={singerName:"",songName:y.songName,artist:y.artist,youtubeUrl:y.youtubeUrl||"",type:y.type},J="Edit Verified Song"):m?(T={singerName:"",songName:"",artist:"",youtubeUrl:"",type:yt.SINGING},J="Add to Verified Songbook"):D&&(T.singerName=D.name,J=`Song for ${D.name}`);return d.jsx(zT,{title:J,showSingerName:!R&&!y&&!m,initialSingerName:T.singerName,initialSongName:T.songName,initialArtist:T.artist,initialYoutubeUrl:T.youtubeUrl,initialType:T.type,submitLabel:C||R||y?"Save Update":m?"Add to Library":"Queue Track",onSubmit:ro,onCancel:nr,participants:e.participants},(C==null?void 0:C.id)||(R==null?void 0:R.itemId)||(D==null?void 0:D.id)||(y==null?void 0:y.id)||(m?"new-verified":"new-request"))})()})}),E&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[100] backdrop-blur-3xl animate-in fade-in duration-300",children:d.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(255,0,255,0.2)] text-center relative overflow-hidden animate-in zoom-in-95 duration-300",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),d.jsx("h3",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-glow-pink",children:"Access Entry"}),(On.includes("localhost")||On.includes("127.0.0.1"))&&d.jsxs("div",{className:"mb-6 p-4 bg-amber-500/10 border-2 border-amber-500/50 rounded-2xl animate-pulse",children:[d.jsxs("div",{className:"text-amber-500 font-black uppercase text-lg mb-2 flex items-center justify-center gap-2",children:[d.jsx("span",{className:"text-2xl",children:""})," LOCALHOST DETECTED"]}),d.jsx("p",{className:"text-amber-200/80 text-xs font-bold uppercase tracking-wider mb-3",children:`External devices cannot connect to "localhost". Configure your computer's Wi-Fi IP.`}),d.jsx("button",{onClick:()=>{N(!1),Y(!0)},className:"px-4 py-2 bg-amber-500 text-black rounded-lg text-xs font-black uppercase tracking-widest hover:bg-white transition-all",children:"CONFIGURE NETWORK IP"})]}),d.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mb-10 font-righteous opacity-80",children:"Point Guest cameras at the code below"}),d.jsxs("div",{className:"bg-white p-6 rounded-[2rem] inline-block shadow-[0_0_30px_rgba(255,255,255,0.1)] mb-10 relative group",children:[d.jsx("div",{className:"absolute -inset-4 bg-gradient-to-tr from-[var(--neon-pink)]/20 to-[var(--neon-cyan)]/20 blur-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),d.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(On)}&bgcolor=ffffff`,alt:"Room QR",className:"w-48 h-48 relative z-10"})]}),d.jsx("div",{className:"text-base text-white/40 font-mono break-all mb-10 font-black lowercase opacity-40 px-8 leading-relaxed select-all cursor-pointer hover:opacity-100 hover:text-[var(--neon-pink)] transition-all",children:On}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("button",{onClick:()=>{N(!1),Y(!0)},className:"w-full py-4 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:" CONFIGURE SIGNAL ORIGIN"}),d.jsx("button",{onClick:nr,className:"w-full py-4 bg-black border border-white/10 text-slate-500 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"DISMISS PANEL"})]})]})}),bt&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:d.jsxs("div",{className:"w-full max-w-xl bg-[#050510] border-4 border-white/10 p-12 rounded-[3.5rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden animate-in zoom-in-95 duration-300",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),d.jsx("h3",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-glow-purple",children:"Signal Origin"}),d.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mb-12 font-righteous opacity-80",children:"Set the endpoint for guest terminal connections"}),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-black/40 p-8 rounded-[2rem] border-2 border-white/5 border-dashed",children:[d.jsx("p",{className:"text-sm text-slate-500 uppercase font-black mb-3 tracking-[0.3em] font-righteous",children:"LOCAL ENVIRONMENT DETECTION"}),d.jsxs("div",{className:"text-xl text-[var(--neon-cyan)] font-mono font-black tracking-widest",children:[window.location.hostname," ",d.jsx("span",{className:"text-sm text-slate-700 opacity-60",children:"(CURRENT HOST)"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-black text-slate-500 uppercase mb-4 ml-4 tracking-[0.3em] font-righteous",children:"TERMINAL ADDRESS / PUBLIC TUNNEL URL"}),d.jsx("input",{type:"text",value:se,onChange:T=>xe(T.target.value),placeholder:"E.G. 192.168.1.15 OR HTTPS://SIGNAL.NGROK.APP",className:"w-full bg-black border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-black uppercase font-mono tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all placeholder:text-slate-800 text-lg"})]}),d.jsx("div",{className:"bg-[var(--neon-pink)]/5 border border-[var(--neon-pink)]/10 p-6 rounded-2xl",children:d.jsx("p",{className:"text-sm text-[var(--neon-pink)]/60 font-black leading-relaxed uppercase tracking-widest font-righteous italic",children:"Note: Cross-network connectivity requires tunneling (ngrok) for public-private bridge."})}),d.jsxs("div",{className:"flex gap-4 pt-6",children:[d.jsx("button",{onClick:()=>Y(!1),className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),d.jsx("button",{onClick:oo,className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"AUTHORIZE CONFIG"})]})]})]})}),Me&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:d.jsxs("div",{className:"w-full max-w-4xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative animate-in zoom-in-95 duration-300",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),d.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-pink",children:"Signal Selection"}),d.jsxs("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mt-1 font-righteous opacity-80",children:["Verified Catalog  Target: ",d.jsx("span",{className:"text-[var(--neon-pink)]",children:Me.name})]})]}),d.jsx("button",{onClick:()=>Et(null),className:"text-slate-600 hover:text-white p-3 font-black text-4xl transition-colors transform hover:scale-110",children:""})]}),d.jsx("div",{className:"p-6 bg-black/20 border-b-2 border-white/5",children:d.jsxs("div",{className:"relative group",children:[d.jsx("input",{type:"text",placeholder:"FILTER VERIFIED TRANSMISSIONS...",value:Ye,onChange:T=>an(T.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-12 py-4 text-white font-black uppercase tracking-widest font-righteous outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),d.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar space-y-4 bg-black/20",children:[dn.filter(T=>T.songName.toLowerCase().includes(Ye.toLowerCase())||T.artist.toLowerCase().includes(Ye.toLowerCase())).map(T=>d.jsxs("button",{onClick:async()=>{const J=await Ps({participantId:Me.id,participantName:Me.name,songName:T.songName,artist:T.artist,youtubeUrl:T.youtubeUrl,type:T.type});J&&await yc(J.id),Et(null),an(""),await ce()},className:"w-full flex justify-between items-center p-6 bg-[#101015]/60 hover:bg-[#151520] border-2 border-white/5 hover:border-[var(--neon-pink)] rounded-[2rem] transition-all group text-left relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)]/0 to-[var(--neon-pink)]/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),d.jsxs("div",{className:"min-w-0 pr-6 relative z-10",children:[d.jsx("div",{className:"text-3xl font-black text-white uppercase truncate font-bungee group-hover:text-[var(--neon-pink)] transition-colors tracking-tight",children:T.songName}),d.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-1 font-righteous opacity-60",children:T.artist})]}),d.jsx("div",{className:"text-sm font-black text-[var(--neon-cyan)] bg-[var(--neon-cyan)]/10 px-4 py-2 rounded-xl uppercase border border-[var(--neon-cyan)]/20 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0 font-righteous relative z-10",children:"AUTHORIZE SIGNAL"})]},T.id)),dn.length===0&&d.jsx("div",{className:"text-center py-32 bg-black/10 rounded-[3rem] border-2 border-dashed border-white/5",children:d.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.5em] text-slate-800 font-righteous",children:"NO VERIFIED RECORDS DETECTED"})})]})]})})]})},XD=({onJoin:r})=>{const[e,t]=ie.useState([]),[i,o]=ie.useState(!0);return ie.useEffect(()=>{const c=YD(u=>{t(u),o(!1)});return()=>c()},[]),i?d.jsx("div",{className:"text-center py-20 animate-pulse",children:d.jsx("div",{className:"text-[var(--neon-cyan)] text-xl font-black uppercase tracking-widest font-righteous",children:"SEARCHING FOR STAGES..."})}):e.length===0?d.jsxs("div",{className:"text-center py-20 px-6 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5 mx-auto max-w-2xl",children:[d.jsx("p",{className:"text-[var(--neon-pink)] text-2xl font-black uppercase tracking-widest font-bungee mb-4",children:"NO STAGES FOUND"}),d.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-wider text-sm",children:"There are no active sessions nearby."})]}):d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-ping"}),d.jsx("h2",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] font-righteous text-lg",children:"LIVE STAGES"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(c=>d.jsxs("div",{className:"group relative bg-[#101015] border-2 border-white/5 hover:border-[var(--neon-cyan)] p-8 rounded-[2.5rem] transition-all hover:-translate-y-2 hover:shadow-[0_0_50px_rgba(0,229,255,0.15)] overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 via-transparent to-[var(--neon-purple)]/0 group-hover:from-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-purple)]/5 transition-all duration-500"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-3xl shadow-xl group-hover:scale-110 transition-transform duration-500 group-hover:border-[var(--neon-cyan)]",children:""}),d.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)]/10 text-[var(--neon-green)] border border-[var(--neon-green)]/20 rounded-lg text-[10px] font-black uppercase tracking-widest font-righteous",children:"ONLINE"})]}),d.jsx("h3",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors truncate",children:c.venueName||"OPEN MIC"}),d.jsxs("div",{className:"flex items-center gap-2 mb-8 text-slate-400 font-righteous uppercase tracking-wider text-xs",children:[d.jsx("span",{className:"text-[var(--neon-pink)]",children:"HOST:"})," ",c.hostName]}),d.jsx("button",{onClick:()=>r(c.id),className:"w-full py-4 bg-white text-black font-black uppercase tracking-[0.2em] rounded-xl hover:bg-[var(--neon-cyan)] transition-all font-righteous hover:scale-[1.02] active:scale-95 shadow-lg",children:"JOIN STAGE"})]})]},c.id))})]})},yx=({url:r})=>r?d.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-2 rounded-lg text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border border-[var(--neon-cyan)]/30 transition-all shadow-[0_0_10px_rgba(0,229,255,0.2)]",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),d.jsx("polyline",{points:"15 3 21 3 21 9"}),d.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,JD=()=>{const[r,e]=ie.useState(null),[t,i]=ie.useState(null),[o,c]=ie.useState(!0),[u,m]=ie.useState(""),[g,y]=ie.useState(""),[_,E]=ie.useState(""),[N,L]=ie.useState(""),[K,ne]=ie.useState(""),[re,me]=ie.useState(null),[we,ve]=ie.useState(!1),[_e,Ue]=ie.useState(null),[Ae,C]=ie.useState(null),[A,R]=ie.useState("ROTATION"),[P,D]=ie.useState(!1),[j,k]=ie.useState(""),[rt,bt]=ie.useState(!1),[Y,se]=ie.useState(0),[xe,Pe]=ie.useState(!1),Ge=xt.getRoomId(),M=$g()+(Ge?`?room=${Ge}`:"");ie.useEffect(()=>{(async()=>{const ue=await Un();if(ue){i(ue);const Me=await Ze();me(Me);const Et=Me.participants.find(Yt=>Yt.id===ue.id);if(Et)e(Et),Ge&&zi(ue.id).catch(console.error);else if(Ge){console.log(`[Participant] Auto-joining session ${Ge} for profile ${ue.id}`);const Yt=await zi(ue.id);e(Yt)}}else{const Me=await Ze();me(Me)}})()},[Ge]);const $=async()=>{const X=await Ze();me(X);const ue=await Un();if(i(ue),!ue)e(null);else{const Me=X.participants.find(Et=>Et.id===ue.id);Me&&e(Me)}};ie.useEffect(()=>(window.addEventListener("kstar_sync",$),window.addEventListener("storage",$),()=>{window.removeEventListener("kstar_sync",$),window.removeEventListener("storage",$)}),[]);const oe=async X=>{X.preventDefault(),m("");try{if(o){const ue=await PD(g,N);if(ue.success&&ue.profile){const Me=await zi(ue.profile.id);e(Me),i(ue.profile)}else m(ue.error||"Authorization failed.")}else{if(N!==K){m("PASSWORDS_DO_NOT_MATCH");return}const ue=await Hc({name:g,email:_||void 0,password:N||void 0},!0);if(ue.success&&ue.profile){const Me=await zi(ue.profile.id);e(Me),i(ue.profile)}else m(ue.error||"Initialization failed.")}}catch(ue){m(ue.message||"An unexpected error occurred.")}},he=async X=>{r&&(await qs(r.id,X),await $())},Ce=async X=>{r&&(_e?(await yd(_e.id,{songName:X.songName,artist:X.artist,youtubeUrl:X.youtubeUrl,type:X.type,message:X.message}),Ue(null)):(await Ps({participantId:r.id,participantName:r.name,songName:X.songName,artist:X.artist,youtubeUrl:X.youtubeUrl,type:X.type,message:X.message}),ve(!1),r.status!==Ot.READY&&await qs(r.id,Ot.READY)),C(null),await $())},De=()=>{ve(!1),Ue(null),C(null)},qe=async()=>{m("");try{const X=`Guest-${Math.floor(Math.random()*1e4)}`,ue=await Hc({name:X},!0);if(ue.success&&ue.profile){const Me=await zi(ue.profile.id);e(Me),i(ue.profile),C(null),ve(!0),await qs(ue.profile.id,Ot.READY)}else m(ue.error||"Guest initialization failed.")}catch(X){m(X.message||"An unexpected error occurred.")}};if(!r)return d.jsxs("div",{className:"max-w-2xl mx-auto p-8 flex flex-col items-center justify-center min-h-[90vh] text-center animate-in fade-in duration-1000 relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-[#10002B] to-black -z-10"}),d.jsxs("div",{className:"w-48 h-48 flex items-center justify-center mb-12 relative group",children:[d.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)] blur-[60px] opacity-40 group-hover:opacity-60 transition-opacity"}),d.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 relative z-10 bg-black shadow-2xl",children:d.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_40px_rgba(255,0,127,0.5)] w-full h-full",children:d.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"})})})]}),d.jsx("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none",children:"SINGMODE"}),d.jsx("p",{className:"text-[var(--neon-cyan)] font-righteous mb-16 uppercase tracking-[0.6em] text-lg font-black neon-glow-cyan",children:"MEMBER ACCESS"}),d.jsxs("div",{className:"w-full max-w-lg mb-12 relative z-20",children:[d.jsx("button",{onClick:qe,className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),d.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-widest text-xs mt-4",children:"GUEST PASS"})]}),d.jsxs("div",{className:"relative w-full max-w-lg",children:[d.jsx("div",{className:"absolute inset-0 flex items-center mb-8",children:d.jsx("div",{className:"w-full border-t border-white/10"})}),d.jsx("div",{className:"relative flex justify-center mb-8",children:d.jsx("span",{className:"bg-black px-4 text-slate-500 font-righteous uppercase tracking-widest text-sm",children:"MEMBER LOGIN"})})]}),d.jsxs("form",{onSubmit:oe,className:"w-full space-y-8 bg-[#050510] p-10 md:p-14 rounded-[4rem] border-4 border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)]"}),u&&d.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-500 text-base py-4 px-6 rounded-2xl font-black uppercase tracking-widest animate-pulse font-righteous",children:u}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"STAGE NAME"}),d.jsx("input",{type:"text",required:!0,value:g,onChange:X=>y(X.target.value),placeholder:"Stage Name",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-2xl uppercase tracking-wider placeholder:text-slate-600 font-righteous"})]}),!o&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"EMAIL (OPTIONAL)"}),d.jsx("input",{type:"email",value:_,onChange:X=>E(X.target.value),placeholder:"myname@emailserver.com",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all shadow-inner text-xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"PASSWORD"}),d.jsx("input",{type:"password",required:!o,value:N,onChange:X=>L(X.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),!o&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"CONFIRM_PASS"}),d.jsx("input",{type:"password",required:!0,value:K,onChange:X=>ne(X.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),d.jsx("button",{type:"submit",className:"w-full py-6 mt-6 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-2xl font-black text-3xl shadow-[0_0_40px_rgba(255,0,127,0.3)] transition-all uppercase tracking-[0.2em] font-bungee hover:scale-[1.02] active:scale-95",children:o?"ENTER AS GUEST":"SIGN IN"}),d.jsx("button",{type:"button",onClick:()=>{c(!o),m("")},className:"text-slate-600 hover:text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.3em] pt-6 block mx-auto transition-colors font-righteous border-b-2 border-transparent hover:border-[var(--neon-cyan)] pb-1",children:o?"CREATE ACCOUNT":"BACK TO START"})]})]});if(!re)return null;const Nt=re.requests.filter(X=>X.participantId===r.id);return d.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-10 relative",children:[d.jsxs("header",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-2xl group",children:[d.jsx("div",{className:"absolute inset-0 bg-[#0a0a0a] rounded-[2.9rem]"}),d.jsx("div",{className:"absolute top-0 inset-x-0 h-32 bg-[var(--neon-purple)]/10 blur-[50px]"}),d.jsxs("div",{className:"relative p-8 flex flex-col items-center text-center",children:[d.jsx("div",{className:"absolute top-6 right-6 z-20"}),d.jsxs("div",{className:"w-24 h-24 p-1 rounded-full border-2 border-white/10 mb-6 relative",children:[d.jsx("div",{className:"absolute inset-0 rounded-full bg-[var(--neon-pink)]/20 blur-xl"}),d.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full object-cover relative z-10"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 bg-black rounded-full flex items-center justify-center border-2 border-black z-20",children:d.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-pulse shadow-[0_0_10px_rgba(0,255,157,0.8)]"})})]}),d.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight uppercase leading-none font-bungee mb-2",children:r.name}),d.jsx("div",{className:"flex items-center gap-3",children:d.jsxs("button",{onClick:async()=>{confirm("Are you sure you want to sign out?")&&(await Bd(),await $())},className:"flex items-center gap-2 px-4 py-2 bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl transition-all font-black uppercase text-[10px] tracking-widest font-righteous border border-rose-500/20 hover:border-transparent",children:[d.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.jsx("polyline",{points:"16 17 21 12 16 7"}),d.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"SIGN OUT"]})}),d.jsx("div",{className:"flex flex-col items-center gap-4 w-full max-w-xs mx-auto mt-8",children:d.jsxs("div",{className:"bg-black/40 border border-white/5 rounded-2xl p-4 w-full group hover:border-[var(--neon-cyan)] transition-all",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("span",{className:"text-xs font-black text-slate-600 uppercase tracking-widest font-righteous",children:"VOICE TYPE"}),d.jsx("span",{className:"text-base font-bold text-[var(--neon-cyan)] uppercase font-righteous tracking-wider",children:(t==null?void 0:t.vocalRange)||"UNKNOWN"})]}),rt?d.jsxs("div",{className:"space-y-2 py-1",children:[d.jsx("div",{className:"h-1 bg-white/5 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-[var(--neon-cyan)] animate-pulse shadow-[0_0_10px_var(--neon-cyan)]",style:{width:`${Y}%`}})}),d.jsx("div",{className:"text-xs text-[var(--neon-cyan)] font-black animate-pulse font-righteous text-center",children:"ANALYZING_PITCH_WAVETABLE..."})]}):d.jsx("button",{onClick:async()=>{bt(!0);let X=0;const ue=setInterval(()=>{X+=5,se(X),X>=100&&(clearInterval(ue),setTimeout(async()=>{const Me=["Soprano","Alto","Tenor","Baritone","Bass"],Et=Me[Math.floor(Math.random()*Me.length)];t&&await dx(t.id,Et),bt(!1),se(0),await $()},500))},100)},className:"w-full text-center py-2 text-xs font-black uppercase tracking-[0.2em] text-[var(--neon-cyan)] hover:text-white transition-colors font-righteous",children:"[ TAP TO CALIBRATE ]"})]})})]})]}),re.currentRound&&re.currentRound.length>0&&d.jsxs("section",{className:"animate-in fade-in slide-in-from-top-4",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4 px-4",children:[d.jsx("div",{className:"w-2 h-2 bg-[var(--neon-green)] rounded-full animate-blink"}),d.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-base font-righteous",children:"ON STAGE"})]}),d.jsx("div",{className:"flex flex-col gap-3",children:re.currentRound.map((X,ue)=>d.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${ue===0?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),d.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[d.jsxs("div",{className:"w-14 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:[d.jsx("span",{className:"text-[9px] text-slate-500 font-mono uppercase tracking-widest hidden sm:block",children:"SEQ_ID"}),d.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${ue===0?"text-[var(--neon-green)]":"text-slate-400"}`,children:String(X.requestNumber).padStart(3,"0")})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-6 min-w-0 flex-1",children:[d.jsx("h3",{className:`text-2xl sm:text-3xl font-black uppercase truncate font-righteous tracking-tight ${ue===0?"text-white":"text-slate-300"}`,children:X.songName}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 opacity-80 shrink-0",children:[d.jsx("span",{className:"text-sm sm:text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider truncate max-w-[150px]",children:X.artist}),d.jsx("span",{className:"text-slate-600 font-mono text-lg hidden sm:inline",children:"/"}),d.jsxs("span",{className:"text-sm sm:text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider truncate max-w-[150px]",children:["@",X.participantName]})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[ue===0&&d.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] shrink-0",children:"LIVE"}),ue===0&&d.jsx(yx,{url:X.youtubeUrl})]})]},X.id))})]}),d.jsx("div",{className:"grid grid-cols-5 gap-2 bg-[#0a0a0a] p-2 rounded-2xl border border-white/5 shadow-inner",children:["ROTATION","REQUESTS","FAVORITES","HISTORY","VOCALS"].map(X=>d.jsxs("button",{onClick:()=>R(X),className:`py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all font-righteous flex flex-col items-center justify-center gap-1.5 ${A===X?"bg-[#151520] text-white shadow-[0_0_20px_rgba(255,255,255,0.05)] border border-white/10":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:[d.jsx("span",{className:`text-2xl mb-0.5 ${A===X?"text-[var(--neon-pink)]":"grayscale opacity-50"}`,children:X==="ROTATION"?"":X==="REQUESTS"?"":X==="FAVORITES"?"":X==="HISTORY"?"":""}),X==="ROTATION"?"STAGE":X==="REQUESTS"?"MY SONGS":X==="FAVORITES"?"SONGBOOK":X==="HISTORY"?"LOG":"MIC SETUP"]},X))}),d.jsx("button",{onClick:()=>{C(null),ve(!0)},className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),d.jsxs("div",{className:"flex gap-4 pt-2",children:[d.jsx("button",{onClick:()=>he(Ot.READY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Ot.READY?"bg-[#051005] border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.2)] text-[var(--neon-green)]":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:d.jsx("span",{className:"relative z-10",children:"READY"})}),d.jsx("button",{onClick:()=>he(Ot.STANDBY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Ot.STANDBY?"bg-[#150505] border-rose-500 shadow-[0_0_30px_rgba(244,63,94,0.2)] text-rose-500":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:d.jsx("span",{className:"relative z-10",children:"NOT YET"})})]}),(we||_e)&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-50 overflow-y-auto backdrop-blur-3xl animate-in fade-in duration-300",children:d.jsx("div",{className:"w-full max-w-lg space-y-6",children:d.jsx(zT,{title:_e?"Remix Request":"New Transmission",submitLabel:_e?"Save Remix":"Transmit",initialSongName:(_e==null?void 0:_e.songName)||(Ae==null?void 0:Ae.songName)||"",initialArtist:(_e==null?void 0:_e.artist)||(Ae==null?void 0:Ae.artist)||"",initialYoutubeUrl:(_e==null?void 0:_e.youtubeUrl)||(Ae==null?void 0:Ae.youtubeUrl)||"",initialType:(_e==null?void 0:_e.type)||(Ae==null?void 0:Ae.type)||yt.SINGING,onSubmit:Ce,onCancel:De,participants:re.participants,currentUserId:r.id},(_e==null?void 0:_e.id)||"new-request")})}),d.jsxs("main",{className:"min-h-[300px] pb-32",children:[A==="ROTATION"&&d.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[d.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-sm px-4 font-righteous opacity-80",children:"COMING UP"}),d.jsx("div",{className:"space-y-4",children:(()=>{re.requests.filter(Ye=>Ye.status===Be.PENDING&&!Ye.isInRound);const X=re.requests.filter(Ye=>Ye.status===Be.APPROVED&&Ye.type===yt.SINGING&&!Ye.isInRound),ue=re.participants.filter(Ye=>X.some(an=>an.participantId===Ye.id)).sort((Ye,an)=>(an.joinedAt||0)-(Ye.joinedAt||0)),Me={};X.forEach(Ye=>{Me[Ye.participantId]||(Me[Ye.participantId]=[]),Me[Ye.participantId].push(Ye)}),Object.keys(Me).forEach(Ye=>{Me[Ye].sort((an,Wn)=>an.createdAt-Wn.createdAt)});const Et=[];let Yt=0,xn=!0;for(;xn;)xn=!1,ue.forEach(Ye=>{Me[Ye.id]&&Me[Ye.id][Yt]&&(Et.push(Me[Ye.id][Yt]),xn=!0)}),Yt++;return Et.length===0?d.jsx("div",{className:"text-center py-16 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:d.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"QUEUE EMPTY"})}):Et.map((Ye,an)=>d.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-6 rounded-[2rem] flex justify-between items-center group hover:border-[var(--neon-blue)] transition-all",children:[d.jsxs("div",{className:"min-w-0 pr-4",children:[d.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-blue)] transition-colors",children:Ye.songName}),d.jsxs("div",{className:"text-base text-[var(--neon-cyan)] uppercase tracking-[0.2em] flex items-center gap-2 font-righteous",children:[Ye.artist," ",d.jsx("span",{className:"text-white/20",children:"|"})," ",d.jsx("span",{className:"text-slate-400",children:Ye.participantName})]})]}),d.jsx("div",{className:"shrink-0 w-12 h-12 rounded-full border border-[var(--neon-blue)]/50 bg-[var(--neon-blue)]/10 flex items-center justify-center text-[var(--neon-blue)] text-xl font-black font-bungee shadow-[0_0_15px_rgba(5,217,232,0.2)]",children:an+1})]},Ye.id))})()})]}),A==="REQUESTS"&&d.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[Nt.map(X=>d.jsx("div",{className:"relative group",children:d.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 p-6 rounded-[2rem] hover:border-[var(--neon-pink)] transition-all",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"min-w-0 pr-4",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsxs("div",{className:"font-bold text-white tracking-tight uppercase truncate font-bungee text-3xl group-hover:text-[var(--neon-pink)] transition-colors",children:[d.jsxs("span",{className:"text-slate-500 mr-2 text-[11px] font-mono tracking-widest",children:["#",X.requestNumber]}),X.songName]}),d.jsx(yx,{url:X.youtubeUrl})]}),d.jsx("div",{className:"text-base text-slate-400 font-bold uppercase tracking-[0.2em] truncate font-righteous",children:X.artist})]}),d.jsx("div",{className:`shrink-0 px-3 py-1 rounded-lg border text-xs font-black uppercase tracking-widest ${X.status===Be.APPROVED?X.isInRound?"bg-[var(--neon-green)] border-[var(--neon-green)] text-black animate-pulse shadow-[0_0_15px_var(--neon-green)]":"bg-[var(--neon-cyan)]/10 border-[var(--neon-cyan)] text-[var(--neon-cyan)]":"border-white/10 text-slate-600"}`,children:X.status===Be.APPROVED?X.isInRound?"LIVE":"QUEUED":"PENDING"})]}),(X.status===Be.PENDING||X.status===Be.APPROVED)&&d.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/5",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("button",{onClick:async()=>{await Um(r.id,X.id,"up"),await $()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Up",children:""}),d.jsx("button",{onClick:async()=>{await Um(r.id,X.id,"down"),await $()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Down",children:""})]}),d.jsx("button",{onClick:()=>Ue(X),className:"flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white",children:"EDIT"}),d.jsx("button",{onClick:async()=>{await Ma(X.id),await $()},className:"flex-1 py-3 bg-rose-500/10 hover:bg-rose-500/20 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-rose-500",children:"CANCEL"})]})]})},X.id)),Nt.length===0&&d.jsx("div",{className:"text-center py-20 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:d.jsx("p",{className:"text-base font-black uppercase tracking-[0.5em] font-righteous text-slate-700",children:"NO REQUESTS"})})]}),A==="FAVORITES"&&t&&d.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[d.jsxs("div",{className:"relative group",children:[d.jsx("input",{type:"text",placeholder:"SEARCH ARCHIVE...",value:j,onChange:X=>k(X.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-[2rem] py-5 px-6 pl-14 text-xl font-bold uppercase tracking-wider text-white focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous placeholder:text-slate-600 shadow-inner"}),d.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-2xl text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors",children:""})]}),d.jsx("div",{className:"grid gap-3",children:(()=>{const X=[...t.favorites.map(ue=>({...ue,isFavorite:!0})),...((re==null?void 0:re.verifiedSongbook)||[]).filter(ue=>!t.favorites.some(Me=>Me.songName===ue.songName&&Me.artist===ue.artist)).map(ue=>({...ue,isFavorite:!1}))].filter(ue=>!j||ue.songName.toLowerCase().includes(j.toLowerCase())||ue.artist.toLowerCase().includes(j.toLowerCase()));return X.length===0?d.jsx("div",{className:"text-center py-20 opacity-30 font-righteous text-sm uppercase tracking-widest text-slate-500",children:"NO_MATCHES"}):X.map(ue=>d.jsxs("div",{className:"bg-[#101015] p-5 rounded-[2rem] flex justify-between items-center group border-2 border-white/5 hover:border-[var(--neon-yellow)] transition-all",children:[d.jsxs("div",{className:"min-w-0 pr-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight group-hover:text-[var(--neon-yellow)] transition-colors",children:ue.songName}),ue.isFavorite&&d.jsx("span",{className:"text-lg text-[var(--neon-yellow)] animate-pulse",children:""})]}),d.jsx("div",{className:"text-sm text-slate-400 font-bold uppercase tracking-[0.2em] font-righteous",children:ue.artist})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{C({...ue}),ve(!0)},className:"bg-[var(--neon-pink)] text-black px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous shadow-[0_0_15px_rgba(255,0,127,0.3)] hover:scale-105 active:scale-95",children:"ADD"}),d.jsx("button",{onClick:async()=>{await PT(ue),await $()},className:`px-2 transition-colors ${ue.isFavorite?"text-rose-500":"text-slate-700 hover:text-[var(--neon-yellow)]"}`,children:ue.isFavorite?"":""})]})]},ue.id))})()})]}),A==="HISTORY"&&t&&d.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[t.personalHistory.map((X,ue)=>d.jsxs("div",{className:"bg-[#101015] p-6 rounded-[2rem] flex justify-between items-center border-2 border-white/5 hover:border-[var(--neon-purple)] group transition-all",children:[d.jsxs("div",{className:"min-w-0 pr-4",children:[d.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-purple)] transition-colors",children:X.songName}),d.jsx("div",{className:"text-base text-[var(--neon-cyan)]/70 font-bold uppercase tracking-[0.2em] font-righteous",children:X.artist})]}),d.jsx("button",{onClick:()=>{C({...X,type:yt.SINGING}),ve(!0)},className:"text-slate-600 hover:text-white border border-white/5 hover:border-white px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest transition-all font-righteous",children:"AGAIN"})]},ue)),t.personalHistory.length===0&&d.jsx("div",{className:"text-center py-20 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:d.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"NO_HISTORY_LOGS"})})]}),A==="VOCALS"&&d.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[d.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-[var(--neon-cyan)] transition-all",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-100 transition-opacity",children:d.jsx("span",{className:"text-5xl",children:""})}),d.jsx("h3",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-[0.3em] font-righteous mb-6",children:"VOCAL_CALIBRATION"}),d.jsxs("div",{className:"flex flex-col items-center gap-6",children:[d.jsxs("div",{className:"w-full bg-black/40 border border-white/10 rounded-2xl p-6 flex flex-col items-center",children:[d.jsx("span",{className:"text-sm font-black text-slate-500 uppercase tracking-widest font-righteous mb-2",children:"DETECTED_RANGE"}),d.jsx("span",{className:"text-4xl font-bold text-white uppercase font-bungee tracking-tight neon-text-glow-cyan",children:(t==null?void 0:t.vocalRange)||"UNKNOWN"})]}),rt?d.jsxs("div",{className:"w-full space-y-3 py-2",children:[d.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-[var(--neon-cyan)] animate-pulse shadow-[0_0_10px_var(--neon-cyan)]",style:{width:`${Y}%`}})}),d.jsx("div",{className:"text-xs text-[var(--neon-cyan)] font-black animate-pulse font-righteous text-center tracking-[0.2em]",children:"ANALYZING_PITCH_WAVETABLE..."})]}):d.jsx("button",{onClick:async()=>{bt(!0);let X=0;const ue=setInterval(()=>{X+=5,se(X),X>=100&&(clearInterval(ue),setTimeout(async()=>{const Me=["Soprano","Alto","Tenor","Baritone","Bass"],Et=Me[Math.floor(Math.random()*Me.length)];t&&await dx(t.id,Et),bt(!1),se(0),await $()},500))},100)},className:"px-8 py-4 bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black rounded-xl font-black uppercase tracking-[0.2em] transition-all font-righteous border border-[var(--neon-cyan)]/30 hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"START_CALIBRATION_SEQUENCE"})]})]}),d.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 opacity-50 relative overflow-hidden border-dashed",children:[d.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.3em] font-righteous mb-2",children:"MICROPHONE_TOOLS"}),d.jsx("p",{className:"text-slate-600 font-mono text-xs uppercase tracking-wider",children:"HARDWARE_LINK_OFFLINE // COMING_SOON"})]})]})]}),d.jsxs("footer",{className:"fixed bottom-6 left-6 right-6 z-40 flex gap-4",children:[d.jsxs("button",{onClick:()=>Pe(!0),className:"flex-1 bg-[#101015] border-2 border-[var(--neon-green)]/30 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:bg-[var(--neon-green)] hover:text-black hover:border-[var(--neon-green)] transition-all group",children:[d.jsx("span",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous group-hover:text-black text-[var(--neon-green)]",children:"SCAN_NODES"}),d.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})]}),d.jsxs("button",{onClick:()=>D(!0),className:"flex-1 bg-[#101015] border-2 border-white/10 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:border-[var(--neon-pink)] transition-all group",children:[d.jsx("span",{className:"text-sm text-[var(--neon-pink)] font-black uppercase tracking-[0.3em] font-righteous",children:"SYSTEM_LINK"}),d.jsx("div",{className:"flex items-center gap-3",children:d.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})})]})]}),xe&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:d.jsxs("div",{className:"w-full max-w-4xl text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-4 md:p-10 overflow-hidden max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-green)] via-[var(--neon-cyan)] to-[var(--neon-blue)] animate-gradient-x"}),d.jsx("button",{onClick:()=>Pe(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors z-50",children:""}),d.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white uppercase tracking-tight mb-8 font-bungee neon-glow-green mt-8",children:"ACTIVE_SIGNALS"}),d.jsx(XD,{onJoin:X=>{window.location.href=`/?room=${X}`}})]})}),P&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:d.jsxs("div",{className:"w-full max-w-sm text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),d.jsx("button",{onClick:()=>D(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors",children:""}),d.jsx("div",{className:"bg-white p-4 rounded-[2rem] inline-block mb-8 shadow-[0_0_40px_rgba(255,255,255,0.1)]",children:d.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(M)}&bgcolor=ffffff`,alt:"Room QR",className:"w-48 h-48"})}),d.jsx("h3",{className:"text-5xl font-black text-white uppercase tracking-tight mb-2 font-bungee neon-glow-white",children:"SYNC_NODE"}),d.jsx("p",{className:"text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.4em] font-righteous opacity-80",children:"SCAN TO INITIALIZE CONNECTION"})]})})]})},WD=({role:r})=>{const[e,t]=ie.useState("disconnected"),[i,o]=ie.useState(null);if(ie.useEffect(()=>{xt.onConnectionStatus=t;const g=setInterval(()=>{o(xt.getRoomId())},1e3);return()=>clearInterval(g)},[]),r==="SELECT")return null;const c=()=>e==="connected"?"bg-[var(--neon-cyan)] shadow-[0_0_10px_var(--neon-cyan)]":e==="connecting"?"bg-[var(--neon-purple)] shadow-[0_0_10px_var(--neon-purple)]":"bg-[var(--neon-pink)] shadow-[0_0_10px_var(--neon-pink)]",u=()=>e==="connected"?"text-[var(--neon-cyan)]":e==="connecting"?"text-[var(--neon-purple)]":"text-[var(--neon-pink)]",m=()=>r==="DJ"?`HUB: ${i||"INITIALIZING..."}`:e==="connected"?"LINKED":e==="connecting"?"SYNCING...":"OFFLINE";return d.jsxs("div",{className:"fixed bottom-6 left-6 z-[60] flex items-center gap-3 bg-[#101015]/90 backdrop-blur-xl px-4 py-3 rounded-2xl border border-white/10 shadow-2xl group hover:border-[var(--neon-pink)] transition-all animate-in slide-in-from-bottom-4 duration-700",children:[d.jsxs("div",{className:"relative flex h-2 w-2",children:[d.jsx("div",{className:`animate-ping absolute inline-flex h-full w-full rounded-full opacity-40 ${c()}`}),d.jsx("div",{className:`relative inline-flex rounded-full h-2 w-2 ${c()}`})]}),d.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.3em] font-righteous ${u()} drop-shadow-md`,children:m()})]})},Qo=({title:r,icon:e,description:t,items:i})=>d.jsxs("div",{className:"bg-[#101015] border border-white/5 p-10 rounded-[3.5rem] hover:border-[var(--neon-pink)] transition-all backdrop-blur-xl group relative overflow-hidden shadow-2xl",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[var(--neon-pink)]/5 blur-3xl rounded-full -mr-16 -mt-16 group-hover:bg-[var(--neon-pink)]/10 transition-colors"}),d.jsx("div",{className:"w-20 h-20 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-4xl mb-8 group-hover:scale-110 group-hover:border-[var(--neon-pink)] group-hover:text-white transition-all shadow-2xl relative z-10",children:e}),d.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase mb-4 tracking-tight group-hover:text-[var(--neon-pink)] transition-colors relative z-10 leading-none",children:r}),d.jsx("p",{className:"text-[var(--neon-cyan)]/70 mb-8 font-bold uppercase text-[10px] tracking-[0.2em] font-righteous leading-relaxed relative z-10 transition-opacity",children:t}),d.jsx("ul",{className:"space-y-4 relative z-10",children:i.map((o,c)=>d.jsxs("li",{className:"flex items-start gap-3 text-[11px] text-slate-500 font-bold uppercase tracking-widest font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:[d.jsx("span",{className:"text-[var(--neon-cyan)] font-bold",children:""}),o]},c))})]}),ZD=({onBack:r,onAdminLogin:e})=>{const t=()=>{prompt("Enter Admin Password:")==="Organized"?e():alert("Access Denied: Incorrect Password")};return d.jsxs("div",{className:"min-h-screen bg-[#050510] text-slate-200 p-6 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),d.jsx("div",{className:"absolute -top-[500px] -right-[500px] w-[1000px] h-[1000px] bg-[var(--neon-pink)]/5 blur-[200px] rounded-full"}),d.jsx("div",{className:"absolute -bottom-[500px] -left-[500px] w-[1000px] h-[1000px] bg-[var(--neon-cyan)]/5 blur-[200px] rounded-full"}),d.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-5 pointer-events-none"}),d.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[d.jsxs("div",{className:"flex justify-between items-center mb-24 animate-in fade-in slide-in-from-top-4 duration-700",children:[d.jsx("div",{onClick:r,className:"cursor-pointer hover:scale-105 transition-transform",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-10 h-10 rounded-full border border-[var(--neon-pink)]"}),d.jsx("span",{className:"font-bungee text-xl text-white tracking-widest",children:"SINGMODE"})]})}),d.jsx("button",{onClick:r,className:"px-8 py-4 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-slate-400 hover:text-white rounded-2xl font-bold text-[9px] uppercase tracking-widest font-righteous transition-all",children:"RETURN TO HUB"})]}),d.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-32 animate-in fade-in zoom-in duration-700 delay-100",children:[d.jsxs("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-8 tracking-tight uppercase leading-none neon-text-glow-purple",children:["The ultimate ",d.jsx("span",{className:"text-[var(--neon-cyan)]",children:"karaoke"})," os"]}),d.jsx("p",{className:"text-[10px] md:text-xs text-[var(--neon-cyan)]/80 font-bold uppercase tracking-[0.4em] font-righteous leading-relaxed max-w-2xl mx-auto border-y border-[var(--neon-cyan)]/20 py-4",children:"SingMode transforms any arena into a high-fidelity visual theater. Connect instantly, dominate the queue, and emit your signal."})]}),d.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-32 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200",children:[d.jsx(Qo,{title:"DJ Console",icon:"",description:"The command center for your sessions. Maintain signal flow.",items:["Real-time Queue Logic","Drag & Drop Sequencer","Instant Signal Auth","Master Output Control"]}),d.jsx(Qo,{title:"Singer Web",icon:"",description:"A personal terminal for every guest. Eliminate analog friction.",items:["Identity Transmission","Smart Vector Search","High-Speed Requests","Live Sync Lyrics"]}),d.jsx(Qo,{title:"Theater Box",icon:"",description:"A stunning visual matrix for the main screen. Pure aesthetics.",items:["Ultra-HD Playback","Generative Backgrounds","Active HUD Overlays","QR Signal Entrance"]}),d.jsx(Qo,{title:"Hybrid AI",icon:"",description:"Gemini integration enhances the arena with predictive logic.",items:["Vibe-Matched Vectors","Dynamic Visual Synthesis","Automated Interstitials","Identity Verification"]}),d.jsx(Qo,{title:"Sync Matrix",icon:"",description:"Real-time P2P technology keeps the cluster in perfect sync.",items:["Zero-Latency State","Decentralized Design","Instant Node Creation","Omni-Device Support"]}),d.jsx(Qo,{title:"Prime Suite",icon:"",description:"Unlock premium protocols for venues and power units.",items:["Broadcast Protocols","Branding Overlays","Logic Routing","Priority Channel"]}),d.jsxs("div",{className:"md:col-span-2 lg:col-span-1 border-2 border-dashed border-white/10 rounded-[3.5rem] flex flex-col items-center justify-center p-10 group hover:border-[var(--neon-cyan)] transition-all",children:[d.jsx("p",{className:"text-[10px] text-slate-700 font-black uppercase tracking-[0.4em] mb-6 font-righteous group-hover:text-[var(--neon-cyan)]",children:"ADMIN LOGIN"}),d.jsx("button",{onClick:t,className:"p-6 bg-black border border-white/5 rounded-2xl text-[10px] font-black uppercase tracking-widest font-righteous text-white/40 hover:text-white hover:border-white transition-all shadow-xl",children:" ENTER ADMIN MODE"})]})]}),d.jsx("div",{className:"text-center animate-in fade-in duration-700 delay-500 pb-32",children:d.jsx("button",{onClick:r,className:"px-16 py-8 bg-[var(--neon-cyan)] hover:bg-white text-black rounded-[3rem] font-bold text-2xl uppercase tracking-widest font-righteous shadow-[0_0_50px_rgba(34,211,238,0.4)] hover:scale-105 transition-all",children:"START SINGING"})})]})]})},e4=({onBack:r})=>{const[e,t]=ie.useState(null),[i,o]=ie.useState(""),[c,u]=ie.useState(!1),[m,g]=ie.useState({primary:"#ff007f",secondary:"#05d9e8",accent:"#feff3f"});ie.useEffect(()=>{(async()=>{const E=await Ze();t(E),E.brandIdentity&&(o(E.brandIdentity.venueName),u(E.brandIdentity.isBusinessAccount)),E.customTheme&&g({primary:E.customTheme.primaryNeon,secondary:E.customTheme.secondaryNeon,accent:E.customTheme.accentNeon})})()},[]);const y=async()=>{var E;if(!e)return;const _={...e};_.brandIdentity={venueName:i,isBusinessAccount:c,logoUrl:(E=_.brandIdentity)==null?void 0:E.logoUrl},_.customTheme={primaryNeon:m.primary,secondaryNeon:m.secondary,accentNeon:m.accent},await vt(_),document.documentElement.style.setProperty("--neon-pink",m.primary),document.documentElement.style.setProperty("--neon-cyan",m.secondary),document.documentElement.style.setProperty("--neon-yellow",m.accent),alert("Configurations locked in.")};return e?d.jsxs("div",{className:"min-h-screen bg-[#050510] text-white p-6 md:p-16 relative overflow-hidden font-righteous",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),d.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[d.jsxs("header",{className:"flex justify-between items-center mb-20 animate-in fade-in slide-in-from-top-4 duration-700",children:[d.jsxs("div",{onClick:r,className:"cursor-pointer group flex items-center gap-4",children:[d.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-12 h-12 rounded-full border-2 border-[var(--neon-pink)] group-hover:scale-110 transition-all"}),d.jsx("h1",{className:"text-3xl font-bungee tracking-tight",children:"ADMIN SETTINGS"})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:r,className:"px-6 py-3 bg-black border border-white/10 hover:border-white text-slate-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all",children:"CLOSE MENU"}),d.jsxs("button",{onClick:async()=>{confirm("Are you sure you want to sign out?")&&(await Bd(),window.location.reload())},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/30 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all flex items-center gap-2",children:[d.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.jsx("polyline",{points:"16 17 21 12 16 7"}),d.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"LOG OUT"]})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[d.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-cyan)] mb-2 uppercase",children:"Venue Settings"}),d.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"VENUE DISPLAY"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[9px] text-slate-500 uppercase tracking-widest mb-2 ml-4",children:"Venue Display Name"}),d.jsx("input",{type:"text",value:i,onChange:_=>o(_.target.value),placeholder:"Enter Venue Name",className:"w-full bg-black/60 border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold outline-none focus:border-[var(--neon-cyan)] transition-all uppercase"})]}),d.jsxs("div",{className:"flex items-center justify-between p-6 bg-white/5 rounded-2xl border border-white/5",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1",children:"Business Account"}),d.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold",children:"Unlocks Revenue Stream Matrix"})]}),d.jsx("button",{onClick:()=>u(!c),className:`w-14 h-8 rounded-full transition-all relative ${c?"bg-[var(--neon-cyan)]":"bg-slate-800"}`,children:d.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white transition-all ${c?"right-1":"left-1"}`})})]})]})]}),d.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-pink)] mb-2 uppercase",children:"Theme Matrix"}),d.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"THEME COLORS"})]}),d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[d.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[d.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Primary Neon"}),d.jsx("input",{type:"color",value:m.primary,onChange:_=>g({...m,primary:_.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),d.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[d.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Secondary Neon"}),d.jsx("input",{type:"color",value:m.secondary,onChange:_=>g({...m,secondary:_.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),d.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[d.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Accent Neon"}),d.jsx("input",{type:"color",value:m.accent,onChange:_=>g({...m,accent:_.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]})]})})]})]}),d.jsx("div",{className:"mt-12 flex justify-center",children:d.jsx("button",{onClick:y,className:"px-16 py-6 bg-white text-black rounded-[2rem] font-bold text-xl uppercase tracking-widest font-bungee hover:bg-[var(--neon-cyan)] transition-all shadow-2xl hover:scale-105 active:scale-95",children:"SAVE CHANGES"})})]})]}):null},t4=()=>{const[r,e]=ie.useState("SELECT"),[t,i]=ie.useState(!0),[o,c]=ie.useState(null),[u,m]=ie.useState(!1),[g,y]=ie.useState(!1),[_,E]=ie.useState("");ie.useEffect(()=>{(async()=>{var Ae;const we=new URLSearchParams(window.location.search),ve=(Ae=we.get("view"))==null?void 0:Ae.toUpperCase(),_e=we.get("room");_e&&m(!0);try{ve==="DJ"?(e("DJ"),await rm("DJ",_e||void 0)):ve==="PARTICIPANT"||_e?(e("PARTICIPANT"),await rm("PARTICIPANT",_e||void 0)):e("SELECT")}catch(C){console.error("[App] Init Error:",C),c(C.message),e("SELECT")}const Ue=await Ze();Ue.customTheme&&(document.documentElement.style.setProperty("--neon-pink",Ue.customTheme.primaryNeon),document.documentElement.style.setProperty("--neon-cyan",Ue.customTheme.secondaryNeon),document.documentElement.style.setProperty("--neon-yellow",Ue.customTheme.accentNeon)),await qD(),i(!1)})()},[]);const N=async me=>{i(!0),c(null);try{e(me),(me==="DJ"||me==="PARTICIPANT")&&await rm(me)}catch(we){c(we.message),e("SELECT")}finally{i(!1)}},L=()=>{_.trim()&&(BT(_.trim()),y(!1),E(""))},K=$g(),ne=xt.getRoomId(),re=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(K+(ne?`?room=${ne}`:""))}&bgcolor=ffffff`;if(t)return d.jsxs("div",{className:"min-h-screen bg-[#050510] flex flex-col items-center justify-center space-y-8 relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black"}),d.jsxs("div",{className:"w-24 h-24 relative",children:[d.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-pink)]/30 rounded-full animate-ping"}),d.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-cyan)]/30 rounded-full animate-ping delay-75"}),d.jsx("div",{className:"relative z-10 w-full h-full border-4 border-t-[var(--neon-pink)] border-r-[var(--neon-purple)] border-b-[var(--neon-cyan)] border-l-[var(--neon-yellow)] rounded-full animate-spin"})]}),d.jsx("h2",{className:"text-2xl font-black font-bungee text-white uppercase tracking-widest animate-pulse z-10",children:"INITIALIZING"})]});if(r==="FEATURES")return d.jsx(ZD,{onBack:()=>e("SELECT"),onAdminLogin:()=>e("ADMIN")});if(r==="ADMIN")return d.jsx(e4,{onBack:()=>e("SELECT")});if(r==="SELECT"){const me=GT(),we=K.includes("localhost")||K.includes("127.0.0.1");return d.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#050510] relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black -z-10"}),d.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-10"}),d.jsxs("div",{className:"max-w-7xl w-full z-10",children:[d.jsxs("div",{className:"text-center mb-20 animate-in fade-in slide-in-from-top-4 duration-1000",children:[d.jsxs("div",{className:"flex justify-center mb-10 relative",children:[d.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)]/20 blur-[100px] rounded-full"}),d.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 bg-black shadow-2xl relative z-10",children:d.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_50px_rgba(255,0,127,0.5)] w-48 h-48",children:d.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover"})})})]}),d.jsx("h1",{className:"text-6xl md:text-9xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none drop-shadow-2xl",children:"SINGMODE"}),d.jsx("p",{className:"text-[var(--neon-yellow)] text-xl md:text-2xl font-bold tracking-widest uppercase neon-glow-yellow font-righteous",children:"KARAOKE_LOUNGE_SYSTEM"})]}),o&&d.jsxs("div",{className:"mb-12 p-10 bg-[#150005] border-4 border-rose-500 rounded-[3rem] text-center animate-in zoom-in duration-500 max-w-3xl mx-auto shadow-[0_0_60px_rgba(244,63,94,0.4)] relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-rose-500 animate-pulse"}),d.jsx("div",{className:"text-6xl mb-6",children:""}),d.jsx("h3",{className:"text-rose-500 font-bold uppercase tracking-widest text-3xl mb-4 font-bungee",children:"SYSTEM_CONFLICT"}),d.jsx("p",{className:"text-white text-xl font-bold leading-relaxed font-righteous",children:o}),d.jsx("p",{className:"text-rose-500/50 text-xs mt-8 uppercase font-bold tracking-widest font-righteous",children:"SINGLE_DJ_PROTOCOL_ACTIVE"})]}),d.jsx("div",{className:"flex justify-end mb-4",children:d.jsxs("button",{onClick:()=>e("ADMIN"),className:"px-6 py-2 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-[var(--neon-purple)] rounded-xl text-[10px] font-bold text-slate-400 hover:text-[var(--neon-purple)] uppercase tracking-widest transition-all font-righteous flex items-center gap-2 group",children:[d.jsx("span",{className:"w-2 h-2 bg-[var(--neon-purple)] rounded-full group-hover:animate-pulse"}),"ACCESS_ADMIN_PORTAL"]})}),d.jsxs("div",{className:`grid gap-8 ${u?"grid-cols-1 max-w-2xl mx-auto":"md:grid-cols-2"}`,children:[!u&&d.jsxs("button",{onClick:()=>N("DJ"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-pink)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(255,0,127,0.2)] overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-pink)]/0 to-[var(--neon-pink)]/5 group-hover:to-[var(--neon-pink)]/10 transition-all"}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-pink)] shadow-2xl",children:""}),d.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-pink)] transition-colors",children:"DJ_CONSOLE"}),d.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-cyan)] opacity-90 leading-relaxed",children:"COORDINATE_ROTATION. APPROVE_THREADS. COMMAND_ATMOSPHERE."})]})]}),d.jsxs("button",{onClick:()=>N("PARTICIPANT"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-cyan)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(0,229,255,0.2)] overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 to-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-cyan)]/10 transition-all"}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-cyan)] shadow-2xl",children:""}),d.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGER_UI"}),d.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-yellow)] opacity-90 leading-relaxed",children:"REQUEST_TRACKS. FAVORITE_VIBES. ACCESS_SONGBOOK."})]})]})]}),d.jsxs("div",{className:"mt-16 p-10 bg-[#080808] border-2 border-white/5 rounded-[3rem] flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[d.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-green)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),d.jsx("div",{className:"bg-white p-4 rounded-3xl shrink-0 shadow-[0_0_40px_rgba(0,255,157,0.2)] border-4 border-white/10 group-hover:scale-105 transition-transform",children:d.jsx("img",{src:re,alt:"Join QR Code",width:"140",height:"140",className:"block"})}),d.jsxs("div",{className:"text-center md:text-left flex-1 relative z-10",children:[d.jsx("strong",{className:"text-[var(--neon-green)] block mb-3 uppercase tracking-[0.3em] text-xs font-black font-righteous",children:"SCAN TO JOIN"}),d.jsx("div",{className:"text-white text-xl font-mono break-all mb-4 bg-black/50 px-4 py-2 rounded-lg inline-block border border-white/5",children:K}),we&&d.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl",children:[d.jsx("p",{className:"text-amber-500 text-[10px] font-black uppercase tracking-widest mb-2 font-righteous",children:" LOCALHOST DETECTED"}),d.jsx("button",{onClick:()=>{y(!0),E(me||"")},className:"text-[10px] font-black text-white hover:text-[var(--neon-cyan)] uppercase tracking-[0.2em] underline decoration-white/30 hover:decoration-[var(--neon-cyan)] transition-all font-righteous",children:"CONFIGURE NETWORK IP"})]})]})]})]}),g&&d.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-6 z-50 backdrop-blur-3xl animate-in fade-in duration-300",children:d.jsxs("div",{className:"w-full max-w-lg bg-[#0a0a0a] border-2 border-white/10 rounded-[3rem] p-10 space-y-8 shadow-[0_0_60px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] to-[var(--neon-blue)]"}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight",children:"Network Config"}),d.jsx("p",{className:"text-slate-500 text-[10px] uppercase tracking-widest font-righteous",children:"ESTABLISH REMOTE CONNECTION PROTOCOLS"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"block text-[11px] font-bold text-[var(--neon-cyan)] uppercase tracking-[0.2em] ml-4 font-righteous",children:"Network IP Address"}),d.jsx("input",{type:"text",value:_,onChange:ve=>E(ve.target.value),placeholder:"e.g. 192.168.0.x OR https://....ngrok.io",className:"w-full bg-[#151520] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-sm"}),d.jsxs("p",{className:"text-slate-500 text-[9px] uppercase tracking-widest font-righteous ml-4 opacity-60",children:[d.jsx("span",{className:"text-[var(--neon-yellow)]",children:"PRO TIP:"})," Use ",d.jsx("span",{className:"text-white",children:"ngrok"})," for secure external tunneling."]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-4 bg-black border border-white/10 hover:bg-white/5 text-slate-400 hover:text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all font-righteous",children:"Cancel"}),d.jsx("button",{onClick:L,className:"flex-1 py-4 bg-[var(--neon-cyan)] text-black rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all font-righteous hover:scale-105",children:"Save Configuration"})]})]})})]})}return d.jsxs("div",{className:"min-h-screen bg-[#050510] text-white selection:bg-[var(--neon-pink)] selection:text-white",children:[d.jsx(WD,{role:r}),d.jsx("nav",{className:"fixed top-0 inset-x-0 z-[100] backdrop-blur-xl bg-black/80 border-b border-white/5 transition-all duration-300",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[d.jsxs("div",{onClick:()=>e("SELECT"),className:"cursor-pointer group flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[var(--neon-pink)] p-0.5 group-hover:shadow-[0_0_20px_rgba(255,0,127,0.4)] transition-all",children:d.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full"})}),d.jsx("span",{className:"font-bungee text-xl text-white tracking-widest group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGMODE"})]}),d.jsx("div",{className:"flex items-center gap-6",children:d.jsxs("button",{onClick:()=>{e("SELECT"),c(null)},className:"text-[9px] font-bold uppercase tracking-widest px-5 py-2.5 rounded-xl transition-all font-righteous bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white border border-white/5 hover:border-white/20",children:["EXIT ",r]})})]})}),d.jsx("main",{className:"pb-20",children:r==="DJ"?d.jsx(KD,{onAdminAccess:()=>e("ADMIN")}):d.jsx(JD,{})})]})},qT=document.getElementById("root");if(!qT)throw new Error("Could not find root element to mount to");const n4=jS.createRoot(qT);n4.render(d.jsx(SS.StrictMode,{children:d.jsx(t4,{})}));
