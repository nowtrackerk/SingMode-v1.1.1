var l2=r=>{throw TypeError(r)};var bc=(r,e,t)=>e.has(r)?l2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);function c2(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Cd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yp={exports:{}},xc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function u2(){if(Lb)return xc;Lb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var p in a)p!=="key"&&(l[p]=a[p])}else l=a;return a=l.ref,{$$typeof:r,type:s,key:u,ref:a!==void 0?a:null,props:l}}return xc.Fragment=e,xc.jsx=t,xc.jsxs=t,xc}var Vb;function h2(){return Vb||(Vb=1,Yp.exports=u2()),Yp.exports}var h=h2(),Qp={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function d2(){if(Ub)return Me;Ub=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function R(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,Z={};function ae(P,W,ce){this.props=P,this.context=W,this.refs=Z,this.updater=ce||V}ae.prototype.isReactComponent={},ae.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},ae.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function de(){}de.prototype=ae.prototype;function me(P,W,ce){this.props=P,this.context=W,this.refs=Z,this.updater=ce||V}var ye=me.prototype=new de;ye.constructor=me,$(ye,ae.prototype),ye.isPureReactComponent=!0;var De=Array.isArray;function Te(){}var A={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function k(P,W,ce){var ue=ce.ref;return{$$typeof:r,type:P,key:W,ref:ue!==void 0?ue:null,props:ce}}function L(P,W){return k(P.type,W,P.props)}function j(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function O(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ce){return W[ce]})}var I=/\/+/g;function it(P,W){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):W.toString(36)}function yt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Te,Te):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Q(P,W,ce,ue,Se){var Ie=typeof P;(Ie==="undefined"||Ie==="boolean")&&(P=null);var Pe=!1;if(P===null)Pe=!0;else switch(Ie){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(P.$$typeof){case r:case e:Pe=!0;break;case b:return Pe=P._init,Q(Pe(P._payload),W,ce,ue,Se)}}if(Pe)return Se=Se(P),Pe=ue===""?"."+it(P,0):ue,De(Se)?(ce="",Pe!=null&&(ce=Pe.replace(I,"$&/")+"/"),Q(Se,W,ce,"",function(Br){return Br})):Se!=null&&(j(Se)&&(Se=L(Se,ce+(Se.key==null||P&&P.key===Se.key?"":(""+Se.key).replace(I,"$&/")+"/")+Pe)),W.push(Se)),1;Pe=0;var Pt=ue===""?".":ue+":";if(De(P))for(var $e=0;$e<P.length;$e++)ue=P[$e],Ie=Pt+it(ue,$e),Pe+=Q(ue,W,ce,Ie,Se);else if($e=R(P),typeof $e=="function")for(P=$e.call(P),$e=0;!(ue=P.next()).done;)ue=ue.value,Ie=Pt+it(ue,$e++),Pe+=Q(ue,W,ce,Ie,Se);else if(Ie==="object"){if(typeof P.then=="function")return Q(yt(P),W,ce,ue,Se);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function oe(P,W,ce){if(P==null)return P;var ue=[],Se=0;return Q(P,ue,"","",function(Ie){return W.call(ce,Ie,Se++)}),ue}function we(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(ce){(P._status===0||P._status===-1)&&(P._status=1,P._result=ce)},function(ce){(P._status===0||P._status===-1)&&(P._status=2,P._result=ce)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var Be=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},at={map:oe,forEach:function(P,W,ce){oe(P,function(){W.apply(this,arguments)},ce)},count:function(P){var W=0;return oe(P,function(){W++}),W},toArray:function(P){return oe(P,function(W){return W})||[]},only:function(P){if(!j(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Me.Activity=_,Me.Children=at,Me.Component=ae,Me.Fragment=t,Me.Profiler=a,Me.PureComponent=me,Me.StrictMode=s,Me.Suspense=g,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Me.__COMPILER_RUNTIME={__proto__:null,c:function(P){return A.H.useMemoCache(P)}},Me.cache=function(P){return function(){return P.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(P,W,ce){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ue=$({},P.props),Se=P.key;if(W!=null)for(Ie in W.key!==void 0&&(Se=""+W.key),W)!C.call(W,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&W.ref===void 0||(ue[Ie]=W[Ie]);var Ie=arguments.length-2;if(Ie===1)ue.children=ce;else if(1<Ie){for(var Pe=Array(Ie),Pt=0;Pt<Ie;Pt++)Pe[Pt]=arguments[Pt+2];ue.children=Pe}return k(P.type,Se,ue)},Me.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Me.createElement=function(P,W,ce){var ue,Se={},Ie=null;if(W!=null)for(ue in W.key!==void 0&&(Ie=""+W.key),W)C.call(W,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Se[ue]=W[ue]);var Pe=arguments.length-2;if(Pe===1)Se.children=ce;else if(1<Pe){for(var Pt=Array(Pe),$e=0;$e<Pe;$e++)Pt[$e]=arguments[$e+2];Se.children=Pt}if(P&&P.defaultProps)for(ue in Pe=P.defaultProps,Pe)Se[ue]===void 0&&(Se[ue]=Pe[ue]);return k(P,Ie,Se)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(P){return{$$typeof:p,render:P}},Me.isValidElement=j,Me.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:we}},Me.memo=function(P,W){return{$$typeof:y,type:P,compare:W===void 0?null:W}},Me.startTransition=function(P){var W=A.T,ce={};A.T=ce;try{var ue=P(),Se=A.S;Se!==null&&Se(ce,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Te,Be)}catch(Ie){Be(Ie)}finally{W!==null&&ce.types!==null&&(W.types=ce.types),A.T=W}},Me.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Me.use=function(P){return A.H.use(P)},Me.useActionState=function(P,W,ce){return A.H.useActionState(P,W,ce)},Me.useCallback=function(P,W){return A.H.useCallback(P,W)},Me.useContext=function(P){return A.H.useContext(P)},Me.useDebugValue=function(){},Me.useDeferredValue=function(P,W){return A.H.useDeferredValue(P,W)},Me.useEffect=function(P,W){return A.H.useEffect(P,W)},Me.useEffectEvent=function(P){return A.H.useEffectEvent(P)},Me.useId=function(){return A.H.useId()},Me.useImperativeHandle=function(P,W,ce){return A.H.useImperativeHandle(P,W,ce)},Me.useInsertionEffect=function(P,W){return A.H.useInsertionEffect(P,W)},Me.useLayoutEffect=function(P,W){return A.H.useLayoutEffect(P,W)},Me.useMemo=function(P,W){return A.H.useMemo(P,W)},Me.useOptimistic=function(P,W){return A.H.useOptimistic(P,W)},Me.useReducer=function(P,W,ce){return A.H.useReducer(P,W,ce)},Me.useRef=function(P){return A.H.useRef(P)},Me.useState=function(P){return A.H.useState(P)},Me.useSyncExternalStore=function(P,W,ce){return A.H.useSyncExternalStore(P,W,ce)},Me.useTransition=function(){return A.H.useTransition()},Me.version="19.2.4",Me}var zb;function eu(){return zb||(zb=1,Qp.exports=d2()),Qp.exports}var ie=eu();const f2=Cd(ie);var Kp={exports:{}},_c={},Xp={exports:{}},Jp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function p2(){return Bb||(Bb=1,(function(r){function e(Q,oe){var we=Q.length;Q.push(oe);e:for(;0<we;){var Be=we-1>>>1,at=Q[Be];if(0<a(at,oe))Q[Be]=oe,Q[we]=at,we=Be;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var oe=Q[0],we=Q.pop();if(we!==oe){Q[0]=we;e:for(var Be=0,at=Q.length,P=at>>>1;Be<P;){var W=2*(Be+1)-1,ce=Q[W],ue=W+1,Se=Q[ue];if(0>a(ce,we))ue<at&&0>a(Se,ce)?(Q[Be]=Se,Q[ue]=we,Be=ue):(Q[Be]=ce,Q[W]=we,Be=W);else if(ue<at&&0>a(Se,we))Q[Be]=Se,Q[ue]=we,Be=ue;else break e}}return oe}function a(Q,oe){var we=Q.sortIndex-oe.sortIndex;return we!==0?we:Q.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,p=u.now();r.unstable_now=function(){return u.now()-p}}var g=[],y=[],b=1,_=null,T=3,R=!1,V=!1,$=!1,Z=!1,ae=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function ye(Q){for(var oe=t(y);oe!==null;){if(oe.callback===null)s(y);else if(oe.startTime<=Q)s(y),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(y)}}function De(Q){if($=!1,ye(Q),!V)if(t(g)!==null)V=!0,Te||(Te=!0,O());else{var oe=t(y);oe!==null&&yt(De,oe.startTime-Q)}}var Te=!1,A=-1,C=5,k=-1;function L(){return Z?!0:!(r.unstable_now()-k<C)}function j(){if(Z=!1,Te){var Q=r.unstable_now();k=Q;var oe=!0;try{e:{V=!1,$&&($=!1,de(A),A=-1),R=!0;var we=T;try{t:{for(ye(Q),_=t(g);_!==null&&!(_.expirationTime>Q&&L());){var Be=_.callback;if(typeof Be=="function"){_.callback=null,T=_.priorityLevel;var at=Be(_.expirationTime<=Q);if(Q=r.unstable_now(),typeof at=="function"){_.callback=at,ye(Q),oe=!0;break t}_===t(g)&&s(g),ye(Q)}else s(g);_=t(g)}if(_!==null)oe=!0;else{var P=t(y);P!==null&&yt(De,P.startTime-Q),oe=!1}}break e}finally{_=null,T=we,R=!1}oe=void 0}}finally{oe?O():Te=!1}}}var O;if(typeof me=="function")O=function(){me(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,it=I.port2;I.port1.onmessage=j,O=function(){it.postMessage(null)}}else O=function(){ae(j,0)};function yt(Q,oe){A=ae(function(){Q(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var we=T;T=oe;try{return Q()}finally{T=we}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(Q,oe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var we=T;T=Q;try{return oe()}finally{T=we}},r.unstable_scheduleCallback=function(Q,oe,we){var Be=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Be+we:Be):we=Be,Q){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=we+at,Q={id:b++,callback:oe,priorityLevel:Q,startTime:we,expirationTime:at,sortIndex:-1},we>Be?(Q.sortIndex=we,e(y,Q),t(g)===null&&Q===t(y)&&($?(de(A),A=-1):$=!0,yt(De,we-Be))):(Q.sortIndex=at,e(g,Q),V||R||(V=!0,Te||(Te=!0,O()))),Q},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(Q){var oe=T;return function(){var we=T;T=oe;try{return Q.apply(this,arguments)}finally{T=we}}}})(Jp)),Jp}var Hb;function m2(){return Hb||(Hb=1,Xp.exports=p2()),Xp.exports}var Wp={exports:{}},On={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function g2(){if(Gb)return On;Gb=1;var r=eu();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:y,implementation:b}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,On.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,b)},On.flushSync=function(g){var y=u.T,b=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=y,s.p=b,s.d.f()}},On.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},On.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},On.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,_=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,R=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:R}):b==="script"&&s.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:R,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},On.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},On.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,_=p(b,y.crossOrigin);s.d.L(g,b,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},On.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},On.requestFormReset=function(g){s.d.r(g)},On.unstable_batchedUpdates=function(g,y){return g(y)},On.useFormState=function(g,y,b){return u.H.useFormState(g,y,b)},On.useFormStatus=function(){return u.H.useHostTransitionStatus()},On.version="19.2.4",On}var qb;function y2(){if(qb)return Wp.exports;qb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Wp.exports=g2(),Wp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function v2(){if(Fb)return _c;Fb=1;var r=m2(),e=eu(),t=y2();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function y(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),i;m=m.sibling}throw Error(s(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,S=f.child;S;){if(S===o){x=!0,o=f,c=m;break}if(S===c){x=!0,c=f,o=m;break}S=S.sibling}if(!x){for(S=m.child;S;){if(S===o){x=!0,o=m,c=f;break}if(S===c){x=!0,c=m,o=f;break}S=S.sibling}if(!x)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),de=Symbol.for("react.consumer"),me=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function it(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case ae:return"Profiler";case Z:return"StrictMode";case De:return"Suspense";case Te:return"SuspenseList";case k:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case me:return n.displayName||"Context";case de:return(n._context.displayName||"Context")+".Consumer";case ye:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return i=n.displayName||null,i!==null?i:it(n.type)||"Memo";case C:i=n._payload,n=n._init;try{return it(n(i))}catch{}}return null}var yt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Be=[],at=-1;function P(n){return{current:n}}function W(n){0>at||(n.current=Be[at],Be[at]=null,at--)}function ce(n,i){at++,Be[at]=n.current,n.current=i}var ue=P(null),Se=P(null),Ie=P(null),Pe=P(null);function Pt(n,i){switch(ce(Ie,i),ce(Se,n),ce(ue,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?ab(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=ab(i),n=ob(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(ue),ce(ue,n)}function $e(){W(ue),W(Se),W(Ie)}function Br(n){n.memoizedState!==null&&ce(Pe,n);var i=ue.current,o=ob(i,n.type);i!==o&&(ce(Se,n),ce(ue,o))}function ss(n){Se.current===n&&(W(ue),W(Se)),Pe.current===n&&(W(Pe),mc._currentValue=we)}var is,ks;function ar(n){if(is===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);is=i&&i[1]||"",ks=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+is+n+ks}var Is=!1;function se(n,i){if(!n||Is)return"";Is=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Y){var q=Y}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(Y){q=Y}n.call(ee.prototype)}}else{try{throw Error()}catch(Y){q=Y}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Y){if(Y&&q&&typeof Y.stack=="string")return[Y.stack,q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],S=m[1];if(x&&S){var D=x.split(`
`),G=S.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===G.length)for(c=D.length-1,f=G.length-1;1<=c&&0<=f&&D[c]!==G[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==G[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==G[f]){var K=`
`+D[c].replace(" at new "," at ");return n.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",n.displayName)),K}while(1<=c&&0<=f);break}}}finally{Is=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ar(o):""}function pe(n,i){switch(n.tag){case 26:case 27:case 5:return ar(n.type);case 16:return ar("Lazy");case 13:return n.child!==i&&i!==null?ar("Suspense Fallback"):ar("Suspense");case 19:return ar("SuspenseList");case 0:case 15:return se(n.type,!1);case 11:return se(n.type.render,!1);case 1:return se(n.type,!0);case 31:return ar("Activity");default:return""}}function Xe(n){try{var i="",o=null;do i+=pe(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ge=Object.prototype.hasOwnProperty,Fe=r.unstable_scheduleCallback,Mt=r.unstable_cancelCallback,qe=r.unstable_shouldYield,hn=r.unstable_requestPaint,Zt=r.unstable_now,Bn=r.unstable_getCurrentPriorityLevel,as=r.unstable_ImmediatePriority,Hr=r.unstable_UserBlockingPriority,os=r.unstable_NormalPriority,li=r.unstable_LowPriority,vo=r.unstable_IdlePriority,ci=r.log,ui=r.unstable_setDisableYieldValue,Kn=null,vt=null;function en(n){if(typeof ci=="function"&&ui(n),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Kn,n)}catch{}}var Ee=Math.clz32?Math.clz32:ls,vn=Math.log,hi=Math.LN2;function ls(n){return n>>>=0,n===0?32:31-(vn(n)/hi|0)|0}var bn=256,_r=262144,Ct=4194304;function dn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function wr(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=dn(c):(x&=S,x!==0?f=dn(x):o||(o=S&~n,o!==0&&(f=dn(o))))):(S=c&~m,S!==0?f=dn(S):x!==0?f=dn(x):o||(o=c&~n,o!==0&&(f=dn(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function In(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function bo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(){var n=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),n}function or(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Ds(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ta(n,i,o,c,f,m){var x=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,D=n.expirationTimes,G=n.hiddenUpdates;for(o=x&~o;0<o;){var K=31-Ee(o),ee=1<<K;S[K]=0,D[K]=-1;var q=G[K];if(q!==null)for(G[K]=null,K=0;K<q.length;K++){var Y=q[K];Y!==null&&(Y.lane&=-536870913)}o&=~ee}c!==0&&Gr(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(x&~i))}function Gr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Ee(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Bt(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-Ee(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function be(n,i){var o=i&-i;return o=(o&42)!==0?1:cs(o),(o&(n.suspendedLanes|i))!==0?0:o}function cs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function qr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Sa(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:kb(n.type))}function lr(n,i){var o=oe.p;try{return oe.p=n,i()}finally{oe.p=o}}var Xn=Math.random().toString(36).slice(2),It="__reactFiber$"+Xn,Ht="__reactProps$"+Xn,Er="__reactContainer$"+Xn,fi="__reactEvents$"+Xn,pi="__reactListeners$"+Xn,Na="__reactHandles$"+Xn,xo="__reactResources$"+Xn,cr="__reactMarker$"+Xn;function js(n){delete n[It],delete n[Ht],delete n[fi],delete n[pi],delete n[Na]}function ur(n){var i=n[It];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Er]||o[It]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=pb(n);n!==null;){if(o=n[It])return o;n=pb(n)}return i}n=o,o=n.parentNode}return null}function Hn(n){if(n=n[It]||n[Er]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Dn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Tr(n){var i=n[xo];return i||(i=n[xo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Gt(n){n[cr]=!0}var mi=new Set,Ca={};function Sr(n,i){Nr(n,i),Nr(n+"Capture",i)}function Nr(n,i){for(Ca[n]=i,n=0;n<i.length;n++)mi.add(i[n])}var Cr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},gi={};function _o(n){return Ge.call(gi,n)?!0:Ge.call(us,n)?!1:Cr.test(n)?gi[n]=!0:(us[n]=!0,!1)}function Gn(n,i,o){if(_o(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function tn(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Dt(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function qt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Jn(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yi(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function nt(n){if(!n._valueTracker){var i=Jn(n)?"checked":"value";n._valueTracker=yi(n,i,""+n[i])}}function Lt(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Jn(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var hs=/[\n"\\]/g;function jn(n){return n.replace(hs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function vi(n,i,o,c,f,m,x,S){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),i!=null?x==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+qt(i)):n.value!==""+qt(i)&&(n.value=""+qt(i)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),i!=null?bi(n,x,qt(i)):o!=null?bi(n,x,qt(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+qt(S):n.removeAttribute("name")}function Aa(n,i,o,c,f,m,x,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){nt(n);return}o=o!=null?""+qt(o):"",i=i!=null?""+qt(i):o,S||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),nt(n)}function bi(n,i,o){i==="number"&&hr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function E(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+qt(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function X(n,i,o){if(i!=null&&(i=""+qt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+qt(o):""}function U(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(yt(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=qt(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),nt(n)}function ne(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var he=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function je(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||he.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function St(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&je(n,f,c)}else for(var m in i)i.hasOwnProperty(m)&&je(n,m,i[m])}function qn(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wo(n){return xi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Fr(){}var Il=null;function Ar(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _i=null,ds=null;function Ra(n){var i=Hn(n);if(i&&(n=i.stateNode)){var o=n[Ht]||null;e:switch(n=i.stateNode,i.type){case"input":if(vi(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[Ht]||null;if(!f)throw Error(s(90));vi(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&Lt(c)}break e;case"textarea":X(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&E(n,!!o.multiple,i,!1)}}}var Eo=!1;function wi(n,i,o){if(Eo)return n(i,o);Eo=!0;try{var c=n(i);return c}finally{if(Eo=!1,(_i!==null||ds!==null)&&(lh(),_i&&(i=_i,n=ds,ds=_i=null,Ra(i),n)))for(i=0;i<n.length;i++)Ra(n[i])}}function $r(n,i){var o=n.stateNode;if(o===null)return null;var c=o[Ht]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ka=!1;if(Rr)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){ka=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{ka=!1}var fs=null,Dl=null,Ia=null;function jl(){if(Ia)return Ia;var n,i=Dl,o=i.length,c,f="value"in fs?fs.value:fs.textContent,m=f.length;for(n=0;n<o&&i[n]===f[n];n++);var x=o-n;for(c=1;c<=x&&i[o-c]===f[m-c];c++);return Ia=f.slice(n,1<c?1-c:void 0)}function Da(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Os(){return!0}function Yr(){return!1}function xn(n){function i(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Os:Yr,this.isPropagationStopped=Yr,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),i}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ps=xn(Ps),Ei=_({},Ps,{view:0,detail:0}),Ol=xn(Ei),Ti,To,ms,So=_({},Ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ms&&(ms&&n.type==="mousemove"?(Ti=n.screenX-ms.screenX,To=n.screenY-ms.screenY):To=Ti=0,ms=n),Ti)},movementY:function(n){return"movementY"in n?n.movementY:To}}),Pl=xn(So),ja=_({},So,{dataTransfer:0}),gu=xn(ja),yu=_({},Ei,{relatedTarget:0}),Oa=xn(yu),Ml=_({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),vu=xn(Ml),No=_({},Ps,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bu=xn(No),xu=_({},Ps,{data:0}),gs=xn(xu),_u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Eu[n])?!!i[n]:!1}function Si(){return Tu}var Fn=_({},Ei,{key:function(n){if(n.key){var i=_u[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Da(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(n){return n.type==="keypress"?Da(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Da(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Su=xn(Fn),Nu=_({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ms=xn(Nu),d=_({},Ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si}),v=xn(d),w=_({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=xn(w),B=_({},So,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=xn(B),le=_({},Ps,{newState:0,oldState:0}),Ue=xn(le),Kt=[9,13,27,32],ut=Rr&&"CompositionEvent"in window,jt=null;Rr&&"documentMode"in document&&(jt=document.documentMode);var kr=Rr&&"TextEvent"in window&&!jt,ys=Rr&&(!ut||jt&&8<jt&&11>=jt),Qr=" ",Kr=!1;function Pa(n,i){switch(n){case"keyup":return Kt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Co(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ao=!1;function DT(n,i){switch(n){case"compositionend":return Co(i);case"keypress":return i.which!==32?null:(Kr=!0,Qr);case"textInput":return n=i.data,n===Qr&&Kr?null:n;default:return null}}function jT(n,i){if(Ao)return n==="compositionend"||!ut&&Pa(n,i)?(n=jl(),Ia=Dl=fs=null,Ao=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ys&&i.locale!=="ko"?null:i.data;default:return null}}var OT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y0(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!OT[n.type]:i==="textarea"}function v0(n,i,o,c){_i?ds?ds.push(c):ds=[c]:_i=c,i=mh(i,"onChange"),0<i.length&&(o=new ps("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Ll=null,Vl=null;function PT(n){eb(n,0)}function Cu(n){var i=Dn(n);if(Lt(i))return n}function b0(n,i){if(n==="change")return i}var x0=!1;if(Rr){var Zd;if(Rr){var ef="oninput"in document;if(!ef){var _0=document.createElement("div");_0.setAttribute("oninput","return;"),ef=typeof _0.oninput=="function"}Zd=ef}else Zd=!1;x0=Zd&&(!document.documentMode||9<document.documentMode)}function w0(){Ll&&(Ll.detachEvent("onpropertychange",E0),Vl=Ll=null)}function E0(n){if(n.propertyName==="value"&&Cu(Vl)){var i=[];v0(i,Vl,n,Ar(n)),wi(PT,i)}}function MT(n,i,o){n==="focusin"?(w0(),Ll=i,Vl=o,Ll.attachEvent("onpropertychange",E0)):n==="focusout"&&w0()}function LT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cu(Vl)}function VT(n,i){if(n==="click")return Cu(i)}function UT(n,i){if(n==="input"||n==="change")return Cu(i)}function zT(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var dr=typeof Object.is=="function"?Object.is:zT;function Ul(n,i){if(dr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Ge.call(i,f)||!dr(n[f],i[f]))return!1}return!0}function T0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function S0(n,i){var o=T0(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=T0(o)}}function N0(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?N0(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function C0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=hr(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=hr(n.document)}return i}function tf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var BT=Rr&&"documentMode"in document&&11>=document.documentMode,Ro=null,nf=null,zl=null,rf=!1;function A0(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;rf||Ro==null||Ro!==hr(c)||(c=Ro,"selectionStart"in c&&tf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zl&&Ul(zl,c)||(zl=c,c=mh(nf,"onSelect"),0<c.length&&(i=new ps("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=Ro)))}function Ma(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var ko={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionrun:Ma("Transition","TransitionRun"),transitionstart:Ma("Transition","TransitionStart"),transitioncancel:Ma("Transition","TransitionCancel"),transitionend:Ma("Transition","TransitionEnd")},sf={},R0={};Rr&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function La(n){if(sf[n])return sf[n];if(!ko[n])return n;var i=ko[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in R0)return sf[n]=i[o];return n}var k0=La("animationend"),I0=La("animationiteration"),D0=La("animationstart"),HT=La("transitionrun"),GT=La("transitionstart"),qT=La("transitioncancel"),j0=La("transitionend"),O0=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function Xr(n,i){O0.set(n,i),Sr(i,[n])}var Au=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ir=[],Io=0,of=0;function Ru(){for(var n=Io,i=of=Io=0;i<n;){var o=Ir[i];Ir[i++]=null;var c=Ir[i];Ir[i++]=null;var f=Ir[i];Ir[i++]=null;var m=Ir[i];if(Ir[i++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&P0(o,f,m)}}function ku(n,i,o,c){Ir[Io++]=n,Ir[Io++]=i,Ir[Io++]=o,Ir[Io++]=c,of|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function lf(n,i,o,c){return ku(n,i,o,c),Iu(n)}function Va(n,i){return ku(n,null,null,i),Iu(n)}function P0(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&i!==null&&(f=31-Ee(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),m):null}function Iu(n){if(50<lc)throw lc=0,yp=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Do={};function FT(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(n,i,o,c){return new FT(n,i,o,c)}function cf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ls(n,i){var o=n.alternate;return o===null?(o=fr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function M0(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Du(n,i,o,c,f,m){var x=0;if(c=n,typeof n=="function")cf(n)&&(x=1);else if(typeof n=="string")x=XS(n,o,ue.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case k:return n=fr(31,o,i,f),n.elementType=k,n.lanes=m,n;case $:return Ua(o.children,f,m,i);case Z:x=8,f|=24;break;case ae:return n=fr(12,o,i,f|2),n.elementType=ae,n.lanes=m,n;case De:return n=fr(13,o,i,f),n.elementType=De,n.lanes=m,n;case Te:return n=fr(19,o,i,f),n.elementType=Te,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case me:x=10;break e;case de:x=9;break e;case ye:x=11;break e;case A:x=14;break e;case C:x=16,c=null;break e}x=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=fr(x,o,i,f),i.elementType=n,i.type=c,i.lanes=m,i}function Ua(n,i,o,c){return n=fr(7,n,c,i),n.lanes=o,n}function uf(n,i,o){return n=fr(6,n,null,i),n.lanes=o,n}function L0(n){var i=fr(18,null,null,0);return i.stateNode=n,i}function hf(n,i,o){return i=fr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var V0=new WeakMap;function Dr(n,i){if(typeof n=="object"&&n!==null){var o=V0.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Xe(i)},V0.set(n,i),i)}return{value:n,source:i,stack:Xe(i)}}var jo=[],Oo=0,ju=null,Bl=0,jr=[],Or=0,Ni=null,vs=1,bs="";function Vs(n,i){jo[Oo++]=Bl,jo[Oo++]=ju,ju=n,Bl=i}function U0(n,i,o){jr[Or++]=vs,jr[Or++]=bs,jr[Or++]=Ni,Ni=n;var c=vs;n=bs;var f=32-Ee(c)-1;c&=~(1<<f),o+=1;var m=32-Ee(i)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,vs=1<<32-Ee(i)+f|o<<f|c,bs=m+n}else vs=1<<m|o<<f|c,bs=n}function df(n){n.return!==null&&(Vs(n,1),U0(n,1,0))}function ff(n){for(;n===ju;)ju=jo[--Oo],jo[Oo]=null,Bl=jo[--Oo],jo[Oo]=null;for(;n===Ni;)Ni=jr[--Or],jr[Or]=null,bs=jr[--Or],jr[Or]=null,vs=jr[--Or],jr[Or]=null}function z0(n,i){jr[Or++]=vs,jr[Or++]=bs,jr[Or++]=Ni,vs=i.id,bs=i.overflow,Ni=n}var _n=null,At=null,rt=!1,Ci=null,Pr=!1,pf=Error(s(519));function Ai(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hl(Dr(i,n)),pf}function B0(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[It]=n,i[Ht]=c,o){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(o=0;o<uc.length;o++)Qe(uc[o],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":Qe("invalid",i),Aa(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Qe("invalid",i);break;case"textarea":Qe("invalid",i),U(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||sb(i.textContent,o)?(c.popover!=null&&(Qe("beforetoggle",i),Qe("toggle",i)),c.onScroll!=null&&Qe("scroll",i),c.onScrollEnd!=null&&Qe("scrollend",i),c.onClick!=null&&(i.onclick=Fr),i=!0):i=!1,i||Ai(n,!0)}function H0(n){for(_n=n.return;_n;)switch(_n.tag){case 5:case 31:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:_n=_n.return}}function Po(n){if(n!==_n)return!1;if(!rt)return H0(n),rt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Dp(n.type,n.memoizedProps)),o=!o),o&&At&&Ai(n),H0(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));At=fb(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));At=fb(n)}else i===27?(i=At,Hi(n.type)?(n=Lp,Lp=null,At=n):At=i):At=_n?Lr(n.stateNode.nextSibling):null;return!0}function za(){At=_n=null,rt=!1}function mf(){var n=Ci;return n!==null&&(tr===null?tr=n:tr.push.apply(tr,n),Ci=null),n}function Hl(n){Ci===null?Ci=[n]:Ci.push(n)}var gf=P(null),Ba=null,Us=null;function Ri(n,i,o){ce(gf,i._currentValue),i._currentValue=o}function zs(n){n._currentValue=gf.current,W(gf)}function yf(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function vf(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var D=0;D<i.length;D++)if(S.context===i[D]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),yf(m.return,o,n),c||(x=null);break e}m=S.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(s(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),yf(x,o,n),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===n){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Mo(n,i,o,c){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var S=f.type;dr(f.pendingProps.value,x.value)||(n!==null?n.push(S):n=[S])}}else if(f===Pe.current){if(x=f.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(mc):n=[mc])}f=f.return}n!==null&&vf(i,n,o,c),i.flags|=262144}function Ou(n){for(n=n.firstContext;n!==null;){if(!dr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ha(n){Ba=n,Us=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function wn(n){return G0(Ba,n)}function Pu(n,i){return Ba===null&&Ha(n),G0(n,i)}function G0(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Us===null){if(n===null)throw Error(s(308));Us=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Us=Us.next=i;return o}var $T=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},YT=r.unstable_scheduleCallback,QT=r.unstable_NormalPriority,nn={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bf(){return{controller:new $T,data:new Map,refCount:0}}function Gl(n){n.refCount--,n.refCount===0&&YT(QT,function(){n.controller.abort()})}var ql=null,xf=0,Lo=0,Vo=null;function KT(n,i){if(ql===null){var o=ql=[];xf=0,Lo=Ep(),Vo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return xf++,i.then(q0,q0),i}function q0(){if(--xf===0&&ql!==null){Vo!==null&&(Vo.status="fulfilled");var n=ql;ql=null,Lo=0,Vo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function XT(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var F0=Q.S;Q.S=function(n,i){Av=Zt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&KT(n,i),F0!==null&&F0(n,i)};var Ga=P(null);function _f(){var n=Ga.current;return n!==null?n:Tt.pooledCache}function Mu(n,i){i===null?ce(Ga,Ga.current):ce(Ga,i.pool)}function $0(){var n=_f();return n===null?null:{parent:nn._currentValue,pool:n}}var Uo=Error(s(460)),wf=Error(s(474)),Lu=Error(s(542)),Vu={then:function(){}};function Y0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Q0(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Fr,Fr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,X0(n),n;default:if(typeof i.status=="string")i.then(Fr,Fr);else{if(n=Tt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,X0(n),n}throw Fa=i,Uo}}function qa(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Fa=o,Uo):o}}var Fa=null;function K0(){if(Fa===null)throw Error(s(459));var n=Fa;return Fa=null,n}function X0(n){if(n===Uo||n===Lu)throw Error(s(483))}var zo=null,Fl=0;function Uu(n){var i=Fl;return Fl+=1,zo===null&&(zo=[]),Q0(zo,n,i)}function $l(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function zu(n,i){throw i.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function J0(n){function i(z,M){if(n){var H=z.deletions;H===null?(z.deletions=[M],z.flags|=16):H.push(M)}}function o(z,M){if(!n)return null;for(;M!==null;)i(z,M),M=M.sibling;return null}function c(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function f(z,M){return z=Ls(z,M),z.index=0,z.sibling=null,z}function m(z,M,H){return z.index=H,n?(H=z.alternate,H!==null?(H=H.index,H<M?(z.flags|=67108866,M):H):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function x(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function S(z,M,H,J){return M===null||M.tag!==6?(M=uf(H,z.mode,J),M.return=z,M):(M=f(M,H),M.return=z,M)}function D(z,M,H,J){var Ne=H.type;return Ne===$?K(z,M,H.props.children,J,H.key):M!==null&&(M.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===C&&qa(Ne)===M.type)?(M=f(M,H.props),$l(M,H),M.return=z,M):(M=Du(H.type,H.key,H.props,null,z.mode,J),$l(M,H),M.return=z,M)}function G(z,M,H,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==H.containerInfo||M.stateNode.implementation!==H.implementation?(M=hf(H,z.mode,J),M.return=z,M):(M=f(M,H.children||[]),M.return=z,M)}function K(z,M,H,J,Ne){return M===null||M.tag!==7?(M=Ua(H,z.mode,J,Ne),M.return=z,M):(M=f(M,H),M.return=z,M)}function ee(z,M,H){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=uf(""+M,z.mode,H),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case R:return H=Du(M.type,M.key,M.props,null,z.mode,H),$l(H,M),H.return=z,H;case V:return M=hf(M,z.mode,H),M.return=z,M;case C:return M=qa(M),ee(z,M,H)}if(yt(M)||O(M))return M=Ua(M,z.mode,H,null),M.return=z,M;if(typeof M.then=="function")return ee(z,Uu(M),H);if(M.$$typeof===me)return ee(z,Pu(z,M),H);zu(z,M)}return null}function q(z,M,H,J){var Ne=M!==null?M.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ne!==null?null:S(z,M,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===Ne?D(z,M,H,J):null;case V:return H.key===Ne?G(z,M,H,J):null;case C:return H=qa(H),q(z,M,H,J)}if(yt(H)||O(H))return Ne!==null?null:K(z,M,H,J,null);if(typeof H.then=="function")return q(z,M,Uu(H),J);if(H.$$typeof===me)return q(z,M,Pu(z,H),J);zu(z,H)}return null}function Y(z,M,H,J,Ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(H)||null,S(M,z,""+J,Ne);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case R:return z=z.get(J.key===null?H:J.key)||null,D(M,z,J,Ne);case V:return z=z.get(J.key===null?H:J.key)||null,G(M,z,J,Ne);case C:return J=qa(J),Y(z,M,H,J,Ne)}if(yt(J)||O(J))return z=z.get(H)||null,K(M,z,J,Ne,null);if(typeof J.then=="function")return Y(z,M,H,Uu(J),Ne);if(J.$$typeof===me)return Y(z,M,H,Pu(M,J),Ne);zu(M,J)}return null}function ve(z,M,H,J){for(var Ne=null,lt=null,_e=M,He=M=0,We=null;_e!==null&&He<H.length;He++){_e.index>He?(We=_e,_e=null):We=_e.sibling;var ct=q(z,_e,H[He],J);if(ct===null){_e===null&&(_e=We);break}n&&_e&&ct.alternate===null&&i(z,_e),M=m(ct,M,He),lt===null?Ne=ct:lt.sibling=ct,lt=ct,_e=We}if(He===H.length)return o(z,_e),rt&&Vs(z,He),Ne;if(_e===null){for(;He<H.length;He++)_e=ee(z,H[He],J),_e!==null&&(M=m(_e,M,He),lt===null?Ne=_e:lt.sibling=_e,lt=_e);return rt&&Vs(z,He),Ne}for(_e=c(_e);He<H.length;He++)We=Y(_e,z,He,H[He],J),We!==null&&(n&&We.alternate!==null&&_e.delete(We.key===null?He:We.key),M=m(We,M,He),lt===null?Ne=We:lt.sibling=We,lt=We);return n&&_e.forEach(function(Yi){return i(z,Yi)}),rt&&Vs(z,He),Ne}function Ae(z,M,H,J){if(H==null)throw Error(s(151));for(var Ne=null,lt=null,_e=M,He=M=0,We=null,ct=H.next();_e!==null&&!ct.done;He++,ct=H.next()){_e.index>He?(We=_e,_e=null):We=_e.sibling;var Yi=q(z,_e,ct.value,J);if(Yi===null){_e===null&&(_e=We);break}n&&_e&&Yi.alternate===null&&i(z,_e),M=m(Yi,M,He),lt===null?Ne=Yi:lt.sibling=Yi,lt=Yi,_e=We}if(ct.done)return o(z,_e),rt&&Vs(z,He),Ne;if(_e===null){for(;!ct.done;He++,ct=H.next())ct=ee(z,ct.value,J),ct!==null&&(M=m(ct,M,He),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return rt&&Vs(z,He),Ne}for(_e=c(_e);!ct.done;He++,ct=H.next())ct=Y(_e,z,He,ct.value,J),ct!==null&&(n&&ct.alternate!==null&&_e.delete(ct.key===null?He:ct.key),M=m(ct,M,He),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return n&&_e.forEach(function(o2){return i(z,o2)}),rt&&Vs(z,He),Ne}function wt(z,M,H,J){if(typeof H=="object"&&H!==null&&H.type===$&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var Ne=H.key;M!==null;){if(M.key===Ne){if(Ne=H.type,Ne===$){if(M.tag===7){o(z,M.sibling),J=f(M,H.props.children),J.return=z,z=J;break e}}else if(M.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===C&&qa(Ne)===M.type){o(z,M.sibling),J=f(M,H.props),$l(J,H),J.return=z,z=J;break e}o(z,M);break}else i(z,M);M=M.sibling}H.type===$?(J=Ua(H.props.children,z.mode,J,H.key),J.return=z,z=J):(J=Du(H.type,H.key,H.props,null,z.mode,J),$l(J,H),J.return=z,z=J)}return x(z);case V:e:{for(Ne=H.key;M!==null;){if(M.key===Ne)if(M.tag===4&&M.stateNode.containerInfo===H.containerInfo&&M.stateNode.implementation===H.implementation){o(z,M.sibling),J=f(M,H.children||[]),J.return=z,z=J;break e}else{o(z,M);break}else i(z,M);M=M.sibling}J=hf(H,z.mode,J),J.return=z,z=J}return x(z);case C:return H=qa(H),wt(z,M,H,J)}if(yt(H))return ve(z,M,H,J);if(O(H)){if(Ne=O(H),typeof Ne!="function")throw Error(s(150));return H=Ne.call(H),Ae(z,M,H,J)}if(typeof H.then=="function")return wt(z,M,Uu(H),J);if(H.$$typeof===me)return wt(z,M,Pu(z,H),J);zu(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,M!==null&&M.tag===6?(o(z,M.sibling),J=f(M,H),J.return=z,z=J):(o(z,M),J=uf(H,z.mode,J),J.return=z,z=J),x(z)):o(z,M)}return function(z,M,H,J){try{Fl=0;var Ne=wt(z,M,H,J);return zo=null,Ne}catch(_e){if(_e===Uo||_e===Lu)throw _e;var lt=fr(29,_e,null,z.mode);return lt.lanes=J,lt.return=z,lt}finally{}}}var $a=J0(!0),W0=J0(!1),ki=!1;function Ef(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ii(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Di(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ht&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Iu(n),P0(n,null,o),i}return ku(n,c,i,o),Iu(n)}function Yl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Bt(n,o)}}function Sf(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Nf=!1;function Ql(){if(Nf){var n=Vo;if(n!==null)throw n}}function Kl(n,i,o,c){Nf=!1;var f=n.updateQueue;ki=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var D=S,G=D.next;D.next=null,x===null?m=G:x.next=G,x=D;var K=n.alternate;K!==null&&(K=K.updateQueue,S=K.lastBaseUpdate,S!==x&&(S===null?K.firstBaseUpdate=G:S.next=G,K.lastBaseUpdate=D))}if(m!==null){var ee=f.baseState;x=0,K=G=D=null,S=m;do{var q=S.lane&-536870913,Y=q!==S.lane;if(Y?(Je&q)===q:(c&q)===q){q!==0&&q===Lo&&(Nf=!0),K!==null&&(K=K.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ve=n,Ae=S;q=i;var wt=o;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){ee=ve.call(wt,ee,q);break e}ee=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,q=typeof ve=="function"?ve.call(wt,ee,q):ve,q==null)break e;ee=_({},ee,q);break e;case 2:ki=!0}}q=S.callback,q!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[q]:Y.push(q))}else Y={lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},K===null?(G=K=Y,D=ee):K=K.next=Y,x|=q;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);K===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=G,f.lastBaseUpdate=K,m===null&&(f.shared.lanes=0),Li|=x,n.lanes=x,n.memoizedState=ee}}function Z0(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function ey(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Z0(o[n],i)}var Bo=P(null),Bu=P(0);function ty(n,i){n=Ks,ce(Bu,n),ce(Bo,i),Ks=n|i.baseLanes}function Cf(){ce(Bu,Ks),ce(Bo,Bo.current)}function Af(){Ks=Bu.current,W(Bo),W(Bu)}var pr=P(null),Mr=null;function ji(n){var i=n.alternate;ce(Xt,Xt.current&1),ce(pr,n),Mr===null&&(i===null||Bo.current!==null||i.memoizedState!==null)&&(Mr=n)}function Rf(n){ce(Xt,Xt.current),ce(pr,n),Mr===null&&(Mr=n)}function ny(n){n.tag===22?(ce(Xt,Xt.current),ce(pr,n),Mr===null&&(Mr=n)):Oi()}function Oi(){ce(Xt,Xt.current),ce(pr,pr.current)}function mr(n){W(pr),Mr===n&&(Mr=null),W(Xt)}var Xt=P(0);function Hu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Pp(o)||Mp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Bs=0,ze=null,xt=null,rn=null,Gu=!1,Ho=!1,Ya=!1,qu=0,Xl=0,Go=null,JT=0;function Ft(){throw Error(s(321))}function kf(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!dr(n[o],i[o]))return!1;return!0}function If(n,i,o,c,f,m){return Bs=m,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=n===null||n.memoizedState===null?Uy:$f,Ya=!1,m=o(c,f),Ya=!1,Ho&&(m=sy(i,o,c,f)),ry(n),m}function ry(n){Q.H=Zl;var i=xt!==null&&xt.next!==null;if(Bs=0,rn=xt=ze=null,Gu=!1,Xl=0,Go=null,i)throw Error(s(300));n===null||sn||(n=n.dependencies,n!==null&&Ou(n)&&(sn=!0))}function sy(n,i,o,c){ze=n;var f=0;do{if(Ho&&(Go=null),Xl=0,Ho=!1,25<=f)throw Error(s(301));if(f+=1,rn=xt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=zy,m=i(o,c)}while(Ho);return m}function WT(){var n=Q.H,i=n.useState()[0];return i=typeof i.then=="function"?Jl(i):i,n=n.useState()[0],(xt!==null?xt.memoizedState:null)!==n&&(ze.flags|=1024),i}function Df(){var n=qu!==0;return qu=0,n}function jf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Of(n){if(Gu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Gu=!1}Bs=0,rn=xt=ze=null,Ho=!1,Xl=qu=0,Go=null}function $n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?ze.memoizedState=rn=n:rn=rn.next=n,rn}function Jt(){if(xt===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var i=rn===null?ze.memoizedState:rn.next;if(i!==null)rn=i,xt=n;else{if(n===null)throw ze.alternate===null?Error(s(467)):Error(s(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},rn===null?ze.memoizedState=rn=n:rn=rn.next=n}return rn}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jl(n){var i=Xl;return Xl+=1,Go===null&&(Go=[]),n=Q0(Go,n,i),i=ze,(rn===null?i.memoizedState:rn.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?Uy:$f),n}function $u(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Jl(n);if(n.$$typeof===me)return wn(n)}throw Error(s(438,String(n)))}function Pf(n){var i=null,o=ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=ze.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Fu(),ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=L;return i.index++,o}function Hs(n,i){return typeof i=="function"?i(n):i}function Yu(n){var i=Jt();return Mf(i,xt,n)}function Mf(n,i,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}i.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var S=x=null,D=null,G=i,K=!1;do{var ee=G.lane&-536870913;if(ee!==G.lane?(Je&ee)===ee:(Bs&ee)===ee){var q=G.revertLane;if(q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ee===Lo&&(K=!0);else if((Bs&q)===q){G=G.next,q===Lo&&(K=!0);continue}else ee={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(S=D=ee,x=m):D=D.next=ee,ze.lanes|=q,Li|=q;ee=G.action,Ya&&o(m,ee),m=G.hasEagerState?G.eagerState:o(m,ee)}else q={lane:ee,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(S=D=q,x=m):D=D.next=q,ze.lanes|=ee,Li|=ee;G=G.next}while(G!==null&&G!==i);if(D===null?x=m:D.next=S,!dr(m,n.memoizedState)&&(sn=!0,K&&(o=Vo,o!==null)))throw o;n.memoizedState=m,n.baseState=x,n.baseQueue=D,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Lf(n){var i=Jt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=n(m,x.action),x=x.next;while(x!==f);dr(m,i.memoizedState)||(sn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,c]}function iy(n,i,o){var c=ze,f=Jt(),m=rt;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=i();var x=!dr((xt||f).memoizedState,o);if(x&&(f.memoizedState=o,sn=!0),f=f.queue,zf(ly.bind(null,c,f,n),[n]),f.getSnapshot!==i||x||rn!==null&&rn.memoizedState.tag&1){if(c.flags|=2048,qo(9,{destroy:void 0},oy.bind(null,c,f,o,i),null),Tt===null)throw Error(s(349));m||(Bs&127)!==0||ay(c,i,o)}return o}function ay(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=ze.updateQueue,i===null?(i=Fu(),ze.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function oy(n,i,o,c){i.value=o,i.getSnapshot=c,cy(i)&&uy(n)}function ly(n,i,o){return o(function(){cy(i)&&uy(n)})}function cy(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!dr(n,o)}catch{return!0}}function uy(n){var i=Va(n,2);i!==null&&nr(i,n,2)}function Vf(n){var i=$n();if(typeof n=="function"){var o=n;if(n=o(),Ya){en(!0);try{o()}finally{en(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},i}function hy(n,i,o,c){return n.baseState=o,Mf(n,xt,typeof c=="function"?c:Hs)}function ZT(n,i,o,c,f){if(Xu(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Q.T!==null?o(!0):m.isTransition=!1,c(m),o=i.pending,o===null?(m.next=i.pending=m,dy(i,m)):(m.next=o.next,i.pending=o.next=m)}}function dy(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var m=Q.T,x={};Q.T=x;try{var S=o(f,c),D=Q.S;D!==null&&D(x,S),fy(n,i,S)}catch(G){Uf(n,i,G)}finally{m!==null&&x.types!==null&&(m.types=x.types),Q.T=m}}else try{m=o(f,c),fy(n,i,m)}catch(G){Uf(n,i,G)}}function fy(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){py(n,i,c)},function(c){return Uf(n,i,c)}):py(n,i,o)}function py(n,i,o){i.status="fulfilled",i.value=o,my(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,dy(n,o)))}function Uf(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,my(i),i=i.next;while(i!==c)}n.action=null}function my(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function gy(n,i){return i}function yy(n,i){if(rt){var o=Tt.formState;if(o!==null){e:{var c=ze;if(rt){if(At){t:{for(var f=At,m=Pr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Lr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){At=Lr(f.nextSibling),c=f.data==="F!";break e}}Ai(c)}c=!1}c&&(i=o[0])}}return o=$n(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gy,lastRenderedState:i},o.queue=c,o=My.bind(null,ze,c),c.dispatch=o,c=Vf(!1),m=Ff.bind(null,ze,!1,c.queue),c=$n(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=ZT.bind(null,ze,f,m,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function vy(n){var i=Jt();return by(i,xt,n)}function by(n,i,o){if(i=Mf(n,i,gy)[0],n=Yu(Hs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Jl(i)}catch(x){throw x===Uo?Lu:x}else c=i;i=Jt();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(ze.flags|=2048,qo(9,{destroy:void 0},eS.bind(null,f,o),null)),[c,m,n]}function eS(n,i){n.action=i}function xy(n){var i=Jt(),o=xt;if(o!==null)return by(i,o,n);Jt(),i=i.memoizedState,o=Jt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function qo(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=ze.updateQueue,i===null&&(i=Fu(),ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function _y(){return Jt().memoizedState}function Qu(n,i,o,c){var f=$n();ze.flags|=n,f.memoizedState=qo(1|i,{destroy:void 0},o,c===void 0?null:c)}function Ku(n,i,o,c){var f=Jt();c=c===void 0?null:c;var m=f.memoizedState.inst;xt!==null&&c!==null&&kf(c,xt.memoizedState.deps)?f.memoizedState=qo(i,m,o,c):(ze.flags|=n,f.memoizedState=qo(1|i,m,o,c))}function wy(n,i){Qu(8390656,8,n,i)}function zf(n,i){Ku(2048,8,n,i)}function tS(n){ze.flags|=4;var i=ze.updateQueue;if(i===null)i=Fu(),ze.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function Ey(n){var i=Jt().memoizedState;return tS({ref:i,nextImpl:n}),function(){if((ht&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ty(n,i){return Ku(4,2,n,i)}function Sy(n,i){return Ku(4,4,n,i)}function Ny(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Cy(n,i,o){o=o!=null?o.concat([n]):null,Ku(4,4,Ny.bind(null,i,n),o)}function Bf(){}function Ay(n,i){var o=Jt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&kf(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Ry(n,i){var o=Jt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&kf(i,c[1]))return c[0];if(c=n(),Ya){en(!0);try{n()}finally{en(!1)}}return o.memoizedState=[c,i],c}function Hf(n,i,o){return o===void 0||(Bs&1073741824)!==0&&(Je&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=kv(),ze.lanes|=n,Li|=n,o)}function ky(n,i,o,c){return dr(o,i)?o:Bo.current!==null?(n=Hf(n,o,c),dr(n,i)||(sn=!0),n):(Bs&42)===0||(Bs&1073741824)!==0&&(Je&261930)===0?(sn=!0,n.memoizedState=o):(n=kv(),ze.lanes|=n,Li|=n,i)}function Iy(n,i,o,c,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var x=Q.T,S={};Q.T=S,Ff(n,!1,i,o);try{var D=f(),G=Q.S;if(G!==null&&G(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=XT(D,c);Wl(n,i,K,vr(n))}else Wl(n,i,c,vr(n))}catch(ee){Wl(n,i,{then:function(){},status:"rejected",reason:ee},vr())}finally{oe.p=m,x!==null&&S.types!==null&&(x.types=S.types),Q.T=x}}function nS(){}function Gf(n,i,o,c){if(n.tag!==5)throw Error(s(476));var f=Dy(n).queue;Iy(n,f,i,we,o===null?nS:function(){return jy(n),o(c)})}function Dy(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:we},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function jy(n){var i=Dy(n);i.next===null&&(i=n.alternate.memoizedState),Wl(n,i.next.queue,{},vr())}function qf(){return wn(mc)}function Oy(){return Jt().memoizedState}function Py(){return Jt().memoizedState}function rS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=vr();n=Ii(o);var c=Di(i,n,o);c!==null&&(nr(c,i,o),Yl(c,i,o)),i={cache:bf()},n.payload=i;return}i=i.return}}function sS(n,i,o){var c=vr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xu(n)?Ly(i,o):(o=lf(n,i,o,c),o!==null&&(nr(o,n,c),Vy(o,i,c)))}function My(n,i,o){var c=vr();Wl(n,i,o,c)}function Wl(n,i,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xu(n))Ly(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var x=i.lastRenderedState,S=m(x,o);if(f.hasEagerState=!0,f.eagerState=S,dr(S,x))return ku(n,i,f,0),Tt===null&&Ru(),!1}catch{}finally{}if(o=lf(n,i,f,c),o!==null)return nr(o,n,c),Vy(o,i,c),!0}return!1}function Ff(n,i,o,c){if(c={lane:2,revertLane:Ep(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xu(n)){if(i)throw Error(s(479))}else i=lf(n,o,c,2),i!==null&&nr(i,n,2)}function Xu(n){var i=n.alternate;return n===ze||i!==null&&i===ze}function Ly(n,i){Ho=Gu=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Vy(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Bt(n,o)}}var Zl={readContext:wn,use:$u,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};Zl.useEffectEvent=Ft;var Uy={readContext:wn,use:$u,useCallback:function(n,i){return $n().memoizedState=[n,i===void 0?null:i],n},useContext:wn,useEffect:wy,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Qu(4194308,4,Ny.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Qu(4194308,4,n,i)},useInsertionEffect:function(n,i){Qu(4,2,n,i)},useMemo:function(n,i){var o=$n();i=i===void 0?null:i;var c=n();if(Ya){en(!0);try{n()}finally{en(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=$n();if(o!==void 0){var f=o(i);if(Ya){en(!0);try{o(i)}finally{en(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=sS.bind(null,ze,n),[c.memoizedState,n]},useRef:function(n){var i=$n();return n={current:n},i.memoizedState=n},useState:function(n){n=Vf(n);var i=n.queue,o=My.bind(null,ze,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Bf,useDeferredValue:function(n,i){var o=$n();return Hf(o,n,i)},useTransition:function(){var n=Vf(!1);return n=Iy.bind(null,ze,n.queue,!0,!1),$n().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=ze,f=$n();if(rt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Tt===null)throw Error(s(349));(Je&127)!==0||ay(c,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,wy(ly.bind(null,c,m,n),[n]),c.flags|=2048,qo(9,{destroy:void 0},oy.bind(null,c,m,o,i),null),o},useId:function(){var n=$n(),i=Tt.identifierPrefix;if(rt){var o=bs,c=vs;o=(c&~(1<<32-Ee(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=qu++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=JT++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:qf,useFormState:yy,useActionState:yy,useOptimistic:function(n){var i=$n();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ff.bind(null,ze,!0,o),o.dispatch=i,[n,i]},useMemoCache:Pf,useCacheRefresh:function(){return $n().memoizedState=rS.bind(null,ze)},useEffectEvent:function(n){var i=$n(),o={impl:n};return i.memoizedState=o,function(){if((ht&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},$f={readContext:wn,use:$u,useCallback:Ay,useContext:wn,useEffect:zf,useImperativeHandle:Cy,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Ry,useReducer:Yu,useRef:_y,useState:function(){return Yu(Hs)},useDebugValue:Bf,useDeferredValue:function(n,i){var o=Jt();return ky(o,xt.memoizedState,n,i)},useTransition:function(){var n=Yu(Hs)[0],i=Jt().memoizedState;return[typeof n=="boolean"?n:Jl(n),i]},useSyncExternalStore:iy,useId:Oy,useHostTransitionStatus:qf,useFormState:vy,useActionState:vy,useOptimistic:function(n,i){var o=Jt();return hy(o,xt,n,i)},useMemoCache:Pf,useCacheRefresh:Py};$f.useEffectEvent=Ey;var zy={readContext:wn,use:$u,useCallback:Ay,useContext:wn,useEffect:zf,useImperativeHandle:Cy,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Ry,useReducer:Lf,useRef:_y,useState:function(){return Lf(Hs)},useDebugValue:Bf,useDeferredValue:function(n,i){var o=Jt();return xt===null?Hf(o,n,i):ky(o,xt.memoizedState,n,i)},useTransition:function(){var n=Lf(Hs)[0],i=Jt().memoizedState;return[typeof n=="boolean"?n:Jl(n),i]},useSyncExternalStore:iy,useId:Oy,useHostTransitionStatus:qf,useFormState:xy,useActionState:xy,useOptimistic:function(n,i){var o=Jt();return xt!==null?hy(o,xt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Pf,useCacheRefresh:Py};zy.useEffectEvent=Ey;function Yf(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Qf={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=vr(),f=Ii(c);f.payload=i,o!=null&&(f.callback=o),i=Di(n,f,c),i!==null&&(nr(i,n,c),Yl(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=vr(),f=Ii(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Di(n,f,c),i!==null&&(nr(i,n,c),Yl(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=vr(),c=Ii(o);c.tag=2,i!=null&&(c.callback=i),i=Di(n,c,o),i!==null&&(nr(i,n,o),Yl(i,n,o))}};function By(n,i,o,c,f,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):i.prototype&&i.prototype.isPureReactComponent?!Ul(o,c)||!Ul(f,m):!0}function Hy(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&Qf.enqueueReplaceState(i,i.state,null)}function Qa(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Gy(n){Au(n)}function qy(n){console.error(n)}function Fy(n){Au(n)}function Ju(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function $y(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Kf(n,i,o){return o=Ii(o),o.tag=3,o.payload={element:null},o.callback=function(){Ju(n,i)},o}function Yy(n){return n=Ii(n),n.tag=3,n}function Qy(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){$y(i,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){$y(i,o,c),typeof f!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function iS(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&Mo(i,o,f,!0),o=pr.current,o!==null){switch(o.tag){case 31:case 13:return Mr===null?ch():o.alternate===null&&$t===0&&($t=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Vu?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),xp(n,c,f)),!1;case 22:return o.flags|=65536,c===Vu?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),xp(n,c,f)),!1}throw Error(s(435,o.tag))}return xp(n,c,f),ch(),!1}if(rt)return i=pr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==pf&&(n=Error(s(422),{cause:c}),Hl(Dr(n,o)))):(c!==pf&&(i=Error(s(423),{cause:c}),Hl(Dr(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Dr(c,o),f=Kf(n.stateNode,c,f),Sf(n,f),$t!==4&&($t=2)),!1;var m=Error(s(520),{cause:c});if(m=Dr(m,o),oc===null?oc=[m]:oc.push(m),$t!==4&&($t=2),i===null)return!0;c=Dr(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Kf(o.stateNode,c,n),Sf(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Vi===null||!Vi.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Yy(f),Qy(f,n,o,c),Sf(o,f),!1}o=o.return}while(o!==null);return!1}var Xf=Error(s(461)),sn=!1;function En(n,i,o,c){i.child=n===null?W0(i,null,o,c):$a(i,n.child,o,c)}function Ky(n,i,o,c,f){o=o.render;var m=i.ref;if("ref"in c){var x={};for(var S in c)S!=="ref"&&(x[S]=c[S])}else x=c;return Ha(i),c=If(n,i,o,x,m,f),S=Df(),n!==null&&!sn?(jf(n,i,f),Gs(n,i,f)):(rt&&S&&df(i),i.flags|=1,En(n,i,c,f),i.child)}function Xy(n,i,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!cf(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,Jy(n,i,m,c,f)):(n=Du(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!sp(n,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:Ul,o(x,c)&&n.ref===i.ref)return Gs(n,i,f)}return i.flags|=1,n=Ls(m,c),n.ref=i.ref,n.return=i,i.child=n}function Jy(n,i,o,c,f){if(n!==null){var m=n.memoizedProps;if(Ul(m,c)&&n.ref===i.ref)if(sn=!1,i.pendingProps=c=m,sp(n,f))(n.flags&131072)!==0&&(sn=!0);else return i.lanes=n.lanes,Gs(n,i,f)}return Jf(n,i,o,c,f)}function Wy(n,i,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=i.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,i.child=null;return Zy(n,i,m,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mu(i,m!==null?m.cachePool:null),m!==null?ty(i,m):Cf(),ny(i);else return c=i.lanes=536870912,Zy(n,i,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Mu(i,m.cachePool),ty(i,m),Oi(),i.memoizedState=null):(n!==null&&Mu(i,null),Cf(),Oi());return En(n,i,f,o),i.child}function ec(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Zy(n,i,o,c,f){var m=_f();return m=m===null?null:{parent:nn._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},n!==null&&Mu(i,null),Cf(),ny(i),n!==null&&Mo(n,i,c,!0),i.childLanes=f,null}function Wu(n,i){return i=eh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function ev(n,i,o){return $a(i,n.child,null,o),n=Wu(i,i.pendingProps),n.flags|=2,mr(i),i.memoizedState=null,n}function aS(n,i,o){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(rt){if(c.mode==="hidden")return n=Wu(i,c),i.lanes=536870912,ec(null,n);if(Rf(i),(n=At)?(n=db(n,Pr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ni!==null?{id:vs,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},o=L0(n),o.return=i,i.child=o,_n=i,At=null)):n=null,n===null)throw Ai(i);return i.lanes=536870912,null}return Wu(i,c)}var m=n.memoizedState;if(m!==null){var x=m.dehydrated;if(Rf(i),f)if(i.flags&256)i.flags&=-257,i=ev(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(sn||Mo(n,i,o,!1),f=(o&n.childLanes)!==0,sn||f){if(c=Tt,c!==null&&(x=be(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,Va(n,x),nr(c,n,x),Xf;ch(),i=ev(n,i,o)}else n=m.treeContext,At=Lr(x.nextSibling),_n=i,rt=!0,Ci=null,Pr=!1,n!==null&&z0(i,n),i=Wu(i,c),i.flags|=4096;return i}return n=Ls(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Zu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Jf(n,i,o,c,f){return Ha(i),o=If(n,i,o,c,void 0,f),c=Df(),n!==null&&!sn?(jf(n,i,f),Gs(n,i,f)):(rt&&c&&df(i),i.flags|=1,En(n,i,o,f),i.child)}function tv(n,i,o,c,f,m){return Ha(i),i.updateQueue=null,o=sy(i,c,o,f),ry(n),c=Df(),n!==null&&!sn?(jf(n,i,m),Gs(n,i,m)):(rt&&c&&df(i),i.flags|=1,En(n,i,o,m),i.child)}function nv(n,i,o,c,f){if(Ha(i),i.stateNode===null){var m=Do,x=o.contextType;typeof x=="object"&&x!==null&&(m=wn(x)),m=new o(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Qf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},Ef(i),x=o.contextType,m.context=typeof x=="object"&&x!==null?wn(x):Do,m.state=i.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(Yf(i,o,x,c),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Qf.enqueueReplaceState(m,m.state,null),Kl(i,c,m,f),Ql(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){m=i.stateNode;var S=i.memoizedProps,D=Qa(o,S);m.props=D;var G=m.context,K=o.contextType;x=Do,typeof K=="object"&&K!==null&&(x=wn(K));var ee=o.getDerivedStateFromProps;K=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,K||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||G!==x)&&Hy(i,m,c,x),ki=!1;var q=i.memoizedState;m.state=q,Kl(i,c,m,f),Ql(),G=i.memoizedState,S||q!==G||ki?(typeof ee=="function"&&(Yf(i,o,ee,c),G=i.memoizedState),(D=ki||By(i,o,D,c,q,G,x))?(K||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=G),m.props=c,m.state=G,m.context=x,c=D):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,Tf(n,i),x=i.memoizedProps,K=Qa(o,x),m.props=K,ee=i.pendingProps,q=m.context,G=o.contextType,D=Do,typeof G=="object"&&G!==null&&(D=wn(G)),S=o.getDerivedStateFromProps,(G=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==ee||q!==D)&&Hy(i,m,c,D),ki=!1,q=i.memoizedState,m.state=q,Kl(i,c,m,f),Ql();var Y=i.memoizedState;x!==ee||q!==Y||ki||n!==null&&n.dependencies!==null&&Ou(n.dependencies)?(typeof S=="function"&&(Yf(i,o,S,c),Y=i.memoizedState),(K=ki||By(i,o,K,c,q,Y,D)||n!==null&&n.dependencies!==null&&Ou(n.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Y,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Y,D)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Y),m.props=c,m.state=Y,m.context=D,c=K):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),c=!1)}return m=c,Zu(n,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&c?(i.child=$a(i,n.child,null,f),i.child=$a(i,null,o,f)):En(n,i,o,f),i.memoizedState=m.state,n=i.child):n=Gs(n,i,f),n}function rv(n,i,o,c){return za(),i.flags|=256,En(n,i,o,c),i.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zf(n){return{baseLanes:n,cachePool:$0()}}function ep(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=yr),n}function sv(n,i,o){var c=i.pendingProps,f=!1,m=(i.flags&128)!==0,x;if((x=m)||(x=n!==null&&n.memoizedState===null?!1:(Xt.current&2)!==0),x&&(f=!0,i.flags&=-129),x=(i.flags&32)!==0,i.flags&=-33,n===null){if(rt){if(f?ji(i):Oi(),(n=At)?(n=db(n,Pr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ni!==null?{id:vs,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},o=L0(n),o.return=i,i.child=o,_n=i,At=null)):n=null,n===null)throw Ai(i);return Mp(n)?i.lanes=32:i.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Oi(),f=i.mode,S=eh({mode:"hidden",children:S},f),c=Ua(c,f,o,null),S.return=i,c.return=i,S.sibling=c,i.child=S,c=i.child,c.memoizedState=Zf(o),c.childLanes=ep(n,x,o),i.memoizedState=Wf,ec(null,c)):(ji(i),tp(i,S))}var D=n.memoizedState;if(D!==null&&(S=D.dehydrated,S!==null)){if(m)i.flags&256?(ji(i),i.flags&=-257,i=np(n,i,o)):i.memoizedState!==null?(Oi(),i.child=n.child,i.flags|=128,i=null):(Oi(),S=c.fallback,f=i.mode,c=eh({mode:"visible",children:c.children},f),S=Ua(S,f,o,null),S.flags|=2,c.return=i,S.return=i,c.sibling=S,i.child=c,$a(i,n.child,null,o),c=i.child,c.memoizedState=Zf(o),c.childLanes=ep(n,x,o),i.memoizedState=Wf,i=ec(null,c));else if(ji(i),Mp(S)){if(x=S.nextSibling&&S.nextSibling.dataset,x)var G=x.dgst;x=G,c=Error(s(419)),c.stack="",c.digest=x,Hl({value:c,source:null,stack:null}),i=np(n,i,o)}else if(sn||Mo(n,i,o,!1),x=(o&n.childLanes)!==0,sn||x){if(x=Tt,x!==null&&(c=be(x,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,Va(n,c),nr(x,n,c),Xf;Pp(S)||ch(),i=np(n,i,o)}else Pp(S)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,At=Lr(S.nextSibling),_n=i,rt=!0,Ci=null,Pr=!1,n!==null&&z0(i,n),i=tp(i,c.children),i.flags|=4096);return i}return f?(Oi(),S=c.fallback,f=i.mode,D=n.child,G=D.sibling,c=Ls(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,G!==null?S=Ls(G,S):(S=Ua(S,f,o,null),S.flags|=2),S.return=i,c.return=i,c.sibling=S,i.child=c,ec(null,c),c=i.child,S=n.child.memoizedState,S===null?S=Zf(o):(f=S.cachePool,f!==null?(D=nn._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=$0(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=ep(n,x,o),i.memoizedState=Wf,ec(n.child,c)):(ji(i),o=n.child,n=o.sibling,o=Ls(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(x=i.deletions,x===null?(i.deletions=[n],i.flags|=16):x.push(n)),i.child=o,i.memoizedState=null,o)}function tp(n,i){return i=eh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function eh(n,i){return n=fr(22,n,null,i),n.lanes=0,n}function np(n,i,o){return $a(i,n.child,null,o),n=tp(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function iv(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),yf(n.return,i,o)}function rp(n,i,o,c,f,m){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=i,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function av(n,i,o){var c=i.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=Xt.current,S=(x&2)!==0;if(S?(x=x&1|2,i.flags|=128):x&=1,ce(Xt,x),En(n,i,c,o),c=rt?Bl:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&iv(n,o,i);else if(n.tag===19)iv(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Hu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),rp(i,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Hu(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}rp(i,!0,o,null,m,c);break;case"together":rp(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Gs(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Li|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Mo(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=Ls(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Ls(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function sp(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Ou(n)))}function oS(n,i,o){switch(i.tag){case 3:Pt(i,i.stateNode.containerInfo),Ri(i,nn,n.memoizedState.cache),za();break;case 27:case 5:Br(i);break;case 4:Pt(i,i.stateNode.containerInfo);break;case 10:Ri(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Rf(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(ji(i),i.flags|=128,null):(o&i.child.childLanes)!==0?sv(n,i,o):(ji(i),n=Gs(n,i,o),n!==null?n.sibling:null);ji(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(Mo(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return av(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Xt,Xt.current),c)break;return null;case 22:return i.lanes=0,Wy(n,i,o,i.pendingProps);case 24:Ri(i,nn,n.memoizedState.cache)}return Gs(n,i,o)}function ov(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)sn=!0;else{if(!sp(n,o)&&(i.flags&128)===0)return sn=!1,oS(n,i,o);sn=(n.flags&131072)!==0}else sn=!1,rt&&(i.flags&1048576)!==0&&U0(i,Bl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=qa(i.elementType),i.type=n,typeof n=="function")cf(n)?(c=Qa(n,c),i.tag=1,i=nv(null,i,n,c,o)):(i.tag=0,i=Jf(null,i,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===ye){i.tag=11,i=Ky(null,i,n,c,o);break e}else if(f===A){i.tag=14,i=Xy(null,i,n,c,o);break e}}throw i=it(n)||n,Error(s(306,i,""))}}return i;case 0:return Jf(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=Qa(c,i.pendingProps),nv(n,i,c,f,o);case 3:e:{if(Pt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var m=i.memoizedState;f=m.element,Tf(n,i),Kl(i,c,null,o);var x=i.memoizedState;if(c=x.cache,Ri(i,nn,c),c!==m.cache&&vf(i,[nn],o,!0),Ql(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=rv(n,i,c,o);break e}else if(c!==f){f=Dr(Error(s(424)),i),Hl(f),i=rv(n,i,c,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(At=Lr(n.firstChild),_n=i,rt=!0,Ci=null,Pr=!0,o=W0(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(za(),c===f){i=Gs(n,i,o);break e}En(n,i,c,o)}i=i.child}return i;case 26:return Zu(n,i),n===null?(o=vb(i.type,null,i.pendingProps,null))?i.memoizedState=o:rt||(o=i.type,n=i.pendingProps,c=gh(Ie.current).createElement(o),c[It]=i,c[Ht]=n,Tn(c,o,n),Gt(c),i.stateNode=c):i.memoizedState=vb(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Br(i),n===null&&rt&&(c=i.stateNode=mb(i.type,i.pendingProps,Ie.current),_n=i,Pr=!0,f=At,Hi(i.type)?(Lp=f,At=Lr(c.firstChild)):At=f),En(n,i,i.pendingProps.children,o),Zu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&rt&&((f=c=At)&&(c=LS(c,i.type,i.pendingProps,Pr),c!==null?(i.stateNode=c,_n=i,At=Lr(c.firstChild),Pr=!1,f=!0):f=!1),f||Ai(i)),Br(i),f=i.type,m=i.pendingProps,x=n!==null?n.memoizedProps:null,c=m.children,Dp(f,m)?c=null:x!==null&&Dp(f,x)&&(i.flags|=32),i.memoizedState!==null&&(f=If(n,i,WT,null,null,o),mc._currentValue=f),Zu(n,i),En(n,i,c,o),i.child;case 6:return n===null&&rt&&((n=o=At)&&(o=VS(o,i.pendingProps,Pr),o!==null?(i.stateNode=o,_n=i,At=null,n=!0):n=!1),n||Ai(i)),null;case 13:return sv(n,i,o);case 4:return Pt(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=$a(i,null,c,o):En(n,i,c,o),i.child;case 11:return Ky(n,i,i.type,i.pendingProps,o);case 7:return En(n,i,i.pendingProps,o),i.child;case 8:return En(n,i,i.pendingProps.children,o),i.child;case 12:return En(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Ri(i,i.type,c.value),En(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Ha(i),f=wn(f),c=c(f),i.flags|=1,En(n,i,c,o),i.child;case 14:return Xy(n,i,i.type,i.pendingProps,o);case 15:return Jy(n,i,i.type,i.pendingProps,o);case 19:return av(n,i,o);case 31:return aS(n,i,o);case 22:return Wy(n,i,o,i.pendingProps);case 24:return Ha(i),c=wn(nn),n===null?(f=_f(),f===null&&(f=Tt,m=bf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:c,cache:f},Ef(i),Ri(i,nn,f)):((n.lanes&o)!==0&&(Tf(n,i),Kl(i,null,null,o),Ql()),f=n.memoizedState,m=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ri(i,nn,c)):(c=m.cache,Ri(i,nn,c),c!==f.cache&&vf(i,[nn],o,!0))),En(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function qs(n){n.flags|=4}function ip(n,i,o,c,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Ov())n.flags|=8192;else throw Fa=Vu,wf}else n.flags&=-16777217}function lv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Eb(i))if(Ov())n.flags|=8192;else throw Fa=Vu,wf}function th(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?di():536870912,n.lanes|=i,Qo|=i)}function tc(n,i){if(!rt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Rt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function lS(n,i,o){var c=i.pendingProps;switch(ff(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(i),null;case 1:return Rt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),zs(nn),$e(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Po(i)?qs(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,mf())),Rt(i),null;case 26:var f=i.type,m=i.memoizedState;return n===null?(qs(i),m!==null?(Rt(i),lv(i,m)):(Rt(i),ip(i,f,null,c,o))):m?m!==n.memoizedState?(qs(i),Rt(i),lv(i,m)):(Rt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&qs(i),Rt(i),ip(i,f,n,c,o)),null;case 27:if(ss(i),o=Ie.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&qs(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Rt(i),null}n=ue.current,Po(i)?B0(i):(n=mb(f,c,o),i.stateNode=n,qs(i))}return Rt(i),null;case 5:if(ss(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&qs(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Rt(i),null}if(m=ue.current,Po(i))B0(i);else{var x=gh(Ie.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[It]=i,m[Ht]=c;e:for(x=i.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===i)break e;for(;x.sibling===null;){if(x.return===null||x.return===i)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}i.stateNode=m;e:switch(Tn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&qs(i)}}return Rt(i),ip(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&qs(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ie.current,Po(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=_n,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[It]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||sb(n.nodeValue,o)),n||Ai(i,!0)}else n=gh(n).createTextNode(c),n[It]=i,i.stateNode=n}return Rt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=Po(i),o!==null){if(n===null){if(!c)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[It]=i}else za(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Rt(i),n=!1}else o=mf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(mr(i),i):(mr(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Rt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Po(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[It]=i}else za(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Rt(i),f=!1}else f=mf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(mr(i),i):(mr(i),null)}return mr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),th(i,i.updateQueue),Rt(i),null);case 4:return $e(),n===null&&Cp(i.stateNode.containerInfo),Rt(i),null;case 10:return zs(i.type),Rt(i),null;case 19:if(W(Xt),c=i.memoizedState,c===null)return Rt(i),null;if(f=(i.flags&128)!==0,m=c.rendering,m===null)if(f)tc(c,!1);else{if($t!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Hu(n),m!==null){for(i.flags|=128,tc(c,!1),n=m.updateQueue,i.updateQueue=n,th(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)M0(o,n),o=o.sibling;return ce(Xt,Xt.current&1|2),rt&&Vs(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Zt()>ah&&(i.flags|=128,f=!0,tc(c,!1),i.lanes=4194304)}else{if(!f)if(n=Hu(m),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,th(i,n),tc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!rt)return Rt(i),null}else 2*Zt()-c.renderingStartTime>ah&&o!==536870912&&(i.flags|=128,f=!0,tc(c,!1),i.lanes=4194304);c.isBackwards?(m.sibling=i.child,i.child=m):(n=c.last,n!==null?n.sibling=m:i.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Zt(),n.sibling=null,o=Xt.current,ce(Xt,f?o&1|2:o&1),rt&&Vs(i,c.treeForkCount),n):(Rt(i),null);case 22:case 23:return mr(i),Af(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(Rt(i),i.subtreeFlags&6&&(i.flags|=8192)):Rt(i),o=i.updateQueue,o!==null&&th(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&W(Ga),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),zs(nn),Rt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function cS(n,i){switch(ff(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return zs(nn),$e(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ss(i),null;case 31:if(i.memoizedState!==null){if(mr(i),i.alternate===null)throw Error(s(340));za()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(mr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));za()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(Xt),null;case 4:return $e(),null;case 10:return zs(i.type),null;case 22:case 23:return mr(i),Af(),n!==null&&W(Ga),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return zs(nn),null;case 25:return null;default:return null}}function cv(n,i){switch(ff(i),i.tag){case 3:zs(nn),$e();break;case 26:case 27:case 5:ss(i);break;case 4:$e();break;case 31:i.memoizedState!==null&&mr(i);break;case 13:mr(i);break;case 19:W(Xt);break;case 10:zs(i.type);break;case 22:case 23:mr(i),Af(),n!==null&&W(Ga);break;case 24:zs(nn)}}function nc(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(S){mt(i,i.return,S)}}function Pi(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var x=c.inst,S=x.destroy;if(S!==void 0){x.destroy=void 0,f=i;var D=o,G=S;try{G()}catch(K){mt(f,D,K)}}}c=c.next}while(c!==m)}}catch(K){mt(i,i.return,K)}}function uv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{ey(i,o)}catch(c){mt(n,n.return,c)}}}function hv(n,i,o){o.props=Qa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){mt(n,i,c)}}function rc(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){mt(n,i,f)}}function xs(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){mt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){mt(n,i,f)}else o.current=null}function dv(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){mt(n,n.return,f)}}function ap(n,i,o){try{var c=n.stateNode;IS(c,n.type,o,i),c[Ht]=i}catch(f){mt(n,n.return,f)}}function fv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Hi(n.type)||n.tag===4}function op(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Hi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lp(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Fr));else if(c!==4&&(c===27&&Hi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(lp(n,i,o),n=n.sibling;n!==null;)lp(n,i,o),n=n.sibling}function nh(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Hi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(nh(n,i,o),n=n.sibling;n!==null;)nh(n,i,o),n=n.sibling}function pv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Tn(i,c,o),i[It]=n,i[Ht]=o}catch(m){mt(n,n.return,m)}}var Fs=!1,an=!1,cp=!1,mv=typeof WeakSet=="function"?WeakSet:Set,mn=null;function uS(n,i){if(n=n.containerInfo,kp=Eh,n=C0(n),tf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,S=-1,D=-1,G=0,K=0,ee=n,q=null;t:for(;;){for(var Y;ee!==o||f!==0&&ee.nodeType!==3||(S=x+f),ee!==m||c!==0&&ee.nodeType!==3||(D=x+c),ee.nodeType===3&&(x+=ee.nodeValue.length),(Y=ee.firstChild)!==null;)q=ee,ee=Y;for(;;){if(ee===n)break t;if(q===o&&++G===f&&(S=x),q===m&&++K===c&&(D=x),(Y=ee.nextSibling)!==null)break;ee=q,q=ee.parentNode}ee=Y}o=S===-1||D===-1?null:{start:S,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ip={focusedElem:n,selectionRange:o},Eh=!1,mn=i;mn!==null;)if(i=mn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,mn=n;else for(;mn!==null;){switch(i=mn,m=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var ve=Qa(o.type,f);n=c.getSnapshotBeforeUpdate(ve,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){mt(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Op(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Op(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,mn=n;break}mn=i.return}}function gv(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ys(n,o),c&4&&nc(5,o);break;case 1:if(Ys(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(x){mt(o,o.return,x)}else{var f=Qa(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(x){mt(o,o.return,x)}}c&64&&uv(o),c&512&&rc(o,o.return);break;case 3:if(Ys(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{ey(n,i)}catch(x){mt(o,o.return,x)}}break;case 27:i===null&&c&4&&pv(o);case 26:case 5:Ys(n,o),i===null&&c&4&&dv(o),c&512&&rc(o,o.return);break;case 12:Ys(n,o);break;case 31:Ys(n,o),c&4&&bv(n,o);break;case 13:Ys(n,o),c&4&&xv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=bS.bind(null,o),US(n,o))));break;case 22:if(c=o.memoizedState!==null||Fs,!c){i=i!==null&&i.memoizedState!==null||an,f=Fs;var m=an;Fs=c,(an=i)&&!m?Qs(n,o,(o.subtreeFlags&8772)!==0):Ys(n,o),Fs=f,an=m}break;case 30:break;default:Ys(n,o)}}function yv(n){var i=n.alternate;i!==null&&(n.alternate=null,yv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&js(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ot=null,Wn=!1;function $s(n,i,o){for(o=o.child;o!==null;)vv(n,i,o),o=o.sibling}function vv(n,i,o){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Kn,o)}catch{}switch(o.tag){case 26:an||xs(o,i),$s(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:an||xs(o,i);var c=Ot,f=Wn;Hi(o.type)&&(Ot=o.stateNode,Wn=!1),$s(n,i,o),dc(o.stateNode),Ot=c,Wn=f;break;case 5:an||xs(o,i);case 6:if(c=Ot,f=Wn,Ot=null,$s(n,i,o),Ot=c,Wn=f,Ot!==null)if(Wn)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(o.stateNode)}catch(m){mt(o,i,m)}else try{Ot.removeChild(o.stateNode)}catch(m){mt(o,i,m)}break;case 18:Ot!==null&&(Wn?(n=Ot,ub(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),nl(n)):ub(Ot,o.stateNode));break;case 4:c=Ot,f=Wn,Ot=o.stateNode.containerInfo,Wn=!0,$s(n,i,o),Ot=c,Wn=f;break;case 0:case 11:case 14:case 15:Pi(2,o,i),an||Pi(4,o,i),$s(n,i,o);break;case 1:an||(xs(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&hv(o,i,c)),$s(n,i,o);break;case 21:$s(n,i,o);break;case 22:an=(c=an)||o.memoizedState!==null,$s(n,i,o),an=c;break;default:$s(n,i,o)}}function bv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{nl(n)}catch(o){mt(i,i.return,o)}}}function xv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{nl(n)}catch(o){mt(i,i.return,o)}}function hS(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new mv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new mv),i;default:throw Error(s(435,n.tag))}}function rh(n,i){var o=hS(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var f=xS.bind(null,n,c);c.then(f,f)}})}function Zn(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,x=i,S=x;e:for(;S!==null;){switch(S.tag){case 27:if(Hi(S.type)){Ot=S.stateNode,Wn=!1;break e}break;case 5:Ot=S.stateNode,Wn=!1;break e;case 3:case 4:Ot=S.stateNode.containerInfo,Wn=!0;break e}S=S.return}if(Ot===null)throw Error(s(160));vv(m,x,f),Ot=null,Wn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)_v(i,n),i=i.sibling}var Jr=null;function _v(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Zn(i,n),er(n),c&4&&(Pi(3,n,n.return),nc(3,n),Pi(5,n,n.return));break;case 1:Zn(i,n),er(n),c&512&&(an||o===null||xs(o,o.return)),c&64&&Fs&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Jr;if(Zn(i,n),er(n),c&512&&(an||o===null||xs(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[cr]||m[It]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Tn(m,c,o),m[It]=n,Gt(m),c=m;break e;case"link":var x=_b("link","href",f).get(c+(o.href||""));if(x){for(var S=0;S<x.length;S++)if(m=x[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(S,1);break t}}m=f.createElement(c),Tn(m,c,o),f.head.appendChild(m);break;case"meta":if(x=_b("meta","content",f).get(c+(o.content||""))){for(S=0;S<x.length;S++)if(m=x[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(S,1);break t}}m=f.createElement(c),Tn(m,c,o),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[It]=n,Gt(m),c=m}n.stateNode=c}else wb(f,n.type,n.stateNode);else n.stateNode=xb(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?wb(f,n.type,n.stateNode):xb(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&ap(n,n.memoizedProps,o.memoizedProps)}break;case 27:Zn(i,n),er(n),c&512&&(an||o===null||xs(o,o.return)),o!==null&&c&4&&ap(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Zn(i,n),er(n),c&512&&(an||o===null||xs(o,o.return)),n.flags&32){f=n.stateNode;try{ne(f,"")}catch(ve){mt(n,n.return,ve)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,ap(n,f,o!==null?o.memoizedProps:f)),c&1024&&(cp=!0);break;case 6:if(Zn(i,n),er(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(ve){mt(n,n.return,ve)}}break;case 3:if(bh=null,f=Jr,Jr=yh(i.containerInfo),Zn(i,n),Jr=f,er(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{nl(i.containerInfo)}catch(ve){mt(n,n.return,ve)}cp&&(cp=!1,wv(n));break;case 4:c=Jr,Jr=yh(n.stateNode.containerInfo),Zn(i,n),er(n),Jr=c;break;case 12:Zn(i,n),er(n);break;case 31:Zn(i,n),er(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 13:Zn(i,n),er(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ih=Zt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,G=Fs,K=an;if(Fs=G||f,an=K||D,Zn(i,n),an=K,Fs=G,er(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||Fs||an||Ka(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(m=D.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{S=D.stateNode;var ee=D.memoizedProps.style,q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;S.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ve){mt(D,D.return,ve)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(ve){mt(D,D.return,ve)}}}else if(i.tag===18){if(o===null){D=i;try{var Y=D.stateNode;f?hb(Y,!0):hb(D.stateNode,!1)}catch(ve){mt(D,D.return,ve)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,rh(n,o))));break;case 19:Zn(i,n),er(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 30:break;case 21:break;default:Zn(i,n),er(n)}}function er(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(fv(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,m=op(n);nh(n,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(ne(x,""),o.flags&=-33);var S=op(n);nh(n,S,x);break;case 3:case 4:var D=o.stateNode.containerInfo,G=op(n);lp(n,G,D);break;default:throw Error(s(161))}}catch(K){mt(n,n.return,K)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function wv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;wv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ys(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)gv(n,i.alternate,i),i=i.sibling}function Ka(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Pi(4,i,i.return),Ka(i);break;case 1:xs(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&hv(i,i.return,o),Ka(i);break;case 27:dc(i.stateNode);case 26:case 5:xs(i,i.return),Ka(i);break;case 22:i.memoizedState===null&&Ka(i);break;case 30:Ka(i);break;default:Ka(i)}n=n.sibling}}function Qs(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,m=i,x=m.flags;switch(m.tag){case 0:case 11:case 15:Qs(f,m,o),nc(4,m);break;case 1:if(Qs(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){mt(c,c.return,G)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Z0(D[f],S)}catch(G){mt(c,c.return,G)}}o&&x&64&&uv(m),rc(m,m.return);break;case 27:pv(m);case 26:case 5:Qs(f,m,o),o&&c===null&&x&4&&dv(m),rc(m,m.return);break;case 12:Qs(f,m,o);break;case 31:Qs(f,m,o),o&&x&4&&bv(f,m);break;case 13:Qs(f,m,o),o&&x&4&&xv(f,m);break;case 22:m.memoizedState===null&&Qs(f,m,o),rc(m,m.return);break;case 30:break;default:Qs(f,m,o)}i=i.sibling}}function up(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Gl(o))}function hp(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Gl(n))}function Wr(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ev(n,i,o,c),i=i.sibling}function Ev(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Wr(n,i,o,c),f&2048&&nc(9,i);break;case 1:Wr(n,i,o,c);break;case 3:Wr(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Gl(n)));break;case 12:if(f&2048){Wr(n,i,o,c),n=i.stateNode;try{var m=i.memoizedProps,x=m.id,S=m.onPostCommit;typeof S=="function"&&S(x,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){mt(i,i.return,D)}}else Wr(n,i,o,c);break;case 31:Wr(n,i,o,c);break;case 13:Wr(n,i,o,c);break;case 23:break;case 22:m=i.stateNode,x=i.alternate,i.memoizedState!==null?m._visibility&2?Wr(n,i,o,c):sc(n,i):m._visibility&2?Wr(n,i,o,c):(m._visibility|=2,Fo(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&up(x,i);break;case 24:Wr(n,i,o,c),f&2048&&hp(i.alternate,i);break;default:Wr(n,i,o,c)}}function Fo(n,i,o,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=n,x=i,S=o,D=c,G=x.flags;switch(x.tag){case 0:case 11:case 15:Fo(m,x,S,D,f),nc(8,x);break;case 23:break;case 22:var K=x.stateNode;x.memoizedState!==null?K._visibility&2?Fo(m,x,S,D,f):sc(m,x):(K._visibility|=2,Fo(m,x,S,D,f)),f&&G&2048&&up(x.alternate,x);break;case 24:Fo(m,x,S,D,f),f&&G&2048&&hp(x.alternate,x);break;default:Fo(m,x,S,D,f)}i=i.sibling}}function sc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:sc(o,c),f&2048&&up(c.alternate,c);break;case 24:sc(o,c),f&2048&&hp(c.alternate,c);break;default:sc(o,c)}i=i.sibling}}var ic=8192;function $o(n,i,o){if(n.subtreeFlags&ic)for(n=n.child;n!==null;)Tv(n,i,o),n=n.sibling}function Tv(n,i,o){switch(n.tag){case 26:$o(n,i,o),n.flags&ic&&n.memoizedState!==null&&JS(o,Jr,n.memoizedState,n.memoizedProps);break;case 5:$o(n,i,o);break;case 3:case 4:var c=Jr;Jr=yh(n.stateNode.containerInfo),$o(n,i,o),Jr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=ic,ic=16777216,$o(n,i,o),ic=c):$o(n,i,o));break;default:$o(n,i,o)}}function Sv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ac(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];mn=c,Cv(c,n)}Sv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Nv(n),n=n.sibling}function Nv(n){switch(n.tag){case 0:case 11:case 15:ac(n),n.flags&2048&&Pi(9,n,n.return);break;case 3:ac(n);break;case 12:ac(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,sh(n)):ac(n);break;default:ac(n)}}function sh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];mn=c,Cv(c,n)}Sv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Pi(8,i,i.return),sh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,sh(i));break;default:sh(i)}n=n.sibling}}function Cv(n,i){for(;mn!==null;){var o=mn;switch(o.tag){case 0:case 11:case 15:Pi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Gl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,mn=c;else e:for(o=n;mn!==null;){c=mn;var f=c.sibling,m=c.return;if(yv(c),c===o){mn=null;break e}if(f!==null){f.return=m,mn=f;break e}mn=m}}}var dS={getCacheForType:function(n){var i=wn(nn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return wn(nn).controller.signal}},fS=typeof WeakMap=="function"?WeakMap:Map,ht=0,Tt=null,Ye=null,Je=0,pt=0,gr=null,Mi=!1,Yo=!1,dp=!1,Ks=0,$t=0,Li=0,Xa=0,fp=0,yr=0,Qo=0,oc=null,tr=null,pp=!1,ih=0,Av=0,ah=1/0,oh=null,Vi=null,fn=0,Ui=null,Ko=null,Xs=0,mp=0,gp=null,Rv=null,lc=0,yp=null;function vr(){return(ht&2)!==0&&Je!==0?Je&-Je:Q.T!==null?Ep():Sa()}function kv(){if(yr===0)if((Je&536870912)===0||rt){var n=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),yr=n}else yr=536870912;return n=pr.current,n!==null&&(n.flags|=32),yr}function nr(n,i,o){(n===Tt&&(pt===2||pt===9)||n.cancelPendingCommit!==null)&&(Xo(n,0),zi(n,Je,yr,!1)),Ds(n,o),((ht&2)===0||n!==Tt)&&(n===Tt&&((ht&2)===0&&(Xa|=o),$t===4&&zi(n,Je,yr,!1)),_s(n))}function Iv(n,i,o){if((ht&6)!==0)throw Error(s(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||In(n,i),f=c?gS(n,i):bp(n,i,!0),m=c;do{if(f===0){Yo&&!c&&zi(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!pS(o)){f=bp(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){i=x;e:{var S=n;f=oc;var D=S.current.memoizedState.isDehydrated;if(D&&(Xo(S,x).flags|=256),x=bp(S,x,!1),x!==2){if(dp&&!D){S.errorRecoveryDisabledLanes|=m,Xa|=m,f=4;break e}m=tr,tr=f,m!==null&&(tr===null?tr=m:tr.push.apply(tr,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Xo(n,0),zi(n,i,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:zi(c,i,yr,!Mi);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=ih+300-Zt(),10<f)){if(zi(c,i,yr,!Mi),wr(c,0,!0)!==0)break e;Xs=i,c.timeoutHandle=lb(Dv.bind(null,c,o,tr,oh,pp,i,yr,Xa,Qo,Mi,m,"Throttled",-0,0),f);break e}Dv(c,o,tr,oh,pp,i,yr,Xa,Qo,Mi,m,null,-0,0)}}break}while(!0);_s(n)}function Dv(n,i,o,c,f,m,x,S,D,G,K,ee,q,Y){if(n.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fr},Tv(i,m,ee);var ve=(m&62914560)===m?ih-Zt():(m&4194048)===m?Av-Zt():0;if(ve=WS(ee,ve),ve!==null){Xs=m,n.cancelPendingCommit=ve(zv.bind(null,n,i,m,o,c,f,x,S,D,K,ee,null,q,Y)),zi(n,m,x,!G);return}}zv(n,i,m,o,c,f,x,S,D)}function pS(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!dr(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zi(n,i,o,c){i&=~fp,i&=~Xa,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var m=31-Ee(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&Gr(n,o,i)}function lh(){return(ht&6)===0?(cc(0),!1):!0}function vp(){if(Ye!==null){if(pt===0)var n=Ye.return;else n=Ye,Us=Ba=null,Of(n),zo=null,Fl=0,n=Ye;for(;n!==null;)cv(n.alternate,n),n=n.return;Ye=null}}function Xo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,OS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Xs=0,vp(),Tt=n,Ye=o=Ls(n.current,null),Je=i,pt=0,gr=null,Mi=!1,Yo=In(n,i),dp=!1,Qo=yr=fp=Xa=Li=$t=0,tr=oc=null,pp=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-Ee(c),m=1<<f;i|=n[f],c&=~m}return Ks=i,Ru(),o}function jv(n,i){ze=null,Q.H=Zl,i===Uo||i===Lu?(i=K0(),pt=3):i===wf?(i=K0(),pt=4):pt=i===Xf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gr=i,Ye===null&&($t=1,Ju(n,Dr(i,n.current)))}function Ov(){var n=pr.current;return n===null?!0:(Je&4194048)===Je?Mr===null:(Je&62914560)===Je||(Je&536870912)!==0?n===Mr:!1}function Pv(){var n=Q.H;return Q.H=Zl,n===null?Zl:n}function Mv(){var n=Q.A;return Q.A=dS,n}function ch(){$t=4,Mi||(Je&4194048)!==Je&&pr.current!==null||(Yo=!0),(Li&134217727)===0&&(Xa&134217727)===0||Tt===null||zi(Tt,Je,yr,!1)}function bp(n,i,o){var c=ht;ht|=2;var f=Pv(),m=Mv();(Tt!==n||Je!==i)&&(oh=null,Xo(n,i)),i=!1;var x=$t;e:do try{if(pt!==0&&Ye!==null){var S=Ye,D=gr;switch(pt){case 8:vp(),x=6;break e;case 3:case 2:case 9:case 6:pr.current===null&&(i=!0);var G=pt;if(pt=0,gr=null,Jo(n,S,D,G),o&&Yo){x=0;break e}break;default:G=pt,pt=0,gr=null,Jo(n,S,D,G)}}mS(),x=$t;break}catch(K){jv(n,K)}while(!0);return i&&n.shellSuspendCounter++,Us=Ba=null,ht=c,Q.H=f,Q.A=m,Ye===null&&(Tt=null,Je=0,Ru()),x}function mS(){for(;Ye!==null;)Lv(Ye)}function gS(n,i){var o=ht;ht|=2;var c=Pv(),f=Mv();Tt!==n||Je!==i?(oh=null,ah=Zt()+500,Xo(n,i)):Yo=In(n,i);e:do try{if(pt!==0&&Ye!==null){i=Ye;var m=gr;t:switch(pt){case 1:pt=0,gr=null,Jo(n,i,m,1);break;case 2:case 9:if(Y0(m)){pt=0,gr=null,Vv(i);break}i=function(){pt!==2&&pt!==9||Tt!==n||(pt=7),_s(n)},m.then(i,i);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Y0(m)?(pt=0,gr=null,Vv(i)):(pt=0,gr=null,Jo(n,i,m,7));break;case 5:var x=null;switch(Ye.tag){case 26:x=Ye.memoizedState;case 5:case 27:var S=Ye;if(x?Eb(x):S.stateNode.complete){pt=0,gr=null;var D=S.sibling;if(D!==null)Ye=D;else{var G=S.return;G!==null?(Ye=G,uh(G)):Ye=null}break t}}pt=0,gr=null,Jo(n,i,m,5);break;case 6:pt=0,gr=null,Jo(n,i,m,6);break;case 8:vp(),$t=6;break e;default:throw Error(s(462))}}yS();break}catch(K){jv(n,K)}while(!0);return Us=Ba=null,Q.H=c,Q.A=f,ht=o,Ye!==null?0:(Tt=null,Je=0,Ru(),$t)}function yS(){for(;Ye!==null&&!qe();)Lv(Ye)}function Lv(n){var i=ov(n.alternate,n,Ks);n.memoizedProps=n.pendingProps,i===null?uh(n):Ye=i}function Vv(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=tv(o,i,i.pendingProps,i.type,void 0,Je);break;case 11:i=tv(o,i,i.pendingProps,i.type.render,i.ref,Je);break;case 5:Of(i);default:cv(o,i),i=Ye=M0(i,Ks),i=ov(o,i,Ks)}n.memoizedProps=n.pendingProps,i===null?uh(n):Ye=i}function Jo(n,i,o,c){Us=Ba=null,Of(i),zo=null,Fl=0;var f=i.return;try{if(iS(n,f,i,o,Je)){$t=1,Ju(n,Dr(o,n.current)),Ye=null;return}}catch(m){if(f!==null)throw Ye=f,m;$t=1,Ju(n,Dr(o,n.current)),Ye=null;return}i.flags&32768?(rt||c===1?n=!0:Yo||(Je&536870912)!==0?n=!1:(Mi=n=!0,(c===2||c===9||c===3||c===6)&&(c=pr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Uv(i,n)):uh(i)}function uh(n){var i=n;do{if((i.flags&32768)!==0){Uv(i,Mi);return}n=i.return;var o=lS(i.alternate,i,Ks);if(o!==null){Ye=o;return}if(i=i.sibling,i!==null){Ye=i;return}Ye=i=n}while(i!==null);$t===0&&($t=5)}function Uv(n,i){do{var o=cS(n.alternate,n);if(o!==null){o.flags&=32767,Ye=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Ye=n;return}Ye=n=o}while(n!==null);$t=6,Ye=null}function zv(n,i,o,c,f,m,x,S,D){n.cancelPendingCommit=null;do hh();while(fn!==0);if((ht&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=of,Ta(n,o,m,x,S,D),n===Tt&&(Ye=Tt=null,Je=0),Ko=i,Ui=n,Xs=o,mp=m,gp=f,Rv=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,_S(os,function(){return Fv(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,f=oe.p,oe.p=2,x=ht,ht|=4;try{uS(n,i,o)}finally{ht=x,oe.p=f,Q.T=c}}fn=1,Bv(),Hv(),Gv()}}function Bv(){if(fn===1){fn=0;var n=Ui,i=Ko,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var c=oe.p;oe.p=2;var f=ht;ht|=4;try{_v(i,n);var m=Ip,x=C0(n.containerInfo),S=m.focusedElem,D=m.selectionRange;if(x!==S&&S&&S.ownerDocument&&N0(S.ownerDocument.documentElement,S)){if(D!==null&&tf(S)){var G=D.start,K=D.end;if(K===void 0&&(K=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(K,S.value.length);else{var ee=S.ownerDocument||document,q=ee&&ee.defaultView||window;if(q.getSelection){var Y=q.getSelection(),ve=S.textContent.length,Ae=Math.min(D.start,ve),wt=D.end===void 0?Ae:Math.min(D.end,ve);!Y.extend&&Ae>wt&&(x=wt,wt=Ae,Ae=x);var z=S0(S,Ae),M=S0(S,wt);if(z&&M&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var H=ee.createRange();H.setStart(z.node,z.offset),Y.removeAllRanges(),Ae>wt?(Y.addRange(H),Y.extend(M.node,M.offset)):(H.setEnd(M.node,M.offset),Y.addRange(H))}}}}for(ee=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&ee.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ee.length;S++){var J=ee[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Eh=!!kp,Ip=kp=null}finally{ht=f,oe.p=c,Q.T=o}}n.current=i,fn=2}}function Hv(){if(fn===2){fn=0;var n=Ui,i=Ko,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var c=oe.p;oe.p=2;var f=ht;ht|=4;try{gv(n,i.alternate,i)}finally{ht=f,oe.p=c,Q.T=o}}fn=3}}function Gv(){if(fn===4||fn===3){fn=0,hn();var n=Ui,i=Ko,o=Xs,c=Rv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?fn=5:(fn=0,Ko=Ui=null,qv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Vi=null),qr(o),i=i.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Kn,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Q.T,f=oe.p,oe.p=2,Q.T=null;try{for(var m=n.onRecoverableError,x=0;x<c.length;x++){var S=c[x];m(S.value,{componentStack:S.stack})}}finally{Q.T=i,oe.p=f}}(Xs&3)!==0&&hh(),_s(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===yp?lc++:(lc=0,yp=n):lc=0,cc(0)}}function qv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Gl(i)))}function hh(){return Bv(),Hv(),Gv(),Fv()}function Fv(){if(fn!==5)return!1;var n=Ui,i=mp;mp=0;var o=qr(Xs),c=Q.T,f=oe.p;try{oe.p=32>o?32:o,Q.T=null,o=gp,gp=null;var m=Ui,x=Xs;if(fn=0,Ko=Ui=null,Xs=0,(ht&6)!==0)throw Error(s(331));var S=ht;if(ht|=4,Nv(m.current),Ev(m,m.current,x,o),ht=S,cc(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Kn,m)}catch{}return!0}finally{oe.p=f,Q.T=c,qv(n,i)}}function $v(n,i,o){i=Dr(o,i),i=Kf(n.stateNode,i,2),n=Di(n,i,2),n!==null&&(Ds(n,2),_s(n))}function mt(n,i,o){if(n.tag===3)$v(n,n,o);else for(;i!==null;){if(i.tag===3){$v(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Vi===null||!Vi.has(c))){n=Dr(o,n),o=Yy(2),c=Di(i,o,2),c!==null&&(Qy(o,c,i,n),Ds(c,2),_s(c));break}}i=i.return}}function xp(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new fS;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(dp=!0,f.add(o),n=vS.bind(null,n,i,o),i.then(n,n))}function vS(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Tt===n&&(Je&o)===o&&($t===4||$t===3&&(Je&62914560)===Je&&300>Zt()-ih?(ht&2)===0&&Xo(n,0):fp|=o,Qo===Je&&(Qo=0)),_s(n)}function Yv(n,i){i===0&&(i=di()),n=Va(n,i),n!==null&&(Ds(n,i),_s(n))}function bS(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Yv(n,o)}function xS(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Yv(n,o)}function _S(n,i){return Fe(n,i)}var dh=null,Wo=null,_p=!1,fh=!1,wp=!1,Bi=0;function _s(n){n!==Wo&&n.next===null&&(Wo===null?dh=Wo=n:Wo=Wo.next=n),fh=!0,_p||(_p=!0,ES())}function cc(n,i){if(!wp&&fh){wp=!0;do for(var o=!1,c=dh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-Ee(42|n)+1)-1,m&=f&~(x&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Jv(c,m))}else m=Je,m=wr(c,c===Tt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||In(c,m)||(o=!0,Jv(c,m));c=c.next}while(o);wp=!1}}function wS(){Qv()}function Qv(){fh=_p=!1;var n=0;Bi!==0&&jS()&&(n=Bi);for(var i=Zt(),o=null,c=dh;c!==null;){var f=c.next,m=Kv(c,i);m===0?(c.next=null,o===null?dh=f:o.next=f,f===null&&(Wo=o)):(o=c,(n!==0||(m&3)!==0)&&(fh=!0)),c=f}fn!==0&&fn!==5||cc(n),Bi!==0&&(Bi=0)}function Kv(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var x=31-Ee(m),S=1<<x,D=f[x];D===-1?((S&o)===0||(S&c)!==0)&&(f[x]=bo(S,i)):D<=i&&(n.expiredLanes|=S),m&=~S}if(i=Tt,o=Je,o=wr(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(pt===2||pt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Mt(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||In(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Mt(c),qr(o)){case 2:case 8:o=Hr;break;case 32:o=os;break;case 268435456:o=vo;break;default:o=os}return c=Xv.bind(null,n),o=Fe(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Mt(c),n.callbackPriority=2,n.callbackNode=null,2}function Xv(n,i){if(fn!==0&&fn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(hh()&&n.callbackNode!==o)return null;var c=Je;return c=wr(n,n===Tt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Iv(n,c,i),Kv(n,Zt()),n.callbackNode!=null&&n.callbackNode===o?Xv.bind(null,n):null)}function Jv(n,i){if(hh())return null;Iv(n,i,!0)}function ES(){PS(function(){(ht&6)!==0?Fe(as,wS):Qv()})}function Ep(){if(Bi===0){var n=Lo;n===0&&(n=bn,bn<<=1,(bn&261888)===0&&(bn=256)),Bi=n}return Bi}function Wv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:wo(""+n)}function Zv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function TS(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var m=Wv((f[Ht]||null).action),x=c.submitter;x&&(i=(i=x[Ht]||null)?Wv(i.formAction):x.getAttribute("formAction"),i!==null&&(m=i,x=null));var S=new ps("action","action",null,c,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Bi!==0){var D=x?Zv(f,x):new FormData(f);Gf(o,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(S.preventDefault(),D=x?Zv(f,x):new FormData(f),Gf(o,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var Tp=0;Tp<af.length;Tp++){var Sp=af[Tp],SS=Sp.toLowerCase(),NS=Sp[0].toUpperCase()+Sp.slice(1);Xr(SS,"on"+NS)}Xr(k0,"onAnimationEnd"),Xr(I0,"onAnimationIteration"),Xr(D0,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(HT,"onTransitionRun"),Xr(GT,"onTransitionStart"),Xr(qT,"onTransitionCancel"),Xr(j0,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uc));function eb(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var x=c.length-1;0<=x;x--){var S=c[x],D=S.instance,G=S.currentTarget;if(S=S.listener,D!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=G;try{m(f)}catch(K){Au(K)}f.currentTarget=null,m=D}else for(x=0;x<c.length;x++){if(S=c[x],D=S.instance,G=S.currentTarget,S=S.listener,D!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=G;try{m(f)}catch(K){Au(K)}f.currentTarget=null,m=D}}}}function Qe(n,i){var o=i[fi];o===void 0&&(o=i[fi]=new Set);var c=n+"__bubble";o.has(c)||(tb(i,n,2,!1),o.add(c))}function Np(n,i,o){var c=0;i&&(c|=4),tb(o,n,c,i)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Cp(n){if(!n[ph]){n[ph]=!0,mi.forEach(function(o){o!=="selectionchange"&&(CS.has(o)||Np(o,!1,n),Np(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ph]||(i[ph]=!0,Np("selectionchange",!1,i))}}function tb(n,i,o,c){switch(kb(i)){case 2:var f=t2;break;case 8:f=n2;break;default:f=Hp}o=f.bind(null,i,o,n),f=void 0,!ka||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function Ap(n,i,o,c,f){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var S=c.stateNode.containerInfo;if(S===f)break;if(x===4)for(x=c.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;S!==null;){if(x=ur(S),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){c=m=x;continue e}S=S.parentNode}}c=c.return}wi(function(){var G=m,K=Ar(o),ee=[];e:{var q=O0.get(n);if(q!==void 0){var Y=ps,ve=n;switch(n){case"keypress":if(Da(o)===0)break e;case"keydown":case"keyup":Y=Su;break;case"focusin":ve="focus",Y=Oa;break;case"focusout":ve="blur",Y=Oa;break;case"beforeblur":case"afterblur":Y=Oa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=v;break;case k0:case I0:case D0:Y=vu;break;case j0:Y=N;break;case"scroll":case"scrollend":Y=Ol;break;case"wheel":Y=F;break;case"copy":case"cut":case"paste":Y=bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Ms;break;case"toggle":case"beforetoggle":Y=Ue}var Ae=(i&4)!==0,wt=!Ae&&(n==="scroll"||n==="scrollend"),z=Ae?q!==null?q+"Capture":null:q;Ae=[];for(var M=G,H;M!==null;){var J=M;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||z===null||(J=$r(M,z),J!=null&&Ae.push(hc(M,J,H))),wt)break;M=M.return}0<Ae.length&&(q=new Y(q,ve,null,o,K),ee.push({event:q,listeners:Ae}))}}if((i&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",q&&o!==Il&&(ve=o.relatedTarget||o.fromElement)&&(ur(ve)||ve[Er]))break e;if((Y||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,Y?(ve=o.relatedTarget||o.toElement,Y=G,ve=ve?ur(ve):null,ve!==null&&(wt=l(ve),Ae=ve.tag,ve!==wt||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(Y=null,ve=G),Y!==ve)){if(Ae=Pl,J="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=Ms,J="onPointerLeave",z="onPointerEnter",M="pointer"),wt=Y==null?q:Dn(Y),H=ve==null?q:Dn(ve),q=new Ae(J,M+"leave",Y,o,K),q.target=wt,q.relatedTarget=H,J=null,ur(K)===G&&(Ae=new Ae(z,M+"enter",ve,o,K),Ae.target=H,Ae.relatedTarget=wt,J=Ae),wt=J,Y&&ve)t:{for(Ae=AS,z=Y,M=ve,H=0,J=z;J;J=Ae(J))H++;J=0;for(var Ne=M;Ne;Ne=Ae(Ne))J++;for(;0<H-J;)z=Ae(z),H--;for(;0<J-H;)M=Ae(M),J--;for(;H--;){if(z===M||M!==null&&z===M.alternate){Ae=z;break t}z=Ae(z),M=Ae(M)}Ae=null}else Ae=null;Y!==null&&nb(ee,q,Y,Ae,!1),ve!==null&&wt!==null&&nb(ee,wt,ve,Ae,!0)}}e:{if(q=G?Dn(G):window,Y=q.nodeName&&q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&q.type==="file")var lt=b0;else if(y0(q))if(x0)lt=UT;else{lt=LT;var _e=MT}else Y=q.nodeName,!Y||Y.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?G&&qn(G.elementType)&&(lt=b0):lt=VT;if(lt&&(lt=lt(n,G))){v0(ee,lt,o,K);break e}_e&&_e(n,q,G),n==="focusout"&&G&&q.type==="number"&&G.memoizedProps.value!=null&&bi(q,"number",q.value)}switch(_e=G?Dn(G):window,n){case"focusin":(y0(_e)||_e.contentEditable==="true")&&(Ro=_e,nf=G,zl=null);break;case"focusout":zl=nf=Ro=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,A0(ee,o,K);break;case"selectionchange":if(BT)break;case"keydown":case"keyup":A0(ee,o,K)}var He;if(ut)e:{switch(n){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Ao?Pa(n,o)&&(We="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(We="onCompositionStart");We&&(ys&&o.locale!=="ko"&&(Ao||We!=="onCompositionStart"?We==="onCompositionEnd"&&Ao&&(He=jl()):(fs=K,Dl="value"in fs?fs.value:fs.textContent,Ao=!0)),_e=mh(G,We),0<_e.length&&(We=new gs(We,n,null,o,K),ee.push({event:We,listeners:_e}),He?We.data=He:(He=Co(o),He!==null&&(We.data=He)))),(He=kr?DT(n,o):jT(n,o))&&(We=mh(G,"onBeforeInput"),0<We.length&&(_e=new gs("onBeforeInput","beforeinput",null,o,K),ee.push({event:_e,listeners:We}),_e.data=He)),TS(ee,n,G,o,K)}eb(ee,i)})}function hc(n,i,o){return{instance:n,listener:i,currentTarget:o}}function mh(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=$r(n,o),f!=null&&c.unshift(hc(n,f,m)),f=$r(n,i),f!=null&&c.push(hc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function AS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function nb(n,i,o,c,f){for(var m=i._reactName,x=[];o!==null&&o!==c;){var S=o,D=S.alternate,G=S.stateNode;if(S=S.tag,D!==null&&D===c)break;S!==5&&S!==26&&S!==27||G===null||(D=G,f?(G=$r(o,m),G!=null&&x.unshift(hc(o,G,D))):f||(G=$r(o,m),G!=null&&x.push(hc(o,G,D)))),o=o.return}x.length!==0&&n.push({event:i,listeners:x})}var RS=/\r\n?/g,kS=/\u0000|\uFFFD/g;function rb(n){return(typeof n=="string"?n:""+n).replace(RS,`
`).replace(kS,"")}function sb(n,i){return i=rb(i),rb(n)===i}function _t(n,i,o,c,f,m){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||ne(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&ne(n,""+c);break;case"className":tn(n,"class",c);break;case"tabIndex":tn(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":tn(n,o,c);break;case"style":St(n,c,m);break;case"data":if(i!=="object"){tn(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=wo(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&_t(n,i,"name",f.name,f,null),_t(n,i,"formEncType",f.formEncType,f,null),_t(n,i,"formMethod",f.formMethod,f,null),_t(n,i,"formTarget",f.formTarget,f,null)):(_t(n,i,"encType",f.encType,f,null),_t(n,i,"method",f.method,f,null),_t(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=wo(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Fr);break;case"onScroll":c!=null&&Qe("scroll",n);break;case"onScrollEnd":c!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=wo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Gn(n,"popover",c);break;case"xlinkActuate":Dt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Dt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Dt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Dt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Dt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Dt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Dt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Gn(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=mu.get(o)||o,Gn(n,o,c))}}function Rp(n,i,o,c,f,m){switch(o){case"style":St(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?ne(n,c):(typeof c=="number"||typeof c=="bigint")&&ne(n,""+c);break;case"onScroll":c!=null&&Qe("scroll",n);break;case"onScrollEnd":c!=null&&Qe("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ca.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=n[Ht]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Gn(n,o,c)}}}function Tn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_t(n,i,m,x,o,null)}}f&&_t(n,i,"srcSet",o.srcSet,o,null),c&&_t(n,i,"src",o.src,o,null);return;case"input":Qe("invalid",n);var S=m=x=f=null,D=null,G=null;for(c in o)if(o.hasOwnProperty(c)){var K=o[c];if(K!=null)switch(c){case"name":f=K;break;case"type":x=K;break;case"checked":D=K;break;case"defaultChecked":G=K;break;case"value":m=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:_t(n,i,c,K,o,null)}}Aa(n,m,S,D,G,x,f,!1);return;case"select":Qe("invalid",n),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":x=S;break;case"multiple":c=S;default:_t(n,i,f,S,o,null)}i=m,o=x,n.multiple=!!c,i!=null?E(n,!!c,i,!1):o!=null&&E(n,!!c,o,!0);return;case"textarea":Qe("invalid",n),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(S=o[x],S!=null))switch(x){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:_t(n,i,x,S,o,null)}U(n,c,f,m);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:_t(n,i,D,c,o,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(c=0;c<uc.length;c++)Qe(uc[c],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(c=o[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_t(n,i,G,c,o,null)}return;default:if(qn(i)){for(K in o)o.hasOwnProperty(K)&&(c=o[K],c!==void 0&&Rp(n,i,K,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&_t(n,i,S,c,o,null))}function IS(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,S=null,D=null,G=null,K=null;for(Y in o){var ee=o[Y];if(o.hasOwnProperty(Y)&&ee!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=ee;default:c.hasOwnProperty(Y)||_t(n,i,Y,null,c,ee)}}for(var q in c){var Y=c[q];if(ee=o[q],c.hasOwnProperty(q)&&(Y!=null||ee!=null))switch(q){case"type":m=Y;break;case"name":f=Y;break;case"checked":G=Y;break;case"defaultChecked":K=Y;break;case"value":x=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==ee&&_t(n,i,q,Y,c,ee)}}vi(n,x,S,D,G,K,m,f);return;case"select":Y=x=S=q=null;for(m in o)if(D=o[m],o.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Y=D;default:c.hasOwnProperty(m)||_t(n,i,m,null,c,D)}for(f in c)if(m=c[f],D=o[f],c.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":q=m;break;case"defaultValue":S=m;break;case"multiple":x=m;default:m!==D&&_t(n,i,f,m,c,D)}i=S,o=x,c=Y,q!=null?E(n,!!o,q,!1):!!c!=!!o&&(i!=null?E(n,!!o,i,!0):E(n,!!o,o?[]:"",!1));return;case"textarea":Y=q=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:_t(n,i,S,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":q=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&_t(n,i,x,f,c,m)}X(n,q,Y);return;case"option":for(var ve in o)if(q=o[ve],o.hasOwnProperty(ve)&&q!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":n.selected=!1;break;default:_t(n,i,ve,null,c,q)}for(D in c)if(q=c[D],Y=o[D],c.hasOwnProperty(D)&&q!==Y&&(q!=null||Y!=null))switch(D){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:_t(n,i,D,q,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)q=o[Ae],o.hasOwnProperty(Ae)&&q!=null&&!c.hasOwnProperty(Ae)&&_t(n,i,Ae,null,c,q);for(G in c)if(q=c[G],Y=o[G],c.hasOwnProperty(G)&&q!==Y&&(q!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:_t(n,i,G,q,c,Y)}return;default:if(qn(i)){for(var wt in o)q=o[wt],o.hasOwnProperty(wt)&&q!==void 0&&!c.hasOwnProperty(wt)&&Rp(n,i,wt,void 0,c,q);for(K in c)q=c[K],Y=o[K],!c.hasOwnProperty(K)||q===Y||q===void 0&&Y===void 0||Rp(n,i,K,q,c,Y);return}}for(var z in o)q=o[z],o.hasOwnProperty(z)&&q!=null&&!c.hasOwnProperty(z)&&_t(n,i,z,null,c,q);for(ee in c)q=c[ee],Y=o[ee],!c.hasOwnProperty(ee)||q===Y||q==null&&Y==null||_t(n,i,ee,q,c,Y)}function ib(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,S=f.duration;if(m&&S&&ib(x)){for(x=0,S=f.responseEnd,c+=1;c<o.length;c++){var D=o[c],G=D.startTime;if(G>S)break;var K=D.transferSize,ee=D.initiatorType;K&&ib(ee)&&(D=D.responseEnd,x+=K*(D<S?1:(S-G)/(D-G)))}if(--c,i+=8*(m+x)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var kp=null,Ip=null;function gh(n){return n.nodeType===9?n:n.ownerDocument}function ab(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ob(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Dp(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var jp=null;function jS(){var n=window.event;return n&&n.type==="popstate"?n===jp?!1:(jp=n,!0):(jp=null,!1)}var lb=typeof setTimeout=="function"?setTimeout:void 0,OS=typeof clearTimeout=="function"?clearTimeout:void 0,cb=typeof Promise=="function"?Promise:void 0,PS=typeof queueMicrotask=="function"?queueMicrotask:typeof cb<"u"?function(n){return cb.resolve(null).then(n).catch(MS)}:lb;function MS(n){setTimeout(function(){throw n})}function Hi(n){return n==="head"}function ub(n,i){var o=i,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),nl(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")dc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,dc(o);for(var m=o.firstChild;m;){var x=m.nextSibling,S=m.nodeName;m[cr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&dc(n.ownerDocument.body);o=f}while(o);nl(i)}function hb(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Op(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Op(o),js(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function LS(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[cr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Lr(n.nextSibling),n===null)break}return null}function VS(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Lr(n.nextSibling),n===null))return null;return n}function db(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Lr(n.nextSibling),n===null))return null;return n}function Pp(n){return n.data==="$?"||n.data==="$~"}function Mp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function US(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Lr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Lp=null;function fb(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Lr(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function pb(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function mb(n,i,o){switch(i=gh(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function dc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);js(n)}var Vr=new Map,gb=new Set;function yh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Js=oe.d;oe.d={f:zS,r:BS,D:HS,C:GS,L:qS,m:FS,X:YS,S:$S,M:QS};function zS(){var n=Js.f(),i=lh();return n||i}function BS(n){var i=Hn(n);i!==null&&i.tag===5&&i.type==="form"?jy(i):Js.r(n)}var Zo=typeof document>"u"?null:document;function yb(n,i,o){var c=Zo;if(c&&typeof i=="string"&&i){var f=jn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),gb.has(f)||(gb.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Tn(i,"link",n),Gt(i),c.head.appendChild(i)))}}function HS(n){Js.D(n),yb("dns-prefetch",n,null)}function GS(n,i){Js.C(n,i),yb("preconnect",n,i)}function qS(n,i,o){Js.L(n,i,o);var c=Zo;if(c&&n&&i){var f='link[rel="preload"][as="'+jn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+jn(o.imageSizes)+'"]')):f+='[href="'+jn(n)+'"]';var m=f;switch(i){case"style":m=el(n);break;case"script":m=tl(n)}Vr.has(m)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Vr.set(m,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(fc(m))||i==="script"&&c.querySelector(pc(m))||(i=c.createElement("link"),Tn(i,"link",n),Gt(i),c.head.appendChild(i)))}}function FS(n,i){Js.m(n,i);var o=Zo;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+jn(c)+'"][href="'+jn(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=tl(n)}if(!Vr.has(m)&&(n=_({rel:"modulepreload",href:n},i),Vr.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(pc(m)))return}c=o.createElement("link"),Tn(c,"link",n),Gt(c),o.head.appendChild(c)}}}function $S(n,i,o){Js.S(n,i,o);var c=Zo;if(c&&n){var f=Tr(c).hoistableStyles,m=el(n);i=i||"default";var x=f.get(m);if(!x){var S={loading:0,preload:null};if(x=c.querySelector(fc(m)))S.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Vr.get(m))&&Vp(n,o);var D=x=c.createElement("link");Gt(D),Tn(D,"link",n),D._p=new Promise(function(G,K){D.onload=G,D.onerror=K}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,vh(x,i,c)}x={type:"stylesheet",instance:x,count:1,state:S},f.set(m,x)}}}function YS(n,i){Js.X(n,i);var o=Zo;if(o&&n){var c=Tr(o).hoistableScripts,f=tl(n),m=c.get(f);m||(m=o.querySelector(pc(f)),m||(n=_({src:n,async:!0},i),(i=Vr.get(f))&&Up(n,i),m=o.createElement("script"),Gt(m),Tn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function QS(n,i){Js.M(n,i);var o=Zo;if(o&&n){var c=Tr(o).hoistableScripts,f=tl(n),m=c.get(f);m||(m=o.querySelector(pc(f)),m||(n=_({src:n,async:!0,type:"module"},i),(i=Vr.get(f))&&Up(n,i),m=o.createElement("script"),Gt(m),Tn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function vb(n,i,o,c){var f=(f=Ie.current)?yh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=el(o.href),o=Tr(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=el(o.href);var m=Tr(f).hoistableStyles,x=m.get(n);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,x),(m=f.querySelector(fc(n)))&&!m._p&&(x.instance=m,x.state.loading=5),Vr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Vr.set(n,o),m||KS(f,n,o,x.state))),i&&c===null)throw Error(s(528,""));return x}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=tl(o),o=Tr(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function el(n){return'href="'+jn(n)+'"'}function fc(n){return'link[rel="stylesheet"]['+n+"]"}function bb(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function KS(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Tn(i,"link",o),Gt(i),n.head.appendChild(i))}function tl(n){return'[src="'+jn(n)+'"]'}function pc(n){return"script[async]"+n}function xb(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+jn(o.href)+'"]');if(c)return i.instance=c,Gt(c),c;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Gt(c),Tn(c,"style",f),vh(c,o.precedence,n),i.instance=c;case"stylesheet":f=el(o.href);var m=n.querySelector(fc(f));if(m)return i.state.loading|=4,i.instance=m,Gt(m),m;c=bb(o),(f=Vr.get(f))&&Vp(c,f),m=(n.ownerDocument||n).createElement("link"),Gt(m);var x=m;return x._p=new Promise(function(S,D){x.onload=S,x.onerror=D}),Tn(m,"link",c),i.state.loading|=4,vh(m,o.precedence,n),i.instance=m;case"script":return m=tl(o.src),(f=n.querySelector(pc(m)))?(i.instance=f,Gt(f),f):(c=o,(f=Vr.get(m))&&(c=_({},o),Up(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Gt(f),Tn(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,vh(c,o.precedence,n));return i.instance}function vh(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var S=c[x];if(S.dataset.precedence===i)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Vp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Up(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var bh=null;function _b(n,i,o){if(bh===null){var c=new Map,f=bh=new Map;f.set(o,c)}else f=bh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[cr]||m[It]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(i)||"";x=n+x;var S=c.get(x);S?S.push(m):c.set(x,[m])}}return c}function wb(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function XS(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Eb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function JS(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=el(c.href),m=i.querySelector(fc(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=xh.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=m,Gt(m);return}m=i.ownerDocument||i,c=bb(c),(f=Vr.get(f))&&Vp(c,f),m=m.createElement("link"),Gt(m);var x=m;x._p=new Promise(function(S,D){x.onload=S,x.onerror=D}),Tn(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=xh.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var zp=0;function WS(n,i){return n.stylesheets&&n.count===0&&wh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+i);0<n.imgBytes&&zp===0&&(zp=62500*DS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>zp?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function xh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _h=null;function wh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_h=new Map,i.forEach(ZS,n),_h=null,xh.call(n))}function ZS(n,i){if(!(i.state.loading&4)){var o=_h.get(n);if(o)var c=o.get(null);else{o=new Map,_h.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=i.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=xh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var mc={$$typeof:me,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function e2(n,i,o,c,f,m,x,S,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Tb(n,i,o,c,f,m,x,S,D,G,K,ee){return n=new e2(n,i,o,x,D,G,K,ee,S),i=1,m===!0&&(i|=24),m=fr(3,null,null,i),n.current=m,m.stateNode=n,i=bf(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:i},Ef(m),n}function Sb(n){return n?(n=Do,n):Do}function Nb(n,i,o,c,f,m){f=Sb(f),c.context===null?c.context=f:c.pendingContext=f,c=Ii(i),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=Di(n,c,i),o!==null&&(nr(o,n,i),Yl(o,n,i))}function Cb(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Bp(n,i){Cb(n,i),(n=n.alternate)&&Cb(n,i)}function Ab(n){if(n.tag===13||n.tag===31){var i=Va(n,67108864);i!==null&&nr(i,n,67108864),Bp(n,67108864)}}function Rb(n){if(n.tag===13||n.tag===31){var i=vr();i=cs(i);var o=Va(n,i);o!==null&&nr(o,n,i),Bp(n,i)}}var Eh=!0;function t2(n,i,o,c){var f=Q.T;Q.T=null;var m=oe.p;try{oe.p=2,Hp(n,i,o,c)}finally{oe.p=m,Q.T=f}}function n2(n,i,o,c){var f=Q.T;Q.T=null;var m=oe.p;try{oe.p=8,Hp(n,i,o,c)}finally{oe.p=m,Q.T=f}}function Hp(n,i,o,c){if(Eh){var f=Gp(c);if(f===null)Ap(n,i,c,Th,o),Ib(n,c);else if(s2(f,n,i,o,c))c.stopPropagation();else if(Ib(n,c),i&4&&-1<r2.indexOf(n)){for(;f!==null;){var m=Hn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=dn(m.pendingLanes);if(x!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;x;){var D=1<<31-Ee(x);S.entanglements[1]|=D,x&=~D}_s(m),(ht&6)===0&&(ah=Zt()+500,cc(0))}}break;case 31:case 13:S=Va(m,2),S!==null&&nr(S,m,2),lh(),Bp(m,2)}if(m=Gp(c),m===null&&Ap(n,i,c,Th,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Ap(n,i,c,null,o)}}function Gp(n){return n=Ar(n),qp(n)}var Th=null;function qp(n){if(Th=null,n=ur(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===31){if(n=p(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Th=n,null}function kb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bn()){case as:return 2;case Hr:return 8;case os:case li:return 32;case vo:return 268435456;default:return 32}default:return 32}}var Fp=!1,Gi=null,qi=null,Fi=null,gc=new Map,yc=new Map,$i=[],r2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ib(n,i){switch(n){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":gc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(i.pointerId)}}function vc(n,i,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Hn(i),i!==null&&Ab(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function s2(n,i,o,c,f){switch(i){case"focusin":return Gi=vc(Gi,n,i,o,c,f),!0;case"dragenter":return qi=vc(qi,n,i,o,c,f),!0;case"mouseover":return Fi=vc(Fi,n,i,o,c,f),!0;case"pointerover":var m=f.pointerId;return gc.set(m,vc(gc.get(m)||null,n,i,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,yc.set(m,vc(yc.get(m)||null,n,i,o,c,f)),!0}return!1}function Db(n){var i=ur(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,lr(n.priority,function(){Rb(o)});return}}else if(i===31){if(i=p(o),i!==null){n.blockedOn=i,lr(n.priority,function(){Rb(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Gp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Il=c,o.target.dispatchEvent(c),Il=null}else return i=Hn(o),i!==null&&Ab(i),n.blockedOn=o,!1;i.shift()}return!0}function jb(n,i,o){Sh(n)&&o.delete(i)}function i2(){Fp=!1,Gi!==null&&Sh(Gi)&&(Gi=null),qi!==null&&Sh(qi)&&(qi=null),Fi!==null&&Sh(Fi)&&(Fi=null),gc.forEach(jb),yc.forEach(jb)}function Nh(n,i){n.blockedOn===i&&(n.blockedOn=null,Fp||(Fp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,i2)))}var Ch=null;function Ob(n){Ch!==n&&(Ch=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ch===n&&(Ch=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(qp(c||o)===null)continue;break}var m=Hn(o);m!==null&&(n.splice(i,3),i-=3,Gf(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function nl(n){function i(D){return Nh(D,n)}Gi!==null&&Nh(Gi,n),qi!==null&&Nh(qi,n),Fi!==null&&Nh(Fi,n),gc.forEach(i),yc.forEach(i);for(var o=0;o<$i.length;o++){var c=$i[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<$i.length&&(o=$i[0],o.blockedOn===null);)Db(o),o.blockedOn===null&&$i.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[Ht]||null;if(typeof m=="function")x||Ob(o);else if(x){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[Ht]||null)S=x.formAction;else if(qp(f)!==null)continue}else S=x.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),Ob(o)}}}function Pb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function $p(n){this._internalRoot=n}Ah.prototype.render=$p.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=vr();Nb(o,c,n,i,null,null)},Ah.prototype.unmount=$p.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Nb(n.current,2,null,n,null,null),lh(),i[Er]=null}};function Ah(n){this._internalRoot=n}Ah.prototype.unstable_scheduleHydration=function(n){if(n){var i=Sa();n={blockedOn:null,target:n,priority:i};for(var o=0;o<$i.length&&i!==0&&i<$i[o].priority;o++);$i.splice(o,0,n),o===0&&Db(n)}};var Mb=e.version;if(Mb!=="19.2.4")throw Error(s(527,Mb,"19.2.4"));oe.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=y(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var a2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{Kn=Rh.inject(a2),vt=Rh}catch{}}return _c.createRoot=function(n,i){if(!a(n))throw Error(s(299));var o=!1,c="",f=Gy,m=qy,x=Fy;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(x=i.onRecoverableError)),i=Tb(n,1,!1,null,null,o,c,null,f,m,x,Pb),n[Er]=i.current,Cp(n),new $p(i)},_c.hydrateRoot=function(n,i,o){if(!a(n))throw Error(s(299));var c=!1,f="",m=Gy,x=qy,S=Fy,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=Tb(n,1,!0,i,o??null,c,f,D,m,x,S,Pb),i.context=Sb(null),o=i.current,c=vr(),c=cs(c),f=Ii(c),f.callback=null,Di(o,f,c),o=c,i.current.lanes=o,Ds(i,o),_s(i),n[Er]=i.current,Cp(n),new Ah(i)},_c.version="19.2.4",_c}var $b;function b2(){if($b)return Kp.exports;$b=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kp.exports=v2(),Kp.exports}var x2=b2();const _2=Cd(x2);var rl={},Zp={exports:{}},em,Yb;function w2(){if(Yb)return em;Yb=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return em=r,em}var tm,Qb;function E2(){if(Qb)return tm;Qb=1;var r=w2();function e(){}function t(){}return t.resetWarningCache=e,tm=function(){function s(u,p,g,y,b,_){if(_!==r){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}s.isRequired=s;function a(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},tm}var Kb;function t1(){return Kb||(Kb=1,Zp.exports=E2()()),Zp.exports}var nm,Xb;function n1(){return Xb||(Xb=1,nm={L:1,M:0,Q:3,H:2}),nm}var rm,Jb;function r1(){return Jb||(Jb=1,rm={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),rm}var sm,Wb;function T2(){if(Wb)return sm;Wb=1;var r=r1();function e(t){this.mode=r.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var s=0;s<this.data.length;s++)t.put(this.data.charCodeAt(s),8)}},sm=e,sm}var im,Zb;function S2(){if(Zb)return im;Zb=1;var r=n1();function e(t,s){this.totalCount=t,this.dataCount=s}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,s){var a=e.getRsBlockTable(t,s);if(a==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+s);for(var l=a.length/3,u=new Array,p=0;p<l;p++)for(var g=a[p*3+0],y=a[p*3+1],b=a[p*3+2],_=0;_<g;_++)u.push(new e(y,b));return u},e.getRsBlockTable=function(t,s){switch(s){case r.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case r.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case r.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case r.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},im=e,im}var am,ex;function N2(){if(ex)return am;ex=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},am=r,am}var om,tx;function s1(){if(tx)return om;tx=1;for(var r={glog:function(t){if(t<1)throw new Error("glog("+t+")");return r.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return r.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)r.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)r.EXP_TABLE[e]=r.EXP_TABLE[e-4]^r.EXP_TABLE[e-5]^r.EXP_TABLE[e-6]^r.EXP_TABLE[e-8];for(var e=0;e<255;e++)r.LOG_TABLE[r.EXP_TABLE[e]]=e;return om=r,om}var lm,nx;function i1(){if(nx)return lm;nx=1;var r=s1();function e(t,s){if(t.length==null)throw new Error(t.length+"/"+s);for(var a=0;a<t.length&&t[a]==0;)a++;this.num=new Array(t.length-a+s);for(var l=0;l<t.length-a;l++)this.num[l]=t[l+a]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var s=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var l=0;l<t.getLength();l++)s[a+l]^=r.gexp(r.glog(this.get(a))+r.glog(t.get(l)));return new e(s,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var s=r.glog(this.get(0))-r.glog(t.get(0)),a=new Array(this.getLength()),l=0;l<this.getLength();l++)a[l]=this.get(l);for(var l=0;l<t.getLength();l++)a[l]^=r.gexp(r.glog(t.get(l))+s);return new e(a,0).mod(t)}},lm=e,lm}var cm,rx;function C2(){if(rx)return cm;rx=1;var r=r1(),e=i1(),t=s1(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(l){for(var u=l<<10;a.getBCHDigit(u)-a.getBCHDigit(a.G15)>=0;)u^=a.G15<<a.getBCHDigit(u)-a.getBCHDigit(a.G15);return(l<<10|u)^a.G15_MASK},getBCHTypeNumber:function(l){for(var u=l<<12;a.getBCHDigit(u)-a.getBCHDigit(a.G18)>=0;)u^=a.G18<<a.getBCHDigit(u)-a.getBCHDigit(a.G18);return l<<12|u},getBCHDigit:function(l){for(var u=0;l!=0;)u++,l>>>=1;return u},getPatternPosition:function(l){return a.PATTERN_POSITION_TABLE[l-1]},getMask:function(l,u,p){switch(l){case s.PATTERN000:return(u+p)%2==0;case s.PATTERN001:return u%2==0;case s.PATTERN010:return p%3==0;case s.PATTERN011:return(u+p)%3==0;case s.PATTERN100:return(Math.floor(u/2)+Math.floor(p/3))%2==0;case s.PATTERN101:return u*p%2+u*p%3==0;case s.PATTERN110:return(u*p%2+u*p%3)%2==0;case s.PATTERN111:return(u*p%3+(u+p)%2)%2==0;default:throw new Error("bad maskPattern:"+l)}},getErrorCorrectPolynomial:function(l){for(var u=new e([1],0),p=0;p<l;p++)u=u.multiply(new e([1,t.gexp(p)],0));return u},getLengthInBits:function(l,u){if(1<=u&&u<10)switch(l){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+l)}else if(u<27)switch(l){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+l)}else if(u<41)switch(l){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+l)}else throw new Error("type:"+u)},getLostPoint:function(l){for(var u=l.getModuleCount(),p=0,g=0;g<u;g++)for(var y=0;y<u;y++){for(var b=0,_=l.isDark(g,y),T=-1;T<=1;T++)if(!(g+T<0||u<=g+T))for(var R=-1;R<=1;R++)y+R<0||u<=y+R||T==0&&R==0||_==l.isDark(g+T,y+R)&&b++;b>5&&(p+=3+b-5)}for(var g=0;g<u-1;g++)for(var y=0;y<u-1;y++){var V=0;l.isDark(g,y)&&V++,l.isDark(g+1,y)&&V++,l.isDark(g,y+1)&&V++,l.isDark(g+1,y+1)&&V++,(V==0||V==4)&&(p+=3)}for(var g=0;g<u;g++)for(var y=0;y<u-6;y++)l.isDark(g,y)&&!l.isDark(g,y+1)&&l.isDark(g,y+2)&&l.isDark(g,y+3)&&l.isDark(g,y+4)&&!l.isDark(g,y+5)&&l.isDark(g,y+6)&&(p+=40);for(var y=0;y<u;y++)for(var g=0;g<u-6;g++)l.isDark(g,y)&&!l.isDark(g+1,y)&&l.isDark(g+2,y)&&l.isDark(g+3,y)&&l.isDark(g+4,y)&&!l.isDark(g+5,y)&&l.isDark(g+6,y)&&(p+=40);for(var $=0,y=0;y<u;y++)for(var g=0;g<u;g++)l.isDark(g,y)&&$++;var Z=Math.abs(100*$/u/u-50)/5;return p+=Z*10,p}};return cm=a,cm}var um,sx;function A2(){if(sx)return um;sx=1;var r=T2(),e=S2(),t=N2(),s=C2(),a=i1();function l(p,g){this.typeNumber=p,this.errorCorrectLevel=g,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var u=l.prototype;return u.addData=function(p){var g=new r(p);this.dataList.push(g),this.dataCache=null},u.isDark=function(p,g){if(p<0||this.moduleCount<=p||g<0||this.moduleCount<=g)throw new Error(p+","+g);return this.modules[p][g]},u.getModuleCount=function(){return this.moduleCount},u.make=function(){if(this.typeNumber<1){var p=1;for(p=1;p<40;p++){for(var g=e.getRSBlocks(p,this.errorCorrectLevel),y=new t,b=0,_=0;_<g.length;_++)b+=g[_].dataCount;for(var _=0;_<this.dataList.length;_++){var T=this.dataList[_];y.put(T.mode,4),y.put(T.getLength(),s.getLengthInBits(T.mode,p)),T.write(y)}if(y.getLengthInBits()<=b*8)break}this.typeNumber=p}this.makeImpl(!1,this.getBestMaskPattern())},u.makeImpl=function(p,g){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var y=0;y<this.moduleCount;y++){this.modules[y]=new Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++)this.modules[y][b]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(p,g),this.typeNumber>=7&&this.setupTypeNumber(p),this.dataCache==null&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,g)},u.setupPositionProbePattern=function(p,g){for(var y=-1;y<=7;y++)if(!(p+y<=-1||this.moduleCount<=p+y))for(var b=-1;b<=7;b++)g+b<=-1||this.moduleCount<=g+b||(0<=y&&y<=6&&(b==0||b==6)||0<=b&&b<=6&&(y==0||y==6)||2<=y&&y<=4&&2<=b&&b<=4?this.modules[p+y][g+b]=!0:this.modules[p+y][g+b]=!1)},u.getBestMaskPattern=function(){for(var p=0,g=0,y=0;y<8;y++){this.makeImpl(!0,y);var b=s.getLostPoint(this);(y==0||p>b)&&(p=b,g=y)}return g},u.createMovieClip=function(p,g,y){var b=p.createEmptyMovieClip(g,y),_=1;this.make();for(var T=0;T<this.modules.length;T++)for(var R=T*_,V=0;V<this.modules[T].length;V++){var $=V*_,Z=this.modules[T][V];Z&&(b.beginFill(0,100),b.moveTo($,R),b.lineTo($+_,R),b.lineTo($+_,R+_),b.lineTo($,R+_),b.endFill())}return b},u.setupTimingPattern=function(){for(var p=8;p<this.moduleCount-8;p++)this.modules[p][6]==null&&(this.modules[p][6]=p%2==0);for(var g=8;g<this.moduleCount-8;g++)this.modules[6][g]==null&&(this.modules[6][g]=g%2==0)},u.setupPositionAdjustPattern=function(){for(var p=s.getPatternPosition(this.typeNumber),g=0;g<p.length;g++)for(var y=0;y<p.length;y++){var b=p[g],_=p[y];if(this.modules[b][_]==null)for(var T=-2;T<=2;T++)for(var R=-2;R<=2;R++)T==-2||T==2||R==-2||R==2||T==0&&R==0?this.modules[b+T][_+R]=!0:this.modules[b+T][_+R]=!1}},u.setupTypeNumber=function(p){for(var g=s.getBCHTypeNumber(this.typeNumber),y=0;y<18;y++){var b=!p&&(g>>y&1)==1;this.modules[Math.floor(y/3)][y%3+this.moduleCount-8-3]=b}for(var y=0;y<18;y++){var b=!p&&(g>>y&1)==1;this.modules[y%3+this.moduleCount-8-3][Math.floor(y/3)]=b}},u.setupTypeInfo=function(p,g){for(var y=this.errorCorrectLevel<<3|g,b=s.getBCHTypeInfo(y),_=0;_<15;_++){var T=!p&&(b>>_&1)==1;_<6?this.modules[_][8]=T:_<8?this.modules[_+1][8]=T:this.modules[this.moduleCount-15+_][8]=T}for(var _=0;_<15;_++){var T=!p&&(b>>_&1)==1;_<8?this.modules[8][this.moduleCount-_-1]=T:_<9?this.modules[8][15-_-1+1]=T:this.modules[8][15-_-1]=T}this.modules[this.moduleCount-8][8]=!p},u.mapData=function(p,g){for(var y=-1,b=this.moduleCount-1,_=7,T=0,R=this.moduleCount-1;R>0;R-=2)for(R==6&&R--;;){for(var V=0;V<2;V++)if(this.modules[b][R-V]==null){var $=!1;T<p.length&&($=(p[T]>>>_&1)==1);var Z=s.getMask(g,b,R-V);Z&&($=!$),this.modules[b][R-V]=$,_--,_==-1&&(T++,_=7)}if(b+=y,b<0||this.moduleCount<=b){b-=y,y=-y;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(p,g,y){for(var b=e.getRSBlocks(p,g),_=new t,T=0;T<y.length;T++){var R=y[T];_.put(R.mode,4),_.put(R.getLength(),s.getLengthInBits(R.mode,p)),R.write(_)}for(var V=0,T=0;T<b.length;T++)V+=b[T].dataCount;if(_.getLengthInBits()>V*8)throw new Error("code length overflow. ("+_.getLengthInBits()+">"+V*8+")");for(_.getLengthInBits()+4<=V*8&&_.put(0,4);_.getLengthInBits()%8!=0;)_.putBit(!1);for(;!(_.getLengthInBits()>=V*8||(_.put(l.PAD0,8),_.getLengthInBits()>=V*8));)_.put(l.PAD1,8);return l.createBytes(_,b)},l.createBytes=function(p,g){for(var y=0,b=0,_=0,T=new Array(g.length),R=new Array(g.length),V=0;V<g.length;V++){var $=g[V].dataCount,Z=g[V].totalCount-$;b=Math.max(b,$),_=Math.max(_,Z),T[V]=new Array($);for(var ae=0;ae<T[V].length;ae++)T[V][ae]=255&p.buffer[ae+y];y+=$;var de=s.getErrorCorrectPolynomial(Z),me=new a(T[V],de.getLength()-1),ye=me.mod(de);R[V]=new Array(de.getLength()-1);for(var ae=0;ae<R[V].length;ae++){var De=ae+ye.getLength()-R[V].length;R[V][ae]=De>=0?ye.get(De):0}}for(var Te=0,ae=0;ae<g.length;ae++)Te+=g[ae].totalCount;for(var A=new Array(Te),C=0,ae=0;ae<b;ae++)for(var V=0;V<g.length;V++)ae<T[V].length&&(A[C++]=T[V][ae]);for(var ae=0;ae<_;ae++)for(var V=0;V<g.length;V++)ae<R[V].length&&(A[C++]=R[V][ae]);return A},um=l,um}var kh={},ix;function R2(){if(ix)return kh;ix=1,Object.defineProperty(kh,"__esModule",{value:!0});var r=Object.assign||function(y){for(var b=1;b<arguments.length;b++){var _=arguments[b];for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(y[T]=_[T])}return y},e=t1(),t=l(e),s=eu(),a=l(s);function l(y){return y&&y.__esModule?y:{default:y}}function u(y,b){var _={};for(var T in y)b.indexOf(T)>=0||Object.prototype.hasOwnProperty.call(y,T)&&(_[T]=y[T]);return _}var p={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},g=(0,s.forwardRef)(function(y,b){var _=y.bgColor,T=y.bgD,R=y.fgD,V=y.fgColor,$=y.size,Z=y.title,ae=y.viewBoxSize,de=y.xmlns,me=de===void 0?"http://www.w3.org/2000/svg":de,ye=u(y,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",r({},ye,{height:$,ref:b,viewBox:"0 0 "+ae+" "+ae,width:$,xmlns:me}),Z?a.default.createElement("title",null,Z):null,a.default.createElement("path",{d:T,fill:_}),a.default.createElement("path",{d:R,fill:V}))});return g.displayName="QRCodeSvg",g.propTypes=p,kh.default=g,kh}var ax;function k2(){if(ax)return rl;ax=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.QRCode=void 0;var r=Object.assign||function($){for(var Z=1;Z<arguments.length;Z++){var ae=arguments[Z];for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&($[de]=ae[de])}return $},e=t1(),t=_(e),s=n1(),a=_(s),l=A2(),u=_(l),p=eu(),g=_(p),y=R2(),b=_(y);function _($){return $&&$.__esModule?$:{default:$}}function T($,Z){var ae={};for(var de in $)Z.indexOf(de)>=0||Object.prototype.hasOwnProperty.call($,de)&&(ae[de]=$[de]);return ae}var R={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},V=(0,p.forwardRef)(function($,Z){var ae=$.bgColor,de=ae===void 0?"#FFFFFF":ae,me=$.fgColor,ye=me===void 0?"#000000":me,De=$.level,Te=De===void 0?"L":De,A=$.size,C=A===void 0?256:A,k=$.value,L=T($,["bgColor","fgColor","level","size","value"]),j=new u.default(-1,a.default[Te]);j.addData(k),j.make();var O=j.modules;return g.default.createElement(b.default,r({},L,{bgColor:de,bgD:O.map(function(I,it){return I.map(function(yt,Q){return yt?"":"M "+Q+" "+it+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ye,fgD:O.map(function(I,it){return I.map(function(yt,Q){return yt?"M "+Q+" "+it+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:Z,size:C,viewBoxSize:O.length}))});return rl.QRCode=V,V.displayName="QRCode",V.propTypes=R,rl.default=V,rl}var I2=k2();const ox=Cd(I2);var Vt=(r=>(r.READY="ready to sing",r.STANDBY="standby",r))(Vt||{}),dt=(r=>(r.SINGING="Singing",r.LISTENING="Listening",r))(dt||{}),Ve=(r=>(r.PENDING="Pending Approval",r.APPROVED="Approved",r.DONE="Done",r))(Ve||{}),Es=(r=>(r.FRESH_MEAT="FRESH_MEAT",r.FAIR_ROTATION="FAIR_ROTATION",r.FIFO="FIFO",r.OLDEST_MEMBER="OLDEST_MEMBER",r.RANDOM="RANDOM",r))(Es||{});class D2{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return j2(e).buffer}}function j2(r){let e=0;for(const a of r)e+=a.byteLength;const t=new Uint8Array(e);let s=0;for(const a of r){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);t.set(l,s),s+=a.byteLength}return t}function a1(r){return new O2(r).unpack()}function o1(r){const e=new P2,t=e.pack(r);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class O2{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let s=0,a="",l,u;for(;s<e;)l=t[s],l<160?(u=l,s++):(l^192)<32?(u=(l&31)<<6|t[s+1]&63,s+=2):(l^224)<16?(u=(l&15)<<12|(t[s+1]&63)<<6|t[s+2]&63,s+=3):(u=(l&7)<<18|(t[s+1]&63)<<12|(t[s+2]&63)<<6|t[s+3]&63,s+=4),a+=String.fromCodePoint(u);return this.index+=e,a}unpack_array(e){const t=new Array(e);for(let s=0;s<e;s++)t[s]=this.unpack();return t}unpack_map(e){const t={};for(let s=0;s<e;s++){const a=this.unpack();t[a]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,s=(e>>23&255)-127,a=e&8388607|8388608;return(t===0?1:-1)*a*2**(s-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),s=e>>31,a=(e>>20&2047)-1023,u=(e&1048575|1048576)*2**(a-20)+t*2**(a-52);return(s===0?1:-1)*u}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class P2{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const s=this.pack_array(e);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const s=e;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const s=this.pack_object(e);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),s=t.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const s=a=>{if(a<t){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>s(a+1)):s(a+1)}};return s(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const s=Math.floor(Math.log(e)/Math.LN2),a=e/2**s-1,l=Math.floor(a*2**52),u=2**32,p=t<<31|s+1023<<20|l/u&1048575,g=l%u;this._bufferBuilder.append(203),this.pack_int32(p),this.pack_int32(g)}pack_object(e){const t=Object.keys(e),s=t.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const a=l=>{if(l<t.length){const u=t[l];if(e.hasOwnProperty(u)){this.pack(u);const p=this.pack(e[u]);if(p instanceof Promise)return p.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,s=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),s=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new D2,this._textEncoder=new TextEncoder}}let l1=!0,c1=!0;function Cc(r,e,t){const s=r.match(e);return s&&s.length>=t&&parseFloat(s[t],10)}function uo(r,e,t){if(!r.RTCPeerConnection)return;const s=r.RTCPeerConnection.prototype,a=s.addEventListener;s.addEventListener=function(u,p){if(u!==e)return a.apply(this,arguments);const g=y=>{const b=t(y);b&&(p.handleEvent?p.handleEvent(b):p(b))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(p,g),a.apply(this,[u,g])};const l=s.removeEventListener;s.removeEventListener=function(u,p){if(u!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(p))return l.apply(this,arguments);const g=this._eventMap[e].get(p);return this._eventMap[e].delete(p),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[u,g])},Object.defineProperty(s,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function M2(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(l1=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function L2(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(c1=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function u1(){if(typeof window=="object"){if(l1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function mg(r,e){c1&&console.warn(r+" is deprecated, please use "+e+" instead.")}function V2(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=r;if(t.userAgentData&&t.userAgentData.brands){const s=t.userAgentData.brands.find(a=>a.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Cc(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Cc(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Cc(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,e._safariVersion=Cc(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function lx(r){return Object.prototype.toString.call(r)==="[object Object]"}function h1(r){return lx(r)?Object.keys(r).reduce(function(e,t){const s=lx(r[t]),a=s?h1(r[t]):r[t],l=s&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[t]:a})},{}):r}function Cm(r,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(s=>{s.endsWith("Id")?Cm(r,r.get(e[s]),t):s.endsWith("Ids")&&e[s].forEach(a=>{Cm(r,r.get(a),t)})}))}function cx(r,e,t){const s=t?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&l.push(u)}),l.forEach(u=>{r.forEach(p=>{p.type===s&&p.trackId===u.id&&Cm(r,p,a)})}),a}const ux=u1;function d1(r,e){const t=r&&r.navigator;if(!t.mediaDevices)return;const s=function(p){if(typeof p!="object"||p.mandatory||p.optional)return p;const g={};return Object.keys(p).forEach(y=>{if(y==="require"||y==="advanced"||y==="mediaSource")return;const b=typeof p[y]=="object"?p[y]:{ideal:p[y]};b.exact!==void 0&&typeof b.exact=="number"&&(b.min=b.max=b.exact);const _=function(T,R){return T?T+R.charAt(0).toUpperCase()+R.slice(1):R==="deviceId"?"sourceId":R};if(b.ideal!==void 0){g.optional=g.optional||[];let T={};typeof b.ideal=="number"?(T[_("min",y)]=b.ideal,g.optional.push(T),T={},T[_("max",y)]=b.ideal,g.optional.push(T)):(T[_("",y)]=b.ideal,g.optional.push(T))}b.exact!==void 0&&typeof b.exact!="number"?(g.mandatory=g.mandatory||{},g.mandatory[_("",y)]=b.exact):["min","max"].forEach(T=>{b[T]!==void 0&&(g.mandatory=g.mandatory||{},g.mandatory[_(T,y)]=b[T])})}),p.advanced&&(g.optional=(g.optional||[]).concat(p.advanced)),g},a=function(p,g){if(e.version>=61)return g(p);if(p=JSON.parse(JSON.stringify(p)),p&&typeof p.audio=="object"){const y=function(b,_,T){_ in b&&!(T in b)&&(b[T]=b[_],delete b[_])};p=JSON.parse(JSON.stringify(p)),y(p.audio,"autoGainControl","googAutoGainControl"),y(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=s(p.audio)}if(p&&typeof p.video=="object"){let y=p.video.facingMode;y=y&&(typeof y=="object"?y:{ideal:y});const b=e.version<66;if(y&&(y.exact==="user"||y.exact==="environment"||y.ideal==="user"||y.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!b)){delete p.video.facingMode;let _;if(y.exact==="environment"||y.ideal==="environment"?_=["back","rear"]:(y.exact==="user"||y.ideal==="user")&&(_=["front"]),_)return t.mediaDevices.enumerateDevices().then(T=>{T=T.filter(V=>V.kind==="videoinput");let R=T.find(V=>_.some($=>V.label.toLowerCase().includes($)));return!R&&T.length&&_.includes("back")&&(R=T[T.length-1]),R&&(p.video.deviceId=y.exact?{exact:R.deviceId}:{ideal:R.deviceId}),p.video=s(p.video),ux("chrome: "+JSON.stringify(p)),g(p)})}p.video=s(p.video)}return ux("chrome: "+JSON.stringify(p)),g(p)},l=function(p){return e.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(p,g,y){a(p,b=>{t.webkitGetUserMedia(b,g,_=>{y&&y(l(_))})})};if(t.getUserMedia=u.bind(t),t.mediaDevices.getUserMedia){const p=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(g){return a(g,y=>p(y).then(b=>{if(y.audio&&!b.getAudioTracks().length||y.video&&!b.getVideoTracks().length)throw b.getTracks().forEach(_=>{_.stop()}),new DOMException("","NotFoundError");return b},b=>Promise.reject(l(b))))}}}function f1(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function p1(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",a=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(p=>p.track&&p.track.id===a.track.id):l={track:a.track};const u=new Event("track");u.track=a.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)}),s.stream.getTracks().forEach(a=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(p=>p.track&&p.track.id===a.id):l={track:a};const u=new Event("track");u.track=a,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else uo(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function m1(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(p,g){let y=a.apply(this,arguments);return y||(y=e(this,p),this._senders.push(y)),y};const l=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(p){l.apply(this,arguments);const g=this._senders.indexOf(p);g!==-1&&this._senders.splice(g,1)}}const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],t.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(u=>{const p=this._senders.find(g=>g.track===u);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(a=>a._pc=this),s},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function g1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const l=t.apply(this,[]);return l.forEach(u=>u._pc=this),l});const s=r.RTCPeerConnection.prototype.addTrack;s&&(r.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),r.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>cx(u,l.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(l=>l._pc=this),a}),uo(r,"track",s=>(s.receiver._pc=s.srcElement,s)),r.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>cx(l,a.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const s=arguments[0];let a,l,u;return this.getSenders().forEach(p=>{p.track===s&&(a?u=!0:a=p)}),this.getReceivers().forEach(p=>(p.track===s&&(l?u=!0:l=p),p.track===s)),u||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function y1(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,p){if(!p)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const g=e.apply(this,arguments);return this._shimmedLocalStreams[p.id]?this._shimmedLocalStreams[p.id].indexOf(g)===-1&&this._shimmedLocalStreams[p.id].push(g):this._shimmedLocalStreams[p.id]=[p,g],g};const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(y=>{if(this.getSenders().find(_=>_.track===y))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();t.apply(this,arguments);const g=this.getSenders().filter(y=>p.indexOf(y)===-1);this._shimmedLocalStreams[u.id]=[u].concat(g)};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],s.apply(this,arguments)};const a=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const g=this._shimmedLocalStreams[p].indexOf(u);g!==-1&&this._shimmedLocalStreams[p].splice(g,1),this._shimmedLocalStreams[p].length===1&&delete this._shimmedLocalStreams[p]}),a.apply(this,arguments)}}function v1(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return y1(r);const t=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const b=t.apply(this);return this._reverseStreams=this._reverseStreams||{},b.map(_=>this._reverseStreams[_.id])};const s=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(b){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},b.getTracks().forEach(_=>{if(this.getSenders().find(R=>R.track===_))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[b.id]){const _=new r.MediaStream(b.getTracks());this._streams[b.id]=_,this._reverseStreams[_.id]=b,b=_}s.apply(this,[b])};const a=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(b){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[b.id]||b]),delete this._reverseStreams[this._streams[b.id]?this._streams[b.id].id:b.id],delete this._streams[b.id]},r.RTCPeerConnection.prototype.addTrack=function(b,_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const T=[].slice.call(arguments,1);if(T.length!==1||!T[0].getTracks().find($=>$===b))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find($=>$.track===b))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const V=this._streams[_.id];if(V)V.addTrack(b),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const $=new r.MediaStream([b]);this._streams[_.id]=$,this._reverseStreams[$.id]=_,this.addStream($)}return this.getSenders().find($=>$.track===b)};function l(y,b){let _=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(T=>{const R=y._reverseStreams[T],V=y._streams[R.id];_=_.replace(new RegExp(V.id,"g"),R.id)}),new RTCSessionDescription({type:b.type,sdp:_})}function u(y,b){let _=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(T=>{const R=y._reverseStreams[T],V=y._streams[R.id];_=_.replace(new RegExp(R.id,"g"),V.id)}),new RTCSessionDescription({type:b.type,sdp:_})}["createOffer","createAnswer"].forEach(function(y){const b=r.RTCPeerConnection.prototype[y],_={[y](){const T=arguments;return arguments.length&&typeof arguments[0]=="function"?b.apply(this,[V=>{const $=l(this,V);T[0].apply(null,[$])},V=>{T[1]&&T[1].apply(null,V)},arguments[2]]):b.apply(this,arguments).then(V=>l(this,V))}};r.RTCPeerConnection.prototype[y]=_[y]});const p=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?p.apply(this,arguments):(arguments[0]=u(this,arguments[0]),p.apply(this,arguments))};const g=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const y=g.get.apply(this);return y.type===""?y:l(this,y)}}),r.RTCPeerConnection.prototype.removeTrack=function(b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!b._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(b._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let T;Object.keys(this._streams).forEach(R=>{this._streams[R].getTracks().find($=>b.track===$)&&(T=this._streams[R])}),T&&(T.getTracks().length===1?this.removeStream(this._reverseStreams[T.id]):T.removeTrack(b.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Am(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const s=r.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[t]=a[t]})}function b1(r,e){uo(r,"negotiationneeded",t=>{const s=t.target;if(!((e.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return t})}const hx=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:b1,shimAddTrackRemoveTrack:v1,shimAddTrackRemoveTrackWithNative:y1,shimGetSendersWithDtmf:m1,shimGetUserMedia:d1,shimMediaStream:f1,shimOnTrack:p1,shimPeerConnection:Am,shimSenderReceiverGetStats:g1},Symbol.toStringTag,{value:"Module"}));function x1(r,e){const t=r&&r.navigator,s=r&&r.MediaStreamTrack;if(t.getUserMedia=function(a,l,u){mg("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(l,u)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(u,p,g){p in u&&!(g in u)&&(u[g]=u[p],delete u[p])},l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u.audio,"autoGainControl","mozAutoGainControl"),a(u.audio,"noiseSuppression","mozNoiseSuppression")),l(u)},s&&s.prototype.getSettings){const u=s.prototype.getSettings;s.prototype.getSettings=function(){const p=u.apply(this,arguments);return a(p,"mozAutoGainControl","autoGainControl"),a(p,"mozNoiseSuppression","noiseSuppression"),p}}if(s&&s.prototype.applyConstraints){const u=s.prototype.applyConstraints;s.prototype.applyConstraints=function(p){return this.kind==="audio"&&typeof p=="object"&&(p=JSON.parse(JSON.stringify(p)),a(p,"autoGainControl","mozAutoGainControl"),a(p,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[p])}}}}function U2(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return s.video===!0?s.video={mediaSource:e}:s.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(s)})}function _1(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Rm(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=r.RTCPeerConnection.prototype[a],u={[a](){return arguments[0]=new(a==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};r.RTCPeerConnection.prototype[a]=u[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[l,u,p]=arguments;return s.apply(this,[l||null]).then(g=>{if(e.version<53&&!u)try{g.forEach(y=>{y.type=t[y.type]||y.type})}catch(y){if(y.name!=="TypeError")throw y;g.forEach((b,_)=>{g.set(_,Object.assign({},b,{type:t[b.type]||b.type}))})}return g}).then(u,p)}}function w1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const t=r.RTCPeerConnection.prototype.addTrack;t&&(r.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function E1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=e.apply(this,[]);return s.forEach(a=>a._pc=this),s}),uo(r,"track",t=>(t.receiver._pc=t.srcElement,t)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function T1(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){mg("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&t.getTracks().includes(s.track)&&this.removeTrack(s)})})}function S1(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function N1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const a=s.length>0;a&&s.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:u}=l,p=u.getParameters();(!("encodings"in p)||p.encodings.length===1&&Object.keys(p.encodings[0]).length===0)&&(p.encodings=s,u.sendEncodings=s,this.setParametersPromises.push(u.setParameters(p).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function C1(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const s=e.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function A1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function R1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const dx=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:N1,shimCreateAnswer:R1,shimCreateOffer:A1,shimGetDisplayMedia:U2,shimGetParameters:C1,shimGetUserMedia:x1,shimOnTrack:_1,shimPeerConnection:Rm,shimRTCDataChannel:S1,shimReceiverGetStats:E1,shimRemoveStream:T1,shimSenderGetStats:w1},Symbol.toStringTag,{value:"Module"}));function k1(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(a=>e.call(this,a,s)),s.getVideoTracks().forEach(a=>e.call(this,a,s))},r.RTCPeerConnection.prototype.addTrack=function(s,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(t);if(s===-1)return;this._localStreams.splice(s,1);const a=t.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function I1(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(l)>=0)return;s._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,s.dispatchEvent(u)})}),e.apply(s,arguments)}}}function D1(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,t=e.createOffer,s=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(y,b){const _=arguments.length>=2?arguments[2]:arguments[0],T=t.apply(this,[_]);return b?(T.then(y,b),Promise.resolve()):T},e.createAnswer=function(y,b){const _=arguments.length>=2?arguments[2]:arguments[0],T=s.apply(this,[_]);return b?(T.then(y,b),Promise.resolve()):T};let p=function(g,y,b){const _=a.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_};e.setLocalDescription=p,p=function(g,y,b){const _=l.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_},e.setRemoteDescription=p,p=function(g,y,b){const _=u.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_},e.addIceCandidate=p}function j1(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,s=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=a=>s(O1(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(s,a,l){e.mediaDevices.getUserMedia(s).then(a,l)}).bind(e))}function O1(r){return r&&r.video!==void 0?Object.assign({},r,{video:h1(r.video)}):r}function P1(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(s,a){if(s&&s.iceServers){const l=[];for(let u=0;u<s.iceServers.length;u++){let p=s.iceServers[u];p.urls===void 0&&p.url?(mg("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,l.push(p)):l.push(s.iceServers[u])}s.iceServers=l}return new e(s,a)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function M1(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function L1(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):s.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):s.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function V1(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const fx=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:V1,shimCallbacksAPI:D1,shimConstraints:O1,shimCreateOfferLegacy:L1,shimGetUserMedia:j1,shimLocalStreamsAPI:k1,shimRTCIceServerUrls:P1,shimRemoteStreamsAPI:I1,shimTrackEventTransceiver:M1},Symbol.toStringTag,{value:"Module"}));var hm={exports:{}},px;function z2(){return px||(px=1,(function(r){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(s=>s.trim())},e.splitSections=function(t){return t.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(t){const s=e.splitSections(t);return s&&s[0]},e.getMediaSections=function(t){const s=e.splitSections(t);return s.shift(),s},e.matchPrefix=function(t,s){return e.splitLines(t).filter(a=>a.indexOf(s)===0)},e.parseCandidate=function(t){let s;t.indexOf("a=candidate:")===0?s=t.substring(12).split(" "):s=t.substring(10).split(" ");const a={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let l=8;l<s.length;l+=2)switch(s[l]){case"raddr":a.relatedAddress=s[l+1];break;case"rport":a.relatedPort=parseInt(s[l+1],10);break;case"tcptype":a.tcpType=s[l+1];break;case"ufrag":a.ufrag=s[l+1],a.usernameFragment=s[l+1];break;default:a[s[l]]===void 0&&(a[s[l]]=s[l+1]);break}return a},e.writeCandidate=function(t){const s=[];s.push(t.foundation);const a=t.component;a==="rtp"?s.push(1):a==="rtcp"?s.push(2):s.push(a),s.push(t.protocol.toUpperCase()),s.push(t.priority),s.push(t.address||t.ip),s.push(t.port);const l=t.type;return s.push("typ"),s.push(l),l!=="host"&&t.relatedAddress&&t.relatedPort&&(s.push("raddr"),s.push(t.relatedAddress),s.push("rport"),s.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(s.push("ufrag"),s.push(t.usernameFragment||t.ufrag)),"candidate:"+s.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let s=t.substring(9).split(" ");const a={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),a.name=s[0],a.clockRate=parseInt(s[1],10),a.channels=s.length===3?parseInt(s[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(t){let s=t.payloadType;t.preferredPayloadType!==void 0&&(s=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+s+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(t){const s=t.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const s={};let a;const l=t.substring(t.indexOf(" ")+1).split(";");for(let u=0;u<l.length;u++)a=l[u].trim().split("="),s[a[0].trim()]=a[1];return s},e.writeFmtp=function(t){let s="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const l=[];Object.keys(t.parameters).forEach(u=>{t.parameters[u]!==void 0?l.push(u+"="+t.parameters[u]):l.push(u)}),s+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return s},e.parseRtcpFb=function(t){const s=t.substring(t.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},e.writeRtcpFb=function(t){let s="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(l=>{s+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),s},e.parseSsrcMedia=function(t){const s=t.indexOf(" "),a={ssrc:parseInt(t.substring(7,s),10)},l=t.indexOf(":",s);return l>-1?(a.attribute=t.substring(s+1,l),a.value=t.substring(l+1)):a.attribute=t.substring(s+1),a},e.parseSsrcGroup=function(t){const s=t.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(a=>parseInt(a,10))}},e.getMid=function(t){const s=e.matchPrefix(t,"a=mid:")[0];if(s)return s.substring(6)},e.parseFingerprint=function(t){const s=t.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},e.getDtlsParameters=function(t,s){return{role:"auto",fingerprints:e.matchPrefix(t+s,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,s){let a="a=setup:"+s+`\r
`;return t.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(t){const s=t.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const s=t.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,s){return e.matchPrefix(t+s,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,s){const a=e.matchPrefix(t+s,"a=ice-ufrag:")[0],l=e.matchPrefix(t+s,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(t){let s="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(s+=`a=ice-lite\r
`),s},e.parseRtpParameters=function(t){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(t)[0].split(" ");s.profile=l[2];for(let p=3;p<l.length;p++){const g=l[p],y=e.matchPrefix(t,"a=rtpmap:"+g+" ")[0];if(y){const b=e.parseRtpMap(y),_=e.matchPrefix(t,"a=fmtp:"+g+" ");switch(b.parameters=_.length?e.parseFmtp(_[0]):{},b.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+g+" ").map(e.parseRtcpFb),s.codecs.push(b),b.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(b.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(p=>{s.headerExtensions.push(e.parseExtmap(p))});const u=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return s.codecs.forEach(p=>{u.forEach(g=>{p.rtcpFeedback.find(b=>b.type===g.type&&b.parameter===g.parameter)||p.rtcpFeedback.push(g)})}),s},e.writeRtpDescription=function(t,s){let a="";a+="m="+t+" ",a+=s.codecs.length>0?"9":"0",a+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=s.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(u=>{a+=e.writeRtpMap(u),a+=e.writeFmtp(u),a+=e.writeRtcpFb(u)});let l=0;return s.codecs.forEach(u=>{u.maxptime>l&&(l=u.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(u=>{a+=e.writeExtmap(u)}),a},e.parseRtpEncodingParameters=function(t){const s=[],a=e.parseRtpParameters(t),l=a.fecMechanisms.indexOf("RED")!==-1,u=a.fecMechanisms.indexOf("ULPFEC")!==-1,p=e.matchPrefix(t,"a=ssrc:").map(T=>e.parseSsrcMedia(T)).filter(T=>T.attribute==="cname"),g=p.length>0&&p[0].ssrc;let y;const b=e.matchPrefix(t,"a=ssrc-group:FID").map(T=>T.substring(17).split(" ").map(V=>parseInt(V,10)));b.length>0&&b[0].length>1&&b[0][0]===g&&(y=b[0][1]),a.codecs.forEach(T=>{if(T.name.toUpperCase()==="RTX"&&T.parameters.apt){let R={ssrc:g,codecPayloadType:parseInt(T.parameters.apt,10)};g&&y&&(R.rtx={ssrc:y}),s.push(R),l&&(R=JSON.parse(JSON.stringify(R)),R.fec={ssrc:g,mechanism:u?"red+ulpfec":"red"},s.push(R))}}),s.length===0&&g&&s.push({ssrc:g});let _=e.matchPrefix(t,"b=");return _.length&&(_[0].indexOf("b=TIAS:")===0?_=parseInt(_[0].substring(7),10):_[0].indexOf("b=AS:")===0?_=parseInt(_[0].substring(5),10)*1e3*.95-2e3*8:_=void 0,s.forEach(T=>{T.maxBitrate=_})),s},e.parseRtcpParameters=function(t){const s={},a=e.matchPrefix(t,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname")[0];a&&(s.cname=a.value,s.ssrc=a.ssrc);const l=e.matchPrefix(t,"a=rtcp-rsize");s.reducedSize=l.length>0,s.compound=l.length===0;const u=e.matchPrefix(t,"a=rtcp-mux");return s.mux=u.length>0,s},e.writeRtcpParameters=function(t){let s="";return t.reducedSize&&(s+=`a=rtcp-rsize\r
`),t.mux&&(s+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(s+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),s},e.parseMsid=function(t){let s;const a=e.matchPrefix(t,"a=msid:");if(a.length===1)return s=a[0].substring(7).split(" "),{stream:s[0],track:s[1]};const l=e.matchPrefix(t,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(l.length>0)return s=l[0].value.split(" "),{stream:s[0],track:s[1]}},e.parseSctpDescription=function(t){const s=e.parseMLine(t),a=e.matchPrefix(t,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const u=e.matchPrefix(t,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:s.fmt,maxMessageSize:l};const p=e.matchPrefix(t,"a=sctpmap:");if(p.length>0){const g=p[0].substring(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:l}}},e.writeSctpDescription=function(t,s){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&a.push("a=max-message-size:"+s.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,s,a){let l;const u=s!==void 0?s:2;return t?l=t:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,s){const a=e.splitLines(t);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return s?e.getDirection(s):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const a=e.splitLines(t)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(t){const a=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const s=e.splitLines(t);for(let a=0;a<s.length;a++)if(s[a].length<2||s[a].charAt(1)!=="=")return!1;return!0},r.exports=e})(hm)),hm.exports}var U1=z2();const ul=Cd(U1),B2=c2({__proto__:null,default:ul},[U1]);function Lh(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const a=new e(s),l=ul.parseCandidate(s.candidate);for(const u in l)u in a||Object.defineProperty(a,u,{value:l[u]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(s)},r.RTCIceCandidate.prototype=e.prototype,uo(r,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new r.RTCIceCandidate(t.candidate),writable:"false"}),t))}function km(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||uo(r,"icecandidate",e=>{if(e.candidate){const t=ul.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Vh(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(p){if(!p||!p.sdp)return!1;const g=ul.splitSections(p.sdp);return g.shift(),g.some(y=>{const b=ul.parseMLine(y);return b&&b.kind==="application"&&b.protocol.indexOf("SCTP")!==-1})},s=function(p){const g=p.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(g===null||g.length<2)return-1;const y=parseInt(g[1],10);return y!==y?-1:y},a=function(p){let g=65536;return e.browser==="firefox"&&(e.version<57?p===-1?g=16384:g=2147483637:e.version<60?g=e.version===57?65535:65536:g=2147483637),g},l=function(p,g){let y=65536;e.browser==="firefox"&&e.version===57&&(y=65535);const b=ul.matchPrefix(p.sdp,"a=max-message-size:");return b.length>0?y=parseInt(b[0].substring(19),10):e.browser==="firefox"&&g!==-1&&(y=2147483637),y},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:g}=this.getConfiguration();g==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const g=s(arguments[0]),y=a(g),b=l(arguments[0],g);let _;y===0&&b===0?_=Number.POSITIVE_INFINITY:y===0||b===0?_=Math.max(y,b):_=Math.min(y,b);const T={};Object.defineProperty(T,"maxMessageSize",{get(){return _}}),this._sctp=T}return u.apply(this,arguments)}}function Uh(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(s,a){const l=s.send;s.send=function(){const p=arguments[0],g=p.length||p.size||p.byteLength;if(s.readyState==="open"&&a.sctp&&g>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(s,arguments)}}const t=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return e(a,this),a},uo(r,"datachannel",s=>(e(s.channel,s.target),s))}function Im(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const s=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const u=new Event("connectionstatechange",a);l.dispatchEvent(u)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function Dm(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&a instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return t.apply(this,arguments)}}function zh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Bh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>t.apply(this,[u]))})}const H2=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Dm,shimAddIceCandidateNullOrEmpty:zh,shimConnectionState:Im,shimMaxMessageSize:Vh,shimParameterlessSetLocalDescription:Bh,shimRTCIceCandidate:Lh,shimRTCIceCandidateRelayProtocol:km,shimSendThrowTypeError:Uh},Symbol.toStringTag,{value:"Module"}));function G2({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=u1,s=V2(r),a={browserDetails:s,commonShim:H2,extractVersion:Cc,disableLog:M2,disableWarnings:L2,sdp:B2};switch(s.browser){case"chrome":if(!hx||!Am||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(s.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=hx,zh(r,s),Bh(r),d1(r,s),f1(r),Am(r,s),p1(r),v1(r,s),m1(r),g1(r),b1(r,s),Lh(r),km(r),Im(r),Vh(r,s),Uh(r),Dm(r,s);break;case"firefox":if(!dx||!Rm||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=dx,zh(r,s),Bh(r),x1(r,s),Rm(r,s),_1(r),T1(r),w1(r),E1(r),S1(r),N1(r),C1(r),A1(r),R1(r),Lh(r),Im(r),Vh(r,s),Uh(r);break;case"safari":if(!fx||!e.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=fx,zh(r,s),Bh(r),P1(r),L1(r),D1(r),k1(r),I1(r),M1(r),j1(r),V1(r),Lh(r),km(r),Vh(r,s),Uh(r),Dm(r,s);break;default:t("Unsupported browser!");break}return a}const mx=G2({window:typeof window>"u"?void 0:window});function ho(r,e,t,s){Object.defineProperty(r,e,{get:t,set:s,enumerable:!0,configurable:!0})}class z1{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],s=e.byteLength,a=Math.ceil(s/this.chunkedMTU);let l=0,u=0;for(;u<s;){const p=Math.min(s,u+this.chunkedMTU),g=e.slice(u,p),y={__peerData:this._dataCount,n:l,data:g,total:a};t.push(y),u=p,l++}return this._dataCount++,t}}}function q2(r){let e=0;for(const a of r)e+=a.byteLength;const t=new Uint8Array(e);let s=0;for(const a of r)t.set(a,s),s+=a.byteLength;return t}const dm=mx.default||mx,wc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?e>=this.minChromeVersion:r==="firefox"?e>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return dm.browserDetails.browser}getVersion(){return dm.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),e=dm.browserDetails.version||0;if(r==="chrome"&&e<this.minChromeVersion)return!1;if(r==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,s=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),s=!0}catch{}finally{t&&t.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},F2=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),B1=()=>Math.random().toString(36).slice(2),gx={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class $2 extends z1{noop(){}blobToArrayBuffer(e,t){const s=new FileReader;return s.onload=function(a){a.target&&t(a.target.result)},s.readAsArrayBuffer(e),s}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=gx,this.browser=wc.getBrowser(),this.browserVersion=wc.getVersion(),this.pack=o1,this.unpack=a1,this.supports=(function(){const t={browser:wc.isBrowserSupported(),webRTC:wc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let s;try{s=new RTCPeerConnection(gx),t.audioVideo=!0;let a;try{a=s.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!a.ordered;try{a.binaryType="blob",t.binaryBlob=!wc.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{s&&s.close()}return t})(),this.validateId=F2,this.randomToken=B1}}const rr=new $2,Y2="PeerJS: ";class Q2{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const s=[Y2,...t];for(const a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);e>=3?console.log(...s):e>=2?console.warn("WARNING",...s):e>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var xe=new Q2,gg={},K2=Object.prototype.hasOwnProperty,Qn="~";function Gc(){}Object.create&&(Gc.prototype=Object.create(null),new Gc().__proto__||(Qn=!1));function X2(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function H1(r,e,t,s,a){if(typeof t!="function")throw new TypeError("The listener must be a function");var l=new X2(t,s||r,a),u=Qn?Qn+e:e;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],l]:r._events[u].push(l):(r._events[u]=l,r._eventsCount++),r}function Hh(r,e){--r._eventsCount===0?r._events=new Gc:delete r._events[e]}function Un(){this._events=new Gc,this._eventsCount=0}Un.prototype.eventNames=function(){var e=[],t,s;if(this._eventsCount===0)return e;for(s in t=this._events)K2.call(t,s)&&e.push(Qn?s.slice(1):s);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Un.prototype.listeners=function(e){var t=Qn?Qn+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var a=0,l=s.length,u=new Array(l);a<l;a++)u[a]=s[a].fn;return u};Un.prototype.listenerCount=function(e){var t=Qn?Qn+e:e,s=this._events[t];return s?s.fn?1:s.length:0};Un.prototype.emit=function(e,t,s,a,l,u){var p=Qn?Qn+e:e;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,b,_;if(g.fn){switch(g.once&&this.removeListener(e,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,t),!0;case 3:return g.fn.call(g.context,t,s),!0;case 4:return g.fn.call(g.context,t,s,a),!0;case 5:return g.fn.call(g.context,t,s,a,l),!0;case 6:return g.fn.call(g.context,t,s,a,l,u),!0}for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];g.fn.apply(g.context,b)}else{var T=g.length,R;for(_=0;_<T;_++)switch(g[_].once&&this.removeListener(e,g[_].fn,void 0,!0),y){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,t);break;case 3:g[_].fn.call(g[_].context,t,s);break;case 4:g[_].fn.call(g[_].context,t,s,a);break;default:if(!b)for(R=1,b=new Array(y-1);R<y;R++)b[R-1]=arguments[R];g[_].fn.apply(g[_].context,b)}}return!0};Un.prototype.on=function(e,t,s){return H1(this,e,t,s,!1)};Un.prototype.once=function(e,t,s){return H1(this,e,t,s,!0)};Un.prototype.removeListener=function(e,t,s,a){var l=Qn?Qn+e:e;if(!this._events[l])return this;if(!t)return Hh(this,l),this;var u=this._events[l];if(u.fn)u.fn===t&&(!a||u.once)&&(!s||u.context===s)&&Hh(this,l);else{for(var p=0,g=[],y=u.length;p<y;p++)(u[p].fn!==t||a&&!u[p].once||s&&u[p].context!==s)&&g.push(u[p]);g.length?this._events[l]=g.length===1?g[0]:g:Hh(this,l)}return this};Un.prototype.removeAllListeners=function(e){var t;return e?(t=Qn?Qn+e:e,this._events[t]&&Hh(this,t)):(this._events=new Gc,this._eventsCount=0),this};Un.prototype.off=Un.prototype.removeListener;Un.prototype.addListener=Un.prototype.on;Un.prefixed=Qn;Un.EventEmitter=Un;gg=Un;var fo={};ho(fo,"ConnectionType",()=>aa);ho(fo,"PeerErrorType",()=>ln);ho(fo,"BaseConnectionErrorType",()=>jm);ho(fo,"DataConnectionErrorType",()=>yg);ho(fo,"SerializationType",()=>Ad);ho(fo,"SocketEventType",()=>na);ho(fo,"ServerMessageType",()=>Ln);var aa=(function(r){return r.Data="data",r.Media="media",r})({}),ln=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),jm=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),yg=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),Ad=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),na=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),Ln=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const G1="1.5.5";class J2 extends gg.EventEmitter{constructor(e,t,s,a,l,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const p=e?"wss://":"ws://";this._baseUrl=p+t+":"+s+a+"peerjs?key="+l}start(e,t){this._id=e;const s=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+G1),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),xe.log("Server message received:",l)}catch{xe.log("Invalid server message",a.data);return}this.emit(na.Message,l)},this._socket.onclose=a=>{this._disconnected||(xe.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(na.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),xe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){xe.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Ln.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(na.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class q1{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===aa.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const s=this.connection,a={ordered:!!e.reliable},l=t.createDataChannel(s.label,a);s._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){xe.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,s=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;xe.log("Listening for ICE candidates."),e.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(xe.log(`Received ICE candidates for ${t}:`,u.candidate),l.socket.send({type:Ln.Candidate,payload:{candidate:u.candidate,type:a,connectionId:s},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":xe.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(jm.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":xe.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(jm.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":xe.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},xe.log("Listening for data channel"),e.ondatachannel=u=>{xe.log("Received data channel");const p=u.channel;l.getConnection(t,s)._initializeDataChannel(p)},xe.log("Listening for remote stream"),e.ontrack=u=>{xe.log("Received remote stream");const p=u.streams[0],g=l.getConnection(t,s);if(g.type===aa.Media){const y=g;this._addStreamToMediaConnection(p,y)}}}cleanup(){xe.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let s=!1;const a=this.connection.dataChannel;a&&(s=!!a.readyState&&a.readyState!=="closed"),(t||s)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const s=await e.createOffer(this.connection.options.constraints);xe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await e.setLocalDescription(s),xe.log("Set localDescription:",s,`for:${this.connection.peer}`);let a={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===aa.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}t.socket.send({type:Ln.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(ln.WebRTC,a),xe.log("Failed to setLocalDescription, ",a))}}catch(s){t.emitError(ln.WebRTC,s),xe.log("Failed to createOffer, ",s)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const s=await e.createAnswer();xe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await e.setLocalDescription(s),xe.log("Set localDescription:",s,`for:${this.connection.peer}`),t.socket.send({type:Ln.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){t.emitError(ln.WebRTC,a),xe.log("Failed to setLocalDescription, ",a)}}catch(s){t.emitError(ln.WebRTC,s),xe.log("Failed to create answer, ",s)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const s=this.connection.peerConnection,a=this.connection.provider;xe.log("Setting remote description",t);const l=this;try{await s.setRemoteDescription(t),xe.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(u){a.emitError(ln.WebRTC,u),xe.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(e){xe.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),xe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(ln.WebRTC,t),xe.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(xe.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return xe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(s=>{t.addTrack(s,e)})}_addStreamToMediaConnection(e,t){xe.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class F1 extends gg.EventEmitter{emitError(e,t){xe.error("Error:",t),this.emit("error",new W2(`${e}`,t))}}class W2 extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class $1 extends F1{get open(){return this._open}constructor(e,t,s){super(),this.peer=e,this.provider=t,this.options=s,this._open=!1,this.metadata=s.metadata}}var hg;const Bc=class Bc extends $1{get type(){return aa.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,s){super(e,t,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Bc.ID_PREFIX+rr.randomToken(),this._negotiator=new q1(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{xe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{xe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){xe.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,s=e.payload;switch(e.type){case Ln.Answer:this._negotiator.handleSDP(t,s.sdp),this._open=!0;break;case Ln.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:xe.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){xe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const s=this.provider._getMessages(this.connectionId);for(const a of s)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};hg=new WeakMap,bc(Bc,hg,Bc.ID_PREFIX="mc_");let td=Bc;class Z2{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:s,port:a,path:l,key:u}=this._options,p=new URL(`${t}://${s}:${a}${l}${u}/${e}`);return p.searchParams.set("ts",`${Date.now()}${Math.random()}`),p.searchParams.set("version",G1),fetch(p.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){xe.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==rr.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===rr.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw xe.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var dg,fg;const Wa=class Wa extends $1{get type(){return aa.Data}constructor(e,t,s){super(e,t,s),this.connectionId=this.options.connectionId||Wa.ID_PREFIX+B1(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new q1(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{xe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{xe.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{xe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(yg.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case Ln.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case Ln.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:xe.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};dg=new WeakMap,fg=new WeakMap,bc(Wa,dg,Wa.ID_PREFIX="dc_"),bc(Wa,fg,Wa.MAX_BUFFERED_AMOUNT=8388608);let nd=Wa;class vg extends nd{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>nd.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return xe.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class fm extends vg{close(e){super.close(e),this._chunkedData={}}constructor(e,t,s){super(e,t,s),this.chunker=new z1,this.serialization=Ad.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=a1(e),s=t.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,s=this._chunkedData[t]||{data:[],count:0,total:e.total};if(s.data[e.n]=new Uint8Array(e.data),s.count++,this._chunkedData[t]=s,s.total===s.count){delete this._chunkedData[t];const a=q2(s.data);this._handleDataMessage({data:a})}}_send(e,t){const s=o1(e);if(s instanceof Promise)return this._send_blob(s);if(!t&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);xe.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const s of t)this.send(s,!0)}}class eN extends vg{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Ad.None}}class tN extends vg{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),s=t.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const s=this.encoder.encode(this.stringify(e));if(s.byteLength>=rr.chunkedMTU){this.emitError(yg.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...e){super(...e),this.serialization=Ad.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var pg;const Hc=class Hc extends F1{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,s]of this._connections)e[t]=s;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:eN,json:tN,binary:fm,"binary-utf8":fm,default:fm},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(e&&e.constructor==Object?t=e:e&&(s=e.toString()),t={debug:0,host:rr.CLOUD_HOST,port:rr.CLOUD_PORT,path:"/",key:Hc.DEFAULT_KEY,token:rr.randomToken(),config:rr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==rr.CLOUD_HOST?this._options.secure=rr.isSecure():this._options.host==rr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&xe.setLogFunction(this._options.logFunction),xe.logLevel=this._options.debug||0,this._api=new Z2(t),this._socket=this._createServerConnection(),!rr.supports.audioVideo&&!rr.supports.data){this._delayedAbort(ln.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!rr.validateId(s)){this._delayedAbort(ln.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(ln.ServerError,a))}_createServerConnection(){const e=new J2(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(na.Message,t=>{this._handleMessage(t)}),e.on(na.Error,t=>{this._abort(ln.SocketError,t)}),e.on(na.Disconnected,()=>{this.disconnected||(this.emitError(ln.Network,"Lost connection to server."),this.disconnect())}),e.on(na.Close,()=>{this.disconnected||this._abort(ln.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,s=e.payload,a=e.src;switch(t){case Ln.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ln.Error:this._abort(ln.ServerError,s.msg);break;case Ln.IdTaken:this._abort(ln.UnavailableID,`ID "${this.id}" is taken`);break;case Ln.InvalidKey:this._abort(ln.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ln.Leave:xe.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case Ln.Expire:this.emitError(ln.PeerUnavailable,`Could not connect to peer ${a}`);break;case Ln.Offer:{const l=s.connectionId;let u=this.getConnection(a,l);if(u&&(u.close(),xe.warn(`Offer received for existing Connection ID:${l}`)),s.type===aa.Media){const g=new td(a,this,{connectionId:l,_payload:s,metadata:s.metadata});u=g,this._addConnection(a,u),this.emit("call",g)}else if(s.type===aa.Data){const g=new this._serializers[s.serialization](a,this,{connectionId:l,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});u=g,this._addConnection(a,u),this.emit("connection",g)}else{xe.warn(`Received malformed connection type:${s.type}`);return}const p=this._getMessages(l);for(const g of p)u.handleMessage(g);break}default:{if(!s){xe.warn(`You received a malformed message from ${a} of type ${t}`);return}const l=s.connectionId,u=this.getConnection(a,l);u&&u.peerConnection?u.handleMessage(e):l?this._storeMessage(l,e):xe.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){xe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ln.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,s),s}call(e,t,s={}){if(this.disconnected){xe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ln.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){xe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new td(e,this,{...s,_stream:t});return this._addConnection(e,a),a}_addConnection(e,t){xe.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const s=t.indexOf(e);s!==-1&&t.splice(s,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const s=this._connections.get(e);if(!s)return null;for(const a of s)if(a.connectionId===t)return a;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){xe.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(xe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const s of t)s.close()}disconnect(){if(this.disconnected)return;const e=this.id;xe.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)xe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)xe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(ln.ServerError,t))}};pg=new WeakMap,bc(Hc,pg,Hc.DEFAULT_KEY="peerjs");let rd=Hc;class nN{constructor(){this.peer=null,this.lockPeer=null,this.connections=new Map,this.hostId=null,this.isHost=!1,this.heartbeatInterval=null,this.retryCount=0,this.maxRetries=10,this.actionQueue=[],this.onStateReceived=null,this.onActionReceived=null,this.onConnectionStatus=null,this.onPeerConnected=null,this.onDeviceConnected=null,this.onDeviceDisconnected=null}async getPublicIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown-network"}catch(e){return console.warn("[Sync] Could not fetch public IP for lock, using fallback",e),"local-fallback"}}async initialize(e,t){if(this.isHost=e==="DJ",!this.isHost&&t&&(this.hostId=t),this.peer&&this.destroy(),this.isHost&&!t){const s=await this.getPublicIP(),a=`singmode-lock-${btoa(s).replace(/=/g,"").substr(0,12)}`;if(console.log(`[Sync] Attempting to claim network lock: ${a}`),!await new Promise(u=>{const p=new rd(a,{debug:1});p.on("open",()=>{this.lockPeer=p,u(!0)}),p.on("error",g=>{g.type==="unavailable-id"?u(!1):u(!0),p.destroy()})}))throw new Error("COLLISION: A SingMode DJ session is already active on this network.")}return new Promise((s,a)=>{const l=this.isHost?t||`singmode-${Math.random().toString(36).substr(2,6)}`:void 0;this.peer=new rd(l,{debug:1,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}]}}),this.peer.on("open",u=>{console.log(`[Sync] Peer opened with ID: ${u}`),this.isHost&&(this.hostId=u),this.retryCount=0,this.startHeartbeat(),!this.isHost&&t&&this.connectToHost(t),this.onConnectionStatus&&(!t||this.connections.size>0)&&this.onConnectionStatus("connected"),s(u)}),this.peer.on("disconnected",()=>{var u;console.warn("[Sync] Peer disconnected from signaling server. Attempting reconnect..."),this.onConnectionStatus&&this.onConnectionStatus("connecting"),(u=this.peer)==null||u.reconnect()}),this.peer.on("connection",u=>{this.handleConnection(u)}),this.peer.on("error",u=>{var p;console.error("[Sync] Peer error:",u.type,u),u.type==="unavailable-id"?(this.destroy(),this.initialize(e).then(s).catch(a)):u.type==="network"||u.type==="server-error"||(p=u.message)!=null&&p.includes("Lost connection")?(this.onConnectionStatus&&this.onConnectionStatus("disconnected"),this.handleNetworkError(e,t)):u.type==="peer-unavailable"&&this.onConnectionStatus&&this.onConnectionStatus("disconnected")})})}handleNetworkError(e,t){if(this.retryCount<this.maxRetries){this.retryCount++;const s=Math.min(1e3*Math.pow(2,this.retryCount),3e4);console.log(`[Sync] Network failure. Retrying in ${s}ms... (Attempt ${this.retryCount})`),setTimeout(()=>{this.initialize(e,t)},s)}}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=window.setInterval(()=>{this.peer&&this.peer.disconnected&&!this.peer.destroyed&&this.peer.reconnect(),this.lockPeer&&this.lockPeer.disconnected&&!this.lockPeer.destroyed&&this.lockPeer.reconnect()},5e3)}connectToHost(e){if(!this.peer||this.isHost||this.peer.destroyed)return;this.onConnectionStatus&&this.onConnectionStatus("connecting");const t=this.peer.connect(e,{reliable:!0});this.handleConnection(t)}handleConnection(e){e.on("open",()=>{console.log(`[Sync] Data connection established with: ${e.peer}`),this.connections.set(e.peer,e),!this.isHost&&this.actionQueue.length>0&&(console.log(`[Sync] Flushing ${this.actionQueue.length} queued actions to host.`),this.actionQueue.forEach(t=>{e.send(t)}),this.actionQueue=[]),this.onConnectionStatus&&this.onConnectionStatus("connected"),this.isHost&&this.onPeerConnected&&this.onPeerConnected(),this.isHost&&this.onDeviceConnected&&this.onDeviceConnected(e.peer)}),e.on("data",t=>{if(t&&typeof t=="object")if("type"in t){const s={...t,senderId:e.peer};this.onActionReceived&&this.onActionReceived(s)}else"participants"in t&&this.onStateReceived&&this.onStateReceived(t)}),e.on("close",()=>{console.log(`[Sync] Connection closed: ${e.peer}`),this.connections.delete(e.peer),this.connections.size===0&&this.onConnectionStatus&&(this.isHost||this.onConnectionStatus("disconnected")),this.isHost&&this.onDeviceDisconnected&&this.onDeviceDisconnected(e.peer)}),e.on("error",t=>{console.error("[Sync] Connection error:",t),this.connections.delete(e.peer)})}broadcastState(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}broadcastAction(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}sendAction(e){if(this.isHost||!this.peer)return;let t=!1;this.connections.forEach(s=>{s.open&&(s.send(e),t=!0)}),t||(console.log("[Sync] No connection to host. Queuing action:",e.type),this.actionQueue.push(e))}getRoomId(){return this.hostId}getMyPeerId(){var e;return((e=this.peer)==null?void 0:e.id)||null}destroy(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.connections.forEach(e=>e.close()),this.connections.clear(),this.actionQueue=[],this.peer&&(this.peer.destroy(),this.peer=null),this.lockPeer&&(this.lockPeer.destroy(),this.lockPeer=null)}}const Et=new nN,rN=()=>{};var yx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},sN=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],p=r[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],u=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Q1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,p=u?r[a+1]:0,g=a+2<r.length,y=g?r[a+2]:0,b=l>>2,_=(l&3)<<4|p>>4;let T=(p&15)<<2|y>>6,R=y&63;g||(R=64,u||(T=64)),s.push(t[b],t[_],t[T],t[R])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Y1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):sN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],p=a<r.length?t[r.charAt(a)]:0;++a;const y=a<r.length?t[r.charAt(a)]:64;++a;const _=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||p==null||y==null||_==null)throw new iN;const T=l<<2|p>>4;if(s.push(T),y!==64){const R=p<<4&240|y>>2;if(s.push(R),_!==64){const V=y<<6&192|_;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aN=function(r){const e=Y1(r);return Q1.encodeByteArray(e,!0)},sd=function(r){return aN(r).replace(/\./g,"")},K1=function(r){try{return Q1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=()=>oN().__FIREBASE_DEFAULTS__,cN=()=>{if(typeof process>"u"||typeof yx>"u")return;const r=yx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},uN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&K1(r[1]);return e&&JSON.parse(e)},Rd=()=>{try{return rN()||lN()||cN()||uN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},X1=r=>{var e,t;return(t=(e=Rd())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},hN=r=>{const e=X1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},J1=()=>{var r;return(r=Rd())==null?void 0:r.config},W1=r=>{var e;return(e=Rd())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z1(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[sd(JSON.stringify(t)),sd(JSON.stringify(u)),""].join(".")}const Oc={};function pN(){const r={prod:[],emulator:[]};for(const e of Object.keys(Oc))Oc[e]?r.emulator.push(e):r.prod.push(e);return r}function mN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let vx=!1;function ew(r,e){if(typeof window>"u"||typeof document>"u"||!El(window.location.host)||Oc[r]===e||Oc[r]||vx)return;Oc[r]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=pN().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{vx=!0,u()},T}function b(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=mN(s),R=t("text"),V=document.getElementById(R)||document.createElement("span"),$=t("learnmore"),Z=document.getElementById($)||document.createElement("a"),ae=t("preprendIcon"),de=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const me=T.element;p(me),b(Z,$);const ye=y();g(de,ae),me.append(de,V,Z,ye),document.body.appendChild(me)}l?(V.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function yN(){var e;const r=(e=Rd())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function xN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _N(){const r=zn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wN(){return!yN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EN(){try{return typeof indexedDB=="object"}catch{return!1}}function TN(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="FirebaseError";class ai extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=SN,Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?NN(l,s):"Error",p=`${this.serviceName}: ${u} (${a}).`;return new ai(a,p,s)}}function NN(r,e){return r.replace(CN,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const CN=/\{\$([^}]+)}/g;function AN(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function no(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=r[a],u=e[a];if(bx(l)&&bx(u)){if(!no(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function bx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ac(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Rc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function RN(r,e){const t=new kN(r,e);return t.subscribe.bind(t)}class kN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");IN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=pm),a.error===void 0&&(a.error=pm),a.complete===void 0&&(a.complete=pm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function pm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(r){return r&&r._delegate?r._delegate:r}class ro{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new dN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ON(e))try{this.getOrInitializeService({instanceIdentifier:Ja})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ja){return this.instances.has(e)}getOptions(e=Ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:jN(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ja){return this.component?this.component.multipleInstances?e:Ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jN(r){return r===Ja?void 0:r}function ON(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new DN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ze||(Ze={}));const MN={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},LN=Ze.INFO,VN={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},UN=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=VN[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bg{constructor(e){this.name=e,this._logLevel=LN,this._logHandler=UN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const zN=(r,e)=>e.some(t=>r instanceof t);let xx,_x;function BN(){return xx||(xx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HN(){return _x||(_x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tw=new WeakMap,Om=new WeakMap,nw=new WeakMap,mm=new WeakMap,xg=new WeakMap;function GN(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(oa(r.result)),a()},u=()=>{s(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&tw.set(t,r)}).catch(()=>{}),xg.set(e,r),e}function qN(r){if(Om.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Om.set(r,e)}let Pm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Om.get(r);if(e==="objectStoreNames")return r.objectStoreNames||nw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oa(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function FN(r){Pm=r(Pm)}function $N(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(gm(this),e,...t);return nw.set(s,e.sort?e.sort():[e]),oa(s)}:HN().includes(r)?function(...e){return r.apply(gm(this),e),oa(tw.get(this))}:function(...e){return oa(r.apply(gm(this),e))}}function YN(r){return typeof r=="function"?$N(r):(r instanceof IDBTransaction&&qN(r),zN(r,BN())?new Proxy(r,Pm):r)}function oa(r){if(r instanceof IDBRequest)return GN(r);if(mm.has(r))return mm.get(r);const e=YN(r);return e!==r&&(mm.set(r,e),xg.set(e,r)),e}const gm=r=>xg.get(r);function QN(r,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),p=oa(u);return s&&u.addEventListener("upgradeneeded",g=>{s(oa(u.result),g.oldVersion,g.newVersion,oa(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const KN=["get","getKey","getAll","getAllKeys","count"],XN=["put","add","delete","clear"],ym=new Map;function wx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ym.get(e))return ym.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=XN.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||KN.includes(t)))return;const l=async function(u,...p){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),a&&g.done]))[0]};return ym.set(e,l),l}FN(r=>({...r,get:(e,t,s)=>wx(e,t)||r.get(e,t,s),has:(e,t)=>!!wx(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WN(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function WN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mm="@firebase/app",Ex="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new bg("@firebase/app"),ZN="@firebase/app-compat",eC="@firebase/analytics-compat",tC="@firebase/analytics",nC="@firebase/app-check-compat",rC="@firebase/app-check",sC="@firebase/auth",iC="@firebase/auth-compat",aC="@firebase/database",oC="@firebase/data-connect",lC="@firebase/database-compat",cC="@firebase/functions",uC="@firebase/functions-compat",hC="@firebase/installations",dC="@firebase/installations-compat",fC="@firebase/messaging",pC="@firebase/messaging-compat",mC="@firebase/performance",gC="@firebase/performance-compat",yC="@firebase/remote-config",vC="@firebase/remote-config-compat",bC="@firebase/storage",xC="@firebase/storage-compat",_C="@firebase/firestore",wC="@firebase/ai",EC="@firebase/firestore-compat",TC="firebase",SC="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="[DEFAULT]",NC={[Mm]:"fire-core",[ZN]:"fire-core-compat",[tC]:"fire-analytics",[eC]:"fire-analytics-compat",[rC]:"fire-app-check",[nC]:"fire-app-check-compat",[sC]:"fire-auth",[iC]:"fire-auth-compat",[aC]:"fire-rtdb",[oC]:"fire-data-connect",[lC]:"fire-rtdb-compat",[cC]:"fire-fn",[uC]:"fire-fn-compat",[hC]:"fire-iid",[dC]:"fire-iid-compat",[fC]:"fire-fcm",[pC]:"fire-fcm-compat",[mC]:"fire-perf",[gC]:"fire-perf-compat",[yC]:"fire-rc",[vC]:"fire-rc-compat",[bC]:"fire-gcs",[xC]:"fire-gcs-compat",[_C]:"fire-fst",[EC]:"fire-fst-compat",[wC]:"fire-vertex","fire-js":"fire-js",[TC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new Map,CC=new Map,Vm=new Map;function Tx(r,e){try{r.container.addComponent(e)}catch(t){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function gl(r){const e=r.name;if(Vm.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,r);for(const t of id.values())Tx(t,r);for(const t of CC.values())Tx(t,r);return!0}function _g(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ur(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new tu("app","Firebase",AC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=SC;function rw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Lm,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw la.create("bad-app-name",{appName:String(a)});if(t||(t=J1()),!t)throw la.create("no-options");const l=id.get(a);if(l){if(no(t,l.options)&&no(s,l.config))return l;throw la.create("duplicate-app",{appName:a})}const u=new PN(a);for(const g of Vm.values())u.addComponent(g);const p=new RC(t,s,u);return id.set(a,p),p}function sw(r=Lm){const e=id.get(r);if(!e&&r===Lm&&J1())return rw();if(!e)throw la.create("no-app",{appName:r});return e}function ca(r,e,t){let s=NC[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(u.join(" "));return}gl(new ro(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="firebase-heartbeat-database",IC=1,qc="firebase-heartbeat-store";let vm=null;function iw(){return vm||(vm=QN(kC,IC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(qc)}catch(t){console.warn(t)}}}}).catch(r=>{throw la.create("idb-open",{originalErrorMessage:r.message})})),vm}async function DC(r){try{const t=(await iw()).transaction(qc),s=await t.objectStore(qc).get(aw(r));return await t.done,s}catch(e){if(e instanceof ai)ni.warn(e.message);else{const t=la.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ni.warn(t.message)}}}async function Sx(r,e){try{const s=(await iw()).transaction(qc,"readwrite");await s.objectStore(qc).put(e,aw(r)),await s.done}catch(t){if(t instanceof ai)ni.warn(t.message);else{const s=la.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ni.warn(s.message)}}}function aw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=1024,OC=30;class PC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Nx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>OC){const u=VC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ni.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Nx(),{heartbeatsToSend:s,unsentEntries:a}=MC(this._heartbeatsCache.heartbeats),l=sd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ni.warn(t),""}}}function Nx(){return new Date().toISOString().substring(0,10)}function MC(r,e=jC){const t=[];let s=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Cx(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Cx(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class LC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EN()?TN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await DC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Sx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Sx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Cx(r){return sd(JSON.stringify({version:2,heartbeats:r})).length}function VC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(r){gl(new ro("platform-logger",e=>new JN(e),"PRIVATE")),gl(new ro("heartbeat",e=>new PC(e),"PRIVATE")),ca(Mm,Ex,r),ca(Mm,Ex,"esm2020"),ca("fire-js","")}UC("");var zC="firebase",BC="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ca(zC,BC,"app");function ow(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HC=ow,lw=new tu("auth","Firebase",ow());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new bg("@firebase/auth");function GC(r,...e){ad.logLevel<=Ze.WARN&&ad.warn(`Auth (${Tl}): ${r}`,...e)}function Gh(r,...e){ad.logLevel<=Ze.ERROR&&ad.error(`Auth (${Tl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(r,...e){throw wg(r,...e)}function Ts(r,...e){return wg(r,...e)}function cw(r,e,t){const s={...HC(),[e]:t};return new tu("auth","Firebase",s).create(e,{appName:r.name})}function ei(r){return cw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wg(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return lw.create(r,...e)}function Re(r,e,...t){if(!r)throw wg(e,...t)}function Ws(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gh(e),new Error(e)}function ri(r,e){r||Ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function qC(){return Ax()==="http:"||Ax()==="https:"}function Ax(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qC()||bN()||"connection"in navigator)?navigator.onLine:!0}function $C(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,ri(t>e,"Short delay should be less than long delay!"),this.isMobile=gN()||xN()}get(){return FC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(r,e){ri(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KC=new ru(3e4,6e4);function ba(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function xa(r,e,t,s,a={}){return hw(r,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const p=nu({key:r.config.apiKey,...u}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return vN()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&El(r.emulatorConfig.host)&&(y.credentials="include"),uw.fetch()(await dw(r,r.config.apiHost,t,p),y)})}async function hw(r,e,t){r._canInitEmulator=!1;const s={...YC,...e};try{const a=new JC(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ih(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const p=l.ok?u.errorMessage:u.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(r,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Ih(r,"email-already-in-use",u);if(g==="USER_DISABLED")throw Ih(r,"user-disabled",u);const b=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw cw(r,b,y);ns(r,b)}}catch(a){if(a instanceof ai)throw a;ns(r,"network-request-failed",{message:String(a)})}}async function su(r,e,t,s,a={}){const l=await xa(r,e,t,s,a);return"mfaPendingCredential"in l&&ns(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function dw(r,e,t,s){const a=`${e}${t}?${s}`,l=r,u=l.config.emulator?Eg(r.config,a):`${r.config.apiScheme}://${a}`;return QC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function XC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ts(this.auth,"network-request-failed")),KC.get())})}}function Ih(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Ts(r,e,s);return a.customData._tokenResponse=t,a}function Rx(r){return r!==void 0&&r.enterprise!==void 0}class WC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return XC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZC(r,e){return xa(r,"GET","/v2/recaptchaConfig",ba(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(r,e){return xa(r,"POST","/v1/accounts:delete",e)}async function od(r,e){return xa(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tA(r,e=!1){const t=yn(r),s=await t.getIdToken(e),a=Tg(s);Re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Pc(bm(a.auth_time)),issuedAtTime:Pc(bm(a.iat)),expirationTime:Pc(bm(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function bm(r){return Number(r)*1e3}function Tg(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const a=K1(t);return a?JSON.parse(a):(Gh("Failed to decode base64 JWT payload"),null)}catch(a){return Gh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function kx(r){const e=Tg(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ai&&nA(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function nA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(r){var _;const e=r.auth,t=await r.getIdToken(),s=await Fc(r,od(e,{idToken:t}));Re(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?fw(a.providerUserInfo):[],u=iA(r.providerData,l),p=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(u!=null&&u.length),y=p?g:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new zm(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(r,b)}async function sA(r){const e=yn(r);await ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iA(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function fw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(r,e){const t=await hw(r,{},async()=>{const s=nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await dw(r,a,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&El(r.emulatorConfig.host)&&(g.credentials="include"),uw.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function oA(r,e){return xa(r,"POST","/v2/accounts:revokeToken",ba(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=kx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await aA(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new hl;return s&&(Re(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Re(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Re(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hl,this.toJSON())}_performRefresh(){return Ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Zr{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new rA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Fc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tA(this,e)}reload(){return sA(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ld(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ur(this.auth.app))return Promise.reject(ei(this.auth));const e=await this.getIdToken();return await Fc(this,eA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:R,providerData:V,stsTokenManager:$}=t;Re(_&&$,e,"internal-error");const Z=hl.fromJSON(this.name,$);Re(typeof _=="string",e,"internal-error"),Qi(s,e.name),Qi(a,e.name),Re(typeof T=="boolean",e,"internal-error"),Re(typeof R=="boolean",e,"internal-error"),Qi(l,e.name),Qi(u,e.name),Qi(p,e.name),Qi(g,e.name),Qi(y,e.name),Qi(b,e.name);const ae=new Zr({uid:_,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:R,photoURL:u,phoneNumber:l,tenantId:p,stsTokenManager:Z,createdAt:y,lastLoginAt:b});return V&&Array.isArray(V)&&(ae.providerData=V.map(de=>({...de}))),g&&(ae._redirectEventId=g),ae}static async _fromIdTokenResponse(e,t,s=!1){const a=new hl;a.updateFromServerResponse(t);const l=new Zr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await ld(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?fw(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),p=new hl;p.updateFromIdToken(s);const g=new Zr({uid:a.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new zm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new Map;function Zs(r){ri(r instanceof Function,"Expected a class definition");let e=Ix.get(r);return e?(ri(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ix.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pw.type="NONE";const Dx=pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r,e,t){return`firebase:${r}:${e}:${t}`}class dl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=qh(this.userKey,a.apiKey,l),this.fullPersistenceKey=qh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await od(this.auth,{idToken:e}).catch(()=>{});return t?Zr._fromGetAccountInfoResponse(this.auth,t,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new dl(Zs(Dx),e,s);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||Zs(Dx);const u=qh(s,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(u);if(b){let _;if(typeof b=="string"){const T=await od(e,{idToken:b}).catch(()=>{});if(!T)break;_=await Zr._fromGetAccountInfoResponse(e,T,b)}else _=Zr._fromJSON(e,b);y!==l&&(p=_),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new dl(l,e,s):(l=g[0],p&&await l._set(u,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new dl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xw(e))return"Blackberry";if(_w(e))return"Webos";if(gw(e))return"Safari";if((e.includes("chrome/")||yw(e))&&!e.includes("edge/"))return"Chrome";if(bw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function mw(r=zn()){return/firefox\//i.test(r)}function gw(r=zn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yw(r=zn()){return/crios\//i.test(r)}function vw(r=zn()){return/iemobile/i.test(r)}function bw(r=zn()){return/android/i.test(r)}function xw(r=zn()){return/blackberry/i.test(r)}function _w(r=zn()){return/webos/i.test(r)}function Sg(r=zn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function lA(r=zn()){var e;return Sg(r)&&!!((e=window.navigator)!=null&&e.standalone)}function cA(){return _N()&&document.documentMode===10}function ww(r=zn()){return Sg(r)||bw(r)||_w(r)||xw(r)||/windows phone/i.test(r)||vw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(r,e=[]){let t;switch(r){case"Browser":t=jx(zn());break;case"Worker":t=`${jx(zn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Tl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,p)=>{try{const g=e(l);u(g)}catch(g){p(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(r,e={}){return xa(r,"GET","/v2/passwordPolicy",ba(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=6;class fA{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??dA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ox(this),this.idTokenSubscription=new Ox(this),this.beforeStateQueue=new uA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zs(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await dl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await od(this,{idToken:e}),s=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ur(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,p=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===p)&&(g!=null&&g.user)&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ld(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$C()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ur(this.app))return Promise.reject(ei(this));const t=e?yn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ur(this.app)?Promise.reject(ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ur(this.app)?Promise.reject(ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hA(this),t=new fA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await oA(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zs(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[Zs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(p,this,"internal-error"),p.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ew(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Ur(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&GC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function po(r){return yn(r)}class Ox{constructor(e){this.auth=e,this.observer=null,this.addObserver=RN(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mA(r){kd=r}function Tw(r){return kd.loadJS(r)}function gA(){return kd.recaptchaEnterpriseScript}function yA(){return kd.gapiScript}function vA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class bA{constructor(){this.enterprise=new xA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class xA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const _A="recaptcha-enterprise",Sw="NO_RECAPTCHA";class wA{constructor(e){this.type=_A,this.auth=po(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,p)=>{ZC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new WC(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(g=>{p(g)})})}function a(l,u,p){const g=window.grecaptcha;Rx(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(Sw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bA().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(p=>{if(!t&&Rx(window.grecaptcha))a(p,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=gA();g.length!==0&&(g+=p),Tw(g).then(()=>{a(p,l,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function Px(r,e,t,s=!1,a=!1){const l=new wA(r);let u;if(a)u=Sw;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Bm(r,e,t,s,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Px(r,e,t,t==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await Px(r,e,t,t==="getOobCode");return s(r,p)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(r,e){const t=_g(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(no(l,e??{}))return a;ns(a,"already-initialized")}return t.initialize({options:e})}function TA(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Zs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function SA(r,e,t){const s=po(r);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=Nw(e),{host:u,port:p}=NA(e),g=p===null?"":`:${p}`,y={url:`${l}//${u}${g}/`},b=Object.freeze({host:u,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(no(y,s.config.emulator)&&no(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,El(u)?(Z1(`${l}//${u}${g}`),ew("Auth",!0)):CA()}function Nw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function NA(r){const e=Nw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:Mx(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:Mx(u)}}}function Mx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function CA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ws("not implemented")}_getIdTokenResponse(e){return Ws("not implemented")}_linkToIdToken(e,t){return Ws("not implemented")}_getReauthenticationResolver(e){return Ws("not implemented")}}async function AA(r,e){return xa(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(r,e){return su(r,"POST","/v1/accounts:signInWithPassword",ba(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(r,e){return su(r,"POST","/v1/accounts:signInWithEmailLink",ba(r,e))}async function IA(r,e){return su(r,"POST","/v1/accounts:signInWithEmailLink",ba(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Ng{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new $c(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new $c(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,t,"signInWithPassword",RA);case"emailLink":return kA(e,{email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,s,"signUpPassword",AA);case"emailLink":return IA(e,{idToken:t,email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(r,e){return su(r,"POST","/v1/accounts:signInWithIdp",ba(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="http://localhost";class so extends Ng{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ns("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new so(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:DA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OA(r){const e=Ac(Rc(r)).link,t=e?Ac(Rc(e)).deep_link_id:null,s=Ac(Rc(r)).deep_link_id;return(s?Ac(Rc(s)).link:null)||s||t||e||r}class Cg{constructor(e){const t=Ac(Rc(e)),s=t.apiKey??null,a=t.oobCode??null,l=jA(t.mode??null);Re(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=OA(e);try{return new Cg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.providerId=Sl.PROVIDER_ID}static credential(e,t){return $c._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Cg.parseLink(t);return Re(s,"argument-error"),$c._fromEmailAndCode(e,s.code,s.tenantId)}}Sl.PROVIDER_ID="password";Sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Cw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends iu{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Zi.credential(t,s)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends iu{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.GITHUB_SIGN_IN_METHOD="github.com";ea.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends iu{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ta.credential(t,s)}catch{return null}}}ta.TWITTER_SIGN_IN_METHOD="twitter.com";ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(r,e){return su(r,"POST","/v1/accounts:signUp",ba(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Zr._fromIdTokenResponse(e,s,a),u=Lx(s);return new io({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Lx(s);return new io({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Lx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends ai{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new cd(e,t,s,a)}}function Aw(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cd._fromErrorAndOperation(r,l,e,s):l})}async function MA(r,e,t=!1){const s=await Fc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return io._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(r,e,t=!1){const{auth:s}=r;if(Ur(s.app))return Promise.reject(ei(s));const a="reauthenticate";try{const l=await Fc(r,Aw(s,a,e,r),t);Re(l.idToken,s,"internal-error");const u=Tg(l.idToken);Re(u,s,"internal-error");const{sub:p}=u;return Re(r.uid===p,s,"user-mismatch"),io._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ns(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rw(r,e,t=!1){if(Ur(r.app))return Promise.reject(ei(r));const s="signIn",a=await Aw(r,s,e),l=await io._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(l.user),l}async function VA(r,e){return Rw(po(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(r){const e=po(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UA(r,e,t){if(Ur(r.app))return Promise.reject(ei(r));const s=po(r),u=await Bm(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PA).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&kw(r),g}),p=await io._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(p.user),p}function zA(r,e,t){return Ur(r.app)?Promise.reject(ei(r)):VA(yn(r),Sl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&kw(r),s})}function BA(r,e,t,s){return yn(r).onIdTokenChanged(e,t,s)}function HA(r,e,t){return yn(r).beforeAuthStateChanged(e,t)}function GA(r){return yn(r).signOut()}const ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ud,"1"),this.storage.removeItem(ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1e3,FA=10;class Dw extends Iw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ww(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,p,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);cA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,FA):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dw.type="LOCAL";const $A=Dw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw extends Iw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jw.type="SESSION";const Ow=jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Id(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const p=Array.from(u).map(async y=>y(t.origin,l)),g=await YA(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((p,g)=>{const y=Ag("",20);a.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(T.data.response);break;default:clearTimeout(b),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){return window}function KA(r){Ss().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function XA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function WA(){return Pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="firebaseLocalStorageDb",ZA=1,hd="firebaseLocalStorage",Lw="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dd(r,e){return r.transaction([hd],e?"readwrite":"readonly").objectStore(hd)}function eR(){const r=indexedDB.deleteDatabase(Mw);return new au(r).toPromise()}function Hm(){const r=indexedDB.open(Mw,ZA);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(hd,{keyPath:Lw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(hd)?e(s):(s.close(),await eR(),e(await Hm()))})})}async function Vx(r,e,t){const s=Dd(r,!0).put({[Lw]:e,value:t});return new au(s).toPromise()}async function tR(r,e){const t=Dd(r,!1).get(e),s=await new au(t).toPromise();return s===void 0?null:s.value}function Ux(r,e){const t=Dd(r,!0).delete(e);return new au(t).toPromise()}const nR=800,rR=3;class Vw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>rR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Id._getInstance(WA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await XA(),!this.activeServiceWorker)return;this.sender=new QA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hm();return await Vx(e,ud,"1"),await Ux(e,ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Vx(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>tR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ux(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Dd(a,!1).getAll();return new au(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vw.type="LOCAL";const sR=Vw;new ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(r,e){return e?Zs(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends Ng{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aR(r){return Rw(r.auth,new Rg(r),r.bypassAuthState)}function oR(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),LA(t,new Rg(r),r.bypassAuthState)}async function lR(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),MA(t,new Rg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:p}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aR;case"linkViaPopup":case"linkViaRedirect":return lR;case"reauthViaPopup":case"reauthViaRedirect":return oR;default:ns(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new ru(2e3,1e4);class cl extends Uw{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,cl.currentPopupAction&&cl.currentPopupAction.cancel(),cl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=Ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cR.get())};e()}}cl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="pendingRedirect",Fh=new Map;class hR extends Uw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const s=await dR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dR(r,e){const t=mR(e),s=pR(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function fR(r,e){Fh.set(r._key(),e)}function pR(r){return Zs(r._redirectPersistence)}function mR(r){return qh(uR,r.config.apiKey,r.name)}async function gR(r,e,t=!1){if(Ur(r.app))return Promise.reject(ei(r));const s=po(r),a=iR(s,e),u=await new hR(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=600*1e3;class vR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!zw(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ts(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yR&&this.cachedEventUids.clear(),this.cachedEventUids.has(zx(e))}saveEventToCache(e){this.cachedEventUids.add(zx(e)),this.lastProcessedEventTime=Date.now()}}function zx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function zw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(r,e={}){return xa(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wR=/^https?/;async function ER(r){if(r.config.emulator)return;const{authorizedDomains:e}=await xR(r);for(const t of e)try{if(TR(t))return}catch{}ns(r,"unauthorized-domain")}function TR(r){const e=Um(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!wR.test(t))return!1;if(_R.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new ru(3e4,6e4);function Bx(){const r=Ss().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function NR(r){return new Promise((e,t)=>{var a,l,u;function s(){Bx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bx(),t(Ts(r,"network-request-failed"))},timeout:SR.get()})}if((l=(a=Ss().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Ss().gapi)!=null&&u.load)s();else{const p=vA("iframefcb");return Ss()[p]=()=>{gapi.load?s():t(Ts(r,"network-request-failed"))},Tw(`${yA()}?onload=${p}`).catch(g=>t(g))}}).catch(e=>{throw $h=null,e})}let $h=null;function CR(r){return $h=$h||NR(r),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new ru(5e3,15e3),RR="__/auth/iframe",kR="emulator/auth/iframe",IR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jR(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Eg(e,kR):`https://${r.config.authDomain}/${RR}`,s={apiKey:e.apiKey,appName:r.name,v:Tl},a=DR.get(r.config.apiHost);a&&(s.eid=a);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${nu(s).slice(1)}`}async function OR(r){const e=await CR(r),t=Ss().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:jR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IR,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Ts(r,"network-request-failed"),p=Ss().setTimeout(()=>{l(u)},AR.get());function g(){Ss().clearTimeout(p),a(s)}s.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MR=500,LR=600,VR="_blank",UR="http://localhost";class Hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zR(r,e,t,s=MR,a=LR){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...PR,width:s.toString(),height:a.toString(),top:l,left:u},y=zn().toLowerCase();t&&(p=yw(y)?VR:t),mw(y)&&(e=e||UR,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[R,V])=>`${T}${R}=${V},`,"");if(lA(y)&&p!=="_self")return BR(e||"",p),new Hx(null);const _=window.open(e||"",p,b);Re(_,r,"popup-blocked");try{_.focus()}catch{}return new Hx(_)}function BR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="__/auth/handler",GR="emulator/auth/handler",qR=encodeURIComponent("fac");async function Gx(r,e,t,s,a,l){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Tl,eventId:a};if(e instanceof Cw){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",AN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))u[b]=_}if(e instanceof iu){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(u.scopes=b.join(","))}r.tenantId&&(u.tid=r.tenantId);const p=u;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await r._getAppCheckToken(),y=g?`#${qR}=${encodeURIComponent(g)}`:"";return`${FR(r)}?${nu(p).slice(1)}${y}`}function FR({config:r}){return r.emulator?Eg(r,GR):`https://${r.authDomain}/${HR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="webStorageSupport";class $R{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ow,this._completeRedirectFn=gR,this._overrideRedirectResult=fR}async _openPopup(e,t,s,a){var u;ri((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await Gx(e,t,s,Um(),a);return zR(e,l,Ag())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Gx(e,t,s,Um(),a);return KA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ri(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await OR(e),s=new vR(e);return t.register("authEvent",a=>(Re(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xm,{type:xm},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[xm];l!==void 0&&t(!!l),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ER(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ww()||gw()||Sg()}}const YR=$R;var qx="@firebase/auth",Fx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XR(r){gl(new ro("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=s.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ew(r)},y=new pA(s,a,l,g);return TA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),gl(new ro("auth-internal",e=>{const t=po(e.getProvider("auth").getImmediate());return(s=>new QR(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ca(qx,Fx,KR(r)),ca(qx,Fx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=300,WR=W1("authIdTokenMaxAge")||JR;let $x=null;const ZR=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>WR)return;const a=t==null?void 0:t.token;$x!==a&&($x=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function ek(r=sw()){const e=_g(r,"auth");if(e.isInitialized())return e.getImmediate();const t=EA(r,{popupRedirectResolver:YR,persistence:[sR,$A,Ow]}),s=W1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=ZR(l.toString());HA(t,u,()=>u(t.currentUser)),BA(t,p=>u(p))}}const a=X1("auth");return a&&SA(t,`http://${a}`),t}function tk(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}mA({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const l=Ts("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",tk().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XR("Browser");var Yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ua,Bw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function k(){}k.prototype=C.prototype,A.F=C.prototype,A.prototype=new k,A.prototype.constructor=A,A.D=function(L,j,O){for(var I=Array(arguments.length-2),it=2;it<arguments.length;it++)I[it-2]=arguments[it];return C.prototype[j].apply(L,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,C,k){k||(k=0);const L=Array(16);if(typeof C=="string")for(var j=0;j<16;++j)L[j]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(j=0;j<16;++j)L[j]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=A.g[0],k=A.g[1],j=A.g[2];let O=A.g[3],I;I=C+(O^k&(j^O))+L[0]+3614090360&4294967295,C=k+(I<<7&4294967295|I>>>25),I=O+(j^C&(k^j))+L[1]+3905402710&4294967295,O=C+(I<<12&4294967295|I>>>20),I=j+(k^O&(C^k))+L[2]+606105819&4294967295,j=O+(I<<17&4294967295|I>>>15),I=k+(C^j&(O^C))+L[3]+3250441966&4294967295,k=j+(I<<22&4294967295|I>>>10),I=C+(O^k&(j^O))+L[4]+4118548399&4294967295,C=k+(I<<7&4294967295|I>>>25),I=O+(j^C&(k^j))+L[5]+1200080426&4294967295,O=C+(I<<12&4294967295|I>>>20),I=j+(k^O&(C^k))+L[6]+2821735955&4294967295,j=O+(I<<17&4294967295|I>>>15),I=k+(C^j&(O^C))+L[7]+4249261313&4294967295,k=j+(I<<22&4294967295|I>>>10),I=C+(O^k&(j^O))+L[8]+1770035416&4294967295,C=k+(I<<7&4294967295|I>>>25),I=O+(j^C&(k^j))+L[9]+2336552879&4294967295,O=C+(I<<12&4294967295|I>>>20),I=j+(k^O&(C^k))+L[10]+4294925233&4294967295,j=O+(I<<17&4294967295|I>>>15),I=k+(C^j&(O^C))+L[11]+2304563134&4294967295,k=j+(I<<22&4294967295|I>>>10),I=C+(O^k&(j^O))+L[12]+1804603682&4294967295,C=k+(I<<7&4294967295|I>>>25),I=O+(j^C&(k^j))+L[13]+4254626195&4294967295,O=C+(I<<12&4294967295|I>>>20),I=j+(k^O&(C^k))+L[14]+2792965006&4294967295,j=O+(I<<17&4294967295|I>>>15),I=k+(C^j&(O^C))+L[15]+1236535329&4294967295,k=j+(I<<22&4294967295|I>>>10),I=C+(j^O&(k^j))+L[1]+4129170786&4294967295,C=k+(I<<5&4294967295|I>>>27),I=O+(k^j&(C^k))+L[6]+3225465664&4294967295,O=C+(I<<9&4294967295|I>>>23),I=j+(C^k&(O^C))+L[11]+643717713&4294967295,j=O+(I<<14&4294967295|I>>>18),I=k+(O^C&(j^O))+L[0]+3921069994&4294967295,k=j+(I<<20&4294967295|I>>>12),I=C+(j^O&(k^j))+L[5]+3593408605&4294967295,C=k+(I<<5&4294967295|I>>>27),I=O+(k^j&(C^k))+L[10]+38016083&4294967295,O=C+(I<<9&4294967295|I>>>23),I=j+(C^k&(O^C))+L[15]+3634488961&4294967295,j=O+(I<<14&4294967295|I>>>18),I=k+(O^C&(j^O))+L[4]+3889429448&4294967295,k=j+(I<<20&4294967295|I>>>12),I=C+(j^O&(k^j))+L[9]+568446438&4294967295,C=k+(I<<5&4294967295|I>>>27),I=O+(k^j&(C^k))+L[14]+3275163606&4294967295,O=C+(I<<9&4294967295|I>>>23),I=j+(C^k&(O^C))+L[3]+4107603335&4294967295,j=O+(I<<14&4294967295|I>>>18),I=k+(O^C&(j^O))+L[8]+1163531501&4294967295,k=j+(I<<20&4294967295|I>>>12),I=C+(j^O&(k^j))+L[13]+2850285829&4294967295,C=k+(I<<5&4294967295|I>>>27),I=O+(k^j&(C^k))+L[2]+4243563512&4294967295,O=C+(I<<9&4294967295|I>>>23),I=j+(C^k&(O^C))+L[7]+1735328473&4294967295,j=O+(I<<14&4294967295|I>>>18),I=k+(O^C&(j^O))+L[12]+2368359562&4294967295,k=j+(I<<20&4294967295|I>>>12),I=C+(k^j^O)+L[5]+4294588738&4294967295,C=k+(I<<4&4294967295|I>>>28),I=O+(C^k^j)+L[8]+2272392833&4294967295,O=C+(I<<11&4294967295|I>>>21),I=j+(O^C^k)+L[11]+1839030562&4294967295,j=O+(I<<16&4294967295|I>>>16),I=k+(j^O^C)+L[14]+4259657740&4294967295,k=j+(I<<23&4294967295|I>>>9),I=C+(k^j^O)+L[1]+2763975236&4294967295,C=k+(I<<4&4294967295|I>>>28),I=O+(C^k^j)+L[4]+1272893353&4294967295,O=C+(I<<11&4294967295|I>>>21),I=j+(O^C^k)+L[7]+4139469664&4294967295,j=O+(I<<16&4294967295|I>>>16),I=k+(j^O^C)+L[10]+3200236656&4294967295,k=j+(I<<23&4294967295|I>>>9),I=C+(k^j^O)+L[13]+681279174&4294967295,C=k+(I<<4&4294967295|I>>>28),I=O+(C^k^j)+L[0]+3936430074&4294967295,O=C+(I<<11&4294967295|I>>>21),I=j+(O^C^k)+L[3]+3572445317&4294967295,j=O+(I<<16&4294967295|I>>>16),I=k+(j^O^C)+L[6]+76029189&4294967295,k=j+(I<<23&4294967295|I>>>9),I=C+(k^j^O)+L[9]+3654602809&4294967295,C=k+(I<<4&4294967295|I>>>28),I=O+(C^k^j)+L[12]+3873151461&4294967295,O=C+(I<<11&4294967295|I>>>21),I=j+(O^C^k)+L[15]+530742520&4294967295,j=O+(I<<16&4294967295|I>>>16),I=k+(j^O^C)+L[2]+3299628645&4294967295,k=j+(I<<23&4294967295|I>>>9),I=C+(j^(k|~O))+L[0]+4096336452&4294967295,C=k+(I<<6&4294967295|I>>>26),I=O+(k^(C|~j))+L[7]+1126891415&4294967295,O=C+(I<<10&4294967295|I>>>22),I=j+(C^(O|~k))+L[14]+2878612391&4294967295,j=O+(I<<15&4294967295|I>>>17),I=k+(O^(j|~C))+L[5]+4237533241&4294967295,k=j+(I<<21&4294967295|I>>>11),I=C+(j^(k|~O))+L[12]+1700485571&4294967295,C=k+(I<<6&4294967295|I>>>26),I=O+(k^(C|~j))+L[3]+2399980690&4294967295,O=C+(I<<10&4294967295|I>>>22),I=j+(C^(O|~k))+L[10]+4293915773&4294967295,j=O+(I<<15&4294967295|I>>>17),I=k+(O^(j|~C))+L[1]+2240044497&4294967295,k=j+(I<<21&4294967295|I>>>11),I=C+(j^(k|~O))+L[8]+1873313359&4294967295,C=k+(I<<6&4294967295|I>>>26),I=O+(k^(C|~j))+L[15]+4264355552&4294967295,O=C+(I<<10&4294967295|I>>>22),I=j+(C^(O|~k))+L[6]+2734768916&4294967295,j=O+(I<<15&4294967295|I>>>17),I=k+(O^(j|~C))+L[13]+1309151649&4294967295,k=j+(I<<21&4294967295|I>>>11),I=C+(j^(k|~O))+L[4]+4149444226&4294967295,C=k+(I<<6&4294967295|I>>>26),I=O+(k^(C|~j))+L[11]+3174756917&4294967295,O=C+(I<<10&4294967295|I>>>22),I=j+(C^(O|~k))+L[2]+718787259&4294967295,j=O+(I<<15&4294967295|I>>>17),I=k+(O^(j|~C))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(j+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+j&4294967295,A.g[3]=A.g[3]+O&4294967295}s.prototype.v=function(A,C){C===void 0&&(C=A.length);const k=C-this.blockSize,L=this.C;let j=this.h,O=0;for(;O<C;){if(j==0)for(;O<=k;)a(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<C;)if(L[j++]=A.charCodeAt(O++),j==this.blockSize){a(this,L),j=0;break}}else for(;O<C;)if(L[j++]=A[O++],j==this.blockSize){a(this,L),j=0;break}}this.h=j,this.o+=C},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var k=A.length-8;k<A.length;++k)A[k]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,k=0;k<4;++k)for(let L=0;L<32;L+=8)A[C++]=this.g[k]>>>L&255;return A};function l(A,C){var k=p;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=C(A)}function u(A,C){this.h=C;const k=[];let L=!0;for(let j=A.length-1;j>=0;j--){const O=A[j]|0;L&&O==C||(k[j]=O,L=!1)}this.g=k}var p={};function g(A){return-128<=A&&A<128?l(A,function(C){return new u([C|0],C<0?-1:0)}):new u([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return _;if(A<0)return Z(y(-A));const C=[];let k=1;for(let L=0;A>=k;L++)C[L]=A/k|0,k*=4294967296;return new u(C,0)}function b(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return Z(b(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=y(Math.pow(C,8));let L=_;for(let O=0;O<A.length;O+=8){var j=Math.min(8,A.length-O);const I=parseInt(A.substring(O,O+j),C);j<8?(j=y(Math.pow(C,j)),L=L.j(j).add(y(I))):(L=L.j(k),L=L.add(y(I)))}return L}var _=g(0),T=g(1),R=g(16777216);r=u.prototype,r.m=function(){if($(this))return-Z(this).m();let A=0,C=1;for(let k=0;k<this.g.length;k++){const L=this.i(k);A+=(L>=0?L:4294967296+L)*C,C*=4294967296}return A},r.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if($(this))return"-"+Z(this).toString(A);const C=y(Math.pow(A,6));var k=this;let L="";for(;;){const j=ye(k,C).g;k=ae(k,j.j(C));let O=((k.g.length>0?k.g[0]:k.h)>>>0).toString(A);if(k=j,V(k))return O+L;for(;O.length<6;)O="0"+O;L=O+L}},r.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function $(A){return A.h==-1}r.l=function(A){return A=ae(this,A),$(A)?-1:V(A)?0:1};function Z(A){const C=A.g.length,k=[];for(let L=0;L<C;L++)k[L]=~A.g[L];return new u(k,~A.h).add(T)}r.abs=function(){return $(this)?Z(this):this},r.add=function(A){const C=Math.max(this.g.length,A.g.length),k=[];let L=0;for(let j=0;j<=C;j++){let O=L+(this.i(j)&65535)+(A.i(j)&65535),I=(O>>>16)+(this.i(j)>>>16)+(A.i(j)>>>16);L=I>>>16,O&=65535,I&=65535,k[j]=I<<16|O}return new u(k,k[k.length-1]&-2147483648?-1:0)};function ae(A,C){return A.add(Z(C))}r.j=function(A){if(V(this)||V(A))return _;if($(this))return $(A)?Z(this).j(Z(A)):Z(Z(this).j(A));if($(A))return Z(this.j(Z(A)));if(this.l(R)<0&&A.l(R)<0)return y(this.m()*A.m());const C=this.g.length+A.g.length,k=[];for(var L=0;L<2*C;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(let j=0;j<A.g.length;j++){const O=this.i(L)>>>16,I=this.i(L)&65535,it=A.i(j)>>>16,yt=A.i(j)&65535;k[2*L+2*j]+=I*yt,de(k,2*L+2*j),k[2*L+2*j+1]+=O*yt,de(k,2*L+2*j+1),k[2*L+2*j+1]+=I*it,de(k,2*L+2*j+1),k[2*L+2*j+2]+=O*it,de(k,2*L+2*j+2)}for(A=0;A<C;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=C;A<2*C;A++)k[A]=0;return new u(k,0)};function de(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function me(A,C){this.g=A,this.h=C}function ye(A,C){if(V(C))throw Error("division by zero");if(V(A))return new me(_,_);if($(A))return C=ye(Z(A),C),new me(Z(C.g),Z(C.h));if($(C))return C=ye(A,Z(C)),new me(Z(C.g),C.h);if(A.g.length>30){if($(A)||$(C))throw Error("slowDivide_ only works with positive integers.");for(var k=T,L=C;L.l(A)<=0;)k=De(k),L=De(L);var j=Te(k,1),O=Te(L,1);for(L=Te(L,2),k=Te(k,2);!V(L);){var I=O.add(L);I.l(A)<=0&&(j=j.add(k),O=I),L=Te(L,1),k=Te(k,1)}return C=ae(A,j.j(C)),new me(j,C)}for(j=_;A.l(C)>=0;){for(k=Math.max(1,Math.floor(A.m()/C.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),O=y(k),I=O.j(C);$(I)||I.l(A)>0;)k-=L,O=y(k),I=O.j(C);V(O)&&(O=T),j=j.add(O),A=ae(A,I)}return new me(j,A)}r.B=function(A){return ye(this,A).h},r.and=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let L=0;L<C;L++)k[L]=this.i(L)&A.i(L);return new u(k,this.h&A.h)},r.or=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let L=0;L<C;L++)k[L]=this.i(L)|A.i(L);return new u(k,this.h|A.h)},r.xor=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let L=0;L<C;L++)k[L]=this.i(L)^A.i(L);return new u(k,this.h^A.h)};function De(A){const C=A.g.length+1,k=[];for(let L=0;L<C;L++)k[L]=A.i(L)<<1|A.i(L-1)>>>31;return new u(k,A.h)}function Te(A,C){const k=C>>5;C%=32;const L=A.g.length-k,j=[];for(let O=0;O<L;O++)j[O]=C>0?A.i(O+k)>>>C|A.i(O+k+1)<<32-C:A.i(O+k);return new u(j,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Bw=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,ua=u}).apply(typeof Yx<"u"?Yx:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hw,kc,Gw,Yh,Gm,qw,Fw,$w;(function(){var r,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var v=0;v<d.length;++v){var w=d[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function a(d,v){if(v)e:{var w=s;d=d.split(".");for(var N=0;N<d.length-1;N++){var B=d[N];if(!(B in w))break e;w=w[B]}d=d[d.length-1],N=w[d],v=v(N),v!=N&&v!=null&&e(w,d,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(v){var w=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&w.push([N,v[N]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,w){return d.call.apply(d.bind,arguments)}function y(d,v,w){return y=g,y.apply(null,arguments)}function b(d,v){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function _(d,v){function w(){}w.prototype=v.prototype,d.Z=v.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(N,B,F){for(var le=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)le[Ue-2]=arguments[Ue];return v.prototype[B].apply(N,le)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function R(d){const v=d.length;if(v>0){const w=Array(v);for(let N=0;N<v;N++)w[N]=d[N];return w}return[]}function V(d,v){for(let N=1;N<arguments.length;N++){const B=arguments[N];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=d.length||0;const F=B.length||0;d.length=w+F;for(let le=0;le<F;le++)d[w+le]=B[le]}else d.push(B)}}class ${constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Z(d){u.setTimeout(()=>{throw d},0)}function ae(){var d=A;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class de{constructor(){this.h=this.g=null}add(v,w){const N=me.get();N.set(v,w),this.h?this.h.next=N:this.g=N,this.h=N}}var me=new $(()=>new ye,d=>d.reset());class ye{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let De,Te=!1,A=new de,C=()=>{const d=Promise.resolve(void 0);De=()=>{d.then(k)}};function k(){for(var d;d=ae();){try{d.h.call(d.g)}catch(w){Z(w)}var v=me;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}Te=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};u.addEventListener("test",w,v),u.removeEventListener("test",w,v)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function it(d,v){j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}_(it,j),it.prototype.init=function(d,v){const w=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(w=="mouseover"?v=d.fromElement:w=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function oe(d,v,w,N,B){this.listener=d,this.proxy=null,this.src=v,this.type=w,this.capture=!!N,this.ha=B,this.key=++Q,this.da=this.fa=!1}function we(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Be(d,v,w){for(const N in d)v.call(w,d[N],N,d)}function at(d,v){for(const w in d)v.call(void 0,d[w],w,d)}function P(d){const v={};for(const w in d)v[w]=d[w];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(d,v){let w,N;for(let B=1;B<arguments.length;B++){N=arguments[B];for(w in N)d[w]=N[w];for(let F=0;F<W.length;F++)w=W[F],Object.prototype.hasOwnProperty.call(N,w)&&(d[w]=N[w])}}function ue(d){this.src=d,this.g={},this.h=0}ue.prototype.add=function(d,v,w,N,B){const F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);const le=Ie(d,v,N,B);return le>-1?(v=d[le],w||(v.fa=!1)):(v=new oe(v,this.src,F,!!N,B),v.fa=w,d.push(v)),v};function Se(d,v){const w=v.type;if(w in d.g){var N=d.g[w],B=Array.prototype.indexOf.call(N,v,void 0),F;(F=B>=0)&&Array.prototype.splice.call(N,B,1),F&&(we(v),d.g[w].length==0&&(delete d.g[w],d.h--))}}function Ie(d,v,w,N){for(let B=0;B<d.length;++B){const F=d[B];if(!F.da&&F.listener==v&&F.capture==!!w&&F.ha==N)return B}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),Pt={};function $e(d,v,w,N,B){if(Array.isArray(v)){for(let F=0;F<v.length;F++)$e(d,v[F],w,N,B);return null}return w=Xe(w),d&&d[yt]?d.J(v,w,p(N)?!!N.capture:!1,B):Br(d,v,w,!1,N,B)}function Br(d,v,w,N,B,F){if(!v)throw Error("Invalid event type");const le=p(B)?!!B.capture:!!B;let Ue=se(d);if(Ue||(d[Pe]=Ue=new ue(d)),w=Ue.add(v,w,N,le,F),w.proxy)return w;if(N=ss(),w.proxy=N,N.src=d,N.listener=w,d.addEventListener)O||(B=le),B===void 0&&(B=!1),d.addEventListener(v.toString(),N,B);else if(d.attachEvent)d.attachEvent(ar(v.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ss(){function d(w){return v.call(d.src,d.listener,w)}const v=Is;return d}function is(d,v,w,N,B){if(Array.isArray(v))for(var F=0;F<v.length;F++)is(d,v[F],w,N,B);else N=p(N)?!!N.capture:!!N,w=Xe(w),d&&d[yt]?(d=d.i,F=String(v).toString(),F in d.g&&(v=d.g[F],w=Ie(v,w,N,B),w>-1&&(we(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete d.g[F],d.h--)))):d&&(d=se(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Ie(v,w,N,B)),(w=d>-1?v[d]:null)&&ks(w))}function ks(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[yt])Se(v.i,d);else{var w=d.type,N=d.proxy;v.removeEventListener?v.removeEventListener(w,N,d.capture):v.detachEvent?v.detachEvent(ar(w),N):v.addListener&&v.removeListener&&v.removeListener(N),(w=se(v))?(Se(w,d),w.h==0&&(w.src=null,v[Pe]=null)):we(d)}}}function ar(d){return d in Pt?Pt[d]:Pt[d]="on"+d}function Is(d,v){if(d.da)d=!0;else{v=new it(v,this);const w=d.listener,N=d.ha||d.src;d.fa&&ks(d),d=w.call(N,v)}return d}function se(d){return d=d[Pe],d instanceof ue?d:null}var pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xe(d){return typeof d=="function"?d:(d[pe]||(d[pe]=function(v){return d.handleEvent(v)}),d[pe])}function Ge(){L.call(this),this.i=new ue(this),this.M=this,this.G=null}_(Ge,L),Ge.prototype[yt]=!0,Ge.prototype.removeEventListener=function(d,v,w,N){is(this,d,v,w,N)};function Fe(d,v){var w,N=d.G;if(N)for(w=[];N;N=N.G)w.push(N);if(d=d.M,N=v.type||v,typeof v=="string")v=new j(v,d);else if(v instanceof j)v.target=v.target||d;else{var B=v;v=new j(N,d),ce(v,B)}B=!0;let F,le;if(w)for(le=w.length-1;le>=0;le--)F=v.g=w[le],B=Mt(F,N,!0,v)&&B;if(F=v.g=d,B=Mt(F,N,!0,v)&&B,B=Mt(F,N,!1,v)&&B,w)for(le=0;le<w.length;le++)F=v.g=w[le],B=Mt(F,N,!1,v)&&B}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const w=d.g[v];for(let N=0;N<w.length;N++)we(w[N]);delete d.g[v],d.h--}}this.G=null},Ge.prototype.J=function(d,v,w,N){return this.i.add(String(d),v,!1,w,N)},Ge.prototype.K=function(d,v,w,N){return this.i.add(String(d),v,!0,w,N)};function Mt(d,v,w,N){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let B=!0;for(let F=0;F<v.length;++F){const le=v[F];if(le&&!le.da&&le.capture==w){const Ue=le.listener,Kt=le.ha||le.src;le.fa&&Se(d.i,le),B=Ue.call(Kt,N)!==!1&&B}}return B&&!N.defaultPrevented}function qe(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(d,v||0)}function hn(d){d.g=qe(()=>{d.g=null,d.i&&(d.i=!1,hn(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Zt extends L{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:hn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bn(d){L.call(this),this.h=d,this.g={}}_(Bn,L);var as=[];function Hr(d){Be(d.g,function(v,w){this.g.hasOwnProperty(w)&&ks(v)},d),d.g={}}Bn.prototype.N=function(){Bn.Z.N.call(this),Hr(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var os=u.JSON.stringify,li=u.JSON.parse,vo=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function ci(){}function ui(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vt(){j.call(this,"d")}_(vt,j);function en(){j.call(this,"c")}_(en,j);var Ee={},vn=null;function hi(){return vn=vn||new Ge}Ee.Ia="serverreachability";function ls(d){j.call(this,Ee.Ia,d)}_(ls,j);function bn(d){const v=hi();Fe(v,new ls(v))}Ee.STAT_EVENT="statevent";function _r(d,v){j.call(this,Ee.STAT_EVENT,d),this.stat=v}_(_r,j);function Ct(d){const v=hi();Fe(v,new _r(v,d))}Ee.Ja="timingevent";function dn(d,v){j.call(this,Ee.Ja,d),this.size=v}_(dn,j);function wr(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function In(){this.g=!0}In.prototype.ua=function(){this.g=!1};function bo(d,v,w,N,B,F){d.info(function(){if(d.g)if(F){var le="",Ue=F.split("&");for(let ut=0;ut<Ue.length;ut++){var Kt=Ue[ut].split("=");if(Kt.length>1){const jt=Kt[0];Kt=Kt[1];const kr=jt.split("_");le=kr.length>=2&&kr[1]=="type"?le+(jt+"="+Kt+"&"):le+(jt+"=redacted&")}}}else le=null;else le=F;return"XMLHTTP REQ ("+N+") [attempt "+B+"]: "+v+`
`+w+`
`+le})}function di(d,v,w,N,B,F,le){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+B+"]: "+v+`
`+w+`
`+F+" "+le})}function or(d,v,w,N){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ta(d,w)+(N?" "+N:"")})}function Ds(d,v){d.info(function(){return"TIMEOUT: "+v})}In.prototype.info=function(){};function Ta(d,v){if(!d.g)return v;if(!v)return null;try{const F=JSON.parse(v);if(F){for(d=0;d<F.length;d++)if(Array.isArray(F[d])){var w=F[d];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var B=N[0];if(B!="noop"&&B!="stop"&&B!="close")for(let le=1;le<N.length;le++)N[le]=""}}}}return os(F)}catch{return v}}var Gr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},be;function cs(){}_(cs,ci),cs.prototype.g=function(){return new XMLHttpRequest},be=new cs;function qr(d){return encodeURIComponent(String(d))}function Sa(d){var v=1;d=d.split(":");const w=[];for(;v>0&&d.length;)w.push(d.shift()),v--;return d.length&&w.push(d.join(":")),w}function lr(d,v,w,N){this.j=d,this.i=v,this.l=w,this.S=N||1,this.V=new Bn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var It={},Ht={};function Er(d,v,w){d.M=1,d.A=Lt(Dt(v)),d.u=w,d.R=!0,fi(d,null)}function fi(d,v){d.F=Date.now(),cr(d),d.B=Dt(d.A);var w=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),qn(w.i,"t",N),d.C=0,w=d.j.L,d.h=new Xn,d.g=Eu(d.j,w?v:null,!d.u),d.P>0&&(d.O=new Zt(y(d.Y,d,d.g),d.P)),v=d.V,w=d.g,N=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(as[0]=B.toString()),B=as);for(let F=0;F<B.length;F++){const le=$e(w,B[F],N||v.handleEvent,!1,v.h||v);if(!le)break;v.g[le.key]=le}v=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),bn(),bo(d.i,d.v,d.B,d.l,d.S,d.u)}lr.prototype.ba=function(d){d=d.target;const v=this.O;v&&Yr(d)==3?v.j():this.Y(d)},lr.prototype.Y=function(d){try{if(d==this.g)e:{const Ue=Yr(this.g),Kt=this.g.ya(),ut=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||Ue!=4||Kt==7||(Kt==8||ut<=0?bn(3):bn(2)),ur(this);var v=this.g.ca();this.X=v;var w=pi(this);if(this.o=v==200,di(this.i,this.v,this.B,this.l,this.S,Ue,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,B=this.g;if((N=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var F=N;break t}}F=null}if(d=F)or(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tr(this,d);else{this.o=!1,this.m=3,Ct(12),Dn(this),Hn(this);break e}}if(this.R){d=!0;let jt;for(;!this.K&&this.C<w.length;)if(jt=xo(this,w),jt==Ht){Ue==4&&(this.m=4,Ct(14),d=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==It){this.m=4,Ct(15),or(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else or(this.i,this.l,jt,null),Tr(this,jt);if(Na(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||w.length!=0||this.h.h||(this.m=1,Ct(16),d=!1),this.o=this.o&&d,!d)or(this.i,this.l,w,"[Invalid Chunked Response]"),Dn(this),Hn(this);else if(w.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Ml(le),le.P=!0,Ct(11))}}else or(this.i,this.l,w,null),Tr(this,w);Ue==4&&Dn(this),this.o&&!this.K&&(Ue==4?bu(this.j,this):(this.o=!1,cr(this)))}else Ps(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Dn(this),Hn(this)}}}catch{}finally{}};function pi(d){if(!Na(d))return d.g.la();const v=xn(d.g);if(v==="")return"";let w="";const N=v.length,B=Yr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Dn(d),Hn(d),"";d.h.i=new u.TextDecoder}for(let F=0;F<N;F++)d.h.h=!0,w+=d.h.i.decode(v[F],{stream:!(B&&F==N-1)});return v.length=0,d.h.g+=w,d.C=0,d.h.g}function Na(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function xo(d,v){var w=d.C,N=v.indexOf(`
`,w);return N==-1?Ht:(w=Number(v.substring(w,N)),isNaN(w)?It:(N+=1,N+w>v.length?Ht:(v=v.slice(N,N+w),d.C=N+w,v)))}lr.prototype.cancel=function(){this.K=!0,Dn(this)};function cr(d){d.T=Date.now()+d.H,js(d,d.H)}function js(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=wr(y(d.aa,d),v)}function ur(d){d.D&&(u.clearTimeout(d.D),d.D=null)}lr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ds(this.i,this.B),this.M!=2&&(bn(),Ct(17)),Dn(this),this.m=2,Hn(this)):js(this,this.T-d)};function Hn(d){d.j.I==0||d.K||bu(d.j,d)}function Dn(d){ur(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,Hr(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function Tr(d,v){try{var w=d.j;if(w.I!=0&&(w.g==d||Nr(w.h,d))){if(!d.L&&Nr(w.h,d)&&w.I==3){try{var N=w.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var B=N;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)No(w),Ti(w);else break e;Oa(w),Ct(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=wr(y(w.Va,w),6e3));Sr(w.h)<=1&&w.ta&&(w.ta=void 0)}else gs(w,11)}else if((d.L||w.g==d)&&No(w),!I(v))for(B=w.Ba.g.parse(v),v=0;v<B.length;v++){let ut=B[v];const jt=ut[0];if(!(jt<=w.K))if(w.K=jt,ut=ut[1],w.I==2)if(ut[0]=="c"){w.M=ut[1],w.ba=ut[2];const kr=ut[3];kr!=null&&(w.ka=kr,w.j.info("VER="+w.ka));const ys=ut[4];ys!=null&&(w.za=ys,w.j.info("SVER="+w.za));const Qr=ut[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(N=1.5*Qr,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Kr=d.g;if(Kr){const Pa=Kr.g?Kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var F=N.h;F.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Cr(F,F.h),F.h=null))}if(N.G){const Co=Kr.g?Kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(N.wa=Co,nt(N.J,N.G,Co))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var le=d;if(N.na=wu(N,N.L?N.ba:null,N.W),le.L){us(N.h,le);var Ue=le,Kt=N.O;Kt&&(Ue.H=Kt),Ue.D&&(ur(Ue),cr(Ue)),N.g=le}else yu(N);w.i.length>0&&ms(w)}else ut[0]!="stop"&&ut[0]!="close"||gs(w,7);else w.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?gs(w,7):Ol(w):ut[0]!="noop"&&w.l&&w.l.qa(ut),w.A=0)}}bn(4)}catch{}}var Gt=class{constructor(d,v){this.g=d,this.map=v}};function mi(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ca(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Sr(d){return d.h?1:d.g?d.g.size:0}function Nr(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Cr(d,v){d.g?d.g.add(v):d.h=v}function us(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}mi.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function gi(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const w of d.g.values())v=v.concat(w.G);return v}return R(d.i)}var _o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gn(d,v){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const N=d[w].indexOf("=");let B,F=null;N>=0?(B=d[w].substring(0,N),F=d[w].substring(N+1)):B=d[w],v(B,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function tn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof tn?(this.l=d.l,qt(this,d.j),this.o=d.o,this.g=d.g,Jn(this,d.u),this.h=d.h,yi(this,mu(d.i)),this.m=d.m):d&&(v=String(d).match(_o))?(this.l=!1,qt(this,v[1]||"",!0),this.o=hr(v[2]||""),this.g=hr(v[3]||"",!0),Jn(this,v[4]),this.h=hr(v[5]||"",!0),yi(this,v[6]||"",!0),this.m=hr(v[7]||"")):(this.l=!1,this.i=new U(null,this.l))}tn.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(hs(v,vi,!0),":");var w=this.g;return(w||v=="file")&&(d.push("//"),(v=this.o)&&d.push(hs(v,vi,!0),"@"),d.push(qr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(hs(w,w.charAt(0)=="/"?bi:Aa,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",hs(w,X)),d.join("")},tn.prototype.resolve=function(d){const v=Dt(this);let w=!!d.j;w?qt(v,d.j):w=!!d.o,w?v.o=d.o:w=!!d.g,w?v.g=d.g:w=d.u!=null;var N=d.h;if(w)Jn(v,d.u);else if(w=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var B=v.h.lastIndexOf("/");B!=-1&&(N=v.h.slice(0,B+1)+N)}if(B=N,B==".."||B==".")N="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){N=B.lastIndexOf("/",0)==0,B=B.split("/");const F=[];for(let le=0;le<B.length;){const Ue=B[le++];Ue=="."?N&&le==B.length&&F.push(""):Ue==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),N&&le==B.length&&F.push("")):(F.push(Ue),N=!0)}N=F.join("/")}else N=B}return w?v.h=N:w=d.i.toString()!=="",w?yi(v,mu(d.i)):w=!!d.m,w&&(v.m=d.m),v};function Dt(d){return new tn(d)}function qt(d,v,w){d.j=w?hr(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Jn(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function yi(d,v,w){v instanceof U?(d.i=v,wo(d.i,d.l)):(w||(v=hs(v,E)),d.i=new U(v,d.l))}function nt(d,v,w){d.i.set(v,w)}function Lt(d){return nt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function hr(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function hs(d,v,w){return typeof d=="string"?(d=encodeURI(d).replace(v,jn),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function jn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var vi=/[#\/\?@]/g,Aa=/[#\?:]/g,bi=/[#\?]/g,E=/[#\?@]/g,X=/#/g;function U(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function ne(d){d.g||(d.g=new Map,d.h=0,d.i&&Gn(d.i,function(v,w){d.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}r=U.prototype,r.add=function(d,v){ne(this),this.i=null,d=xi(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(v),this.h+=1,this};function he(d,v){ne(d),v=xi(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function je(d,v){return ne(d),v=xi(d,v),d.g.has(v)}r.forEach=function(d,v){ne(this),this.g.forEach(function(w,N){w.forEach(function(B){d.call(v,B,N,this)},this)},this)};function St(d,v){ne(d);let w=[];if(typeof v=="string")je(d,v)&&(w=w.concat(d.g.get(xi(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)w=w.concat(d[v]);return w}r.set=function(d,v){return ne(this),this.i=null,d=xi(this,d),je(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},r.get=function(d,v){return d?(d=St(this,d),d.length>0?String(d[0]):v):v};function qn(d,v,w){he(d,v),w.length>0&&(d.i=null,d.g.set(xi(d,v),R(w)),d.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var w=v[N];const B=qr(w);w=St(this,w);for(let F=0;F<w.length;F++){let le=B;w[F]!==""&&(le+="="+qr(w[F])),d.push(le)}}return this.i=d.join("&")};function mu(d){const v=new U;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function xi(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function wo(d,v){v&&!d.j&&(ne(d),d.i=null,d.g.forEach(function(w,N){const B=N.toLowerCase();N!=B&&(he(this,N),qn(this,B,w))},d)),d.j=v}function Fr(d,v){const w=new In;if(u.Image){const N=new Image;N.onload=b(Ar,w,"TestLoadImage: loaded",!0,v,N),N.onerror=b(Ar,w,"TestLoadImage: error",!1,v,N),N.onabort=b(Ar,w,"TestLoadImage: abort",!1,v,N),N.ontimeout=b(Ar,w,"TestLoadImage: timeout",!1,v,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else v(!1)}function Il(d,v){const w=new In,N=new AbortController,B=setTimeout(()=>{N.abort(),Ar(w,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:N.signal}).then(F=>{clearTimeout(B),F.ok?Ar(w,"TestPingServer: ok",!0,v):Ar(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),Ar(w,"TestPingServer: error",!1,v)})}function Ar(d,v,w,N,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),N(w)}catch{}}function _i(){this.g=new vo}function ds(d){this.i=d.Sb||null,this.h=d.ab||!1}_(ds,ci),ds.prototype.g=function(){return new Ra(this.i,this.h)};function Ra(d,v){Ge.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ra,Ge),r=Ra.prototype,r.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,$r(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Eo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Eo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?wi(this):$r(this),this.readyState==3&&Eo(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,wi(this))},r.Na=function(d){this.g&&(this.response=d,wi(this))},r.ga=function(){this.g&&wi(this)};function wi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,$r(d)}r.setRequestHeader=function(d,v){this.A.append(d,v)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=v.next();return d.join(`\r
`)};function $r(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Rr(d){let v="";return Be(d,function(w,N){v+=N,v+=":",v+=w,v+=`\r
`}),v}function ka(d,v,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=Rr(w),typeof d=="string"?w!=null&&qr(w):nt(d,v,w))}function bt(d){Ge.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(bt,Ge);var fs=/^https?$/i,Dl=["POST","PUT"];r=bt.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,v,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():be.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(F){Ia(this,F);return}if(d=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var B in N)w.set(B,N[B]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())w.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(F=>F.toLowerCase()=="content-type"),B=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Dl,v,void 0)>=0)||N||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,le]of w)this.g.setRequestHeader(F,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(F){Ia(this,F)}};function Ia(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,jl(d),Os(d)}function jl(d){d.A||(d.A=!0,Fe(d,"complete"),Fe(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Fe(this,"complete"),Fe(this,"abort"),Os(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Os(this,!0)),bt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Da(this):this.Xa())},r.Xa=function(){Da(this)};function Da(d){if(d.h&&typeof l<"u"){if(d.v&&Yr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Fe(d,"readystatechange"),Yr(d)==4){d.h=!1;try{const F=d.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var N;if(N=F===0){let le=String(d.D).match(_o)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),N=!fs.test(le?le.toLowerCase():"")}w=N}if(w)Fe(d,"complete"),Fe(d,"success");else{d.o=6;try{var B=Yr(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",jl(d)}}finally{Os(d)}}}}function Os(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,v||Fe(d,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Yr(d){return d.g?d.g.readyState:0}r.ca=function(){try{return Yr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),li(v)}};function xn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ps(d){const v={};d=(d.g&&Yr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(I(d[N]))continue;var w=Sa(d[N]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const F=v[B]||[];v[B]=F,F.push(w)}at(v,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(d,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||v}function Ei(d){this.za=0,this.i=[],this.j=new In,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ps("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ps("baseRetryDelayMs",5e3,d),this.Za=ps("retryDelaySeedMs",1e4,d),this.Ta=ps("forwardChannelMaxRetries",2,d),this.va=ps("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new mi(d&&d.concurrentRequestLimit),this.Ba=new _i,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ei.prototype,r.ka=8,r.I=1,r.connect=function(d,v,w,N){Ct(0),this.W=d,this.H=v||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=wu(this,null,this.W),ms(this)};function Ol(d){if(To(d),d.I==3){var v=d.V++,w=Dt(d.J);if(nt(w,"SID",d.M),nt(w,"RID",v),nt(w,"TYPE","terminate"),ja(d,w),v=new lr(d,d.j,v),v.M=2,v.A=Lt(Dt(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=v.A,w=!0),w||(v.g=Eu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),cr(v)}_u(d)}function Ti(d){d.g&&(Ml(d),d.g.cancel(),d.g=null)}function To(d){Ti(d),d.v&&(u.clearTimeout(d.v),d.v=null),No(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ms(d){if(!Ca(d.h)&&!d.m){d.m=!0;var v=d.Ea;De||C(),Te||(De(),Te=!0),A.add(v,d),d.D=0}}function So(d,v){return Sr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=wr(y(d.Ea,d,v),xu(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new lr(this,this.j,d);let F=this.o;if(this.U&&(F?(F=P(F),ce(F,this.U)):F=this.U),this.u!==null||this.R||(B.J=F,F=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=gu(this,B,v),w=Dt(this.J),nt(w,"RID",d),nt(w,"CVER",22),this.G&&nt(w,"X-HTTP-Session-Id",this.G),ja(this,w),F&&(this.R?v="headers="+qr(Rr(F))+"&"+v:this.u&&ka(w,this.u,F)),Cr(this.h,B),this.Ra&&nt(w,"TYPE","init"),this.S?(nt(w,"$req",v),nt(w,"SID","null"),B.U=!0,Er(B,w,null)):Er(B,w,v),this.I=2}}else this.I==3&&(d?Pl(this,d):this.i.length==0||Ca(this.h)||Pl(this))};function Pl(d,v){var w;v?w=v.l:w=d.V++;const N=Dt(d.J);nt(N,"SID",d.M),nt(N,"RID",w),nt(N,"AID",d.K),ja(d,N),d.u&&d.o&&ka(N,d.u,d.o),w=new lr(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),v&&(d.i=v.G.concat(d.i)),v=gu(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Cr(d.h,w),Er(w,N,v)}function ja(d,v){d.H&&Be(d.H,function(w,N){nt(v,N,w)}),d.l&&Be({},function(w,N){nt(v,N,w)})}function gu(d,v,w){w=Math.min(d.i.length,w);const N=d.l?y(d.l.Ka,d.l,d):null;e:{var B=d.i;let Ue=-1;for(;;){const Kt=["count="+w];Ue==-1?w>0?(Ue=B[0].g,Kt.push("ofs="+Ue)):Ue=0:Kt.push("ofs="+Ue);let ut=!0;for(let jt=0;jt<w;jt++){var F=B[jt].g;const kr=B[jt].map;if(F-=Ue,F<0)Ue=Math.max(0,B[jt].g-100),ut=!1;else try{F="req"+F+"_"||"";try{var le=kr instanceof Map?kr:Object.entries(kr);for(const[ys,Qr]of le){let Kr=Qr;p(Qr)&&(Kr=os(Qr)),Kt.push(F+ys+"="+encodeURIComponent(Kr))}}catch(ys){throw Kt.push(F+"type="+encodeURIComponent("_badmap")),ys}}catch{N&&N(kr)}}if(ut){le=Kt.join("&");break e}}le=void 0}return d=d.i.splice(0,w),v.G=d,le}function yu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;De||C(),Te||(De(),Te=!0),A.add(v,d),d.A=0}}function Oa(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=wr(y(d.Da,d),xu(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=wr(y(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Ti(this),vu(this))};function Ml(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function vu(d){d.g=new lr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Dt(d.na);nt(v,"RID","rpc"),nt(v,"SID",d.M),nt(v,"AID",d.K),nt(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&nt(v,"TO",d.ia),nt(v,"TYPE","xmlhttp"),ja(d,v),d.u&&d.o&&ka(v,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Lt(Dt(v)),w.u=null,w.R=!0,fi(w,d)}r.Va=function(){this.C!=null&&(this.C=null,Ti(this),Oa(this),Ct(19))};function No(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function bu(d,v){var w=null;if(d.g==v){No(d),Ml(d),d.g=null;var N=2}else if(Nr(d.h,v))w=v.G,us(d.h,v),N=1;else return;if(d.I!=0){if(v.o)if(N==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var B=d.D;N=hi(),Fe(N,new dn(N,w)),ms(d)}else yu(d);else if(B=v.m,B==3||B==0&&v.X>0||!(N==1&&So(d,v)||N==2&&Oa(d)))switch(w&&w.length>0&&(v=d.h,v.i=v.i.concat(w)),B){case 1:gs(d,5);break;case 4:gs(d,10);break;case 3:gs(d,6);break;default:gs(d,2)}}}function xu(d,v){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*v}function gs(d,v){if(d.j.info("Error code "+v),v==2){var w=y(d.bb,d),N=d.Ua;const B=!N;N=new tn(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||qt(N,"https"),Lt(N),B?Fr(N.toString(),w):Il(N.toString(),w)}else Ct(2);d.I=0,d.l&&d.l.pa(v),_u(d),To(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function _u(d){if(d.I=0,d.ja=[],d.l){const v=gi(d.h);(v.length!=0||d.i.length!=0)&&(V(d.ja,v),V(d.ja,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.oa()}}function wu(d,v,w){var N=w instanceof tn?Dt(w):new tn(w);if(N.g!="")v&&(N.g=v+"."+N.g),Jn(N,N.u);else{var B=u.location;N=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;const F=new tn(null);N&&qt(F,N),v&&(F.g=v),B&&Jn(F,B),w&&(F.h=w),N=F}return w=d.G,v=d.wa,w&&v&&nt(N,w,v),nt(N,"VER",d.ka),ja(d,N),N}function Eu(d,v,w){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new bt(new ds({ab:w})):new bt(d.ma),v.Fa(d.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}r=Tu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Si(){}Si.prototype.g=function(d,v){return new Fn(d,v)};function Fn(d,v){Ge.call(this),this.g=new Ei(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!I(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Ms(this)}_(Fn,Ge),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Ol(this.g)},Fn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=os(d),d=w);v.i.push(new Gt(v.Ya++,d)),v.I==3&&ms(v)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,Fn.Z.N.call(this)};function Su(d){vt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const w in v){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}_(Su,vt);function Nu(){en.call(this),this.status=1}_(Nu,en);function Ms(d){this.g=d}_(Ms,Tu),Ms.prototype.ra=function(){Fe(this.g,"a")},Ms.prototype.qa=function(d){Fe(this.g,new Su(d))},Ms.prototype.pa=function(d){Fe(this.g,new Nu)},Ms.prototype.oa=function(){Fe(this.g,"b")},Si.prototype.createWebChannel=Si.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,$w=function(){return new Si},Fw=function(){return hi()},qw=Ee,Gm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gr.NO_ERROR=0,Gr.TIMEOUT=8,Gr.HTTP_ERROR=6,Yh=Gr,Bt.COMPLETE="complete",Gw=Bt,ui.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,kc=ui,bt.prototype.listenOnce=bt.prototype.K,bt.prototype.getLastError=bt.prototype.Ha,bt.prototype.getLastErrorCode=bt.prototype.ya,bt.prototype.getStatus=bt.prototype.ca,bt.prototype.getResponseJson=bt.prototype.La,bt.prototype.getResponseText=bt.prototype.la,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Fa,Hw=bt}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="12.9.0";function nk(r){Nl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new bg("@firebase/firestore");function il(){return ao.logLevel}function ge(r,...e){if(ao.logLevel<=Ze.DEBUG){const t=e.map(kg);ao.debug(`Firestore (${Nl}): ${r}`,...t)}}function si(r,...e){if(ao.logLevel<=Ze.ERROR){const t=e.map(kg);ao.error(`Firestore (${Nl}): ${r}`,...t)}}function oo(r,...e){if(ao.logLevel<=Ze.WARN){const t=e.map(kg);ao.warn(`Firestore (${Nl}): ${r}`,...t)}}function kg(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Yw(r,s,t)}function Yw(r,e,t){let s=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw si(s),new Error(s)}function ft(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||Yw(e,a,s)}function Le(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ai{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class sk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ik{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ti,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},p=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ti)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ft(typeof s.accessToken=="string",31837,{l:s}),new Qw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class ak{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ok{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new ak(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ur(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Qx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=ck(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function et(r,e){return r<e?-1:r>e?1:0}function qm(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),l=e.charAt(s);if(a!==l)return _m(a)===_m(l)?et(a,l):_m(a)?1:-1}return et(r.length,e.length)}const uk=55296,hk=57343;function _m(r){const e=r.charCodeAt(0);return e>=uk&&e<=hk}function yl(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="__name__";class ws{constructor(e,t,s){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ke(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ws.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ws?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=ws.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return et(e.length,t.length)}static compareSegments(e,t){const s=ws.isNumericId(e),a=ws.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?ws.extractNumericId(e).compare(ws.extractNumericId(t)):qm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ua.fromString(e.substring(4,e.length-2))}}class Nt extends ws{construct(e,t,s){return new Nt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Nt(t)}static emptyPath(){return new Nt([])}}const dk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends ws{construct(e,t,s){return new Nn(e,t,s)}static isValidIdentifier(e){return dk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kx}static keyField(){return new Nn([Kx])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else p==="`"?(u=!u,a++):p!=="."||u?(s+=p,a++):(l(),a++)}if(l(),u)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(t)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(Nt.fromString(e))}static fromName(e){return new Ce(Nt.fromString(e).popFirst(5))}static empty(){return new Ce(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(r,e,t){if(!t)throw new fe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function fk(r,e,t,s){if(e===!0&&s===!0)throw new fe(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Xx(r){if(!Ce.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Jx(r){if(Ce.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Xw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function jd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ke(12329,{type:typeof r})}function xr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jd(r);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(r,e){const t={typeString:r};return e&&(t.value=e),t}function ou(r,e){if(!Xw(r))throw new fe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const u=r[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new fe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=-62135596800,Zx=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Zx);return new kt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Wx)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zx}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ou(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:un("string",kt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new kt(0,0))}static max(){return new Oe(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=-1;function pk(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Oe.fromTimestamp(s===1e9?new kt(t+1,0):new kt(t,s));return new da(a,Ce.empty(),e)}function mk(r){return new da(r.readTime,r.key,Yc)}class da{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new da(Oe.min(),Ce.empty(),Yc)}static max(){return new da(Oe.max(),Ce.empty(),Yc)}}function gk(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(r.documentKey,e.documentKey),t!==0?t:et(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==yk)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let a=0,l=0,u=!1;e.forEach((p=>{++a,p.next((()=>{++l,u&&l===a&&t()}),(g=>s(g)))})),u=!0,l===a&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((a=>a?re.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,a)=>{const l=e.length,u=new Array(l);let p=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((b=>{u[y]=b,++p,p===l&&s(u)}),(b=>a(b)))}}))}static doWhile(e,t){return new re(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function bk(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Al(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Od.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=-1;function Pd(r){return r==null}function dd(r){return r===0&&1/r==-1/0}function xk(r){return typeof r=="number"&&Number.isInteger(r)&&!dd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="";function _k(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=e_(e)),e=wk(r.get(t),e);return e_(e)}function wk(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Jw:t+="";break;default:t+=l}}return t}function e_(r){return r+Jw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function _a(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ww(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jh(this.root,e,this.comparator,!0)}}class jh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Sn.RED,this.left=a??Sn.EMPTY,this.right=l??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Sn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Sn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new n_(this.data.getIterator())}getIteratorFrom(e){return new n_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class n_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new br([])}unionWith(e){let t=new pn(Nn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Zw("Invalid base64 string: "+l):l}})(e);return new Rn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const Ek=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(r){if(ft(!!r,39018),typeof r=="string"){let e=0;const t=Ek.exec(r);if(ft(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Wt(r.seconds),nanos:Wt(r.nanos)}}function Wt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function pa(r){return typeof r=="string"?Rn.fromBase64String(r):Rn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="server_timestamp",tE="__type__",nE="__previous_value__",rE="__local_write_time__";function jg(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[tE])==null?void 0:s.stringValue)===eE}function Md(r){const e=r.mapValue.fields[nE];return jg(e)?Md(e):e}function Qc(r){const e=fa(r.mapValue.fields[rE].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t,s,a,l,u,p,g,y,b,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=_}}const fd="(default)";class Kc{constructor(e,t){this.projectId=e,this.database=t||fd}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===fd}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}function Sk(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="__type__",Nk="__max__",Oh={mapValue:{}},iE="__vector__",pd="value";function ma(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?jg(r)?4:Ak(r)?9007199254740991:Ck(r)?10:11:ke(28295,{value:r})}function Rs(r,e){if(r===e)return!0;const t=ma(r);if(t!==ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Qc(r).isEqual(Qc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=fa(a.timestampValue),p=fa(l.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return pa(a.bytesValue).isEqual(pa(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return Wt(a.geoPointValue.latitude)===Wt(l.geoPointValue.latitude)&&Wt(a.geoPointValue.longitude)===Wt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Wt(a.integerValue)===Wt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Wt(a.doubleValue),p=Wt(l.doubleValue);return u===p?dd(u)===dd(p):isNaN(u)&&isNaN(p)}return!1})(r,e);case 9:return yl(r.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},p=l.mapValue.fields||{};if(t_(u)!==t_(p))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(p[g]===void 0||!Rs(u[g],p[g])))return!1;return!0})(r,e);default:return ke(52216,{left:r})}}function Xc(r,e){return(r.values||[]).find((t=>Rs(t,e)))!==void 0}function vl(r,e){if(r===e)return 0;const t=ma(r),s=ma(e);if(t!==s)return et(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(r.booleanValue,e.booleanValue);case 2:return(function(l,u){const p=Wt(l.integerValue||l.doubleValue),g=Wt(u.integerValue||u.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return r_(r.timestampValue,e.timestampValue);case 4:return r_(Qc(r),Qc(e));case 5:return qm(r.stringValue,e.stringValue);case 6:return(function(l,u){const p=pa(l),g=pa(u);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,u){const p=l.split("/"),g=u.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=et(p[y],g[y]);if(b!==0)return b}return et(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,u){const p=et(Wt(l.latitude),Wt(u.latitude));return p!==0?p:et(Wt(l.longitude),Wt(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return s_(r.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,R,V,$;const p=l.fields||{},g=u.fields||{},y=(T=p[pd])==null?void 0:T.arrayValue,b=(R=g[pd])==null?void 0:R.arrayValue,_=et(((V=y==null?void 0:y.values)==null?void 0:V.length)||0,(($=b==null?void 0:b.values)==null?void 0:$.length)||0);return _!==0?_:s_(y,b)})(r.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Oh.mapValue&&u===Oh.mapValue)return 0;if(l===Oh.mapValue)return 1;if(u===Oh.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),y=u.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let _=0;_<g.length&&_<b.length;++_){const T=qm(g[_],b[_]);if(T!==0)return T;const R=vl(p[g[_]],y[b[_]]);if(R!==0)return R}return et(g.length,b.length)})(r.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function r_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return et(r,e);const t=fa(r),s=fa(e),a=et(t.seconds,s.seconds);return a!==0?a:et(t.nanos,s.nanos)}function s_(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=vl(t[a],s[a]);if(l)return l}return et(t.length,s.length)}function bl(r){return Fm(r)}function Fm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=fa(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return pa(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ce.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Fm(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Fm(t.fields[u])}`;return a+"}"})(r.mapValue):ke(61005,{value:r})}function Qh(r){switch(ma(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Md(r);return e?16+Qh(e):16;case 5:return 2*r.stringValue.length;case 6:return pa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Qh(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return _a(s.fields,((l,u)=>{a+=l.length+Qh(u)})),a})(r.mapValue);default:throw ke(13486,{value:r})}}function i_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function $m(r){return!!r&&"integerValue"in r}function Og(r){return!!r&&"arrayValue"in r}function a_(r){return!!r&&"nullValue"in r}function o_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Kh(r){return!!r&&"mapValue"in r}function Ck(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[sE])==null?void 0:s.stringValue)===iE}function Mc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return _a(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Mc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mc(r.arrayValue.values[t]);return e}return{...r}}function Ak(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Nk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(t)}setAll(e){let t=Nn.emptyPath(),s={},a=[];e.forEach(((u,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=p.popLast()}u?s[p.lastSegment()]=Mc(u):a.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Kh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){_a(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new ir(Mc(this.value))}}function aE(r){const e=[];return _a(r.fields,((t,s)=>{const a=new Nn([t]);if(Kh(s)){const l=aE(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t,s,a,l,u,p){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=p}static newInvalidDocument(e){return new Vn(e,0,Oe.min(),Oe.min(),Oe.min(),ir.empty(),0)}static newFoundDocument(e,t,s,a){return new Vn(e,1,t,Oe.min(),s,a,0)}static newNoDocument(e,t){return new Vn(e,2,t,Oe.min(),Oe.min(),ir.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,Oe.min(),Oe.min(),ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.position=e,this.inclusive=t}}function l_(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],u=r.position[a];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(u.referenceValue),t.key):s=vl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function c_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Rs(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rk(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{}class cn extends oE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Ik(e,t,s):t==="array-contains"?new Ok(e,s):t==="in"?new Pk(e,s):t==="not-in"?new Mk(e,s):t==="array-contains-any"?new Lk(e,s):new cn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Dk(e,s):new jk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vl(t,this.value)):t!==null&&ma(this.value)===ma(t)&&this.matchesComparison(vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rs extends oE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rs(e,t)}matches(e){return lE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lE(r){return r.op==="and"}function cE(r){return kk(r)&&lE(r)}function kk(r){for(const e of r.filters)if(e instanceof rs)return!1;return!0}function Ym(r){if(r instanceof cn)return r.field.canonicalString()+r.op.toString()+bl(r.value);if(cE(r))return r.filters.map((e=>Ym(e))).join(",");{const e=r.filters.map((t=>Ym(t))).join(",");return`${r.op}(${e})`}}function uE(r,e){return r instanceof cn?(function(s,a){return a instanceof cn&&s.op===a.op&&s.field.isEqual(a.field)&&Rs(s.value,a.value)})(r,e):r instanceof rs?(function(s,a){return a instanceof rs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,p)=>l&&uE(u,a.filters[p])),!0):!1})(r,e):void ke(19439)}function hE(r){return r instanceof cn?(function(t){return`${t.field.canonicalString()} ${t.op} ${bl(t.value)}`})(r):r instanceof rs?(function(t){return t.op.toString()+" {"+t.getFilters().map(hE).join(" ,")+"}"})(r):"Filter"}class Ik extends cn{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dk extends cn{constructor(e,t){super(e,"in",t),this.keys=dE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jk extends cn{constructor(e,t){super(e,"not-in",t),this.keys=dE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ce.fromName(s.referenceValue)))}class Ok extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Og(t)&&Xc(t.arrayValue,this.value)}}class Pk extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xc(this.value.arrayValue,t)}}class Mk extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xc(this.value.arrayValue,t)}}class Lk extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Og(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Xc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t=null,s=[],a=[],l=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=p,this.Te=null}}function u_(r,e=null,t=[],s=[],a=null,l=null,u=null){return new Vk(r,e,t,s,a,l,u)}function Pg(r){const e=Le(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Ym(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Pd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>bl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>bl(s))).join(",")),e.Te=t}return e.Te}function Mg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Rk(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!uE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!c_(r.startAt,e.startAt)&&c_(r.endAt,e.endAt)}function Qm(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t=null,s=[],a=[],l=null,u="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Uk(r,e,t,s,a,l,u,p){return new lu(r,e,t,s,a,l,u,p)}function Ld(r){return new lu(r)}function h_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function zk(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function fE(r){return r.collectionGroup!==null}function Lc(r){const e=Le(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new pn(Nn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new gd(l,s))})),t.has(Nn.keyField().canonicalString())||e.Ie.push(new gd(Nn.keyField(),s))}return e.Ie}function Ns(r){const e=Le(r);return e.Ee||(e.Ee=Bk(e,Lc(r))),e.Ee}function Bk(r,e){if(r.limitType==="F")return u_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new gd(a.field,l)}));const t=r.endAt?new md(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new md(r.startAt.position,r.startAt.inclusive):null;return u_(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Km(r,e){const t=r.filters.concat([e]);return new lu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Xm(r,e,t){return new lu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vd(r,e){return Mg(Ns(r),Ns(e))&&r.limitType===e.limitType}function pE(r){return`${Pg(Ns(r))}|lt:${r.limitType}`}function al(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>hE(a))).join(", ")}]`),Pd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>bl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>bl(a))).join(",")),`Target(${s})`})(Ns(r))}; limitType=${r.limitType})`}function Ud(r,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,a){for(const l of Lc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(u,p,g){const y=l_(u,p,g);return u.inclusive?y<=0:y<0})(s.startAt,Lc(s),a)||s.endAt&&!(function(u,p,g){const y=l_(u,p,g);return u.inclusive?y>=0:y>0})(s.endAt,Lc(s),a))})(r,e)}function Hk(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function mE(r){return(e,t)=>{let s=!1;for(const a of Lc(r)){const l=Gk(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function Gk(r,e,t){const s=r.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,u,p){const g=u.data.field(l),y=p.data.field(l);return g!==null&&y!==null?vl(g,y):ke(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ke(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return Ww(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new Ut(Ce.comparator);function ii(){return qk}const gE=new Ut(Ce.comparator);function Ic(...r){let e=gE;for(const t of r)e=e.insert(t.key,t);return e}function yE(r){let e=gE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Za(){return Vc()}function vE(){return Vc()}function Vc(){return new mo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Fk=new Ut(Ce.comparator),$k=new pn(Ce.comparator);function tt(...r){let e=$k;for(const t of r)e=e.add(t);return e}const Yk=new pn(et);function Qk(){return Yk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dd(e)?"-0":e}}function bE(r){return{integerValue:""+r}}function Kk(r,e){return xk(e)?bE(e):Lg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this._=void 0}}function Xk(r,e,t){return r instanceof yd?(function(a,l){const u={fields:{[tE]:{stringValue:eE},[rE]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&jg(l)&&(l=Md(l)),l&&(u.fields[nE]=l),{mapValue:u}})(t,e):r instanceof Jc?_E(r,e):r instanceof Wc?wE(r,e):(function(a,l){const u=xE(a,l),p=d_(u)+d_(a.Ae);return $m(u)&&$m(a.Ae)?bE(p):Lg(a.serializer,p)})(r,e)}function Jk(r,e,t){return r instanceof Jc?_E(r,e):r instanceof Wc?wE(r,e):t}function xE(r,e){return r instanceof vd?(function(s){return $m(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class yd extends zd{}class Jc extends zd{constructor(e){super(),this.elements=e}}function _E(r,e){const t=EE(e);for(const s of r.elements)t.some((a=>Rs(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Wc extends zd{constructor(e){super(),this.elements=e}}function wE(r,e){let t=EE(e);for(const s of r.elements)t=t.filter((a=>!Rs(a,s)));return{arrayValue:{values:t}}}class vd extends zd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function d_(r){return Wt(r.integerValue||r.doubleValue)}function EE(r){return Og(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Wk(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof Jc&&a instanceof Jc||s instanceof Wc&&a instanceof Wc?yl(s.elements,a.elements,Rs):s instanceof vd&&a instanceof vd?Rs(s.Ae,a.Ae):s instanceof yd&&a instanceof yd})(r.transform,e.transform)}class Zk{constructor(e,t){this.version=e,this.transformResults=t}}class es{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new es}static exists(e){return new es(void 0,e)}static updateTime(e){return new es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Bd{}function TE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Vg(r.key,es.none()):new cu(r.key,r.data,es.none());{const t=r.data,s=ir.empty();let a=new pn(Nn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new wa(r.key,s,new br(a.toArray()),es.none())}}function eI(r,e,t){r instanceof cu?(function(a,l,u){const p=a.value.clone(),g=p_(a.fieldTransforms,l,u.transformResults);p.setAll(g),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(r,e,t):r instanceof wa?(function(a,l,u){if(!Xh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const p=p_(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(SE(a)),g.setAll(p),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(r,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Uc(r,e,t,s){return r instanceof cu?(function(l,u,p,g){if(!Xh(l.precondition,u))return p;const y=l.value.clone(),b=m_(l.fieldTransforms,g,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof wa?(function(l,u,p,g){if(!Xh(l.precondition,u))return p;const y=m_(l.fieldTransforms,g,u),b=u.data;return b.setAll(SE(l)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(r,e,t,s):(function(l,u,p){return Xh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(r,e,t)}function tI(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=xE(s.transform,a||null);l!=null&&(t===null&&(t=ir.empty()),t.set(s.field,l))}return t||null}function f_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&yl(s,a,((l,u)=>Wk(l,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class cu extends Bd{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class wa extends Bd{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function SE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function p_(r,e,t){const s=new Map;ft(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],u=l.transform,p=e.data.field(l.field);s.set(l.field,Jk(u,p,t[a]))}return s}function m_(r,e,t){const s=new Map;for(const a of r){const l=a.transform,u=t.data.field(a.field);s.set(a.field,Xk(l,u,e))}return s}class Vg extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&eI(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Uc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Uc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=vE();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let p=this.applyToLocalView(u,l.mutatedFields);p=t.has(a.key)?null:p;const g=TE(u,p);g!==null&&s.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(Oe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,((t,s)=>f_(t,s)))&&yl(this.baseMutations,e.baseMutations,((t,s)=>f_(t,s)))}}class Ug{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){ft(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return Fk})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new Ug(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,ot;function aI(r){switch(r){case te.OK:return ke(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return ke(15467,{code:r})}}function NE(r){if(r===void 0)return si("GRPC error has no .code"),te.UNKNOWN;switch(r){case on.OK:return te.OK;case on.CANCELLED:return te.CANCELLED;case on.UNKNOWN:return te.UNKNOWN;case on.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case on.INTERNAL:return te.INTERNAL;case on.UNAVAILABLE:return te.UNAVAILABLE;case on.UNAUTHENTICATED:return te.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case on.NOT_FOUND:return te.NOT_FOUND;case on.ALREADY_EXISTS:return te.ALREADY_EXISTS;case on.PERMISSION_DENIED:return te.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case on.ABORTED:return te.ABORTED;case on.OUT_OF_RANGE:return te.OUT_OF_RANGE;case on.UNIMPLEMENTED:return te.UNIMPLEMENTED;case on.DATA_LOSS:return te.DATA_LOSS;default:return ke(39323,{code:r})}}(ot=on||(on={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new ua([4294967295,4294967295],0);function g_(r){const e=oI().encode(r),t=new Bw;return t.update(e),new Uint8Array(t.digest())}function y_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ua([t,s],0),new ua([a,l],0)]}class zg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Dc(`Invalid padding: ${t}`);if(s<0)throw new Dc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Dc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Dc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ua.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(ua.fromNumber(s)));return a.compare(lI)===1&&(a=new ua([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=g_(e),[s,a]=y_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new zg(l,a,t);return s.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const t=g_(e),[s,a]=y_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Hd(Oe.min(),a,new Ut(et),ii(),tt())}}class uu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new uu(s,t,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=a}}class CE{constructor(e,t){this.targetId=e,this.Ce=t}}class AE{constructor(e,t,s=Rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class v_{constructor(){this.ve=0,this.Fe=b_(),this.Me=Rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),s=tt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:ke(38017,{changeType:l})}})),new uu(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=b_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class cI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ii(),this.He=Ph(),this.Je=Ph(),this.Ze=new Ut(et)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Qm(l))if(s===0){const u=new Ce(l.path);this.et(t,u,Vn.newNoDocument(u,Oe.min()))}else ft(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const p=this.ut(e),g=p?this.ct(p,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,p;try{u=pa(s).toUint8Array()}catch(g){if(g instanceof Zw)return oo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new zg(u,a,l)}catch(g){return oo(g instanceof Dc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const p=this.ot(u);if(p){if(l.current&&Qm(p.target)){const g=new Ce(p.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Vn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let s=tt();this.Je.forEach(((l,u)=>{let p=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Hd(e,t,this.Ze,this.je,s);return this.je=ii(),this.He=Ph(),this.Je=Ph(),this.Ze=new Ut(et),a}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new v_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new pn(et),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new pn(et),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new v_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ph(){return new Ut(Ce.comparator)}function b_(){return new Ut(Ce.comparator)}const uI={asc:"ASCENDING",desc:"DESCENDING"},hI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dI={and:"AND",or:"OR"};class fI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jm(r,e){return r.useProto3Json||Pd(e)?e:{value:e}}function bd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function pI(r,e){return bd(r,e.toTimestamp())}function Cs(r){return ft(!!r,49232),Oe.fromTimestamp((function(t){const s=fa(t);return new kt(s.seconds,s.nanos)})(r))}function Bg(r,e){return Wm(r,e).canonicalString()}function Wm(r,e){const t=(function(a){return new Nt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function kE(r){const e=Nt.fromString(r);return ft(PE(e),10190,{key:e.toString()}),e}function Zm(r,e){return Bg(r.databaseId,e.path)}function wm(r,e){const t=kE(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ce(DE(t))}function IE(r,e){return Bg(r.databaseId,e)}function mI(r){const e=kE(r);return e.length===4?Nt.emptyPath():DE(e)}function eg(r){return new Nt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function DE(r){return ft(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function x_(r,e,t){return{name:Zm(r,e),fields:t.value.mapValue.fields}}function gI(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ke(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,b){return y.useProto3Json?(ft(b===void 0||typeof b=="string",58123),Rn.fromBase64String(b||"")):(ft(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Rn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const b=y.code===void 0?te.UNKNOWN:NE(y.code);return new fe(b,y.message||"")})(u);t=new AE(s,a,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=wm(r,s.document.name),l=Cs(s.document.updateTime),u=s.document.createTime?Cs(s.document.createTime):Oe.min(),p=new ir({mapValue:{fields:s.document.fields}}),g=Vn.newFoundDocument(a,l,u,p),y=s.targetIds||[],b=s.removedTargetIds||[];t=new Jh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=wm(r,s.document),l=s.readTime?Cs(s.readTime):Oe.min(),u=Vn.newNoDocument(a,l),p=s.removedTargetIds||[];t=new Jh([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=wm(r,s.document),l=s.removedTargetIds||[];t=new Jh([],l,a,null)}else{if(!("filter"in e))return ke(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new iI(a,l),p=s.targetId;t=new CE(p,u)}}return t}function yI(r,e){let t;if(e instanceof cu)t={update:x_(r,e.key,e.value)};else if(e instanceof Vg)t={delete:Zm(r,e.key)};else if(e instanceof wa)t={update:x_(r,e.key,e.data),updateMask:NI(e.fieldMask)};else{if(!(e instanceof nI))return ke(16599,{dt:e.type});t={verify:Zm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const p=u.transform;if(p instanceof yd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Jc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Wc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof vd)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw ke(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:pI(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke(27497)})(r,e.precondition)),t}function vI(r,e){return r&&r.length>0?(ft(e!==void 0,14353),r.map((t=>(function(a,l){let u=a.updateTime?Cs(a.updateTime):Cs(l);return u.isEqual(Oe.min())&&(u=Cs(l)),new Zk(u,a.transformResults||[])})(t,e)))):[]}function bI(r,e){return{documents:[IE(r,e.path)]}}function xI(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=IE(r,a);const l=(function(y){if(y.length!==0)return OE(rs.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:ol(T.field),direction:EI(T.dir)}})(b)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const p=Jm(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function _I(r){let e=mI(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){ft(s===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(_){const T=jE(_);return T instanceof rs&&cE(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(V){return new gd(ll(V.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(_){let T;return T=typeof _=="object"?_.value:_,Pd(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(_){const T=!!_.before,R=_.values||[];return new md(R,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(_){const T=!_.before,R=_.values||[];return new md(R,T)})(t.endAt)),Uk(e,a,u,l,p,"F",g,y)}function wI(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ll(t.unaryFilter.field);return cn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=ll(t.unaryFilter.field);return cn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ll(t.unaryFilter.field);return cn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ll(t.unaryFilter.field);return cn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(r):r.fieldFilter!==void 0?(function(t){return cn.create(ll(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return rs.create(t.compositeFilter.filters.map((s=>jE(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(r):ke(30097,{filter:r})}function EI(r){return uI[r]}function TI(r){return hI[r]}function SI(r){return dI[r]}function ol(r){return{fieldPath:r.canonicalString()}}function ll(r){return Nn.fromServerFormat(r.fieldPath)}function OE(r){return r instanceof cn?(function(t){if(t.op==="=="){if(o_(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NAN"}};if(a_(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(o_(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NAN"}};if(a_(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(t.field),op:TI(t.op),value:t.value}}})(r):r instanceof rs?(function(t){const s=t.getFilters().map((a=>OE(a)));return s.length===1?s[0]:{compositeFilter:{op:SI(t.op),filters:s}}})(r):ke(54877,{filter:r})}function NI(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function PE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function ME(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t,s,a,l=Oe.min(),u=Oe.min(),p=Rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ra(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ra(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.yt=e}}function AI(r){const e=_I({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.Sn=new kI}addToCollectionParentIndex(e,t){return this.Sn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(da.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(da.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class kI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new pn(Nt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new pn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LE=41943040;class sr{static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(LE,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new xl(0)}static ar(){return new xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="LruGarbageCollector",II=1048576;function E_([r,e],[t,s]){const a=et(r,t);return a===0?et(e,s):a}class DI{constructor(e){this.Pr=e,this.buffer=new pn(E_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();E_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ge(w_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Al(t)?ge(w_,"Ignoring IndexedDB error during garbage collection: ",t):await Cl(t)}await this.Ar(3e5)}))}}class OI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Od.ce);const s=new DI(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(__)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),__):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,a,l,u,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,p=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(y=Date.now(),il()<=Ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${a} in `+(p-u)+`ms
	Removed ${l} targets in `+(g-p)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function PI(r,e){return new OI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.changes=new mo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Uc(s.mutation,a,br.empty(),kt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,tt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=tt()){const a=Za();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=Ic();return l.forEach(((p,g)=>{u=u.insert(p,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=Za();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,tt())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,p)=>{t.set(u,p)}))}))}computeViews(e,t,s,a){let l=ii();const u=Vc(),p=(function(){return Vc()})();return t.forEach(((g,y)=>{const b=s.get(y.key);a.has(y.key)&&(b===void 0||b.mutation instanceof wa)?l=l.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),Uc(b.mutation,y,b.mutation.getFieldMask(),kt.now())):u.set(y.key,br.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,b)=>u.set(y,b))),t.forEach(((y,b)=>p.set(y,new LI(b,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const s=Vc();let a=new Ut(((u,p)=>u-p)),l=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const p of u)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let b=s.get(g)||br.empty();b=p.applyToLocalView(y,b),s.set(g,b);const _=(a.get(p.batchId)||tt()).add(g);a=a.insert(p.batchId,_)}))})).next((()=>{const u=[],p=a.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,_=vE();b.forEach((T=>{if(!l.has(T)){const R=TE(t.get(T),s.get(T));R!==null&&_.set(T,R),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,_))}return re.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return zk(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):re.resolve(Za());let p=Yc,g=l;return u.next((y=>re.forEach(y,((b,_)=>(p<_.largestBatchId&&(p=_.largestBatchId),l.get(b)?re.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,tt()))).next((b=>({batchId:p,changes:yE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let a=Ic();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Ic();return this.indexManager.getCollectionParents(e,l).next((p=>re.forEach(p,(g=>{const y=(function(_,T){return new lu(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,a).next((b=>{b.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((g,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,Vn.newInvalidDocument(b)))}));let p=Ic();return u.forEach(((g,y)=>{const b=l.get(g);b!==void 0&&Uc(b.mutation,y,br.empty(),kt.now()),Ud(t,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return re.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Cs(a.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:AI(a.bundledQuery),readTime:Cs(a.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.overlays=new Ut(Ce.comparator),this.Lr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Za();return re.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.bt(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Lr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const a=Za(),l=t.length+1,u=new Ce(t.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&a.set(g.getKey(),g)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Ut(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let b=l.get(y.largestBatchId);b===null&&(b=Za(),l=l.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Za(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=a)););return re.resolve(p)}bt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(s.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new sI(t,s));let l=this.Lr.get(t);l===void 0&&(l=tt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.kr=new pn(gn.Kr),this.qr=new pn(gn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new gn(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new gn(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Ce(new Nt([])),s=new gn(t,e),a=new gn(t,e+1),l=[];return this.qr.forEachInRange([s,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ce(new Nt([])),s=new gn(t,e),a=new gn(t,e+1);let l=tt();return this.qr.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new gn(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class gn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ce.comparator(e.key,t.key)||et(e.Hr,t.Hr)}static Ur(e,t){return et(e.Hr,t.Hr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new pn(gn.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new rI(l,t,s,a);this.mutationQueue.push(u);for(const p of a)this.Jr=this.Jr.add(new gn(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),l=a<0?0:a;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Dg:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new gn(t,0),a=new gn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,a],(u=>{const p=this.Zr(u.Hr);l.push(p)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new pn(et);return t.forEach((a=>{const l=new gn(a,0),u=new gn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(p=>{s=s.add(p.Hr)}))})),re.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const u=new gn(new Ce(l),0);let p=new pn(et);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===a&&(p=p.add(g.Hr)),!0)}),u),re.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ft(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return re.forEach(t.mutations,(a=>{const l=new gn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new gn(t,0),a=this.Jr.firstAfterOrEqual(s);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.ti=e,this.docs=(function(){return new Ut(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let s=ii();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Vn.newInvalidDocument(a))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=ii();const u=t.path,p=new Ce(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||gk(mk(b),s)<=0||(a.has(b.key)||Ud(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,a){ke(9500)}ni(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new qI(this)}getSize(e){return re.resolve(this.size)}}class qI extends MI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.persistence=e,this.ri=new mo((t=>Pg(t)),Mg),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.ii=0,this.si=new Hg,this.targetCount=0,this.oi=xl._r()}forEachTarget(e,t){return this.ri.forEach(((s,a)=>t(a))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),re.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new xl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.lr(t),re.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.ri.forEach(((u,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)})),re.waitFor(l).next((()=>a))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),re.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,t){this._i={},this.overlays={},this.ai=new Od(0),this.ui=!1,this.ui=!0,this.ci=new BI,this.referenceDelegate=e(this),this.li=new FI(this),this.indexManager=new RI,this.remoteDocumentCache=(function(a){return new GI(a)})((s=>this.referenceDelegate.hi(s))),this.serializer=new CI(t),this.Pi=new UI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new HI(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){ge("MemoryPersistence","Starting transaction:",e);const a=new $I(this.ai.next());return this.referenceDelegate.Ti(),s(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return re.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class $I extends vk{constructor(e){super(),this.currentSequenceNumber=e}}class Gg{constructor(e){this.persistence=e,this.Ri=new Hg,this.Ai=null}static Vi(e){return new Gg(e)}get di(){if(this.Ai)return this.Ai;throw ke(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(s=>{const a=Ce.fromPath(s);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Oe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class xd{constructor(e,t){this.persistence=e,this.fi=new mo((s=>_k(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=PI(this,t)}static Vi(e,t){return new xd(e,t)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return re.forEach(this.fi,((s,a)=>this.wr(e,s,a).next((l=>l?re.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((p=>{p||(s++,l.removeEntry(u,Oe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qh(e.data.value)),t}wr(e,t,s){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return re.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=a}static Es(e,t){let s=tt(),a=tt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new qg(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return wN()?8:bk(zn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new YI;return this.ys(e,t,u).next((p=>{if(l.result=p,this.As)return this.ws(e,t,u,p.size)}))})).next((()=>l.result))}ws(e,t,s,a){return s.documentReadCount<this.Vs?(il()<=Ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(il()<=Ze.DEBUG&&ge("QueryEngine","Query:",al(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ds*a?(il()<=Ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(t))):re.resolve())}gs(e,t){if(h_(t))return re.resolve(null);let s=Ns(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Xm(t,null,"F"),s=Ns(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=tt(...l);return this.fs.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,u,g.readTime)?this.gs(e,Xm(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,s,a){return h_(t)||a.isEqual(Oe.min())?re.resolve(null):this.fs.getDocuments(e,s).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,s,a)?re.resolve(null):(il()<=Ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),al(t)),this.Ds(e,u,t,pk(a,Yc)).next((p=>p)))}))}bs(e,t){let s=new pn(mE(e));return t.forEach(((a,l)=>{Ud(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,s){return il()<=Ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",al(t)),this.fs.getDocumentsMatchingQuery(e,t,da.min(),s)}Ds(e,t,s,a){return this.fs.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="LocalStore",KI=3e8;class XI{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Ut(et),this.Fs=new mo((l=>Pg(l)),Mg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function JI(r,e,t,s){return new XI(r,e,t,s)}async function UE(r,e){const t=Le(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],p=[];let g=tt();for(const y of a){u.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of l){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function WI(r,e){const t=Le(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const _=y.batch,T=_.keys();let R=re.resolve();return T.forEach((V=>{R=R.next((()=>b.getEntry(g,V))).next(($=>{const Z=y.docVersions.get(V);ft(Z!==null,48541),$.version.compareTo(Z)<0&&(_.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),b.addEntry($)))}))})),R.next((()=>p.mutationQueue.removeMutationBatch(g,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=tt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function zE(r){const e=Le(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function ZI(r,e){const t=Le(r),s=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const p=[];e.targetChanges.forEach(((b,_)=>{const T=a.get(_);if(!T)return;p.push(t.li.removeMatchingKeys(l,b.removedDocuments,_).next((()=>t.li.addMatchingKeys(l,b.addedDocuments,_))));let R=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?R=R.withResumeToken(Rn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,s)),a=a.insert(_,R),(function($,Z,ae){return $.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=KI?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(T,R,b)&&p.push(t.li.updateTargetData(l,R))}));let g=ii(),y=tt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),p.push(e4(l,u,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!s.isEqual(Oe.min())){const b=t.li.getLastRemoteSnapshotVersion(l).next((_=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));p.push(b)}return re.waitFor(p).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=a,l)))}function e4(r,e,t){let s=tt(),a=tt();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let u=ii();return t.forEach(((p,g)=>{const y=l.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(p)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(p,g.readTime),u=u.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(p,g)):ge(Fg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:a}}))}function t4(r,e){const t=Le(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Dg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function n4(r,e){const t=Le(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.li.getTargetData(s,e).next((l=>l?(a=l,re.resolve(a)):t.li.allocateTargetId(s).next((u=>(a=new ra(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.vs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function tg(r,e,t){const s=Le(r),a=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Al(u))throw u;ge(Fg,`Failed to update sequence numbers for target ${e}: ${u}`)}s.vs=s.vs.remove(e),s.Fs.delete(a.target)}function T_(r,e,t){const s=Le(r);let a=Oe.min(),l=tt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,b){const _=Le(g),T=_.Fs.get(b);return T!==void 0?re.resolve(_.vs.get(T)):_.li.getTargetData(y,b)})(s,u,Ns(e)).next((p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(u,p.targetId).next((g=>{l=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(u,e,t?a:Oe.min(),t?l:tt()))).next((p=>(r4(s,Hk(e),p),{documents:p,ks:l})))))}function r4(r,e,t){let s=r.Ms.get(e)||Oe.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class S_{constructor(){this.activeTargetIds=Qk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s4{constructor(){this.vo=new S_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new S_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="ConnectivityMonitor";class C_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ge(N_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ge(N_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function ng(){return Mh===null?Mh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="RestConnection",a4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class o4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.$o=this.databaseId.database===fd?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,l){const u=ng(),p=this.Qo(e,t.toUriEncodedString());ge(Em,`Sending RPC '${e}' ${u}:`,p,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,a,l);const{host:y}=new URL(p),b=El(y);return this.zo(e,p,g,s,b).then((_=>(ge(Em,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw oo(Em,`RPC '${e}' ${u} failed with error: `,_,"url: ",p,"request:",s),_}))}jo(e,t,s,a,l,u){return this.Wo(e,t,s,a,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const s=a4[e];let a=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection",Ec=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(a){setTimeout((()=>{throw a}),0)}}))};class pl extends o4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!pl.c_){const e=Fw();Ec(e,qw.STAT_EVENT,(t=>{t.stat===Gm.PROXY?ge(Pn,"STAT_EVENT: detected buffering proxy"):t.stat===Gm.NOPROXY&&ge(Pn,"STAT_EVENT: detected no buffering proxy")})),pl.c_=!0}}zo(e,t,s,a,l){const u=ng();return new Promise(((p,g)=>{const y=new Hw;y.setWithCredentials(!0),y.listenOnce(Gw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Yh.NO_ERROR:const _=y.getResponseJson();ge(Pn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),p(_);break;case Yh.TIMEOUT:ge(Pn,`RPC '${e}' ${u} timed out`),g(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Yh.HTTP_ERROR:const T=y.getStatus();if(ge(Pn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const $=(function(ae){const de=ae.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(de)>=0?de:te.UNKNOWN})(V.status);g(new fe($,V.message))}else g(new fe(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new fe(te.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ge(Pn,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(a);ge(Pn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",b,s,15)}))}T_(e,t,s){const a=ng(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const y=l.join("");ge(Pn,`Creating RPC '${e}' stream ${a}: ${y}`,p);const b=u.createWebChannel(y,p);this.I_(b);let _=!1,T=!1;const R=new l4({Ho:V=>{T?ge(Pn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(_||(ge(Pn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),ge(Pn,`RPC '${e}' stream ${a} sending:`,V),b.send(V))},Jo:()=>b.close()});return Ec(b,kc.EventType.OPEN,(()=>{T||(ge(Pn,`RPC '${e}' stream ${a} transport opened.`),R.i_())})),Ec(b,kc.EventType.CLOSE,(()=>{T||(T=!0,ge(Pn,`RPC '${e}' stream ${a} transport closed`),R.o_(),this.E_(b))})),Ec(b,kc.EventType.ERROR,(V=>{T||(T=!0,oo(Pn,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),R.o_(new fe(te.UNAVAILABLE,"The operation could not be completed")))})),Ec(b,kc.EventType.MESSAGE,(V=>{var $;if(!T){const Z=V.data[0];ft(!!Z,16349);const ae=Z,de=(ae==null?void 0:ae.error)||(($=ae[0])==null?void 0:$.error);if(de){ge(Pn,`RPC '${e}' stream ${a} received error:`,de);const me=de.status;let ye=(function(A){const C=on[A];if(C!==void 0)return NE(C)})(me),De=de.message;me==="NOT_FOUND"&&De.includes("database")&&De.includes("does not exist")&&De.includes(this.databaseId.database)&&oo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ye===void 0&&(ye=te.INTERNAL,De="Unknown error status: "+me+" with message "+de.message),T=!0,R.o_(new fe(ye,De)),b.close()}else ge(Pn,`RPC '${e}' stream ${a} received:`,Z),R.__(Z)}})),pl.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return $w()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(r){return new pl(r)}function Tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(r){return new fI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pl.c_=!1;class BE{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="PersistentStream";class HE{constructor(e,t,s,a,l,u,p,g){this.Ci=e,this.b_=s,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(si(t.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new fe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(A_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ge(A_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class u4 extends HE{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=gI(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Oe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Oe.min():u.readTime?Cs(u.readTime):Oe.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=eg(this.serializer),t.addTarget=(function(l,u){let p;const g=u.target;if(p=Qm(g)?{documents:bI(l,g)}:{query:xI(l,g).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=RE(l,u.resumeToken);const y=Jm(l,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Oe.min())>0){p.readTime=bd(l,u.snapshotVersion.toTimestamp());const y=Jm(l,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=wI(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=eg(this.serializer),t.removeTarget=e,this.K_(t)}}class h4 extends HE{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=vI(e.writeResults,e.commitTime),s=Cs(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=eg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>yI(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{}class f4 extends d4{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Wm(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(te.UNKNOWN,l.toString())}))}jo(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.jo(e,Wm(t,s),a,u,p,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function p4(r,e,t,s){return new f4(r,e,t,s)}class m4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(si(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class g4{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{s.enqueueAndForget((async()=>{go(this)&&(ge(lo,"Restarting streams for network reachability change."),await(async function(g){const y=Le(g);y.Ea.add(4),await hu(y),y.Va.set("Unknown"),y.Ea.delete(4),await qd(y)})(this))}))})),this.Va=new m4(s,a)}}async function qd(r){if(go(r))for(const e of r.Ra)await e(!0)}async function hu(r){for(const e of r.Ra)await e(!1)}function GE(r,e){const t=Le(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kg(t)?Qg(t):Rl(t).O_()&&Yg(t,e))}function $g(r,e){const t=Le(r),s=Rl(t);t.Ia.delete(e),s.O_()&&qE(t,e),t.Ia.size===0&&(s.O_()?s.L_():go(t)&&t.Va.set("Unknown"))}function Yg(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rl(r).Z_(e)}function qE(r,e){r.da.$e(e),Rl(r).X_(e)}function Qg(r){r.da=new cI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Rl(r).start(),r.Va.ua()}function Kg(r){return go(r)&&!Rl(r).x_()&&r.Ia.size>0}function go(r){return Le(r).Ea.size===0}function FE(r){r.da=void 0}async function y4(r){r.Va.set("Online")}async function v4(r){r.Ia.forEach(((e,t)=>{Yg(r,e)}))}async function b4(r,e){FE(r),Kg(r)?(r.Va.ha(e),Qg(r)):r.Va.set("Unknown")}async function x4(r,e,t){if(r.Va.set("Online"),e instanceof AE&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const p of l.targetIds)a.Ia.has(p)&&(await a.remoteSyncer.rejectListen(p,u),a.Ia.delete(p),a.da.removeTarget(p))})(r,e)}catch(s){ge(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _d(r,s)}else if(e instanceof Jh?r.da.Xe(e):e instanceof CE?r.da.st(e):r.da.tt(e),!t.isEqual(Oe.min()))try{const s=await zE(r.localStore);t.compareTo(s)>=0&&await(function(l,u){const p=l.da.Tt(u);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=l.Ia.get(y);b&&l.Ia.set(y,b.withResumeToken(g.resumeToken,u))}})),p.targetMismatches.forEach(((g,y)=>{const b=l.Ia.get(g);if(!b)return;l.Ia.set(g,b.withResumeToken(Rn.EMPTY_BYTE_STRING,b.snapshotVersion)),qE(l,g);const _=new ra(b.target,g,y,b.sequenceNumber);Yg(l,_)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(s){ge(lo,"Failed to raise snapshot:",s),await _d(r,s)}}async function _d(r,e,t){if(!Al(e))throw e;r.Ea.add(1),await hu(r),r.Va.set("Offline"),t||(t=()=>zE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(lo,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await qd(r)}))}function $E(r,e){return e().catch((t=>_d(r,t,e)))}async function Fd(r){const e=Le(r),t=ga(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dg;for(;_4(e);)try{const a=await t4(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,w4(e,a)}catch(a){await _d(e,a)}YE(e)&&QE(e)}function _4(r){return go(r)&&r.Ta.length<10}function w4(r,e){r.Ta.push(e);const t=ga(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function YE(r){return go(r)&&!ga(r).x_()&&r.Ta.length>0}function QE(r){ga(r).start()}async function E4(r){ga(r).ra()}async function T4(r){const e=ga(r);for(const t of r.Ta)e.ea(t.mutations)}async function S4(r,e,t){const s=r.Ta.shift(),a=Ug.from(s,e,t);await $E(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Fd(r)}async function N4(r,e){e&&ga(r).Y_&&await(async function(s,a){if((function(u){return aI(u)&&u!==te.ABORTED})(a.code)){const l=s.Ta.shift();ga(s).B_(),await $E(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Fd(s)}})(r,e),YE(r)&&QE(r)}async function R_(r,e){const t=Le(r);t.asyncQueue.verifyOperationInProgress(),ge(lo,"RemoteStore received new credentials");const s=go(t);t.Ea.add(3),await hu(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qd(t)}async function C4(r,e){const t=Le(r);e?(t.Ea.delete(2),await qd(t)):e||(t.Ea.add(2),await hu(t),t.Va.set("Unknown"))}function Rl(r){return r.ma||(r.ma=(function(t,s,a){const l=Le(t);return l.sa(),new u4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:y4.bind(null,r),Yo:v4.bind(null,r),t_:b4.bind(null,r),J_:x4.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Kg(r)?Qg(r):r.Va.set("Unknown")):(await r.ma.stop(),FE(r))}))),r.ma}function ga(r){return r.fa||(r.fa=(function(t,s,a){const l=Le(t);return l.sa(),new h4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:E4.bind(null,r),t_:N4.bind(null,r),ta:T4.bind(null,r),na:S4.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Fd(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(lo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,p=new Xg(e,t,u,a,l);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jg(r,e){if(si("AsyncQueue",`${e}: ${r}`),Al(r))return new fe(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Ic(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ml;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.ga=new Ut(Ce.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class _l{constructor(e,t,s,a,l,u,p,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((p=>{u.push({type:0,doc:p})})),new _l(e,t,ml.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class R4{constructor(){this.queries=I_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Le(t),l=a.queries;a.queries=I_(),l.forEach(((u,p)=>{for(const g of p.ba)g.onError(s)}))})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function I_(){return new mo((r=>pE(r)),Vd)}async function Wg(r,e){const t=Le(r);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(s=2):(l=new A4,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const p=Jg(u,`Initialization of query '${al(e.query)}' failed`);return void e.onError(p)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&e0(t)}async function Zg(r,e){const t=Le(r),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function k4(r,e){const t=Le(r);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const p of u.ba)p.Fa(a)&&(s=!0);u.wa=a}}s&&e0(t)}function I4(r,e,t){const s=Le(r),a=s.queries.get(e);if(a)for(const l of a.ba)l.onError(t);s.queries.delete(e)}function e0(r){r.Ca.forEach((e=>{e.next()}))}var rg,D_;(D_=rg||(rg={})).Ma="default",D_.Cache="cache";class t0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new _l(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.key=e}}class XE{constructor(e){this.key=e}}class D4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=tt(),this.mutatedKeys=tt(),this.eu=mE(e),this.tu=new ml(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new k_,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,p=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,_)=>{const T=a.get(b),R=Ud(this.query,_)?_:null,V=!!T&&this.mutatedKeys.has(T.key),$=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let Z=!1;T&&R?T.data.isEqual(R.data)?V!==$&&(s.track({type:3,doc:R}),Z=!0):this.su(T,R)||(s.track({type:2,doc:R}),Z=!0,(g&&this.eu(R,g)>0||y&&this.eu(R,y)<0)&&(p=!0)):!T&&R?(s.track({type:0,doc:R}),Z=!0):T&&!R&&(s.track({type:1,doc:T}),Z=!0,(g||y)&&(p=!0)),Z&&(R?(u=u.add(R),l=$?l.add(b):l.delete(b)):(u=u.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:u,iu:s,Ss:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,_)=>(function(R,V){const $=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Vt:Z})}};return $(R)-$(V)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(s),a=a??!1;const p=t&&!a?this._u():[],g=this.Ya.size===0&&this.current&&!a?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new _l(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new k_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=tt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new XE(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new KE(s))})),t}cu(e){this.Za=e.ks,this.Ya=tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const n0="SyncEngine";class j4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class O4{constructor(e){this.key=e,this.hu=!1}}class P4{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new mo((p=>pE(p)),Vd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ut(Ce.comparator),this.Au=new Map,this.Vu=new Hg,this.du={},this.mu=new Map,this.fu=xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M4(r,e,t=!0){const s=nT(r);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await JE(s,e,t,!0),a}async function L4(r,e){const t=nT(r);await JE(t,e,!0,!1)}async function JE(r,e,t,s){const a=await n4(r.localStore,Ns(e)),l=a.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let p;return s&&(p=await V4(r,e,l,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&GE(r.remoteStore,a),p}async function V4(r,e,t,s,a){r.pu=(_,T,R)=>(async function($,Z,ae,de){let me=Z.view.ru(ae);me.Ss&&(me=await T_($.localStore,Z.query,!1).then((({documents:A})=>Z.view.ru(A,me))));const ye=de&&de.targetChanges.get(Z.targetId),De=de&&de.targetMismatches.get(Z.targetId)!=null,Te=Z.view.applyChanges(me,$.isPrimaryClient,ye,De);return O_($,Z.targetId,Te.au),Te.snapshot})(r,_,T,R);const l=await T_(r.localStore,e,!0),u=new D4(e,l.ks),p=u.ru(l.documents),g=uu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),y=u.applyChanges(p,r.isPrimaryClient,g);O_(r,t,y.au);const b=new j4(e,t,u);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function U4(r,e,t){const s=Le(r),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!Vd(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await tg(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&$g(s.remoteStore,a.targetId),sg(s,a.targetId)})).catch(Cl)):(sg(s,a.targetId),await tg(s.localStore,a.targetId,!0))}async function z4(r,e){const t=Le(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),$g(t.remoteStore,s.targetId))}async function B4(r,e,t){const s=Q4(r);try{const a=await(function(u,p){const g=Le(u),y=kt.now(),b=p.reduce(((R,V)=>R.add(V.key)),tt());let _,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=ii(),$=tt();return g.xs.getEntries(R,b).next((Z=>{V=Z,V.forEach(((ae,de)=>{de.isValidDocument()||($=$.add(ae))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,V))).next((Z=>{_=Z;const ae=[];for(const de of p){const me=tI(de,_.get(de.key).overlayedDocument);me!=null&&ae.push(new wa(de.key,me,aE(me.value.mapValue),es.exists(!0)))}return g.mutationQueue.addMutationBatch(R,y,ae,p)})).next((Z=>{T=Z;const ae=Z.applyToLocalDocumentSet(_,$);return g.documentOverlayCache.saveOverlays(R,Z.batchId,ae)}))})).then((()=>({batchId:T.batchId,changes:yE(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,p,g){let y=u.du[u.currentUser.toKey()];y||(y=new Ut(et)),y=y.insert(p,g),u.du[u.currentUser.toKey()]=y})(s,a.batchId,t),await du(s,a.changes),await Fd(s.remoteStore)}catch(a){const l=Jg(a,"Failed to persist write");t.reject(l)}}async function WE(r,e){const t=Le(r);try{const s=await ZI(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(ft(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?ft(u.hu,14607):a.removedDocuments.size>0&&(ft(u.hu,42227),u.hu=!1))})),await du(t,s,e)}catch(s){await Cl(s)}}function j_(r,e,t){const s=Le(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const p=u.view.va(e);p.snapshot&&a.push(p.snapshot)})),(function(u,p){const g=Le(u);g.onlineState=p;let y=!1;g.queries.forEach(((b,_)=>{for(const T of _.ba)T.va(p)&&(y=!0)})),y&&e0(g)})(s.eventManager,e),a.length&&s.Pu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function H4(r,e,t){const s=Le(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new Ut(Ce.comparator);u=u.insert(l,Vn.newNoDocument(l,Oe.min()));const p=tt().add(l),g=new Hd(Oe.min(),new Map,new Ut(et),u,p);await WE(s,g),s.Ru=s.Ru.remove(l),s.Au.delete(e),r0(s)}else await tg(s.localStore,e,!1).then((()=>sg(s,e,t))).catch(Cl)}async function G4(r,e){const t=Le(r),s=e.batch.batchId;try{const a=await WI(t.localStore,e);eT(t,s,null),ZE(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await du(t,a)}catch(a){await Cl(a)}}async function q4(r,e,t){const s=Le(r);try{const a=await(function(u,p){const g=Le(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((_=>(ft(_!==null,37113),b=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(s.localStore,e);eT(s,e,t),ZE(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await du(s,a)}catch(a){await Cl(a)}}function ZE(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function eT(r,e,t){const s=Le(r);let a=s.du[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.du[s.currentUser.toKey()]=a}}function sg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||tT(r,s)}))}function tT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&($g(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),r0(r))}function O_(r,e,t){for(const s of t)s instanceof KE?(r.Vu.addReference(s.key,e),F4(r,s)):s instanceof XE?(ge(n0,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||tT(r,s.key)):ke(19791,{wu:s})}function F4(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(ge(n0,"New document in limbo: "+t),r.Eu.add(s),r0(r))}function r0(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ce(Nt.fromString(e)),s=r.fu.next();r.Au.set(s,new O4(t)),r.Ru=r.Ru.insert(t,s),GE(r.remoteStore,new ra(Ns(Ld(t.path)),s,"TargetPurposeLimboResolution",Od.ce))}}async function du(r,e,t){const s=Le(r),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{u.push(s.pu(g,e,t).then((y=>{var b;if((y||t)&&s.isPrimaryClient){const _=y?!y.fromCache:(b=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){a.push(y);const _=qg.Es(g.targetId,y);l.push(_)}})))})),await Promise.all(u),s.Pu.J_(a),await(async function(g,y){const b=Le(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>re.forEach(y,(T=>re.forEach(T.Ts,(R=>b.persistence.referenceDelegate.addReference(_,T.targetId,R))).next((()=>re.forEach(T.Is,(R=>b.persistence.referenceDelegate.removeReference(_,T.targetId,R)))))))))}catch(_){if(!Al(_))throw _;ge(Fg,"Failed to update sequence numbers: "+_)}for(const _ of y){const T=_.targetId;if(!_.fromCache){const R=b.vs.get(T),V=R.snapshotVersion,$=R.withLastLimboFreeSnapshotVersion(V);b.vs=b.vs.insert(T,$)}}})(s.localStore,l))}async function $4(r,e){const t=Le(r);if(!t.currentUser.isEqual(e)){ge(n0,"User change. New user:",e.toKey());const s=await UE(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((p=>{p.forEach((g=>{g.reject(new fe(te.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await du(t,s.Ns)}}function Y4(r,e){const t=Le(r),s=t.Au.get(e);if(s&&s.hu)return tt().add(s.key);{let a=tt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const p=t.Tu.get(u);a=a.unionWith(p.view.nu)}return a}}function nT(r){const e=Le(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=WE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H4.bind(null,e),e.Pu.J_=k4.bind(null,e.eventManager),e.Pu.yu=I4.bind(null,e.eventManager),e}function Q4(r){const e=Le(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q4.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return JI(this.persistence,new QI,e.initialUser,this.serializer)}Cu(e){return new VE(Gg.Vi,this.serializer)}Du(e){return new s4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class K4 extends wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ft(this.persistence.referenceDelegate instanceof xd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new jI(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new VE((s=>xd.Vi(s,t)),this.serializer)}}class ig{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>j_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=$4.bind(null,this.syncEngine),await C4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new R4})()}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),s=c4(e.databaseInfo);return p4(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,p){return new g4(s,a,l,u,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>j_(this.syncEngine,t,0)),(function(){return C_.v()?new C_:new i4})())}createSyncEngine(e,t){return(function(a,l,u,p,g,y,b){const _=new P4(a,l,u,p,g,y);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Le(a);ge(lo,"RemoteStore shutting down."),l.Ea.add(5),await hu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ig.provider={build:()=>new ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="FirestoreClient";class X4{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=a,this.user=Mn.UNAUTHENTICATED,this.clientId=Ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{ge(ya,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(ge(ya,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Jg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Sm(r,e){r.asyncQueue.verifyOperationInProgress(),ge(ya,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await UE(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function P_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await J4(r);ge(ya,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>R_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>R_(e.remoteStore,a))),r._onlineComponents=e}async function J4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(ya,"Using user provided OfflineComponentProvider");try{await Sm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===te.FAILED_PRECONDITION||a.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;oo("Error using user provided cache. Falling back to memory cache: "+t),await Sm(r,new wd)}}else ge(ya,"Using default OfflineComponentProvider"),await Sm(r,new K4(void 0));return r._offlineComponents}async function rT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(ya,"Using user provided OnlineComponentProvider"),await P_(r,r._uninitializedComponentsProvider._online)):(ge(ya,"Using default OnlineComponentProvider"),await P_(r,new ig))),r._onlineComponents}function W4(r){return rT(r).then((e=>e.syncEngine))}async function Ed(r){const e=await rT(r),t=e.eventManager;return t.onListen=M4.bind(null,e.syncEngine),t.onUnlisten=U4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=L4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=z4.bind(null,e.syncEngine),t}function Z4(r,e,t,s){const a=new s0(s),l=new t0(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>Wg(await Ed(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>Zg(await Ed(r),l)))}}function e5(r,e,t={}){const s=new ti;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,g,y){const b=new s0({next:T=>{b.Nu(),u.enqueueAndForget((()=>Zg(l,_)));const R=T.docs.has(p);!R&&T.fromCache?y.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&g&&g.source==="server"?y.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new t0(Ld(p.path),b,{includeMetadataChanges:!0,Ka:!0});return Wg(l,_)})(await Ed(r),r.asyncQueue,e,t,s))),s.promise}function t5(r,e,t={}){const s=new ti;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,g,y){const b=new s0({next:T=>{b.Nu(),u.enqueueAndForget((()=>Zg(l,_))),T.fromCache&&g.source==="server"?y.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new t0(p,b,{includeMetadataChanges:!0,Ka:!0});return Wg(l,_)})(await Ed(r),r.asyncQueue,e,t,s))),s.promise}function n5(r,e){const t=new ti;return r.asyncQueue.enqueueAndForget((async()=>B4(await W4(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="ComponentProvider",M_=new Map;function s5(r,e,t,s,a){return new Tk(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,sT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="firestore.googleapis.com",L_=!0;class V_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iT,this.ssl=L_}else this.host=e.host,this.ssl=e.ssl??L_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<II)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $d{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new rk;switch(s.type){case"firstParty":return new ok(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=M_.get(t);s&&(ge(r5,"Removing Datastore"),M_.delete(t),s.terminate())})(this),Promise.resolve()}}function i5(r,e,t,s={}){var y;r=xr(r,$d);const a=El(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${t}`;a&&(Z1(`https://${p}`),ew("Firestore",!0)),l.host!==iT&&l.host!==p&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:p,ssl:a,emulatorOptions:s};if(!no(g,u)&&(r._setSettings(g),s.mockUserToken)){let b,_;if(typeof s.mockUserToken=="string")b=s.mockUserToken,_=Mn.MOCK_USER;else{b=fN(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Mn(T)}r._authCredentials=new sk(new Qw(b,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class Yt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ou(t,Yt._jsonSchema))return new Yt(e,s||null,new Ce(Nt.fromString(t.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:un("string",Yt._jsonSchemaVersion),referencePath:un("string")};class ha extends yo{constructor(e,t,s){super(e,t,Ld(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new Ce(e))}withConverter(e){return new ha(this.firestore,e,this._path)}}function Ea(r,e,...t){if(r=yn(r),Kw("collection","path",e),r instanceof $d){const s=Nt.fromString(e,...t);return Jx(s),new ha(r,null,s)}{if(!(r instanceof Yt||r instanceof ha))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Nt.fromString(e,...t));return Jx(s),new ha(r.firestore,null,s)}}function oi(r,e,...t){if(r=yn(r),arguments.length===1&&(e=Ig.newId()),Kw("doc","path",e),r instanceof $d){const s=Nt.fromString(e,...t);return Xx(s),new Yt(r,null,new Ce(s))}{if(!(r instanceof Yt||r instanceof ha))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Nt.fromString(e,...t));return Xx(s),new Yt(r.firestore,r instanceof ha?r.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="AsyncQueue";class z_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BE(this,"async_queue_retry"),this._c=()=>{const s=Tm();s&&ge(U_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Tm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Tm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ti;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Al(e))throw e;ge(U_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,si("INTERNAL UNHANDLED ERROR: ",B_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Xg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ke(47125,{Pc:B_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function B_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class va extends $d{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new z_,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z_(e),this._firestoreClient=void 0,await e}}}function a5(r,e){const t=typeof r=="object"?r:sw(),s=typeof r=="string"?r:fd,a=_g(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=hN("firestore");l&&i5(a,...l)}return a}function Yd(r){if(r._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||o5(r),r._firestoreClient}function o5(r){var s,a,l,u;const e=r._freezeSettings(),t=s5(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new X4(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zr(Rn.fromBase64String(e))}catch(t){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zr(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ou(e,zr._jsonSchema))return zr.fromBase64String(e.bytes)}}zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:un("string",zr._jsonSchemaVersion),bytes:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:As._jsonSchemaVersion}}static fromJSON(e){if(ou(e,As._jsonSchema))return new As(e.latitude,e.longitude)}}As._jsonSchemaVersion="firestore/geoPoint/1.0",As._jsonSchema={type:un("string",As._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ou(e,ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ts(e.vectorValues);throw new fe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:un("string",ts._jsonSchemaVersion),vectorValues:un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=/^__.*__$/;class c5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}class aT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{dataSource:r})}}class o0{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new o0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Td(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(oT(this.dataSource)&&l5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class u5{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Gd(e)}createContext(e,t,s,a=!1){return new o0({dataSource:e,methodName:t,targetDoc:s,path:Nn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function l0(r){const e=r._freezeSettings(),t=Gd(r._databaseId);return new u5(r._databaseId,!!e.ignoreUndefinedProperties,t)}function h5(r,e,t,s,a,l={}){const u=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);c0("Data must be an object, but it was:",u,s);const p=lT(s,u);let g,y;if(l.merge)g=new br(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const b=[];for(const _ of l.mergeFields){const T=wl(e,_,t);if(!u.contains(T))throw new fe(te.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);hT(b,T)||b.push(T)}g=new br(b),y=u.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=u.fieldTransforms;return new c5(new ir(p),g,y)}class Qd extends a0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}function d5(r,e,t,s){const a=r.createContext(1,e,t);c0("Data must be an object, but it was:",a,s);const l=[],u=ir.empty();_a(s,((g,y)=>{const b=uT(e,g,t);y=yn(y);const _=a.childContextForFieldPath(b);if(y instanceof Qd)l.push(b);else{const T=fu(y,_);T!=null&&(l.push(b),u.set(b,T))}}));const p=new br(l);return new aT(u,p,a.fieldTransforms)}function f5(r,e,t,s,a,l){const u=r.createContext(1,e,t),p=[wl(e,s,t)],g=[a];if(l.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)p.push(wl(e,l[T])),g.push(l[T+1]);const y=[],b=ir.empty();for(let T=p.length-1;T>=0;--T)if(!hT(y,p[T])){const R=p[T];let V=g[T];V=yn(V);const $=u.childContextForFieldPath(R);if(V instanceof Qd)y.push(R);else{const Z=fu(V,$);Z!=null&&(y.push(R),b.set(R,Z))}}const _=new br(y);return new aT(b,_,u.fieldTransforms)}function p5(r,e,t,s=!1){return fu(t,r.createContext(s?4:3,e))}function fu(r,e){if(cT(r=yn(r)))return c0("Unsupported field value:",e,r),lT(r,e);if(r instanceof a0)return(function(s,a){if(!oT(a.dataSource))throw a.createError(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const p of s){let g=fu(p,a.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(r,e)}return(function(s,a){if((s=yn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Kk(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=kt.fromDate(s);return{timestampValue:bd(a.serializer,l)}}if(s instanceof kt){const l=new kt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:bd(a.serializer,l)}}if(s instanceof As)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof zr)return{bytesValue:RE(a.serializer,s._byteString)};if(s instanceof Yt){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Bg(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ts)return(function(u,p){const g=u instanceof ts?u.toArray():u;return{mapValue:{fields:{[sE]:{stringValue:iE},[pd]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Lg(p.serializer,b)}))}}}}}})(s,a);if(ME(s))return s._toProto(a.serializer);throw a.createError(`Unsupported field value: ${jd(s)}`)})(r,e)}function lT(r,e){const t={};return Ww(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(r,((s,a)=>{const l=fu(a,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function cT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof kt||r instanceof As||r instanceof zr||r instanceof Yt||r instanceof a0||r instanceof ts||ME(r))}function c0(r,e,t){if(!cT(t)||!Xw(t)){const s=jd(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function wl(r,e,t){if((e=yn(e))instanceof i0)return e._internalPath;if(typeof e=="string")return uT(r,e);throw Td("Field path arguments must be of type string or ",r,!1,void 0,t)}const m5=new RegExp("[~\\*/\\[\\]]");function uT(r,e,t){if(e.search(m5)>=0)throw Td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new i0(...e.split("."))._internalPath}catch{throw Td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Td(r,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${a}`),g+=")"),new fe(te.INVALID_ARGUMENT,p+r+g)}function hT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{convertValue(e,t="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return _a(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[pd].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>Wt(u.doubleValue)));return new ts(t)}convertGeoPoint(e){return new As(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Md(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const t=fa(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Nt.fromString(e);ft(PE(s),9688,{name:e});const a=new Kc(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return a.isEqual(t)||si(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends g5{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}}const H_="@firebase/firestore",G_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(wl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class y5 extends dT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h0{}class v5 extends h0{}function Kd(r,e,...t){let s=[];e instanceof h0&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((g=>g instanceof d0)).length,p=l.filter((g=>g instanceof Xd)).length;if(u>1||u>0&&p>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class Xd extends v5{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Xd(e,t,s)}_apply(e){const t=this._parse(e);return pT(e._query,t),new yo(e.firestore,e.converter,Km(e._query,t))}_parse(e){const t=l0(e.firestore);return(function(l,u,p,g,y,b,_){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){$_(_,b);const V=[];for(const $ of _)V.push(F_(g,l,$));T={arrayValue:{values:V}}}else T=F_(g,l,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||$_(_,b),T=p5(p,u,_,b==="in"||b==="not-in");return cn.create(y,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Jd(r,e,t){const s=e,a=wl("where",r);return Xd._create(a,s,t)}class d0 extends h0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new d0(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:rs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const p=l.getFlattenedFilters();for(const g of p)pT(u,g),u=Km(u,g)})(e._query,t),new yo(e.firestore,e.converter,Km(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function F_(r,e,t){if(typeof(t=yn(t))=="string"){if(t==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fE(e)&&t.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Nt.fromString(t));if(!Ce.isDocumentKey(s))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return i_(r,new Ce(s))}if(t instanceof Yt)return i_(r,t._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(t)}.`)}function $_(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pT(r,e){const t=(function(a,l){for(const u of a)for(const p of u.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function b5(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class jc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eo extends dT{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(wl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",eo._jsonSchema={type:un("string",eo._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class Wh extends eo{data(e={}){return super.data(e)}}class to{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new jc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Wh(this._firestore,this._userDataWriter,s.key,s,new jc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((p=>{const g=new Wh(a._firestore,a._userDataWriter,p.doc.key,p.doc,new jc(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const g=new Wh(a._firestore,a._userDataWriter,p.doc.key,p.doc,new jc(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,b=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),b=u.indexOf(p.doc.key)),{type:x5(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=to._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ig.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function x5(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */to._jsonSchemaVersion="firestore/querySnapshot/1.0",to._jsonSchema={type:un("string",to._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(r){r=xr(r,Yt);const e=xr(r.firestore,va),t=Yd(e);return e5(t,r._key).then((s=>vT(e,r,s)))}function kl(r){r=xr(r,yo);const e=xr(r.firestore,va),t=Yd(e),s=new u0(e);return fT(r._query),t5(t,r._query).then((a=>new to(e,s,r,a)))}function gT(r,e,t){r=xr(r,Yt);const s=xr(r.firestore,va),a=b5(r.converter,e),l=l0(s);return p0(s,[h5(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,es.none())])}function f0(r,e,t,...s){r=xr(r,Yt);const a=xr(r.firestore,va),l=l0(a);let u;return u=typeof(e=yn(e))=="string"||e instanceof i0?f5(l,"updateDoc",r._key,e,t,s):d5(l,"updateDoc",r._key,e),p0(a,[u.toMutation(r._key,es.exists(!0))])}function Sd(r){return p0(xr(r.firestore,va),[new Vg(r._key,es.none())])}function yT(r,...e){var y,b,_;r=yn(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||q_(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(q_(e[s])){const T=e[s];e[s]=(y=T.next)==null?void 0:y.bind(T),e[s+1]=(b=T.error)==null?void 0:b.bind(T),e[s+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,u,p;if(r instanceof Yt)u=xr(r.firestore,va),p=Ld(r._key.path),l={next:T=>{e[s]&&e[s](vT(u,r,T))},error:e[s+1],complete:e[s+2]};else{const T=xr(r,yo);u=xr(T.firestore,va),p=T._query;const R=new u0(u);l={next:V=>{e[s]&&e[s](new to(u,R,T,V))},error:e[s+1],complete:e[s+2]},fT(r._query)}const g=Yd(u);return Z4(g,p,a,l)}function p0(r,e){const t=Yd(r);return n5(t,e)}function vT(r,e,t){const s=t.docs.get(e._key),a=new u0(r);return new eo(r,a,e._key,s,new jc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){nk(Tl),gl(new ro("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),p=new va(new ik(s.getProvider("auth-internal")),new lk(u,s.getProvider("app-check-internal")),Sk(u,a),u);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),ca(H_,G_,e),ca(H_,G_,"esm2020")})();const _5={apiKey:"AIzaSyD2rR0OH2OzSlt4fs2w72TKOUNDngp0zXQ",authDomain:"singmode-7c657.firebaseapp.com",projectId:"singmode-7c657",storageBucket:"singmode-7c657.firebasestorage.app",messagingSenderId:"292866266443",appId:"1:292866266443:web:190d34e55980509c1b04ce"},bT=rw(_5),m0=ek(bT),kn=a5(bT),g0="kstar_karaoke_session",Cn="kstar_active_user",An="kstar_user_accounts";let Qt=!1,Y_=Promise.resolve();const pu=async r=>await(Y_=Y_.then(async()=>{const t=await Ke(),s=await r(t);return await gt(t),s})),xT={id:"current-session",participants:[],requests:[],currentRound:null,history:[],messages:[],tickerMessages:[],verifiedSongbook:[],isPlayingVideo:!1,nextRequestNumber:1,maxRequestsPerUser:5,bannedUsers:[],deviceConnections:[],queueStrategy:Es.FRESH_MEAT,startedAt:Date.now()},ag=typeof window<"u"&&window.chrome&&window.chrome.storage,st={get:async r=>{if(ag)return(await window.chrome.storage.local.get([r]))[r];const e=localStorage.getItem(r);return e?JSON.parse(e):null},set:async(r,e)=>{ag?await window.chrome.storage.local.set({[r]:e}):localStorage.setItem(r,JSON.stringify(e)),typeof window<"u"&&(window.dispatchEvent(new Event("kstar_sync")),window.dispatchEvent(new Event("storage")))}};Et.onStateReceived=r=>{Qt&&st.set(g0,r)};Et.onActionReceived=r=>{w5(r)};Et.onPeerConnected=async()=>{if(!Qt){const r=await Ke();Et.broadcastState(r)}};async function w5(r){switch(r.type){case"ADD_REQUEST":await Xi(r.payload);break;case"JOIN_SESSION":{const{id:s,profile:a}=r.payload;if(a){const l=await zt(),u=l.findIndex(p=>p.id===s);u===-1?(l.push(a),await st.set(An,l)):(l[u]={...l[u],...a},await st.set(An,l))}await sa(s),og(`${(a==null?void 0:a.name)||s} joined the session`,"info"),await pu(l=>{l.deviceConnections||(l.deviceConnections=[]);const u=l.deviceConnections.findIndex(p=>p.peerId===r.senderId);u>-1?(l.deviceConnections[u].userId=s,l.deviceConnections[u].isGuest=(a==null?void 0:a.isGuest)??!1,r.payload.userAgent&&(l.deviceConnections[u].userAgent=r.payload.userAgent)):l.deviceConnections.push({id:`D-${Math.random().toString(36).substr(2,4).toUpperCase()}`,peerId:r.senderId,connectedAt:Date.now(),lastSeen:Date.now(),status:"connected",userAgent:r.payload.userAgent||"Unknown",userId:s,isGuest:(a==null?void 0:a.isGuest)??!1})});break}case"TOGGLE_STATUS":await ia(r.payload.id,r.payload.status);break;case"TOGGLE_MIC":await V5(r.payload.id,r.payload.enabled);break;case"DELETE_REQUEST":await Ji(r.payload);break;case"UPDATE_REQUEST":await zc(r.payload.id,r.payload.updates);break;case"ADD_CHAT":await G5(r.senderId,r.payload.name,r.payload.text);break;case"SYNC_PROFILE":if(Qt){const s=await Yn();s&&s.id===r.payload.id&&await st.set(Cn,r.payload)}const e=await zt(),t=e.findIndex(s=>s.id===r.payload.id);t>-1?e[t]=r.payload:e.push(r.payload),await st.set(An,e);break;case"TOGGLE_FAVORITE":Qt||await ET(r.payload,r.senderId);break;case"REORDER_ROUND":await TT(r.payload);break;case"REORDER_REQUESTS":await ST(r.payload);break;case"REORDER_PENDING":await NT(r.payload);break;case"REORDER_MY_REQUESTS":await cg(r.senderId,r.payload.requestId,r.payload.direction);break}}const Zh=async(r,e)=>{Qt=r==="PARTICIPANT"&&!!e;const t=await Et.initialize(r,e);if(!Qt&&t){const s=await Yn(),a=(s==null?void 0:s.name)||"SingMode DJ",l=s==null?void 0:s.id;await F5({id:t,hostName:a,hostUid:l,isActive:!0,startedAt:Date.now()});const u=setInterval(()=>{$5(t)},120*1e3);window.addEventListener("beforeunload",()=>{clearInterval(u),CT(t)});const p=Ea(kn,"users");yT(p,g=>{const y=[];g.forEach(b=>{y.push(b.data())}),console.log("Synced users from Firestore:",y.length),st.set(An,y)}),Et.onDeviceConnected=g=>{E5(g),og(`New device connected: ${g.substr(0,8)}...`,"info")},Et.onDeviceDisconnected=async g=>{const y=await Ke();if(y.deviceConnections){const b=y.deviceConnections.findIndex(_=>_.peerId===g);if(b>-1){const _=y.deviceConnections[b].id;y.deviceConnections[b].status="disconnected",y.deviceConnections[b].lastSeen=Date.now(),await gt(y),og(`Device disconnected: ${_}`,"warn")}}}}},E5=async r=>{await pu(e=>{e.deviceConnections||(e.deviceConnections=[]);const t=e.deviceConnections.findIndex(s=>s.peerId===r);t>-1?(e.deviceConnections[t].status="connected",e.deviceConnections[t].lastSeen=Date.now()):e.deviceConnections.push({id:`D-${Math.random().toString(36).substr(2,4).toUpperCase()}`,peerId:r,connectedAt:Date.now(),lastSeen:Date.now(),status:"connected",userAgent:"Unknown"})})},T5=async(r,e,t=!1)=>{await pu(s=>{if(!s.deviceConnections)return;const a=s.deviceConnections.findIndex(l=>l.id===r);a>-1&&(s.deviceConnections[a].userId=e,s.deviceConnections[a].isGuest=t)})},S5=async r=>{await pu(e=>{e.deviceConnections&&(e.deviceConnections=e.deviceConnections.filter(t=>t.id!==r))})},Ke=async()=>{const r=await st.get(g0)||{...xT};return r.history||(r.history=[]),r.messages||(r.messages=[]),r.tickerMessages||(r.tickerMessages=[]),r.verifiedSongbook||(r.verifiedSongbook=[]),r.isPlayingVideo===void 0&&(r.isPlayingVideo=!1),r.nextRequestNumber||(r.nextRequestNumber=1),r.maxRequestsPerUser===void 0&&(r.maxRequestsPerUser=5),r.bannedUsers||(r.bannedUsers=[]),r.deviceConnections||(r.deviceConnections=[]),r.logs||(r.logs=[]),r.queueStrategy||(r.queueStrategy=Es.FRESH_MEAT),r},gt=async r=>{await st.set(g0,r),Et.broadcastState(r)},og=async(r,e="info")=>{await pu(t=>{t.logs||(t.logs=[]),t.logs.push({timestamp:Date.now(),message:r,type:e}),t.logs.length>100&&(t.logs=t.logs.slice(-100))})},_T=(r,e)=>{if(e.youtubeUrl&&e.youtubeUrl.trim()!==""){const t=r.verifiedSongbook.find(s=>s.songName.toLowerCase()===e.songName.toLowerCase()&&s.artist.toLowerCase()===e.artist.toLowerCase());if(t)t.youtubeUrl!==e.youtubeUrl&&(t.youtubeUrl=e.youtubeUrl);else{const s={id:Math.random().toString(36).substr(2,9),songName:e.songName,artist:e.artist,youtubeUrl:e.youtubeUrl,type:e.type,addedAt:Date.now()};r.verifiedSongbook.push(s)}}},N5=async r=>{const e=await Ke(),t={...r,id:Math.random().toString(36).substr(2,9),addedAt:Date.now()};e.verifiedSongbook.push(t),await gt(e)},C5=async(r,e)=>{const t=await Ke(),s=t.verifiedSongbook.findIndex(a=>a.id===r);s!==-1&&(t.verifiedSongbook[s]={...t.verifiedSongbook[s],...e},await gt(t))},Q_=async r=>{const e=await Ke();e.verifiedSongbook=e.verifiedSongbook.filter(t=>t.id!==r),await gt(e)},A5=async()=>{const r=await Ke(),e={...xT,id:`session-${Date.now()}`,verifiedSongbook:r.verifiedSongbook,nextRequestNumber:1,startedAt:Date.now()};await gt(e)},zt=async()=>{let r=await st.get(An);if(!r||r.length===0){try{const t=Ea(kn,"users"),s=await kl(t),a=[];if(s.forEach(l=>a.push(l.data())),a.length>0)return await st.set(An,a),a}catch(t){console.error("Error fetching users from Firebase:",t)}return Array.from({length:5},(t,s)=>({id:`singer-${s+1}`,name:`Singer${s+1}`,favorites:[],personalHistory:[],createdAt:Date.now()}))}return r},co=async(r,e)=>{try{const t=oi(kn,"users",r);if(e.name&&(await zt()).find(p=>{var g;return p.id!==r&&p.name.toLowerCase()===((g=e.name)==null?void 0:g.toLowerCase())}))return{success:!1,error:"Username already exists."};await f0(t,e);const s=await zt(),a=s.findIndex(l=>l.id===r);if(a>-1){s[a]={...s[a],...e},await st.set(An,s);const l=await Yn();l&&l.id===r&&await st.set(Cn,s[a]),Qt||Et.broadcastAction({type:"SYNC_PROFILE",payload:s[a],senderId:"DJ"})}return{success:!0}}catch(t){return console.error("Error updating account:",t),{success:!1,error:t.message}}},R5=async(r,e)=>{const t=await zt(),s=t.findIndex(a=>a.id===r);if(s>-1){const a=t[s].favorites.filter(l=>l.id!==e);await co(r,{favorites:a})}},k5=async(r,e,t)=>{const s=await zt(),a=s.findIndex(l=>l.id===r);if(a>-1){const l=[...s[a].favorites],u=l.findIndex(p=>p.id===e);u>-1&&(l[u]={...l[u],...t},await co(r,{favorites:l}))}},I5=async(r,e)=>{const t=await zt(),s=t.findIndex(a=>a.id===r);if(s>-1){const a={...e,id:Math.random().toString(36).substr(2,9)},l=[...t[s].favorites,a];await co(r,{favorites:l})}},D5=async(r,e)=>{const t=await zt(),s=t.findIndex(a=>a.id===r);if(s>-1){const a=t[s].personalHistory.filter(l=>l.id!==e);await co(r,{personalHistory:a})}},j5=async(r,e,t)=>{const s=await zt(),a=s.findIndex(l=>l.id===r);if(a>-1){const l=[...s[a].personalHistory],u=l.findIndex(p=>p.id===e);u>-1&&(l[u]={...l[u],...t},await co(r,{personalHistory:l}))}},ed=async r=>{await lg(r);try{await Sd(oi(kn,"users",r));let t=await zt();t=t.filter(s=>s.id!==r),await st.set(An,t)}catch(t){console.error("Error deleting account",t)}const e=await Yn();e&&e.id===r&&await Wd()},wT=async()=>{try{const r=await zt(),e=[],t=new Map;for(const s of r){if(!s.password){e.push(s.id);continue}const a=s.name.toLowerCase().trim();t.has(a)?e.push(s.id):t.set(a,s.id)}if(e.length>0){for(const u of e)await Sd(oi(kn,"users",u));const s=Ea(kn,"users"),a=await kl(s),l=[];a.forEach(u=>l.push(u.data())),await st.set(An,l)}return{success:!0,deletedCount:e.length}}catch(r){return console.error("Cleanup failed:",r),{success:!1,error:String(r)}}},Yn=async()=>await st.get(Cn),Zc=async(r,e=!1)=>{var t;try{let s=r.id;const a=!!(r.password&&r.email),l=!!(r.password&&!r.email);if(a)try{s=(await UA(m0,r.email,r.password)).user.uid}catch(y){if(y.code==="auth/email-already-in-use")return{success:!1,error:"Email already in use."};throw y}else if(l){if((await zt()).find(_=>{var T;return _.name.toLowerCase()===((T=r.name)==null?void 0:T.trim().toLowerCase())}))return{success:!1,error:"Username already taken."};s=K_()||`user-${Date.now()}-${Math.random().toString(36).substr(2,5)}`}else s=r.id||K_()||`guest-${Math.random().toString(36).substr(2,9)}`;const u={id:s,name:((t=r.name)==null?void 0:t.trim())||"Guest",email:r.email||void 0,password:l?r.password:void 0,isGuest:!a&&!l,favorites:r.favorites||[],personalHistory:r.personalHistory||[],createdAt:Date.now()},p=JSON.parse(JSON.stringify(u));await gT(oi(kn,"users",s),p);const g=await zt();return g.some(y=>y.id===s)||(g.push(u),await st.set(An,g)),e?await st.set(Cn,u):Qt||Et.broadcastAction({type:"SYNC_PROFILE",payload:u,senderId:"DJ"}),{success:!0,profile:u}}catch(s){return console.error("Registration error:",s),{success:!1,error:s.message}}},K_=()=>{},O5=async(r,e)=>{if(r.toLowerCase()==="singmaster"&&e==="Organized"){const a={id:"admin-singmaster",name:"SingMaster",password:"Organized",favorites:[],personalHistory:[],createdAt:Date.now()};return await st.set(Cn,a),{success:!0,profile:a}}const t=await zt();let s=t.find(a=>a.name.toLowerCase()===r.toLowerCase());if(!s)try{const a=Ea(kn,"users"),l=Kd(a,Jd("name","==",r)),u=await kl(l);u.empty||(s=u.docs[0].data(),t.push(s),await st.set(An,t))}catch(a){console.warn("Error checking remote user:",a)}if(!s&&!e)return await Zc({name:r},!0);if(e)try{const a=`${r.replace(/\s+/g,"").toLowerCase()}@singmode.app`,u=(await zA(m0,a,e)).user.uid,p=await mT(oi(kn,"users",u));if(p.exists()){const g=p.data();return await st.set(Cn,g),{success:!0,profile:g}}else return s?{success:!0,profile:s}:{success:!1,error:"Profile data missing."}}catch(a){return console.warn("Firebase login failed, checking legacy local storage:",a),s?s.password&&s.password===e?(await st.set(Cn,s),{success:!0,profile:s}):{success:!1,error:"Incorrect passkey."}:{success:!1,error:a.message||"Login failed."}}return s?(await st.set(Cn,s),{success:!0,profile:s}):{success:!1,error:"User not found"}},P5=async r=>{const e=await zt();let t=e.find(s=>s.id===r);if(!t)try{const s=oi(kn,"users",r),a=await mT(s);a.exists()&&(t=a.data(),e.push(t),await st.set(An,e))}catch(s){console.error("Error fetching user by ID:",s)}return t?(await st.set(Cn,t),{success:!0,profile:t}):{success:!1,error:"User not found"}},Wd=async()=>{await GA(m0),ag?await window.chrome.storage.local.remove([Cn]):localStorage.removeItem(Cn),window.dispatchEvent(new Event("kstar_sync"))},sa=async r=>{var l;const e=await Ke(),t=(l=e.bannedUsers)==null?void 0:l.find(u=>u.id===r);if(t)throw new Error(`ACCESS DENIED: ${t.reason}`);if(Qt){const u=await Yn();return Et.sendAction({type:"JOIN_SESSION",payload:{id:r,profile:u,userAgent:typeof navigator<"u"?navigator.userAgent:"Unknown"},senderId:Et.getMyPeerId()||r}),{id:r,name:(u==null?void 0:u.name)||"Joining...",status:Vt.STANDBY,joinedAt:Date.now()}}const a=(await zt()).find(u=>u.id===r);if(!a){const u=await Yn();if(u&&u.id===r)return await X_(e,u);throw new Error("Profile not found")}return await X_(e,a)},X_=async(r,e)=>{const t={id:e.id,name:e.name,status:Vt.STANDBY,micEnabled:!1,joinedAt:Date.now()},s=r.participants.findIndex(a=>a.id===e.id);return s>-1?r.participants[s]={...r.participants[s],...t,status:r.participants[s].status}:r.participants.push(t),await gt(r),t},M5=async(r,e)=>{const t=await zt(),s=t.findIndex(a=>a.id===r);if(s>-1){t[s].vocalRange=e,await st.set(An,t),Qt||Et.broadcastAction({type:"SYNC_PROFILE",payload:t[s],senderId:"DJ"});const a=await Yn();a&&a.id===r&&await st.set(Cn,t[s])}},ET=async(r,e)=>{var l;const t=e||((l=await Yn())==null?void 0:l.id);if(!t)return;if(Qt&&!e){Et.sendAction({type:"TOGGLE_FAVORITE",payload:r,senderId:t});const u=await Yn();if(u){const p=u.favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);p>-1?u.favorites.splice(p,1):u.favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await st.set(Cn,u)}return}const s=await zt(),a=s.findIndex(u=>u.id===t);if(a>-1){const u=s[a].favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);u>-1?s[a].favorites.splice(u,1):s[a].favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await st.set(An,s),Qt||Et.broadcastAction({type:"SYNC_PROFILE",payload:s[a],senderId:"DJ"});const p=await Yn();p&&p.id===t&&await st.set(Cn,s[a])}},lg=async r=>{const e=await Ke(),s=e.requests.filter(a=>a.participantId===r).map(a=>({...a,playedAt:Date.now(),status:Ve.DONE,isInRound:!1}));s.length>0&&(e.history=[...s,...e.history].slice(0,100)),e.participants=e.participants.filter(a=>a.id!==r),e.requests=e.requests.filter(a=>a.participantId!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(a=>a.participantId!==r),e.currentRound.length===0&&(e.currentRound=null)),await gt(e)},ia=async(r,e)=>{if(Qt){Et.sendAction({type:"TOGGLE_STATUS",payload:{id:r,status:e},senderId:r});return}const t=await Ke(),s=t.participants.find(a=>a.id===r);s&&(s.status=e,await gt(t))},L5=async r=>{const e=await Ke();e.maxRequestsPerUser=r,await gt(e)},cg=async(r,e,t)=>{if(Qt){Et.sendAction({type:"REORDER_MY_REQUESTS",payload:{requestId:e,direction:t},senderId:r});return}const s=await Ke(),a=s.requests.filter(b=>b.participantId===r&&b.status!==Ve.DONE),l=a.findIndex(b=>b.id===e);if(l===-1)return;const u=t==="up"?l-1:l+1;if(u<0||u>=a.length)return;const[p]=a.splice(l,1);a.splice(u,0,p);const g=[...s.requests];g.map((b,_)=>b.participantId===r&&b.status!==Ve.DONE?_:-1).filter(b=>b!==-1).forEach((b,_)=>{g[b]=a[_]}),s.requests=g,await gt(s)},V5=async(r,e)=>{if(Qt){Et.sendAction({type:"TOGGLE_MIC",payload:{id:r,enabled:e},senderId:r});return}const t=await Ke(),s=t.participants.find(a=>a.id===r);s&&(s.micEnabled=e,await gt(t))},Xi=async r=>{if(Qt)return Et.sendAction({type:"ADD_REQUEST",payload:r,senderId:r.participantId}),null;const e=await Ke(),t=e.nextRequestNumber++,s={...r,id:Math.random().toString(36).substr(2,9),requestNumber:t,createdAt:Date.now(),status:Ve.PENDING,isInRound:!1},a=e.requests.filter(g=>g.participantId===r.participantId&&g.status===Ve.PENDING).length;if(e.maxRequestsPerUser&&a>=e.maxRequestsPerUser)throw new Error(`Request limit reached. Max ${e.maxRequestsPerUser} requests allowed per performer.`);e.requests.unshift(s),_T(e,s);const l=await zt(),u=l.findIndex(g=>g.id===r.participantId);u>-1&&(l[u].personalHistory=[s,...l[u].personalHistory].slice(0,50),await st.set(An,l),Qt||Et.broadcastAction({type:"SYNC_PROFILE",payload:l[u],senderId:"DJ"}));const p=await Yn();if(p&&p.id===r.participantId){const g=l.find(y=>y.id===r.participantId);g&&await st.set(Cn,g)}return await gt(e),s},zc=async(r,e)=>{if(Qt){Et.sendAction({type:"UPDATE_REQUEST",payload:{id:r,updates:e},senderId:"client"});return}const t=await Ke(),s=t.requests.findIndex(l=>l.id===r);let a="";if(s!==-1&&(t.requests[s]={...t.requests[s],...e},a=t.requests[s].participantId,_T(t,t.requests[s])),t.currentRound){const l=t.currentRound.findIndex(u=>u.id===r);l!==-1&&(t.currentRound[l]={...t.currentRound[l],...e},a=t.currentRound[l].participantId)}if(a){const l=await zt(),u=l.findIndex(g=>g.id===a);if(u>-1){const g=l[u].personalHistory.findIndex(y=>y.id===r);g!==-1&&(l[u].personalHistory[g]={...l[u].personalHistory[g],...e},await st.set(An,l),Qt||Et.broadcastAction({type:"SYNC_PROFILE",payload:l[u],senderId:"DJ"}))}const p=await Yn();if(p&&p.id===a){const g=l.find(y=>y.id===a);g&&await st.set(Cn,g)}}await gt(t)},Tc=async r=>{const e=await Ke(),t=e.requests.find(s=>s.id===r);t&&(t.status=Ve.APPROVED,await gt(e))},U5=async r=>{const e=await Ke(),t=e.requests.findIndex(a=>a.id===r);if(t===-1)return;const s=e.requests[t];s.status=Ve.APPROVED,s.isInRound=!0,e.currentRound?e.currentRound.push({...s}):e.currentRound=[{...s}],await gt(e)},J_=async r=>{if(Qt)return;const e=await Ke(),t=e.requests.find(s=>s.id===r);if(t){if(t.status=Ve.DONE,t.completedAt=Date.now(),e.currentRound){const s=e.currentRound.find(a=>a.id===r);s&&(s.status=Ve.DONE,s.completedAt=Date.now())}await gt(e)}},Ji=async r=>{if(Qt){Et.sendAction({type:"DELETE_REQUEST",payload:r,senderId:"client"});return}const e=await Ke();e.requests=e.requests.filter(t=>t.id!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(t=>t.id!==r),e.currentRound.length===0&&(e.currentRound=null)),await gt(e)},W_=async(r,e)=>{const t=await Ke(),s=t.requests.findIndex(l=>l.id===r);if(s===-1)return;const a=e==="up"?s-1:s+1;if(a>=0&&a<t.requests.length){const l=t.requests[s];t.requests[s]=t.requests[a],t.requests[a]=l,await gt(t)}},z5=async r=>{const e=await Ke();e.queueStrategy=r,await gt(e)},B5=async()=>{const r=await Ke(),e=r.queueStrategy||Es.FRESH_MEAT,t=r.requests.filter(a=>a.status===Ve.APPROVED&&a.type===dt.SINGING&&!a.isInRound),s=[];if(e===Es.FIFO){const a=[...t].sort((l,u)=>l.createdAt-u.createdAt);s.push(...a.slice(0,10))}else{let l=[...r.participants.filter(u=>t.some(p=>p.participantId===u.id))];switch(e){case Es.FRESH_MEAT:l.sort((g,y)=>(y.joinedAt||0)-(g.joinedAt||0));break;case Es.OLDEST_MEMBER:l.sort((g,y)=>(g.joinedAt||0)-(y.joinedAt||0));break;case Es.RANDOM:l.sort(()=>Math.random()-.5);break;case Es.FAIR_ROTATION:const u=g=>r.requests.filter(y=>y.participantId===g&&y.status===Ve.DONE).length,p=g=>{var b;return((b=t.filter(_=>_.participantId===g).sort((_,T)=>_.createdAt-T.createdAt)[0])==null?void 0:b.createdAt)||Date.now()};l.sort((g,y)=>{const b=u(g.id),_=u(y.id);return b!==_?b-_:p(g.id)-p(y.id)});break}l.forEach(u=>{const g=t.filter(y=>y.participantId===u.id).sort((y,b)=>y.createdAt-b.createdAt)[0];g&&s.push(g)})}if(s.length===0){const a=r.requests.filter(l=>l.status===Ve.APPROVED&&l.type===dt.LISTENING&&!l.isInRound).sort((l,u)=>l.createdAt-u.createdAt);a.length>0&&s.push(...a.slice(0,5))}s.forEach(a=>{const l=r.requests.find(u=>u.id===a.id);if(l&&(l.isInRound=!0),a.type===dt.SINGING){const u=r.participants.find(p=>p.id===a.participantId);u&&(u.status=Vt.READY)}}),s.length>0&&(r.currentRound=s,await gt(r))},TT=async r=>{const e=await Ke();e.currentRound=r,await gt(e)},ST=async r=>{const e=await Ke(),t=e.requests.filter(s=>!(s.status===Ve.APPROVED&&s.type===dt.SINGING&&!s.isInRound));e.requests=[...r,...t],await gt(e)},NT=async r=>{const e=await Ke(),t=e.requests.filter(s=>!(s.status===Ve.PENDING&&!s.isInRound));e.requests=[...r,...t],await gt(e)},H5=async()=>{const r=await Ke();if(!r.currentRound)return;const e=[...r.currentRound].sort((p,g)=>p.completedAt&&g.completedAt?p.completedAt-g.completedAt:p.completedAt?-1:g.completedAt?1:0),t=Date.now(),s=e.map(p=>({...p,playedAt:t,isInRound:!1,status:Ve.DONE,completedAt:p.completedAt||t})),a=r.currentRound.map(p=>p.id);r.history=[...s,...r.history].slice(0,100),r.requests=r.requests.filter(p=>!a.includes(p.id));const l=await zt();for(const p of s){const g=l.findIndex(y=>y.id===p.participantId);g!==-1&&(l[g].personalHistory=[p,...l[g].personalHistory].slice(0,50))}await st.set(An,l);const u=await Yn();if(u){const p=l.find(g=>g.id===u.id);p&&await st.set(Cn,p)}r.currentRound=null,r.isPlayingVideo=!1,await gt(r)},Nm=async(r,e)=>{const t=await Ke(),s=t.nextRequestNumber++,a={...r,id:Math.random().toString(36).substr(2,9),requestNumber:s,createdAt:Date.now(),status:Ve.APPROVED,isInRound:!1,playedAt:void 0,aiIntro:void 0};t.requests.push(a),await gt(t)},Z_=async()=>{const r=await Ke();r.history=[],await gt(r)},G5=async(r,e,t)=>{if(Qt){Et.sendAction({type:"ADD_CHAT",payload:{name:e,text:t},senderId:r});return}const s=await Ke(),a={id:Math.random().toString(36).substr(2,9),senderId:r,senderName:e,text:t,timestamp:Date.now()};s.messages||(s.messages=[]),s.messages.push(a),await gt(s)},q5=async()=>{const r=await zt(),e=Date.now(),t=1440*60*1e3,s=r.filter(a=>!a.password&&a.createdAt&&e-a.createdAt>t);if(s.length>0){for(const a of s)await ed(a.id);console.log(`Cleaned up ${s.length} expired guest accounts.`)}},F5=async r=>{try{const e={id:r.id,hostName:r.hostName||"SingMode DJ",hostUid:r.hostUid||"anonymous-host",appVersion:"singmode-v2",isActive:r.isActive??!0,startedAt:r.startedAt||Date.now(),lastHeartbeat:Date.now(),participantsCount:0,venueName:r.venueName||"SingMode Venue"};await gT(oi(kn,"sessions",r.id),e)}catch(e){console.error("Error registering session:",e)}},$5=async r=>{try{const e=oi(kn,"sessions",r);await f0(e,{lastHeartbeat:Date.now()})}catch(e){console.error("Error sending heartbeat:",e)}},CT=async r=>{try{const e=oi(kn,"sessions",r);await f0(e,{isActive:!1,endedAt:Date.now()})}catch(e){console.error("Error unregistering session:",e)}},Y5=async()=>{try{const r=Ea(kn,"sessions"),e=Kd(r,Jd("isActive","==",!1)),t=await kl(e),s=[];return t.forEach(a=>{s.push(a.data())}),s.sort((a,l)=>(l.endedAt||0)-(a.endedAt||0))}catch(r){return console.error("Error fetching session history:",r),[]}},Q5=async()=>{try{const r=Ea(kn,"sessions"),e=Kd(r,Jd("isActive","==",!0)),t=await kl(e),s=new Map,a=Date.now(),l=300*1e3;return t.forEach(u=>{const p=u.data();if(p.lastHeartbeat&&a-p.lastHeartbeat<l){const y=p.hostUid||`${p.hostName}-${p.venueName}`,b=s.get(y);(!b||p.lastHeartbeat>b.lastHeartbeat)&&s.set(y,p)}}),Array.from(s.values()).sort((u,p)=>p.lastHeartbeat-u.lastHeartbeat)}catch(r){return console.error("Error fetching sessions:",r),[]}},K5=async()=>{try{const r=Ea(kn,"sessions"),e=await kl(r),t=Date.now(),s=1800*1e3;let a=0;for(const l of e.docs){const u=l.data();u.lastHeartbeat&&t-u.lastHeartbeat>s?(await Sd(l.ref),a++):!u.lastHeartbeat&&t-u.startedAt>s&&(await Sd(l.ref),a++)}return{success:!0,deletedCount:a}}catch(r){return console.error("Cleanup failed:",r),{success:!1,error:String(r)}}},AT=r=>{const e=Ea(kn,"sessions"),t=Kd(e,Jd("isActive","==",!0));return yT(t,s=>{const a=new Map,l=Date.now(),u=300*1e3;s.forEach(g=>{const y=g.data(),b=y.lastHeartbeat&&l-y.lastHeartbeat<u,_=y.appVersion==="singmode-v2";if(b&&_){const T=y.hostUid||`${y.hostName}-${y.venueName}`,R=a.get(T);(!R||y.lastHeartbeat>R.lastHeartbeat)&&a.set(T,y)}});const p=Array.from(a.values()).sort((g,y)=>y.lastHeartbeat-g.lastHeartbeat);r(p)})},RT=({onSubmit:r,onCancel:e,title:t="Song Request",showSingerName:s=!1,initialSingerName:a="",initialSongName:l="",initialArtist:u="",initialYoutubeUrl:p="",initialType:g=dt.SINGING,submitLabel:y="SEND REQUEST",participants:b=[],currentUserId:_=""})=>{const[T,R]=ie.useState(a),V=T?`${t}: ${T}`:t,[$,Z]=ie.useState(l),[ae,de]=ie.useState(u),[me,ye]=ie.useState(p),[De,Te]=ie.useState(g),[A,C]=ie.useState(""),[k,L]=ie.useState(""),j=O=>{if(O.preventDefault(),(!$||!ae)&&!me||s&&!T)return;const I=b.find(it=>it.id===k);r({singerName:T,songName:$,artist:ae,youtubeUrl:me,type:De,message:A,duetPartnerId:k||void 0,duetPartnerName:I==null?void 0:I.name})};return h.jsxs("form",{onSubmit:j,className:"relative w-full bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in fade-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"mb-8 text-center",children:[h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase tracking-tight neon-text-glow-purple mb-2",children:V}),h.jsx("p",{className:"text-[10px] text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80",children:"NEW REQUEST"})]}),h.jsxs("div",{className:"space-y-6",children:[s&&h.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Your Name"}),h.jsx("input",{type:"text",required:!0,value:T,onChange:O=>R(O.target.value),placeholder:"e.g. STAR_VIBE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Song Title"}),h.jsx("input",{type:"text",value:$,onChange:O=>Z(O.target.value),placeholder:"TITLE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Artist"}),h.jsx("input",{type:"text",value:ae,onChange:O=>de(O.target.value),placeholder:"ARTIST",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"YouTube URL (Optional)"}),h.jsx("input",{type:"url",value:me,onChange:O=>ye(O.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all text-xs font-mono shadow-inner tracking-wider"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Note for DJ"}),h.jsx("textarea",{value:A,onChange:O=>C(O.target.value),placeholder:"Key change? Dedication?",rows:2,className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest resize-none"})]}),De===dt.SINGING&&b.length>1&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Duet Partner (Optional)"}),h.jsxs("select",{value:k,onChange:O=>L(O.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-green)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest appearance-none",children:[h.jsx("option",{value:"",children:"-- NO PARTNER --"}),b.filter(O=>O.id!==_).map(O=>h.jsx("option",{value:O.id,children:O.name},O.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Performance Mode"}),h.jsx("div",{className:"flex bg-black/40 p-1.5 rounded-2xl border-2 border-white/5",children:Object.values(dt).map(O=>h.jsx("button",{type:"button",onClick:()=>Te(O),className:`flex-1 py-3 rounded-xl font-bold text-[9px] uppercase tracking-widest transition-all font-righteous ${De===O?"bg-[var(--neon-cyan)] text-black shadow-[0_0_20px_rgba(0,229,255,0.4)]":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:O},O))})]}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{type:"button",onClick:e,className:"flex-1 py-4 bg-black hover:bg-white/5 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all border-2 border-white/10 font-righteous",children:"DISCARD"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_30px_rgba(255,0,127,0.4)] transition-all font-righteous hover:scale-105",children:y})]})]})]})};function X5(){if(typeof window>"u")return"/";const r=window.location.pathname.match(/^(\/[^/]+\/)/);return r?r[1]:"/"}function Nd(){if(typeof window>"u")return"";const r=window.location.port?`:${window.location.port}`:"",e=X5(),t=localStorage.getItem("kstar_network_ip");if(t){if(t.startsWith("http")){const l=t.replace(/\/$/,"");return l.endsWith(e.replace(/\/$/,""))?l+"/":l+e}return`http://${t.trim()}${r}${e}`}const s=window.location.origin;return!s.includes("localhost")&&!s.includes("127.0.0.1"),s+e}function ug(r){localStorage.setItem("kstar_network_ip",r),window.dispatchEvent(new Event("kstar_sync"))}function kT(){return localStorage.getItem("kstar_network_ip")}const J5=[{songName:"Bohemian Rhapsody",artist:"Queen"},{songName:"Toxic",artist:"Britney Spears"},{songName:"Someone Like You",artist:"Adele"},{songName:"Sweet Caroline",artist:"Neil Diamond"},{songName:"Wonderwall",artist:"Oasis"},{songName:"Dancing Queen",artist:"ABBA"},{songName:"I Will Survive",artist:"Gloria Gaynor"},{songName:"Don't Stop Believin'",artist:"Journey"},{songName:"Livin' on a Prayer",artist:"Bon Jovi"},{songName:"My Way",artist:"Frank Sinatra"}],Ki=({url:r})=>r?h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-3 rounded-2xl text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border-2 border-[var(--neon-cyan)]/10 transition-all shadow-xl",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,W5=({url:r})=>{const[e,t]=ie.useState(!1);if(!r)return null;const s=()=>{navigator.clipboard.writeText(r).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:s,title:"Copy Video URL",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-cyan)] text-black border-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)]":"text-slate-400 hover:text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1-2-2h9a2 2 0 0 1 2 2v1"})]})})},Sc=({request:r})=>{const[e,t]=ie.useState(!1),s=r.songName||r.songName,a=()=>{const u=(r.type||r.type||dt.SINGING)===dt.SINGING?" Karaoke":" Lyric",p=`${s} ${r.artist}${u}`;navigator.clipboard.writeText(p).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:a,title:"Copy Command String",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-green)] text-black border-[var(--neon-green)] shadow-[0_0_20px_rgba(0,255,157,0.4)]":"text-slate-400 hover:text-[var(--neon-green)] hover:bg-[var(--neon-green)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})},Nc=({request:r})=>{const e=r.songName||r.songName,t=()=>{const a=(r.type||r.type||dt.SINGING)===dt.SINGING?" Karaoke":" Lyric",l=encodeURIComponent(`${e} ${r.artist}${a}`);window.open(`https://www.youtube.com/results?search_query=${l}`,"_blank")};return h.jsx("button",{onClick:t,title:"Search on YouTube",className:"p-3 rounded-2xl transition-all border-2 text-rose-500 hover:text-white hover:bg-rose-500 border-white/5 shadow-xl",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})})},Z5=({onAdminAccess:r})=>{var Aa,bi;const[e,t]=ie.useState(null),[s,a]=ie.useState([]),[l,u]=ie.useState(!1),[p,g]=ie.useState(!1),[y,b]=ie.useState(null),[_,T]=ie.useState(!1),[R,V]=ie.useState(!1),[$,Z]=ie.useState(!1),[ae,de]=ie.useState(!1),[me,ye]=ie.useState(!1),[De,Te]=ie.useState([]),[A,C]=ie.useState(null),[k,L]=ie.useState(null),[j,O]=ie.useState(null),[I,it]=ie.useState({}),[yt,Q]=ie.useState(!1),[oe,we]=ie.useState(!1),[Be,at]=ie.useState([]),[P,W]=ie.useState("DAY_SHOW"),[ce,ue]=ie.useState(!1),[Se,Ie]=ie.useState(kT()||""),[Pe,Pt]=ie.useState(""),[$e,Br]=ie.useState(!1),[ss,is]=ie.useState(0),[ks,ar]=ie.useState(null),[Is,se]=ie.useState(new Set),[pe,Xe]=ie.useState(""),[Ge,Fe]=ie.useState(null),[Mt,qe]=ie.useState("COMMAND"),[hn,Zt]=ie.useState(""),[Bn,as]=ie.useState(null),[Hr,os]=ie.useState(""),[li,vo]=ie.useState(localStorage.getItem("singmode_last_session_name")),ci=ie.useRef(null);ie.useRef(null);const ui=ie.useRef(null),Kn=ie.useRef(null),[vt,en]=ie.useState(null),[Ee,vn]=ie.useState(null),[hi,ls]=ie.useState(!1),[bn,_r]=ie.useState({name:"",password:""}),[Ct,dn]=ie.useState(""),[wr,In]=ie.useState(!1),[bo,di]=ie.useState(""),[or,Ds]=ie.useState([]),[Ta,Gr]=ie.useState({isOpen:!1,message:"",onConfirm:()=>{}}),Bt=(E,X)=>{Gr({isOpen:!0,message:E,onConfirm:X})};ie.useEffect(()=>{const E=AT(X=>{Ds(X)});return()=>E()},[]);const be=ie.useCallback(async()=>{const E=await Ke();t(E);const X=await zt();a(X)},[]);ie.useEffect(()=>{if(Ee&&s.length>0){const E=s.find(X=>X.id===Ee.id);E&&JSON.stringify(E)!==JSON.stringify(Ee)&&vn(E)}},[s,Ee]),ie.useEffect(()=>(be(),window.addEventListener("kstar_sync",be),window.addEventListener("storage",be),()=>{window.removeEventListener("kstar_sync",be),window.removeEventListener("storage",be),qr()}),[be]),ie.useEffect(()=>{oe&&Y5().then(at).catch(console.error)},[oe]);const cs=async E=>{ue(!0);const X=E||P;try{await Zh("DJ",X),localStorage.setItem("singmode_last_session_name",X),vo(X),be()}catch(U){alert(U.message)}finally{ue(!1)}};ie.useEffect(()=>{(!(e!=null&&e.currentRound)||e.currentRound.length===0)&&se(new Set)},[e==null?void 0:e.currentRound]);const qr=()=>{Kn.current&&cancelAnimationFrame(Kn.current),ui.current&&(ui.current.getTracks().forEach(E=>E.stop()),ui.current=null),ci.current&&(ci.current.close(),ci.current=null),Br(!1),is(0)},Sa=async(E,X,U)=>{const ne=`Taking the stage now, it's ${E} with "${X}"!`;await zc(U,{aiIntro:ne}),it(he=>({...he,[U]:ne})),await be()},lr=async E=>{if(k&&Ee)k.type==="favorite"?await k5(Ee.id,k.itemId,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}):await j5(Ee.id,k.itemId,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),L(null);else if(A)await zc(A.id,{participantName:E.singerName||A.participantName,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),C(null);else if(y)await C5(y.id,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),b(null);else if(p)await N5({songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),g(!1);else{let X=(j==null?void 0:j.id)||"DJ-MANUAL",U=E.singerName||(j==null?void 0:j.name)||"Guest";if(!j&&E.singerName){const ne=await Zc({name:E.singerName});ne.success&&ne.profile&&(X=ne.profile.id,U=ne.profile.name,await sa(X))}await Xi({participantId:X,participantName:U,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),u(!1),O(null)}await be()},Xn=async E=>{await sa(E.id);const X=[...J5];for(let U=0;U<3&&X.length!==0;U++){const ne=Math.floor(Math.random()*X.length),he=X.splice(ne,1)[0],je=await Xi({participantId:E.id,participantName:E.name,songName:he.songName,artist:he.artist,type:dt.SINGING});je&&await Tc(je.id)}await ia(E.id,Vt.READY),await be()},It=(E,X,U)=>{const ne=U===dt.SINGING?`${E} ${X} karaoke`:`${E} ${X} Lyrics Letra`,he=`https://www.youtube.com/results?search_query=${encodeURIComponent(ne)}`;window.open(he,"_blank")},Ht=async E=>{var ne;await U5(E),await be();const U=(ne=(await Ke()).currentRound)==null?void 0:ne.find(he=>he.id===E);U&&Sa(U.participantName,U.songName,U.id)},Er=E=>{E.youtubeUrl?window.open(E.youtubeUrl,"_blank"):It(E.songName,E.artist,E.type)},fi=async E=>{E.preventDefault(),dn("");const X={name:bn.name,password:bn.password||void 0};let U;vt?U=await co(vt.id,X):U=await Zc(X),U.success?(en(null),ls(!1),_r({name:"",password:""}),dn(""),await be()):dn(U.error||"Action failed.")},[pi,Na]=ie.useState(null),[xo,cr]=ie.useState(null),js=(E,X,U)=>{Na(X),cr(U),E.dataTransfer.effectAllowed="move"},ur=E=>{E.preventDefault(),E.dataTransfer.dropEffect="move"},Hn=async(E,X,U)=>{if(E.preventDefault(),!(pi===null||xo!==U)){if(U==="ROUND"&&(e!=null&&e.currentRound)){const ne=Array.from(e.currentRound),[he]=ne.splice(pi,1);ne.splice(X,0,he),await TT(ne)}else if(U==="QUEUE"){const he=Array.from(tn),[je]=he.splice(pi,1);he.splice(X,0,je),await ST(he)}else if(U==="PENDING"){const he=Array.from(us),[je]=he.splice(pi,1);he.splice(X,0,je),await NT(he)}Na(null),cr(null),await be()}},Dn=E=>{en(E),ls(!0),_r({name:E.name,password:E.password||""})},Tr=E=>{en(E),di(""),In(!0),dn(""),vn(null)},Gt=async E=>{if(E.preventDefault(),!vt)return;const X=await co(vt.id,{password:bo});X.success?(vn(vt),en(null),In(!1),di(""),dn(""),await be()):dn(X.error||"Update failed.")},mi=()=>{u(!1),C(null),L(null),O(null),T(!1),V(!1),Z(!1),de(!1),ye(!1),ls(!1),In(!1),en(null),vn(null),Q(!1),g(!1),b(null),Fe(null),as(null)},Ca=()=>{ug(Se),Q(!1),be()},Sr=async()=>{await B5(),V(!1),await be();const E=await Ke();E.currentRound&&E.currentRound.forEach(X=>{X.aiIntro||Sa(X.participantName,X.songName,X.id)})},Nr=async()=>{await A5(),ye(!1),await be()},Cr=E=>{const X=s.find(U=>U.id===E);X&&(vn(X),Z(!0))};if(!e)return h.jsx("div",{className:"flex items-center justify-center p-20 min-h-screen",children:h.jsx("div",{className:"w-12 h-12 border-4 border-teal-400 border-t-transparent rounded-full animate-spin"})});const us=e.requests.filter(E=>E.status===Ve.PENDING&&!E.isInRound),gi=e.requests.filter(E=>E.status===Ve.APPROVED&&E.type===dt.SINGING&&!E.isInRound),_o=e.participants.filter(E=>gi.some(X=>X.participantId===E.id)).sort((E,X)=>(X.joinedAt||0)-(E.joinedAt||0)),Gn={};gi.forEach(E=>{Gn[E.participantId]||(Gn[E.participantId]=[]),Gn[E.participantId].push(E)}),Object.keys(Gn).forEach(E=>{Gn[E].sort((X,U)=>X.createdAt-U.createdAt)});const tn=[];let Dt=0,qt=!0;for(;qt;)qt=!1,_o.forEach(E=>{Gn[E.id]&&Gn[E.id][Dt]&&(tn.push(Gn[E.id][Dt]),qt=!0)}),Dt++;const Jn=e.requests.filter(E=>E.status===Ve.APPROVED&&E.type===dt.LISTENING&&!E.isInRound),yi=e.participants.filter(E=>E.status===Vt.READY).length,nt=e.verifiedSongbook||[],Lt=Et.getRoomId();Nd()+(Lt?`?room=${Lt}`:"");const hr=({name:E,isActive:X})=>{const U=E.split(" ").map(je=>je[0]).join("").toUpperCase().slice(0,2),ne=["from-teal-400 to-indigo-500","from-rose-400 to-orange-500","from-amber-400 to-rose-500","from-indigo-400 to-purple-500","from-emerald-400 to-teal-500"],he=E.length%ne.length;return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${ne[he]} p-[2px] shadow-lg shadow-black/20`,children:h.jsx("div",{className:"w-full h-full bg-slate-950 rounded-[14px] flex items-center justify-center",children:h.jsx("span",{className:"text-xl font-black text-white tracking-widest",children:U})})}),X&&h.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-[var(--neon-green)] rounded-full border-4 border-slate-950 animate-pulse"})]})},hs=nt.filter(E=>E.songName.toLowerCase().includes(hn.toLowerCase())||E.artist.toLowerCase().includes(hn.toLowerCase())),jn=async E=>{if(Ge){const X=await Xi({participantId:Ge.id,participantName:Ge.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl||"",type:E.type});X&&await Tc(X.id),Fe(null),Zt(""),await be()}},vi=E=>{b(E)};return h.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-8 space-y-12 relative font-inter text-slate-300",children:[h.jsxs("header",{className:"relative rounded-[4rem] p-1 overflow-hidden shadow-3xl mb-12 group",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] opacity-80 group-hover:opacity-100 transition-all duration-1000 animate-gradient-x"}),h.jsxs("div",{className:"relative glass-panel rounded-[3.9rem] p-10 flex flex-col md:flex-row justify-between items-center gap-12 border border-white/20 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex items-center gap-10",children:[h.jsxs("div",{className:"relative group/logo",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-[var(--neon-yellow)] to-[var(--neon-pink)] rounded-full blur-xl opacity-60 group-hover/logo:opacity-100 transition-opacity duration-500"}),h.jsx("div",{className:"relative p-1.5 rounded-full border-4 border-white/10 shadow-2xl bg-black/40",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-32 h-32 rounded-full transition-transform duration-700 group-hover/logo:rotate-[360deg]"})})]}),h.jsxs("div",{children:[h.jsxs("h1",{className:"text-8xl font-bold font-bungee text-white flex items-center gap-6 uppercase tracking-tight neon-glow-pink leading-none",children:["Singmode v.2 ",h.jsx("span",{className:"text-[var(--neon-blue)] neon-glow-cyan text-5xl font-righteous translate-y-2",children:"beta"})]}),h.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[h.jsx("span",{className:"px-4 py-1.5 rounded-full bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] text-lg font-bold uppercase tracking-widest font-righteous",children:"DJ CONSOLE"}),h.jsx("span",{className:"text-[var(--neon-blue)]/30",children:"||"}),h.jsxs("span",{className:"text-[var(--neon-blue)] text-lg font-bold uppercase tracking-widest font-righteous neon-glow-cyan",children:["SINGERS: ",e.participants.length]})]})]})]}),h.jsx("div",{className:"flex gap-4",children:h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-base text-[var(--neon-yellow)] font-bold uppercase tracking-widest font-righteous mb-1",children:"STATUS"}),h.jsxs("div",{className:"text-4xl text-white font-bold uppercase tracking-widest font-bungee flex items-center justify-end gap-3",children:["ONLINE ",h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-pulse shadow-[0_0_10px_var(--neon-green)]"})]})]})})]})]}),h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[2.5rem] p-6 border border-white/5 shadow-xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[var(--neon-purple)]/5 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6 relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-5",children:[h.jsx("span",{className:"text-4xl",children:""}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold font-bungee text-white uppercase neon-glow-purple",children:"DAY_SHOW SESSION"}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:`text-xs font-black uppercase tracking-widest font-righteous ${Lt?"text-[var(--neon-green)]":"text-slate-500"}`,children:Lt?" ACTIVE":" OFFLINE"}),Lt&&h.jsxs("span",{className:"text-slate-400 font-mono text-xs",children:["ROOM: ",h.jsx("span",{className:"text-white font-bold",children:Lt})]})]})]})]}),h.jsxs("div",{className:"flex gap-3",children:[!Lt&&h.jsx("button",{onClick:()=>qe("SESSION"),className:"px-6 py-3 bg-[var(--neon-purple)] text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-fuchsia-500 transition-all font-righteous shadow-[0_0_20px_rgba(180,0,255,0.3)]",children:" OPEN BROADCAST"}),h.jsx("button",{onClick:()=>we(!oe),className:"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl font-black text-xs uppercase tracking-widest font-righteous text-slate-400 hover:text-white transition-all",children:oe?" HIDE HISTORY":" SESSION HISTORY"})]})]}),oe&&h.jsx("div",{className:"mt-6 pt-6 border-t border-white/5",children:Be.length===0?h.jsx("p",{className:"text-slate-600 font-black uppercase tracking-widest text-xs font-righteous py-4 text-center",children:"NO PREVIOUS SESSIONS RECORDED"}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Be.slice().reverse().map(E=>h.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl hover:border-white/10 transition-all",children:[h.jsx("div",{className:"text-white font-bold font-bungee text-sm truncate",children:E.hostName||"DAY_SHOW"}),h.jsx("div",{className:"text-[var(--neon-cyan)] font-mono text-[10px] mt-1",children:new Date(E.startedAt).toLocaleString()}),E.endedAt&&h.jsxs("div",{className:"text-slate-500 text-[10px] font-righteous mt-0.5",children:["DURATION: ",Math.round((E.endedAt-E.startedAt)/6e4),"m"]})]},E.id))})})]}),h.jsx("div",{className:"sticky top-4 z-50",children:h.jsxs("div",{className:"glass-panel p-4 rounded-[2.5rem] border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-col gap-3 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[h.jsxs("div",{className:"flex gap-3 p-2 bg-black/40 rounded-[2rem] border border-white/5",children:[h.jsxs("button",{onClick:()=>u(!0),className:"px-8 py-4 bg-[var(--neon-pink)] text-black font-black hover:bg-white transition-all active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(255,42,109,0.4)] text-lg uppercase tracking-[0.2em] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:rotate-90 transition-transform",children:""})," ADD SONG"]}),h.jsxs("button",{onClick:()=>{V(!0),be()},className:"px-8 py-4 bg-[var(--neon-blue)] text-black font-black hover:bg-white transition-all uppercase tracking-[0.2em] text-lg active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(5,217,232,0.4)] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:animate-spin",children:""})," NEXT ROUND"]})]}),h.jsx("div",{className:"w-[1px] h-12 bg-white/10 mx-2"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>T(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-yellow)] border border-[var(--neon-yellow)]/30 bg-[var(--neon-yellow)]/5 hover:bg-[var(--neon-yellow)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(255,200,87,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),h.jsx("button",{onClick:()=>Z(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-blue)] border border-[var(--neon-blue)]/30 bg-[var(--neon-blue)]/5 hover:bg-[var(--neon-blue)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(5,217,232,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),h.jsx("button",{onClick:()=>ye(!0),className:"w-14 h-14 flex items-center justify-center text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:rotate-12 transition-transform",children:""})}),r&&h.jsxs("button",{onClick:r,title:"ADMIN PORTAL",className:"w-14 h-14 flex items-center justify-center text-[var(--neon-purple)] border border-[var(--neon-purple)]/30 bg-[var(--neon-purple)]/5 hover:bg-[var(--neon-purple)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(147,51,234,0.1)] group ml-4 relative",children:[h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""}),h.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[var(--neon-pink)] rounded-full animate-pulse border-2 border-black"})]}),h.jsxs("button",{onClick:()=>{Bt("Are you sure you want to sign out?",async()=>{await Wd(),window.location.reload()})},title:"SIGN OUT",className:"px-6 h-14 flex items-center justify-center gap-3 text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group ml-2",children:[h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-righteous",children:"SIGN_OUT"})]})]})]}),h.jsx("div",{className:"flex gap-1.5 overflow-x-auto no-scrollbar border-t border-white/5 pt-3",children:["COMMAND","ROTATION","PERFORMERS","LIBRARY","SESSION"].map(E=>h.jsx("button",{onClick:()=>qe(E),className:`px-6 py-2.5 rounded-full font-bungee text-sm tracking-widest transition-all whitespace-nowrap border-2 ${Mt===E?"bg-white text-black border-white shadow-[0_0_20px_rgba(255,255,255,0.3)]":"bg-transparent text-slate-400 border-white/20 hover:border-white/40 hover:text-white"}`,children:E==="COMMAND"?"DECK":E==="ROTATION"?"ROTATION":E==="PERFORMERS"?"PERFORMERS":E==="LIBRARY"?"LIBRARY":"SESSION"},E))})]})}),h.jsxs("main",{className:"min-h-[600px] animate-in fade-in duration-500",children:[Mt==="COMMAND"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 animate-in slide-in-from-bottom-2",children:[h.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[e.currentRound&&h.jsxs("section",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-[0_0_100px_rgba(255,42,109,0.3)] zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-orange)] opacity-20 animate-pulse"}),h.jsxs("div",{className:"relative bg-[#150030]/90 p-10 rounded-[2.8rem] backdrop-blur-xl border-2 border-[var(--neon-green)]/50",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-6xl animate-pulse",children:""})," NOW PLAYING"]}),h.jsx("button",{onClick:async()=>{await H5(),await be()},className:"px-8 py-3 bg-[var(--neon-pink)] text-black text-base font-bold uppercase hover:bg-white transition-all rounded-[1rem] tracking-widest font-righteous shadow-[0_0_20px_var(--neon-pink)] active:scale-95",children:"END ROUND"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:e.currentRound.map((E,X)=>{const U=e.participants.find(St=>St.id===E.participantId),ne=(U==null?void 0:U.status)===Vt.READY,he=e.currentRound.findIndex(St=>St.status!==Ve.DONE),je=X===(he===-1?0:he);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${je?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"relative",children:[je&&h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-[var(--neon-green)] text-black text-[8px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] z-20",children:"LIVE"}),h.jsx("button",{onClick:()=>{const St=E.type===dt.SINGING?" Karaoke":" Lyric",qn=`${E.songName} ${E.artist}${St}`;navigator.clipboard.writeText(qn)},title:"Copy Command String",className:`w-16 h-16 flex flex-col justify-center items-center border-2 rounded-2xl transition-all shrink-0 active:scale-95 ${je?"border-[var(--neon-green)] bg-[var(--neon-green)]/10 text-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"border-white/10 text-slate-400 hover:border-white/30 hover:bg-white/5"}`,children:h.jsx("span",{className:"text-2xl font-bold font-mono tracking-tighter",children:E.requestNumber})})]}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-2xl font-black uppercase font-righteous tracking-tight leading-tight ${je?"text-white":"text-slate-300"}`,children:E.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:E.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("button",{onClick:()=>Cr(E.participantId),className:"flex items-center gap-2 group/singer hover:underline",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${ne?"bg-[var(--neon-green)] shadow-[0_0_5px_var(--neon-green)]":"bg-slate-700"}`}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",E.participantName]})]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[h.jsx("button",{onClick:async()=>{E.status===Ve.DONE?await zc(E.id,{status:Ve.APPROVED}):await J_(E.id),await be()},title:E.status===Ve.DONE?"Undo Done":"Mark as Done",className:`p-2 rounded-xl transition-all border-2 ${E.status===Ve.DONE?"text-yellow-500 border-yellow-500/30 bg-yellow-500/10 shadow-[0_0_15px_rgba(234,179,8,0.2)]":"text-slate-600 border-white/5 hover:border-white/20 hover:text-white"}`,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})})}),h.jsx("button",{onClick:()=>{Bt("Remove from active round?",async()=>{await Ji(E.id),await be()})},className:"w-8 h-8 flex items-center justify-center rounded bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white transition-all border border-rose-500/20",title:"REMOVE",children:""})]})]},E.id)})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/80 border-2 border-[var(--neon-blue)]/30 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(5,217,232,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8 px-2",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-cyan",children:[h.jsx("span",{className:"text-[var(--neon-blue)]",children:""})," REQUESTS"]}),h.jsxs("span",{className:"px-6 py-2 bg-[var(--neon-blue)]/10 border border-[var(--neon-blue)]/30 rounded-full text-base text-[var(--neon-blue)] font-bold tracking-widest font-righteous",children:[us.length," PENDING"]})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[us.map((E,X)=>h.jsxs("div",{draggable:!0,onDragStart:U=>js(U,X,"PENDING"),onDragOver:ur,onDrop:U=>Hn(U,X,"PENDING"),className:"bg-black/40 border border-white/5 p-4 rounded-3xl flex items-center gap-6 hover:border-[var(--neon-blue)] transition-all group cursor-move shadow-xl",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[h.jsx("div",{className:"text-xs font-black font-righteous text-[var(--neon-pink)] uppercase tracking-[0.2em] bg-[var(--neon-pink)]/10 px-2 py-0.5 rounded-full border border-[var(--neon-pink)]/20 shrink-0",children:"NEW_SIGNAL"}),h.jsx("div",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-slate-500 text-base font-black uppercase tracking-[0.2em] font-righteous truncate",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:()=>Cr(E.participantId),className:"text-base font-bold text-[var(--neon-pink)] uppercase truncate hover:text-white transition-colors font-righteous tracking-[0.2em]",children:["@",E.participantName]}),E.message&&h.jsx("div",{className:"flex-1 max-w-md px-3 py-1 bg-black/40 border-l-2 border-[var(--neon-pink)] rounded-r-lg",children:h.jsxs("p",{className:"text-base text-white/60 font-medium italic truncate",children:['"',E.message,'"']})})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Sc,{request:E}),h.jsx(Nc,{request:E}),h.jsx(Ki,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white/50 hover:text-white border border-white/5",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:async()=>{await Tc(E.id),await be()},className:"px-6 py-3 bg-[var(--neon-blue)] text-black text-sm font-black uppercase hover:bg-white transition-all rounded-xl tracking-[0.1em] shadow-[0_0_20px_rgba(5,217,232,0.3)]",children:"ACCEPT"}),h.jsx("button",{onClick:()=>{Bt("Delete pending request?",async()=>{await Ji(E.id),await be()})},className:"w-11 h-11 flex items-center justify-center text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all",children:""})]})]})]},E.id)),us.length===0&&h.jsx("div",{className:"col-span-full py-24 text-center border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-30",children:h.jsx("p",{className:"text-4xl font-black font-righteous uppercase tracking-[0.4em] italic text-slate-500",children:"NO SIGNAL DETECTED"})})]})]}),h.jsxs("div",{className:"flex flex-col gap-10",children:[h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-yellow)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-5xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-yellow flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-yellow)] animate-pulse",children:""})," QUEUE"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[tn.map((E,X)=>h.jsxs("div",{draggable:!0,onDragStart:U=>js(U,X,"QUEUE"),onDragOver:ur,onDrop:U=>Hn(U,X,"QUEUE"),className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-yellow)] transition-all cursor-move shadow-lg relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-yellow)] font-bungee text-3xl shrink-0 group-hover:scale-110 transition-transform",children:X+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-2xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-yellow)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:U=>{U.stopPropagation(),Cr(E.participantId)},className:"text-sm font-black text-[var(--neon-yellow)] uppercase tracking-[0.2em] font-righteous hover:text-white transition-colors",children:["@",E.participantName]}),E.message&&h.jsxs("div",{className:"flex-1 max-w-sm px-2 py-0.5 bg-[var(--neon-yellow)]/5 border-l border-[var(--neon-yellow)]/30 rounded-r text-xs text-[var(--neon-yellow)]/70 italic truncate",children:['"',E.message,'"']})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[h.jsx("button",{onClick:async()=>{await W_(E.id,"up"),await be()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""}),h.jsx("button",{onClick:async()=>{await W_(E.id,"down"),await be()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Sc,{request:E}),h.jsx(Nc,{request:E}),h.jsx(Ki,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"p-2 text-slate-600 hover:text-white text-xs font-black uppercase tracking-widest font-righteous transition-colors border border-white/5 rounded-lg",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5",children:[h.jsx("button",{onClick:()=>Ht(E.id),className:"px-4 py-2 bg-[var(--neon-yellow)] text-black text-sm font-black uppercase rounded-lg hover:bg-white transition-all shadow-[0_0_15px_rgba(255,200,87,0.3)] tracking-wider",children:"STAGE"}),h.jsx("button",{onClick:()=>{Bt("Remove from queue?",async()=>{await Ji(E.id),await be()})},className:"w-9 h-9 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-all",children:""})]})]})]},E.id)),tn.length===0&&h.jsx("div",{className:"flex-1 py-12 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-xl font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"QUEUE EMPTY"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-blue)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-blue flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-blue)] animate-pulse",children:""})," TO HEAR (",Jn.length,")"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[Jn.map((E,X)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-blue)] transition-all relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-blue)] font-bungee text-xl shrink-0",children:X+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-[0.2em] font-righteous",children:["@",E.participantName]})]}),h.jsx("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx("button",{onClick:async()=>{await Ji(E.id),await be()},className:"px-4 py-2 text-rose-500 hover:bg-rose-500 hover:text-white rounded-lg transition-all font-black text-xs uppercase tracking-widest font-righteous",children:"REMOVE"})})]},E.id)),Jn.length===0&&h.jsx("div",{className:"flex-1 py-8 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-base font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"NO LISTENING TRACKS"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-green)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl md:text-4xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-green flex items-center gap-4 flex-wrap",children:[h.jsx("span",{className:"text-[var(--neon-green)] animate-pulse",children:""})," ATMOSPHERE"]}),h.jsxs("div",{className:"space-y-10",children:[h.jsxs("div",{className:"p-6 bg-black/40 rounded-3xl border border-white/5 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[h.jsx("label",{className:"text-sm md:text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.2em] font-righteous opacity-80 break-words",children:"REQUEST LIMIT"}),h.jsx("span",{className:"text-4xl font-black text-white font-bungee neon-glow-cyan",children:e.maxRequestsPerUser||5})]}),h.jsx("input",{type:"range",min:"1",max:"20",value:e.maxRequestsPerUser||5,onChange:async E=>{await L5(parseInt(E.target.value)),await be()},className:"w-full accent-[var(--neon-cyan)] bg-white/5 rounded-lg appearance-none h-2 cursor-pointer transition-all"}),h.jsxs("div",{className:"flex justify-between text-xs font-black text-slate-600 font-righteous uppercase tracking-widest",children:[h.jsx("span",{children:"STRICT (1)"}),h.jsx("span",{children:"UNLIMITED (20)"})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-base font-black text-[var(--neon-pink)] uppercase tracking-[0.4em] mb-4 flex items-center gap-4 font-righteous opacity-80",children:"BACKGROUND THREADS"}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...Jn].reverse().map(E=>h.jsxs("div",{className:"bg-black/60 p-5 rounded-[2rem] border border-white/10 flex flex-col justify-between group hover:border-[var(--neon-pink)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4 cursor-pointer",onClick:()=>It(E.songName,E.artist,E.type),children:[h.jsx("div",{className:"text-2xl font-black text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-pink)] transition-all",children:E.songName}),h.jsx("div",{className:"text-base text-slate-500 uppercase tracking-widest mt-1 font-righteous opacity-60 truncate",children:E.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsx(Ki,{url:E.youtubeUrl}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Ht(E.id),className:"px-4 py-2 bg-[var(--neon-purple)] text-white text-sm font-black uppercase rounded-lg hover:bg-white hover:text-black transition-all shadow-[0_0_10px_var(--neon-purple)] tracking-[0.1em]",children:"BOOST"}),h.jsx("button",{onClick:()=>{Bt("Remove from atmosphere?",async()=>{await Ji(E.id),await be()})},className:"text-rose-500/20 hover:text-rose-500 p-2 font-black",children:""})]})]})]},E.id)),Jn.length===0&&h.jsx("p",{className:"text-base text-slate-700 italic px-4 font-righteous uppercase tracking-widest opacity-50",children:"NO BACKGROUND TRACKS"})]})]}),h.jsxs("div",{className:"pt-6 border-t border-white/5",children:[h.jsxs("h4",{className:"text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.4em] mb-6 flex justify-between items-center font-righteous opacity-80",children:[h.jsx("span",{children:"VERIFIED_LINKS"}),h.jsx("button",{onClick:()=>g(!0),className:"text-[var(--neon-cyan)] hover:text-white transition-colors underline decoration-dotted",children:"+ ADD NEW"})]}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...nt].reverse().map(E=>h.jsxs("div",{className:"bg-black/80 p-5 rounded-[2rem] border border-white/5 flex flex-col justify-between group hover:border-[var(--neon-cyan)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4",children:[h.jsx("div",{className:"text-2xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors font-bungee mb-1",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous font-bold",children:E.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx(W5,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>b(E),className:"text-slate-600 hover:text-white p-2",children:""})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:()=>It(E.songName,E.artist,E.type),className:"px-3 py-1 bg-black border border-[var(--neon-cyan)] text-[var(--neon-cyan)] text-sm font-black uppercase rounded-md hover:bg-[var(--neon-cyan)] hover:text-black transition-all tracking-widest",children:"RUN"}),h.jsx("button",{onClick:()=>{u(!0)},className:"px-3 py-1 bg-[var(--neon-pink)] text-black text-sm font-black uppercase rounded-md hover:bg-white transition-all shadow-lg tracking-widest",children:"PUSH"}),h.jsx("button",{onClick:()=>{Bt("Delete verified song?",async()=>{await Q_(E.id),await be()})},className:"text-rose-500/20 hover:text-rose-500 px-1 font-black",children:""})]})]})]},E.id)),nt.length===0&&h.jsx("p",{className:"text-xl text-slate-800 italic px-4 font-righteous uppercase tracking-widest opacity-30",children:"NO VERIFIED SONGS"})]})]})]})]})]})]}),h.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[600px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"PERFORMERS"}),h.jsxs("div",{className:"flex items-center gap-2 bg-white/5 px-3 py-1 rounded-full border border-white/5",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-sm text-[var(--neon-cyan)] font-bold uppercase tracking-widest",children:[yi," ONLINE"]})]})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.participants.map(E=>{const X=E.status===Vt.READY,ne=e.requests.filter(he=>he.participantId===E.id).filter(he=>he.status===Ve.APPROVED&&he.type===dt.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] transition-all border ${X?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"bg-black/40 border-white/5 hover:bg-white/5"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-4",children:[h.jsx("button",{onClick:async()=>{await ia(E.id,X?Vt.STANDBY:Vt.READY),await be()},className:`w-3 h-3 rounded-full shrink-0 transition-all ${X?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-800"}`}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>Cr(E.id),className:`text-xl font-black uppercase truncate text-left transition-colors font-righteous ${X?"text-white":"text-slate-500 hover:text-[var(--neon-green)]"}`,children:E.name}),ne>0&&h.jsxs("span",{className:"block text-xs text-[var(--neon-cyan)] font-black mt-0.5 tracking-[0.2em]",children:[ne," REQUESTS"]})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>O(E),className:"p-2 hover:text-[var(--neon-cyan)] transition-colors text-slate-600",children:"+"}),h.jsx("button",{onClick:()=>{Bt(`Remove ${E.name}?`,async()=>{await lg(E.id),await be()})},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-colors",children:""})]})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg font-righteous uppercase tracking-widest",children:"NO DATA"})})]})]}),h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[400px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await Z_(),await be()},className:"text-sm font-bold text-rose-500/40 hover:text-rose-500 uppercase tracking-widest transition-all",children:"CLEAR"})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.history.map((E,X)=>h.jsxs("div",{className:"bg-black/40 p-4 rounded-2xl border border-white/5 flex flex-col group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{className:"min-w-0 pr-2",children:[h.jsx("div",{className:"text-xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-purple)] transition-colors font-bungee",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[h.jsx(Sc,{request:E}),h.jsx(Nc,{request:E}),h.jsx(Ki,{url:E.youtubeUrl})]})]}),h.jsxs("div",{className:"flex items-center justify-between mt-2 border-t border-white/5 pt-2",children:[h.jsxs("span",{className:"text-base font-black text-[var(--neon-pink)] uppercase truncate",children:["@",E.participantName]}),h.jsx("button",{onClick:async()=>{await Nm(E),await be()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-pink)] hover:underline transition-all uppercase tracking-widest",children:"RE-QUEUE"})]})]},X)),e.history.length===0&&h.jsx("div",{className:"text-center py-16 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-800",children:"EMPTY"})})]})]})]})]}),Mt==="ROTATION"&&h.jsxs("div",{className:"space-y-16 animate-in slide-in-from-bottom-2 pb-32",children:[e.currentRound&&e.currentRound.length>0&&h.jsxs("section",{className:"glass-panel border-4 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(0,255,157,0.3)] relative overflow-hidden neon-sign-border-green",children:[h.jsxs("div",{className:"flex items-center gap-8 mb-12",children:[h.jsx("div",{className:"w-8 h-8 bg-[var(--neon-green)] rounded-full animate-ping shadow-[0_0_25px_var(--neon-green)]"}),h.jsx("h3",{className:"text-6xl font-black text-white uppercase tracking-tighter font-righteous neon-glow-green",children:"NOW PLAYING"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:e.currentRound.map((E,X)=>{const U=e.currentRound.findIndex(he=>he.status!==Ve.DONE),ne=X===(U===-1?0:U);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${ne?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsx("div",{className:"w-16 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:h.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${ne?"text-[var(--neon-green)]":"text-slate-400"}`,children:E.requestNumber})}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-3xl font-black uppercase truncate font-righteous tracking-tight ${ne?"text-white":"text-slate-300"}`,children:E.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:E.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",E.participantName]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-6 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[ne&&h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] mr-2 shrink-0",children:"LIVE"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Sc,{request:E}),h.jsx(Nc,{request:E}),h.jsx(Ki,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white/5 hover:bg-white hover:text-black border border-white/10 transition-all text-slate-400 group",title:"EDIT",children:h.jsx("span",{className:"text-sm font-black font-righteous",children:"EDIT"})}),h.jsx("button",{onClick:()=>Er(E),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-black border border-white/20 hover:bg-white hover:text-black hover:border-white transition-all group",title:"RESET TRACK",children:h.jsx("span",{className:"text-lg",children:""})}),h.jsxs("button",{disabled:E.status===Ve.DONE,onClick:async()=>{await J_(E.id),await be()},className:`h-10 px-6 rounded-lg text-sm font-black uppercase tracking-widest font-righteous transition-all flex items-center gap-2 ${E.status===Ve.DONE?"bg-white/10 text-white/40 cursor-not-allowed border border-white/5":"bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black border border-[var(--neon-cyan)]/50"}`,children:[h.jsx("span",{children:E.status===Ve.DONE?"COMPLETED":"DONE"}),E.status!==Ve.DONE&&h.jsx("span",{className:"text-lg leading-none",children:""})]})]})]})]},E.id)})})]}),h.jsxs("section",{className:"bg-[#050510] border-4 border-[var(--neon-cyan)]/30 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(0,229,255,0.15)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[h.jsx("div",{className:"w-4 h-4 bg-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)] rounded-full animate-pulse"}),h.jsx("h3",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"UPCOMING"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-6",children:[tn.map(E=>h.jsxs("div",{className:"relative group perspective-1000",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-purple)] to-[var(--neon-blue)] rounded-[2.5rem] blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),h.jsxs("div",{className:"relative bg-[#101015] p-8 rounded-[2.5rem] border border-white/10 flex justify-between items-center group-hover:border-[var(--neon-cyan)] transition-all shadow-2xl h-full",children:[h.jsxs("div",{className:"min-w-0 pr-6 flex-1",children:[h.jsx("div",{className:"text-white font-black uppercase truncate text-4xl font-bungee tracking-tight mb-2 group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-lg text-slate-500 uppercase flex items-center gap-3 font-righteous tracking-[0.2em] opacity-80",children:[h.jsxs("span",{className:"text-[var(--neon-green)] font-black",children:["@",E.participantName]}),h.jsx("span",{className:"opacity-20",children:"|"}),h.jsx("span",{className:"truncate",children:E.artist})]})]}),h.jsxs("div",{className:"flex gap-3 shrink-0 flex-col",children:[h.jsx("button",{onClick:()=>Ht(E.id),className:"px-6 py-3 bg-[var(--neon-green)] text-black text-base font-black rounded-xl uppercase tracking-[0.2em] font-righteous shadow-[0_0_20px_var(--neon-green)] transition-all hover:bg-white hover:scale-105",children:"STAGE"}),h.jsx("button",{onClick:async()=>{await Ji(E.id),await be()},className:"px-6 py-3 border border-white/10 text-white/40 hover:text-rose-500 hover:border-rose-500/50 rounded-xl transition-all text-lg font-black uppercase tracking-[0.2em]",children:"REMOVE"})]})]})]},E.id)),tn.length===0&&h.jsx("div",{className:"col-span-full py-32 text-center border-4 border-dashed border-white/5 rounded-[4rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] italic font-righteous text-slate-700",children:"NO DATA STREAM"})})]})]})]}),Mt==="PERFORMERS"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 animate-in slide-in-from-bottom-2 pb-32",children:[h.jsxs("section",{className:"lg:col-span-8 bg-[#0a0a0a] border-4 border-[var(--neon-cyan)]/20 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(0,229,255,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"SINGERS"}),h.jsxs("div",{className:"flex items-center gap-4 px-6 py-2 bg-black/40 border border-[var(--neon-cyan)]/30 rounded-full shadow-lg",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-lg font-bold text-[var(--neon-cyan)] uppercase tracking-widest font-righteous",children:[yi," ACTIVE"]})]})]}),h.jsxs("div",{className:"grid gap-6",children:[e.participants.map(E=>{const X=E.status===Vt.READY,ne=e.requests.filter(he=>he.participantId===E.id).filter(he=>he.status===Ve.APPROVED&&he.type===dt.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-6 rounded-[2rem] transition-all border-2 ${X?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.15)]":"bg-black/40 border-white/5 hover:border-white/20"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-6 text-left",children:[h.jsx("button",{onClick:async()=>{await ia(E.id,X?Vt.STANDBY:Vt.READY),await be()},className:`w-12 h-12 rounded-full shrink-0 border-2 transition-all flex items-center justify-center ${X?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_20px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-white/50"}`,children:X&&h.jsx("div",{className:"w-4 h-4 bg-white rounded-full animate-pulse"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>Cr(E.id),className:`font-bold text-4xl uppercase truncate font-bungee tracking-tight transition-colors ${X?"text-white":"text-slate-600 hover:text-[var(--neon-green)]"}`,children:E.name}),ne>0&&h.jsxs("div",{className:"text-base font-bold text-[var(--neon-cyan)] uppercase mt-1 tracking-widest font-righteous opacity-90",children:[ne," TRACKS READY"]})]})]}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("button",{onClick:()=>O(E),className:"px-6 py-3 bg-[var(--neon-cyan)]/10 text-[var(--neon-cyan)] rounded-xl border border-[var(--neon-cyan)]/50 transition-all font-righteous text-base font-black uppercase tracking-[0.2em] hover:bg-[var(--neon-cyan)] hover:text-black hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"ADD TRACK"}),h.jsx("button",{onClick:()=>{Bt(`Remove ${E.name}?`,async()=>{await lg(E.id),await be()})},className:"text-rose-500/30 hover:text-rose-500 p-3 transition-colors text-3xl font-black",children:""})]})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"py-32 text-center border-4 border-dashed border-white/5 rounded-[3rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.6em] italic font-righteous text-slate-800",children:"NO SIGNALS"})})]})]}),h.jsxs("section",{className:"lg:col-span-4 lg:sticky lg:top-36 h-fit bg-[#050510] border-4 border border-white/5 rounded-[3.5rem] p-8 shadow-[0_0_60px_rgba(157,0,255,0.15)] relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-purple",children:"SESSION LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await Z_(),await be()},className:"text-sm font-black text-rose-500/40 hover:text-rose-500 uppercase tracking-[0.3em] font-righteous transition-all",children:"CLEAR ALL"})]}),h.jsxs("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[e.history.filter(E=>(E.playedAt||0)>=(e.startedAt||0)).map((E,X)=>h.jsxs("div",{className:"bg-black/40 p-5 rounded-[1.5rem] border border-white/5 group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-2xl font-black text-white uppercase truncate font-bungee tracking-tight group-hover:text-[var(--neon-purple)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 font-bold uppercase truncate font-righteous tracking-widest mt-1",children:E.artist})]}),h.jsx(Ki,{url:E.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-3 mt-1",children:[h.jsxs("button",{onClick:()=>Cr(E.participantId),className:"text-sm font-black text-[var(--neon-pink)] uppercase truncate hover:text-white font-righteous tracking-widest transition-colors mb-0",children:["@",E.participantName]}),h.jsx("button",{onClick:async()=>{await Nm(E),await be()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-cyan)] hover:text-white transition-all font-righteous tracking-widest uppercase ml-auto",children:"RELOAD"})]})]},X)),e.history.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-700",children:"EMPTY"})})]})]}),h.jsxs("section",{className:"lg:col-span-12 bg-black/40 border-4 border-white/5 rounded-[3rem] p-10 mt-10 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-cyan",children:"COMPLETED ROUNDS"}),h.jsx("div",{className:"text-[var(--neon-cyan)]/40 text-sm font-black uppercase tracking-[0.4em] font-righteous",children:"HISTORY"})]}),h.jsx("div",{className:"grid gap-12",children:(()=>{const E={};e.history.filter(U=>(U.playedAt||0)>=(e.startedAt||0)).forEach(U=>{const ne=U.playedAt||0;E[ne]||(E[ne]=[]),E[ne].push(U)});const X=Object.keys(E).map(Number).sort((U,ne)=>ne-U);return X.length===0?h.jsx("div",{className:"text-center py-24 border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-20",children:h.jsx("p",{className:"text-2xl font-black uppercase tracking-[0.4em] font-righteous text-slate-500",children:"HISTORY_NULL"})}):X.map(U=>h.jsxs("div",{className:"bg-[#050510] border-2 border-white/5 rounded-[2.5rem] p-8 relative group hover:border-[var(--neon-cyan)]/30 transition-all",children:[h.jsxs("div",{className:"absolute top-0 left-10 py-1 px-4 bg-[var(--neon-cyan)] text-black text-[10px] font-black uppercase tracking-widest rounded-b-lg font-righteous shadow-[0_0_15px_rgba(0,229,255,0.4)]",children:["ROUND_",new Date(U).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",children:E[U].map((ne,he)=>h.jsxs("div",{className:"flex flex-col p-4 bg-black/40 rounded-2xl border border-white/5 group/song hover:bg-white/5 transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("div",{className:"text-lg font-black text-white uppercase truncate font-bungee tracking-tight group-hover/song:text-[var(--neon-cyan)] transition-colors",children:ne.songName}),h.jsx(Ki,{url:ne.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-widest font-righteous",children:["@",ne.participantName]}),h.jsxs("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-tighter",children:["POS_",he+1]})]})]},ne.id))})]},U))})()})]})]}),Mt==="LIBRARY"&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-2 space-y-10 pb-32",children:[h.jsx("div",{className:"sticky top-0 z-40 pt-4 -mt-4",children:h.jsxs("div",{className:"relative group p-1 rounded-[2.5rem] bg-[#050510]/90 shadow-2xl backdrop-blur-xl border border-white/10",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)]/20 via-[var(--neon-purple)]/20 to-[var(--neon-cyan)]/20 blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),h.jsx("input",{type:"text",placeholder:"SEARCH SONGBOOK...",value:Hr,onChange:E=>os(E.target.value),className:"w-full bg-black/50 border-2 border-white/10 rounded-[2.3rem] py-6 pl-16 pr-32 text-2xl font-bold tracking-widest text-white placeholder:text-slate-600 focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous uppercase"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors pointer-events-none",children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),h.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:h.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-[2rem] font-black text-base uppercase tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.4)] active:scale-95 transition-all font-righteous hover:bg-white hover:scale-105",children:"+ ADD NEW"})})]})}),h.jsx("div",{className:"flex flex-col gap-3",children:(()=>{const X=((e==null?void 0:e.verifiedSongbook)||[]).map(U=>({...U,isVerified:!0,title:U.songName,source:"VERIFIED"})).filter(U=>{if(!Hr)return!0;const ne=Hr.toLowerCase();return U.title.toLowerCase().includes(ne)||U.artist.toLowerCase().includes(ne)});return X.length===0?h.jsxs("div",{className:"col-span-full text-center py-40 opacity-30 border-4 border-dashed border-white/5 rounded-[4rem]",children:[h.jsx("div",{className:"text-8xl mb-6 opacity-50 grayscale animate-pulse",children:Hr?"":""}),h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] font-righteous text-slate-600",children:Hr?"NO MATCH FOUND":"SONGBOOK EMPTY"})]}):X.map((U,ne)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-4 rounded-[2rem] flex items-center justify-between group hover:border-[var(--neon-cyan)] transition-all relative hover:z-50 shadow-lg",children:[h.jsxs("div",{className:"flex items-center gap-6 flex-1 min-w-0",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black rounded-lg border border-white/10 text-[var(--neon-cyan)] text-2xl",children:""}),h.jsx("div",{className:"min-w-0 pr-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[U.isVerified&&h.jsx("div",{className:"px-2 py-0.5 bg-[var(--neon-pink)] text-black rounded-full text-[10px] font-black uppercase tracking-widest font-righteous shrink-0",children:"VERIFIED"}),h.jsx("h4",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-cyan)] transition-colors",children:U.title}),h.jsxs("span",{className:"text-base text-slate-600 font-bold uppercase font-righteous tracking-widest truncate",children:["/ ",U.artist]})]})})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Sc,{request:U}),h.jsx(Nc,{request:U}),h.jsx(Ki,{url:U.youtubeUrl}),h.jsx("button",{onClick:async()=>{await Q_(U.id).then(be)},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-all text-xl",children:""})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 ml-4",children:[h.jsxs("div",{className:"relative group/assign",children:[h.jsx("button",{className:"px-6 py-2.5 bg-white text-black text-sm font-black uppercase rounded-lg hover:bg-[var(--neon-cyan)] transition-all font-righteous tracking-wider",children:"ASSIGN"}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-cyan)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/assign:opacity-100 group-hover/assign:visible transition-all p-4 z-50 backdrop-blur-xl w-[200px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"TRANSMIT TO:"}),h.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:[e.participants.map(he=>h.jsx("button",{onClick:async()=>{const je=await Xi({participantId:he.id,participantName:he.name,songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:dt.SINGING});je&&await Tc(je.id),await be()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-cyan)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:he.name},he.id)),h.jsx("div",{className:"h-[1px] bg-white/10 my-2"}),h.jsx("button",{onClick:async()=>{const he=await Xi({participantId:"DJ-MANUAL",participantName:"GUEST",songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:dt.SINGING});he&&await Tc(he.id),await be()},className:"w-full text-left p-2 rounded-lg bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)] hover:text-black text-sm font-black uppercase font-righteous transition-all",children:"+ GUEST"})]})]})]}),h.jsxs("div",{className:"relative group/star",children:[h.jsx("button",{className:"px-4 py-2.5 bg-black border border-white/10 text-[var(--neon-pink)] rounded-lg font-black text-sm uppercase tracking-widest hover:border-[var(--neon-pink)] transition-all font-righteous",children:""}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-pink)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/star:opacity-100 group-hover/star:visible transition-all p-4 z-50 backdrop-blur-xl w-[180px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-pink)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"ADD FAVORITE:"}),h.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:e.participants.map(he=>h.jsx("button",{onClick:async()=>{await I5(he.id,{songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:U.type}),await be()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-pink)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:he.name},he.id))})]})]})]})]})]},ne))})()})]})]}),R&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-6 z-[100] backdrop-blur-xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 shadow-[0_0_100px_rgba(255,42,109,0.2)] animate-in zoom-in-95 duration-500 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-start mb-8",children:[h.jsx("h2",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee neon-glow-pink",children:"REVIEW LINEUP"}),h.jsx("button",{onClick:()=>V(!1),className:"text-slate-600 hover:text-white font-bold text-5xl px-2 transition-all transform hover:scale-110",children:""})]}),h.jsx("div",{className:"mb-8 text-lg text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80 decoration-dotted underline underline-offset-4",children:"OPERATIONAL READY CHECK"}),h.jsx("div",{className:"space-y-4 mb-10 max-h-[400px] overflow-y-auto pr-4 custom-scrollbar",children:(()=>{var X;const E=e.participants.filter(U=>{var ne;return(ne=e.requests)==null?void 0:ne.some(he=>he.participantId===U.id&&he.status===Ve.APPROVED&&he.type===dt.SINGING&&!he.isInRound)}).sort((U,ne)=>(ne.joinedAt||0)-(U.joinedAt||0));if(E.length>0)return E.map(U=>{var je;const ne=U.status===Vt.READY,he=(je=e.requests)==null?void 0:je.find(St=>St.participantId===U.id&&St.status===Ve.APPROVED&&St.type===dt.SINGING&&!St.isInRound);return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] border-2 transition-all duration-300 ${ne?"bg-[#150030] border-[var(--neon-green)] shadow-[0_0_20px_rgba(57,255,20,0.15)]":"bg-black/40 border-white/5 opacity-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsx("button",{onClick:async()=>{await ia(U.id,ne?Vt.STANDBY:Vt.READY),await be()},className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center transition-all border-2 ${ne?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-slate-600"}`,children:ne&&h.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:`font-bold uppercase text-2xl truncate tracking-tight font-bungee ${ne?"text-white":"text-slate-600"}`,children:U.name}),ne?he?h.jsx("div",{className:"text-[var(--neon-cyan)] text-base font-black uppercase tracking-[0.2em] font-righteous mt-0.5 opacity-90",children:he.songName}):h.jsx("div",{className:"text-rose-500 text-sm font-black uppercase tracking-[0.1em] font-righteous mt-0.5",children:" NO SIGNAL"}):h.jsx("div",{className:"text-slate-700 text-sm font-black uppercase tracking-[0.2em] font-righteous mt-0.5",children:"STANDBY"})]})]}),ne&&he&&h.jsx("div",{className:"shrink-0 text-sm bg-[var(--neon-cyan)] text-black px-4 py-1.5 rounded-full font-black uppercase tracking-widest font-righteous shadow-[0_0_10px_var(--neon-cyan)] animate-in fade-in zoom-in",children:"READY"})]},U.id)});{const U=((X=e.requests)==null?void 0:X.filter(ne=>ne.status===Ve.APPROVED&&ne.type===dt.LISTENING&&!ne.isInRound).sort((ne,he)=>ne.createdAt-he.createdAt).slice(0,5))||[];return U.length>0?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-dashed border-white/10 text-center",children:h.jsx("p",{className:"text-[var(--neon-blue)] font-black uppercase tracking-widest font-righteous",children:"FALLBACK: LISTENING MODE"})}),U.map(ne=>h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-[1.5rem] border-2 bg-[#0a0a20] border-[var(--neon-blue)]/30",children:[h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"text-[var(--neon-blue)] text-xl font-black uppercase tracking-tight font-bungee",children:ne.songName}),h.jsx("div",{className:"text-slate-500 text-sm font-bold uppercase tracking-widest font-righteous",children:ne.artist})]}),h.jsxs("div",{className:"text-xs font-black uppercase tracking-widest text-[var(--neon-pink)] font-righteous",children:["@",ne.participantName]})]},ne.id))]}):h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[2.5rem] border-4 border-dashed border-white/5 animate-in fade-in duration-700",children:h.jsx("p",{className:"text-slate-700 text-2xl font-black uppercase tracking-[0.4em] font-righteous",children:"NO DATA"})})}})()}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>V(!1),className:"flex-1 py-4 bg-black hover:bg-white hover:text-black text-white border border-white/10 rounded-xl font-black uppercase text-base tracking-widest transition-all font-righteous",children:"CANCEL"}),(()=>{var he;const E=e.participants.filter(je=>{var St;return(St=e.requests)==null?void 0:St.some(qn=>qn.participantId===je.id&&qn.status===Ve.APPROVED&&qn.type===dt.SINGING&&!qn.isInRound)}).length,X=((he=e.requests)==null?void 0:he.filter(je=>je.status===Ve.APPROVED&&je.type===dt.LISTENING&&!je.isInRound).length)||0,U=E>0?E:X,ne=E>0?"ACTIVATE ROUND":"ACTIVATE LISTENING";return h.jsx("button",{onClick:Sr,disabled:U===0,className:`flex-[2] py-4 rounded-xl font-black uppercase text-base tracking-widest transition-all flex items-center justify-center gap-3 shadow-lg font-righteous ${U>0?"bg-[var(--neon-green)] hover:bg-white hover:text-black text-black hover:scale-105":"bg-slate-900 text-slate-800 cursor-not-allowed border border-white/5"}`,children:U>0?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-ping"}),ne," (",U,")"]}):"IDLE"})})()]}),h.jsxs("div",{className:"bg-[#151520] p-6 rounded-[2rem] border border-white/5 mt-8",children:[h.jsxs("h3",{className:"text-xl font-black text-white uppercase tracking-widest font-righteous mb-4 flex items-center gap-3",children:[h.jsx("span",{className:"text-[var(--neon-purple)]",children:""})," Priority Protocol"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.values(Es).map(E=>h.jsxs("button",{onClick:()=>{z5(E)},className:`p-4 rounded-xl border-2 text-left transition-all relative overflow-hidden group ${e.queueStrategy===E?"bg-[var(--neon-purple)]/20 border-[var(--neon-purple)] text-white shadow-[0_0_15px_var(--neon-purple)]":"bg-black/40 border-white/5 text-slate-500 hover:border-white/20 hover:text-slate-300"}`,children:[h.jsx("div",{className:"font-bold font-righteous uppercase tracking-wider relative z-10",children:E.replace("_"," ")}),h.jsxs("div",{className:"text-[10px] uppercase font-mono mt-1 opacity-60 relative z-10",children:[E==="FRESH_MEAT"&&"New Singers First",E==="FAIR_ROTATION"&&"Fewest Songs + Oldest Wait",E==="FIFO"&&"Strict First In First Out",E==="OLDEST_MEMBER"&&"Oldest Singers First",E==="RANDOM"&&"Chaotic Shuffle"]}),e.queueStrategy===E&&h.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-[var(--neon-green)] animate-pulse"})]},E))})]})]})}),me&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-rose-500/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(244,63,94,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-rose-500 shadow-[0_0_20px_rgba(244,63,94,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-[2rem] border-2 border-rose-500/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(244,63,94,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-rose",children:"SYSTEM RESET"}),h.jsxs("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:["This will ",h.jsx("span",{className:"text-rose-500 underline decoration-2 underline-offset-4 decoration-rose-500",children:"TERMINATE ALL SESSIONS"}),", clear requests, and wipe history logs."]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>ye(!1),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:Nr,className:"flex-[2] py-4 bg-rose-500 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(244,63,94,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"EXECUTE WIPE"})]})]})}),($||Ee)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[70] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-6xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-purple",children:"User Directory"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] uppercase font-black tracking-[0.3em] font-righteous opacity-80 mt-1",children:"Authenticated Identities & Signal History"})]}),h.jsxs("div",{className:"flex gap-3",children:[Ee&&h.jsx("button",{onClick:()=>vn(null),className:"px-6 py-3 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/10 transition-all",children:" ALL ACCOUNTS"}),h.jsx("button",{onClick:()=>{Bt("DANGER: This will permanently delete ALL GUEST ACCOUNTS and DUPLICATE ENTRIES from the Firestore database. Proceed?",async()=>{const E=await wT();E.success?(alert(`DATABASE CLEANUP SUCCESS: Removed ${E.deletedCount} orphan records.`),await be()):alert(`CLEANUP FAILED: ${E.error}`)})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/50 text-rose-500 rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-rose-500 hover:text-white transition-all hover:scale-105",children:"PURGE GUESTS"}),h.jsx("button",{onClick:()=>ls(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"+ NEW ACCOUNT"}),h.jsx("button",{onClick:mi,className:"text-slate-600 hover:text-white p-2 ml-2 font-black text-4xl transition-colors transform hover:scale-110",children:""})]})]}),h.jsx("div",{className:"p-6 border-b-2 border-white/5 bg-black/20",children:h.jsxs("div",{className:"relative group max-w-2xl mx-auto",children:[h.jsx("input",{type:"text",placeholder:"SCANNING DIRECTORY RECORDS...",value:Pe,onChange:E=>Pt(E.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-10 py-4 text-white font-black uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-12 custom-scrollbar bg-black/20",children:Ee?h.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500 grid lg:grid-cols-12 gap-8",children:[h.jsx("div",{className:"lg:col-span-4 space-y-6",children:h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[3rem] p-8 shadow-2xl relative overflow-hidden group hover:border-[var(--neon-purple)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-[var(--neon-purple)]/10 blur-[60px] rounded-full -mr-24 -mt-24 group-hover:bg-[var(--neon-purple)]/20 transition-all"}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[h.jsx("div",{className:"scale-125 mb-4",children:h.jsx(hr,{name:Ee.name,isActive:e.participants.some(E=>E.id===Ee.id)})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"text-sm font-bold text-[var(--neon-cyan)] uppercase tracking-widest mb-2 font-righteous",children:"SINGER PROFILE"}),h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee break-words",children:Ee.name})]}),h.jsxs("div",{className:"w-full mt-8 space-y-3 pt-6 border-t border-white/5",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"SINGER ID"}),h.jsxs("span",{className:"text-[var(--neon-pink)] font-mono opacity-80",children:[Ee.id.slice(0,8),"..."]})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"SECURITY"}),h.jsx("span",{className:`px-2 py-0.5 rounded-full ${Ee.password?"bg-[var(--neon-pink)]/10 text-[var(--neon-pink)]":"bg-slate-900 text-slate-600"}`,children:Ee.password?"SECURE PIN":"OPEN LINK"})]})]}),h.jsxs("div",{className:"w-full mt-10 space-y-3",children:[h.jsx("button",{onClick:()=>Tr(Ee),className:"w-full py-3 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"CHANGE PASSWORD"}),h.jsx("button",{onClick:async()=>{as(Ee),T(!0),await sa(Ee.id),await be()},className:"w-full py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all shadow-[0_0_15px_rgba(0,229,255,0.3)] font-righteous hover:bg-white",children:"SYNC QR CODE"}),h.jsx("div",{className:"pt-2 border-t border-white/5 mt-2 space-y-2"}),h.jsx("button",{onClick:()=>{Bt("Permanently delete this account?",async()=>{await ed(Ee.id),vn(null),await be()})},className:"w-full py-3 bg-rose-500/5 hover:bg-rose-500 text-rose-500/40 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all border border-transparent hover:border-rose-500/30 font-righteous mt-2",children:"TERMINATE ACCOUNT"})]})]})]})}),h.jsx("div",{className:"lg:col-span-8 space-y-6",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-pink)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["LIBRARY STARS (",Ee.favorites.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[Ee.favorites.map(E=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl flex justify-between items-center group hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-black text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-pink)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:async()=>{await Xi({participantId:Ee.id,participantName:Ee.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),await be()},className:"px-3 py-1.5 bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[var(--neon-cyan)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-cyan)] hover:text-black transition-all",children:"ADD"}),h.jsx("button",{onClick:()=>L({type:"favorite",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:()=>{Bt("Remove from stars?",async()=>{await R5(Ee.id,E.id),await be()})},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]},E.id)),Ee.favorites.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"Catalog is empty"})]})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-cyan)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["PERFORMANCE LOG (",Ee.personalHistory.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[Ee.personalHistory.map((E,X)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:[h.jsx("button",{onClick:()=>L({type:"history",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:()=>{Bt("Erase from history?",async()=>{await D5(Ee.id,E.id),await be()})},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]}),h.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[h.jsx("span",{className:"text-xs text-slate-700 font-black uppercase font-righteous tracking-widest",children:new Date(E.createdAt).toLocaleDateString()}),h.jsx("button",{onClick:async()=>{await Nm(E),await be()},className:"px-3 py-1.5 bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-pink)] hover:text-black transition-all",children:"RE-QUEUE"})]})]},X)),Ee.personalHistory.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"No transmissions recorded"})]})]})]})]})})]}):wr?h.jsxs("form",{onSubmit:Gt,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:"SECURITY UPDATE"}),h.jsxs("p",{className:"text-center text-slate-400 font-righteous uppercase tracking-widest mb-8",children:["UPDATING KEY FOR: ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:vt==null?void 0:vt.name})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"NEW ENCRYPTION PIN"}),h.jsx("input",{required:!0,type:"password",value:bo,onChange:E=>{di(E.target.value),dn("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all",placeholder:"ENTER NEW PIN"})]}),Ct&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",Ct]})})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{In(!1),vn(vt),en(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"UPDATE KEY"})]})]}):hi?h.jsxs("form",{onSubmit:fi,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:vt?"Modify Profile":"New User Account"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"IDENTITY HANDLE"}),h.jsx("input",{required:!0,type:"text",value:bn.name,onChange:E=>{_r({...bn,name:E.target.value}),dn("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]}),Ct&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",Ct]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"ENCRYPTION PIN (OPTIONAL)"}),h.jsx("input",{type:"password",value:bn.password,onChange:E=>_r({...bn,password:E.target.value}),className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{ls(!1),en(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"AUTHORIZE ACCOUNT"})]})]}):h.jsx("div",{className:"space-y-16",children:(()=>{const E=s.filter(U=>!U.password&&e.participants.some(ne=>ne.id===U.id)&&(U.name.toLowerCase().includes(Pe.toLowerCase())||U.id.toLowerCase().includes(Pe.toLowerCase()))),X=s.filter(U=>(U.password||!e.participants.some(ne=>ne.id===U.id))&&(U.name.toLowerCase().includes(Pe.toLowerCase())||U.id.toLowerCase().includes(Pe.toLowerCase())));return h.jsxs(h.Fragment,{children:[E.length>0&&h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-[var(--neon-green)] uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ACTIVE SIGNALS"}),h.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-[var(--neon-green)]/30 to-transparent"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:E.map(U=>h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 rounded-[2rem] p-4 flex items-center justify-between hover:border-[var(--neon-green)] transition-all shadow-lg group relative overflow-hidden",children:[h.jsxs("div",{className:"flex items-center gap-6 min-w-0 pr-4",children:[h.jsx(hr,{name:U.name,isActive:!0}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>vn(U),className:"text-white font-bold text-3xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-green)] transition-colors font-bungee",children:U.name}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:"text-[10px] bg-[var(--neon-green)] text-black px-2 py-0.5 rounded-full font-black uppercase tracking-widest font-righteous shrink-0",children:"LIVE"}),h.jsxs("span",{className:"text-sm text-slate-600 uppercase font-black font-righteous tracking-widest truncate",children:[U.favorites.length,"   ",U.personalHistory.length," TX"]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 bg-black/40 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:()=>vn(U),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>Dn(U),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>Xn(U),className:"py-2.5 px-6 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO_SET"}),h.jsx("button",{onClick:()=>Fe(U),className:"py-2.5 px-6 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"MANUAL"})]}),h.jsx("button",{onClick:()=>{Bt("Terminate temporary link?",async()=>{await ed(U.id),await be()})},className:"w-10 h-10 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all font-black",children:""})]})]},U.id))})]}),h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-slate-600 uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ARCHIVE DIRECTORY"}),h.jsx("div",{className:"h-[1px] w-full bg-white/5"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:X.map(U=>{const ne=e.participants.some(he=>he.id===U.id);return h.jsxs("div",{className:`bg-[#101015] border-2 ${ne?"border-[var(--neon-cyan)] shadow-[0_0_20px_rgba(0,229,255,0.1)]":"border-white/5"} rounded-[2.5rem] p-6 flex flex-col justify-between hover:border-[var(--neon-purple)] transition-all group`,children:[h.jsxs("div",{className:"flex justify-between items-start gap-4 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-2xl font-black border-2 ${U.password?"bg-indigo-900/50 border-[var(--neon-purple)] text-white shadow-[0_0_15px_rgba(167,139,250,0.3)]":"bg-slate-800 border-white/10 text-slate-500"}`,children:U.name.charAt(0).toUpperCase()}),U.isAdmin&&h.jsx("div",{className:"absolute -top-2 -right-2 bg-[var(--neon-pink)] text-black text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg border border-white/20",children:"ADMIN"})]}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"flex justify-between items-start gap-2",children:h.jsx("button",{onClick:()=>vn(U),className:"text-white font-bold text-2xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-purple)] transition-colors font-bungee",children:U.name})}),h.jsxs("p",{className:"text-xs text-slate-500 uppercase font-black tracking-[0.2em] mt-1 font-righteous",children:[U.password?" AUTHENTICATED":"GUEST ID","  ",U.favorites.length," "]})]})]}),h.jsx("button",{onClick:()=>as(U),className:"p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-[var(--neon-cyan)]/20 hover:border-[var(--neon-cyan)] hover:text-[var(--neon-cyan)] transition-all group/qr",title:"Generate SINC QR",children:h.jsxs("div",{className:"w-6 h-6 flex flex-col justify-between items-center p-0.5",children:[h.jsx("div",{className:"w-full h-[2px] bg-current"}),h.jsxs("div",{className:"w-full flex justify-between",children:[h.jsx("div",{className:"w-[2px] h-[2px] bg-current"}),h.jsx("div",{className:"w-[2px] h-[2px] bg-current"})]}),h.jsx("div",{className:"w-full h-[2px] bg-current"}),h.jsxs("div",{className:"w-full flex justify-between",children:[h.jsx("div",{className:"w-[2px] h-[2px] bg-current"}),h.jsx("div",{className:"w-[2px] h-[2px] bg-current"})]}),h.jsx("div",{className:"w-full h-[2px] bg-current"})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>vn(U),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>Dn(U),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>Xn(U),className:"flex-[2] py-2.5 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO-SET"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Fe(U),className:"flex-[4] py-2.5 bg-slate-900 border border-white/5 hover:border-[var(--neon-pink)] text-slate-500 hover:text-white rounded-lg flex items-center justify-center gap-2 transition-all text-xs font-black uppercase font-righteous",children:"MANUAL SELECT"}),h.jsx("button",{onClick:()=>{Bt("Erase this record permanently?",async()=>{await ed(U.id),await be()})},className:"flex-1 py-2.5 bg-rose-500/5 text-rose-500/20 hover:text-rose-500 border border-transparent hover:border-rose-500/30 rounded-lg transition-all flex items-center justify-center",children:""})]})]})]},U.id)})}),X.length===0&&E.length===0&&h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-slate-800 text-base font-black uppercase tracking-[0.5em] font-righteous",children:"EMPTY DIRECTORY - NO SIGNALS DETECTED"})})]})]})})()})})]})}),(l||A||k||j||p||y)&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-[100] backdrop-blur-xl",children:h.jsx("div",{className:"w-full max-w-md",children:(()=>{let E={singerName:"",songName:"",artist:"",youtubeUrl:"",type:dt.SINGING},X="Global Track Input";if(k&&Ee)if(k.type==="favorite"){const U=Ee.favorites.find(ne=>ne.id===k.itemId);U&&(E={singerName:Ee.name,songName:U.songName,artist:U.artist,youtubeUrl:U.youtubeUrl||"",type:U.type},X=`Edit Permanent Favorite for ${Ee.name}`)}else{const U=Ee.personalHistory.find(ne=>ne.id===k.itemId);U&&(E={singerName:Ee.name,songName:U.songName,artist:U.artist,youtubeUrl:U.youtubeUrl||"",type:U.type},X=`Edit History Entry for ${Ee.name}`)}else A?(E={singerName:A.participantName,songName:A.songName,artist:A.artist,youtubeUrl:A.youtubeUrl||"",type:A.type},X="Modify Track"):y?(E={singerName:"",songName:y.songName,artist:y.artist,youtubeUrl:y.youtubeUrl||"",type:y.type},X="Edit Verified Song"):p?(E={singerName:"",songName:"",artist:"",youtubeUrl:"",type:dt.SINGING},X="Add to Verified Songbook"):j&&(E.singerName=j.name,X=`Song for ${j.name}`);return h.jsx(RT,{title:X,showSingerName:!k&&!y&&!p,initialSingerName:E.singerName,initialSongName:E.songName,initialArtist:E.artist,initialYoutubeUrl:E.youtubeUrl,initialType:E.type,submitLabel:A||k||y?"Save Update":p?"Add to Library":"Queue Track",onSubmit:lr,onCancel:mi,participants:e.participants},(A==null?void 0:A.id)||(k==null?void 0:k.itemId)||(j==null?void 0:j.id)||(y==null?void 0:y.id)||(p?"new-verified":"new-request"))})()})}),(_||Bn)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-500",children:h.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-white/10 rounded-[3rem] p-8 relative overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] via-[var(--neon-purple)] to-[var(--neon-pink)] animate-gradient-x"}),h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tight font-bungee neon-glow-white",children:Bn?"USER SINC":"JOIN ROOM"}),Bn&&h.jsxs("p",{className:"text-[var(--neon-cyan)] text-xs font-black uppercase tracking-widest font-righteous mt-1",children:["TARGET: ",Bn.name]})]}),h.jsx("button",{onClick:()=>{T(!1),as(null)},className:"text-slate-600 hover:text-white p-2 font-black text-3xl transition-colors",children:""})]}),h.jsx("div",{className:"flex flex-col items-center gap-4",children:(()=>{const E=Nd(),X=E.includes("localhost")||E.includes("127.0.0.1"),U=je=>{const St=je.replace(/\/$/,"")+"/";return Bn?`${St}?userId=${Bn.id}&room=${Lt||""}`:`${St}?room=${Lt||""}`};if(!X){const je=U(E);return h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.2em] text-[10px] font-righteous self-start",children:" LIVE URL  SCAN TO JOIN"}),h.jsx("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm mx-auto shadow-[0_0_40px_rgba(255,255,255,0.1)] hover:scale-105 transition-transform",children:h.jsx(ox,{value:je,size:300,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),h.jsx("div",{className:"w-full p-3 bg-[var(--neon-green)]/10 border border-[var(--neon-green)]/30 rounded-xl",children:h.jsx("p",{className:"text-[10px] font-mono text-[var(--neon-green)] break-all text-center",children:je})})]})}const ne=Se.trim()?Se.trim().startsWith("http")?Se.trim():`http://${Se.trim()}:5173/SingMode-v.2/`:null,he=ne?U(ne):"http://enter-your-ip-below";return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"w-full p-3 bg-rose-500/20 border border-rose-500/40 rounded-xl",children:[h.jsx("p",{className:"text-rose-400 text-[10px] font-black uppercase tracking-widest text-center",children:" LOCALHOST  phones can't connect via this URL"}),h.jsx("p",{className:"text-slate-500 text-[10px] text-center mt-1 font-mono",children:"Deploy to GitHub Pages for automatic public URLs, or enter your LAN IP below"})]}),h.jsx("p",{className:"text-[var(--neon-yellow)] font-black uppercase tracking-[0.2em] text-[10px] font-righteous self-start",children:"MANUAL NETWORK IP"}),h.jsx("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm mx-auto shadow-[0_0_40px_rgba(255,255,255,0.1)] hover:scale-105 transition-transform",children:h.jsx(ox,{value:he,size:300,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),h.jsx("div",{className:"w-full p-3 bg-black/60 border border-white/10 rounded-xl",children:h.jsx("p",{className:"text-[10px] font-mono text-[var(--neon-cyan)] break-all text-center",children:ne?he:"Enter IP below to generate URL"})}),h.jsx("input",{type:"text",value:Se,onChange:je=>Ie(je.target.value),placeholder:"e.g. 192.168.0.160",className:"w-full bg-black border-2 border-[var(--neon-yellow)]/40 focus:border-[var(--neon-yellow)] rounded-xl px-4 py-3 text-white font-mono text-sm outline-none transition-all placeholder:text-slate-600"}),h.jsx("button",{onClick:()=>{ug(Se.trim())},className:"w-full py-3 bg-[var(--neon-yellow)] text-black rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous",children:"SAVE & USE THIS IP"})]})})()}),h.jsx("div",{className:"mt-6 p-3 bg-white/5 rounded-2xl border border-white/5 text-center",children:h.jsx("p",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-widest text-sm font-righteous",children:Bn?"AUTO-LOGIN ENABLED":`ROOM ID: ${Lt}`})})]})}),yt&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-xl bg-[#050510] border-4 border-white/10 p-12 rounded-[3.5rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-glow-purple",children:"Signal Origin"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mb-12 font-righteous opacity-80",children:"Set the endpoint for guest terminal connections"}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-black/40 p-8 rounded-[2rem] border-2 border-white/5 border-dashed",children:[h.jsx("p",{className:"text-sm text-slate-500 uppercase font-black mb-3 tracking-[0.3em] font-righteous",children:"LOCAL ENVIRONMENT DETECTION"}),h.jsxs("div",{className:"text-xl text-[var(--neon-cyan)] font-mono font-black tracking-widest",children:[window.location.hostname," ",h.jsx("span",{className:"text-sm text-slate-700 opacity-60",children:"(CURRENT HOST)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-black text-slate-500 uppercase mb-4 ml-4 tracking-[0.3em] font-righteous",children:"TERMINAL ADDRESS / PUBLIC TUNNEL URL"}),h.jsx("input",{type:"text",value:Se,onChange:E=>Ie(E.target.value),placeholder:"E.G. 192.168.1.15 OR HTTPS://SIGNAL.NGROK.APP",className:"w-full bg-black border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-black uppercase font-mono tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all placeholder:text-slate-800 text-lg"})]}),h.jsx("div",{className:"bg-[var(--neon-pink)]/5 border border-[var(--neon-pink)]/10 p-6 rounded-2xl",children:h.jsx("p",{className:"text-sm text-[var(--neon-pink)]/60 font-black leading-relaxed uppercase tracking-widest font-righteous italic",children:"Note: Cross-network connectivity requires tunneling (ngrok) for public-private bridge."})}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{onClick:()=>Q(!1),className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:Ca,className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"AUTHORIZE CONFIG"})]})]})]})}),Ge&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-pink",children:"Signal Selection"}),h.jsxs("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mt-1 font-righteous opacity-80",children:["Verified Catalog  Target: ",h.jsx("span",{className:"text-[var(--neon-pink)]",children:Ge.name})]})]}),h.jsx("button",{onClick:()=>Fe(null),className:"text-slate-600 hover:text-white p-3 font-black text-4xl transition-colors transform hover:scale-110",children:""})]}),h.jsx("div",{className:"p-6 bg-black/20 border-b-2 border-white/5",children:h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"FILTER VERIFIED TRANSMISSIONS...",value:hn,onChange:E=>Zt(E.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-12 py-4 text-white font-black uppercase tracking-widest font-righteous outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:[hn&&hs.length===0&&h.jsx("div",{className:"text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO MATCHING TRANSMISSIONS"})}),!hn&&nt.length===0&&h.jsx("div",{className:"text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO VERIFIED SONGS IN LIBRARY"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(hn?hs:nt).map(E=>h.jsxs("div",{className:"bg-black/40 border-2 border-white/5 rounded-2xl p-4 relative overflow-hidden group hover:border-[var(--neon-pink)] transition-all",children:[h.jsx("h3",{className:"text-lg font-black text-white uppercase truncate font-righteous",children:E.songName}),h.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-4 font-righteous",children:E.artist}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>jn(E),className:"flex-1 py-2 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"SELECT"}),h.jsx("button",{onClick:()=>vi(E),className:"flex-1 py-2 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"})]})]},E.id))})]}),h.jsx("div",{className:"p-6 border-t-2 border-white/5 flex justify-end bg-black/40 backdrop-blur-xl",children:h.jsx("button",{onClick:()=>g(!0),className:"py-3 px-6 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"ADD NEW VERIFIED SONG"})})]})}),h.jsx("style",{children:`
        @keyframes gradient-x {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient-x {
          background-size: 200% 200%;
          animation: gradient-x 3s ease infinite;
        }
        .neon-glow-pink {
          text-shadow: 0 0 10px rgba(255, 0, 255, 0.5), 0 0 20px rgba(255, 0, 255, 0.3);
        }
        .neon-glow-cyan {
          text-shadow: 0 0 10px rgba(0, 229, 255, 0.5), 0 0 20px rgba(0, 229, 255, 0.3);
        }
        .neon-glow-purple {
          text-shadow: 0 0 10px rgba(167, 139, 250, 0.5), 0 0 20px rgba(167, 139, 250, 0.3);
        }
        .neon-glow-green {
           text-shadow: 0 0 10px rgba(0, 255, 157, 0.5), 0 0 20px rgba(0, 255, 157, 0.3);
        }
        .neon-glow-white {
           text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.02);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(255, 255, 255, 0.1);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(255, 255, 255, 0.2);
        }
      `}),Mt==="ADMIN"&&h.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/5 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--neon-green)]/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsx("div",{className:"flex justify-between items-center mb-10 relative z-10",children:h.jsxs("div",{children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-5xl",children:""})," SESSION CONTROL"]}),h.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest mt-2 font-righteous",children:"MANAGE ACTIVE INSTANCES"})]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[or.map(E=>h.jsxs("div",{className:"bg-black/40 border-2 border-white/5 rounded-[2rem] p-6 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("div",{className:"w-12 h-12 bg-black rounded-xl border border-white/10 flex items-center justify-center text-2xl",children:E.id===(e==null?void 0:e.id)?"":""}),h.jsx("div",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border ${E.id===(e==null?void 0:e.id)?"bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] border-[var(--neon-cyan)]":"bg-slate-800 text-slate-400 border-white/10"}`,children:E.id===(e==null?void 0:e.id)?"CURRENT":"REMOTE"})]}),h.jsx("h3",{className:"text-xl font-black text-white uppercase truncate font-bungee mb-1",children:E.venueName||"Unknown Venue"}),h.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-6 font-righteous",children:["HOST: ",E.hostName,"  ID: ",E.id]}),h.jsx("button",{onClick:()=>{Bt(`Force close session "${E.venueName}"? This cannot be undone.`,async()=>{await CT(E.id)})},className:"w-full py-3 bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white border border-rose-500/30 rounded-xl font-black uppercase tracking-widest text-xs transition-all font-righteous",children:"FORCE CLOSE"})]},E.id)),or.length===0&&h.jsx("div",{className:"col-span-full text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO ACTIVE SESSIONS FOUND"})})]})]})}),Mt==="SESSION"&&h.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/5 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--neon-purple)]/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-10 relative z-10",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-purple",children:[h.jsx("span",{className:"text-5xl",children:""})," DAY_SHOW SESSION"]}),h.jsx("p",{className:"text-slate-400 mt-2 font-mono",children:"Monitor all connected devices and manage active synchronization."})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"px-6 py-3 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-3",children:[h.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest font-righteous",children:"STATUS"}),h.jsx("span",{className:`text-xl font-black ${Lt?"text-[var(--neon-green)]":"text-rose-500"} uppercase font-bungee`,children:Lt?"ACTIVE":"OFFLINE"})]}),h.jsxs("div",{className:"px-6 py-3 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-3",children:[h.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest font-righteous",children:"ROOM"}),h.jsx("span",{className:"text-2xl font-black text-white font-mono",children:Lt||"----"})]})]})]}),Lt?h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[(Aa=e.deviceConnections)==null?void 0:Aa.map(E=>{var he;const X=E.status==="connected",U=E.userId?s.find(je=>je.id===E.userId)||((he=e.participants)==null?void 0:he.find(je=>je.id===E.userId)):null,ne=E.isGuest||(U&&"isGuest"in U?U.isGuest:!1);return h.jsxs("div",{className:`p-6 rounded-[2rem] border transition-all relative overflow-hidden group ${X?"bg-[#151520] border-[var(--neon-purple)]/30 hover:border-[var(--neon-purple)]":"bg-[#05050A] border-white/5 opacity-60"}`,children:[h.jsx("div",{className:`absolute top-6 right-6 w-3 h-3 rounded-full ${X?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-rose-500"}`}),h.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[h.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-3xl shadow-lg ${U?ne?"bg-[var(--neon-orange)]/20 text-[var(--neon-orange)]":"bg-[var(--neon-blue)]/20 text-[var(--neon-blue)]":"bg-white/5 text-slate-500"}`,children:U?ne?"":"":""}),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-xl font-bold text-white font-righteous tracking-wide flex items-center gap-3",children:[E.id,ne&&h.jsx("span",{className:"px-2 py-0.5 rounded bg-rose-500 text-[8px] font-black text-white",children:"GUEST"})]}),h.jsxs("div",{className:"text-xs font-mono text-slate-500 mt-1 flex flex-col gap-1",children:[h.jsx("div",{className:"truncate max-w-[150px]",title:E.peerId,children:E.peerId}),E.userAgent&&h.jsx("div",{className:"text-[10px] text-[var(--neon-cyan)]/60 font-black uppercase flex items-center gap-1",children:E.userAgent.toLowerCase().includes("mobile")?" MOBILE":" DESKTOP"})]}),h.jsx("div",{className:`mt-2 text-xs font-bold uppercase tracking-widest px-2 py-0.5 rounded inline-block ${X?"bg-[var(--neon-green)]/10 text-[var(--neon-green)]":"bg-rose-500/10 text-rose-500"}`,children:E.status})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"p-4 bg-black/40 rounded-xl border border-white/5",children:[h.jsx("div",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-widest mb-1",children:"Assigned Session"}),h.jsx("div",{className:"text-white font-medium truncate",children:U?U.name:h.jsx("span",{className:"text-slate-600 italic",children:"Unassigned"})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{const je=prompt("Enter User Name to link (must exist in Directory):");if(je){const St=s.find(qn=>qn.name.toLowerCase()===je.toLowerCase());St?(T5(E.id,St.id,St.isGuest),be()):alert("User not found!")}},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 text-sm font-bold text-white transition-all",children:U?"CHANGE":"LINK USER"}),h.jsx("button",{onClick:()=>{Bt("Forget this device?",async()=>{await S5(E.id),be()})},className:"px-4 py-3 rounded-xl bg-rose-500/10 hover:bg-rose-500/20 border border-rose-500/20 text-rose-500 transition-all",children:"Forget"})]})]})]},E.id)}),(!e.deviceConnections||e.deviceConnections.length===0)&&h.jsx("div",{className:"col-span-full py-20 text-center text-slate-500 font-mono",children:"No devices detected yet. Scan the QR code to connect."})]}):h.jsx("div",{className:"flex items-center justify-center py-20",children:h.jsxs("div",{className:"max-w-xl w-full bg-[#0a0a0a] border-4 border-dashed border-white/5 rounded-[4rem] p-16 text-center",children:[h.jsx("div",{className:"w-24 h-24 bg-[var(--neon-purple)]/10 text-[var(--neon-purple)] rounded-[2.5rem] flex items-center justify-center text-5xl mx-auto mb-10 shadow-[0_0_50px_rgba(180,0,255,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-4xl font-black text-white uppercase mb-4 font-bungee tracking-tight",children:"OPEN BROADCAST"}),h.jsxs("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-xs mb-10 font-righteous leading-relaxed",children:["ACTIVATE THE WORLDWIDE SYNC PROTOCOL. ",h.jsx("br",{}),"ALLOW SINGER CONNECTIONS AND REMOTE COMMANDS."]}),h.jsx("button",{onClick:()=>we(!0),className:"mb-10 px-6 py-3 bg-white/5 hover:bg-white/10 rounded-2xl border border-white/10 flex items-center justify-center gap-3 text-xs font-black text-slate-400 hover:text-white transition-all uppercase tracking-[0.2em] font-righteous mx-auto shadow-inner",children:" VIEW SESSION HISTORY"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-black text-[var(--neon-purple)] uppercase tracking-[0.3em] mb-3 font-righteous",children:"SESSION NAME / ROOM ID"}),h.jsx("input",{type:"text",value:P,onChange:E=>W(E.target.value.toUpperCase().replace(/\s+/g,"_")),className:"w-full bg-black border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono text-center text-2xl tracking-widest focus:border-[var(--neon-purple)] outline-none transition-all"})]}),h.jsx("button",{onClick:()=>cs(),disabled:ce||!P,className:"w-full py-6 bg-[var(--neon-purple)] text-white rounded-[1.5rem] font-black uppercase tracking-[0.2em] text-xl shadow-[0_0_40px_rgba(180,0,255,0.4)] hover:scale-105 hover:bg-fuchsia-500 transition-all disabled:opacity-50 disabled:scale-100 font-righteous",children:ce?"INITIALIZING...":"OPEN DAY_SHOW SESSION"}),li&&li!==P&&h.jsxs("button",{onClick:()=>cs(li),disabled:ce,className:"w-full py-4 bg-black border-2 border-[var(--neon-cyan)] text-[var(--neon-cyan)] rounded-[1.5rem] font-black uppercase tracking-[0.2em] text-sm shadow-[0_0_20px_rgba(0,229,255,0.2)] hover:bg-[var(--neon-cyan)]/10 transition-all font-righteous mt-4",children:["RECONNECT TO PREVIOUS: ",li]})]})]})}),Lt&&h.jsxs("div",{className:"mt-10 p-8 bg-black/40 rounded-[2.5rem] border border-white/5 relative overflow-hidden animate-in slide-in-from-bottom-4 duration-700",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-cyan)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight font-bungee neon-text-glow-cyan",children:"Live Session Log"}),h.jsx("span",{className:"px-3 py-1 rounded-full bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[9px] font-black text-[var(--neon-cyan)] uppercase tracking-widest animate-pulse",children:" REALTIME_FEED"})]}),h.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-4 no-scrollbar custom-scrollbar",children:[(bi=e.logs)==null?void 0:bi.slice().reverse().map((E,X)=>h.jsxs("div",{className:"flex gap-4 items-start animate-in slide-in-from-left-2 duration-300 group",children:[h.jsxs("span",{className:"text-[10px] font-mono text-slate-600 shrink-0 mt-0.5 group-hover:text-slate-400 transition-colors",children:["[",new Date(E.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),h.jsx("span",{className:`text-xs font-righteous uppercase tracking-wide px-2 py-0.5 rounded ${E.type==="error"?"text-rose-500 bg-rose-500/5":E.type==="warn"?"text-[var(--neon-yellow)] bg-[var(--neon-yellow)]/5":"text-slate-300 group-hover:text-white transition-colors"}`,children:E.message})]},X)),(!e.logs||e.logs.length===0)&&h.jsx("div",{className:"text-center py-10 text-slate-700 font-black uppercase tracking-widest text-[10px] italic",children:"AWAITING_INITIAL_SYNC_EVENTS..."})]})]})]})}),oe&&h.jsx("div",{className:"fixed inset-0 bg-black/98 flex items-center justify-center p-6 z-[400] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl bg-[#050510] border-4 border-[var(--neon-purple)]/30 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(180,0,255,0.2)] flex flex-col max-h-[85vh] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[var(--neon-purple)]/5 blur-[100px] rounded-full -mr-48 -mt-48 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-12",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white uppercase tracking-tight font-bungee neon-text-glow-purple",children:"SESSION_HISTORY"}),h.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-[0.2em] text-xs mt-2 font-righteous",children:"ARCHIVE OF PREVIOUS SINGMODE V.2 BROADCASTS"})]}),h.jsx("button",{onClick:()=>we(!1),className:"w-16 h-16 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center text-2xl transition-all",children:""})]}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-4 space-y-4 no-scrollbar",children:Be.length===0?h.jsx("div",{className:"py-32 text-center text-slate-600 font-black uppercase tracking-widest font-righteous italic",children:"NO PREVIOUS SESSIONS RECORDED"}):h.jsx("div",{className:"grid gap-4",children:Be.map(E=>h.jsxs("div",{className:"p-8 bg-white/5 rounded-[2.5rem] border border-white/5 hover:border-white/10 transition-all group flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-8",children:[h.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[var(--neon-purple)]/10 border border-[var(--neon-purple)]/20 flex flex-col items-center justify-center",children:h.jsx("span",{className:"text-2xl",children:""})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight font-righteous",children:E.venueName||"Main Lounge"}),h.jsxs("div",{className:"flex items-center gap-4 mt-1 text-slate-500 font-mono text-sm",children:[h.jsxs("span",{children:["ID: ",E.id]}),h.jsx("span",{children:""}),h.jsx("span",{children:new Date(E.startedAt).toLocaleDateString()})]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-1 font-righteous",children:"Duration"}),h.jsx("div",{className:"text-white font-mono text-xl",children:E.endedAt?Math.floor((E.endedAt-E.startedAt)/(60*1e3))+" MINS":"---"})]})]},E.id))})})]})}),Ta.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:Ta.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>Gr(E=>({...E,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{Gr(E=>({...E,isOpen:!1})),await Ta.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]})},eD=({onJoin:r,filterHostName:e})=>{const[t,s]=ie.useState([]),[a,l]=ie.useState(!0);ie.useEffect(()=>{const p=AT(g=>{s(g),l(!1)});return()=>p()},[]);const u=e?t.filter(p=>{var g;return((g=p.hostName)==null?void 0:g.toLowerCase())===e.toLowerCase()}):t;return a?h.jsx("div",{className:"text-center py-20 animate-pulse",children:h.jsx("div",{className:"text-[var(--neon-cyan)] text-xl font-black uppercase tracking-widest font-righteous",children:"SEARCHING FOR STAGES..."})}):u.length===0?h.jsxs("div",{className:"text-center py-20 px-6 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5 mx-auto max-w-2xl",children:[h.jsx("p",{className:"text-[var(--neon-pink)] text-2xl font-black uppercase tracking-widest font-bungee mb-4",children:"NO STAGES FOUND"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-wider text-sm",children:"There are no active sessions nearby."})]}):h.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-ping"}),h.jsx("h2",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] font-righteous text-lg",children:"LIVE STAGES"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(p=>h.jsxs("div",{className:"group relative bg-[#101015] border-2 border-white/5 hover:border-[var(--neon-cyan)] p-8 rounded-[2.5rem] transition-all hover:-translate-y-2 hover:shadow-[0_0_50px_rgba(0,229,255,0.15)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 via-transparent to-[var(--neon-purple)]/0 group-hover:from-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-purple)]/5 transition-all duration-500"}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("div",{className:"w-16 h-16 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-3xl shadow-xl group-hover:scale-110 transition-transform duration-500 group-hover:border-[var(--neon-cyan)]",children:""}),h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)]/10 text-[var(--neon-green)] border border-[var(--neon-green)]/20 rounded-lg text-[10px] font-black uppercase tracking-widest font-righteous",children:"ONLINE"})]}),h.jsx("h3",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors truncate",children:p.venueName||"OPEN MIC"}),h.jsxs("div",{className:"flex items-center gap-2 mb-8 text-slate-400 font-righteous uppercase tracking-wider text-xs",children:[h.jsx("span",{className:"text-[var(--neon-pink)]",children:"HOST:"})," ",p.hostName]}),h.jsx("button",{onClick:()=>r(p.id),className:"w-full py-4 bg-white text-black font-black uppercase tracking-[0.2em] rounded-xl hover:bg-[var(--neon-cyan)] transition-all font-righteous hover:scale-[1.02] active:scale-95 shadow-lg",children:"JOIN STAGE"})]})]},p.id))})]})},e1=({url:r})=>r?h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-2 rounded-lg text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border border-[var(--neon-cyan)]/30 transition-all shadow-[0_0_10px_rgba(0,229,255,0.2)]",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,tD=()=>{const[r,e]=ie.useState(null),[t,s]=ie.useState(null),[a,l]=ie.useState(!0),[u,p]=ie.useState(""),[g,y]=ie.useState(""),[b,_]=ie.useState(""),[T,R]=ie.useState(""),[V,$]=ie.useState(""),[Z,ae]=ie.useState(null),[de,me]=ie.useState(!1),[ye,De]=ie.useState(null),[Te,A]=ie.useState(null),[C,k]=ie.useState("ROTATION"),[L,j]=ie.useState(!1),[O,I]=ie.useState(""),[it,yt]=ie.useState(!1),[Q,oe]=ie.useState(0),[we,Be]=ie.useState(!1),[at,P]=ie.useState("connecting"),[W,ce]=ie.useState(void 0),ue=Et.getRoomId(),Se=Nd()+(ue?`?room=${ue}`:"");new URLSearchParams(window.location.search).get("room")||new URLSearchParams(window.location.search).get("userId"),ie.useEffect(()=>{ue&&Q5().then(se=>{const pe=se.find(Xe=>Xe.id===ue);pe&&ce(pe.hostName)})},[ue]);const[Ie,Pe]=ie.useState({isOpen:!1,message:"",onConfirm:()=>{}}),Pt=(se,pe)=>{Pe({isOpen:!0,message:se,onConfirm:pe})};ie.useEffect(()=>{(async()=>{const Xe=new URLSearchParams(window.location.search).get("userId");if(Xe){console.log(`[Participant] SINC Login detected for userId: ${Xe}`);const Fe=await P5(Xe);Fe.success&&Fe.profile&&(s(Fe.profile),l(!1),window.history.replaceState({},"",window.location.pathname+(ue?`?room=${ue}`:"")))}const Ge=await Yn();if(Ge){s(Ge);const Fe=await Ke();ae(Fe);const Mt=Fe.participants.find(qe=>qe.id===Ge.id);if(Mt)e(Mt);else{console.log(`[Participant] Auto-joining session ${ue} for profile ${Ge.id}`);try{const qe=await sa(Ge.id);e(qe)}catch(qe){console.error("Auto-join failed:",qe)}}}else{const Fe=await Ke();ae(Fe)}})(),Et.onConnectionStatus=pe=>{P(pe)}},[ue]);const $e=async()=>{const se=await Ke();ae(se);const pe=await Yn();if(s(pe),!pe)e(null);else{const Xe=se.participants.find(Ge=>Ge.id===pe.id);Xe&&e(Xe)}};ie.useEffect(()=>(window.addEventListener("kstar_sync",$e),window.addEventListener("storage",$e),()=>{window.removeEventListener("kstar_sync",$e),window.removeEventListener("storage",$e)}),[]);const Br=async se=>{se.preventDefault(),p("");try{if(a){const pe=await O5(g,T);if(pe.success&&pe.profile){const Xe=await sa(pe.profile.id);e(Xe),s(pe.profile)}else p(pe.error||"Authorization failed.")}else{if(T!==V){p("PASSWORDS_DO_NOT_MATCH");return}const pe=await Zc({name:g,email:b||void 0,password:T||void 0},!0);if(pe.success&&pe.profile){const Xe=await sa(pe.profile.id);e(Xe),s(pe.profile)}else p(pe.error||"Initialization failed.")}}catch(pe){p(pe.message||"An unexpected error occurred.")}},ss=async se=>{r&&(await ia(r.id,se),await $e())},is=async se=>{r&&(ye?(await zc(ye.id,{songName:se.songName,artist:se.artist,youtubeUrl:se.youtubeUrl,type:se.type,message:se.message}),De(null)):(await Xi({participantId:r.id,participantName:r.name,songName:se.songName,artist:se.artist,youtubeUrl:se.youtubeUrl,type:se.type,message:se.message}),me(!1),r.status!==Vt.READY&&await ia(r.id,Vt.READY)),A(null),await $e())},ks=()=>{me(!1),De(null),A(null)},ar=async()=>{p("");try{const se=`Guest-${Math.floor(Math.random()*1e4)}`,pe=await Zc({name:se},!0);if(pe.success&&pe.profile){const Xe=await sa(pe.profile.id);e(Xe),s(pe.profile),A(null),me(!0),await ia(pe.profile.id,Vt.READY)}else p(pe.error||"Guest initialization failed.")}catch(se){p(se.message||"An unexpected error occurred.")}};if(!r)return h.jsxs("div",{className:"max-w-2xl mx-auto p-8 flex flex-col items-center justify-center min-h-[90vh] text-center animate-in fade-in duration-1000 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-[#10002B] to-black -z-10"}),h.jsxs("div",{className:"w-48 h-48 flex items-center justify-center mb-12 relative group",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)] blur-[60px] opacity-40 group-hover:opacity-60 transition-opacity"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 relative z-10 bg-black shadow-2xl",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_40px_rgba(255,0,127,0.5)] w-full h-full",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"})})})]}),h.jsx("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none",children:"Singmode v.2"}),h.jsx("p",{className:"text-[var(--neon-cyan)] font-righteous mb-16 uppercase tracking-[0.6em] text-lg font-black neon-glow-cyan",children:"SINGER LOGIN"}),h.jsxs("div",{className:"w-full max-w-lg mb-12 relative z-20",children:[h.jsx("button",{onClick:ar,className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-widest text-xs mt-4",children:"GUEST PASS"})]}),h.jsxs("div",{className:"relative w-full max-w-lg",children:[h.jsx("div",{className:"absolute inset-0 flex items-center mb-8",children:h.jsx("div",{className:"w-full border-t border-white/10"})}),h.jsx("div",{className:"relative flex justify-center mb-8",children:h.jsx("span",{className:"bg-black px-4 text-slate-500 font-righteous uppercase tracking-widest text-sm",children:"MEMBER LOGIN"})})]}),h.jsxs("form",{onSubmit:Br,className:"w-full space-y-8 bg-[#050510] p-10 md:p-14 rounded-[4rem] border-4 border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)]"}),u&&h.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-500 text-base py-4 px-6 rounded-2xl font-black uppercase tracking-widest animate-pulse font-righteous",children:u}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"STAGE NAME"}),h.jsx("input",{type:"text",required:!0,value:g,onChange:se=>y(se.target.value),placeholder:"Stage Name",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-2xl uppercase tracking-wider placeholder:text-slate-600 font-righteous"})]}),!a&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"EMAIL (OPTIONAL)"}),h.jsx("input",{type:"email",value:b,onChange:se=>_(se.target.value),placeholder:"myname@emailserver.com",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all shadow-inner text-xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"PASSWORD"}),h.jsx("input",{type:"password",required:!a,value:T,onChange:se=>R(se.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),!a&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"CONFIRM PASSWORD"}),h.jsx("input",{type:"password",required:!0,value:V,onChange:se=>$(se.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsx("button",{type:"submit",className:"w-full py-6 mt-6 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-2xl font-black text-3xl shadow-[0_0_40px_rgba(255,0,127,0.3)] transition-all uppercase tracking-[0.2em] font-bungee hover:scale-[1.02] active:scale-95",children:a?"SIGN IN":"CREATE PROFILE"}),h.jsx("button",{type:"button",onClick:()=>{l(!a),p("")},className:"text-slate-600 hover:text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.3em] pt-6 block mx-auto transition-colors font-righteous border-b-2 border-transparent hover:border-[var(--neon-cyan)] pb-1",children:a?"CREATE ACCOUNT":"BACK TO START"})]})]});if(!Z)return null;const Is=Z.requests.filter(se=>se.participantId===r.id);return h.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-10 relative",children:[h.jsxs("header",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-2xl group",children:[h.jsx("div",{className:"absolute inset-0 bg-[#0a0a0a] rounded-[2.9rem]"}),h.jsx("div",{className:"absolute top-0 inset-x-0 h-32 bg-[var(--neon-purple)]/10 blur-[50px]"}),h.jsxs("div",{className:"relative p-8 flex flex-col items-center text-center",children:[h.jsx("div",{className:"absolute top-6 right-6 z-20"}),h.jsxs("div",{className:"w-24 h-24 p-1 rounded-full border-2 border-white/10 mb-6 relative",children:[h.jsx("div",{className:"absolute inset-0 rounded-full bg-[var(--neon-pink)]/20 blur-xl"}),h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full object-cover relative z-10"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 bg-black rounded-full flex items-center justify-center border-2 border-black z-20",children:h.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse shadow-[0_0_10px_currentColor] ${at==="connected"?"bg-[var(--neon-green)] text-[var(--neon-green)]":at==="connecting"?"bg-[var(--neon-yellow)] text-[var(--neon-yellow)]":"bg-rose-500 text-rose-500"}`})})]}),h.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight uppercase leading-none font-bungee mb-2",children:r.name}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("button",{onClick:()=>{Pt("Are you sure you want to sign out?",async()=>{await Wd(),window.location.reload()})},className:"flex items-center gap-2 px-4 py-2 bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl transition-all font-black uppercase text-[10px] tracking-widest font-righteous border border-rose-500/20 hover:border-transparent",children:[h.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"SIGN OUT"]})})]})]}),Z.currentRound&&Z.currentRound.length>0&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-top-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4 px-4",children:[h.jsx("div",{className:"w-2 h-2 bg-[var(--neon-green)] rounded-full animate-blink"}),h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-base font-righteous",children:"ON STAGE"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:Z.currentRound.map((se,pe)=>h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${pe===0?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"relative",children:[pe===0&&h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-[var(--neon-green)] text-black text-[8px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] z-20",children:"LIVE"}),h.jsx("div",{className:`w-14 h-14 flex flex-col justify-center items-center border-2 rounded-xl transition-all shrink-0 ${pe===0?"border-[var(--neon-green)] bg-[var(--neon-green)]/10 text-[var(--neon-green)]":"border-white/10 text-slate-400"}`,children:h.jsx("span",{className:"text-xl font-bold font-mono tracking-tighter",children:se.requestNumber})})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-xl sm:text-2xl font-black uppercase font-righteous tracking-tight leading-tight ${pe===0?"text-white":"text-slate-300"}`,children:se.songName}),h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-sm sm:text-lg font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:se.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg hidden sm:inline",children:"/"}),h.jsxs("span",{className:"text-sm sm:text-lg font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",se.participantName]})]})]})]}),h.jsx("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:pe===0&&h.jsx(e1,{url:se.youtubeUrl})})]},se.id))})]}),h.jsx("div",{className:"grid grid-cols-5 gap-2 bg-[#0a0a0a] p-2 rounded-2xl border border-white/5 shadow-inner",children:["ROTATION","REQUESTS","FAVORITES","HISTORY","VOCALS"].map(se=>h.jsxs("button",{onClick:()=>k(se),className:`py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all font-righteous flex flex-col items-center justify-center gap-1.5 ${C===se?"bg-[#151520] text-white shadow-[0_0_20px_rgba(255,255,255,0.05)] border border-white/10":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:[h.jsx("span",{className:`text-2xl mb-0.5 ${C===se?"text-[var(--neon-pink)]":"grayscale opacity-50"}`,children:se==="ROTATION"?"":se==="REQUESTS"?"":se==="FAVORITES"?"":se==="HISTORY"?"":""}),se==="ROTATION"?"STAGE":se==="REQUESTS"?"MY SONGS":se==="FAVORITES"?"SONGBOOK":se==="HISTORY"?"LOG":"MIC SETUP"]},se))}),h.jsx("button",{onClick:()=>{A(null),me(!0)},className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),h.jsxs("div",{className:"flex gap-4 pt-2",children:[h.jsx("button",{onClick:()=>ss(Vt.READY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Vt.READY?"bg-[#051005] border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.2)] text-[var(--neon-green)]":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"READY"})}),h.jsx("button",{onClick:()=>ss(Vt.STANDBY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Vt.STANDBY?"bg-[#150505] border-rose-500 shadow-[0_0_30px_rgba(244,63,94,0.2)] text-rose-500":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"NOT YET"})})]}),(de||ye)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-50 overflow-y-auto backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsx("div",{className:"w-full max-w-lg space-y-6",children:h.jsx(RT,{title:ye?"Remix Request":"New Transmission",submitLabel:ye?"Save Remix":"Transmit",initialSongName:(ye==null?void 0:ye.songName)||(Te==null?void 0:Te.songName)||"",initialArtist:(ye==null?void 0:ye.artist)||(Te==null?void 0:Te.artist)||"",initialYoutubeUrl:(ye==null?void 0:ye.youtubeUrl)||(Te==null?void 0:Te.youtubeUrl)||"",initialType:(ye==null?void 0:ye.type)||(Te==null?void 0:Te.type)||dt.SINGING,onSubmit:is,onCancel:ks,participants:Z.participants,currentUserId:r.id},(ye==null?void 0:ye.id)||"new-request")})}),h.jsxs("main",{className:"min-h-[300px] pb-32",children:[C==="ROTATION"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-sm px-4 font-righteous opacity-80",children:"COMING UP"}),h.jsx("div",{className:"space-y-4",children:(()=>{Z.requests.filter(qe=>qe.status===Ve.PENDING&&!qe.isInRound);const se=Z.requests.filter(qe=>qe.status===Ve.APPROVED&&qe.type===dt.SINGING&&!qe.isInRound),pe=Z.participants.filter(qe=>se.some(hn=>hn.participantId===qe.id)).sort((qe,hn)=>(hn.joinedAt||0)-(qe.joinedAt||0)),Xe={};se.forEach(qe=>{Xe[qe.participantId]||(Xe[qe.participantId]=[]),Xe[qe.participantId].push(qe)}),Object.keys(Xe).forEach(qe=>{Xe[qe].sort((hn,Zt)=>hn.createdAt-Zt.createdAt)});const Ge=[];let Fe=0,Mt=!0;for(;Mt;)Mt=!1,pe.forEach(qe=>{Xe[qe.id]&&Xe[qe.id][Fe]&&(Ge.push(Xe[qe.id][Fe]),Mt=!0)}),Fe++;return Ge.length===0?h.jsx("div",{className:"text-center py-16 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"QUEUE EMPTY"})}):Ge.map((qe,hn)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-6 rounded-[2rem] flex justify-between items-center group hover:border-[var(--neon-blue)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-blue)] transition-colors",children:qe.songName}),h.jsxs("div",{className:"text-base text-[var(--neon-cyan)] uppercase tracking-[0.2em] flex items-center gap-2 font-righteous",children:[qe.artist," ",h.jsx("span",{className:"text-white/20",children:"|"})," ",h.jsx("span",{className:"text-slate-400",children:qe.participantName})]})]}),h.jsx("div",{className:"shrink-0 w-12 h-12 rounded-full border border-[var(--neon-blue)]/50 bg-[var(--neon-blue)]/10 flex items-center justify-center text-[var(--neon-blue)] text-xl font-black font-bungee shadow-[0_0_15px_rgba(5,217,232,0.2)]",children:hn+1})]},qe.id))})()})]}),C==="REQUESTS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[Is.map(se=>h.jsx("div",{className:"relative group",children:h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 p-6 rounded-[2rem] hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsxs("div",{className:"font-bold text-white tracking-tight uppercase truncate font-bungee text-3xl group-hover:text-[var(--neon-pink)] transition-colors",children:[h.jsxs("span",{className:"text-slate-500 mr-2 text-[11px] font-mono tracking-widest",children:["#",se.requestNumber]}),se.songName]}),h.jsx(e1,{url:se.youtubeUrl})]}),h.jsx("div",{className:"text-base text-slate-400 font-bold uppercase tracking-[0.2em] truncate font-righteous",children:se.artist})]}),h.jsx("div",{className:`shrink-0 px-3 py-1 rounded-lg border text-xs font-black uppercase tracking-widest ${se.status===Ve.APPROVED?se.isInRound?"bg-[var(--neon-green)] border-[var(--neon-green)] text-black animate-pulse shadow-[0_0_15px_var(--neon-green)]":"bg-[var(--neon-cyan)]/10 border-[var(--neon-cyan)] text-[var(--neon-cyan)]":"border-white/10 text-slate-600"}`,children:se.status===Ve.APPROVED?se.isInRound?"LIVE":"QUEUED":"PENDING"})]}),(se.status===Ve.PENDING||se.status===Ve.APPROVED)&&h.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/5",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:async()=>{await cg(r.id,se.id,"up"),await $e()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Up",children:""}),h.jsx("button",{onClick:async()=>{await cg(r.id,se.id,"down"),await $e()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Down",children:""})]}),h.jsx("button",{onClick:()=>De(se),className:"flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white",children:"EDIT"}),h.jsx("button",{onClick:async()=>{await Ji(se.id),await $e()},className:"flex-1 py-3 bg-rose-500/10 hover:bg-rose-500/20 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-rose-500",children:"CANCEL"})]})]})},se.id)),Is.length===0&&h.jsx("div",{className:"text-center py-20 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-base font-black uppercase tracking-[0.5em] font-righteous text-slate-700",children:"NO REQUESTS"})})]}),C==="FAVORITES"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"SEARCH SONGBOOK...",value:O,onChange:se=>I(se.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-[2rem] py-5 px-6 pl-14 text-xl font-bold uppercase tracking-wider text-white focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous placeholder:text-slate-600 shadow-inner"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-2xl text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors",children:""})]}),h.jsx("div",{className:"grid gap-3",children:(()=>{const se=[...t.favorites.map(pe=>({...pe,isFavorite:!0})),...((Z==null?void 0:Z.verifiedSongbook)||[]).filter(pe=>!t.favorites.some(Xe=>Xe.songName===pe.songName&&Xe.artist===pe.artist)).map(pe=>({...pe,isFavorite:!1}))].filter(pe=>!O||pe.songName.toLowerCase().includes(O.toLowerCase())||pe.artist.toLowerCase().includes(O.toLowerCase()));return se.length===0?h.jsx("div",{className:"text-center py-20 opacity-30 font-righteous text-sm uppercase tracking-widest text-slate-500",children:"NO_MATCHES"}):se.map(pe=>h.jsxs("div",{className:"bg-[#101015] p-5 rounded-[2rem] flex justify-between items-center group border-2 border-white/5 hover:border-[var(--neon-yellow)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight group-hover:text-[var(--neon-yellow)] transition-colors",children:pe.songName}),pe.isFavorite&&h.jsx("span",{className:"text-lg text-[var(--neon-yellow)] animate-pulse",children:""})]}),h.jsx("div",{className:"text-sm text-slate-400 font-bold uppercase tracking-[0.2em] font-righteous",children:pe.artist})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{A({...pe}),me(!0)},className:"bg-[var(--neon-pink)] text-black px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous shadow-[0_0_15px_rgba(255,0,127,0.3)] hover:scale-105 active:scale-95",children:"ADD"}),h.jsx("button",{onClick:async()=>{await ET(pe),await $e()},className:`px-2 transition-colors ${pe.isFavorite?"text-rose-500":"text-slate-700 hover:text-[var(--neon-yellow)]"}`,children:pe.isFavorite?"":""})]})]},pe.id))})()})]}),C==="HISTORY"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[t.personalHistory.map((se,pe)=>h.jsxs("div",{className:"bg-[#101015] p-6 rounded-[2rem] flex justify-between items-center border-2 border-white/5 hover:border-[var(--neon-purple)] group transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-purple)] transition-colors",children:se.songName}),h.jsx("div",{className:"text-base text-[var(--neon-cyan)]/70 font-bold uppercase tracking-[0.2em] font-righteous",children:se.artist})]}),h.jsx("button",{onClick:()=>{A({...se,type:dt.SINGING}),me(!0)},className:"text-slate-600 hover:text-white border border-white/5 hover:border-white px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest transition-all font-righteous",children:"AGAIN"})]},pe)),t.personalHistory.length===0&&h.jsx("div",{className:"text-center py-20 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"NO HISTORY FOUND"})})]}),C==="VOCALS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-100 transition-opacity",children:h.jsx("span",{className:"text-5xl",children:""})}),h.jsx("h3",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-[0.3em] font-righteous mb-6",children:"VOCAL SETUP"}),h.jsxs("div",{className:"flex flex-col items-center gap-6",children:[h.jsxs("div",{className:"w-full bg-black/40 border border-white/10 rounded-2xl p-6 flex flex-col items-center",children:[h.jsx("span",{className:"text-sm font-black text-slate-500 uppercase tracking-widest font-righteous mb-2",children:"SINGER RANGE"}),h.jsx("span",{className:"text-4xl font-bold text-white uppercase font-bungee tracking-tight neon-text-glow-cyan",children:(t==null?void 0:t.vocalRange)||"UNKNOWN"})]}),it?h.jsxs("div",{className:"w-full space-y-3 py-2",children:[h.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-[var(--neon-cyan)] animate-pulse shadow-[0_0_10px_var(--neon-cyan)]",style:{width:`${Q}%`}})}),h.jsx("div",{className:"text-xs text-[var(--neon-cyan)] font-black animate-pulse font-righteous text-center tracking-[0.2em]",children:"CALIBRATING VOICE..."})]}):h.jsx("button",{onClick:async()=>{yt(!0);let se=0;const pe=setInterval(()=>{se+=5,oe(se),se>=100&&(clearInterval(pe),setTimeout(async()=>{const Xe=["Soprano","Alto","Tenor","Baritone","Bass"],Ge=Xe[Math.floor(Math.random()*Xe.length)];t&&await M5(t.id,Ge),yt(!1),oe(0),await $e()},500))},100)},className:"px-8 py-4 bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black rounded-xl font-black uppercase tracking-[0.2em] transition-all font-righteous border border-[var(--neon-cyan)]/30 hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"START_CALIBRATION_SEQUENCE"})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 opacity-50 relative overflow-hidden border-dashed",children:[h.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.3em] font-righteous mb-2",children:"MICROPHONE_TOOLS"}),h.jsx("p",{className:"text-slate-600 font-mono text-xs uppercase tracking-wider",children:"HARDWARE_LINK_OFFLINE // COMING_SOON"})]})]})]}),h.jsxs("footer",{className:"fixed bottom-6 left-6 right-6 z-40 flex gap-4",children:[h.jsxs("button",{onClick:()=>Be(!0),className:"flex-1 bg-[#101015] border-2 border-[var(--neon-green)]/30 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:bg-[var(--neon-green)] hover:text-black hover:border-[var(--neon-green)] transition-all group",children:[h.jsx("span",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous group-hover:text-black text-[var(--neon-green)]",children:"RECONNECT"}),h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})]}),h.jsxs("button",{onClick:()=>j(!0),className:"flex-1 bg-[#101015] border-2 border-white/10 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:border-[var(--neon-pink)] transition-all group",children:[h.jsx("span",{className:"text-sm text-[var(--neon-pink)] font-black uppercase tracking-[0.3em] font-righteous",children:"SYSTEM_LINK"}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})})]})]}),we&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-4 md:p-10 overflow-hidden max-h-[90vh] overflow-y-auto",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-green)] via-[var(--neon-cyan)] to-[var(--neon-blue)] animate-gradient-x"}),h.jsx("button",{onClick:()=>Be(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors z-50",children:""}),h.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white uppercase tracking-tight mb-8 font-bungee neon-glow-green mt-8",children:"RECONNECT"}),h.jsx(eD,{onJoin:se=>{window.location.search=`?room=${se}`},filterHostName:"SingMode DJ"})]})}),L&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-sm text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("button",{onClick:()=>j(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors",children:""}),h.jsx("div",{className:"bg-white p-4 rounded-[2rem] inline-block mb-8 shadow-[0_0_40px_rgba(255,255,255,0.1)]",children:h.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(Se)}&bgcolor=ffffff`,alt:"Room QR",className:"w-48 h-48"})}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase tracking-tight mb-2 font-bungee neon-glow-white",children:"SYNC_NODE"}),h.jsx("p",{className:"text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.4em] font-righteous opacity-80",children:"SCAN TO INITIALIZE CONNECTION"})]})}),Ie.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:Ie.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>Pe(se=>({...se,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{Pe(se=>({...se,isOpen:!1})),await Ie.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]})},sl=({title:r,icon:e,description:t,items:s})=>h.jsxs("div",{className:"bg-[#101015] border border-white/5 p-10 rounded-[3.5rem] hover:border-[var(--neon-pink)] transition-all backdrop-blur-xl group relative overflow-hidden shadow-2xl",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[var(--neon-pink)]/5 blur-3xl rounded-full -mr-16 -mt-16 group-hover:bg-[var(--neon-pink)]/10 transition-colors"}),h.jsx("div",{className:"w-20 h-20 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-4xl mb-8 group-hover:scale-110 group-hover:border-[var(--neon-pink)] group-hover:text-white transition-all shadow-2xl relative z-10",children:e}),h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase mb-4 tracking-tight group-hover:text-[var(--neon-pink)] transition-colors relative z-10 leading-none",children:r}),h.jsx("p",{className:"text-[var(--neon-cyan)]/70 mb-8 font-bold uppercase text-[10px] tracking-[0.2em] font-righteous leading-relaxed relative z-10 transition-opacity",children:t}),h.jsx("ul",{className:"space-y-4 relative z-10",children:s.map((a,l)=>h.jsxs("li",{className:"flex items-start gap-3 text-[11px] text-slate-500 font-bold uppercase tracking-widest font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:[h.jsx("span",{className:"text-[var(--neon-cyan)] font-bold",children:""}),a]},l))})]}),nD=({onBack:r,onAdminLogin:e})=>{const t=()=>{prompt("Enter Admin Password:")==="Organized"?e():alert("Access Denied: Incorrect Password")};return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-slate-200 p-6 md:p-16 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsx("div",{className:"absolute -top-[500px] -right-[500px] w-[1000px] h-[1000px] bg-[var(--neon-pink)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute -bottom-[500px] -left-[500px] w-[1000px] h-[1000px] bg-[var(--neon-cyan)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-5 pointer-events-none"}),h.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-24 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsx("div",{onClick:r,className:"cursor-pointer hover:scale-105 transition-transform",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-10 h-10 rounded-full border border-[var(--neon-pink)]"}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest",children:"Singmode v.2"})]})}),h.jsx("button",{onClick:r,className:"px-8 py-4 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-slate-400 hover:text-white rounded-2xl font-bold text-[9px] uppercase tracking-widest font-righteous transition-all",children:"RETURN TO HUB"})]}),h.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-32 animate-in fade-in zoom-in duration-700 delay-100",children:[h.jsxs("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-8 tracking-tight uppercase leading-none neon-text-glow-purple",children:["The ultimate ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:"karaoke"})," os"]}),h.jsx("p",{className:"text-[10px] md:text-xs text-[var(--neon-cyan)]/80 font-bold uppercase tracking-[0.4em] font-righteous leading-relaxed max-w-2xl mx-auto border-y border-[var(--neon-cyan)]/20 py-4",children:"Singmode v.2 transforms any arena into a high-fidelity visual theater. Connect instantly, dominate the queue, and emit your signal."})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-32 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200",children:[h.jsx(sl,{title:"DJ Console",icon:"",description:"The command center for your sessions. Maintain signal flow.",items:["Real-time Queue Logic","Drag & Drop Sequencer","Instant Signal Auth","Master Output Control"]}),h.jsx(sl,{title:"Singer Web",icon:"",description:"A personal terminal for every guest. Eliminate analog friction.",items:["Identity Transmission","Smart Vector Search","High-Speed Requests","Live Sync Lyrics"]}),h.jsx(sl,{title:"Theater Box",icon:"",description:"A stunning visual matrix for the main screen. Pure aesthetics.",items:["Ultra-HD Playback","Generative Backgrounds","Active HUD Overlays","QR Signal Entrance"]}),h.jsx(sl,{title:"Hybrid AI",icon:"",description:"Gemini integration enhances the arena with predictive logic.",items:["Vibe-Matched Vectors","Dynamic Visual Synthesis","Automated Interstitials","Identity Verification"]}),h.jsx(sl,{title:"Sync Matrix",icon:"",description:"Real-time P2P technology keeps the cluster in perfect sync.",items:["Zero-Latency State","Decentralized Design","Instant Node Creation","Omni-Device Support"]}),h.jsx(sl,{title:"Prime Suite",icon:"",description:"Unlock premium protocols for venues and power units.",items:["Broadcast Protocols","Branding Overlays","Logic Routing","Priority Channel"]}),h.jsxs("div",{className:"md:col-span-2 lg:col-span-1 border-2 border-dashed border-white/10 rounded-[3.5rem] flex flex-col items-center justify-center p-10 group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("p",{className:"text-[10px] text-slate-700 font-black uppercase tracking-[0.4em] mb-6 font-righteous group-hover:text-[var(--neon-cyan)]",children:"ADMIN LOGIN"}),h.jsx("button",{onClick:t,className:"p-6 bg-black border border-white/5 rounded-2xl text-[10px] font-black uppercase tracking-widest font-righteous text-white/40 hover:text-white hover:border-white transition-all shadow-xl",children:" ENTER ADMIN MODE"})]})]}),h.jsx("div",{className:"text-center animate-in fade-in duration-700 delay-500 pb-32",children:h.jsx("button",{onClick:r,className:"px-16 py-8 bg-[var(--neon-cyan)] hover:bg-white text-black rounded-[3rem] font-bold text-2xl uppercase tracking-widest font-righteous shadow-[0_0_50px_rgba(34,211,238,0.4)] hover:scale-105 transition-all",children:"START SINGING"})})]})]})},rD=({onBack:r})=>{const[e,t]=ie.useState(null),[s,a]=ie.useState(""),[l,u]=ie.useState(!1),[p,g]=ie.useState({primary:"#ff007f",secondary:"#05d9e8",accent:"#feff3f"}),[y,b]=ie.useState({isOpen:!1,message:"",onConfirm:()=>{}}),_=(R,V)=>{b({isOpen:!0,message:R,onConfirm:V})};ie.useEffect(()=>{(async()=>{const V=await Ke();t(V),V.brandIdentity&&(a(V.brandIdentity.venueName),u(V.brandIdentity.isBusinessAccount)),V.customTheme&&g({primary:V.customTheme.primaryNeon,secondary:V.customTheme.secondaryNeon,accent:V.customTheme.accentNeon})})()},[]);const T=async()=>{var V;if(!e)return;const R={...e};R.brandIdentity={venueName:s,isBusinessAccount:l,logoUrl:(V=R.brandIdentity)==null?void 0:V.logoUrl},R.customTheme={primaryNeon:p.primary,secondaryNeon:p.secondary,accentNeon:p.accent},await gt(R),document.documentElement.style.setProperty("--neon-pink",p.primary),document.documentElement.style.setProperty("--neon-cyan",p.secondary),document.documentElement.style.setProperty("--neon-yellow",p.accent),alert("Configurations locked in.")};return e?h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white p-6 md:p-16 relative overflow-hidden font-righteous",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[h.jsxs("header",{className:"flex justify-between items-center mb-20 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsxs("div",{onClick:r,className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-12 h-12 rounded-full border-2 border-[var(--neon-pink)] group-hover:scale-110 transition-all"}),h.jsx("h1",{className:"text-3xl font-bungee tracking-tight",children:"ADMIN SETTINGS"})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:r,className:"px-6 py-3 bg-black border border-white/10 hover:border-white text-slate-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all",children:"CLOSE MENU"}),h.jsxs("button",{onClick:()=>{_("Are you sure you want to sign out?",async()=>{await Wd(),window.location.reload()})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/30 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all flex items-center gap-2",children:[h.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"LOG OUT"]})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-cyan)] mb-2 uppercase",children:"Venue Settings"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"VENUE DISPLAY"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] text-slate-500 uppercase tracking-widest mb-2 ml-4",children:"Venue Display Name"}),h.jsx("input",{type:"text",value:s,onChange:R=>a(R.target.value),placeholder:"Enter Venue Name",className:"w-full bg-black/60 border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold outline-none focus:border-[var(--neon-cyan)] transition-all uppercase"})]}),h.jsxs("div",{className:"flex items-center justify-between p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1",children:"Business Account"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold",children:"Unlocks Revenue Stream Matrix"})]}),h.jsx("button",{onClick:()=>u(!l),className:`w-14 h-8 rounded-full transition-all relative ${l?"bg-[var(--neon-cyan)]":"bg-slate-800"}`,children:h.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white transition-all ${l?"right-1":"left-1"}`})})]})]})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-pink)] mb-2 uppercase",children:"Theme Matrix"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"THEME COLORS"})]}),h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Primary Neon"}),h.jsx("input",{type:"color",value:p.primary,onChange:R=>g({...p,primary:R.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Secondary Neon"}),h.jsx("input",{type:"color",value:p.secondary,onChange:R=>g({...p,secondary:R.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Accent Neon"}),h.jsx("input",{type:"color",value:p.accent,onChange:R=>g({...p,accent:R.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]})]})})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl col-span-full",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-rose-500 mb-2 uppercase",children:"System Maintenance"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"DATABASE PURGE OPERATIONS"})]}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[h.jsxs("div",{className:"flex-1 p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1 text-white",children:"Account Optimization"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold mb-4",children:"Deletes all guests and duplicate entries"}),h.jsx("button",{onClick:()=>{_("DANGER: This will permanently delete all guest accounts and duplicate stage names. Proceed?",async()=>{const R=await wT();R.success?alert(`Cleanup complete. Deleted ${R.deletedCount} items.`):alert(`Cleanup failed: ${R.error}`)})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"PURGE GUESTS & DUPLICATES"})]}),h.jsxs("div",{className:"flex-1 p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1 text-white",children:"Signal Maintenance"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold mb-4",children:"Cleans up dead or abandoned stage signals"}),h.jsx("button",{onClick:()=>{_("This will remove all inactive or stale stage sessions from the public list. Proceed?",async()=>{const R=await K5();R.success?alert(`Signal cleanup complete. Removed ${R.deletedCount} stale sessions.`):alert(`Cleanup failed: ${R.error}`)})},className:"px-6 py-3 bg-[var(--neon-purple)]/10 border border-[var(--neon-purple)] hover:bg-[var(--neon-purple)] text-[var(--neon-purple)] hover:text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"PURGE STALE SIGNALS"})]})]})]})]}),h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsx("button",{onClick:T,className:"px-16 py-6 bg-white text-black rounded-[2rem] font-bold text-xl uppercase tracking-widest font-bungee hover:bg-[var(--neon-cyan)] transition-all shadow-2xl hover:scale-105 active:scale-95",children:"SAVE CHANGES"})})]}),y.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:y.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>b(R=>({...R,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{b(R=>({...R,isOpen:!1})),await y.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]}):null},sD=()=>{const[r,e]=ie.useState("SELECT"),[t,s]=ie.useState(!0),[a,l]=ie.useState(null),[u,p]=ie.useState(!1),[g,y]=ie.useState(!1),[b,_]=ie.useState("");ie.useEffect(()=>{(async()=>{var A;const de=new URLSearchParams(window.location.search),me=(A=de.get("view"))==null?void 0:A.toUpperCase(),ye=de.get("userId"),De=de.get("room");(De||ye)&&p(!0);try{De||ye?(e("PARTICIPANT"),await Zh("PARTICIPANT",De||void 0)):me==="DJ"?e("DJ"):me==="PARTICIPANT"||me==="STAGE"?(e("PARTICIPANT"),await Zh("PARTICIPANT",void 0)):e("SELECT")}catch(C){console.error("[App] Init Error:",C),l(C.message),e("SELECT")}const Te=await Ke();Te.customTheme&&(document.documentElement.style.setProperty("--neon-pink",Te.customTheme.primaryNeon),document.documentElement.style.setProperty("--neon-cyan",Te.customTheme.secondaryNeon),document.documentElement.style.setProperty("--neon-yellow",Te.customTheme.accentNeon)),await q5(),s(!1)})()},[]);const T=async ae=>{s(!0),l(null);try{e(ae),ae==="PARTICIPANT"&&await Zh(ae)}catch(de){l(de.message),e("SELECT")}finally{s(!1)}},R=()=>{b.trim()&&(ug(b.trim()),y(!1),_(""))},V=Nd(),$=Et.getRoomId(),Z=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(V+($?`?room=${$}`:""))}&bgcolor=ffffff`;if(t)return h.jsxs("div",{className:"min-h-screen bg-[#050510] flex flex-col items-center justify-center space-y-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black"}),h.jsxs("div",{className:"w-24 h-24 relative",children:[h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-pink)]/30 rounded-full animate-ping"}),h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-cyan)]/30 rounded-full animate-ping delay-75"}),h.jsx("div",{className:"relative z-10 w-full h-full border-4 border-t-[var(--neon-pink)] border-r-[var(--neon-purple)] border-b-[var(--neon-cyan)] border-l-[var(--neon-yellow)] rounded-full animate-spin"})]}),h.jsx("h2",{className:"text-2xl font-black font-bungee text-white uppercase tracking-widest animate-pulse z-10",children:"INITIALIZING"})]});if(r==="FEATURES")return h.jsx(nD,{onBack:()=>e("SELECT"),onAdminLogin:()=>e("ADMIN")});if(r==="ADMIN")return h.jsx(rD,{onBack:()=>e("SELECT")});if(r==="SELECT"){const ae=kT(),de=V.includes("localhost")||V.includes("127.0.0.1");return h.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#050510] relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black -z-10"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-10"}),h.jsxs("div",{className:"max-w-7xl w-full z-10",children:[h.jsxs("div",{className:"text-center mb-20 animate-in fade-in slide-in-from-top-4 duration-1000",children:[h.jsxs("div",{className:"flex justify-center mb-10 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)]/20 blur-[100px] rounded-full"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 bg-black shadow-2xl relative z-10",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_50px_rgba(255,0,127,0.5)] w-48 h-48",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover"})})})]}),h.jsx("h1",{className:"text-6xl md:text-9xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none drop-shadow-2xl",children:"Singmode v.2"}),h.jsx("p",{className:"text-[var(--neon-yellow)] text-xl md:text-2xl font-bold tracking-widest uppercase neon-glow-yellow font-righteous",children:"KARAOKE_LOUNGE_SYSTEM"})]}),a&&h.jsxs("div",{className:"mb-12 p-10 bg-[#150005] border-4 border-rose-500 rounded-[3rem] text-center animate-in zoom-in duration-500 max-w-3xl mx-auto shadow-[0_0_60px_rgba(244,63,94,0.4)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-rose-500 animate-pulse"}),h.jsx("div",{className:"text-6xl mb-6",children:""}),h.jsx("h3",{className:"text-rose-500 font-bold uppercase tracking-widest text-3xl mb-4 font-bungee",children:"SYSTEM_CONFLICT"}),h.jsx("p",{className:"text-white text-xl font-bold leading-relaxed font-righteous",children:a}),h.jsx("p",{className:"text-rose-500/50 text-xs mt-8 uppercase font-bold tracking-widest font-righteous",children:"SINGLE_DJ_PROTOCOL_ACTIVE"})]}),h.jsxs("div",{className:`grid gap-8 ${u?"grid-cols-1 max-w-2xl mx-auto":"md:grid-cols-2"}`,children:[!u&&h.jsxs("button",{onClick:()=>T("DJ"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-pink)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(255,0,127,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-pink)]/0 to-[var(--neon-pink)]/5 group-hover:to-[var(--neon-pink)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-pink)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-pink)] transition-colors",children:"DJ_CONSOLE"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-cyan)] opacity-90 leading-relaxed",children:"COORDINATE ROTATION. APPROVE REQUESTS. COMMAND ATMOSPHERE."})]})]}),h.jsxs("button",{onClick:()=>T("PARTICIPANT"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-cyan)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(0,229,255,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 to-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-cyan)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-cyan)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGER_UI"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-yellow)] opacity-90 leading-relaxed",children:"REQUEST SONGS. FAVORITE VIBES. ACCESS SONGBOOK."})]})]})]}),h.jsxs("div",{className:"mt-16 p-10 bg-[#080808] border-2 border-white/5 rounded-[3rem] flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-green)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),h.jsx("div",{className:"bg-white p-4 rounded-3xl shrink-0 shadow-[0_0_40px_rgba(0,255,157,0.2)] border-4 border-white/10 group-hover:scale-105 transition-transform",children:h.jsx("img",{src:Z,alt:"Join QR Code",width:"140",height:"140",className:"block"})}),h.jsxs("div",{className:"text-center md:text-left flex-1 relative z-10",children:[h.jsx("strong",{className:"text-[var(--neon-green)] block mb-3 uppercase tracking-[0.3em] text-xs font-black font-righteous",children:"SCAN TO JOIN"}),h.jsx("div",{className:"text-white text-xl font-mono break-all mb-4 bg-black/50 px-4 py-2 rounded-lg inline-block border border-white/5",children:V}),de&&h.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl",children:[h.jsx("p",{className:"text-amber-500 text-[10px] font-black uppercase tracking-widest mb-2 font-righteous",children:" LOCALHOST DETECTED"}),h.jsx("button",{onClick:()=>{y(!0),_(ae||"")},className:"text-[10px] font-black text-white hover:text-[var(--neon-cyan)] uppercase tracking-[0.2em] underline decoration-white/30 hover:decoration-[var(--neon-cyan)] transition-all font-righteous",children:"CONFIGURE NETWORK IP"})]})]})]})]}),g&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-6 z-50 backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-lg bg-[#0a0a0a] border-2 border-white/10 rounded-[3rem] p-10 space-y-8 shadow-[0_0_60px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] to-[var(--neon-blue)]"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight",children:"Network Config"}),h.jsx("p",{className:"text-slate-500 text-[10px] uppercase tracking-widest font-righteous",children:"ESTABLISH REMOTE CONNECTION PROTOCOLS"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-[11px] font-bold text-[var(--neon-cyan)] uppercase tracking-[0.2em] ml-4 font-righteous",children:"Network IP Address"}),h.jsx("input",{type:"text",value:b,onChange:me=>_(me.target.value),placeholder:"e.g. 192.168.0.x OR https://....ngrok.io",className:"w-full bg-[#151520] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-sm"}),h.jsxs("p",{className:"text-slate-500 text-[9px] uppercase tracking-widest font-righteous ml-4 opacity-60",children:[h.jsx("span",{className:"text-[var(--neon-yellow)]",children:"PRO TIP:"})," Use ",h.jsx("span",{className:"text-white",children:"ngrok"})," for secure external tunneling."]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-4 bg-black border border-white/10 hover:bg-white/5 text-slate-400 hover:text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all font-righteous",children:"Cancel"}),h.jsx("button",{onClick:R,className:"flex-1 py-4 bg-[var(--neon-cyan)] text-black rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all font-righteous hover:scale-105",children:"Save Configuration"})]})]})})]})}return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white selection:bg-[var(--neon-pink)] selection:text-white",children:[h.jsx("nav",{className:"fixed top-0 inset-x-0 z-[100] backdrop-blur-xl bg-black/80 border-b border-white/5 transition-all duration-300",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>e("SELECT"),className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[var(--neon-pink)] p-0.5 group-hover:shadow-[0_0_20px_rgba(255,0,127,0.4)] transition-all",children:h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full"})}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest group-hover:text-[var(--neon-cyan)] transition-colors",children:"Singmode v.2"})]}),h.jsx("div",{className:"flex items-center gap-6",children:h.jsxs("button",{onClick:()=>{e("SELECT"),l(null)},className:"text-[9px] font-bold uppercase tracking-widest px-5 py-2.5 rounded-xl transition-all font-righteous bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white border border-white/5 hover:border-white/20",children:["EXIT ",r]})})]})}),h.jsx("main",{className:"pb-20",children:r==="DJ"?h.jsx(Z5,{onAdminAccess:()=>e("ADMIN")}):h.jsx(tD,{})})]})},IT=document.getElementById("root");if(!IT)throw new Error("Could not find root element to mount to");const iD=_2.createRoot(IT);iD.render(h.jsx(f2.StrictMode,{children:h.jsx(sD,{})}));
