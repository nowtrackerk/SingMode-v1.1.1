var a2=r=>{throw TypeError(r)};var mc=(r,e,t)=>e.has(r)?a2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);function o2(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Td(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hp={exports:{}},gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function l2(){if(Db)return gc;Db=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var p in a)p!=="key"&&(l[p]=a[p])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:u,ref:a!==void 0?a:null,props:l}}return gc.Fragment=e,gc.jsx=t,gc.jsxs=t,gc}var Ob;function c2(){return Ob||(Ob=1,Hp.exports=l2()),Hp.exports}var h=c2(),Fp={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function u2(){if(jb)return Pe;jb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function k(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,ee={};function se(M,X,ce){this.props=M,this.context=X,this.refs=ee,this.updater=ce||V}se.prototype.isReactComponent={},se.prototype.setState=function(M,X){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,X,"setState")},se.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function he(){}he.prototype=se.prototype;function me(M,X,ce){this.props=M,this.context=X,this.refs=ee,this.updater=ce||V}var ye=me.prototype=new he;ye.constructor=me,$(ye,se.prototype),ye.isPureReactComponent=!0;var Ie=Array.isArray;function Ee(){}var A={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(M,X,ce){var de=ce.ref;return{$$typeof:r,type:M,key:X,ref:de!==void 0?de:null,props:ce}}function L(M,X){return R(M.type,X,M.props)}function O(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function j(M){var X={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ce){return X[ce]})}var I=/\/+/g;function nt(M,X){return typeof M=="object"&&M!==null&&M.key!=null?j(""+M.key):X.toString(36)}function mt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Ee,Ee):(M.status="pending",M.then(function(X){M.status==="pending"&&(M.status="fulfilled",M.value=X)},function(X){M.status==="pending"&&(M.status="rejected",M.reason=X)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Q(M,X,ce,de,Ce){var je=typeof M;(je==="undefined"||je==="boolean")&&(M=null);var De=!1;if(M===null)De=!0;else switch(je){case"bigint":case"string":case"number":De=!0;break;case"object":switch(M.$$typeof){case r:case e:De=!0;break;case b:return De=M._init,Q(De(M._payload),X,ce,de,Ce)}}if(De)return Ce=Ce(M),De=de===""?"."+nt(M,0):de,Ie(Ce)?(ce="",De!=null&&(ce=De.replace(I,"$&/")+"/"),Q(Ce,X,ce,"",function(ei){return ei})):Ce!=null&&(O(Ce)&&(Ce=L(Ce,ce+(Ce.key==null||M&&M.key===Ce.key?"":(""+Ce.key).replace(I,"$&/")+"/")+De)),X.push(Ce)),1;De=0;var Ot=de===""?".":de+":";if(Ie(M))for(var gt=0;gt<M.length;gt++)de=M[gt],je=Ot+nt(de,gt),De+=Q(de,X,ce,je,Ce);else if(gt=k(M),typeof gt=="function")for(M=gt.call(M),gt=0;!(de=M.next()).done;)de=de.value,je=Ot+nt(de,gt++),De+=Q(de,X,ce,je,Ce);else if(je==="object"){if(typeof M.then=="function")return Q(mt(M),X,ce,de,Ce);throw X=String(M),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return De}function le(M,X,ce){if(M==null)return M;var de=[],Ce=0;return Q(M,de,"","",function(je){return X.call(ce,je,Ce++)}),de}function we(M){if(M._status===-1){var X=M._result;X=X(),X.then(function(ce){(M._status===0||M._status===-1)&&(M._status=1,M._result=ce)},function(ce){(M._status===0||M._status===-1)&&(M._status=2,M._result=ce)}),M._status===-1&&(M._status=0,M._result=X)}if(M._status===1)return M._result.default;throw M._result}var Ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},rt={map:le,forEach:function(M,X,ce){le(M,function(){X.apply(this,arguments)},ce)},count:function(M){var X=0;return le(M,function(){X++}),X},toArray:function(M){return le(M,function(X){return X})||[]},only:function(M){if(!O(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Pe.Activity=_,Pe.Children=rt,Pe.Component=se,Pe.Fragment=t,Pe.Profiler=a,Pe.PureComponent=me,Pe.StrictMode=i,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return A.H.useMemoCache(M)}},Pe.cache=function(M){return function(){return M.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(M,X,ce){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var de=$({},M.props),Ce=M.key;if(X!=null)for(je in X.key!==void 0&&(Ce=""+X.key),X)!C.call(X,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&X.ref===void 0||(de[je]=X[je]);var je=arguments.length-2;if(je===1)de.children=ce;else if(1<je){for(var De=Array(je),Ot=0;Ot<je;Ot++)De[Ot]=arguments[Ot+2];de.children=De}return R(M.type,Ce,de)},Pe.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Pe.createElement=function(M,X,ce){var de,Ce={},je=null;if(X!=null)for(de in X.key!==void 0&&(je=""+X.key),X)C.call(X,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ce[de]=X[de]);var De=arguments.length-2;if(De===1)Ce.children=ce;else if(1<De){for(var Ot=Array(De),gt=0;gt<De;gt++)Ot[gt]=arguments[gt+2];Ce.children=Ot}if(M&&M.defaultProps)for(de in De=M.defaultProps,De)Ce[de]===void 0&&(Ce[de]=De[de]);return R(M,je,Ce)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(M){return{$$typeof:p,render:M}},Pe.isValidElement=O,Pe.lazy=function(M){return{$$typeof:b,_payload:{_status:-1,_result:M},_init:we}},Pe.memo=function(M,X){return{$$typeof:y,type:M,compare:X===void 0?null:X}},Pe.startTransition=function(M){var X=A.T,ce={};A.T=ce;try{var de=M(),Ce=A.S;Ce!==null&&Ce(ce,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Ee,Ve)}catch(je){Ve(je)}finally{X!==null&&ce.types!==null&&(X.types=ce.types),A.T=X}},Pe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Pe.use=function(M){return A.H.use(M)},Pe.useActionState=function(M,X,ce){return A.H.useActionState(M,X,ce)},Pe.useCallback=function(M,X){return A.H.useCallback(M,X)},Pe.useContext=function(M){return A.H.useContext(M)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(M,X){return A.H.useDeferredValue(M,X)},Pe.useEffect=function(M,X){return A.H.useEffect(M,X)},Pe.useEffectEvent=function(M){return A.H.useEffectEvent(M)},Pe.useId=function(){return A.H.useId()},Pe.useImperativeHandle=function(M,X,ce){return A.H.useImperativeHandle(M,X,ce)},Pe.useInsertionEffect=function(M,X){return A.H.useInsertionEffect(M,X)},Pe.useLayoutEffect=function(M,X){return A.H.useLayoutEffect(M,X)},Pe.useMemo=function(M,X){return A.H.useMemo(M,X)},Pe.useOptimistic=function(M,X){return A.H.useOptimistic(M,X)},Pe.useReducer=function(M,X,ce){return A.H.useReducer(M,X,ce)},Pe.useRef=function(M){return A.H.useRef(M)},Pe.useState=function(M){return A.H.useState(M)},Pe.useSyncExternalStore=function(M,X,ce){return A.H.useSyncExternalStore(M,X,ce)},Pe.useTransition=function(){return A.H.useTransition()},Pe.version="19.2.4",Pe}var Pb;function Wc(){return Pb||(Pb=1,Fp.exports=u2()),Fp.exports}var ae=Wc();const h2=Td(ae);var $p={exports:{}},yc={},Yp={exports:{}},Qp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function d2(){return Mb||(Mb=1,(function(r){function e(Q,le){var we=Q.length;Q.push(le);e:for(;0<we;){var Ve=we-1>>>1,rt=Q[Ve];if(0<a(rt,le))Q[Ve]=le,Q[we]=rt,we=Ve;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var le=Q[0],we=Q.pop();if(we!==le){Q[0]=we;e:for(var Ve=0,rt=Q.length,M=rt>>>1;Ve<M;){var X=2*(Ve+1)-1,ce=Q[X],de=X+1,Ce=Q[de];if(0>a(ce,we))de<rt&&0>a(Ce,ce)?(Q[Ve]=Ce,Q[de]=we,Ve=de):(Q[Ve]=ce,Q[X]=we,Ve=X);else if(de<rt&&0>a(Ce,we))Q[Ve]=Ce,Q[de]=we,Ve=de;else break e}}return le}function a(Q,le){var we=Q.sortIndex-le.sortIndex;return we!==0?we:Q.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,p=u.now();r.unstable_now=function(){return u.now()-p}}var g=[],y=[],b=1,_=null,T=3,k=!1,V=!1,$=!1,ee=!1,se=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function ye(Q){for(var le=t(y);le!==null;){if(le.callback===null)i(y);else if(le.startTime<=Q)i(y),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(y)}}function Ie(Q){if($=!1,ye(Q),!V)if(t(g)!==null)V=!0,Ee||(Ee=!0,j());else{var le=t(y);le!==null&&mt(Ie,le.startTime-Q)}}var Ee=!1,A=-1,C=5,R=-1;function L(){return ee?!0:!(r.unstable_now()-R<C)}function O(){if(ee=!1,Ee){var Q=r.unstable_now();R=Q;var le=!0;try{e:{V=!1,$&&($=!1,he(A),A=-1),k=!0;var we=T;try{t:{for(ye(Q),_=t(g);_!==null&&!(_.expirationTime>Q&&L());){var Ve=_.callback;if(typeof Ve=="function"){_.callback=null,T=_.priorityLevel;var rt=Ve(_.expirationTime<=Q);if(Q=r.unstable_now(),typeof rt=="function"){_.callback=rt,ye(Q),le=!0;break t}_===t(g)&&i(g),ye(Q)}else i(g);_=t(g)}if(_!==null)le=!0;else{var M=t(y);M!==null&&mt(Ie,M.startTime-Q),le=!1}}break e}finally{_=null,T=we,k=!1}le=void 0}}finally{le?j():Ee=!1}}}var j;if(typeof me=="function")j=function(){me(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,nt=I.port2;I.port1.onmessage=O,j=function(){nt.postMessage(null)}}else j=function(){se(O,0)};function mt(Q,le){A=se(function(){Q(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var we=T;T=le;try{return Q()}finally{T=we}},r.unstable_requestPaint=function(){ee=!0},r.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var we=T;T=Q;try{return le()}finally{T=we}},r.unstable_scheduleCallback=function(Q,le,we){var Ve=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ve+we:Ve):we=Ve,Q){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=we+rt,Q={id:b++,callback:le,priorityLevel:Q,startTime:we,expirationTime:rt,sortIndex:-1},we>Ve?(Q.sortIndex=we,e(y,Q),t(g)===null&&Q===t(y)&&($?(he(A),A=-1):$=!0,mt(Ie,we-Ve))):(Q.sortIndex=rt,e(g,Q),V||k||(V=!0,Ee||(Ee=!0,j()))),Q},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(Q){var le=T;return function(){var we=T;T=le;try{return Q.apply(this,arguments)}finally{T=we}}}})(Qp)),Qp}var Lb;function f2(){return Lb||(Lb=1,Yp.exports=d2()),Yp.exports}var Kp={exports:{}},Dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function p2(){if(Vb)return Dn;Vb=1;var r=Wc();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:y,implementation:b}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Dn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,b)},Dn.flushSync=function(g){var y=u.T,b=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=y,i.p=b,i.d.f()}},Dn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Dn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Dn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,_=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:k}):b==="script"&&i.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Dn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Dn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,_=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Dn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Dn.requestFormReset=function(g){i.d.r(g)},Dn.unstable_batchedUpdates=function(g,y){return g(y)},Dn.useFormState=function(g,y,b){return u.H.useFormState(g,y,b)},Dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Dn.version="19.2.4",Dn}var Ub;function m2(){if(Ub)return Kp.exports;Ub=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kp.exports=p2(),Kp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function g2(){if(zb)return yc;zb=1;var r=f2(),e=Wc(),t=m2();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(i(188))}function y(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,c=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,S=f.child;S;){if(S===o){x=!0,o=f,c=m;break}if(S===c){x=!0,c=f,o=m;break}S=S.sibling}if(!x){for(S=m.child;S;){if(S===o){x=!0,o=m,c=f;break}if(S===c){x=!0,c=m,o=f;break}S=S.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function b(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=b(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),me=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function nt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case se:return"Profiler";case ee:return"StrictMode";case Ie:return"Suspense";case Ee:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case me:return n.displayName||"Context";case he:return(n._context.displayName||"Context")+".Consumer";case ye:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return s=n.displayName||null,s!==null?s:nt(n.type)||"Memo";case C:s=n._payload,n=n._init;try{return nt(n(s))}catch{}}return null}var mt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Ve=[],rt=-1;function M(n){return{current:n}}function X(n){0>rt||(n.current=Ve[rt],Ve[rt]=null,rt--)}function ce(n,s){rt++,Ve[rt]=n.current,n.current=s}var de=M(null),Ce=M(null),je=M(null),De=M(null);function Ot(n,s){switch(ce(je,s),ce(Ce,n),ce(de,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?tb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=tb(s),n=nb(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(de),ce(de,n)}function gt(){X(de),X(Ce),X(je)}function ei(n){n.memoizedState!==null&&ce(De,n);var s=de.current,o=nb(s,n.type);s!==o&&(ce(Ce,n),ce(de,o))}function Fn(n){Ce.current===n&&(X(de),X(Ce)),De.current===n&&(X(De),hc._currentValue=we)}var $n,gn;function ie(n){if($n===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);$n=s&&s[1]||"",gn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$n+n+gn}var fe=!1;function He(n,s){if(!n||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var H=Y}Reflect.construct(n,[],te)}else{try{te.call()}catch(Y){H=Y}n.call(te.prototype)}}else{try{throw Error()}catch(Y){H=Y}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],S=m[1];if(x&&S){var D=x.split(`
`),q=S.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===q.length)for(c=D.length-1,f=q.length-1;1<=c&&0<=f&&D[c]!==q[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==q[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==q[f]){var K=`
`+D[c].replace(" at new "," at ");return n.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",n.displayName)),K}while(1<=c&&0<=f);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ie(o):""}function yt(n,s){switch(n.tag){case 26:case 27:case 5:return ie(n.type);case 16:return ie("Lazy");case 13:return n.child!==s&&s!==null?ie("Suspense Fallback"):ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return He(n.type,!1);case 11:return He(n.type.render,!1);case 1:return He(n.type,!0);case 31:return ie("Activity");default:return""}}function zt(n){try{var s="",o=null;do s+=yt(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var st=Object.prototype.hasOwnProperty,Ne=r.unstable_scheduleCallback,Jt=r.unstable_cancelCallback,_i=r.unstable_shouldYield,pa=r.unstable_requestPaint,Tt=r.unstable_now,Un=r.unstable_getCurrentPriorityLevel,Ue=r.unstable_ImmediatePriority,dn=r.unstable_UserBlockingPriority,ti=r.unstable_NormalPriority,wi=r.unstable_LowPriority,Pr=r.unstable_IdlePriority,Ei=r.log,Ti=r.unstable_setDisableYieldValue,Wt=null,cn=null;function yn(n){if(typeof Ei=="function"&&Ti(n),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(Wt,n)}catch{}}var Rt=Math.clz32?Math.clz32:so,is=Math.log,Si=Math.LN2;function so(n){return n>>>=0,n===0?32:31-(is(n)/Si|0)|0}var Yn=256,Mr=262144,Fe=4194304;function ve(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function br(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=ve(c):(x&=S,x!==0?f=ve(x):o||(o=S&~n,o!==0&&(f=ve(o))))):(S=c&~m,S!==0?f=ve(S):x!==0?f=ve(x):o||(o=c&~n,o!==0&&(f=ve(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function Qn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function _l(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ma(){var n=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),n}function Kn(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Lr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function wl(n,s,o,c,f,m){var x=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,D=n.expirationTimes,q=n.hiddenUpdates;for(o=x&~o;0<o;){var K=31-Rt(o),te=1<<K;S[K]=0,D[K]=-1;var H=q[K];if(H!==null)for(q[K]=null,K=0;K<H.length;K++){var Y=H[K];Y!==null&&(Y.lane&=-536870913)}o&=~te}c!==0&&Ni(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(x&~s))}function Ni(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Rt(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function ni(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-Rt(o),f=1<<c;f&s|n[c]&s&&(n[c]|=s),o&=~f}}function ss(n,s){var o=s&-s;return o=(o&42)!==0?1:Ci(o),(o&(n.suspendedLanes|s))!==0?0:o}function Ci(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function xr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ga(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:Sb(n.type))}function Xn(n,s){var o=le.p;try{return le.p=n,s()}finally{le.p=o}}var Jn=Math.random().toString(36).slice(2),jt="__reactFiber$"+Jn,Zt="__reactProps$"+Jn,_r="__reactContainer$"+Jn,Ai="__reactEvents$"+Jn,El="__reactListeners$"+Jn,ao="__reactHandles$"+Jn,oo="__reactResources$"+Jn,vn="__reactMarker$"+Jn;function Vr(n){delete n[jt],delete n[Zt],delete n[Ai],delete n[El],delete n[ao]}function lr(n){var s=n[jt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[_r]||o[jt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=cb(n);n!==null;){if(o=n[jt])return o;n=cb(n)}return s}n=o,o=n.parentNode}return null}function Wn(n){if(n=n[jt]||n[_r]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Bt(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function bn(n){var s=n[oo];return s||(s=n[oo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function kt(n){n[vn]=!0}var Ri=new Set,Ur={};function cr(n,s){kn(n,s),kn(n+"Capture",s)}function kn(n,s){for(Ur[n]=s,n=0;n<s.length;n++)Ri.add(s[n])}var zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),as={},os={};function lo(n){return st.call(os,n)?!0:st.call(as,n)?!1:zr.test(n)?os[n]=!0:(as[n]=!0,!1)}function ls(n,s,o){if(lo(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function In(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Pt(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function E(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Z(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function z(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function J(n){if(!n._valueTracker){var s=Z(n)?"checked":"value";n._valueTracker=z(n,s,""+n[s])}}function ue(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=Z(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function qe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Mt=/[\n"\\]/g;function $t(n){return n.replace(Mt,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function co(n,s,o,c,f,m,x,S){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),s!=null?x==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+E(s)):n.value!==""+E(s)&&(n.value=""+E(s)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),s!=null?Tl(n,x,E(s)):o!=null?Tl(n,x,E(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+E(S):n.removeAttribute("name")}function du(n,s,o,c,f,m,x,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){J(n);return}o=o!=null?""+E(o):"",s=s!=null?""+E(s):o,S||s===n.value||(n.value=s),n.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),J(n)}function Tl(n,s,o){s==="number"&&qe(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function cs(n,s,o,c){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+E(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function fu(n,s,o){if(s!=null&&(s=""+E(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+E(o):""}function us(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(mt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=E(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),J(n)}function Zn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var pu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||pu.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Nl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&o[f]!==c&&Sl(n,f,c)}else for(var m in s)s.hasOwnProperty(m)&&Sl(n,m,s[m])}function uo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(n){return hs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Br(){}var Cl=null;function wr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ds=null,ri=null;function ya(n){var s=Wn(n);if(s&&(n=s.stateNode)){var o=n[Zt]||null;e:switch(n=s.stateNode,s.type){case"input":if(co(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+$t(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var f=c[Zt]||null;if(!f)throw Error(i(90));co(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&ue(c)}break e;case"textarea":fu(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&cs(n,!!o.multiple,s,!1)}}}var fo=!1;function fs(n,s,o){if(fo)return n(s,o);fo=!0;try{var c=n(s);return c}finally{if(fo=!1,(ds!==null||ri!==null)&&(lh(),ds&&(s=ds,n=ri,ri=ds=null,ya(s),n)))for(s=0;s<n.length;s++)ya(n[s])}}function Gr(n,s){var o=n.stateNode;if(o===null)return null;var c=o[Zt]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),va=!1;if(Er)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){va=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{va=!1}var ii=null,Al=null,ba=null;function Rl(){if(ba)return ba;var n,s=Al,o=s.length,c,f="value"in ii?ii.value:ii.textContent,m=f.length;for(n=0;n<o&&s[n]===f[n];n++);var x=o-n;for(c=1;c<=x&&s[o-c]===f[m-c];c++);return ba=f.slice(n,1<c?1-c:void 0)}function xa(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ki(){return!0}function qr(){return!1}function xn(n){function s(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ki:qr,this.isPropagationStopped=qr,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),s}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},si=xn(Ii),ps=_({},Ii,{view:0,detail:0}),kl=xn(ps),ms,po,ai,mo=_({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ai&&(ai&&n.type==="mousemove"?(ms=n.screenX-ai.screenX,po=n.screenY-ai.screenY):po=ms=0,ai=n),ms)},movementY:function(n){return"movementY"in n?n.movementY:po}}),Il=xn(mo),_a=_({},mo,{dataTransfer:0}),gu=xn(_a),yu=_({},ps,{relatedTarget:0}),wa=xn(yu),Dl=_({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),vu=xn(Dl),go=_({},Ii,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bu=xn(go),xu=_({},Ii,{data:0}),oi=xn(xu),_u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Eu[n])?!!s[n]:!1}function gs(){return Tu}var zn=_({},ps,{key:function(n){if(n.key){var s=_u[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=xa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(n){return n.type==="keypress"?xa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Su=xn(zn),Nu=_({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Di=xn(Nu),d=_({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),v=xn(d),w=_({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=xn(w),B=_({},mo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=xn(B),oe=_({},Ii,{newState:0,oldState:0}),ze=xn(oe),Yt=[9,13,27,32],lt=Er&&"CompositionEvent"in window,It=null;Er&&"documentMode"in document&&(It=document.documentMode);var Tr=Er&&"TextEvent"in window&&!It,li=Er&&(!lt||It&&8<It&&11>=It),Hr=" ",Fr=!1;function Ea(n,s){switch(n){case"keyup":return Yt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vo=!1;function kT(n,s){switch(n){case"compositionend":return yo(s);case"keypress":return s.which!==32?null:(Fr=!0,Hr);case"textInput":return n=s.data,n===Hr&&Fr?null:n;default:return null}}function IT(n,s){if(vo)return n==="compositionend"||!lt&&Ea(n,s)?(n=Rl(),ba=Al=ii=null,vo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return li&&s.locale!=="ko"?null:s.data;default:return null}}var DT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!DT[n.type]:s==="textarea"}function f0(n,s,o,c){ds?ri?ri.push(c):ri=[c]:ds=c,s=mh(s,"onChange"),0<s.length&&(o=new si("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var Ol=null,jl=null;function OT(n){Kv(n,0)}function Cu(n){var s=Bt(n);if(ue(s))return n}function p0(n,s){if(n==="change")return s}var m0=!1;if(Er){var Xd;if(Er){var Jd="oninput"in document;if(!Jd){var g0=document.createElement("div");g0.setAttribute("oninput","return;"),Jd=typeof g0.oninput=="function"}Xd=Jd}else Xd=!1;m0=Xd&&(!document.documentMode||9<document.documentMode)}function y0(){Ol&&(Ol.detachEvent("onpropertychange",v0),jl=Ol=null)}function v0(n){if(n.propertyName==="value"&&Cu(jl)){var s=[];f0(s,jl,n,wr(n)),fs(OT,s)}}function jT(n,s,o){n==="focusin"?(y0(),Ol=s,jl=o,Ol.attachEvent("onpropertychange",v0)):n==="focusout"&&y0()}function PT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cu(jl)}function MT(n,s){if(n==="click")return Cu(s)}function LT(n,s){if(n==="input"||n==="change")return Cu(s)}function VT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ur=typeof Object.is=="function"?Object.is:VT;function Pl(n,s){if(ur(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!st.call(s,f)||!ur(n[f],s[f]))return!1}return!0}function b0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function x0(n,s){var o=b0(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=b0(o)}}function _0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?_0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function w0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=qe(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=qe(n.document)}return s}function Wd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var UT=Er&&"documentMode"in document&&11>=document.documentMode,bo=null,Zd=null,Ml=null,ef=!1;function E0(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ef||bo==null||bo!==qe(c)||(c=bo,"selectionStart"in c&&Wd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ml&&Pl(Ml,c)||(Ml=c,c=mh(Zd,"onSelect"),0<c.length&&(s=new si("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=bo)))}function Ta(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var xo={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},tf={},T0={};Er&&(T0=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Sa(n){if(tf[n])return tf[n];if(!xo[n])return n;var s=xo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in T0)return tf[n]=s[o];return n}var S0=Sa("animationend"),N0=Sa("animationiteration"),C0=Sa("animationstart"),zT=Sa("transitionrun"),BT=Sa("transitionstart"),GT=Sa("transitioncancel"),A0=Sa("transitionend"),R0=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nf.push("scrollEnd");function $r(n,s){R0.set(n,s),cr(s,[n])}var Au=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Sr=[],_o=0,rf=0;function Ru(){for(var n=_o,s=rf=_o=0;s<n;){var o=Sr[s];Sr[s++]=null;var c=Sr[s];Sr[s++]=null;var f=Sr[s];Sr[s++]=null;var m=Sr[s];if(Sr[s++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&k0(o,f,m)}}function ku(n,s,o,c){Sr[_o++]=n,Sr[_o++]=s,Sr[_o++]=o,Sr[_o++]=c,rf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function sf(n,s,o,c){return ku(n,s,o,c),Iu(n)}function Na(n,s){return ku(n,null,null,s),Iu(n)}function k0(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-Rt(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[s]:c.push(s),s.lane=o|536870912),m):null}function Iu(n){if(50<ic)throw ic=0,pp=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var wo={};function qT(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(n,s,o,c){return new qT(n,s,o,c)}function af(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Oi(n,s){var o=n.alternate;return o===null?(o=hr(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function I0(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Du(n,s,o,c,f,m){var x=0;if(c=n,typeof n=="function")af(n)&&(x=1);else if(typeof n=="string")x=QS(n,o,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=hr(31,o,s,f),n.elementType=R,n.lanes=m,n;case $:return Ca(o.children,f,m,s);case ee:x=8,f|=24;break;case se:return n=hr(12,o,s,f|2),n.elementType=se,n.lanes=m,n;case Ie:return n=hr(13,o,s,f),n.elementType=Ie,n.lanes=m,n;case Ee:return n=hr(19,o,s,f),n.elementType=Ee,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case me:x=10;break e;case he:x=9;break e;case ye:x=11;break e;case A:x=14;break e;case C:x=16,c=null;break e}x=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=hr(x,o,s,f),s.elementType=n,s.type=c,s.lanes=m,s}function Ca(n,s,o,c){return n=hr(7,n,c,s),n.lanes=o,n}function of(n,s,o){return n=hr(6,n,null,s),n.lanes=o,n}function D0(n){var s=hr(18,null,null,0);return s.stateNode=n,s}function lf(n,s,o){return s=hr(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var O0=new WeakMap;function Nr(n,s){if(typeof n=="object"&&n!==null){var o=O0.get(n);return o!==void 0?o:(s={value:n,source:s,stack:zt(s)},O0.set(n,s),s)}return{value:n,source:s,stack:zt(s)}}var Eo=[],To=0,Ou=null,Ll=0,Cr=[],Ar=0,ys=null,ci=1,ui="";function ji(n,s){Eo[To++]=Ll,Eo[To++]=Ou,Ou=n,Ll=s}function j0(n,s,o){Cr[Ar++]=ci,Cr[Ar++]=ui,Cr[Ar++]=ys,ys=n;var c=ci;n=ui;var f=32-Rt(c)-1;c&=~(1<<f),o+=1;var m=32-Rt(s)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,ci=1<<32-Rt(s)+f|o<<f|c,ui=m+n}else ci=1<<m|o<<f|c,ui=n}function cf(n){n.return!==null&&(ji(n,1),j0(n,1,0))}function uf(n){for(;n===Ou;)Ou=Eo[--To],Eo[To]=null,Ll=Eo[--To],Eo[To]=null;for(;n===ys;)ys=Cr[--Ar],Cr[Ar]=null,ui=Cr[--Ar],Cr[Ar]=null,ci=Cr[--Ar],Cr[Ar]=null}function P0(n,s){Cr[Ar++]=ci,Cr[Ar++]=ui,Cr[Ar++]=ys,ci=s.id,ui=s.overflow,ys=n}var _n=null,Nt=null,et=!1,vs=null,Rr=!1,hf=Error(i(519));function bs(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vl(Nr(s,n)),hf}function M0(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[jt]=n,s[Zt]=c,o){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(o=0;o<ac.length;o++)Ye(ac[o],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),du(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),us(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||Zv(s.textContent,o)?(c.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),c.onScroll!=null&&Ye("scroll",s),c.onScrollEnd!=null&&Ye("scrollend",s),c.onClick!=null&&(s.onclick=Br),s=!0):s=!1,s||bs(n,!0)}function L0(n){for(_n=n.return;_n;)switch(_n.tag){case 5:case 31:case 13:Rr=!1;return;case 27:case 3:Rr=!0;return;default:_n=_n.return}}function So(n){if(n!==_n)return!1;if(!et)return L0(n),et=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Rp(n.type,n.memoizedProps)),o=!o),o&&Nt&&bs(n),L0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Nt=lb(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Nt=lb(n)}else s===27?(s=Nt,Os(n.type)?(n=jp,jp=null,Nt=n):Nt=s):Nt=_n?Ir(n.stateNode.nextSibling):null;return!0}function Aa(){Nt=_n=null,et=!1}function df(){var n=vs;return n!==null&&(rr===null?rr=n:rr.push.apply(rr,n),vs=null),n}function Vl(n){vs===null?vs=[n]:vs.push(n)}var ff=M(null),Ra=null,Pi=null;function xs(n,s,o){ce(ff,s._currentValue),s._currentValue=o}function Mi(n){n._currentValue=ff.current,X(ff)}function pf(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function mf(n,s,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var D=0;D<s.length;D++)if(S.context===s[D]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),pf(m.return,o,n),c||(x=null);break e}m=S.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),pf(x,o,n),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===n){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function No(n,s,o,c){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var S=f.type;ur(f.pendingProps.value,x.value)||(n!==null?n.push(S):n=[S])}}else if(f===De.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(hc):n=[hc])}f=f.return}n!==null&&mf(s,n,o,c),s.flags|=262144}function ju(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ka(n){Ra=n,Pi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function wn(n){return V0(Ra,n)}function Pu(n,s){return Ra===null&&ka(n),V0(n,s)}function V0(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Pi===null){if(n===null)throw Error(i(308));Pi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Pi=Pi.next=s;return o}var HT=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},FT=r.unstable_scheduleCallback,$T=r.unstable_NormalPriority,en={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new HT,data:new Map,refCount:0}}function Ul(n){n.refCount--,n.refCount===0&&FT($T,function(){n.controller.abort()})}var zl=null,yf=0,Co=0,Ao=null;function YT(n,s){if(zl===null){var o=zl=[];yf=0,Co=xp(),Ao={status:"pending",value:void 0,then:function(c){o.push(c)}}}return yf++,s.then(U0,U0),s}function U0(){if(--yf===0&&zl!==null){Ao!==null&&(Ao.status="fulfilled");var n=zl;zl=null,Co=0,Ao=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function QT(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var z0=Q.S;Q.S=function(n,s){Ev=Tt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&YT(n,s),z0!==null&&z0(n,s)};var Ia=M(null);function vf(){var n=Ia.current;return n!==null?n:Et.pooledCache}function Mu(n,s){s===null?ce(Ia,Ia.current):ce(Ia,s.pool)}function B0(){var n=vf();return n===null?null:{parent:en._currentValue,pool:n}}var Ro=Error(i(460)),bf=Error(i(474)),Lu=Error(i(542)),Vu={then:function(){}};function G0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function q0(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Br,Br),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,F0(n),n;default:if(typeof s.status=="string")s.then(Br,Br);else{if(n=Et,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,F0(n),n}throw Oa=s,Ro}}function Da(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Oa=o,Ro):o}}var Oa=null;function H0(){if(Oa===null)throw Error(i(459));var n=Oa;return Oa=null,n}function F0(n){if(n===Ro||n===Lu)throw Error(i(483))}var ko=null,Bl=0;function Uu(n){var s=Bl;return Bl+=1,ko===null&&(ko=[]),q0(ko,n,s)}function Gl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function zu(n,s){throw s.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function $0(n){function s(U,P){if(n){var G=U.deletions;G===null?(U.deletions=[P],U.flags|=16):G.push(P)}}function o(U,P){if(!n)return null;for(;P!==null;)s(U,P),P=P.sibling;return null}function c(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function f(U,P){return U=Oi(U,P),U.index=0,U.sibling=null,U}function m(U,P,G){return U.index=G,n?(G=U.alternate,G!==null?(G=G.index,G<P?(U.flags|=67108866,P):G):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function x(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function S(U,P,G,W){return P===null||P.tag!==6?(P=of(G,U.mode,W),P.return=U,P):(P=f(P,G),P.return=U,P)}function D(U,P,G,W){var Te=G.type;return Te===$?K(U,P,G.props.children,W,G.key):P!==null&&(P.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===C&&Da(Te)===P.type)?(P=f(P,G.props),Gl(P,G),P.return=U,P):(P=Du(G.type,G.key,G.props,null,U.mode,W),Gl(P,G),P.return=U,P)}function q(U,P,G,W){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=lf(G,U.mode,W),P.return=U,P):(P=f(P,G.children||[]),P.return=U,P)}function K(U,P,G,W,Te){return P===null||P.tag!==7?(P=Ca(G,U.mode,W,Te),P.return=U,P):(P=f(P,G),P.return=U,P)}function te(U,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=of(""+P,U.mode,G),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case k:return G=Du(P.type,P.key,P.props,null,U.mode,G),Gl(G,P),G.return=U,G;case V:return P=lf(P,U.mode,G),P.return=U,P;case C:return P=Da(P),te(U,P,G)}if(mt(P)||j(P))return P=Ca(P,U.mode,G,null),P.return=U,P;if(typeof P.then=="function")return te(U,Uu(P),G);if(P.$$typeof===me)return te(U,Pu(U,P),G);zu(U,P)}return null}function H(U,P,G,W){var Te=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Te!==null?null:S(U,P,""+G,W);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case k:return G.key===Te?D(U,P,G,W):null;case V:return G.key===Te?q(U,P,G,W):null;case C:return G=Da(G),H(U,P,G,W)}if(mt(G)||j(G))return Te!==null?null:K(U,P,G,W,null);if(typeof G.then=="function")return H(U,P,Uu(G),W);if(G.$$typeof===me)return H(U,P,Pu(U,G),W);zu(U,G)}return null}function Y(U,P,G,W,Te){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return U=U.get(G)||null,S(P,U,""+W,Te);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case k:return U=U.get(W.key===null?G:W.key)||null,D(P,U,W,Te);case V:return U=U.get(W.key===null?G:W.key)||null,q(P,U,W,Te);case C:return W=Da(W),Y(U,P,G,W,Te)}if(mt(W)||j(W))return U=U.get(G)||null,K(P,U,W,Te,null);if(typeof W.then=="function")return Y(U,P,G,Uu(W),Te);if(W.$$typeof===me)return Y(U,P,G,Pu(P,W),Te);zu(P,W)}return null}function be(U,P,G,W){for(var Te=null,at=null,_e=P,Ge=P=0,Xe=null;_e!==null&&Ge<G.length;Ge++){_e.index>Ge?(Xe=_e,_e=null):Xe=_e.sibling;var ot=H(U,_e,G[Ge],W);if(ot===null){_e===null&&(_e=Xe);break}n&&_e&&ot.alternate===null&&s(U,_e),P=m(ot,P,Ge),at===null?Te=ot:at.sibling=ot,at=ot,_e=Xe}if(Ge===G.length)return o(U,_e),et&&ji(U,Ge),Te;if(_e===null){for(;Ge<G.length;Ge++)_e=te(U,G[Ge],W),_e!==null&&(P=m(_e,P,Ge),at===null?Te=_e:at.sibling=_e,at=_e);return et&&ji(U,Ge),Te}for(_e=c(_e);Ge<G.length;Ge++)Xe=Y(_e,U,Ge,G[Ge],W),Xe!==null&&(n&&Xe.alternate!==null&&_e.delete(Xe.key===null?Ge:Xe.key),P=m(Xe,P,Ge),at===null?Te=Xe:at.sibling=Xe,at=Xe);return n&&_e.forEach(function(Vs){return s(U,Vs)}),et&&ji(U,Ge),Te}function Ae(U,P,G,W){if(G==null)throw Error(i(151));for(var Te=null,at=null,_e=P,Ge=P=0,Xe=null,ot=G.next();_e!==null&&!ot.done;Ge++,ot=G.next()){_e.index>Ge?(Xe=_e,_e=null):Xe=_e.sibling;var Vs=H(U,_e,ot.value,W);if(Vs===null){_e===null&&(_e=Xe);break}n&&_e&&Vs.alternate===null&&s(U,_e),P=m(Vs,P,Ge),at===null?Te=Vs:at.sibling=Vs,at=Vs,_e=Xe}if(ot.done)return o(U,_e),et&&ji(U,Ge),Te;if(_e===null){for(;!ot.done;Ge++,ot=G.next())ot=te(U,ot.value,W),ot!==null&&(P=m(ot,P,Ge),at===null?Te=ot:at.sibling=ot,at=ot);return et&&ji(U,Ge),Te}for(_e=c(_e);!ot.done;Ge++,ot=G.next())ot=Y(_e,U,Ge,ot.value,W),ot!==null&&(n&&ot.alternate!==null&&_e.delete(ot.key===null?Ge:ot.key),P=m(ot,P,Ge),at===null?Te=ot:at.sibling=ot,at=ot);return n&&_e.forEach(function(s2){return s(U,s2)}),et&&ji(U,Ge),Te}function _t(U,P,G,W){if(typeof G=="object"&&G!==null&&G.type===$&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case k:e:{for(var Te=G.key;P!==null;){if(P.key===Te){if(Te=G.type,Te===$){if(P.tag===7){o(U,P.sibling),W=f(P,G.props.children),W.return=U,U=W;break e}}else if(P.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===C&&Da(Te)===P.type){o(U,P.sibling),W=f(P,G.props),Gl(W,G),W.return=U,U=W;break e}o(U,P);break}else s(U,P);P=P.sibling}G.type===$?(W=Ca(G.props.children,U.mode,W,G.key),W.return=U,U=W):(W=Du(G.type,G.key,G.props,null,U.mode,W),Gl(W,G),W.return=U,U=W)}return x(U);case V:e:{for(Te=G.key;P!==null;){if(P.key===Te)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){o(U,P.sibling),W=f(P,G.children||[]),W.return=U,U=W;break e}else{o(U,P);break}else s(U,P);P=P.sibling}W=lf(G,U.mode,W),W.return=U,U=W}return x(U);case C:return G=Da(G),_t(U,P,G,W)}if(mt(G))return be(U,P,G,W);if(j(G)){if(Te=j(G),typeof Te!="function")throw Error(i(150));return G=Te.call(G),Ae(U,P,G,W)}if(typeof G.then=="function")return _t(U,P,Uu(G),W);if(G.$$typeof===me)return _t(U,P,Pu(U,G),W);zu(U,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(o(U,P.sibling),W=f(P,G),W.return=U,U=W):(o(U,P),W=of(G,U.mode,W),W.return=U,U=W),x(U)):o(U,P)}return function(U,P,G,W){try{Bl=0;var Te=_t(U,P,G,W);return ko=null,Te}catch(_e){if(_e===Ro||_e===Lu)throw _e;var at=hr(29,_e,null,U.mode);return at.lanes=W,at.return=U,at}finally{}}}var ja=$0(!0),Y0=$0(!1),_s=!1;function xf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _f(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ws(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Es(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=Iu(n),k0(n,null,o),s}return ku(n,c,s,o),Iu(n)}function ql(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,ni(n,o)}}function wf(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Ef=!1;function Hl(){if(Ef){var n=Ao;if(n!==null)throw n}}function Fl(n,s,o,c){Ef=!1;var f=n.updateQueue;_s=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var D=S,q=D.next;D.next=null,x===null?m=q:x.next=q,x=D;var K=n.alternate;K!==null&&(K=K.updateQueue,S=K.lastBaseUpdate,S!==x&&(S===null?K.firstBaseUpdate=q:S.next=q,K.lastBaseUpdate=D))}if(m!==null){var te=f.baseState;x=0,K=q=D=null,S=m;do{var H=S.lane&-536870913,Y=H!==S.lane;if(Y?(Ke&H)===H:(c&H)===H){H!==0&&H===Co&&(Ef=!0),K!==null&&(K=K.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var be=n,Ae=S;H=s;var _t=o;switch(Ae.tag){case 1:if(be=Ae.payload,typeof be=="function"){te=be.call(_t,te,H);break e}te=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ae.payload,H=typeof be=="function"?be.call(_t,te,H):be,H==null)break e;te=_({},te,H);break e;case 2:_s=!0}}H=S.callback,H!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},K===null?(q=K=Y,D=te):K=K.next=Y,x|=H;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);K===null&&(D=te),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=K,m===null&&(f.shared.lanes=0),As|=x,n.lanes=x,n.memoizedState=te}}function Q0(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function K0(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Q0(o[n],s)}var Io=M(null),Bu=M(0);function X0(n,s){n=Fi,ce(Bu,n),ce(Io,s),Fi=n|s.baseLanes}function Tf(){ce(Bu,Fi),ce(Io,Io.current)}function Sf(){Fi=Bu.current,X(Io),X(Bu)}var dr=M(null),kr=null;function Ts(n){var s=n.alternate;ce(Qt,Qt.current&1),ce(dr,n),kr===null&&(s===null||Io.current!==null||s.memoizedState!==null)&&(kr=n)}function Nf(n){ce(Qt,Qt.current),ce(dr,n),kr===null&&(kr=n)}function J0(n){n.tag===22?(ce(Qt,Qt.current),ce(dr,n),kr===null&&(kr=n)):Ss()}function Ss(){ce(Qt,Qt.current),ce(dr,dr.current)}function fr(n){X(dr),kr===n&&(kr=null),X(Qt)}var Qt=M(0);function Gu(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Dp(o)||Op(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Li=0,Be=null,bt=null,tn=null,qu=!1,Do=!1,Pa=!1,Hu=0,$l=0,Oo=null,KT=0;function Gt(){throw Error(i(321))}function Cf(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!ur(n[o],s[o]))return!1;return!0}function Af(n,s,o,c,f,m){return Li=m,Be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?jy:qf,Pa=!1,m=o(c,f),Pa=!1,Do&&(m=Z0(s,o,c,f)),W0(n),m}function W0(n){Q.H=Kl;var s=bt!==null&&bt.next!==null;if(Li=0,tn=bt=Be=null,qu=!1,$l=0,Oo=null,s)throw Error(i(300));n===null||nn||(n=n.dependencies,n!==null&&ju(n)&&(nn=!0))}function Z0(n,s,o,c){Be=n;var f=0;do{if(Do&&(Oo=null),$l=0,Do=!1,25<=f)throw Error(i(301));if(f+=1,tn=bt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=Py,m=s(o,c)}while(Do);return m}function XT(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?Yl(s):s,n=n.useState()[0],(bt!==null?bt.memoizedState:null)!==n&&(Be.flags|=1024),s}function Rf(){var n=Hu!==0;return Hu=0,n}function kf(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function If(n){if(qu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}qu=!1}Li=0,tn=bt=Be=null,Do=!1,$l=Hu=0,Oo=null}function Bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Be.memoizedState=tn=n:tn=tn.next=n,tn}function Kt(){if(bt===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var s=tn===null?Be.memoizedState:tn.next;if(s!==null)tn=s,bt=n;else{if(n===null)throw Be.alternate===null?Error(i(467)):Error(i(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},tn===null?Be.memoizedState=tn=n:tn=tn.next=n}return tn}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(n){var s=$l;return $l+=1,Oo===null&&(Oo=[]),n=q0(Oo,n,s),s=Be,(tn===null?s.memoizedState:tn.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?jy:qf),n}function $u(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yl(n);if(n.$$typeof===me)return wn(n)}throw Error(i(438,String(n)))}function Df(n){var s=null,o=Be.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Fu(),Be.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=L;return s.index++,o}function Vi(n,s){return typeof s=="function"?s(n):s}function Yu(n){var s=Kt();return Of(s,bt,n)}function Of(n,s,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}s.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var S=x=null,D=null,q=s,K=!1;do{var te=q.lane&-536870913;if(te!==q.lane?(Ke&te)===te:(Li&te)===te){var H=q.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),te===Co&&(K=!0);else if((Li&H)===H){q=q.next,H===Co&&(K=!0);continue}else te={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(S=D=te,x=m):D=D.next=te,Be.lanes|=H,As|=H;te=q.action,Pa&&o(m,te),m=q.hasEagerState?q.eagerState:o(m,te)}else H={lane:te,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(S=D=H,x=m):D=D.next=H,Be.lanes|=te,As|=te;q=q.next}while(q!==null&&q!==s);if(D===null?x=m:D.next=S,!ur(m,n.memoizedState)&&(nn=!0,K&&(o=Ao,o!==null)))throw o;n.memoizedState=m,n.baseState=x,n.baseQueue=D,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function jf(n){var s=Kt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=n(m,x.action),x=x.next;while(x!==f);ur(m,s.memoizedState)||(nn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,c]}function ey(n,s,o){var c=Be,f=Kt(),m=et;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var x=!ur((bt||f).memoizedState,o);if(x&&(f.memoizedState=o,nn=!0),f=f.queue,Lf(ry.bind(null,c,f,n),[n]),f.getSnapshot!==s||x||tn!==null&&tn.memoizedState.tag&1){if(c.flags|=2048,jo(9,{destroy:void 0},ny.bind(null,c,f,o,s),null),Et===null)throw Error(i(349));m||(Li&127)!==0||ty(c,s,o)}return o}function ty(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Be.updateQueue,s===null?(s=Fu(),Be.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function ny(n,s,o,c){s.value=o,s.getSnapshot=c,iy(s)&&sy(n)}function ry(n,s,o){return o(function(){iy(s)&&sy(n)})}function iy(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!ur(n,o)}catch{return!0}}function sy(n){var s=Na(n,2);s!==null&&ir(s,n,2)}function Pf(n){var s=Bn();if(typeof n=="function"){var o=n;if(n=o(),Pa){yn(!0);try{o()}finally{yn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:n},s}function ay(n,s,o,c){return n.baseState=o,Of(n,bt,typeof c=="function"?c:Vi)}function JT(n,s,o,c,f){if(Xu(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Q.T!==null?o(!0):m.isTransition=!1,c(m),o=s.pending,o===null?(m.next=s.pending=m,oy(s,m)):(m.next=o.next,s.pending=o.next=m)}}function oy(n,s){var o=s.action,c=s.payload,f=n.state;if(s.isTransition){var m=Q.T,x={};Q.T=x;try{var S=o(f,c),D=Q.S;D!==null&&D(x,S),ly(n,s,S)}catch(q){Mf(n,s,q)}finally{m!==null&&x.types!==null&&(m.types=x.types),Q.T=m}}else try{m=o(f,c),ly(n,s,m)}catch(q){Mf(n,s,q)}}function ly(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){cy(n,s,c)},function(c){return Mf(n,s,c)}):cy(n,s,o)}function cy(n,s,o){s.status="fulfilled",s.value=o,uy(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,oy(n,o)))}function Mf(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,uy(s),s=s.next;while(s!==c)}n.action=null}function uy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function hy(n,s){return s}function dy(n,s){if(et){var o=Et.formState;if(o!==null){e:{var c=Be;if(et){if(Nt){t:{for(var f=Nt,m=Rr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ir(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Nt=Ir(f.nextSibling),c=f.data==="F!";break e}}bs(c)}c=!1}c&&(s=o[0])}}return o=Bn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hy,lastRenderedState:s},o.queue=c,o=Iy.bind(null,Be,c),c.dispatch=o,c=Pf(!1),m=Gf.bind(null,Be,!1,c.queue),c=Bn(),f={state:s,dispatch:null,action:n,pending:null},c.queue=f,o=JT.bind(null,Be,f,m,o),f.dispatch=o,c.memoizedState=n,[s,o,!1]}function fy(n){var s=Kt();return py(s,bt,n)}function py(n,s,o){if(s=Of(n,s,hy)[0],n=Yu(Vi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Yl(s)}catch(x){throw x===Ro?Lu:x}else c=s;s=Kt();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Be.flags|=2048,jo(9,{destroy:void 0},WT.bind(null,f,o),null)),[c,m,n]}function WT(n,s){n.action=s}function my(n){var s=Kt(),o=bt;if(o!==null)return py(s,o,n);Kt(),s=s.memoizedState,o=Kt();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function jo(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=Be.updateQueue,s===null&&(s=Fu(),Be.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function gy(){return Kt().memoizedState}function Qu(n,s,o,c){var f=Bn();Be.flags|=n,f.memoizedState=jo(1|s,{destroy:void 0},o,c===void 0?null:c)}function Ku(n,s,o,c){var f=Kt();c=c===void 0?null:c;var m=f.memoizedState.inst;bt!==null&&c!==null&&Cf(c,bt.memoizedState.deps)?f.memoizedState=jo(s,m,o,c):(Be.flags|=n,f.memoizedState=jo(1|s,m,o,c))}function yy(n,s){Qu(8390656,8,n,s)}function Lf(n,s){Ku(2048,8,n,s)}function ZT(n){Be.flags|=4;var s=Be.updateQueue;if(s===null)s=Fu(),Be.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function vy(n){var s=Kt().memoizedState;return ZT({ref:s,nextImpl:n}),function(){if((ct&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function by(n,s){return Ku(4,2,n,s)}function xy(n,s){return Ku(4,4,n,s)}function _y(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function wy(n,s,o){o=o!=null?o.concat([n]):null,Ku(4,4,_y.bind(null,s,n),o)}function Vf(){}function Ey(n,s){var o=Kt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Cf(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function Ty(n,s){var o=Kt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Cf(s,c[1]))return c[0];if(c=n(),Pa){yn(!0);try{n()}finally{yn(!1)}}return o.memoizedState=[c,s],c}function Uf(n,s,o){return o===void 0||(Li&1073741824)!==0&&(Ke&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=Sv(),Be.lanes|=n,As|=n,o)}function Sy(n,s,o,c){return ur(o,s)?o:Io.current!==null?(n=Uf(n,o,c),ur(n,s)||(nn=!0),n):(Li&42)===0||(Li&1073741824)!==0&&(Ke&261930)===0?(nn=!0,n.memoizedState=o):(n=Sv(),Be.lanes|=n,As|=n,s)}function Ny(n,s,o,c,f){var m=le.p;le.p=m!==0&&8>m?m:8;var x=Q.T,S={};Q.T=S,Gf(n,!1,s,o);try{var D=f(),q=Q.S;if(q!==null&&q(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=QT(D,c);Ql(n,s,K,gr(n))}else Ql(n,s,c,gr(n))}catch(te){Ql(n,s,{then:function(){},status:"rejected",reason:te},gr())}finally{le.p=m,x!==null&&S.types!==null&&(x.types=S.types),Q.T=x}}function eS(){}function zf(n,s,o,c){if(n.tag!==5)throw Error(i(476));var f=Cy(n).queue;Ny(n,f,s,we,o===null?eS:function(){return Ay(n),o(c)})}function Cy(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:we},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Ay(n){var s=Cy(n);s.next===null&&(s=n.alternate.memoizedState),Ql(n,s.next.queue,{},gr())}function Bf(){return wn(hc)}function Ry(){return Kt().memoizedState}function ky(){return Kt().memoizedState}function tS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=gr();n=ws(o);var c=Es(s,n,o);c!==null&&(ir(c,s,o),ql(c,s,o)),s={cache:gf()},n.payload=s;return}s=s.return}}function nS(n,s,o){var c=gr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xu(n)?Dy(s,o):(o=sf(n,s,o,c),o!==null&&(ir(o,n,c),Oy(o,s,c)))}function Iy(n,s,o){var c=gr();Ql(n,s,o,c)}function Ql(n,s,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xu(n))Dy(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var x=s.lastRenderedState,S=m(x,o);if(f.hasEagerState=!0,f.eagerState=S,ur(S,x))return ku(n,s,f,0),Et===null&&Ru(),!1}catch{}finally{}if(o=sf(n,s,f,c),o!==null)return ir(o,n,c),Oy(o,s,c),!0}return!1}function Gf(n,s,o,c){if(c={lane:2,revertLane:xp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xu(n)){if(s)throw Error(i(479))}else s=sf(n,o,c,2),s!==null&&ir(s,n,2)}function Xu(n){var s=n.alternate;return n===Be||s!==null&&s===Be}function Dy(n,s){Do=qu=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Oy(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,ni(n,o)}}var Kl={readContext:wn,use:$u,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};Kl.useEffectEvent=Gt;var jy={readContext:wn,use:$u,useCallback:function(n,s){return Bn().memoizedState=[n,s===void 0?null:s],n},useContext:wn,useEffect:yy,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Qu(4194308,4,_y.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Qu(4194308,4,n,s)},useInsertionEffect:function(n,s){Qu(4,2,n,s)},useMemo:function(n,s){var o=Bn();s=s===void 0?null:s;var c=n();if(Pa){yn(!0);try{n()}finally{yn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=Bn();if(o!==void 0){var f=o(s);if(Pa){yn(!0);try{o(s)}finally{yn(!1)}}}else f=s;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=nS.bind(null,Be,n),[c.memoizedState,n]},useRef:function(n){var s=Bn();return n={current:n},s.memoizedState=n},useState:function(n){n=Pf(n);var s=n.queue,o=Iy.bind(null,Be,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Vf,useDeferredValue:function(n,s){var o=Bn();return Uf(o,n,s)},useTransition:function(){var n=Pf(!1);return n=Ny.bind(null,Be,n.queue,!0,!1),Bn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=Be,f=Bn();if(et){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Et===null)throw Error(i(349));(Ke&127)!==0||ty(c,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,yy(ry.bind(null,c,m,n),[n]),c.flags|=2048,jo(9,{destroy:void 0},ny.bind(null,c,m,o,s),null),o},useId:function(){var n=Bn(),s=Et.identifierPrefix;if(et){var o=ui,c=ci;o=(c&~(1<<32-Rt(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Hu++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=KT++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Bf,useFormState:dy,useActionState:dy,useOptimistic:function(n){var s=Bn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Gf.bind(null,Be,!0,o),o.dispatch=s,[n,s]},useMemoCache:Df,useCacheRefresh:function(){return Bn().memoizedState=tS.bind(null,Be)},useEffectEvent:function(n){var s=Bn(),o={impl:n};return s.memoizedState=o,function(){if((ct&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},qf={readContext:wn,use:$u,useCallback:Ey,useContext:wn,useEffect:Lf,useImperativeHandle:wy,useInsertionEffect:by,useLayoutEffect:xy,useMemo:Ty,useReducer:Yu,useRef:gy,useState:function(){return Yu(Vi)},useDebugValue:Vf,useDeferredValue:function(n,s){var o=Kt();return Sy(o,bt.memoizedState,n,s)},useTransition:function(){var n=Yu(Vi)[0],s=Kt().memoizedState;return[typeof n=="boolean"?n:Yl(n),s]},useSyncExternalStore:ey,useId:Ry,useHostTransitionStatus:Bf,useFormState:fy,useActionState:fy,useOptimistic:function(n,s){var o=Kt();return ay(o,bt,n,s)},useMemoCache:Df,useCacheRefresh:ky};qf.useEffectEvent=vy;var Py={readContext:wn,use:$u,useCallback:Ey,useContext:wn,useEffect:Lf,useImperativeHandle:wy,useInsertionEffect:by,useLayoutEffect:xy,useMemo:Ty,useReducer:jf,useRef:gy,useState:function(){return jf(Vi)},useDebugValue:Vf,useDeferredValue:function(n,s){var o=Kt();return bt===null?Uf(o,n,s):Sy(o,bt.memoizedState,n,s)},useTransition:function(){var n=jf(Vi)[0],s=Kt().memoizedState;return[typeof n=="boolean"?n:Yl(n),s]},useSyncExternalStore:ey,useId:Ry,useHostTransitionStatus:Bf,useFormState:my,useActionState:my,useOptimistic:function(n,s){var o=Kt();return bt!==null?ay(o,bt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Df,useCacheRefresh:ky};Py.useEffectEvent=vy;function Hf(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:_({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Ff={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=gr(),f=ws(c);f.payload=s,o!=null&&(f.callback=o),s=Es(n,f,c),s!==null&&(ir(s,n,c),ql(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=gr(),f=ws(c);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Es(n,f,c),s!==null&&(ir(s,n,c),ql(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=gr(),c=ws(o);c.tag=2,s!=null&&(c.callback=s),s=Es(n,c,o),s!==null&&(ir(s,n,o),ql(s,n,o))}};function My(n,s,o,c,f,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):s.prototype&&s.prototype.isPureReactComponent?!Pl(o,c)||!Pl(f,m):!0}function Ly(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&Ff.enqueueReplaceState(s,s.state,null)}function Ma(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Vy(n){Au(n)}function Uy(n){console.error(n)}function zy(n){Au(n)}function Ju(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function By(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function $f(n,s,o){return o=ws(o),o.tag=3,o.payload={element:null},o.callback=function(){Ju(n,s)},o}function Gy(n){return n=ws(n),n.tag=3,n}function qy(n,s,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){By(s,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){By(s,o,c),typeof f!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function rS(n,s,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&No(s,o,f,!0),o=dr.current,o!==null){switch(o.tag){case 31:case 13:return kr===null?ch():o.alternate===null&&qt===0&&(qt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Vu?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),yp(n,c,f)),!1;case 22:return o.flags|=65536,c===Vu?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),yp(n,c,f)),!1}throw Error(i(435,o.tag))}return yp(n,c,f),ch(),!1}if(et)return s=dr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==hf&&(n=Error(i(422),{cause:c}),Vl(Nr(n,o)))):(c!==hf&&(s=Error(i(423),{cause:c}),Vl(Nr(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Nr(c,o),f=$f(n.stateNode,c,f),wf(n,f),qt!==4&&(qt=2)),!1;var m=Error(i(520),{cause:c});if(m=Nr(m,o),rc===null?rc=[m]:rc.push(m),qt!==4&&(qt=2),s===null)return!0;c=Nr(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=$f(o.stateNode,c,n),wf(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Rs===null||!Rs.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Gy(f),qy(f,n,o,c),wf(o,f),!1}o=o.return}while(o!==null);return!1}var Yf=Error(i(461)),nn=!1;function En(n,s,o,c){s.child=n===null?Y0(s,null,o,c):ja(s,n.child,o,c)}function Hy(n,s,o,c,f){o=o.render;var m=s.ref;if("ref"in c){var x={};for(var S in c)S!=="ref"&&(x[S]=c[S])}else x=c;return ka(s),c=Af(n,s,o,x,m,f),S=Rf(),n!==null&&!nn?(kf(n,s,f),Ui(n,s,f)):(et&&S&&cf(s),s.flags|=1,En(n,s,c,f),s.child)}function Fy(n,s,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!af(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,$y(n,s,m,c,f)):(n=Du(o.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!tp(n,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:Pl,o(x,c)&&n.ref===s.ref)return Ui(n,s,f)}return s.flags|=1,n=Oi(m,c),n.ref=s.ref,n.return=s,s.child=n}function $y(n,s,o,c,f){if(n!==null){var m=n.memoizedProps;if(Pl(m,c)&&n.ref===s.ref)if(nn=!1,s.pendingProps=c=m,tp(n,f))(n.flags&131072)!==0&&(nn=!0);else return s.lanes=n.lanes,Ui(n,s,f)}return Qf(n,s,o,c,f)}function Yy(n,s,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=s.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,s.child=null;return Qy(n,s,m,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mu(s,m!==null?m.cachePool:null),m!==null?X0(s,m):Tf(),J0(s);else return c=s.lanes=536870912,Qy(n,s,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Mu(s,m.cachePool),X0(s,m),Ss(),s.memoizedState=null):(n!==null&&Mu(s,null),Tf(),Ss());return En(n,s,f,o),s.child}function Xl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Qy(n,s,o,c,f){var m=vf();return m=m===null?null:{parent:en._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&Mu(s,null),Tf(),J0(s),n!==null&&No(n,s,c,!0),s.childLanes=f,null}function Wu(n,s){return s=eh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Ky(n,s,o){return ja(s,n.child,null,o),n=Wu(s,s.pendingProps),n.flags|=2,fr(s),s.memoizedState=null,n}function iS(n,s,o){var c=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(et){if(c.mode==="hidden")return n=Wu(s,c),s.lanes=536870912,Xl(null,n);if(Nf(s),(n=Nt)?(n=ob(n,Rr),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ys!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},o=D0(n),o.return=s,s.child=o,_n=s,Nt=null)):n=null,n===null)throw bs(s);return s.lanes=536870912,null}return Wu(s,c)}var m=n.memoizedState;if(m!==null){var x=m.dehydrated;if(Nf(s),f)if(s.flags&256)s.flags&=-257,s=Ky(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(nn||No(n,s,o,!1),f=(o&n.childLanes)!==0,nn||f){if(c=Et,c!==null&&(x=ss(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,Na(n,x),ir(c,n,x),Yf;ch(),s=Ky(n,s,o)}else n=m.treeContext,Nt=Ir(x.nextSibling),_n=s,et=!0,vs=null,Rr=!1,n!==null&&P0(s,n),s=Wu(s,c),s.flags|=4096;return s}return n=Oi(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Zu(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Qf(n,s,o,c,f){return ka(s),o=Af(n,s,o,c,void 0,f),c=Rf(),n!==null&&!nn?(kf(n,s,f),Ui(n,s,f)):(et&&c&&cf(s),s.flags|=1,En(n,s,o,f),s.child)}function Xy(n,s,o,c,f,m){return ka(s),s.updateQueue=null,o=Z0(s,c,o,f),W0(n),c=Rf(),n!==null&&!nn?(kf(n,s,m),Ui(n,s,m)):(et&&c&&cf(s),s.flags|=1,En(n,s,o,m),s.child)}function Jy(n,s,o,c,f){if(ka(s),s.stateNode===null){var m=wo,x=o.contextType;typeof x=="object"&&x!==null&&(m=wn(x)),m=new o(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Ff,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},xf(s),x=o.contextType,m.context=typeof x=="object"&&x!==null?wn(x):wo,m.state=s.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(Hf(s,o,x,c),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Ff.enqueueReplaceState(m,m.state,null),Fl(s,c,m,f),Hl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){m=s.stateNode;var S=s.memoizedProps,D=Ma(o,S);m.props=D;var q=m.context,K=o.contextType;x=wo,typeof K=="object"&&K!==null&&(x=wn(K));var te=o.getDerivedStateFromProps;K=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,K||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||q!==x)&&Ly(s,m,c,x),_s=!1;var H=s.memoizedState;m.state=H,Fl(s,c,m,f),Hl(),q=s.memoizedState,S||H!==q||_s?(typeof te=="function"&&(Hf(s,o,te,c),q=s.memoizedState),(D=_s||My(s,o,D,c,H,q,x))?(K||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=q),m.props=c,m.state=q,m.context=x,c=D):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,_f(n,s),x=s.memoizedProps,K=Ma(o,x),m.props=K,te=s.pendingProps,H=m.context,q=o.contextType,D=wo,typeof q=="object"&&q!==null&&(D=wn(q)),S=o.getDerivedStateFromProps,(q=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==te||H!==D)&&Ly(s,m,c,D),_s=!1,H=s.memoizedState,m.state=H,Fl(s,c,m,f),Hl();var Y=s.memoizedState;x!==te||H!==Y||_s||n!==null&&n.dependencies!==null&&ju(n.dependencies)?(typeof S=="function"&&(Hf(s,o,S,c),Y=s.memoizedState),(K=_s||My(s,o,K,c,H,Y,D)||n!==null&&n.dependencies!==null&&ju(n.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Y,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Y,D)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Y),m.props=c,m.state=Y,m.context=D,c=K):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),c=!1)}return m=c,Zu(n,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&c?(s.child=ja(s,n.child,null,f),s.child=ja(s,null,o,f)):En(n,s,o,f),s.memoizedState=m.state,n=s.child):n=Ui(n,s,f),n}function Wy(n,s,o,c){return Aa(),s.flags|=256,En(n,s,o,c),s.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(n){return{baseLanes:n,cachePool:B0()}}function Jf(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=mr),n}function Zy(n,s,o){var c=s.pendingProps,f=!1,m=(s.flags&128)!==0,x;if((x=m)||(x=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),x&&(f=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,n===null){if(et){if(f?Ts(s):Ss(),(n=Nt)?(n=ob(n,Rr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ys!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},o=D0(n),o.return=s,s.child=o,_n=s,Nt=null)):n=null,n===null)throw bs(s);return Op(n)?s.lanes=32:s.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Ss(),f=s.mode,S=eh({mode:"hidden",children:S},f),c=Ca(c,f,o,null),S.return=s,c.return=s,S.sibling=c,s.child=S,c=s.child,c.memoizedState=Xf(o),c.childLanes=Jf(n,x,o),s.memoizedState=Kf,Xl(null,c)):(Ts(s),Wf(s,S))}var D=n.memoizedState;if(D!==null&&(S=D.dehydrated,S!==null)){if(m)s.flags&256?(Ts(s),s.flags&=-257,s=Zf(n,s,o)):s.memoizedState!==null?(Ss(),s.child=n.child,s.flags|=128,s=null):(Ss(),S=c.fallback,f=s.mode,c=eh({mode:"visible",children:c.children},f),S=Ca(S,f,o,null),S.flags|=2,c.return=s,S.return=s,c.sibling=S,s.child=c,ja(s,n.child,null,o),c=s.child,c.memoizedState=Xf(o),c.childLanes=Jf(n,x,o),s.memoizedState=Kf,s=Xl(null,c));else if(Ts(s),Op(S)){if(x=S.nextSibling&&S.nextSibling.dataset,x)var q=x.dgst;x=q,c=Error(i(419)),c.stack="",c.digest=x,Vl({value:c,source:null,stack:null}),s=Zf(n,s,o)}else if(nn||No(n,s,o,!1),x=(o&n.childLanes)!==0,nn||x){if(x=Et,x!==null&&(c=ss(x,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,Na(n,c),ir(x,n,c),Yf;Dp(S)||ch(),s=Zf(n,s,o)}else Dp(S)?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,Nt=Ir(S.nextSibling),_n=s,et=!0,vs=null,Rr=!1,n!==null&&P0(s,n),s=Wf(s,c.children),s.flags|=4096);return s}return f?(Ss(),S=c.fallback,f=s.mode,D=n.child,q=D.sibling,c=Oi(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,q!==null?S=Oi(q,S):(S=Ca(S,f,o,null),S.flags|=2),S.return=s,c.return=s,c.sibling=S,s.child=c,Xl(null,c),c=s.child,S=n.child.memoizedState,S===null?S=Xf(o):(f=S.cachePool,f!==null?(D=en._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=B0(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=Jf(n,x,o),s.memoizedState=Kf,Xl(n.child,c)):(Ts(s),o=n.child,n=o.sibling,o=Oi(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(x=s.deletions,x===null?(s.deletions=[n],s.flags|=16):x.push(n)),s.child=o,s.memoizedState=null,o)}function Wf(n,s){return s=eh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function eh(n,s){return n=hr(22,n,null,s),n.lanes=0,n}function Zf(n,s,o){return ja(s,n.child,null,o),n=Wf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ev(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),pf(n.return,s,o)}function ep(n,s,o,c,f,m){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function tv(n,s,o){var c=s.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=Qt.current,S=(x&2)!==0;if(S?(x=x&1|2,s.flags|=128):x&=1,ce(Qt,x),En(n,s,c,o),c=et?Ll:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ev(n,o,s);else if(n.tag===19)ev(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Gu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),ep(s,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Gu(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}ep(s,!0,o,null,m,c);break;case"together":ep(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Ui(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),As|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(No(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=Oi(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Oi(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function tp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ju(n)))}function sS(n,s,o){switch(s.tag){case 3:Ot(s,s.stateNode.containerInfo),xs(s,en,n.memoizedState.cache),Aa();break;case 27:case 5:ei(s);break;case 4:Ot(s,s.stateNode.containerInfo);break;case 10:xs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Nf(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ts(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Zy(n,s,o):(Ts(s),n=Ui(n,s,o),n!==null?n.sibling:null);Ts(s);break;case 19:var f=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(No(n,s,o,!1),c=(o&s.childLanes)!==0),f){if(c)return tv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Qt,Qt.current),c)break;return null;case 22:return s.lanes=0,Yy(n,s,o,s.pendingProps);case 24:xs(s,en,n.memoizedState.cache)}return Ui(n,s,o)}function nv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)nn=!0;else{if(!tp(n,o)&&(s.flags&128)===0)return nn=!1,sS(n,s,o);nn=(n.flags&131072)!==0}else nn=!1,et&&(s.flags&1048576)!==0&&j0(s,Ll,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=Da(s.elementType),s.type=n,typeof n=="function")af(n)?(c=Ma(n,c),s.tag=1,s=Jy(null,s,n,c,o)):(s.tag=0,s=Qf(null,s,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===ye){s.tag=11,s=Hy(null,s,n,c,o);break e}else if(f===A){s.tag=14,s=Fy(null,s,n,c,o);break e}}throw s=nt(n)||n,Error(i(306,s,""))}}return s;case 0:return Qf(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,f=Ma(c,s.pendingProps),Jy(n,s,c,f,o);case 3:e:{if(Ot(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var m=s.memoizedState;f=m.element,_f(n,s),Fl(s,c,null,o);var x=s.memoizedState;if(c=x.cache,xs(s,en,c),c!==m.cache&&mf(s,[en],o,!0),Hl(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Wy(n,s,c,o);break e}else if(c!==f){f=Nr(Error(i(424)),s),Vl(f),s=Wy(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Nt=Ir(n.firstChild),_n=s,et=!0,vs=null,Rr=!0,o=Y0(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Aa(),c===f){s=Ui(n,s,o);break e}En(n,s,c,o)}s=s.child}return s;case 26:return Zu(n,s),n===null?(o=fb(s.type,null,s.pendingProps,null))?s.memoizedState=o:et||(o=s.type,n=s.pendingProps,c=gh(je.current).createElement(o),c[jt]=s,c[Zt]=n,Tn(c,o,n),kt(c),s.stateNode=c):s.memoizedState=fb(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ei(s),n===null&&et&&(c=s.stateNode=ub(s.type,s.pendingProps,je.current),_n=s,Rr=!0,f=Nt,Os(s.type)?(jp=f,Nt=Ir(c.firstChild)):Nt=f),En(n,s,s.pendingProps.children,o),Zu(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&et&&((f=c=Nt)&&(c=PS(c,s.type,s.pendingProps,Rr),c!==null?(s.stateNode=c,_n=s,Nt=Ir(c.firstChild),Rr=!1,f=!0):f=!1),f||bs(s)),ei(s),f=s.type,m=s.pendingProps,x=n!==null?n.memoizedProps:null,c=m.children,Rp(f,m)?c=null:x!==null&&Rp(f,x)&&(s.flags|=32),s.memoizedState!==null&&(f=Af(n,s,XT,null,null,o),hc._currentValue=f),Zu(n,s),En(n,s,c,o),s.child;case 6:return n===null&&et&&((n=o=Nt)&&(o=MS(o,s.pendingProps,Rr),o!==null?(s.stateNode=o,_n=s,Nt=null,n=!0):n=!1),n||bs(s)),null;case 13:return Zy(n,s,o);case 4:return Ot(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ja(s,null,c,o):En(n,s,c,o),s.child;case 11:return Hy(n,s,s.type,s.pendingProps,o);case 7:return En(n,s,s.pendingProps,o),s.child;case 8:return En(n,s,s.pendingProps.children,o),s.child;case 12:return En(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,xs(s,s.type,c.value),En(n,s,c.children,o),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,ka(s),f=wn(f),c=c(f),s.flags|=1,En(n,s,c,o),s.child;case 14:return Fy(n,s,s.type,s.pendingProps,o);case 15:return $y(n,s,s.type,s.pendingProps,o);case 19:return tv(n,s,o);case 31:return iS(n,s,o);case 22:return Yy(n,s,o,s.pendingProps);case 24:return ka(s),c=wn(en),n===null?(f=vf(),f===null&&(f=Et,m=gf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:c,cache:f},xf(s),xs(s,en,f)):((n.lanes&o)!==0&&(_f(n,s),Fl(s,null,null,o),Hl()),f=n.memoizedState,m=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),xs(s,en,c)):(c=m.cache,xs(s,en,c),c!==f.cache&&mf(s,[en],o,!0))),En(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function zi(n){n.flags|=4}function np(n,s,o,c,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Rv())n.flags|=8192;else throw Oa=Vu,bf}else n.flags&=-16777217}function rv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!vb(s))if(Rv())n.flags|=8192;else throw Oa=Vu,bf}function th(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?ma():536870912,n.lanes|=s,Vo|=s)}function Jl(n,s){if(!et)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ct(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function aS(n,s,o){var c=s.pendingProps;switch(uf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(s),null;case 1:return Ct(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Mi(en),gt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(So(s)?zi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,df())),Ct(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(zi(s),m!==null?(Ct(s),rv(s,m)):(Ct(s),np(s,f,null,c,o))):m?m!==n.memoizedState?(zi(s),Ct(s),rv(s,m)):(Ct(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&zi(s),Ct(s),np(s,f,n,c,o)),null;case 27:if(Fn(s),o=je.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&zi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ct(s),null}n=de.current,So(s)?M0(s):(n=ub(f,c,o),s.stateNode=n,zi(s))}return Ct(s),null;case 5:if(Fn(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&zi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ct(s),null}if(m=de.current,So(s))M0(s);else{var x=gh(je.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[jt]=s,m[Zt]=c;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=m;e:switch(Tn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&zi(s)}}return Ct(s),np(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&zi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=je.current,So(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,f=_n,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[jt]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Zv(n.nodeValue,o)),n||bs(s,!0)}else n=gh(n).createTextNode(c),n[jt]=s,s.stateNode=n}return Ct(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=So(s),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[jt]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),n=!1}else o=df(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(fr(s),s):(fr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ct(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=So(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[jt]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),f=!1}else f=df(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(fr(s),s):(fr(s),null)}return fr(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),th(s,s.updateQueue),Ct(s),null);case 4:return gt(),n===null&&Tp(s.stateNode.containerInfo),Ct(s),null;case 10:return Mi(s.type),Ct(s),null;case 19:if(X(Qt),c=s.memoizedState,c===null)return Ct(s),null;if(f=(s.flags&128)!==0,m=c.rendering,m===null)if(f)Jl(c,!1);else{if(qt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Gu(n),m!==null){for(s.flags|=128,Jl(c,!1),n=m.updateQueue,s.updateQueue=n,th(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)I0(o,n),o=o.sibling;return ce(Qt,Qt.current&1|2),et&&ji(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&Tt()>ah&&(s.flags|=128,f=!0,Jl(c,!1),s.lanes=4194304)}else{if(!f)if(n=Gu(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,th(s,n),Jl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!et)return Ct(s),null}else 2*Tt()-c.renderingStartTime>ah&&o!==536870912&&(s.flags|=128,f=!0,Jl(c,!1),s.lanes=4194304);c.isBackwards?(m.sibling=s.child,s.child=m):(n=c.last,n!==null?n.sibling=m:s.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Tt(),n.sibling=null,o=Qt.current,ce(Qt,f?o&1|2:o&1),et&&ji(s,c.treeForkCount),n):(Ct(s),null);case 22:case 23:return fr(s),Sf(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Ct(s),s.subtreeFlags&6&&(s.flags|=8192)):Ct(s),o=s.updateQueue,o!==null&&th(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&X(Ia),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Mi(en),Ct(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function oS(n,s){switch(uf(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Mi(en),gt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Fn(s),null;case 31:if(s.memoizedState!==null){if(fr(s),s.alternate===null)throw Error(i(340));Aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(fr(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Aa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return X(Qt),null;case 4:return gt(),null;case 10:return Mi(s.type),null;case 22:case 23:return fr(s),Sf(),n!==null&&X(Ia),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Mi(en),null;case 25:return null;default:return null}}function iv(n,s){switch(uf(s),s.tag){case 3:Mi(en),gt();break;case 26:case 27:case 5:Fn(s);break;case 4:gt();break;case 31:s.memoizedState!==null&&fr(s);break;case 13:fr(s);break;case 19:X(Qt);break;case 10:Mi(s.type);break;case 22:case 23:fr(s),Sf(),n!==null&&X(Ia);break;case 24:Mi(en)}}function Wl(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(S){ft(s,s.return,S)}}function Ns(n,s,o){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var x=c.inst,S=x.destroy;if(S!==void 0){x.destroy=void 0,f=s;var D=o,q=S;try{q()}catch(K){ft(f,D,K)}}}c=c.next}while(c!==m)}}catch(K){ft(s,s.return,K)}}function sv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{K0(s,o)}catch(c){ft(n,n.return,c)}}}function av(n,s,o){o.props=Ma(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){ft(n,s,c)}}function Zl(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){ft(n,s,f)}}function hi(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){ft(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ft(n,s,f)}else o.current=null}function ov(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){ft(n,n.return,f)}}function rp(n,s,o){try{var c=n.stateNode;RS(c,n.type,o,s),c[Zt]=s}catch(f){ft(n,n.return,f)}}function lv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Os(n.type)||n.tag===4}function ip(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Os(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sp(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Br));else if(c!==4&&(c===27&&Os(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(sp(n,s,o),n=n.sibling;n!==null;)sp(n,s,o),n=n.sibling}function nh(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&Os(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(nh(n,s,o),n=n.sibling;n!==null;)nh(n,s,o),n=n.sibling}function cv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Tn(s,c,o),s[jt]=n,s[Zt]=o}catch(m){ft(n,n.return,m)}}var Bi=!1,rn=!1,ap=!1,uv=typeof WeakSet=="function"?WeakSet:Set,fn=null;function lS(n,s){if(n=n.containerInfo,Cp=Eh,n=w0(n),Wd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,S=-1,D=-1,q=0,K=0,te=n,H=null;t:for(;;){for(var Y;te!==o||f!==0&&te.nodeType!==3||(S=x+f),te!==m||c!==0&&te.nodeType!==3||(D=x+c),te.nodeType===3&&(x+=te.nodeValue.length),(Y=te.firstChild)!==null;)H=te,te=Y;for(;;){if(te===n)break t;if(H===o&&++q===f&&(S=x),H===m&&++K===c&&(D=x),(Y=te.nextSibling)!==null)break;te=H,H=te.parentNode}te=Y}o=S===-1||D===-1?null:{start:S,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ap={focusedElem:n,selectionRange:o},Eh=!1,fn=s;fn!==null;)if(s=fn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,fn=n;else for(;fn!==null;){switch(s=fn,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var be=Ma(o.type,f);n=c.getSnapshotBeforeUpdate(be,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){ft(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Ip(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ip(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,fn=n;break}fn=s.return}}function hv(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:qi(n,o),c&4&&Wl(5,o);break;case 1:if(qi(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(x){ft(o,o.return,x)}else{var f=Ma(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(x){ft(o,o.return,x)}}c&64&&sv(o),c&512&&Zl(o,o.return);break;case 3:if(qi(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{K0(n,s)}catch(x){ft(o,o.return,x)}}break;case 27:s===null&&c&4&&cv(o);case 26:case 5:qi(n,o),s===null&&c&4&&ov(o),c&512&&Zl(o,o.return);break;case 12:qi(n,o);break;case 31:qi(n,o),c&4&&pv(n,o);break;case 13:qi(n,o),c&4&&mv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=yS.bind(null,o),LS(n,o))));break;case 22:if(c=o.memoizedState!==null||Bi,!c){s=s!==null&&s.memoizedState!==null||rn,f=Bi;var m=rn;Bi=c,(rn=s)&&!m?Hi(n,o,(o.subtreeFlags&8772)!==0):qi(n,o),Bi=f,rn=m}break;case 30:break;default:qi(n,o)}}function dv(n){var s=n.alternate;s!==null&&(n.alternate=null,dv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Vr(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Dt=null,er=!1;function Gi(n,s,o){for(o=o.child;o!==null;)fv(n,s,o),o=o.sibling}function fv(n,s,o){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Wt,o)}catch{}switch(o.tag){case 26:rn||hi(o,s),Gi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:rn||hi(o,s);var c=Dt,f=er;Os(o.type)&&(Dt=o.stateNode,er=!1),Gi(n,s,o),lc(o.stateNode),Dt=c,er=f;break;case 5:rn||hi(o,s);case 6:if(c=Dt,f=er,Dt=null,Gi(n,s,o),Dt=c,er=f,Dt!==null)if(er)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(o.stateNode)}catch(m){ft(o,s,m)}else try{Dt.removeChild(o.stateNode)}catch(m){ft(o,s,m)}break;case 18:Dt!==null&&(er?(n=Dt,sb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),$o(n)):sb(Dt,o.stateNode));break;case 4:c=Dt,f=er,Dt=o.stateNode.containerInfo,er=!0,Gi(n,s,o),Dt=c,er=f;break;case 0:case 11:case 14:case 15:Ns(2,o,s),rn||Ns(4,o,s),Gi(n,s,o);break;case 1:rn||(hi(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&av(o,s,c)),Gi(n,s,o);break;case 21:Gi(n,s,o);break;case 22:rn=(c=rn)||o.memoizedState!==null,Gi(n,s,o),rn=c;break;default:Gi(n,s,o)}}function pv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{$o(n)}catch(o){ft(s,s.return,o)}}}function mv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{$o(n)}catch(o){ft(s,s.return,o)}}function cS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new uv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new uv),s;default:throw Error(i(435,n.tag))}}function rh(n,s){var o=cS(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var f=vS.bind(null,n,c);c.then(f,f)}})}function tr(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,x=s,S=x;e:for(;S!==null;){switch(S.tag){case 27:if(Os(S.type)){Dt=S.stateNode,er=!1;break e}break;case 5:Dt=S.stateNode,er=!1;break e;case 3:case 4:Dt=S.stateNode.containerInfo,er=!0;break e}S=S.return}if(Dt===null)throw Error(i(160));fv(m,x,f),Dt=null,er=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)gv(s,n),s=s.sibling}var Yr=null;function gv(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:tr(s,n),nr(n),c&4&&(Ns(3,n,n.return),Wl(3,n),Ns(5,n,n.return));break;case 1:tr(s,n),nr(n),c&512&&(rn||o===null||hi(o,o.return)),c&64&&Bi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Yr;if(tr(s,n),nr(n),c&512&&(rn||o===null||hi(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[vn]||m[jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Tn(m,c,o),m[jt]=n,kt(m),c=m;break e;case"link":var x=gb("link","href",f).get(c+(o.href||""));if(x){for(var S=0;S<x.length;S++)if(m=x[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(S,1);break t}}m=f.createElement(c),Tn(m,c,o),f.head.appendChild(m);break;case"meta":if(x=gb("meta","content",f).get(c+(o.content||""))){for(S=0;S<x.length;S++)if(m=x[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(S,1);break t}}m=f.createElement(c),Tn(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[jt]=n,kt(m),c=m}n.stateNode=c}else yb(f,n.type,n.stateNode);else n.stateNode=mb(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?yb(f,n.type,n.stateNode):mb(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&rp(n,n.memoizedProps,o.memoizedProps)}break;case 27:tr(s,n),nr(n),c&512&&(rn||o===null||hi(o,o.return)),o!==null&&c&4&&rp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(tr(s,n),nr(n),c&512&&(rn||o===null||hi(o,o.return)),n.flags&32){f=n.stateNode;try{Zn(f,"")}catch(be){ft(n,n.return,be)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,rp(n,f,o!==null?o.memoizedProps:f)),c&1024&&(ap=!0);break;case 6:if(tr(s,n),nr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(be){ft(n,n.return,be)}}break;case 3:if(bh=null,f=Yr,Yr=yh(s.containerInfo),tr(s,n),Yr=f,nr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{$o(s.containerInfo)}catch(be){ft(n,n.return,be)}ap&&(ap=!1,yv(n));break;case 4:c=Yr,Yr=yh(n.stateNode.containerInfo),tr(s,n),nr(n),Yr=c;break;case 12:tr(s,n),nr(n);break;case 31:tr(s,n),nr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 13:tr(s,n),nr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(sh=Tt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,q=Bi,K=rn;if(Bi=q||f,rn=K||D,tr(s,n),rn=K,Bi=q,nr(n),c&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||D||Bi||rn||La(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(m=D.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{S=D.stateNode;var te=D.memoizedProps.style,H=te!=null&&te.hasOwnProperty("display")?te.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(be){ft(D,D.return,be)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(be){ft(D,D.return,be)}}}else if(s.tag===18){if(o===null){D=s;try{var Y=D.stateNode;f?ab(Y,!0):ab(D.stateNode,!1)}catch(be){ft(D,D.return,be)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,rh(n,o))));break;case 19:tr(s,n),nr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 30:break;case 21:break;default:tr(s,n),nr(n)}}function nr(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(lv(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=ip(n);nh(n,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(Zn(x,""),o.flags&=-33);var S=ip(n);nh(n,S,x);break;case 3:case 4:var D=o.stateNode.containerInfo,q=ip(n);sp(n,q,D);break;default:throw Error(i(161))}}catch(K){ft(n,n.return,K)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function yv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;yv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function qi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)hv(n,s.alternate,s),s=s.sibling}function La(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ns(4,s,s.return),La(s);break;case 1:hi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&av(s,s.return,o),La(s);break;case 27:lc(s.stateNode);case 26:case 5:hi(s,s.return),La(s);break;case 22:s.memoizedState===null&&La(s);break;case 30:La(s);break;default:La(s)}n=n.sibling}}function Hi(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=n,m=s,x=m.flags;switch(m.tag){case 0:case 11:case 15:Hi(f,m,o),Wl(4,m);break;case 1:if(Hi(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){ft(c,c.return,q)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Q0(D[f],S)}catch(q){ft(c,c.return,q)}}o&&x&64&&sv(m),Zl(m,m.return);break;case 27:cv(m);case 26:case 5:Hi(f,m,o),o&&c===null&&x&4&&ov(m),Zl(m,m.return);break;case 12:Hi(f,m,o);break;case 31:Hi(f,m,o),o&&x&4&&pv(f,m);break;case 13:Hi(f,m,o),o&&x&4&&mv(f,m);break;case 22:m.memoizedState===null&&Hi(f,m,o),Zl(m,m.return);break;case 30:break;default:Hi(f,m,o)}s=s.sibling}}function op(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Ul(o))}function lp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ul(n))}function Qr(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)vv(n,s,o,c),s=s.sibling}function vv(n,s,o,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Qr(n,s,o,c),f&2048&&Wl(9,s);break;case 1:Qr(n,s,o,c);break;case 3:Qr(n,s,o,c),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ul(n)));break;case 12:if(f&2048){Qr(n,s,o,c),n=s.stateNode;try{var m=s.memoizedProps,x=m.id,S=m.onPostCommit;typeof S=="function"&&S(x,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){ft(s,s.return,D)}}else Qr(n,s,o,c);break;case 31:Qr(n,s,o,c);break;case 13:Qr(n,s,o,c);break;case 23:break;case 22:m=s.stateNode,x=s.alternate,s.memoizedState!==null?m._visibility&2?Qr(n,s,o,c):ec(n,s):m._visibility&2?Qr(n,s,o,c):(m._visibility|=2,Po(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),f&2048&&op(x,s);break;case 24:Qr(n,s,o,c),f&2048&&lp(s.alternate,s);break;default:Qr(n,s,o,c)}}function Po(n,s,o,c,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,x=s,S=o,D=c,q=x.flags;switch(x.tag){case 0:case 11:case 15:Po(m,x,S,D,f),Wl(8,x);break;case 23:break;case 22:var K=x.stateNode;x.memoizedState!==null?K._visibility&2?Po(m,x,S,D,f):ec(m,x):(K._visibility|=2,Po(m,x,S,D,f)),f&&q&2048&&op(x.alternate,x);break;case 24:Po(m,x,S,D,f),f&&q&2048&&lp(x.alternate,x);break;default:Po(m,x,S,D,f)}s=s.sibling}}function ec(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,f=c.flags;switch(c.tag){case 22:ec(o,c),f&2048&&op(c.alternate,c);break;case 24:ec(o,c),f&2048&&lp(c.alternate,c);break;default:ec(o,c)}s=s.sibling}}var tc=8192;function Mo(n,s,o){if(n.subtreeFlags&tc)for(n=n.child;n!==null;)bv(n,s,o),n=n.sibling}function bv(n,s,o){switch(n.tag){case 26:Mo(n,s,o),n.flags&tc&&n.memoizedState!==null&&KS(o,Yr,n.memoizedState,n.memoizedProps);break;case 5:Mo(n,s,o);break;case 3:case 4:var c=Yr;Yr=yh(n.stateNode.containerInfo),Mo(n,s,o),Yr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=tc,tc=16777216,Mo(n,s,o),tc=c):Mo(n,s,o));break;default:Mo(n,s,o)}}function xv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function nc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];fn=c,wv(c,n)}xv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_v(n),n=n.sibling}function _v(n){switch(n.tag){case 0:case 11:case 15:nc(n),n.flags&2048&&Ns(9,n,n.return);break;case 3:nc(n);break;case 12:nc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,ih(n)):nc(n);break;default:nc(n)}}function ih(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];fn=c,wv(c,n)}xv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ns(8,s,s.return),ih(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ih(s));break;default:ih(s)}n=n.sibling}}function wv(n,s){for(;fn!==null;){var o=fn;switch(o.tag){case 0:case 11:case 15:Ns(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ul(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,fn=c;else e:for(o=n;fn!==null;){c=fn;var f=c.sibling,m=c.return;if(dv(c),c===o){fn=null;break e}if(f!==null){f.return=m,fn=f;break e}fn=m}}}var uS={getCacheForType:function(n){var s=wn(en),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return wn(en).controller.signal}},hS=typeof WeakMap=="function"?WeakMap:Map,ct=0,Et=null,$e=null,Ke=0,dt=0,pr=null,Cs=!1,Lo=!1,cp=!1,Fi=0,qt=0,As=0,Va=0,up=0,mr=0,Vo=0,rc=null,rr=null,hp=!1,sh=0,Ev=0,ah=1/0,oh=null,Rs=null,un=0,ks=null,Uo=null,$i=0,dp=0,fp=null,Tv=null,ic=0,pp=null;function gr(){return(ct&2)!==0&&Ke!==0?Ke&-Ke:Q.T!==null?xp():ga()}function Sv(){if(mr===0)if((Ke&536870912)===0||et){var n=Mr;Mr<<=1,(Mr&3932160)===0&&(Mr=262144),mr=n}else mr=536870912;return n=dr.current,n!==null&&(n.flags|=32),mr}function ir(n,s,o){(n===Et&&(dt===2||dt===9)||n.cancelPendingCommit!==null)&&(zo(n,0),Is(n,Ke,mr,!1)),Lr(n,o),((ct&2)===0||n!==Et)&&(n===Et&&((ct&2)===0&&(Va|=o),qt===4&&Is(n,Ke,mr,!1)),di(n))}function Nv(n,s,o){if((ct&6)!==0)throw Error(i(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Qn(n,s),f=c?pS(n,s):gp(n,s,!0),m=c;do{if(f===0){Lo&&!c&&Is(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!dS(o)){f=gp(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var S=n;f=rc;var D=S.current.memoizedState.isDehydrated;if(D&&(zo(S,x).flags|=256),x=gp(S,x,!1),x!==2){if(cp&&!D){S.errorRecoveryDisabledLanes|=m,Va|=m,f=4;break e}m=rr,rr=f,m!==null&&(rr===null?rr=m:rr.push.apply(rr,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){zo(n,0),Is(n,s,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Is(c,s,mr,!Cs);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=sh+300-Tt(),10<f)){if(Is(c,s,mr,!Cs),br(c,0,!0)!==0)break e;$i=s,c.timeoutHandle=rb(Cv.bind(null,c,o,rr,oh,hp,s,mr,Va,Vo,Cs,m,"Throttled",-0,0),f);break e}Cv(c,o,rr,oh,hp,s,mr,Va,Vo,Cs,m,null,-0,0)}}break}while(!0);di(n)}function Cv(n,s,o,c,f,m,x,S,D,q,K,te,H,Y){if(n.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Br},bv(s,m,te);var be=(m&62914560)===m?sh-Tt():(m&4194048)===m?Ev-Tt():0;if(be=XS(te,be),be!==null){$i=m,n.cancelPendingCommit=be(Pv.bind(null,n,s,m,o,c,f,x,S,D,K,te,null,H,Y)),Is(n,m,x,!q);return}}Pv(n,s,m,o,c,f,x,S,D)}function dS(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!ur(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Is(n,s,o,c){s&=~up,s&=~Va,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var f=s;0<f;){var m=31-Rt(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&Ni(n,o,s)}function lh(){return(ct&6)===0?(sc(0),!1):!0}function mp(){if($e!==null){if(dt===0)var n=$e.return;else n=$e,Pi=Ra=null,If(n),ko=null,Bl=0,n=$e;for(;n!==null;)iv(n.alternate,n),n=n.return;$e=null}}function zo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,DS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),$i=0,mp(),Et=n,$e=o=Oi(n.current,null),Ke=s,dt=0,pr=null,Cs=!1,Lo=Qn(n,s),cp=!1,Vo=mr=up=Va=As=qt=0,rr=rc=null,hp=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var f=31-Rt(c),m=1<<f;s|=n[f],c&=~m}return Fi=s,Ru(),o}function Av(n,s){Be=null,Q.H=Kl,s===Ro||s===Lu?(s=H0(),dt=3):s===bf?(s=H0(),dt=4):dt=s===Yf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,pr=s,$e===null&&(qt=1,Ju(n,Nr(s,n.current)))}function Rv(){var n=dr.current;return n===null?!0:(Ke&4194048)===Ke?kr===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?n===kr:!1}function kv(){var n=Q.H;return Q.H=Kl,n===null?Kl:n}function Iv(){var n=Q.A;return Q.A=uS,n}function ch(){qt=4,Cs||(Ke&4194048)!==Ke&&dr.current!==null||(Lo=!0),(As&134217727)===0&&(Va&134217727)===0||Et===null||Is(Et,Ke,mr,!1)}function gp(n,s,o){var c=ct;ct|=2;var f=kv(),m=Iv();(Et!==n||Ke!==s)&&(oh=null,zo(n,s)),s=!1;var x=qt;e:do try{if(dt!==0&&$e!==null){var S=$e,D=pr;switch(dt){case 8:mp(),x=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(s=!0);var q=dt;if(dt=0,pr=null,Bo(n,S,D,q),o&&Lo){x=0;break e}break;default:q=dt,dt=0,pr=null,Bo(n,S,D,q)}}fS(),x=qt;break}catch(K){Av(n,K)}while(!0);return s&&n.shellSuspendCounter++,Pi=Ra=null,ct=c,Q.H=f,Q.A=m,$e===null&&(Et=null,Ke=0,Ru()),x}function fS(){for(;$e!==null;)Dv($e)}function pS(n,s){var o=ct;ct|=2;var c=kv(),f=Iv();Et!==n||Ke!==s?(oh=null,ah=Tt()+500,zo(n,s)):Lo=Qn(n,s);e:do try{if(dt!==0&&$e!==null){s=$e;var m=pr;t:switch(dt){case 1:dt=0,pr=null,Bo(n,s,m,1);break;case 2:case 9:if(G0(m)){dt=0,pr=null,Ov(s);break}s=function(){dt!==2&&dt!==9||Et!==n||(dt=7),di(n)},m.then(s,s);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:G0(m)?(dt=0,pr=null,Ov(s)):(dt=0,pr=null,Bo(n,s,m,7));break;case 5:var x=null;switch($e.tag){case 26:x=$e.memoizedState;case 5:case 27:var S=$e;if(x?vb(x):S.stateNode.complete){dt=0,pr=null;var D=S.sibling;if(D!==null)$e=D;else{var q=S.return;q!==null?($e=q,uh(q)):$e=null}break t}}dt=0,pr=null,Bo(n,s,m,5);break;case 6:dt=0,pr=null,Bo(n,s,m,6);break;case 8:mp(),qt=6;break e;default:throw Error(i(462))}}mS();break}catch(K){Av(n,K)}while(!0);return Pi=Ra=null,Q.H=c,Q.A=f,ct=o,$e!==null?0:(Et=null,Ke=0,Ru(),qt)}function mS(){for(;$e!==null&&!_i();)Dv($e)}function Dv(n){var s=nv(n.alternate,n,Fi);n.memoizedProps=n.pendingProps,s===null?uh(n):$e=s}function Ov(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Xy(o,s,s.pendingProps,s.type,void 0,Ke);break;case 11:s=Xy(o,s,s.pendingProps,s.type.render,s.ref,Ke);break;case 5:If(s);default:iv(o,s),s=$e=I0(s,Fi),s=nv(o,s,Fi)}n.memoizedProps=n.pendingProps,s===null?uh(n):$e=s}function Bo(n,s,o,c){Pi=Ra=null,If(s),ko=null,Bl=0;var f=s.return;try{if(rS(n,f,s,o,Ke)){qt=1,Ju(n,Nr(o,n.current)),$e=null;return}}catch(m){if(f!==null)throw $e=f,m;qt=1,Ju(n,Nr(o,n.current)),$e=null;return}s.flags&32768?(et||c===1?n=!0:Lo||(Ke&536870912)!==0?n=!1:(Cs=n=!0,(c===2||c===9||c===3||c===6)&&(c=dr.current,c!==null&&c.tag===13&&(c.flags|=16384))),jv(s,n)):uh(s)}function uh(n){var s=n;do{if((s.flags&32768)!==0){jv(s,Cs);return}n=s.return;var o=aS(s.alternate,s,Fi);if(o!==null){$e=o;return}if(s=s.sibling,s!==null){$e=s;return}$e=s=n}while(s!==null);qt===0&&(qt=5)}function jv(n,s){do{var o=oS(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);qt=6,$e=null}function Pv(n,s,o,c,f,m,x,S,D){n.cancelPendingCommit=null;do hh();while(un!==0);if((ct&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=rf,wl(n,o,m,x,S,D),n===Et&&($e=Et=null,Ke=0),Uo=s,ks=n,$i=o,dp=m,fp=f,Tv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,bS(ti,function(){return zv(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,f=le.p,le.p=2,x=ct,ct|=4;try{lS(n,s,o)}finally{ct=x,le.p=f,Q.T=c}}un=1,Mv(),Lv(),Vv()}}function Mv(){if(un===1){un=0;var n=ks,s=Uo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var c=le.p;le.p=2;var f=ct;ct|=4;try{gv(s,n);var m=Ap,x=w0(n.containerInfo),S=m.focusedElem,D=m.selectionRange;if(x!==S&&S&&S.ownerDocument&&_0(S.ownerDocument.documentElement,S)){if(D!==null&&Wd(S)){var q=D.start,K=D.end;if(K===void 0&&(K=q),"selectionStart"in S)S.selectionStart=q,S.selectionEnd=Math.min(K,S.value.length);else{var te=S.ownerDocument||document,H=te&&te.defaultView||window;if(H.getSelection){var Y=H.getSelection(),be=S.textContent.length,Ae=Math.min(D.start,be),_t=D.end===void 0?Ae:Math.min(D.end,be);!Y.extend&&Ae>_t&&(x=_t,_t=Ae,Ae=x);var U=x0(S,Ae),P=x0(S,_t);if(U&&P&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==P.node||Y.focusOffset!==P.offset)){var G=te.createRange();G.setStart(U.node,U.offset),Y.removeAllRanges(),Ae>_t?(Y.addRange(G),Y.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),Y.addRange(G))}}}}for(te=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<te.length;S++){var W=te[S];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Eh=!!Cp,Ap=Cp=null}finally{ct=f,le.p=c,Q.T=o}}n.current=s,un=2}}function Lv(){if(un===2){un=0;var n=ks,s=Uo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var c=le.p;le.p=2;var f=ct;ct|=4;try{hv(n,s.alternate,s)}finally{ct=f,le.p=c,Q.T=o}}un=3}}function Vv(){if(un===4||un===3){un=0,pa();var n=ks,s=Uo,o=$i,c=Tv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,Uo=ks=null,Uv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Rs=null),xr(o),s=s.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Wt,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=Q.T,f=le.p,le.p=2,Q.T=null;try{for(var m=n.onRecoverableError,x=0;x<c.length;x++){var S=c[x];m(S.value,{componentStack:S.stack})}}finally{Q.T=s,le.p=f}}($i&3)!==0&&hh(),di(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===pp?ic++:(ic=0,pp=n):ic=0,sc(0)}}function Uv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ul(s)))}function hh(){return Mv(),Lv(),Vv(),zv()}function zv(){if(un!==5)return!1;var n=ks,s=dp;dp=0;var o=xr($i),c=Q.T,f=le.p;try{le.p=32>o?32:o,Q.T=null,o=fp,fp=null;var m=ks,x=$i;if(un=0,Uo=ks=null,$i=0,(ct&6)!==0)throw Error(i(331));var S=ct;if(ct|=4,_v(m.current),vv(m,m.current,x,o),ct=S,sc(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Wt,m)}catch{}return!0}finally{le.p=f,Q.T=c,Uv(n,s)}}function Bv(n,s,o){s=Nr(o,s),s=$f(n.stateNode,s,2),n=Es(n,s,2),n!==null&&(Lr(n,2),di(n))}function ft(n,s,o){if(n.tag===3)Bv(n,n,o);else for(;s!==null;){if(s.tag===3){Bv(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Rs===null||!Rs.has(c))){n=Nr(o,n),o=Gy(2),c=Es(s,o,2),c!==null&&(qy(o,c,s,n),Lr(c,2),di(c));break}}s=s.return}}function yp(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new hS;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(o)||(cp=!0,f.add(o),n=gS.bind(null,n,s,o),s.then(n,n))}function gS(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Et===n&&(Ke&o)===o&&(qt===4||qt===3&&(Ke&62914560)===Ke&&300>Tt()-sh?(ct&2)===0&&zo(n,0):up|=o,Vo===Ke&&(Vo=0)),di(n)}function Gv(n,s){s===0&&(s=ma()),n=Na(n,s),n!==null&&(Lr(n,s),di(n))}function yS(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Gv(n,o)}function vS(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Gv(n,o)}function bS(n,s){return Ne(n,s)}var dh=null,Go=null,vp=!1,fh=!1,bp=!1,Ds=0;function di(n){n!==Go&&n.next===null&&(Go===null?dh=Go=n:Go=Go.next=n),fh=!0,vp||(vp=!0,_S())}function sc(n,s){if(!bp&&fh){bp=!0;do for(var o=!1,c=dh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-Rt(42|n)+1)-1,m&=f&~(x&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,$v(c,m))}else m=Ke,m=br(c,c===Et?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Qn(c,m)||(o=!0,$v(c,m));c=c.next}while(o);bp=!1}}function xS(){qv()}function qv(){fh=vp=!1;var n=0;Ds!==0&&IS()&&(n=Ds);for(var s=Tt(),o=null,c=dh;c!==null;){var f=c.next,m=Hv(c,s);m===0?(c.next=null,o===null?dh=f:o.next=f,f===null&&(Go=o)):(o=c,(n!==0||(m&3)!==0)&&(fh=!0)),c=f}un!==0&&un!==5||sc(n),Ds!==0&&(Ds=0)}function Hv(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var x=31-Rt(m),S=1<<x,D=f[x];D===-1?((S&o)===0||(S&c)!==0)&&(f[x]=_l(S,s)):D<=s&&(n.expiredLanes|=S),m&=~S}if(s=Et,o=Ke,o=br(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(dt===2||dt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Jt(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Qn(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&Jt(c),xr(o)){case 2:case 8:o=dn;break;case 32:o=ti;break;case 268435456:o=Pr;break;default:o=ti}return c=Fv.bind(null,n),o=Ne(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&Jt(c),n.callbackPriority=2,n.callbackNode=null,2}function Fv(n,s){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(hh()&&n.callbackNode!==o)return null;var c=Ke;return c=br(n,n===Et?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Nv(n,c,s),Hv(n,Tt()),n.callbackNode!=null&&n.callbackNode===o?Fv.bind(null,n):null)}function $v(n,s){if(hh())return null;Nv(n,s,!0)}function _S(){OS(function(){(ct&6)!==0?Ne(Ue,xS):qv()})}function xp(){if(Ds===0){var n=Co;n===0&&(n=Yn,Yn<<=1,(Yn&261888)===0&&(Yn=256)),Ds=n}return Ds}function Yv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ho(""+n)}function Qv(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function wS(n,s,o,c,f){if(s==="submit"&&o&&o.stateNode===f){var m=Yv((f[Zt]||null).action),x=c.submitter;x&&(s=(s=x[Zt]||null)?Yv(s.formAction):x.getAttribute("formAction"),s!==null&&(m=s,x=null));var S=new si("action","action",null,c,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ds!==0){var D=x?Qv(f,x):new FormData(f);zf(o,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(S.preventDefault(),D=x?Qv(f,x):new FormData(f),zf(o,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var _p=0;_p<nf.length;_p++){var wp=nf[_p],ES=wp.toLowerCase(),TS=wp[0].toUpperCase()+wp.slice(1);$r(ES,"on"+TS)}$r(S0,"onAnimationEnd"),$r(N0,"onAnimationIteration"),$r(C0,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(zT,"onTransitionRun"),$r(BT,"onTransitionStart"),$r(GT,"onTransitionCancel"),$r(A0,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function Kv(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var x=c.length-1;0<=x;x--){var S=c[x],D=S.instance,q=S.currentTarget;if(S=S.listener,D!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=q;try{m(f)}catch(K){Au(K)}f.currentTarget=null,m=D}else for(x=0;x<c.length;x++){if(S=c[x],D=S.instance,q=S.currentTarget,S=S.listener,D!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=q;try{m(f)}catch(K){Au(K)}f.currentTarget=null,m=D}}}}function Ye(n,s){var o=s[Ai];o===void 0&&(o=s[Ai]=new Set);var c=n+"__bubble";o.has(c)||(Xv(s,n,2,!1),o.add(c))}function Ep(n,s,o){var c=0;s&&(c|=4),Xv(o,n,c,s)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Tp(n){if(!n[ph]){n[ph]=!0,Ri.forEach(function(o){o!=="selectionchange"&&(SS.has(o)||Ep(o,!1,n),Ep(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ph]||(s[ph]=!0,Ep("selectionchange",!1,s))}}function Xv(n,s,o,c){switch(Sb(s)){case 2:var f=ZS;break;case 8:f=e2;break;default:f=Up}o=f.bind(null,s,o,n),f=void 0,!va||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Sp(n,s,o,c,f){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var S=c.stateNode.containerInfo;if(S===f)break;if(x===4)for(x=c.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;S!==null;){if(x=lr(S),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){c=m=x;continue e}S=S.parentNode}}c=c.return}fs(function(){var q=m,K=wr(o),te=[];e:{var H=R0.get(n);if(H!==void 0){var Y=si,be=n;switch(n){case"keypress":if(xa(o)===0)break e;case"keydown":case"keyup":Y=Su;break;case"focusin":be="focus",Y=wa;break;case"focusout":be="blur",Y=wa;break;case"beforeblur":case"afterblur":Y=wa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=v;break;case S0:case N0:case C0:Y=vu;break;case A0:Y=N;break;case"scroll":case"scrollend":Y=kl;break;case"wheel":Y=F;break;case"copy":case"cut":case"paste":Y=bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Di;break;case"toggle":case"beforetoggle":Y=ze}var Ae=(s&4)!==0,_t=!Ae&&(n==="scroll"||n==="scrollend"),U=Ae?H!==null?H+"Capture":null:H;Ae=[];for(var P=q,G;P!==null;){var W=P;if(G=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||G===null||U===null||(W=Gr(P,U),W!=null&&Ae.push(oc(P,W,G))),_t)break;P=P.return}0<Ae.length&&(H=new Y(H,be,null,o,K),te.push({event:H,listeners:Ae}))}}if((s&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",H&&o!==Cl&&(be=o.relatedTarget||o.fromElement)&&(lr(be)||be[_r]))break e;if((Y||H)&&(H=K.window===K?K:(H=K.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(be=o.relatedTarget||o.toElement,Y=q,be=be?lr(be):null,be!==null&&(_t=l(be),Ae=be.tag,be!==_t||Ae!==5&&Ae!==27&&Ae!==6)&&(be=null)):(Y=null,be=q),Y!==be)){if(Ae=Il,W="onMouseLeave",U="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=Di,W="onPointerLeave",U="onPointerEnter",P="pointer"),_t=Y==null?H:Bt(Y),G=be==null?H:Bt(be),H=new Ae(W,P+"leave",Y,o,K),H.target=_t,H.relatedTarget=G,W=null,lr(K)===q&&(Ae=new Ae(U,P+"enter",be,o,K),Ae.target=G,Ae.relatedTarget=_t,W=Ae),_t=W,Y&&be)t:{for(Ae=NS,U=Y,P=be,G=0,W=U;W;W=Ae(W))G++;W=0;for(var Te=P;Te;Te=Ae(Te))W++;for(;0<G-W;)U=Ae(U),G--;for(;0<W-G;)P=Ae(P),W--;for(;G--;){if(U===P||P!==null&&U===P.alternate){Ae=U;break t}U=Ae(U),P=Ae(P)}Ae=null}else Ae=null;Y!==null&&Jv(te,H,Y,Ae,!1),be!==null&&_t!==null&&Jv(te,_t,be,Ae,!0)}}e:{if(H=q?Bt(q):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var at=p0;else if(d0(H))if(m0)at=LT;else{at=PT;var _e=jT}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&uo(q.elementType)&&(at=p0):at=MT;if(at&&(at=at(n,q))){f0(te,at,o,K);break e}_e&&_e(n,H,q),n==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&Tl(H,"number",H.value)}switch(_e=q?Bt(q):window,n){case"focusin":(d0(_e)||_e.contentEditable==="true")&&(bo=_e,Zd=q,Ml=null);break;case"focusout":Ml=Zd=bo=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,E0(te,o,K);break;case"selectionchange":if(UT)break;case"keydown":case"keyup":E0(te,o,K)}var Ge;if(lt)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else vo?Ea(n,o)&&(Xe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Xe="onCompositionStart");Xe&&(li&&o.locale!=="ko"&&(vo||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&vo&&(Ge=Rl()):(ii=K,Al="value"in ii?ii.value:ii.textContent,vo=!0)),_e=mh(q,Xe),0<_e.length&&(Xe=new oi(Xe,n,null,o,K),te.push({event:Xe,listeners:_e}),Ge?Xe.data=Ge:(Ge=yo(o),Ge!==null&&(Xe.data=Ge)))),(Ge=Tr?kT(n,o):IT(n,o))&&(Xe=mh(q,"onBeforeInput"),0<Xe.length&&(_e=new oi("onBeforeInput","beforeinput",null,o,K),te.push({event:_e,listeners:Xe}),_e.data=Ge)),wS(te,n,q,o,K)}Kv(te,s)})}function oc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function mh(n,s){for(var o=s+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Gr(n,o),f!=null&&c.unshift(oc(n,f,m)),f=Gr(n,s),f!=null&&c.push(oc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function NS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Jv(n,s,o,c,f){for(var m=s._reactName,x=[];o!==null&&o!==c;){var S=o,D=S.alternate,q=S.stateNode;if(S=S.tag,D!==null&&D===c)break;S!==5&&S!==26&&S!==27||q===null||(D=q,f?(q=Gr(o,m),q!=null&&x.unshift(oc(o,q,D))):f||(q=Gr(o,m),q!=null&&x.push(oc(o,q,D)))),o=o.return}x.length!==0&&n.push({event:s,listeners:x})}var CS=/\r\n?/g,AS=/\u0000|\uFFFD/g;function Wv(n){return(typeof n=="string"?n:""+n).replace(CS,`
`).replace(AS,"")}function Zv(n,s){return s=Wv(s),Wv(n)===s}function xt(n,s,o,c,f,m){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Zn(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Zn(n,""+c);break;case"className":In(n,"class",c);break;case"tabIndex":In(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":In(n,o,c);break;case"style":Nl(n,c,m);break;case"data":if(s!=="object"){In(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ho(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&xt(n,s,"name",f.name,f,null),xt(n,s,"formEncType",f.formEncType,f,null),xt(n,s,"formMethod",f.formMethod,f,null),xt(n,s,"formTarget",f.formTarget,f,null)):(xt(n,s,"encType",f.encType,f,null),xt(n,s,"method",f.method,f,null),xt(n,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ho(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Br);break;case"onScroll":c!=null&&Ye("scroll",n);break;case"onScrollEnd":c!=null&&Ye("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=ho(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ye("beforetoggle",n),Ye("toggle",n),ls(n,"popover",c);break;case"xlinkActuate":Pt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Pt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Pt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Pt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Pt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Pt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ls(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=mu.get(o)||o,ls(n,o,c))}}function Np(n,s,o,c,f,m){switch(o){case"style":Nl(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Zn(n,c):(typeof c=="number"||typeof c=="bigint")&&Zn(n,""+c);break;case"onScroll":c!=null&&Ye("scroll",n);break;case"onScrollEnd":c!=null&&Ye("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Br);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ur.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=n[Zt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):ls(n,o,c)}}}function Tn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",n),Ye("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(n,s,m,x,o,null)}}f&&xt(n,s,"srcSet",o.srcSet,o,null),c&&xt(n,s,"src",o.src,o,null);return;case"input":Ye("invalid",n);var S=m=x=f=null,D=null,q=null;for(c in o)if(o.hasOwnProperty(c)){var K=o[c];if(K!=null)switch(c){case"name":f=K;break;case"type":x=K;break;case"checked":D=K;break;case"defaultChecked":q=K;break;case"value":m=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:xt(n,s,c,K,o,null)}}du(n,m,S,D,q,x,f,!1);return;case"select":Ye("invalid",n),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":x=S;break;case"multiple":c=S;default:xt(n,s,f,S,o,null)}s=m,o=x,n.multiple=!!c,s!=null?cs(n,!!c,s,!1):o!=null&&cs(n,!!c,o,!0);return;case"textarea":Ye("invalid",n),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(S=o[x],S!=null))switch(x){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:xt(n,s,x,S,o,null)}us(n,c,f,m);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:xt(n,s,D,c,o,null)}return;case"dialog":Ye("beforetoggle",n),Ye("toggle",n),Ye("cancel",n),Ye("close",n);break;case"iframe":case"object":Ye("load",n);break;case"video":case"audio":for(c=0;c<ac.length;c++)Ye(ac[c],n);break;case"image":Ye("error",n),Ye("load",n);break;case"details":Ye("toggle",n);break;case"embed":case"source":case"link":Ye("error",n),Ye("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(c=o[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(n,s,q,c,o,null)}return;default:if(uo(s)){for(K in o)o.hasOwnProperty(K)&&(c=o[K],c!==void 0&&Np(n,s,K,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&xt(n,s,S,c,o,null))}function RS(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,S=null,D=null,q=null,K=null;for(Y in o){var te=o[Y];if(o.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=te;default:c.hasOwnProperty(Y)||xt(n,s,Y,null,c,te)}}for(var H in c){var Y=c[H];if(te=o[H],c.hasOwnProperty(H)&&(Y!=null||te!=null))switch(H){case"type":m=Y;break;case"name":f=Y;break;case"checked":q=Y;break;case"defaultChecked":K=Y;break;case"value":x=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Y!==te&&xt(n,s,H,Y,c,te)}}co(n,x,S,D,q,K,m,f);return;case"select":Y=x=S=H=null;for(m in o)if(D=o[m],o.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Y=D;default:c.hasOwnProperty(m)||xt(n,s,m,null,c,D)}for(f in c)if(m=c[f],D=o[f],c.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":H=m;break;case"defaultValue":S=m;break;case"multiple":x=m;default:m!==D&&xt(n,s,f,m,c,D)}s=S,o=x,c=Y,H!=null?cs(n,!!o,H,!1):!!c!=!!o&&(s!=null?cs(n,!!o,s,!0):cs(n,!!o,o?[]:"",!1));return;case"textarea":Y=H=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:xt(n,s,S,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":H=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&xt(n,s,x,f,c,m)}fu(n,H,Y);return;case"option":for(var be in o)if(H=o[be],o.hasOwnProperty(be)&&H!=null&&!c.hasOwnProperty(be))switch(be){case"selected":n.selected=!1;break;default:xt(n,s,be,null,c,H)}for(D in c)if(H=c[D],Y=o[D],c.hasOwnProperty(D)&&H!==Y&&(H!=null||Y!=null))switch(D){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:xt(n,s,D,H,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)H=o[Ae],o.hasOwnProperty(Ae)&&H!=null&&!c.hasOwnProperty(Ae)&&xt(n,s,Ae,null,c,H);for(q in c)if(H=c[q],Y=o[q],c.hasOwnProperty(q)&&H!==Y&&(H!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:xt(n,s,q,H,c,Y)}return;default:if(uo(s)){for(var _t in o)H=o[_t],o.hasOwnProperty(_t)&&H!==void 0&&!c.hasOwnProperty(_t)&&Np(n,s,_t,void 0,c,H);for(K in c)H=c[K],Y=o[K],!c.hasOwnProperty(K)||H===Y||H===void 0&&Y===void 0||Np(n,s,K,H,c,Y);return}}for(var U in o)H=o[U],o.hasOwnProperty(U)&&H!=null&&!c.hasOwnProperty(U)&&xt(n,s,U,null,c,H);for(te in c)H=c[te],Y=o[te],!c.hasOwnProperty(te)||H===Y||H==null&&Y==null||xt(n,s,te,H,c,Y)}function eb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,S=f.duration;if(m&&S&&eb(x)){for(x=0,S=f.responseEnd,c+=1;c<o.length;c++){var D=o[c],q=D.startTime;if(q>S)break;var K=D.transferSize,te=D.initiatorType;K&&eb(te)&&(D=D.responseEnd,x+=K*(D<S?1:(S-q)/(D-q)))}if(--c,s+=8*(m+x)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Cp=null,Ap=null;function gh(n){return n.nodeType===9?n:n.ownerDocument}function tb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nb(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Rp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var kp=null;function IS(){var n=window.event;return n&&n.type==="popstate"?n===kp?!1:(kp=n,!0):(kp=null,!1)}var rb=typeof setTimeout=="function"?setTimeout:void 0,DS=typeof clearTimeout=="function"?clearTimeout:void 0,ib=typeof Promise=="function"?Promise:void 0,OS=typeof queueMicrotask=="function"?queueMicrotask:typeof ib<"u"?function(n){return ib.resolve(null).then(n).catch(jS)}:rb;function jS(n){setTimeout(function(){throw n})}function Os(n){return n==="head"}function sb(n,s){var o=s,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),$o(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")lc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,lc(o);for(var m=o.firstChild;m;){var x=m.nextSibling,S=m.nodeName;m[vn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&lc(n.ownerDocument.body);o=f}while(o);$o(s)}function ab(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Ip(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ip(o),Vr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function PS(n,s,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[vn])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ir(n.nextSibling),n===null)break}return null}function MS(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ir(n.nextSibling),n===null))return null;return n}function ob(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ir(n.nextSibling),n===null))return null;return n}function Dp(n){return n.data==="$?"||n.data==="$~"}function Op(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function LS(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Ir(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var jp=null;function lb(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Ir(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function cb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function ub(n,s,o){switch(s=gh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function lc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Vr(n)}var Dr=new Map,hb=new Set;function yh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Yi=le.d;le.d={f:VS,r:US,D:zS,C:BS,L:GS,m:qS,X:FS,S:HS,M:$S};function VS(){var n=Yi.f(),s=lh();return n||s}function US(n){var s=Wn(n);s!==null&&s.tag===5&&s.type==="form"?Ay(s):Yi.r(n)}var qo=typeof document>"u"?null:document;function db(n,s,o){var c=qo;if(c&&typeof s=="string"&&s){var f=$t(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),hb.has(f)||(hb.add(f),n={rel:n,crossOrigin:o,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),Tn(s,"link",n),kt(s),c.head.appendChild(s)))}}function zS(n){Yi.D(n),db("dns-prefetch",n,null)}function BS(n,s){Yi.C(n,s),db("preconnect",n,s)}function GS(n,s,o){Yi.L(n,s,o);var c=qo;if(c&&n&&s){var f='link[rel="preload"][as="'+$t(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+$t(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+$t(o.imageSizes)+'"]')):f+='[href="'+$t(n)+'"]';var m=f;switch(s){case"style":m=Ho(n);break;case"script":m=Fo(n)}Dr.has(m)||(n=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Dr.set(m,n),c.querySelector(f)!==null||s==="style"&&c.querySelector(cc(m))||s==="script"&&c.querySelector(uc(m))||(s=c.createElement("link"),Tn(s,"link",n),kt(s),c.head.appendChild(s)))}}function qS(n,s){Yi.m(n,s);var o=qo;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+$t(c)+'"][href="'+$t(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Fo(n)}if(!Dr.has(m)&&(n=_({rel:"modulepreload",href:n},s),Dr.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(uc(m)))return}c=o.createElement("link"),Tn(c,"link",n),kt(c),o.head.appendChild(c)}}}function HS(n,s,o){Yi.S(n,s,o);var c=qo;if(c&&n){var f=bn(c).hoistableStyles,m=Ho(n);s=s||"default";var x=f.get(m);if(!x){var S={loading:0,preload:null};if(x=c.querySelector(cc(m)))S.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Dr.get(m))&&Pp(n,o);var D=x=c.createElement("link");kt(D),Tn(D,"link",n),D._p=new Promise(function(q,K){D.onload=q,D.onerror=K}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,vh(x,s,c)}x={type:"stylesheet",instance:x,count:1,state:S},f.set(m,x)}}}function FS(n,s){Yi.X(n,s);var o=qo;if(o&&n){var c=bn(o).hoistableScripts,f=Fo(n),m=c.get(f);m||(m=o.querySelector(uc(f)),m||(n=_({src:n,async:!0},s),(s=Dr.get(f))&&Mp(n,s),m=o.createElement("script"),kt(m),Tn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function $S(n,s){Yi.M(n,s);var o=qo;if(o&&n){var c=bn(o).hoistableScripts,f=Fo(n),m=c.get(f);m||(m=o.querySelector(uc(f)),m||(n=_({src:n,async:!0,type:"module"},s),(s=Dr.get(f))&&Mp(n,s),m=o.createElement("script"),kt(m),Tn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function fb(n,s,o,c){var f=(f=je.current)?yh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Ho(o.href),o=bn(f).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ho(o.href);var m=bn(f).hoistableStyles,x=m.get(n);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,x),(m=f.querySelector(cc(n)))&&!m._p&&(x.instance=m,x.state.loading=5),Dr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Dr.set(n,o),m||YS(f,n,o,x.state))),s&&c===null)throw Error(i(528,""));return x}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Fo(o),o=bn(f).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ho(n){return'href="'+$t(n)+'"'}function cc(n){return'link[rel="stylesheet"]['+n+"]"}function pb(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function YS(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Tn(s,"link",o),kt(s),n.head.appendChild(s))}function Fo(n){return'[src="'+$t(n)+'"]'}function uc(n){return"script[async]"+n}function mb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+$t(o.href)+'"]');if(c)return s.instance=c,kt(c),c;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),kt(c),Tn(c,"style",f),vh(c,o.precedence,n),s.instance=c;case"stylesheet":f=Ho(o.href);var m=n.querySelector(cc(f));if(m)return s.state.loading|=4,s.instance=m,kt(m),m;c=pb(o),(f=Dr.get(f))&&Pp(c,f),m=(n.ownerDocument||n).createElement("link"),kt(m);var x=m;return x._p=new Promise(function(S,D){x.onload=S,x.onerror=D}),Tn(m,"link",c),s.state.loading|=4,vh(m,o.precedence,n),s.instance=m;case"script":return m=Fo(o.src),(f=n.querySelector(uc(m)))?(s.instance=f,kt(f),f):(c=o,(f=Dr.get(m))&&(c=_({},o),Mp(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),kt(f),Tn(f,"link",c),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,vh(c,o.precedence,n));return s.instance}function vh(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var S=c[x];if(S.dataset.precedence===s)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Pp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Mp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var bh=null;function gb(n,s,o){if(bh===null){var c=new Map,f=bh=new Map;f.set(o,c)}else f=bh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[vn]||m[jt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(s)||"";x=n+x;var S=c.get(x);S?S.push(m):c.set(x,[m])}}return c}function yb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function QS(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function vb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function KS(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Ho(c.href),m=s.querySelector(cc(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=xh.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,kt(m);return}m=s.ownerDocument||s,c=pb(c),(f=Dr.get(f))&&Pp(c,f),m=m.createElement("link"),kt(m);var x=m;x._p=new Promise(function(S,D){x.onload=S,x.onerror=D}),Tn(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=xh.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Lp=0;function XS(n,s){return n.stylesheets&&n.count===0&&wh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Lp===0&&(Lp=62500*kS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Lp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function xh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _h=null;function wh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_h=new Map,s.forEach(JS,n),_h=null,xh.call(n))}function JS(n,s){if(!(s.state.loading&4)){var o=_h.get(n);if(o)var c=o.get(null);else{o=new Map,_h.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=s.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=xh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var hc={$$typeof:me,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function WS(n,s,o,c,f,m,x,S,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kn(0),this.hiddenUpdates=Kn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function bb(n,s,o,c,f,m,x,S,D,q,K,te){return n=new WS(n,s,o,x,D,q,K,te,S),s=1,m===!0&&(s|=24),m=hr(3,null,null,s),n.current=m,m.stateNode=n,s=gf(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:s},xf(m),n}function xb(n){return n?(n=wo,n):wo}function _b(n,s,o,c,f,m){f=xb(f),c.context===null?c.context=f:c.pendingContext=f,c=ws(s),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=Es(n,c,s),o!==null&&(ir(o,n,s),ql(o,n,s))}function wb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Vp(n,s){wb(n,s),(n=n.alternate)&&wb(n,s)}function Eb(n){if(n.tag===13||n.tag===31){var s=Na(n,67108864);s!==null&&ir(s,n,67108864),Vp(n,67108864)}}function Tb(n){if(n.tag===13||n.tag===31){var s=gr();s=Ci(s);var o=Na(n,s);o!==null&&ir(o,n,s),Vp(n,s)}}var Eh=!0;function ZS(n,s,o,c){var f=Q.T;Q.T=null;var m=le.p;try{le.p=2,Up(n,s,o,c)}finally{le.p=m,Q.T=f}}function e2(n,s,o,c){var f=Q.T;Q.T=null;var m=le.p;try{le.p=8,Up(n,s,o,c)}finally{le.p=m,Q.T=f}}function Up(n,s,o,c){if(Eh){var f=zp(c);if(f===null)Sp(n,s,c,Th,o),Nb(n,c);else if(n2(f,n,s,o,c))c.stopPropagation();else if(Nb(n,c),s&4&&-1<t2.indexOf(n)){for(;f!==null;){var m=Wn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=ve(m.pendingLanes);if(x!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;x;){var D=1<<31-Rt(x);S.entanglements[1]|=D,x&=~D}di(m),(ct&6)===0&&(ah=Tt()+500,sc(0))}}break;case 31:case 13:S=Na(m,2),S!==null&&ir(S,m,2),lh(),Vp(m,2)}if(m=zp(c),m===null&&Sp(n,s,c,Th,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Sp(n,s,c,null,o)}}function zp(n){return n=wr(n),Bp(n)}var Th=null;function Bp(n){if(Th=null,n=lr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=p(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Th=n,null}function Sb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Un()){case Ue:return 2;case dn:return 8;case ti:case wi:return 32;case Pr:return 268435456;default:return 32}default:return 32}}var Gp=!1,js=null,Ps=null,Ms=null,dc=new Map,fc=new Map,Ls=[],t2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nb(n,s){switch(n){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":dc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(s.pointerId)}}function pc(n,s,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Wn(s),s!==null&&Eb(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function n2(n,s,o,c,f){switch(s){case"focusin":return js=pc(js,n,s,o,c,f),!0;case"dragenter":return Ps=pc(Ps,n,s,o,c,f),!0;case"mouseover":return Ms=pc(Ms,n,s,o,c,f),!0;case"pointerover":var m=f.pointerId;return dc.set(m,pc(dc.get(m)||null,n,s,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,fc.set(m,pc(fc.get(m)||null,n,s,o,c,f)),!0}return!1}function Cb(n){var s=lr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,Xn(n.priority,function(){Tb(o)});return}}else if(s===31){if(s=p(o),s!==null){n.blockedOn=s,Xn(n.priority,function(){Tb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=zp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Cl=c,o.target.dispatchEvent(c),Cl=null}else return s=Wn(o),s!==null&&Eb(s),n.blockedOn=o,!1;s.shift()}return!0}function Ab(n,s,o){Sh(n)&&o.delete(s)}function r2(){Gp=!1,js!==null&&Sh(js)&&(js=null),Ps!==null&&Sh(Ps)&&(Ps=null),Ms!==null&&Sh(Ms)&&(Ms=null),dc.forEach(Ab),fc.forEach(Ab)}function Nh(n,s){n.blockedOn===s&&(n.blockedOn=null,Gp||(Gp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,r2)))}var Ch=null;function Rb(n){Ch!==n&&(Ch=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ch===n&&(Ch=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],f=n[s+2];if(typeof c!="function"){if(Bp(c||o)===null)continue;break}var m=Wn(o);m!==null&&(n.splice(s,3),s-=3,zf(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function $o(n){function s(D){return Nh(D,n)}js!==null&&Nh(js,n),Ps!==null&&Nh(Ps,n),Ms!==null&&Nh(Ms,n),dc.forEach(s),fc.forEach(s);for(var o=0;o<Ls.length;o++){var c=Ls[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ls.length&&(o=Ls[0],o.blockedOn===null);)Cb(o),o.blockedOn===null&&Ls.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[Zt]||null;if(typeof m=="function")x||Rb(o);else if(x){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[Zt]||null)S=x.formAction;else if(Bp(f)!==null)continue}else S=x.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),Rb(o)}}}function kb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function qp(n){this._internalRoot=n}Ah.prototype.render=qp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=gr();_b(o,c,n,s,null,null)},Ah.prototype.unmount=qp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;_b(n.current,2,null,n,null,null),lh(),s[_r]=null}};function Ah(n){this._internalRoot=n}Ah.prototype.unstable_scheduleHydration=function(n){if(n){var s=ga();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Ls.length&&s!==0&&s<Ls[o].priority;o++);Ls.splice(o,0,n),o===0&&Cb(n)}};var Ib=e.version;if(Ib!=="19.2.4")throw Error(i(527,Ib,"19.2.4"));le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(s),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var i2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{Wt=Rh.inject(i2),cn=Rh}catch{}}return yc.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,c="",f=Vy,m=Uy,x=zy;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),s=bb(n,1,!1,null,null,o,c,null,f,m,x,kb),n[_r]=s.current,Tp(n),new qp(s)},yc.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var c=!1,f="",m=Vy,x=Uy,S=zy,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),s=bb(n,1,!0,s,o??null,c,f,D,m,x,S,kb),s.context=xb(null),o=s.current,c=gr(),c=Ci(c),f=ws(c),f.callback=null,Es(o,f,c),o=c,s.current.lanes=o,Lr(s,o),di(s),n[_r]=s.current,Tp(n),new Ah(s)},yc.version="19.2.4",yc}var Bb;function y2(){if(Bb)return $p.exports;Bb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),$p.exports=g2(),$p.exports}var v2=y2();const b2=Td(v2);var Yo={},Xp={exports:{}},Jp,Gb;function x2(){if(Gb)return Jp;Gb=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Jp=r,Jp}var Wp,qb;function _2(){if(qb)return Wp;qb=1;var r=x2();function e(){}function t(){}return t.resetWarningCache=e,Wp=function(){function i(u,p,g,y,b,_){if(_!==r){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}i.isRequired=i;function a(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},Wp}var Hb;function K_(){return Hb||(Hb=1,Xp.exports=_2()()),Xp.exports}var Zp,Fb;function X_(){return Fb||(Fb=1,Zp={L:1,M:0,Q:3,H:2}),Zp}var em,$b;function J_(){return $b||($b=1,em={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),em}var tm,Yb;function w2(){if(Yb)return tm;Yb=1;var r=J_();function e(t){this.mode=r.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var i=0;i<this.data.length;i++)t.put(this.data.charCodeAt(i),8)}},tm=e,tm}var nm,Qb;function E2(){if(Qb)return nm;Qb=1;var r=X_();function e(t,i){this.totalCount=t,this.dataCount=i}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,i){var a=e.getRsBlockTable(t,i);if(a==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+i);for(var l=a.length/3,u=new Array,p=0;p<l;p++)for(var g=a[p*3+0],y=a[p*3+1],b=a[p*3+2],_=0;_<g;_++)u.push(new e(y,b));return u},e.getRsBlockTable=function(t,i){switch(i){case r.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case r.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case r.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case r.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},nm=e,nm}var rm,Kb;function T2(){if(Kb)return rm;Kb=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var i=0;i<t;i++)this.putBit((e>>>t-i-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},rm=r,rm}var im,Xb;function W_(){if(Xb)return im;Xb=1;for(var r={glog:function(t){if(t<1)throw new Error("glog("+t+")");return r.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return r.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)r.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)r.EXP_TABLE[e]=r.EXP_TABLE[e-4]^r.EXP_TABLE[e-5]^r.EXP_TABLE[e-6]^r.EXP_TABLE[e-8];for(var e=0;e<255;e++)r.LOG_TABLE[r.EXP_TABLE[e]]=e;return im=r,im}var sm,Jb;function Z_(){if(Jb)return sm;Jb=1;var r=W_();function e(t,i){if(t.length==null)throw new Error(t.length+"/"+i);for(var a=0;a<t.length&&t[a]==0;)a++;this.num=new Array(t.length-a+i);for(var l=0;l<t.length-a;l++)this.num[l]=t[l+a]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var i=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var l=0;l<t.getLength();l++)i[a+l]^=r.gexp(r.glog(this.get(a))+r.glog(t.get(l)));return new e(i,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var i=r.glog(this.get(0))-r.glog(t.get(0)),a=new Array(this.getLength()),l=0;l<this.getLength();l++)a[l]=this.get(l);for(var l=0;l<t.getLength();l++)a[l]^=r.gexp(r.glog(t.get(l))+i);return new e(a,0).mod(t)}},sm=e,sm}var am,Wb;function S2(){if(Wb)return am;Wb=1;var r=J_(),e=Z_(),t=W_(),i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(l){for(var u=l<<10;a.getBCHDigit(u)-a.getBCHDigit(a.G15)>=0;)u^=a.G15<<a.getBCHDigit(u)-a.getBCHDigit(a.G15);return(l<<10|u)^a.G15_MASK},getBCHTypeNumber:function(l){for(var u=l<<12;a.getBCHDigit(u)-a.getBCHDigit(a.G18)>=0;)u^=a.G18<<a.getBCHDigit(u)-a.getBCHDigit(a.G18);return l<<12|u},getBCHDigit:function(l){for(var u=0;l!=0;)u++,l>>>=1;return u},getPatternPosition:function(l){return a.PATTERN_POSITION_TABLE[l-1]},getMask:function(l,u,p){switch(l){case i.PATTERN000:return(u+p)%2==0;case i.PATTERN001:return u%2==0;case i.PATTERN010:return p%3==0;case i.PATTERN011:return(u+p)%3==0;case i.PATTERN100:return(Math.floor(u/2)+Math.floor(p/3))%2==0;case i.PATTERN101:return u*p%2+u*p%3==0;case i.PATTERN110:return(u*p%2+u*p%3)%2==0;case i.PATTERN111:return(u*p%3+(u+p)%2)%2==0;default:throw new Error("bad maskPattern:"+l)}},getErrorCorrectPolynomial:function(l){for(var u=new e([1],0),p=0;p<l;p++)u=u.multiply(new e([1,t.gexp(p)],0));return u},getLengthInBits:function(l,u){if(1<=u&&u<10)switch(l){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+l)}else if(u<27)switch(l){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+l)}else if(u<41)switch(l){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+l)}else throw new Error("type:"+u)},getLostPoint:function(l){for(var u=l.getModuleCount(),p=0,g=0;g<u;g++)for(var y=0;y<u;y++){for(var b=0,_=l.isDark(g,y),T=-1;T<=1;T++)if(!(g+T<0||u<=g+T))for(var k=-1;k<=1;k++)y+k<0||u<=y+k||T==0&&k==0||_==l.isDark(g+T,y+k)&&b++;b>5&&(p+=3+b-5)}for(var g=0;g<u-1;g++)for(var y=0;y<u-1;y++){var V=0;l.isDark(g,y)&&V++,l.isDark(g+1,y)&&V++,l.isDark(g,y+1)&&V++,l.isDark(g+1,y+1)&&V++,(V==0||V==4)&&(p+=3)}for(var g=0;g<u;g++)for(var y=0;y<u-6;y++)l.isDark(g,y)&&!l.isDark(g,y+1)&&l.isDark(g,y+2)&&l.isDark(g,y+3)&&l.isDark(g,y+4)&&!l.isDark(g,y+5)&&l.isDark(g,y+6)&&(p+=40);for(var y=0;y<u;y++)for(var g=0;g<u-6;g++)l.isDark(g,y)&&!l.isDark(g+1,y)&&l.isDark(g+2,y)&&l.isDark(g+3,y)&&l.isDark(g+4,y)&&!l.isDark(g+5,y)&&l.isDark(g+6,y)&&(p+=40);for(var $=0,y=0;y<u;y++)for(var g=0;g<u;g++)l.isDark(g,y)&&$++;var ee=Math.abs(100*$/u/u-50)/5;return p+=ee*10,p}};return am=a,am}var om,Zb;function N2(){if(Zb)return om;Zb=1;var r=w2(),e=E2(),t=T2(),i=S2(),a=Z_();function l(p,g){this.typeNumber=p,this.errorCorrectLevel=g,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var u=l.prototype;return u.addData=function(p){var g=new r(p);this.dataList.push(g),this.dataCache=null},u.isDark=function(p,g){if(p<0||this.moduleCount<=p||g<0||this.moduleCount<=g)throw new Error(p+","+g);return this.modules[p][g]},u.getModuleCount=function(){return this.moduleCount},u.make=function(){if(this.typeNumber<1){var p=1;for(p=1;p<40;p++){for(var g=e.getRSBlocks(p,this.errorCorrectLevel),y=new t,b=0,_=0;_<g.length;_++)b+=g[_].dataCount;for(var _=0;_<this.dataList.length;_++){var T=this.dataList[_];y.put(T.mode,4),y.put(T.getLength(),i.getLengthInBits(T.mode,p)),T.write(y)}if(y.getLengthInBits()<=b*8)break}this.typeNumber=p}this.makeImpl(!1,this.getBestMaskPattern())},u.makeImpl=function(p,g){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var y=0;y<this.moduleCount;y++){this.modules[y]=new Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++)this.modules[y][b]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(p,g),this.typeNumber>=7&&this.setupTypeNumber(p),this.dataCache==null&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,g)},u.setupPositionProbePattern=function(p,g){for(var y=-1;y<=7;y++)if(!(p+y<=-1||this.moduleCount<=p+y))for(var b=-1;b<=7;b++)g+b<=-1||this.moduleCount<=g+b||(0<=y&&y<=6&&(b==0||b==6)||0<=b&&b<=6&&(y==0||y==6)||2<=y&&y<=4&&2<=b&&b<=4?this.modules[p+y][g+b]=!0:this.modules[p+y][g+b]=!1)},u.getBestMaskPattern=function(){for(var p=0,g=0,y=0;y<8;y++){this.makeImpl(!0,y);var b=i.getLostPoint(this);(y==0||p>b)&&(p=b,g=y)}return g},u.createMovieClip=function(p,g,y){var b=p.createEmptyMovieClip(g,y),_=1;this.make();for(var T=0;T<this.modules.length;T++)for(var k=T*_,V=0;V<this.modules[T].length;V++){var $=V*_,ee=this.modules[T][V];ee&&(b.beginFill(0,100),b.moveTo($,k),b.lineTo($+_,k),b.lineTo($+_,k+_),b.lineTo($,k+_),b.endFill())}return b},u.setupTimingPattern=function(){for(var p=8;p<this.moduleCount-8;p++)this.modules[p][6]==null&&(this.modules[p][6]=p%2==0);for(var g=8;g<this.moduleCount-8;g++)this.modules[6][g]==null&&(this.modules[6][g]=g%2==0)},u.setupPositionAdjustPattern=function(){for(var p=i.getPatternPosition(this.typeNumber),g=0;g<p.length;g++)for(var y=0;y<p.length;y++){var b=p[g],_=p[y];if(this.modules[b][_]==null)for(var T=-2;T<=2;T++)for(var k=-2;k<=2;k++)T==-2||T==2||k==-2||k==2||T==0&&k==0?this.modules[b+T][_+k]=!0:this.modules[b+T][_+k]=!1}},u.setupTypeNumber=function(p){for(var g=i.getBCHTypeNumber(this.typeNumber),y=0;y<18;y++){var b=!p&&(g>>y&1)==1;this.modules[Math.floor(y/3)][y%3+this.moduleCount-8-3]=b}for(var y=0;y<18;y++){var b=!p&&(g>>y&1)==1;this.modules[y%3+this.moduleCount-8-3][Math.floor(y/3)]=b}},u.setupTypeInfo=function(p,g){for(var y=this.errorCorrectLevel<<3|g,b=i.getBCHTypeInfo(y),_=0;_<15;_++){var T=!p&&(b>>_&1)==1;_<6?this.modules[_][8]=T:_<8?this.modules[_+1][8]=T:this.modules[this.moduleCount-15+_][8]=T}for(var _=0;_<15;_++){var T=!p&&(b>>_&1)==1;_<8?this.modules[8][this.moduleCount-_-1]=T:_<9?this.modules[8][15-_-1+1]=T:this.modules[8][15-_-1]=T}this.modules[this.moduleCount-8][8]=!p},u.mapData=function(p,g){for(var y=-1,b=this.moduleCount-1,_=7,T=0,k=this.moduleCount-1;k>0;k-=2)for(k==6&&k--;;){for(var V=0;V<2;V++)if(this.modules[b][k-V]==null){var $=!1;T<p.length&&($=(p[T]>>>_&1)==1);var ee=i.getMask(g,b,k-V);ee&&($=!$),this.modules[b][k-V]=$,_--,_==-1&&(T++,_=7)}if(b+=y,b<0||this.moduleCount<=b){b-=y,y=-y;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(p,g,y){for(var b=e.getRSBlocks(p,g),_=new t,T=0;T<y.length;T++){var k=y[T];_.put(k.mode,4),_.put(k.getLength(),i.getLengthInBits(k.mode,p)),k.write(_)}for(var V=0,T=0;T<b.length;T++)V+=b[T].dataCount;if(_.getLengthInBits()>V*8)throw new Error("code length overflow. ("+_.getLengthInBits()+">"+V*8+")");for(_.getLengthInBits()+4<=V*8&&_.put(0,4);_.getLengthInBits()%8!=0;)_.putBit(!1);for(;!(_.getLengthInBits()>=V*8||(_.put(l.PAD0,8),_.getLengthInBits()>=V*8));)_.put(l.PAD1,8);return l.createBytes(_,b)},l.createBytes=function(p,g){for(var y=0,b=0,_=0,T=new Array(g.length),k=new Array(g.length),V=0;V<g.length;V++){var $=g[V].dataCount,ee=g[V].totalCount-$;b=Math.max(b,$),_=Math.max(_,ee),T[V]=new Array($);for(var se=0;se<T[V].length;se++)T[V][se]=255&p.buffer[se+y];y+=$;var he=i.getErrorCorrectPolynomial(ee),me=new a(T[V],he.getLength()-1),ye=me.mod(he);k[V]=new Array(he.getLength()-1);for(var se=0;se<k[V].length;se++){var Ie=se+ye.getLength()-k[V].length;k[V][se]=Ie>=0?ye.get(Ie):0}}for(var Ee=0,se=0;se<g.length;se++)Ee+=g[se].totalCount;for(var A=new Array(Ee),C=0,se=0;se<b;se++)for(var V=0;V<g.length;V++)se<T[V].length&&(A[C++]=T[V][se]);for(var se=0;se<_;se++)for(var V=0;V<g.length;V++)se<k[V].length&&(A[C++]=k[V][se]);return A},om=l,om}var kh={},ex;function C2(){if(ex)return kh;ex=1,Object.defineProperty(kh,"__esModule",{value:!0});var r=Object.assign||function(y){for(var b=1;b<arguments.length;b++){var _=arguments[b];for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(y[T]=_[T])}return y},e=K_(),t=l(e),i=Wc(),a=l(i);function l(y){return y&&y.__esModule?y:{default:y}}function u(y,b){var _={};for(var T in y)b.indexOf(T)>=0||Object.prototype.hasOwnProperty.call(y,T)&&(_[T]=y[T]);return _}var p={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},g=(0,i.forwardRef)(function(y,b){var _=y.bgColor,T=y.bgD,k=y.fgD,V=y.fgColor,$=y.size,ee=y.title,se=y.viewBoxSize,he=y.xmlns,me=he===void 0?"http://www.w3.org/2000/svg":he,ye=u(y,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",r({},ye,{height:$,ref:b,viewBox:"0 0 "+se+" "+se,width:$,xmlns:me}),ee?a.default.createElement("title",null,ee):null,a.default.createElement("path",{d:T,fill:_}),a.default.createElement("path",{d:k,fill:V}))});return g.displayName="QRCodeSvg",g.propTypes=p,kh.default=g,kh}var tx;function A2(){if(tx)return Yo;tx=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.QRCode=void 0;var r=Object.assign||function($){for(var ee=1;ee<arguments.length;ee++){var se=arguments[ee];for(var he in se)Object.prototype.hasOwnProperty.call(se,he)&&($[he]=se[he])}return $},e=K_(),t=_(e),i=X_(),a=_(i),l=N2(),u=_(l),p=Wc(),g=_(p),y=C2(),b=_(y);function _($){return $&&$.__esModule?$:{default:$}}function T($,ee){var se={};for(var he in $)ee.indexOf(he)>=0||Object.prototype.hasOwnProperty.call($,he)&&(se[he]=$[he]);return se}var k={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},V=(0,p.forwardRef)(function($,ee){var se=$.bgColor,he=se===void 0?"#FFFFFF":se,me=$.fgColor,ye=me===void 0?"#000000":me,Ie=$.level,Ee=Ie===void 0?"L":Ie,A=$.size,C=A===void 0?256:A,R=$.value,L=T($,["bgColor","fgColor","level","size","value"]),O=new u.default(-1,a.default[Ee]);O.addData(R),O.make();var j=O.modules;return g.default.createElement(b.default,r({},L,{bgColor:he,bgD:j.map(function(I,nt){return I.map(function(mt,Q){return mt?"":"M "+Q+" "+nt+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ye,fgD:j.map(function(I,nt){return I.map(function(mt,Q){return mt?"M "+Q+" "+nt+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:ee,size:C,viewBoxSize:j.length}))});return Yo.QRCode=V,V.displayName="QRCode",V.propTypes=k,Yo.default=V,Yo}var R2=A2();const k2=Td(R2);var Lt=(r=>(r.READY="ready to sing",r.STANDBY="standby",r))(Lt||{}),ut=(r=>(r.SINGING="Singing",r.LISTENING="Listening",r))(ut||{}),Le=(r=>(r.PENDING="Pending Approval",r.APPROVED="Approved",r.DONE="Done",r))(Le||{}),pi=(r=>(r.FRESH_MEAT="FRESH_MEAT",r.FAIR_ROTATION="FAIR_ROTATION",r.FIFO="FIFO",r.OLDEST_MEMBER="OLDEST_MEMBER",r.RANDOM="RANDOM",r))(pi||{});class I2{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return D2(e).buffer}}function D2(r){let e=0;for(const a of r)e+=a.byteLength;const t=new Uint8Array(e);let i=0;for(const a of r){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);t.set(l,i),i+=a.byteLength}return t}function e1(r){return new O2(r).unpack()}function t1(r){const e=new j2,t=e.pack(r);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class O2{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let i=0,a="",l,u;for(;i<e;)l=t[i],l<160?(u=l,i++):(l^192)<32?(u=(l&31)<<6|t[i+1]&63,i+=2):(l^224)<16?(u=(l&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=3):(u=(l&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=4),a+=String.fromCodePoint(u);return this.index+=e,a}unpack_array(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=this.unpack();return t}unpack_map(e){const t={};for(let i=0;i<e;i++){const a=this.unpack();t[a]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,i=(e>>23&255)-127,a=e&8388607|8388608;return(t===0?1:-1)*a*2**(i-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),i=e>>31,a=(e>>20&2047)-1023,u=(e&1048575|1048576)*2**(a-20)+t*2**(a-52);return(i===0?1:-1)*u}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class j2{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const i=this.pack_array(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const i=e;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const i=this.pack_object(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),i=t.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const i=a=>{if(a<t){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>i(a+1)):i(a+1)}};return i(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),a=e/2**i-1,l=Math.floor(a*2**52),u=2**32,p=t<<31|i+1023<<20|l/u&1048575,g=l%u;this._bufferBuilder.append(203),this.pack_int32(p),this.pack_int32(g)}pack_object(e){const t=Object.keys(e),i=t.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const a=l=>{if(l<t.length){const u=t[l];if(e.hasOwnProperty(u)){this.pack(u);const p=this.pack(e[u]);if(p instanceof Promise)return p.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new I2,this._textEncoder=new TextEncoder}}let n1=!0,r1=!0;function Ec(r,e,t){const i=r.match(e);return i&&i.length>=t&&parseFloat(i[t],10)}function Wa(r,e,t){if(!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype,a=i.addEventListener;i.addEventListener=function(u,p){if(u!==e)return a.apply(this,arguments);const g=y=>{const b=t(y);b&&(p.handleEvent?p.handleEvent(b):p(b))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(p,g),a.apply(this,[u,g])};const l=i.removeEventListener;i.removeEventListener=function(u,p){if(u!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(p))return l.apply(this,arguments);const g=this._eventMap[e].get(p);return this._eventMap[e].delete(p),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[u,g])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function P2(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(n1=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function M2(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(r1=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function i1(){if(typeof window=="object"){if(n1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function hg(r,e){r1&&console.warn(r+" is deprecated, please use "+e+" instead.")}function L2(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=r;if(t.userAgentData&&t.userAgentData.brands){const i=t.userAgentData.brands.find(a=>a.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Ec(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Ec(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Ec(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,e._safariVersion=Ec(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function nx(r){return Object.prototype.toString.call(r)==="[object Object]"}function s1(r){return nx(r)?Object.keys(r).reduce(function(e,t){const i=nx(r[t]),a=i?s1(r[t]):r[t],l=i&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[t]:a})},{}):r}function Sm(r,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?Sm(r,r.get(e[i]),t):i.endsWith("Ids")&&e[i].forEach(a=>{Sm(r,r.get(a),t)})}))}function rx(r,e,t){const i=t?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&l.push(u)}),l.forEach(u=>{r.forEach(p=>{p.type===i&&p.trackId===u.id&&Sm(r,p,a)})}),a}const ix=i1;function a1(r,e){const t=r&&r.navigator;if(!t.mediaDevices)return;const i=function(p){if(typeof p!="object"||p.mandatory||p.optional)return p;const g={};return Object.keys(p).forEach(y=>{if(y==="require"||y==="advanced"||y==="mediaSource")return;const b=typeof p[y]=="object"?p[y]:{ideal:p[y]};b.exact!==void 0&&typeof b.exact=="number"&&(b.min=b.max=b.exact);const _=function(T,k){return T?T+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(b.ideal!==void 0){g.optional=g.optional||[];let T={};typeof b.ideal=="number"?(T[_("min",y)]=b.ideal,g.optional.push(T),T={},T[_("max",y)]=b.ideal,g.optional.push(T)):(T[_("",y)]=b.ideal,g.optional.push(T))}b.exact!==void 0&&typeof b.exact!="number"?(g.mandatory=g.mandatory||{},g.mandatory[_("",y)]=b.exact):["min","max"].forEach(T=>{b[T]!==void 0&&(g.mandatory=g.mandatory||{},g.mandatory[_(T,y)]=b[T])})}),p.advanced&&(g.optional=(g.optional||[]).concat(p.advanced)),g},a=function(p,g){if(e.version>=61)return g(p);if(p=JSON.parse(JSON.stringify(p)),p&&typeof p.audio=="object"){const y=function(b,_,T){_ in b&&!(T in b)&&(b[T]=b[_],delete b[_])};p=JSON.parse(JSON.stringify(p)),y(p.audio,"autoGainControl","googAutoGainControl"),y(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=i(p.audio)}if(p&&typeof p.video=="object"){let y=p.video.facingMode;y=y&&(typeof y=="object"?y:{ideal:y});const b=e.version<66;if(y&&(y.exact==="user"||y.exact==="environment"||y.ideal==="user"||y.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!b)){delete p.video.facingMode;let _;if(y.exact==="environment"||y.ideal==="environment"?_=["back","rear"]:(y.exact==="user"||y.ideal==="user")&&(_=["front"]),_)return t.mediaDevices.enumerateDevices().then(T=>{T=T.filter(V=>V.kind==="videoinput");let k=T.find(V=>_.some($=>V.label.toLowerCase().includes($)));return!k&&T.length&&_.includes("back")&&(k=T[T.length-1]),k&&(p.video.deviceId=y.exact?{exact:k.deviceId}:{ideal:k.deviceId}),p.video=i(p.video),ix("chrome: "+JSON.stringify(p)),g(p)})}p.video=i(p.video)}return ix("chrome: "+JSON.stringify(p)),g(p)},l=function(p){return e.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(p,g,y){a(p,b=>{t.webkitGetUserMedia(b,g,_=>{y&&y(l(_))})})};if(t.getUserMedia=u.bind(t),t.mediaDevices.getUserMedia){const p=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(g){return a(g,y=>p(y).then(b=>{if(y.audio&&!b.getAudioTracks().length||y.video&&!b.getVideoTracks().length)throw b.getTracks().forEach(_=>{_.stop()}),new DOMException("","NotFoundError");return b},b=>Promise.reject(l(b))))}}}function o1(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function l1(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(p=>p.track&&p.track.id===a.track.id):l={track:a.track};const u=new Event("track");u.track=a.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[i.stream],this.dispatchEvent(u)}),i.stream.getTracks().forEach(a=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(p=>p.track&&p.track.id===a.id):l={track:a};const u=new Event("track");u.track=a,u.receiver=l,u.transceiver={receiver:l},u.streams=[i.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Wa(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function c1(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(p,g){let y=a.apply(this,arguments);return y||(y=e(this,p),this._senders.push(y)),y};const l=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(p){l.apply(this,arguments);const g=this._senders.indexOf(p);g!==-1&&this._senders.splice(g,1)}}const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],t.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(u=>{const p=this._senders.find(g=>g.track===u);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function u1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const l=t.apply(this,[]);return l.forEach(u=>u._pc=this),l});const i=r.RTCPeerConnection.prototype.addTrack;i&&(r.RTCPeerConnection.prototype.addTrack=function(){const l=i.apply(this,arguments);return l._pc=this,l}),r.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>rx(u,l.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(l=>l._pc=this),a}),Wa(r,"track",i=>(i.receiver._pc=i.srcElement,i)),r.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>rx(l,a.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const i=arguments[0];let a,l,u;return this.getSenders().forEach(p=>{p.track===i&&(a?u=!0:a=p)}),this.getReceivers().forEach(p=>(p.track===i&&(l?u=!0:l=p),p.track===i)),u||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function h1(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,p){if(!p)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const g=e.apply(this,arguments);return this._shimmedLocalStreams[p.id]?this._shimmedLocalStreams[p.id].indexOf(g)===-1&&this._shimmedLocalStreams[p.id].push(g):this._shimmedLocalStreams[p.id]=[p,g],g};const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(y=>{if(this.getSenders().find(_=>_.track===y))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();t.apply(this,arguments);const g=this.getSenders().filter(y=>p.indexOf(y)===-1);this._shimmedLocalStreams[u.id]=[u].concat(g)};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],i.apply(this,arguments)};const a=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const g=this._shimmedLocalStreams[p].indexOf(u);g!==-1&&this._shimmedLocalStreams[p].splice(g,1),this._shimmedLocalStreams[p].length===1&&delete this._shimmedLocalStreams[p]}),a.apply(this,arguments)}}function d1(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return h1(r);const t=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const b=t.apply(this);return this._reverseStreams=this._reverseStreams||{},b.map(_=>this._reverseStreams[_.id])};const i=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(b){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},b.getTracks().forEach(_=>{if(this.getSenders().find(k=>k.track===_))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[b.id]){const _=new r.MediaStream(b.getTracks());this._streams[b.id]=_,this._reverseStreams[_.id]=b,b=_}i.apply(this,[b])};const a=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(b){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[b.id]||b]),delete this._reverseStreams[this._streams[b.id]?this._streams[b.id].id:b.id],delete this._streams[b.id]},r.RTCPeerConnection.prototype.addTrack=function(b,_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const T=[].slice.call(arguments,1);if(T.length!==1||!T[0].getTracks().find($=>$===b))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find($=>$.track===b))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const V=this._streams[_.id];if(V)V.addTrack(b),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const $=new r.MediaStream([b]);this._streams[_.id]=$,this._reverseStreams[$.id]=_,this.addStream($)}return this.getSenders().find($=>$.track===b)};function l(y,b){let _=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(T=>{const k=y._reverseStreams[T],V=y._streams[k.id];_=_.replace(new RegExp(V.id,"g"),k.id)}),new RTCSessionDescription({type:b.type,sdp:_})}function u(y,b){let _=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(T=>{const k=y._reverseStreams[T],V=y._streams[k.id];_=_.replace(new RegExp(k.id,"g"),V.id)}),new RTCSessionDescription({type:b.type,sdp:_})}["createOffer","createAnswer"].forEach(function(y){const b=r.RTCPeerConnection.prototype[y],_={[y](){const T=arguments;return arguments.length&&typeof arguments[0]=="function"?b.apply(this,[V=>{const $=l(this,V);T[0].apply(null,[$])},V=>{T[1]&&T[1].apply(null,V)},arguments[2]]):b.apply(this,arguments).then(V=>l(this,V))}};r.RTCPeerConnection.prototype[y]=_[y]});const p=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?p.apply(this,arguments):(arguments[0]=u(this,arguments[0]),p.apply(this,arguments))};const g=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const y=g.get.apply(this);return y.type===""?y:l(this,y)}}),r.RTCPeerConnection.prototype.removeTrack=function(b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!b._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(b._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let T;Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find($=>b.track===$)&&(T=this._streams[k])}),T&&(T.getTracks().length===1?this.removeStream(this._reverseStreams[T.id]):T.removeTrack(b.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Nm(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const i=r.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};r.RTCPeerConnection.prototype[t]=a[t]})}function f1(r,e){Wa(r,"negotiationneeded",t=>{const i=t.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return t})}const sx=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:f1,shimAddTrackRemoveTrack:d1,shimAddTrackRemoveTrackWithNative:h1,shimGetSendersWithDtmf:c1,shimGetUserMedia:a1,shimMediaStream:o1,shimOnTrack:l1,shimPeerConnection:Nm,shimSenderReceiverGetStats:u1},Symbol.toStringTag,{value:"Module"}));function p1(r,e){const t=r&&r.navigator,i=r&&r.MediaStreamTrack;if(t.getUserMedia=function(a,l,u){hg("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(l,u)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(u,p,g){p in u&&!(g in u)&&(u[g]=u[p],delete u[p])},l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u.audio,"autoGainControl","mozAutoGainControl"),a(u.audio,"noiseSuppression","mozNoiseSuppression")),l(u)},i&&i.prototype.getSettings){const u=i.prototype.getSettings;i.prototype.getSettings=function(){const p=u.apply(this,arguments);return a(p,"mozAutoGainControl","autoGainControl"),a(p,"mozNoiseSuppression","noiseSuppression"),p}}if(i&&i.prototype.applyConstraints){const u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(p){return this.kind==="audio"&&typeof p=="object"&&(p=JSON.parse(JSON.stringify(p)),a(p,"autoGainControl","mozAutoGainControl"),a(p,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[p])}}}}function V2(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(i)})}function m1(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Cm(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=r.RTCPeerConnection.prototype[a],u={[a](){return arguments[0]=new(a==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};r.RTCPeerConnection.prototype[a]=u[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[l,u,p]=arguments;return i.apply(this,[l||null]).then(g=>{if(e.version<53&&!u)try{g.forEach(y=>{y.type=t[y.type]||y.type})}catch(y){if(y.name!=="TypeError")throw y;g.forEach((b,_)=>{g.set(_,Object.assign({},b,{type:t[b.type]||b.type}))})}return g}).then(u,p)}}function g1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const t=r.RTCPeerConnection.prototype.addTrack;t&&(r.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function y1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i}),Wa(r,"track",t=>(t.receiver._pc=t.srcElement,t)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function v1(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){hg("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&t.getTracks().includes(i.track)&&this.removeTrack(i)})})}function b1(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function x1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const a=i.length>0;a&&i.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:u}=l,p=u.getParameters();(!("encodings"in p)||p.encodings.length===1&&Object.keys(p.encodings[0]).length===0)&&(p.encodings=i,u.sendEncodings=i,this.setParametersPromises.push(u.setParameters(p).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function _1(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function w1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function E1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const ax=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:x1,shimCreateAnswer:E1,shimCreateOffer:w1,shimGetDisplayMedia:V2,shimGetParameters:_1,shimGetUserMedia:p1,shimOnTrack:m1,shimPeerConnection:Cm,shimRTCDataChannel:b1,shimReceiverGetStats:y1,shimRemoveStream:v1,shimSenderGetStats:g1},Symbol.toStringTag,{value:"Module"}));function T1(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(a=>e.call(this,a,i)),i.getVideoTracks().forEach(a=>e.call(this,a,i))},r.RTCPeerConnection.prototype.addTrack=function(i,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(t);if(i===-1)return;this._localStreams.splice(i,1);const a=t.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function S1(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(l)>=0)return;i._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,i.dispatchEvent(u)})}),e.apply(i,arguments)}}}function N1(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,t=e.createOffer,i=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(y,b){const _=arguments.length>=2?arguments[2]:arguments[0],T=t.apply(this,[_]);return b?(T.then(y,b),Promise.resolve()):T},e.createAnswer=function(y,b){const _=arguments.length>=2?arguments[2]:arguments[0],T=i.apply(this,[_]);return b?(T.then(y,b),Promise.resolve()):T};let p=function(g,y,b){const _=a.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_};e.setLocalDescription=p,p=function(g,y,b){const _=l.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_},e.setRemoteDescription=p,p=function(g,y,b){const _=u.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_},e.addIceCandidate=p}function C1(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,i=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=a=>i(A1(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,a,l){e.mediaDevices.getUserMedia(i).then(a,l)}).bind(e))}function A1(r){return r&&r.video!==void 0?Object.assign({},r,{video:s1(r.video)}):r}function R1(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const l=[];for(let u=0;u<i.iceServers.length;u++){let p=i.iceServers[u];p.urls===void 0&&p.url?(hg("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,l.push(p)):l.push(i.iceServers[u])}i.iceServers=l}return new e(i,a)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function k1(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function I1(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):i.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function D1(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const ox=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:D1,shimCallbacksAPI:N1,shimConstraints:A1,shimCreateOfferLegacy:I1,shimGetUserMedia:C1,shimLocalStreamsAPI:T1,shimRTCIceServerUrls:R1,shimRemoteStreamsAPI:S1,shimTrackEventTransceiver:k1},Symbol.toStringTag,{value:"Module"}));var lm={exports:{}},lx;function U2(){return lx||(lx=1,(function(r){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(t){return t.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(t){const i=e.splitSections(t);return i&&i[0]},e.getMediaSections=function(t){const i=e.splitSections(t);return i.shift(),i},e.matchPrefix=function(t,i){return e.splitLines(t).filter(a=>a.indexOf(i)===0)},e.parseCandidate=function(t){let i;t.indexOf("a=candidate:")===0?i=t.substring(12).split(" "):i=t.substring(10).split(" ");const a={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let l=8;l<i.length;l+=2)switch(i[l]){case"raddr":a.relatedAddress=i[l+1];break;case"rport":a.relatedPort=parseInt(i[l+1],10);break;case"tcptype":a.tcpType=i[l+1];break;case"ufrag":a.ufrag=i[l+1],a.usernameFragment=i[l+1];break;default:a[i[l]]===void 0&&(a[i[l]]=i[l+1]);break}return a},e.writeCandidate=function(t){const i=[];i.push(t.foundation);const a=t.component;a==="rtp"?i.push(1):a==="rtcp"?i.push(2):i.push(a),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);const l=t.type;return i.push("typ"),i.push(l),l!=="host"&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let i=t.substring(9).split(" ");const a={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),a.name=i[0],a.clockRate=parseInt(i[1],10),a.channels=i.length===3?parseInt(i[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(t){let i=t.payloadType;t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(t){const i=t.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const i={};let a;const l=t.substring(t.indexOf(" ")+1).split(";");for(let u=0;u<l.length;u++)a=l[u].trim().split("="),i[a[0].trim()]=a[1];return i},e.writeFmtp=function(t){let i="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const l=[];Object.keys(t.parameters).forEach(u=>{t.parameters[u]!==void 0?l.push(u+"="+t.parameters[u]):l.push(u)}),i+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return i},e.parseRtcpFb=function(t){const i=t.substring(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(t){let i="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(l=>{i+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(t){const i=t.indexOf(" "),a={ssrc:parseInt(t.substring(7,i),10)},l=t.indexOf(":",i);return l>-1?(a.attribute=t.substring(i+1,l),a.value=t.substring(l+1)):a.attribute=t.substring(i+1),a},e.parseSsrcGroup=function(t){const i=t.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(a=>parseInt(a,10))}},e.getMid=function(t){const i=e.matchPrefix(t,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(t){const i=t.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:e.matchPrefix(t+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,i){let a="a=setup:"+i+`\r
`;return t.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(t){const i=t.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const i=t.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,i){return e.matchPrefix(t+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,i){const a=e.matchPrefix(t+i,"a=ice-ufrag:")[0],l=e.matchPrefix(t+i,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(t){let i="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(t){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(t)[0].split(" ");i.profile=l[2];for(let p=3;p<l.length;p++){const g=l[p],y=e.matchPrefix(t,"a=rtpmap:"+g+" ")[0];if(y){const b=e.parseRtpMap(y),_=e.matchPrefix(t,"a=fmtp:"+g+" ");switch(b.parameters=_.length?e.parseFmtp(_[0]):{},b.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+g+" ").map(e.parseRtcpFb),i.codecs.push(b),b.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(b.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(p=>{i.headerExtensions.push(e.parseExtmap(p))});const u=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(p=>{u.forEach(g=>{p.rtcpFeedback.find(b=>b.type===g.type&&b.parameter===g.parameter)||p.rtcpFeedback.push(g)})}),i},e.writeRtpDescription=function(t,i){let a="";a+="m="+t+" ",a+=i.codecs.length>0?"9":"0",a+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=i.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(u=>{a+=e.writeRtpMap(u),a+=e.writeFmtp(u),a+=e.writeRtcpFb(u)});let l=0;return i.codecs.forEach(u=>{u.maxptime>l&&(l=u.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(u=>{a+=e.writeExtmap(u)}),a},e.parseRtpEncodingParameters=function(t){const i=[],a=e.parseRtpParameters(t),l=a.fecMechanisms.indexOf("RED")!==-1,u=a.fecMechanisms.indexOf("ULPFEC")!==-1,p=e.matchPrefix(t,"a=ssrc:").map(T=>e.parseSsrcMedia(T)).filter(T=>T.attribute==="cname"),g=p.length>0&&p[0].ssrc;let y;const b=e.matchPrefix(t,"a=ssrc-group:FID").map(T=>T.substring(17).split(" ").map(V=>parseInt(V,10)));b.length>0&&b[0].length>1&&b[0][0]===g&&(y=b[0][1]),a.codecs.forEach(T=>{if(T.name.toUpperCase()==="RTX"&&T.parameters.apt){let k={ssrc:g,codecPayloadType:parseInt(T.parameters.apt,10)};g&&y&&(k.rtx={ssrc:y}),i.push(k),l&&(k=JSON.parse(JSON.stringify(k)),k.fec={ssrc:g,mechanism:u?"red+ulpfec":"red"},i.push(k))}}),i.length===0&&g&&i.push({ssrc:g});let _=e.matchPrefix(t,"b=");return _.length&&(_[0].indexOf("b=TIAS:")===0?_=parseInt(_[0].substring(7),10):_[0].indexOf("b=AS:")===0?_=parseInt(_[0].substring(5),10)*1e3*.95-2e3*8:_=void 0,i.forEach(T=>{T.maxBitrate=_})),i},e.parseRtcpParameters=function(t){const i={},a=e.matchPrefix(t,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname")[0];a&&(i.cname=a.value,i.ssrc=a.ssrc);const l=e.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=l.length>0,i.compound=l.length===0;const u=e.matchPrefix(t,"a=rtcp-mux");return i.mux=u.length>0,i},e.writeRtcpParameters=function(t){let i="";return t.reducedSize&&(i+=`a=rtcp-rsize\r
`),t.mux&&(i+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(i+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),i},e.parseMsid=function(t){let i;const a=e.matchPrefix(t,"a=msid:");if(a.length===1)return i=a[0].substring(7).split(" "),{stream:i[0],track:i[1]};const l=e.matchPrefix(t,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(l.length>0)return i=l[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(t){const i=e.parseMLine(t),a=e.matchPrefix(t,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const u=e.matchPrefix(t,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:i.fmt,maxMessageSize:l};const p=e.matchPrefix(t,"a=sctpmap:");if(p.length>0){const g=p[0].substring(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:l}}},e.writeSctpDescription=function(t,i){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&a.push("a=max-message-size:"+i.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,i,a){let l;const u=i!==void 0?i:2;return t?l=t:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,i){const a=e.splitLines(t);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const a=e.splitLines(t)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(t){const a=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const i=e.splitLines(t);for(let a=0;a<i.length;a++)if(i[a].length<2||i[a].charAt(1)!=="=")return!1;return!0},r.exports=e})(lm)),lm.exports}var O1=U2();const el=Td(O1),z2=o2({__proto__:null,default:el},[O1]);function Lh(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const a=new e(i),l=el.parseCandidate(i.candidate);for(const u in l)u in a||Object.defineProperty(a,u,{value:l[u]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(i)},r.RTCIceCandidate.prototype=e.prototype,Wa(r,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new r.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Am(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||Wa(r,"icecandidate",e=>{if(e.candidate){const t=el.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Vh(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(p){if(!p||!p.sdp)return!1;const g=el.splitSections(p.sdp);return g.shift(),g.some(y=>{const b=el.parseMLine(y);return b&&b.kind==="application"&&b.protocol.indexOf("SCTP")!==-1})},i=function(p){const g=p.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(g===null||g.length<2)return-1;const y=parseInt(g[1],10);return y!==y?-1:y},a=function(p){let g=65536;return e.browser==="firefox"&&(e.version<57?p===-1?g=16384:g=2147483637:e.version<60?g=e.version===57?65535:65536:g=2147483637),g},l=function(p,g){let y=65536;e.browser==="firefox"&&e.version===57&&(y=65535);const b=el.matchPrefix(p.sdp,"a=max-message-size:");return b.length>0?y=parseInt(b[0].substring(19),10):e.browser==="firefox"&&g!==-1&&(y=2147483637),y},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:g}=this.getConfiguration();g==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const g=i(arguments[0]),y=a(g),b=l(arguments[0],g);let _;y===0&&b===0?_=Number.POSITIVE_INFINITY:y===0||b===0?_=Math.max(y,b):_=Math.min(y,b);const T={};Object.defineProperty(T,"maxMessageSize",{get(){return _}}),this._sctp=T}return u.apply(this,arguments)}}function Uh(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(i,a){const l=i.send;i.send=function(){const p=arguments[0],g=p.length||p.size||p.byteLength;if(i.readyState==="open"&&a.sctp&&g>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(i,arguments)}}const t=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return e(a,this),a},Wa(r,"datachannel",i=>(e(i.channel,i.target),i))}function Rm(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const i=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const u=new Event("connectionstatechange",a);l.dispatchEvent(u)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function km(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&a instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return t.apply(this,arguments)}}function zh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Bh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>t.apply(this,[u]))})}const B2=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:km,shimAddIceCandidateNullOrEmpty:zh,shimConnectionState:Rm,shimMaxMessageSize:Vh,shimParameterlessSetLocalDescription:Bh,shimRTCIceCandidate:Lh,shimRTCIceCandidateRelayProtocol:Am,shimSendThrowTypeError:Uh},Symbol.toStringTag,{value:"Module"}));function G2({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=i1,i=L2(r),a={browserDetails:i,commonShim:B2,extractVersion:Ec,disableLog:P2,disableWarnings:M2,sdp:z2};switch(i.browser){case"chrome":if(!sx||!Nm||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(i.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=sx,zh(r,i),Bh(r),a1(r,i),o1(r),Nm(r,i),l1(r),d1(r,i),c1(r),u1(r),f1(r,i),Lh(r),Am(r),Rm(r),Vh(r,i),Uh(r),km(r,i);break;case"firefox":if(!ax||!Cm||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=ax,zh(r,i),Bh(r),p1(r,i),Cm(r,i),m1(r),v1(r),g1(r),y1(r),b1(r),x1(r),_1(r),w1(r),E1(r),Lh(r),Rm(r),Vh(r,i),Uh(r);break;case"safari":if(!ox||!e.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=ox,zh(r,i),Bh(r),R1(r),I1(r),N1(r),T1(r),S1(r),k1(r),C1(r),D1(r),Lh(r),Am(r),Vh(r,i),Uh(r),km(r,i);break;default:t("Unsupported browser!");break}return a}const cx=G2({window:typeof window>"u"?void 0:window});function Za(r,e,t,i){Object.defineProperty(r,e,{get:t,set:i,enumerable:!0,configurable:!0})}class j1{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],i=e.byteLength,a=Math.ceil(i/this.chunkedMTU);let l=0,u=0;for(;u<i;){const p=Math.min(i,u+this.chunkedMTU),g=e.slice(u,p),y={__peerData:this._dataCount,n:l,data:g,total:a};t.push(y),u=p,l++}return this._dataCount++,t}}}function q2(r){let e=0;for(const a of r)e+=a.byteLength;const t=new Uint8Array(e);let i=0;for(const a of r)t.set(a,i),i+=a.byteLength;return t}const cm=cx.default||cx,vc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?e>=this.minChromeVersion:r==="firefox"?e>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return cm.browserDetails.browser}getVersion(){return cm.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),e=cm.browserDetails.version||0;if(r==="chrome"&&e<this.minChromeVersion)return!1;if(r==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,i=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),i=!0}catch{}finally{t&&t.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},H2=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),P1=()=>Math.random().toString(36).slice(2),ux={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class F2 extends j1{noop(){}blobToArrayBuffer(e,t){const i=new FileReader;return i.onload=function(a){a.target&&t(a.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=ux,this.browser=vc.getBrowser(),this.browserVersion=vc.getVersion(),this.pack=t1,this.unpack=e1,this.supports=(function(){const t={browser:vc.isBrowserSupported(),webRTC:vc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let i;try{i=new RTCPeerConnection(ux),t.audioVideo=!0;let a;try{a=i.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!a.ordered;try{a.binaryType="blob",t.binaryBlob=!vc.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{i&&i.close()}return t})(),this.validateId=H2,this.randomToken=P1}}const sr=new F2,$2="PeerJS: ";class Y2{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const i=[$2,...t];for(const a in i)i[a]instanceof Error&&(i[a]="("+i[a].name+") "+i[a].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var xe=new Y2,dg={},Q2=Object.prototype.hasOwnProperty,qn="~";function zc(){}Object.create&&(zc.prototype=Object.create(null),new zc().__proto__||(qn=!1));function K2(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function M1(r,e,t,i,a){if(typeof t!="function")throw new TypeError("The listener must be a function");var l=new K2(t,i||r,a),u=qn?qn+e:e;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],l]:r._events[u].push(l):(r._events[u]=l,r._eventsCount++),r}function Gh(r,e){--r._eventsCount===0?r._events=new zc:delete r._events[e]}function Ln(){this._events=new zc,this._eventsCount=0}Ln.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)Q2.call(t,i)&&e.push(qn?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Ln.prototype.listeners=function(e){var t=qn?qn+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,l=i.length,u=new Array(l);a<l;a++)u[a]=i[a].fn;return u};Ln.prototype.listenerCount=function(e){var t=qn?qn+e:e,i=this._events[t];return i?i.fn?1:i.length:0};Ln.prototype.emit=function(e,t,i,a,l,u){var p=qn?qn+e:e;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,b,_;if(g.fn){switch(g.once&&this.removeListener(e,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,t),!0;case 3:return g.fn.call(g.context,t,i),!0;case 4:return g.fn.call(g.context,t,i,a),!0;case 5:return g.fn.call(g.context,t,i,a,l),!0;case 6:return g.fn.call(g.context,t,i,a,l,u),!0}for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];g.fn.apply(g.context,b)}else{var T=g.length,k;for(_=0;_<T;_++)switch(g[_].once&&this.removeListener(e,g[_].fn,void 0,!0),y){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,t);break;case 3:g[_].fn.call(g[_].context,t,i);break;case 4:g[_].fn.call(g[_].context,t,i,a);break;default:if(!b)for(k=1,b=new Array(y-1);k<y;k++)b[k-1]=arguments[k];g[_].fn.apply(g[_].context,b)}}return!0};Ln.prototype.on=function(e,t,i){return M1(this,e,t,i,!1)};Ln.prototype.once=function(e,t,i){return M1(this,e,t,i,!0)};Ln.prototype.removeListener=function(e,t,i,a){var l=qn?qn+e:e;if(!this._events[l])return this;if(!t)return Gh(this,l),this;var u=this._events[l];if(u.fn)u.fn===t&&(!a||u.once)&&(!i||u.context===i)&&Gh(this,l);else{for(var p=0,g=[],y=u.length;p<y;p++)(u[p].fn!==t||a&&!u[p].once||i&&u[p].context!==i)&&g.push(u[p]);g.length?this._events[l]=g.length===1?g[0]:g:Gh(this,l)}return this};Ln.prototype.removeAllListeners=function(e){var t;return e?(t=qn?qn+e:e,this._events[t]&&Gh(this,t)):(this._events=new zc,this._eventsCount=0),this};Ln.prototype.off=Ln.prototype.removeListener;Ln.prototype.addListener=Ln.prototype.on;Ln.prefixed=qn;Ln.EventEmitter=Ln;dg=Ln;var eo={};Za(eo,"ConnectionType",()=>Js);Za(eo,"PeerErrorType",()=>an);Za(eo,"BaseConnectionErrorType",()=>Im);Za(eo,"DataConnectionErrorType",()=>fg);Za(eo,"SerializationType",()=>Sd);Za(eo,"SocketEventType",()=>Ys);Za(eo,"ServerMessageType",()=>Pn);var Js=(function(r){return r.Data="data",r.Media="media",r})({}),an=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),Im=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),fg=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),Sd=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),Ys=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),Pn=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const L1="1.5.5";class X2 extends dg.EventEmitter{constructor(e,t,i,a,l,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const p=e?"wss://":"ws://";this._baseUrl=p+t+":"+i+a+"peerjs?key="+l}start(e,t){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+L1),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),xe.log("Server message received:",l)}catch{xe.log("Invalid server message",a.data);return}this.emit(Ys.Message,l)},this._socket.onclose=a=>{this._disconnected||(xe.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(Ys.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),xe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){xe.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Pn.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ys.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class V1{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Js.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const i=this.connection,a={ordered:!!e.reliable},l=t.createDataChannel(i.label,a);i._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){xe.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,i=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;xe.log("Listening for ICE candidates."),e.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(xe.log(`Received ICE candidates for ${t}:`,u.candidate),l.socket.send({type:Pn.Candidate,payload:{candidate:u.candidate,type:a,connectionId:i},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":xe.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(Im.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":xe.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(Im.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":xe.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},xe.log("Listening for data channel"),e.ondatachannel=u=>{xe.log("Received data channel");const p=u.channel;l.getConnection(t,i)._initializeDataChannel(p)},xe.log("Listening for remote stream"),e.ontrack=u=>{xe.log("Received remote stream");const p=u.streams[0],g=l.getConnection(t,i);if(g.type===Js.Media){const y=g;this._addStreamToMediaConnection(p,y)}}}cleanup(){xe.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let i=!1;const a=this.connection.dataChannel;a&&(i=!!a.readyState&&a.readyState!=="closed"),(t||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createOffer(this.connection.options.constraints);xe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),xe.log("Set localDescription:",i,`for:${this.connection.peer}`);let a={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Js.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}t.socket.send({type:Pn.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(an.WebRTC,a),xe.log("Failed to setLocalDescription, ",a))}}catch(i){t.emitError(an.WebRTC,i),xe.log("Failed to createOffer, ",i)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createAnswer();xe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),xe.log("Set localDescription:",i,`for:${this.connection.peer}`),t.socket.send({type:Pn.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){t.emitError(an.WebRTC,a),xe.log("Failed to setLocalDescription, ",a)}}catch(i){t.emitError(an.WebRTC,i),xe.log("Failed to create answer, ",i)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const i=this.connection.peerConnection,a=this.connection.provider;xe.log("Setting remote description",t);const l=this;try{await i.setRemoteDescription(t),xe.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(u){a.emitError(an.WebRTC,u),xe.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(e){xe.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),xe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(an.WebRTC,t),xe.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(xe.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return xe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(i=>{t.addTrack(i,e)})}_addStreamToMediaConnection(e,t){xe.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class U1 extends dg.EventEmitter{emitError(e,t){xe.error("Error:",t),this.emit("error",new J2(`${e}`,t))}}class J2 extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class z1 extends U1{get open(){return this._open}constructor(e,t,i){super(),this.peer=e,this.provider=t,this.options=i,this._open=!1,this.metadata=i.metadata}}var og;const Vc=class Vc extends z1{get type(){return Js.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,i){super(e,t,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Vc.ID_PREFIX+sr.randomToken(),this._negotiator=new V1(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{xe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{xe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){xe.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,i=e.payload;switch(e.type){case Pn.Answer:this._negotiator.handleSDP(t,i.sdp),this._open=!0;break;case Pn.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:xe.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){xe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const a of i)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};og=new WeakMap,mc(Vc,og,Vc.ID_PREFIX="mc_");let ed=Vc;class W2{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:i,port:a,path:l,key:u}=this._options,p=new URL(`${t}://${i}:${a}${l}${u}/${e}`);return p.searchParams.set("ts",`${Date.now()}${Math.random()}`),p.searchParams.set("version",L1),fetch(p.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){xe.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==sr.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===sr.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw xe.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var lg,cg;const za=class za extends z1{get type(){return Js.Data}constructor(e,t,i){super(e,t,i),this.connectionId=this.options.connectionId||za.ID_PREFIX+P1(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new V1(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{xe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{xe.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{xe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(fg.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case Pn.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case Pn.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:xe.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};lg=new WeakMap,cg=new WeakMap,mc(za,lg,za.ID_PREFIX="dc_"),mc(za,cg,za.MAX_BUFFERED_AMOUNT=8388608);let td=za;class pg extends td{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>td.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return xe.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class um extends pg{close(e){super.close(e),this._chunkedData={}}constructor(e,t,i){super(e,t,i),this.chunker=new j1,this.serialization=Sd.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=e1(e),i=t.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,i=this._chunkedData[t]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[t]=i,i.total===i.count){delete this._chunkedData[t];const a=q2(i.data);this._handleDataMessage({data:a})}}_send(e,t){const i=t1(e);if(i instanceof Promise)return this._send_blob(i);if(!t&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);xe.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const i of t)this.send(i,!0)}}class Z2 extends pg{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Sd.None}}class eN extends pg{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),i=t.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const i=this.encoder.encode(this.stringify(e));if(i.byteLength>=sr.chunkedMTU){this.emitError(fg.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=Sd.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var ug;const Uc=class Uc extends U1{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,i]of this._connections)e[t]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:Z2,json:eN,binary:um,"binary-utf8":um,default:um},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(e&&e.constructor==Object?t=e:e&&(i=e.toString()),t={debug:0,host:sr.CLOUD_HOST,port:sr.CLOUD_PORT,path:"/",key:Uc.DEFAULT_KEY,token:sr.randomToken(),config:sr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==sr.CLOUD_HOST?this._options.secure=sr.isSecure():this._options.host==sr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&xe.setLogFunction(this._options.logFunction),xe.logLevel=this._options.debug||0,this._api=new W2(t),this._socket=this._createServerConnection(),!sr.supports.audioVideo&&!sr.supports.data){this._delayedAbort(an.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!sr.validateId(i)){this._delayedAbort(an.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(an.ServerError,a))}_createServerConnection(){const e=new X2(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ys.Message,t=>{this._handleMessage(t)}),e.on(Ys.Error,t=>{this._abort(an.SocketError,t)}),e.on(Ys.Disconnected,()=>{this.disconnected||(this.emitError(an.Network,"Lost connection to server."),this.disconnect())}),e.on(Ys.Close,()=>{this.disconnected||this._abort(an.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,i=e.payload,a=e.src;switch(t){case Pn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Pn.Error:this._abort(an.ServerError,i.msg);break;case Pn.IdTaken:this._abort(an.UnavailableID,`ID "${this.id}" is taken`);break;case Pn.InvalidKey:this._abort(an.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Pn.Leave:xe.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case Pn.Expire:this.emitError(an.PeerUnavailable,`Could not connect to peer ${a}`);break;case Pn.Offer:{const l=i.connectionId;let u=this.getConnection(a,l);if(u&&(u.close(),xe.warn(`Offer received for existing Connection ID:${l}`)),i.type===Js.Media){const g=new ed(a,this,{connectionId:l,_payload:i,metadata:i.metadata});u=g,this._addConnection(a,u),this.emit("call",g)}else if(i.type===Js.Data){const g=new this._serializers[i.serialization](a,this,{connectionId:l,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});u=g,this._addConnection(a,u),this.emit("connection",g)}else{xe.warn(`Received malformed connection type:${i.type}`);return}const p=this._getMessages(l);for(const g of p)u.handleMessage(g);break}default:{if(!i){xe.warn(`You received a malformed message from ${a} of type ${t}`);return}const l=i.connectionId,u=this.getConnection(a,l);u&&u.peerConnection?u.handleMessage(e):l?this._storeMessage(l,e):xe.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){xe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(an.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,i),i}call(e,t,i={}){if(this.disconnected){xe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(an.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){xe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new ed(e,this,{...i,_stream:t});return this._addConnection(e,a),a}_addConnection(e,t){xe.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const i=this._connections.get(e);if(!i)return null;for(const a of i)if(a.connectionId===t)return a;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){xe.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(xe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const i of t)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;xe.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)xe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)xe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(an.ServerError,t))}};ug=new WeakMap,mc(Uc,ug,Uc.DEFAULT_KEY="peerjs");let nd=Uc;class tN{constructor(){this.peer=null,this.lockPeer=null,this.connections=new Map,this.hostId=null,this.isHost=!1,this.heartbeatInterval=null,this.retryCount=0,this.maxRetries=10,this.actionQueue=[],this.onStateReceived=null,this.onActionReceived=null,this.onConnectionStatus=null,this.onPeerConnected=null,this.onDeviceConnected=null,this.onDeviceDisconnected=null}async getPublicIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown-network"}catch(e){return console.warn("[Sync] Could not fetch public IP for lock, using fallback",e),"local-fallback"}}async initialize(e,t){if(this.isHost=e==="DJ",this.peer&&this.destroy(),this.isHost&&!t){const i=await this.getPublicIP(),a=`singmode-lock-${btoa(i).replace(/=/g,"").substr(0,12)}`;if(console.log(`[Sync] Attempting to claim network lock: ${a}`),!await new Promise(u=>{const p=new nd(a,{debug:1});p.on("open",()=>{this.lockPeer=p,u(!0)}),p.on("error",g=>{g.type==="unavailable-id"?u(!1):u(!0),p.destroy()})}))throw new Error("COLLISION: A SingMode DJ session is already active on this network.")}return new Promise((i,a)=>{const l=this.isHost?t||`singmode-${Math.random().toString(36).substr(2,6)}`:void 0;this.peer=new nd(l,{debug:1}),this.peer.on("open",u=>{console.log(`[Sync] Peer opened with ID: ${u}`),this.hostId=u,this.retryCount=0,this.startHeartbeat(),!this.isHost&&t&&this.connectToHost(t),this.onConnectionStatus&&(!t||this.connections.size>0)&&this.onConnectionStatus("connected"),i(u)}),this.peer.on("disconnected",()=>{var u;console.warn("[Sync] Peer disconnected from signaling server. Attempting reconnect..."),this.onConnectionStatus&&this.onConnectionStatus("connecting"),(u=this.peer)==null||u.reconnect()}),this.peer.on("connection",u=>{this.handleConnection(u)}),this.peer.on("error",u=>{var p;console.error("[Sync] Peer error:",u.type,u),u.type==="unavailable-id"?(this.destroy(),this.initialize(e).then(i).catch(a)):u.type==="network"||u.type==="server-error"||(p=u.message)!=null&&p.includes("Lost connection")?(this.onConnectionStatus&&this.onConnectionStatus("disconnected"),this.handleNetworkError(e,t)):u.type==="peer-unavailable"&&this.onConnectionStatus&&this.onConnectionStatus("disconnected")})})}handleNetworkError(e,t){if(this.retryCount<this.maxRetries){this.retryCount++;const i=Math.min(1e3*Math.pow(2,this.retryCount),3e4);console.log(`[Sync] Network failure. Retrying in ${i}ms... (Attempt ${this.retryCount})`),setTimeout(()=>{this.initialize(e,t)},i)}}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=window.setInterval(()=>{this.peer&&this.peer.disconnected&&!this.peer.destroyed&&this.peer.reconnect(),this.lockPeer&&this.lockPeer.disconnected&&!this.lockPeer.destroyed&&this.lockPeer.reconnect()},5e3)}connectToHost(e){if(!this.peer||this.isHost||this.peer.destroyed)return;this.onConnectionStatus&&this.onConnectionStatus("connecting");const t=this.peer.connect(e,{reliable:!0});this.handleConnection(t)}handleConnection(e){e.on("open",()=>{console.log(`[Sync] Data connection established with: ${e.peer}`),this.connections.set(e.peer,e),!this.isHost&&this.actionQueue.length>0&&(console.log(`[Sync] Flushing ${this.actionQueue.length} queued actions to host.`),this.actionQueue.forEach(t=>{e.send(t)}),this.actionQueue=[]),this.onConnectionStatus&&this.onConnectionStatus("connected"),this.isHost&&this.onPeerConnected&&this.onPeerConnected(),this.isHost&&this.onDeviceConnected&&this.onDeviceConnected(e.peer)}),e.on("data",t=>{if(t&&typeof t=="object")if("type"in t){const i={...t,senderId:e.peer};this.onActionReceived&&this.onActionReceived(i)}else"participants"in t&&this.onStateReceived&&this.onStateReceived(t)}),e.on("close",()=>{console.log(`[Sync] Connection closed: ${e.peer}`),this.connections.delete(e.peer),this.connections.size===0&&this.onConnectionStatus&&(this.isHost||this.onConnectionStatus("disconnected")),this.isHost&&this.onDeviceDisconnected&&this.onDeviceDisconnected(e.peer)}),e.on("error",t=>{console.error("[Sync] Connection error:",t),this.connections.delete(e.peer)})}broadcastState(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}broadcastAction(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}sendAction(e){if(this.isHost||!this.peer)return;let t=!1;this.connections.forEach(i=>{i.open&&(i.send(e),t=!0)}),t||(console.log("[Sync] No connection to host. Queuing action:",e.type),this.actionQueue.push(e))}getRoomId(){return this.hostId}getMyPeerId(){var e;return((e=this.peer)==null?void 0:e.id)||null}destroy(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.connections.forEach(e=>e.close()),this.connections.clear(),this.actionQueue=[],this.peer&&(this.peer.destroy(),this.peer=null),this.lockPeer&&(this.lockPeer.destroy(),this.lockPeer=null)}}const wt=new tN,nN=()=>{};var hx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},rN=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],p=r[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],u=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},G1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,p=u?r[a+1]:0,g=a+2<r.length,y=g?r[a+2]:0,b=l>>2,_=(l&3)<<4|p>>4;let T=(p&15)<<2|y>>6,k=y&63;g||(k=64,u||(T=64)),i.push(t[b],t[_],t[T],t[k])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(B1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):rN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],p=a<r.length?t[r.charAt(a)]:0;++a;const y=a<r.length?t[r.charAt(a)]:64;++a;const _=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||p==null||y==null||_==null)throw new iN;const T=l<<2|p>>4;if(i.push(T),y!==64){const k=p<<4&240|y>>2;if(i.push(k),_!==64){const V=y<<6&192|_;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sN=function(r){const e=B1(r);return G1.encodeByteArray(e,!0)},rd=function(r){return sN(r).replace(/\./g,"")},q1=function(r){try{return G1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=()=>aN().__FIREBASE_DEFAULTS__,lN=()=>{if(typeof process>"u"||typeof hx>"u")return;const r=hx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},cN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&q1(r[1]);return e&&JSON.parse(e)},Nd=()=>{try{return nN()||oN()||lN()||cN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},H1=r=>{var e,t;return(t=(e=Nd())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},uN=r=>{const e=H1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},F1=()=>{var r;return(r=Nd())==null?void 0:r.config},$1=r=>{var e;return(e=Nd())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Y1(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[rd(JSON.stringify(t)),rd(JSON.stringify(u)),""].join(".")}const kc={};function fN(){const r={prod:[],emulator:[]};for(const e of Object.keys(kc))kc[e]?r.emulator.push(e):r.prod.push(e);return r}function pN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let dx=!1;function Q1(r,e){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||kc[r]===e||kc[r]||dx)return;kc[r]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=fN().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,k){T.setAttribute("width","24"),T.setAttribute("id",k),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{dx=!0,u()},T}function b(T,k){T.setAttribute("id",k),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=pN(i),k=t("text"),V=document.getElementById(k)||document.createElement("span"),$=t("learnmore"),ee=document.getElementById($)||document.createElement("a"),se=t("preprendIcon"),he=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const me=T.element;p(me),b(ee,$);const ye=y();g(he,se),me.append(he,V,ee,ye),document.body.appendChild(me)}l?(V.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function gN(){var e;const r=(e=Nd())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function bN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xN(){const r=Vn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function _N(){return!gN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wN(){try{return typeof indexedDB=="object"}catch{return!1}}function EN(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="FirebaseError";class ns extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=TN,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zc.prototype.create)}}class Zc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?SN(l,i):"Error",p=`${this.serviceName}: ${u} (${a}).`;return new ns(a,p,i)}}function SN(r,e){return r.replace(NN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const NN=/\{\$([^}]+)}/g;function CN(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ha(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],u=e[a];if(fx(l)&&fx(u)){if(!Ha(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function fx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Tc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Sc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function AN(r,e){const t=new RN(r,e);return t.subscribe.bind(t)}class RN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");kN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=hm),a.error===void 0&&(a.error=hm),a.complete===void 0&&(a.complete=hm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function hm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(r){return r&&r._delegate?r._delegate:r}class Fa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new hN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ON(e))try{this.getOrInitializeService({instanceIdentifier:Ua})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ua){return this.instances.has(e)}getOptions(e=Ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ua){return this.component?this.component.multipleInstances?e:Ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DN(r){return r===Ua?void 0:r}function ON(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new IN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const PN={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},MN=Je.INFO,LN={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},VN=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=LN[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mg{constructor(e){this.name=e,this._logLevel=MN,this._logHandler=VN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const UN=(r,e)=>e.some(t=>r instanceof t);let px,mx;function zN(){return px||(px=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BN(){return mx||(mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K1=new WeakMap,Dm=new WeakMap,X1=new WeakMap,dm=new WeakMap,gg=new WeakMap;function GN(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(Ws(r.result)),a()},u=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&K1.set(t,r)}).catch(()=>{}),gg.set(e,r),e}function qN(r){if(Dm.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Dm.set(r,e)}let Om={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Dm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||X1.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function HN(r){Om=r(Om)}function FN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(fm(this),e,...t);return X1.set(i,e.sort?e.sort():[e]),Ws(i)}:BN().includes(r)?function(...e){return r.apply(fm(this),e),Ws(K1.get(this))}:function(...e){return Ws(r.apply(fm(this),e))}}function $N(r){return typeof r=="function"?FN(r):(r instanceof IDBTransaction&&qN(r),UN(r,zN())?new Proxy(r,Om):r)}function Ws(r){if(r instanceof IDBRequest)return GN(r);if(dm.has(r))return dm.get(r);const e=$N(r);return e!==r&&(dm.set(r,e),gg.set(e,r)),e}const fm=r=>gg.get(r);function YN(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),p=Ws(u);return i&&u.addEventListener("upgradeneeded",g=>{i(Ws(u.result),g.oldVersion,g.newVersion,Ws(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const QN=["get","getKey","getAll","getAllKeys","count"],KN=["put","add","delete","clear"],pm=new Map;function gx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(pm.get(e))return pm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=KN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||QN.includes(t)))return;const l=async function(u,...p){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),a&&g.done]))[0]};return pm.set(e,l),l}HN(r=>({...r,get:(e,t,i)=>gx(e,t)||r.get(e,t,i),has:(e,t)=>!!gx(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function JN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jm="@firebase/app",yx="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new mg("@firebase/app"),WN="@firebase/app-compat",ZN="@firebase/analytics-compat",eC="@firebase/analytics",tC="@firebase/app-check-compat",nC="@firebase/app-check",rC="@firebase/auth",iC="@firebase/auth-compat",sC="@firebase/database",aC="@firebase/data-connect",oC="@firebase/database-compat",lC="@firebase/functions",cC="@firebase/functions-compat",uC="@firebase/installations",hC="@firebase/installations-compat",dC="@firebase/messaging",fC="@firebase/messaging-compat",pC="@firebase/performance",mC="@firebase/performance-compat",gC="@firebase/remote-config",yC="@firebase/remote-config-compat",vC="@firebase/storage",bC="@firebase/storage-compat",xC="@firebase/firestore",_C="@firebase/ai",wC="@firebase/firestore-compat",EC="firebase",TC="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="[DEFAULT]",SC={[jm]:"fire-core",[WN]:"fire-core-compat",[eC]:"fire-analytics",[ZN]:"fire-analytics-compat",[nC]:"fire-app-check",[tC]:"fire-app-check-compat",[rC]:"fire-auth",[iC]:"fire-auth-compat",[sC]:"fire-rtdb",[aC]:"fire-data-connect",[oC]:"fire-rtdb-compat",[lC]:"fire-fn",[cC]:"fire-fn-compat",[uC]:"fire-iid",[hC]:"fire-iid-compat",[dC]:"fire-fcm",[fC]:"fire-fcm-compat",[pC]:"fire-perf",[mC]:"fire-perf-compat",[gC]:"fire-rc",[yC]:"fire-rc-compat",[vC]:"fire-gcs",[bC]:"fire-gcs-compat",[xC]:"fire-fst",[wC]:"fire-fst-compat",[_C]:"fire-vertex","fire-js":"fire-js",[EC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new Map,NC=new Map,Mm=new Map;function vx(r,e){try{r.container.addComponent(e)}catch(t){Wi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function al(r){const e=r.name;if(Mm.has(e))return Wi.debug(`There were multiple attempts to register component ${e}.`),!1;Mm.set(e,r);for(const t of id.values())vx(t,r);for(const t of NC.values())vx(t,r);return!0}function yg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Or(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new Zc("app","Firebase",CC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=TC;function J1(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Pm,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Zs.create("bad-app-name",{appName:String(a)});if(t||(t=F1()),!t)throw Zs.create("no-options");const l=id.get(a);if(l){if(Ha(t,l.options)&&Ha(i,l.config))return l;throw Zs.create("duplicate-app",{appName:a})}const u=new jN(a);for(const g of Mm.values())u.addComponent(g);const p=new AC(t,i,u);return id.set(a,p),p}function W1(r=Pm){const e=id.get(r);if(!e&&r===Pm&&F1())return J1();if(!e)throw Zs.create("no-app",{appName:r});return e}function ea(r,e,t){let i=SC[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wi.warn(u.join(" "));return}al(new Fa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="firebase-heartbeat-database",kC=1,Bc="firebase-heartbeat-store";let mm=null;function Z1(){return mm||(mm=YN(RC,kC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Bc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Zs.create("idb-open",{originalErrorMessage:r.message})})),mm}async function IC(r){try{const t=(await Z1()).transaction(Bc),i=await t.objectStore(Bc).get(ew(r));return await t.done,i}catch(e){if(e instanceof ns)Wi.warn(e.message);else{const t=Zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wi.warn(t.message)}}}async function bx(r,e){try{const i=(await Z1()).transaction(Bc,"readwrite");await i.objectStore(Bc).put(e,ew(r)),await i.done}catch(t){if(t instanceof ns)Wi.warn(t.message);else{const i=Zs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Wi.warn(i.message)}}}function ew(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=1024,OC=30;class jC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new MC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=xx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>OC){const u=LC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Wi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xx(),{heartbeatsToSend:i,unsentEntries:a}=PC(this._heartbeatsCache.heartbeats),l=rd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Wi.warn(t),""}}}function xx(){return new Date().toISOString().substring(0,10)}function PC(r,e=DC){const t=[];let i=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),_x(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),_x(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class MC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wN()?EN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return bx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return bx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _x(r){return rd(JSON.stringify({version:2,heartbeats:r})).length}function LC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(r){al(new Fa("platform-logger",e=>new XN(e),"PRIVATE")),al(new Fa("heartbeat",e=>new jC(e),"PRIVATE")),ea(jm,yx,r),ea(jm,yx,"esm2020"),ea("fire-js","")}VC("");var UC="firebase",zC="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ea(UC,zC,"app");function tw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BC=tw,nw=new Zc("auth","Firebase",tw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new mg("@firebase/auth");function GC(r,...e){sd.logLevel<=Je.WARN&&sd.warn(`Auth (${pl}): ${r}`,...e)}function qh(r,...e){sd.logLevel<=Je.ERROR&&sd.error(`Auth (${pl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(r,...e){throw vg(r,...e)}function mi(r,...e){return vg(r,...e)}function rw(r,e,t){const i={...BC(),[e]:t};return new Zc("auth","Firebase",i).create(e,{appName:r.name})}function Xi(r){return rw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vg(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return nw.create(r,...e)}function Re(r,e,...t){if(!r)throw vg(e,...t)}function Qi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw qh(e),new Error(e)}function Zi(r,e){r||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function qC(){return wx()==="http:"||wx()==="https:"}function wx(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qC()||vN()||"connection"in navigator)?navigator.onLine:!0}function FC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zi(t>e,"Short delay should be less than long delay!"),this.isMobile=mN()||bN()}get(){return HC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(r,e){Zi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QC=new tu(3e4,6e4);function ua(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ha(r,e,t,i,a={}){return sw(r,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const p=eu({key:r.config.apiKey,...u}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return yN()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&fl(r.emulatorConfig.host)&&(y.credentials="include"),iw.fetch()(await aw(r,r.config.apiHost,t,p),y)})}async function sw(r,e,t){r._canInitEmulator=!1;const i={...$C,...e};try{const a=new XC(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ih(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const p=l.ok?u.errorMessage:u.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(r,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Ih(r,"email-already-in-use",u);if(g==="USER_DISABLED")throw Ih(r,"user-disabled",u);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw rw(r,b,y);Wr(r,b)}}catch(a){if(a instanceof ns)throw a;Wr(r,"network-request-failed",{message:String(a)})}}async function nu(r,e,t,i,a={}){const l=await ha(r,e,t,i,a);return"mfaPendingCredential"in l&&Wr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function aw(r,e,t,i){const a=`${e}${t}?${i}`,l=r,u=l.config.emulator?bg(r.config,a):`${r.config.apiScheme}://${a}`;return YC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function KC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mi(this.auth,"network-request-failed")),QC.get())})}}function Ih(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=mi(r,e,i);return a.customData._tokenResponse=t,a}function Ex(r){return r!==void 0&&r.enterprise!==void 0}class JC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WC(r,e){return ha(r,"GET","/v2/recaptchaConfig",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(r,e){return ha(r,"POST","/v1/accounts:delete",e)}async function ad(r,e){return ha(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eA(r,e=!1){const t=mn(r),i=await t.getIdToken(e),a=xg(i);Re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Ic(gm(a.auth_time)),issuedAtTime:Ic(gm(a.iat)),expirationTime:Ic(gm(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function gm(r){return Number(r)*1e3}function xg(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const a=q1(t);return a?JSON.parse(a):(qh("Failed to decode base64 JWT payload"),null)}catch(a){return qh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Tx(r){const e=xg(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ns&&tA(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function tA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(r){var _;const e=r.auth,t=await r.getIdToken(),i=await Gc(r,ad(e,{idToken:t}));Re(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?ow(a.providerUserInfo):[],u=iA(r.providerData,l),p=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(u!=null&&u.length),y=p?g:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Vm(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(r,b)}async function rA(r){const e=mn(r);await od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iA(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function ow(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(r,e){const t=await sw(r,{},async()=>{const i=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await aw(r,a,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return r.emulatorConfig&&fl(r.emulatorConfig.host)&&(g.credentials="include"),iw.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aA(r,e){return ha(r,"POST","/v2/accounts:revokeToken",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Tx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await sA(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new tl;return i&&(Re(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Re(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Re(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Kr{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new nA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Vm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eA(this,e)}reload(){return rA(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Kr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await od(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Or(this.auth.app))return Promise.reject(Xi(this.auth));const e=await this.getIdToken();return await Gc(this,ZC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:k,providerData:V,stsTokenManager:$}=t;Re(_&&$,e,"internal-error");const ee=tl.fromJSON(this.name,$);Re(typeof _=="string",e,"internal-error"),Us(i,e.name),Us(a,e.name),Re(typeof T=="boolean",e,"internal-error"),Re(typeof k=="boolean",e,"internal-error"),Us(l,e.name),Us(u,e.name),Us(p,e.name),Us(g,e.name),Us(y,e.name),Us(b,e.name);const se=new Kr({uid:_,auth:e,email:a,emailVerified:T,displayName:i,isAnonymous:k,photoURL:u,phoneNumber:l,tenantId:p,stsTokenManager:ee,createdAt:y,lastLoginAt:b});return V&&Array.isArray(V)&&(se.providerData=V.map(he=>({...he}))),g&&(se._redirectEventId=g),se}static async _fromIdTokenResponse(e,t,i=!1){const a=new tl;a.updateFromServerResponse(t);const l=new Kr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await od(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?ow(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),p=new tl;p.updateFromIdToken(i);const g=new Kr({uid:a.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Vm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new Map;function Ki(r){Zi(r instanceof Function,"Expected a class definition");let e=Sx.get(r);return e?(Zi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Sx.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lw.type="NONE";const Nx=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(r,e,t){return`firebase:${r}:${e}:${t}`}class nl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Hh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Hh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ad(this.auth,{idToken:e}).catch(()=>{});return t?Kr._fromGetAccountInfoResponse(this.auth,t,e):null}return Kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new nl(Ki(Nx),e,i);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||Ki(Nx);const u=Hh(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(u);if(b){let _;if(typeof b=="string"){const T=await ad(e,{idToken:b}).catch(()=>{});if(!T)break;_=await Kr._fromGetAccountInfoResponse(e,T,b)}else _=Kr._fromJSON(e,b);y!==l&&(p=_),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new nl(l,e,i):(l=g[0],p&&await l._set(u,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new nl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(mw(e))return"Webos";if(uw(e))return"Safari";if((e.includes("chrome/")||hw(e))&&!e.includes("edge/"))return"Chrome";if(fw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function cw(r=Vn()){return/firefox\//i.test(r)}function uw(r=Vn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hw(r=Vn()){return/crios\//i.test(r)}function dw(r=Vn()){return/iemobile/i.test(r)}function fw(r=Vn()){return/android/i.test(r)}function pw(r=Vn()){return/blackberry/i.test(r)}function mw(r=Vn()){return/webos/i.test(r)}function _g(r=Vn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function oA(r=Vn()){var e;return _g(r)&&!!((e=window.navigator)!=null&&e.standalone)}function lA(){return xN()&&document.documentMode===10}function gw(r=Vn()){return _g(r)||fw(r)||mw(r)||pw(r)||/windows phone/i.test(r)||dw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(r,e=[]){let t;switch(r){case"Browser":t=Cx(Vn());break;case"Worker":t=`${Cx(Vn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,p)=>{try{const g=e(l);u(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(r,e={}){return ha(r,"GET","/v2/passwordPolicy",ua(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=6;class dA{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ax(this),this.idTokenSubscription=new Ax(this),this.beforeStateQueue=new cA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ki(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ad(this,{idToken:e}),i=await Kr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Or(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,p=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===p)&&(g!=null&&g.user)&&(i=g.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await od(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Or(this.app))return Promise.reject(Xi(this));const t=e?mn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Or(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Or(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uA(this),t=new dA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await aA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ki(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[Ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(p,this,"internal-error"),p.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&GC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function to(r){return mn(r)}class Ax{constructor(e){this.auth=e,this.observer=null,this.addObserver=AN(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pA(r){Cd=r}function vw(r){return Cd.loadJS(r)}function mA(){return Cd.recaptchaEnterpriseScript}function gA(){return Cd.gapiScript}function yA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class vA{constructor(){this.enterprise=new bA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class bA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const xA="recaptcha-enterprise",bw="NO_RECAPTCHA";class _A{constructor(e){this.type=xA,this.auth=to(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,p)=>{WC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new JC(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(g=>{p(g)})})}function a(l,u,p){const g=window.grecaptcha;Ex(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(bw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vA().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(p=>{if(!t&&Ex(window.grecaptcha))a(p,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=mA();g.length!==0&&(g+=p),vw(g).then(()=>{a(p,l,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function Rx(r,e,t,i=!1,a=!1){const l=new _A(r);let u;if(a)u=bw;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Um(r,e,t,i,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Rx(r,e,t,t==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await Rx(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(r,e){const t=yg(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ha(l,e??{}))return a;Wr(a,"already-initialized")}return t.initialize({options:e})}function EA(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ki);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function TA(r,e,t){const i=to(r);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=xw(e),{host:u,port:p}=SA(e),g=p===null?"":`:${p}`,y={url:`${l}//${u}${g}/`},b=Object.freeze({host:u,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(Ha(y,i.config.emulator)&&Ha(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,fl(u)?(Y1(`${l}//${u}${g}`),Q1("Auth",!0)):NA()}function xw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function SA(r){const e=xw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:kx(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:kx(u)}}}function kx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function NA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,t){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function CA(r,e){return ha(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(r,e){return nu(r,"POST","/v1/accounts:signInWithPassword",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(r,e){return nu(r,"POST","/v1/accounts:signInWithEmailLink",ua(r,e))}async function kA(r,e){return nu(r,"POST","/v1/accounts:signInWithEmailLink",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends wg{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new qc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new qc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,t,"signInWithPassword",AA);case"emailLink":return RA(e,{email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,i,"signUpPassword",CA);case"emailLink":return kA(e,{idToken:t,email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(r,e){return nu(r,"POST","/v1/accounts:signInWithIdp",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="http://localhost";class $a extends wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new $a(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return rl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,rl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rl(e,t)}buildRequest(){const e={requestUri:IA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OA(r){const e=Tc(Sc(r)).link,t=e?Tc(Sc(e)).deep_link_id:null,i=Tc(Sc(r)).deep_link_id;return(i?Tc(Sc(i)).link:null)||i||t||e||r}class Eg{constructor(e){const t=Tc(Sc(e)),i=t.apiKey??null,a=t.oobCode??null,l=DA(t.mode??null);Re(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=OA(e);try{return new Eg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,t){return qc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Eg.parseLink(t);return Re(i,"argument-error"),qc._fromEmailAndCode(e,i.code,i.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends _w{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends ru{constructor(){super("facebook.com")}static credential(e){return $a._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $a._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Hs.credential(t,i)}catch{return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com";Hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends ru{constructor(){super("github.com")}static credential(e){return $a._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends ru{constructor(){super("twitter.com")}static credential(e,t){return $a._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return $s.credential(t,i)}catch{return null}}}$s.TWITTER_SIGN_IN_METHOD="twitter.com";$s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(r,e){return nu(r,"POST","/v1/accounts:signUp",ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Kr._fromIdTokenResponse(e,i,a),u=Ix(i);return new Ya({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Ix(i);return new Ya({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Ix(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends ns{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,ld.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new ld(e,t,i,a)}}function ww(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ld._fromErrorAndOperation(r,l,e,i):l})}async function PA(r,e,t=!1){const i=await Gc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ya._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(r,e,t=!1){const{auth:i}=r;if(Or(i.app))return Promise.reject(Xi(i));const a="reauthenticate";try{const l=await Gc(r,ww(i,a,e,r),t);Re(l.idToken,i,"internal-error");const u=xg(l.idToken);Re(u,i,"internal-error");const{sub:p}=u;return Re(r.uid===p,i,"user-mismatch"),Ya._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Wr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ew(r,e,t=!1){if(Or(r.app))return Promise.reject(Xi(r));const i="signIn",a=await ww(r,i,e),l=await Ya._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function LA(r,e){return Ew(to(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(r){const e=to(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VA(r,e,t){if(Or(r.app))return Promise.reject(Xi(r));const i=to(r),u=await Um(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jA).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Tw(r),g}),p=await Ya._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(p.user),p}function UA(r,e,t){return Or(r.app)?Promise.reject(Xi(r)):LA(mn(r),ml.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Tw(r),i})}function zA(r,e,t,i){return mn(r).onIdTokenChanged(e,t,i)}function BA(r,e,t){return mn(r).beforeAuthStateChanged(e,t)}function GA(r){return mn(r).signOut()}const cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cd,"1"),this.storage.removeItem(cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1e3,HA=10;class Nw extends Sw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,p,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);lA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,HA):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nw.type="LOCAL";const FA=Nw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw extends Sw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cw.type="SESSION";const Aw=Cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Ad(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const p=Array.from(u).map(async y=>y(t.origin,l)),g=await $A(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((p,g)=>{const y=Tg("",20);a.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(T.data.response);break;default:clearTimeout(b),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function QA(r){gi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function KA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function JA(){return Rw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firebaseLocalStorageDb",WA=1,ud="firebaseLocalStorage",Iw="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rd(r,e){return r.transaction([ud],e?"readwrite":"readonly").objectStore(ud)}function ZA(){const r=indexedDB.deleteDatabase(kw);return new iu(r).toPromise()}function zm(){const r=indexedDB.open(kw,WA);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(ud,{keyPath:Iw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(ud)?e(i):(i.close(),await ZA(),e(await zm()))})})}async function Dx(r,e,t){const i=Rd(r,!0).put({[Iw]:e,value:t});return new iu(i).toPromise()}async function eR(r,e){const t=Rd(r,!1).get(e),i=await new iu(t).toPromise();return i===void 0?null:i.value}function Ox(r,e){const t=Rd(r,!0).delete(e);return new iu(t).toPromise()}const tR=800,nR=3;class Dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>nR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ad._getInstance(JA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await KA(),!this.activeServiceWorker)return;this.sender=new YA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zm();return await Dx(e,cd,"1"),await Ox(e,cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Dx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>eR(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ox(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Rd(a,!1).getAll();return new iu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dw.type="LOCAL";const rR=Dw;new tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(r,e){return e?Ki(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sR(r){return Ew(r.auth,new Sg(r),r.bypassAuthState)}function aR(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),MA(t,new Sg(r),r.bypassAuthState)}async function oR(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),PA(t,new Sg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:p}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sR;case"linkViaPopup":case"linkViaRedirect":return oR;case"reauthViaPopup":case"reauthViaRedirect":return aR;default:Wr(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new tu(2e3,1e4);class Zo extends Ow{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=Tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lR.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="pendingRedirect",Fh=new Map;class uR extends Ow{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const i=await hR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hR(r,e){const t=pR(e),i=fR(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function dR(r,e){Fh.set(r._key(),e)}function fR(r){return Ki(r._redirectPersistence)}function pR(r){return Hh(cR,r.config.apiKey,r.name)}async function mR(r,e,t=!1){if(Or(r.app))return Promise.reject(Xi(r));const i=to(r),a=iR(i,e),u=await new uR(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=600*1e3;class yR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!jw(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(mi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gR&&this.cachedEventUids.clear(),this.cachedEventUids.has(jx(e))}saveEventToCache(e){this.cachedEventUids.add(jx(e)),this.lastProcessedEventTime=Date.now()}}function jx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function jw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(r,e={}){return ha(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_R=/^https?/;async function wR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await bR(r);for(const t of e)try{if(ER(t))return}catch{}Wr(r,"unauthorized-domain")}function ER(r){const e=Lm(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!_R.test(t))return!1;if(xR.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new tu(3e4,6e4);function Px(){const r=gi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function SR(r){return new Promise((e,t)=>{var a,l,u;function i(){Px(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Px(),t(mi(r,"network-request-failed"))},timeout:TR.get()})}if((l=(a=gi().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=gi().gapi)!=null&&u.load)i();else{const p=yA("iframefcb");return gi()[p]=()=>{gapi.load?i():t(mi(r,"network-request-failed"))},vw(`${gA()}?onload=${p}`).catch(g=>t(g))}}).catch(e=>{throw $h=null,e})}let $h=null;function NR(r){return $h=$h||SR(r),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new tu(5e3,15e3),AR="__/auth/iframe",RR="emulator/auth/iframe",kR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DR(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?bg(e,RR):`https://${r.config.authDomain}/${AR}`,i={apiKey:e.apiKey,appName:r.name,v:pl},a=IR.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${eu(i).slice(1)}`}async function OR(r){const e=await NR(r),t=gi().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:DR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kR,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=mi(r,"network-request-failed"),p=gi().setTimeout(()=>{l(u)},CR.get());function g(){gi().clearTimeout(p),a(i)}i.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PR=500,MR=600,LR="_blank",VR="http://localhost";class Mx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UR(r,e,t,i=PR,a=MR){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...jR,width:i.toString(),height:a.toString(),top:l,left:u},y=Vn().toLowerCase();t&&(p=hw(y)?LR:t),cw(y)&&(e=e||VR,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[k,V])=>`${T}${k}=${V},`,"");if(oA(y)&&p!=="_self")return zR(e||"",p),new Mx(null);const _=window.open(e||"",p,b);Re(_,r,"popup-blocked");try{_.focus()}catch{}return new Mx(_)}function zR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="__/auth/handler",GR="emulator/auth/handler",qR=encodeURIComponent("fac");async function Lx(r,e,t,i,a,l){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:pl,eventId:a};if(e instanceof _w){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",CN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))u[b]=_}if(e instanceof ru){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(u.scopes=b.join(","))}r.tenantId&&(u.tid=r.tenantId);const p=u;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await r._getAppCheckToken(),y=g?`#${qR}=${encodeURIComponent(g)}`:"";return`${HR(r)}?${eu(p).slice(1)}${y}`}function HR({config:r}){return r.emulator?bg(r,GR):`https://${r.authDomain}/${BR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="webStorageSupport";class FR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Aw,this._completeRedirectFn=mR,this._overrideRedirectResult=dR}async _openPopup(e,t,i,a){var u;Zi((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await Lx(e,t,i,Lm(),a);return UR(e,l,Tg())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Lx(e,t,i,Lm(),a);return QA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Zi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await OR(e),i=new yR(e);return t.register("authEvent",a=>(Re(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ym,{type:ym},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[ym];l!==void 0&&t(!!l),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gw()||uw()||_g()}}const $R=FR;var Vx="@firebase/auth",Ux="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KR(r){al(new Fa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=i.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(r)},y=new fA(i,a,l,g);return EA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),al(new Fa("auth-internal",e=>{const t=to(e.getProvider("auth").getImmediate());return(i=>new YR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ea(Vx,Ux,QR(r)),ea(Vx,Ux,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=300,JR=$1("authIdTokenMaxAge")||XR;let zx=null;const WR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>JR)return;const a=t==null?void 0:t.token;zx!==a&&(zx=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function ZR(r=W1()){const e=yg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=wA(r,{popupRedirectResolver:$R,persistence:[rR,FA,Aw]}),i=$1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=WR(l.toString());BA(t,u,()=>u(t.currentUser)),zA(t,p=>u(p))}}const a=H1("auth");return a&&TA(t,`http://${a}`),t}function ek(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}pA({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=mi("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",ek().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KR("Browser");var Bx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ta,Pw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function R(){}R.prototype=C.prototype,A.F=C.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(L,O,j){for(var I=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)I[nt-2]=arguments[nt];return C.prototype[O].apply(L,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,C,R){R||(R=0);const L=Array(16);if(typeof C=="string")for(var O=0;O<16;++O)L[O]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(O=0;O<16;++O)L[O]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=A.g[0],R=A.g[1],O=A.g[2];let j=A.g[3],I;I=C+(j^R&(O^j))+L[0]+3614090360&4294967295,C=R+(I<<7&4294967295|I>>>25),I=j+(O^C&(R^O))+L[1]+3905402710&4294967295,j=C+(I<<12&4294967295|I>>>20),I=O+(R^j&(C^R))+L[2]+606105819&4294967295,O=j+(I<<17&4294967295|I>>>15),I=R+(C^O&(j^C))+L[3]+3250441966&4294967295,R=O+(I<<22&4294967295|I>>>10),I=C+(j^R&(O^j))+L[4]+4118548399&4294967295,C=R+(I<<7&4294967295|I>>>25),I=j+(O^C&(R^O))+L[5]+1200080426&4294967295,j=C+(I<<12&4294967295|I>>>20),I=O+(R^j&(C^R))+L[6]+2821735955&4294967295,O=j+(I<<17&4294967295|I>>>15),I=R+(C^O&(j^C))+L[7]+4249261313&4294967295,R=O+(I<<22&4294967295|I>>>10),I=C+(j^R&(O^j))+L[8]+1770035416&4294967295,C=R+(I<<7&4294967295|I>>>25),I=j+(O^C&(R^O))+L[9]+2336552879&4294967295,j=C+(I<<12&4294967295|I>>>20),I=O+(R^j&(C^R))+L[10]+4294925233&4294967295,O=j+(I<<17&4294967295|I>>>15),I=R+(C^O&(j^C))+L[11]+2304563134&4294967295,R=O+(I<<22&4294967295|I>>>10),I=C+(j^R&(O^j))+L[12]+1804603682&4294967295,C=R+(I<<7&4294967295|I>>>25),I=j+(O^C&(R^O))+L[13]+4254626195&4294967295,j=C+(I<<12&4294967295|I>>>20),I=O+(R^j&(C^R))+L[14]+2792965006&4294967295,O=j+(I<<17&4294967295|I>>>15),I=R+(C^O&(j^C))+L[15]+1236535329&4294967295,R=O+(I<<22&4294967295|I>>>10),I=C+(O^j&(R^O))+L[1]+4129170786&4294967295,C=R+(I<<5&4294967295|I>>>27),I=j+(R^O&(C^R))+L[6]+3225465664&4294967295,j=C+(I<<9&4294967295|I>>>23),I=O+(C^R&(j^C))+L[11]+643717713&4294967295,O=j+(I<<14&4294967295|I>>>18),I=R+(j^C&(O^j))+L[0]+3921069994&4294967295,R=O+(I<<20&4294967295|I>>>12),I=C+(O^j&(R^O))+L[5]+3593408605&4294967295,C=R+(I<<5&4294967295|I>>>27),I=j+(R^O&(C^R))+L[10]+38016083&4294967295,j=C+(I<<9&4294967295|I>>>23),I=O+(C^R&(j^C))+L[15]+3634488961&4294967295,O=j+(I<<14&4294967295|I>>>18),I=R+(j^C&(O^j))+L[4]+3889429448&4294967295,R=O+(I<<20&4294967295|I>>>12),I=C+(O^j&(R^O))+L[9]+568446438&4294967295,C=R+(I<<5&4294967295|I>>>27),I=j+(R^O&(C^R))+L[14]+3275163606&4294967295,j=C+(I<<9&4294967295|I>>>23),I=O+(C^R&(j^C))+L[3]+4107603335&4294967295,O=j+(I<<14&4294967295|I>>>18),I=R+(j^C&(O^j))+L[8]+1163531501&4294967295,R=O+(I<<20&4294967295|I>>>12),I=C+(O^j&(R^O))+L[13]+2850285829&4294967295,C=R+(I<<5&4294967295|I>>>27),I=j+(R^O&(C^R))+L[2]+4243563512&4294967295,j=C+(I<<9&4294967295|I>>>23),I=O+(C^R&(j^C))+L[7]+1735328473&4294967295,O=j+(I<<14&4294967295|I>>>18),I=R+(j^C&(O^j))+L[12]+2368359562&4294967295,R=O+(I<<20&4294967295|I>>>12),I=C+(R^O^j)+L[5]+4294588738&4294967295,C=R+(I<<4&4294967295|I>>>28),I=j+(C^R^O)+L[8]+2272392833&4294967295,j=C+(I<<11&4294967295|I>>>21),I=O+(j^C^R)+L[11]+1839030562&4294967295,O=j+(I<<16&4294967295|I>>>16),I=R+(O^j^C)+L[14]+4259657740&4294967295,R=O+(I<<23&4294967295|I>>>9),I=C+(R^O^j)+L[1]+2763975236&4294967295,C=R+(I<<4&4294967295|I>>>28),I=j+(C^R^O)+L[4]+1272893353&4294967295,j=C+(I<<11&4294967295|I>>>21),I=O+(j^C^R)+L[7]+4139469664&4294967295,O=j+(I<<16&4294967295|I>>>16),I=R+(O^j^C)+L[10]+3200236656&4294967295,R=O+(I<<23&4294967295|I>>>9),I=C+(R^O^j)+L[13]+681279174&4294967295,C=R+(I<<4&4294967295|I>>>28),I=j+(C^R^O)+L[0]+3936430074&4294967295,j=C+(I<<11&4294967295|I>>>21),I=O+(j^C^R)+L[3]+3572445317&4294967295,O=j+(I<<16&4294967295|I>>>16),I=R+(O^j^C)+L[6]+76029189&4294967295,R=O+(I<<23&4294967295|I>>>9),I=C+(R^O^j)+L[9]+3654602809&4294967295,C=R+(I<<4&4294967295|I>>>28),I=j+(C^R^O)+L[12]+3873151461&4294967295,j=C+(I<<11&4294967295|I>>>21),I=O+(j^C^R)+L[15]+530742520&4294967295,O=j+(I<<16&4294967295|I>>>16),I=R+(O^j^C)+L[2]+3299628645&4294967295,R=O+(I<<23&4294967295|I>>>9),I=C+(O^(R|~j))+L[0]+4096336452&4294967295,C=R+(I<<6&4294967295|I>>>26),I=j+(R^(C|~O))+L[7]+1126891415&4294967295,j=C+(I<<10&4294967295|I>>>22),I=O+(C^(j|~R))+L[14]+2878612391&4294967295,O=j+(I<<15&4294967295|I>>>17),I=R+(j^(O|~C))+L[5]+4237533241&4294967295,R=O+(I<<21&4294967295|I>>>11),I=C+(O^(R|~j))+L[12]+1700485571&4294967295,C=R+(I<<6&4294967295|I>>>26),I=j+(R^(C|~O))+L[3]+2399980690&4294967295,j=C+(I<<10&4294967295|I>>>22),I=O+(C^(j|~R))+L[10]+4293915773&4294967295,O=j+(I<<15&4294967295|I>>>17),I=R+(j^(O|~C))+L[1]+2240044497&4294967295,R=O+(I<<21&4294967295|I>>>11),I=C+(O^(R|~j))+L[8]+1873313359&4294967295,C=R+(I<<6&4294967295|I>>>26),I=j+(R^(C|~O))+L[15]+4264355552&4294967295,j=C+(I<<10&4294967295|I>>>22),I=O+(C^(j|~R))+L[6]+2734768916&4294967295,O=j+(I<<15&4294967295|I>>>17),I=R+(j^(O|~C))+L[13]+1309151649&4294967295,R=O+(I<<21&4294967295|I>>>11),I=C+(O^(R|~j))+L[4]+4149444226&4294967295,C=R+(I<<6&4294967295|I>>>26),I=j+(R^(C|~O))+L[11]+3174756917&4294967295,j=C+(I<<10&4294967295|I>>>22),I=O+(C^(j|~R))+L[2]+718787259&4294967295,O=j+(I<<15&4294967295|I>>>17),I=R+(j^(O|~C))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+j&4294967295}i.prototype.v=function(A,C){C===void 0&&(C=A.length);const R=C-this.blockSize,L=this.C;let O=this.h,j=0;for(;j<C;){if(O==0)for(;j<=R;)a(this,A,j),j+=this.blockSize;if(typeof A=="string"){for(;j<C;)if(L[O++]=A.charCodeAt(j++),O==this.blockSize){a(this,L),O=0;break}}else for(;j<C;)if(L[O++]=A[j++],O==this.blockSize){a(this,L),O=0;break}}this.h=O,this.o+=C},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,R=0;R<4;++R)for(let L=0;L<32;L+=8)A[C++]=this.g[R]>>>L&255;return A};function l(A,C){var R=p;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=C(A)}function u(A,C){this.h=C;const R=[];let L=!0;for(let O=A.length-1;O>=0;O--){const j=A[O]|0;L&&j==C||(R[O]=j,L=!1)}this.g=R}var p={};function g(A){return-128<=A&&A<128?l(A,function(C){return new u([C|0],C<0?-1:0)}):new u([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return _;if(A<0)return ee(y(-A));const C=[];let R=1;for(let L=0;A>=R;L++)C[L]=A/R|0,R*=4294967296;return new u(C,0)}function b(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return ee(b(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(C,8));let L=_;for(let j=0;j<A.length;j+=8){var O=Math.min(8,A.length-j);const I=parseInt(A.substring(j,j+O),C);O<8?(O=y(Math.pow(C,O)),L=L.j(O).add(y(I))):(L=L.j(R),L=L.add(y(I)))}return L}var _=g(0),T=g(1),k=g(16777216);r=u.prototype,r.m=function(){if($(this))return-ee(this).m();let A=0,C=1;for(let R=0;R<this.g.length;R++){const L=this.i(R);A+=(L>=0?L:4294967296+L)*C,C*=4294967296}return A},r.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if($(this))return"-"+ee(this).toString(A);const C=y(Math.pow(A,6));var R=this;let L="";for(;;){const O=ye(R,C).g;R=se(R,O.j(C));let j=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=O,V(R))return j+L;for(;j.length<6;)j="0"+j;L=j+L}},r.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function $(A){return A.h==-1}r.l=function(A){return A=se(this,A),$(A)?-1:V(A)?0:1};function ee(A){const C=A.g.length,R=[];for(let L=0;L<C;L++)R[L]=~A.g[L];return new u(R,~A.h).add(T)}r.abs=function(){return $(this)?ee(this):this},r.add=function(A){const C=Math.max(this.g.length,A.g.length),R=[];let L=0;for(let O=0;O<=C;O++){let j=L+(this.i(O)&65535)+(A.i(O)&65535),I=(j>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);L=I>>>16,j&=65535,I&=65535,R[O]=I<<16|j}return new u(R,R[R.length-1]&-2147483648?-1:0)};function se(A,C){return A.add(ee(C))}r.j=function(A){if(V(this)||V(A))return _;if($(this))return $(A)?ee(this).j(ee(A)):ee(ee(this).j(A));if($(A))return ee(this.j(ee(A)));if(this.l(k)<0&&A.l(k)<0)return y(this.m()*A.m());const C=this.g.length+A.g.length,R=[];for(var L=0;L<2*C;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<A.g.length;O++){const j=this.i(L)>>>16,I=this.i(L)&65535,nt=A.i(O)>>>16,mt=A.i(O)&65535;R[2*L+2*O]+=I*mt,he(R,2*L+2*O),R[2*L+2*O+1]+=j*mt,he(R,2*L+2*O+1),R[2*L+2*O+1]+=I*nt,he(R,2*L+2*O+1),R[2*L+2*O+2]+=j*nt,he(R,2*L+2*O+2)}for(A=0;A<C;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=C;A<2*C;A++)R[A]=0;return new u(R,0)};function he(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function me(A,C){this.g=A,this.h=C}function ye(A,C){if(V(C))throw Error("division by zero");if(V(A))return new me(_,_);if($(A))return C=ye(ee(A),C),new me(ee(C.g),ee(C.h));if($(C))return C=ye(A,ee(C)),new me(ee(C.g),C.h);if(A.g.length>30){if($(A)||$(C))throw Error("slowDivide_ only works with positive integers.");for(var R=T,L=C;L.l(A)<=0;)R=Ie(R),L=Ie(L);var O=Ee(R,1),j=Ee(L,1);for(L=Ee(L,2),R=Ee(R,2);!V(L);){var I=j.add(L);I.l(A)<=0&&(O=O.add(R),j=I),L=Ee(L,1),R=Ee(R,1)}return C=se(A,O.j(C)),new me(O,C)}for(O=_;A.l(C)>=0;){for(R=Math.max(1,Math.floor(A.m()/C.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),j=y(R),I=j.j(C);$(I)||I.l(A)>0;)R-=L,j=y(R),I=j.j(C);V(j)&&(j=T),O=O.add(j),A=se(A,I)}return new me(O,A)}r.B=function(A){return ye(this,A).h},r.and=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<C;L++)R[L]=this.i(L)&A.i(L);return new u(R,this.h&A.h)},r.or=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<C;L++)R[L]=this.i(L)|A.i(L);return new u(R,this.h|A.h)},r.xor=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<C;L++)R[L]=this.i(L)^A.i(L);return new u(R,this.h^A.h)};function Ie(A){const C=A.g.length+1,R=[];for(let L=0;L<C;L++)R[L]=A.i(L)<<1|A.i(L-1)>>>31;return new u(R,A.h)}function Ee(A,C){const R=C>>5;C%=32;const L=A.g.length-R,O=[];for(let j=0;j<L;j++)O[j]=C>0?A.i(j+R)>>>C|A.i(j+R+1)<<32-C:A.i(j+R);return new u(O,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Pw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,ta=u}).apply(typeof Bx<"u"?Bx:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw,Nc,Lw,Yh,Bm,Vw,Uw,zw;(function(){var r,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var v=0;v<d.length;++v){var w=d[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function a(d,v){if(v)e:{var w=i;d=d.split(".");for(var N=0;N<d.length-1;N++){var B=d[N];if(!(B in w))break e;w=w[B]}d=d[d.length-1],N=w[d],v=v(N),v!=N&&v!=null&&e(w,d,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(v){var w=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&w.push([N,v[N]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,w){return d.call.apply(d.bind,arguments)}function y(d,v,w){return y=g,y.apply(null,arguments)}function b(d,v){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function _(d,v){function w(){}w.prototype=v.prototype,d.Z=v.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(N,B,F){for(var oe=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)oe[ze-2]=arguments[ze];return v.prototype[B].apply(N,oe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function k(d){const v=d.length;if(v>0){const w=Array(v);for(let N=0;N<v;N++)w[N]=d[N];return w}return[]}function V(d,v){for(let N=1;N<arguments.length;N++){const B=arguments[N];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=d.length||0;const F=B.length||0;d.length=w+F;for(let oe=0;oe<F;oe++)d[w+oe]=B[oe]}else d.push(B)}}class ${constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function ee(d){u.setTimeout(()=>{throw d},0)}function se(){var d=A;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class he{constructor(){this.h=this.g=null}add(v,w){const N=me.get();N.set(v,w),this.h?this.h.next=N:this.g=N,this.h=N}}var me=new $(()=>new ye,d=>d.reset());class ye{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,Ee=!1,A=new he,C=()=>{const d=Promise.resolve(void 0);Ie=()=>{d.then(R)}};function R(){for(var d;d=se();){try{d.h.call(d.g)}catch(w){ee(w)}var v=me;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}Ee=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};u.addEventListener("test",w,v),u.removeEventListener("test",w,v)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function nt(d,v){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}_(nt,O),nt.prototype.init=function(d,v){const w=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(w=="mouseover"?v=d.fromElement:w=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&nt.Z.h.call(this)},nt.prototype.h=function(){nt.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function le(d,v,w,N,B){this.listener=d,this.proxy=null,this.src=v,this.type=w,this.capture=!!N,this.ha=B,this.key=++Q,this.da=this.fa=!1}function we(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ve(d,v,w){for(const N in d)v.call(w,d[N],N,d)}function rt(d,v){for(const w in d)v.call(void 0,d[w],w,d)}function M(d){const v={};for(const w in d)v[w]=d[w];return v}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(d,v){let w,N;for(let B=1;B<arguments.length;B++){N=arguments[B];for(w in N)d[w]=N[w];for(let F=0;F<X.length;F++)w=X[F],Object.prototype.hasOwnProperty.call(N,w)&&(d[w]=N[w])}}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,v,w,N,B){const F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);const oe=je(d,v,N,B);return oe>-1?(v=d[oe],w||(v.fa=!1)):(v=new le(v,this.src,F,!!N,B),v.fa=w,d.push(v)),v};function Ce(d,v){const w=v.type;if(w in d.g){var N=d.g[w],B=Array.prototype.indexOf.call(N,v,void 0),F;(F=B>=0)&&Array.prototype.splice.call(N,B,1),F&&(we(v),d.g[w].length==0&&(delete d.g[w],d.h--))}}function je(d,v,w,N){for(let B=0;B<d.length;++B){const F=d[B];if(!F.da&&F.listener==v&&F.capture==!!w&&F.ha==N)return B}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Ot={};function gt(d,v,w,N,B){if(Array.isArray(v)){for(let F=0;F<v.length;F++)gt(d,v[F],w,N,B);return null}return w=zt(w),d&&d[mt]?d.J(v,w,p(N)?!!N.capture:!1,B):ei(d,v,w,!1,N,B)}function ei(d,v,w,N,B,F){if(!v)throw Error("Invalid event type");const oe=p(B)?!!B.capture:!!B;let ze=He(d);if(ze||(d[De]=ze=new de(d)),w=ze.add(v,w,N,oe,F),w.proxy)return w;if(N=Fn(),w.proxy=N,N.src=d,N.listener=w,d.addEventListener)j||(B=oe),B===void 0&&(B=!1),d.addEventListener(v.toString(),N,B);else if(d.attachEvent)d.attachEvent(ie(v.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Fn(){function d(w){return v.call(d.src,d.listener,w)}const v=fe;return d}function $n(d,v,w,N,B){if(Array.isArray(v))for(var F=0;F<v.length;F++)$n(d,v[F],w,N,B);else N=p(N)?!!N.capture:!!N,w=zt(w),d&&d[mt]?(d=d.i,F=String(v).toString(),F in d.g&&(v=d.g[F],w=je(v,w,N,B),w>-1&&(we(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete d.g[F],d.h--)))):d&&(d=He(d))&&(v=d.g[v.toString()],d=-1,v&&(d=je(v,w,N,B)),(w=d>-1?v[d]:null)&&gn(w))}function gn(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[mt])Ce(v.i,d);else{var w=d.type,N=d.proxy;v.removeEventListener?v.removeEventListener(w,N,d.capture):v.detachEvent?v.detachEvent(ie(w),N):v.addListener&&v.removeListener&&v.removeListener(N),(w=He(v))?(Ce(w,d),w.h==0&&(w.src=null,v[De]=null)):we(d)}}}function ie(d){return d in Ot?Ot[d]:Ot[d]="on"+d}function fe(d,v){if(d.da)d=!0;else{v=new nt(v,this);const w=d.listener,N=d.ha||d.src;d.fa&&gn(d),d=w.call(N,v)}return d}function He(d){return d=d[De],d instanceof de?d:null}var yt="__closure_events_fn_"+(Math.random()*1e9>>>0);function zt(d){return typeof d=="function"?d:(d[yt]||(d[yt]=function(v){return d.handleEvent(v)}),d[yt])}function st(){L.call(this),this.i=new de(this),this.M=this,this.G=null}_(st,L),st.prototype[mt]=!0,st.prototype.removeEventListener=function(d,v,w,N){$n(this,d,v,w,N)};function Ne(d,v){var w,N=d.G;if(N)for(w=[];N;N=N.G)w.push(N);if(d=d.M,N=v.type||v,typeof v=="string")v=new O(v,d);else if(v instanceof O)v.target=v.target||d;else{var B=v;v=new O(N,d),ce(v,B)}B=!0;let F,oe;if(w)for(oe=w.length-1;oe>=0;oe--)F=v.g=w[oe],B=Jt(F,N,!0,v)&&B;if(F=v.g=d,B=Jt(F,N,!0,v)&&B,B=Jt(F,N,!1,v)&&B,w)for(oe=0;oe<w.length;oe++)F=v.g=w[oe],B=Jt(F,N,!1,v)&&B}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const w=d.g[v];for(let N=0;N<w.length;N++)we(w[N]);delete d.g[v],d.h--}}this.G=null},st.prototype.J=function(d,v,w,N){return this.i.add(String(d),v,!1,w,N)},st.prototype.K=function(d,v,w,N){return this.i.add(String(d),v,!0,w,N)};function Jt(d,v,w,N){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let B=!0;for(let F=0;F<v.length;++F){const oe=v[F];if(oe&&!oe.da&&oe.capture==w){const ze=oe.listener,Yt=oe.ha||oe.src;oe.fa&&Ce(d.i,oe),B=ze.call(Yt,N)!==!1&&B}}return B&&!N.defaultPrevented}function _i(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(d,v||0)}function pa(d){d.g=_i(()=>{d.g=null,d.i&&(d.i=!1,pa(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Tt extends L{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:pa(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(d){L.call(this),this.h=d,this.g={}}_(Un,L);var Ue=[];function dn(d){Ve(d.g,function(v,w){this.g.hasOwnProperty(w)&&gn(v)},d),d.g={}}Un.prototype.N=function(){Un.Z.N.call(this),dn(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ti=u.JSON.stringify,wi=u.JSON.parse,Pr=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Ei(){}function Ti(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cn(){O.call(this,"d")}_(cn,O);function yn(){O.call(this,"c")}_(yn,O);var Rt={},is=null;function Si(){return is=is||new st}Rt.Ia="serverreachability";function so(d){O.call(this,Rt.Ia,d)}_(so,O);function Yn(d){const v=Si();Ne(v,new so(v))}Rt.STAT_EVENT="statevent";function Mr(d,v){O.call(this,Rt.STAT_EVENT,d),this.stat=v}_(Mr,O);function Fe(d){const v=Si();Ne(v,new Mr(v,d))}Rt.Ja="timingevent";function ve(d,v){O.call(this,Rt.Ja,d),this.size=v}_(ve,O);function br(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function _l(d,v,w,N,B,F){d.info(function(){if(d.g)if(F){var oe="",ze=F.split("&");for(let lt=0;lt<ze.length;lt++){var Yt=ze[lt].split("=");if(Yt.length>1){const It=Yt[0];Yt=Yt[1];const Tr=It.split("_");oe=Tr.length>=2&&Tr[1]=="type"?oe+(It+"="+Yt+"&"):oe+(It+"=redacted&")}}}else oe=null;else oe=F;return"XMLHTTP REQ ("+N+") [attempt "+B+"]: "+v+`
`+w+`
`+oe})}function ma(d,v,w,N,B,F,oe){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+B+"]: "+v+`
`+w+`
`+F+" "+oe})}function Kn(d,v,w,N){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+wl(d,w)+(N?" "+N:"")})}function Lr(d,v){d.info(function(){return"TIMEOUT: "+v})}Qn.prototype.info=function(){};function wl(d,v){if(!d.g)return v;if(!v)return null;try{const F=JSON.parse(v);if(F){for(d=0;d<F.length;d++)if(Array.isArray(F[d])){var w=F[d];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var B=N[0];if(B!="noop"&&B!="stop"&&B!="close")for(let oe=1;oe<N.length;oe++)N[oe]=""}}}}return ti(F)}catch{return v}}var Ni={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ni={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ss;function Ci(){}_(Ci,Ei),Ci.prototype.g=function(){return new XMLHttpRequest},ss=new Ci;function xr(d){return encodeURIComponent(String(d))}function ga(d){var v=1;d=d.split(":");const w=[];for(;v>0&&d.length;)w.push(d.shift()),v--;return d.length&&w.push(d.join(":")),w}function Xn(d,v,w,N){this.j=d,this.i=v,this.l=w,this.S=N||1,this.V=new Un(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var jt={},Zt={};function _r(d,v,w){d.M=1,d.A=ue(Pt(v)),d.u=w,d.R=!0,Ai(d,null)}function Ai(d,v){d.F=Date.now(),vn(d),d.B=Pt(d.A);var w=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),uo(w.i,"t",N),d.C=0,w=d.j.L,d.h=new Jn,d.g=Eu(d.j,w?v:null,!d.u),d.P>0&&(d.O=new Tt(y(d.Y,d,d.g),d.P)),v=d.V,w=d.g,N=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ue[0]=B.toString()),B=Ue);for(let F=0;F<B.length;F++){const oe=gt(w,B[F],N||v.handleEvent,!1,v.h||v);if(!oe)break;v.g[oe.key]=oe}v=d.J?M(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Yn(),_l(d.i,d.v,d.B,d.l,d.S,d.u)}Xn.prototype.ba=function(d){d=d.target;const v=this.O;v&&qr(d)==3?v.j():this.Y(d)},Xn.prototype.Y=function(d){try{if(d==this.g)e:{const ze=qr(this.g),Yt=this.g.ya(),lt=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||ze!=4||Yt==7||(Yt==8||lt<=0?Yn(3):Yn(2)),lr(this);var v=this.g.ca();this.X=v;var w=El(this);if(this.o=v==200,ma(this.i,this.v,this.B,this.l,this.S,ze,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,B=this.g;if((N=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var F=N;break t}}F=null}if(d=F)Kn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bn(this,d);else{this.o=!1,this.m=3,Fe(12),Bt(this),Wn(this);break e}}if(this.R){d=!0;let It;for(;!this.K&&this.C<w.length;)if(It=oo(this,w),It==Zt){ze==4&&(this.m=4,Fe(14),d=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(It==jt){this.m=4,Fe(15),Kn(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else Kn(this.i,this.l,It,null),bn(this,It);if(ao(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||w.length!=0||this.h.h||(this.m=1,Fe(16),d=!1),this.o=this.o&&d,!d)Kn(this.i,this.l,w,"[Invalid Chunked Response]"),Bt(this),Wn(this);else if(w.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Dl(oe),oe.P=!0,Fe(11))}}else Kn(this.i,this.l,w,null),bn(this,w);ze==4&&Bt(this),this.o&&!this.K&&(ze==4?bu(this.j,this):(this.o=!1,vn(this)))}else Ii(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,Fe(12)):(this.m=0,Fe(13)),Bt(this),Wn(this)}}}catch{}finally{}};function El(d){if(!ao(d))return d.g.la();const v=xn(d.g);if(v==="")return"";let w="";const N=v.length,B=qr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Bt(d),Wn(d),"";d.h.i=new u.TextDecoder}for(let F=0;F<N;F++)d.h.h=!0,w+=d.h.i.decode(v[F],{stream:!(B&&F==N-1)});return v.length=0,d.h.g+=w,d.C=0,d.h.g}function ao(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function oo(d,v){var w=d.C,N=v.indexOf(`
`,w);return N==-1?Zt:(w=Number(v.substring(w,N)),isNaN(w)?jt:(N+=1,N+w>v.length?Zt:(v=v.slice(N,N+w),d.C=N+w,v)))}Xn.prototype.cancel=function(){this.K=!0,Bt(this)};function vn(d){d.T=Date.now()+d.H,Vr(d,d.H)}function Vr(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=br(y(d.aa,d),v)}function lr(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Xn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Lr(this.i,this.B),this.M!=2&&(Yn(),Fe(17)),Bt(this),this.m=2,Wn(this)):Vr(this,this.T-d)};function Wn(d){d.j.I==0||d.K||bu(d.j,d)}function Bt(d){lr(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,dn(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function bn(d,v){try{var w=d.j;if(w.I!=0&&(w.g==d||kn(w.h,d))){if(!d.L&&kn(w.h,d)&&w.I==3){try{var N=w.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var B=N;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)go(w),ms(w);else break e;wa(w),Fe(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=br(y(w.Va,w),6e3));cr(w.h)<=1&&w.ta&&(w.ta=void 0)}else oi(w,11)}else if((d.L||w.g==d)&&go(w),!I(v))for(B=w.Ba.g.parse(v),v=0;v<B.length;v++){let lt=B[v];const It=lt[0];if(!(It<=w.K))if(w.K=It,lt=lt[1],w.I==2)if(lt[0]=="c"){w.M=lt[1],w.ba=lt[2];const Tr=lt[3];Tr!=null&&(w.ka=Tr,w.j.info("VER="+w.ka));const li=lt[4];li!=null&&(w.za=li,w.j.info("SVER="+w.za));const Hr=lt[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(N=1.5*Hr,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Fr=d.g;if(Fr){const Ea=Fr.g?Fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ea){var F=N.h;F.g||Ea.indexOf("spdy")==-1&&Ea.indexOf("quic")==-1&&Ea.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(zr(F,F.h),F.h=null))}if(N.G){const yo=Fr.g?Fr.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(N.wa=yo,J(N.J,N.G,yo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var oe=d;if(N.na=wu(N,N.L?N.ba:null,N.W),oe.L){as(N.h,oe);var ze=oe,Yt=N.O;Yt&&(ze.H=Yt),ze.D&&(lr(ze),vn(ze)),N.g=oe}else yu(N);w.i.length>0&&ai(w)}else lt[0]!="stop"&&lt[0]!="close"||oi(w,7);else w.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?oi(w,7):kl(w):lt[0]!="noop"&&w.l&&w.l.qa(lt),w.A=0)}}Yn(4)}catch{}}var kt=class{constructor(d,v){this.g=d,this.map=v}};function Ri(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ur(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function cr(d){return d.h?1:d.g?d.g.size:0}function kn(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function zr(d,v){d.g?d.g.add(v):d.h=v}function as(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Ri.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function os(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const w of d.g.values())v=v.concat(w.G);return v}return k(d.i)}var lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ls(d,v){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const N=d[w].indexOf("=");let B,F=null;N>=0?(B=d[w].substring(0,N),F=d[w].substring(N+1)):B=d[w],v(B,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function In(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof In?(this.l=d.l,E(this,d.j),this.o=d.o,this.g=d.g,Z(this,d.u),this.h=d.h,z(this,mu(d.i)),this.m=d.m):d&&(v=String(d).match(lo))?(this.l=!1,E(this,v[1]||"",!0),this.o=qe(v[2]||""),this.g=qe(v[3]||"",!0),Z(this,v[4]),this.h=qe(v[5]||"",!0),z(this,v[6]||"",!0),this.m=qe(v[7]||"")):(this.l=!1,this.i=new us(null,this.l))}In.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Mt(v,co,!0),":");var w=this.g;return(w||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Mt(v,co,!0),"@"),d.push(xr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(Mt(w,w.charAt(0)=="/"?Tl:du,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",Mt(w,fu)),d.join("")},In.prototype.resolve=function(d){const v=Pt(this);let w=!!d.j;w?E(v,d.j):w=!!d.o,w?v.o=d.o:w=!!d.g,w?v.g=d.g:w=d.u!=null;var N=d.h;if(w)Z(v,d.u);else if(w=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var B=v.h.lastIndexOf("/");B!=-1&&(N=v.h.slice(0,B+1)+N)}if(B=N,B==".."||B==".")N="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){N=B.lastIndexOf("/",0)==0,B=B.split("/");const F=[];for(let oe=0;oe<B.length;){const ze=B[oe++];ze=="."?N&&oe==B.length&&F.push(""):ze==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),N&&oe==B.length&&F.push("")):(F.push(ze),N=!0)}N=F.join("/")}else N=B}return w?v.h=N:w=d.i.toString()!=="",w?z(v,mu(d.i)):w=!!d.m,w&&(v.m=d.m),v};function Pt(d){return new In(d)}function E(d,v,w){d.j=w?qe(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Z(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function z(d,v,w){v instanceof us?(d.i=v,ho(d.i,d.l)):(w||(v=Mt(v,cs)),d.i=new us(v,d.l))}function J(d,v,w){d.i.set(v,w)}function ue(d){return J(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function qe(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Mt(d,v,w){return typeof d=="string"?(d=encodeURI(d).replace(v,$t),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function $t(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var co=/[#\/\?@]/g,du=/[#\?:]/g,Tl=/[#\?]/g,cs=/[#\?@]/g,fu=/#/g;function us(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Zn(d){d.g||(d.g=new Map,d.h=0,d.i&&ls(d.i,function(v,w){d.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}r=us.prototype,r.add=function(d,v){Zn(this),this.i=null,d=hs(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(v),this.h+=1,this};function pu(d,v){Zn(d),v=hs(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Sl(d,v){return Zn(d),v=hs(d,v),d.g.has(v)}r.forEach=function(d,v){Zn(this),this.g.forEach(function(w,N){w.forEach(function(B){d.call(v,B,N,this)},this)},this)};function Nl(d,v){Zn(d);let w=[];if(typeof v=="string")Sl(d,v)&&(w=w.concat(d.g.get(hs(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)w=w.concat(d[v]);return w}r.set=function(d,v){return Zn(this),this.i=null,d=hs(this,d),Sl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},r.get=function(d,v){return d?(d=Nl(this,d),d.length>0?String(d[0]):v):v};function uo(d,v,w){pu(d,v),w.length>0&&(d.i=null,d.g.set(hs(d,v),k(w)),d.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var w=v[N];const B=xr(w);w=Nl(this,w);for(let F=0;F<w.length;F++){let oe=B;w[F]!==""&&(oe+="="+xr(w[F])),d.push(oe)}}return this.i=d.join("&")};function mu(d){const v=new us;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function hs(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function ho(d,v){v&&!d.j&&(Zn(d),d.i=null,d.g.forEach(function(w,N){const B=N.toLowerCase();N!=B&&(pu(this,N),uo(this,B,w))},d)),d.j=v}function Br(d,v){const w=new Qn;if(u.Image){const N=new Image;N.onload=b(wr,w,"TestLoadImage: loaded",!0,v,N),N.onerror=b(wr,w,"TestLoadImage: error",!1,v,N),N.onabort=b(wr,w,"TestLoadImage: abort",!1,v,N),N.ontimeout=b(wr,w,"TestLoadImage: timeout",!1,v,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else v(!1)}function Cl(d,v){const w=new Qn,N=new AbortController,B=setTimeout(()=>{N.abort(),wr(w,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:N.signal}).then(F=>{clearTimeout(B),F.ok?wr(w,"TestPingServer: ok",!0,v):wr(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),wr(w,"TestPingServer: error",!1,v)})}function wr(d,v,w,N,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),N(w)}catch{}}function ds(){this.g=new Pr}function ri(d){this.i=d.Sb||null,this.h=d.ab||!1}_(ri,Ei),ri.prototype.g=function(){return new ya(this.i,this.h)};function ya(d,v){st.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(ya,st),r=ya.prototype,r.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Gr(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function fo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?fs(this):Gr(this),this.readyState==3&&fo(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,fs(this))},r.Na=function(d){this.g&&(this.response=d,fs(this))},r.ga=function(){this.g&&fs(this)};function fs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Gr(d)}r.setRequestHeader=function(d,v){this.A.append(d,v)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=v.next();return d.join(`\r
`)};function Gr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Er(d){let v="";return Ve(d,function(w,N){v+=N,v+=":",v+=w,v+=`\r
`}),v}function va(d,v,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=Er(w),typeof d=="string"?w!=null&&xr(w):J(d,v,w))}function vt(d){st.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(vt,st);var ii=/^https?$/i,Al=["POST","PUT"];r=vt.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,v,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ss.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(F){ba(this,F);return}if(d=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var B in N)w.set(B,N[B]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())w.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(F=>F.toLowerCase()=="content-type"),B=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Al,v,void 0)>=0)||N||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,oe]of w)this.g.setRequestHeader(F,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(F){ba(this,F)}};function ba(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Rl(d),ki(d)}function Rl(d){d.A||(d.A=!0,Ne(d,"complete"),Ne(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ne(this,"complete"),Ne(this,"abort"),ki(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),vt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?xa(this):this.Xa())},r.Xa=function(){xa(this)};function xa(d){if(d.h&&typeof l<"u"){if(d.v&&qr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ne(d,"readystatechange"),qr(d)==4){d.h=!1;try{const F=d.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var N;if(N=F===0){let oe=String(d.D).match(lo)[1]||null;!oe&&u.self&&u.self.location&&(oe=u.self.location.protocol.slice(0,-1)),N=!ii.test(oe?oe.toLowerCase():"")}w=N}if(w)Ne(d,"complete"),Ne(d,"success");else{d.o=6;try{var B=qr(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",Rl(d)}}finally{ki(d)}}}}function ki(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,v||Ne(d,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function qr(d){return d.g?d.g.readyState:0}r.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),wi(v)}};function xn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ii(d){const v={};d=(d.g&&qr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(I(d[N]))continue;var w=ga(d[N]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const F=v[B]||[];v[B]=F,F.push(w)}rt(v,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function si(d,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||v}function ps(d){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=si("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=si("baseRetryDelayMs",5e3,d),this.Za=si("retryDelaySeedMs",1e4,d),this.Ta=si("forwardChannelMaxRetries",2,d),this.va=si("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Ri(d&&d.concurrentRequestLimit),this.Ba=new ds,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ps.prototype,r.ka=8,r.I=1,r.connect=function(d,v,w,N){Fe(0),this.W=d,this.H=v||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=wu(this,null,this.W),ai(this)};function kl(d){if(po(d),d.I==3){var v=d.V++,w=Pt(d.J);if(J(w,"SID",d.M),J(w,"RID",v),J(w,"TYPE","terminate"),_a(d,w),v=new Xn(d,d.j,v),v.M=2,v.A=ue(Pt(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=v.A,w=!0),w||(v.g=Eu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),vn(v)}_u(d)}function ms(d){d.g&&(Dl(d),d.g.cancel(),d.g=null)}function po(d){ms(d),d.v&&(u.clearTimeout(d.v),d.v=null),go(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ai(d){if(!Ur(d.h)&&!d.m){d.m=!0;var v=d.Ea;Ie||C(),Ee||(Ie(),Ee=!0),A.add(v,d),d.D=0}}function mo(d,v){return cr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=br(y(d.Ea,d,v),xu(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new Xn(this,this.j,d);let F=this.o;if(this.U&&(F?(F=M(F),ce(F,this.U)):F=this.U),this.u!==null||this.R||(B.J=F,F=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=gu(this,B,v),w=Pt(this.J),J(w,"RID",d),J(w,"CVER",22),this.G&&J(w,"X-HTTP-Session-Id",this.G),_a(this,w),F&&(this.R?v="headers="+xr(Er(F))+"&"+v:this.u&&va(w,this.u,F)),zr(this.h,B),this.Ra&&J(w,"TYPE","init"),this.S?(J(w,"$req",v),J(w,"SID","null"),B.U=!0,_r(B,w,null)):_r(B,w,v),this.I=2}}else this.I==3&&(d?Il(this,d):this.i.length==0||Ur(this.h)||Il(this))};function Il(d,v){var w;v?w=v.l:w=d.V++;const N=Pt(d.J);J(N,"SID",d.M),J(N,"RID",w),J(N,"AID",d.K),_a(d,N),d.u&&d.o&&va(N,d.u,d.o),w=new Xn(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),v&&(d.i=v.G.concat(d.i)),v=gu(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),zr(d.h,w),_r(w,N,v)}function _a(d,v){d.H&&Ve(d.H,function(w,N){J(v,N,w)}),d.l&&Ve({},function(w,N){J(v,N,w)})}function gu(d,v,w){w=Math.min(d.i.length,w);const N=d.l?y(d.l.Ka,d.l,d):null;e:{var B=d.i;let ze=-1;for(;;){const Yt=["count="+w];ze==-1?w>0?(ze=B[0].g,Yt.push("ofs="+ze)):ze=0:Yt.push("ofs="+ze);let lt=!0;for(let It=0;It<w;It++){var F=B[It].g;const Tr=B[It].map;if(F-=ze,F<0)ze=Math.max(0,B[It].g-100),lt=!1;else try{F="req"+F+"_"||"";try{var oe=Tr instanceof Map?Tr:Object.entries(Tr);for(const[li,Hr]of oe){let Fr=Hr;p(Hr)&&(Fr=ti(Hr)),Yt.push(F+li+"="+encodeURIComponent(Fr))}}catch(li){throw Yt.push(F+"type="+encodeURIComponent("_badmap")),li}}catch{N&&N(Tr)}}if(lt){oe=Yt.join("&");break e}}oe=void 0}return d=d.i.splice(0,w),v.G=d,oe}function yu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Ie||C(),Ee||(Ie(),Ee=!0),A.add(v,d),d.A=0}}function wa(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=br(y(d.Da,d),xu(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=br(y(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Fe(10),ms(this),vu(this))};function Dl(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function vu(d){d.g=new Xn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Pt(d.na);J(v,"RID","rpc"),J(v,"SID",d.M),J(v,"AID",d.K),J(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&J(v,"TO",d.ia),J(v,"TYPE","xmlhttp"),_a(d,v),d.u&&d.o&&va(v,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=ue(Pt(v)),w.u=null,w.R=!0,Ai(w,d)}r.Va=function(){this.C!=null&&(this.C=null,ms(this),wa(this),Fe(19))};function go(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function bu(d,v){var w=null;if(d.g==v){go(d),Dl(d),d.g=null;var N=2}else if(kn(d.h,v))w=v.G,as(d.h,v),N=1;else return;if(d.I!=0){if(v.o)if(N==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var B=d.D;N=Si(),Ne(N,new ve(N,w)),ai(d)}else yu(d);else if(B=v.m,B==3||B==0&&v.X>0||!(N==1&&mo(d,v)||N==2&&wa(d)))switch(w&&w.length>0&&(v=d.h,v.i=v.i.concat(w)),B){case 1:oi(d,5);break;case 4:oi(d,10);break;case 3:oi(d,6);break;default:oi(d,2)}}}function xu(d,v){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*v}function oi(d,v){if(d.j.info("Error code "+v),v==2){var w=y(d.bb,d),N=d.Ua;const B=!N;N=new In(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||E(N,"https"),ue(N),B?Br(N.toString(),w):Cl(N.toString(),w)}else Fe(2);d.I=0,d.l&&d.l.pa(v),_u(d),po(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function _u(d){if(d.I=0,d.ja=[],d.l){const v=os(d.h);(v.length!=0||d.i.length!=0)&&(V(d.ja,v),V(d.ja,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.oa()}}function wu(d,v,w){var N=w instanceof In?Pt(w):new In(w);if(N.g!="")v&&(N.g=v+"."+N.g),Z(N,N.u);else{var B=u.location;N=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;const F=new In(null);N&&E(F,N),v&&(F.g=v),B&&Z(F,B),w&&(F.h=w),N=F}return w=d.G,v=d.wa,w&&v&&J(N,w,v),J(N,"VER",d.ka),_a(d,N),N}function Eu(d,v,w){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new vt(new ri({ab:w})):new vt(d.ma),v.Fa(d.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}r=Tu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function gs(){}gs.prototype.g=function(d,v){return new zn(d,v)};function zn(d,v){st.call(this),this.g=new ps(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!I(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Di(this)}_(zn,st),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){kl(this.g)},zn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=ti(d),d=w);v.i.push(new kt(v.Ya++,d)),v.I==3&&ai(v)},zn.prototype.N=function(){this.g.l=null,delete this.j,kl(this.g),delete this.g,zn.Z.N.call(this)};function Su(d){cn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const w in v){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}_(Su,cn);function Nu(){yn.call(this),this.status=1}_(Nu,yn);function Di(d){this.g=d}_(Di,Tu),Di.prototype.ra=function(){Ne(this.g,"a")},Di.prototype.qa=function(d){Ne(this.g,new Su(d))},Di.prototype.pa=function(d){Ne(this.g,new Nu)},Di.prototype.oa=function(){Ne(this.g,"b")},gs.prototype.createWebChannel=gs.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,zw=function(){return new gs},Uw=function(){return Si()},Vw=Rt,Bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,Yh=Ni,ni.COMPLETE="complete",Lw=ni,Ti.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",st.prototype.listen=st.prototype.J,Nc=Ti,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,Mw=vt}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl="12.9.0";function tk(r){gl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new mg("@firebase/firestore");function Ko(){return Qa.logLevel}function ge(r,...e){if(Qa.logLevel<=Je.DEBUG){const t=e.map(Ng);Qa.debug(`Firestore (${gl}): ${r}`,...t)}}function es(r,...e){if(Qa.logLevel<=Je.ERROR){const t=e.map(Ng);Qa.error(`Firestore (${gl}): ${r}`,...t)}}function Ka(r,...e){if(Qa.logLevel<=Je.WARN){const t=e.map(Ng);Qa.warn(`Firestore (${gl}): ${r}`,...t)}}function Ng(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Bw(r,i,t)}function Bw(r,e,t){let i=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw es(i),new Error(i)}function ht(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||Bw(e,a,i)}function Me(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ns{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jn.UNAUTHENTICATED)))}shutdown(){}}class rk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ik{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let i=this.i;const a=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ji,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},p=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ji)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ht(typeof i.accessToken=="string",31837,{l:i}),new Gw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class sk{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ak{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new sk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ok{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);const i=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Gx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Gx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=lk(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function We(r,e){return r<e?-1:r>e?1:0}function Gm(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return vm(a)===vm(l)?We(a,l):vm(a)?1:-1}return We(r.length,e.length)}const ck=55296,uk=57343;function vm(r){const e=r.charCodeAt(0);return e>=ck&&e<=uk}function ol(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="__name__";class fi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ke(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=fi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return We(e.length,t.length)}static compareSegments(e,t){const i=fi.isNumericId(e),a=fi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?fi.extractNumericId(e).compare(fi.extractNumericId(t)):Gm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ta.fromString(e.substring(4,e.length-2))}}class St extends fi{construct(e,t,i){return new St(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const hk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends fi{construct(e,t,i){return new Nn(e,t,i)}static isValidIdentifier(e){return hk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qx}static keyField(){return new Nn([qx])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new pe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new pe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,a+=2}else p==="`"?(u=!u,a++):p!=="."||u?(i+=p,a++):(l(),a++)}if(l(),u)throw new pe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(t)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(St.fromString(e))}static fromName(e){return new Se(St.fromString(e).popFirst(5))}static empty(){return new Se(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(r,e,t){if(!t)throw new pe(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function dk(r,e,t,i){if(e===!0&&i===!0)throw new pe(ne.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Hx(r){if(!Se.isDocumentKey(r))throw new pe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Fx(r){if(Se.isDocumentKey(r))throw new pe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Hw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function kd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ke(12329,{type:typeof r})}function vr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kd(r);throw new pe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(r,e){const t={typeString:r};return e&&(t.value=e),t}function su(r,e){if(!Hw(r))throw new pe(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const u=r[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new pe(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=-62135596800,Yx=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Yx);return new At(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$x)throw new pe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yx}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:At._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,At._jsonSchema))return new At(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:ln("string",At._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new At(0,0))}static max(){return new Oe(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=-1;function fk(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Oe.fromTimestamp(i===1e9?new At(t+1,0):new At(t,i));return new ra(a,Se.empty(),e)}function pk(r){return new ra(r.readTime,r.key,Hc)}class ra{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ra(Oe.min(),Se.empty(),Hc)}static max(){return new ra(Oe.max(),Se.empty(),Hc)}}function mk(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(r.documentKey,e.documentKey),t!==0?t:We(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==gk)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,i)=>{t(e)}))}static reject(e){return new re(((t,i)=>{i(e)}))}static waitFor(e){return new re(((t,i)=>{let a=0,l=0,u=!1;e.forEach((p=>{++a,p.next((()=>{++l,u&&l===a&&t()}),(g=>i(g)))})),u=!0,l===a&&t()}))}static or(e){let t=re.resolve(!1);for(const i of e)t=t.next((a=>a?re.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new re(((i,a)=>{const l=e.length,u=new Array(l);let p=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((b=>{u[y]=b,++p,p===l&&i(u)}),(b=>a(b)))}}))}static doWhile(e,t){return new re(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function vk(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=-1;function Dd(r){return r==null}function hd(r){return r===0&&1/r==-1/0}function bk(r){return typeof r=="number"&&Number.isInteger(r)&&!hd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="";function xk(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Qx(e)),e=_k(r.get(t),e);return Qx(e)}function _k(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Fw:t+="";break;default:t+=l}}return t}function Qx(r){return r+Fw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function da(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function $w(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Sn.RED,this.left=a??Sn.EMPTY,this.right=l??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Sn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Sn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xx(this.data.getIterator())}getIteratorFrom(e){return new Xx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class Xx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new yr([])}unionWith(e){let t=new hn(Nn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Yw("Invalid base64 string: "+l):l}})(e);return new Rn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const wk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(r){if(ht(!!r,39018),typeof r=="string"){let e=0;const t=wk.exec(r);if(ht(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xt(r.seconds),nanos:Xt(r.nanos)}}function Xt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function sa(r){return typeof r=="string"?Rn.fromBase64String(r):Rn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="server_timestamp",Kw="__type__",Xw="__previous_value__",Jw="__local_write_time__";function Rg(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Kw])==null?void 0:i.stringValue)===Qw}function Od(r){const e=r.mapValue.fields[Xw];return Rg(e)?Od(e):e}function Fc(r){const e=ia(r.mapValue.fields[Jw].timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t,i,a,l,u,p,g,y,b,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=_}}const dd="(default)";class $c{constructor(e,t){this.projectId=e,this.database=t||dd}static empty(){return new $c("","")}get isDefaultDatabase(){return this.database===dd}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}function Tk(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new pe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="__type__",Sk="__max__",jh={mapValue:{}},Zw="__vector__",fd="value";function aa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rg(r)?4:Ck(r)?9007199254740991:Nk(r)?10:11:ke(28295,{value:r})}function xi(r,e){if(r===e)return!0;const t=aa(r);if(t!==aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Fc(r).isEqual(Fc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ia(a.timestampValue),p=ia(l.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return sa(a.bytesValue).isEqual(sa(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return Xt(a.geoPointValue.latitude)===Xt(l.geoPointValue.latitude)&&Xt(a.geoPointValue.longitude)===Xt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Xt(a.integerValue)===Xt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Xt(a.doubleValue),p=Xt(l.doubleValue);return u===p?hd(u)===hd(p):isNaN(u)&&isNaN(p)}return!1})(r,e);case 9:return ol(r.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},p=l.mapValue.fields||{};if(Kx(u)!==Kx(p))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(p[g]===void 0||!xi(u[g],p[g])))return!1;return!0})(r,e);default:return ke(52216,{left:r})}}function Yc(r,e){return(r.values||[]).find((t=>xi(t,e)))!==void 0}function ll(r,e){if(r===e)return 0;const t=aa(r),i=aa(e);if(t!==i)return We(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(r.booleanValue,e.booleanValue);case 2:return(function(l,u){const p=Xt(l.integerValue||l.doubleValue),g=Xt(u.integerValue||u.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return Jx(r.timestampValue,e.timestampValue);case 4:return Jx(Fc(r),Fc(e));case 5:return Gm(r.stringValue,e.stringValue);case 6:return(function(l,u){const p=sa(l),g=sa(u);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,u){const p=l.split("/"),g=u.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=We(p[y],g[y]);if(b!==0)return b}return We(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,u){const p=We(Xt(l.latitude),Xt(u.latitude));return p!==0?p:We(Xt(l.longitude),Xt(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Wx(r.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,k,V,$;const p=l.fields||{},g=u.fields||{},y=(T=p[fd])==null?void 0:T.arrayValue,b=(k=g[fd])==null?void 0:k.arrayValue,_=We(((V=y==null?void 0:y.values)==null?void 0:V.length)||0,(($=b==null?void 0:b.values)==null?void 0:$.length)||0);return _!==0?_:Wx(y,b)})(r.mapValue,e.mapValue);case 11:return(function(l,u){if(l===jh.mapValue&&u===jh.mapValue)return 0;if(l===jh.mapValue)return 1;if(u===jh.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),y=u.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let _=0;_<g.length&&_<b.length;++_){const T=Gm(g[_],b[_]);if(T!==0)return T;const k=ll(p[g[_]],y[b[_]]);if(k!==0)return k}return We(g.length,b.length)})(r.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function Jx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return We(r,e);const t=ia(r),i=ia(e),a=We(t.seconds,i.seconds);return a!==0?a:We(t.nanos,i.nanos)}function Wx(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=ll(t[a],i[a]);if(l)return l}return We(t.length,i.length)}function cl(r){return qm(r)}function qm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=ia(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return sa(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Se.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=qm(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${qm(t.fields[u])}`;return a+"}"})(r.mapValue):ke(61005,{value:r})}function Qh(r){switch(aa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Od(r);return e?16+Qh(e):16;case 5:return 2*r.stringValue.length;case 6:return sa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Qh(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return da(i.fields,((l,u)=>{a+=l.length+Qh(u)})),a})(r.mapValue);default:throw ke(13486,{value:r})}}function Zx(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Hm(r){return!!r&&"integerValue"in r}function kg(r){return!!r&&"arrayValue"in r}function e_(r){return!!r&&"nullValue"in r}function t_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Kh(r){return!!r&&"mapValue"in r}function Nk(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Ww])==null?void 0:i.stringValue)===Zw}function Dc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return da(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Dc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dc(r.arrayValue.values[t]);return e}return{...r}}function Ck(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Sk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(t)}setAll(e){let t=Nn.emptyPath(),i={},a=[];e.forEach(((u,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,a),i={},a=[],t=p.popLast()}u?i[p.lastSegment()]=Dc(u):a.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Kh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){da(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new or(Dc(this.value))}}function eE(r){const e=[];return da(r.fields,((t,i)=>{const a=new Nn([t]);if(Kh(i)){const l=eE(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t,i,a,l,u,p){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=p}static newInvalidDocument(e){return new Mn(e,0,Oe.min(),Oe.min(),Oe.min(),or.empty(),0)}static newFoundDocument(e,t,i,a){return new Mn(e,1,t,Oe.min(),i,a,0)}static newNoDocument(e,t){return new Mn(e,2,t,Oe.min(),Oe.min(),or.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,Oe.min(),Oe.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.position=e,this.inclusive=t}}function n_(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],u=r.position[a];if(l.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=ll(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function r_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!xi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ak(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{}class on extends tE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new kk(e,t,i):t==="array-contains"?new Ok(e,i):t==="in"?new jk(e,i):t==="not-in"?new Pk(e,i):t==="array-contains-any"?new Mk(e,i):new on(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Ik(e,i):new Dk(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ll(t,this.value)):t!==null&&aa(this.value)===aa(t)&&this.matchesComparison(ll(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends tE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Zr(e,t)}matches(e){return nE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nE(r){return r.op==="and"}function rE(r){return Rk(r)&&nE(r)}function Rk(r){for(const e of r.filters)if(e instanceof Zr)return!1;return!0}function Fm(r){if(r instanceof on)return r.field.canonicalString()+r.op.toString()+cl(r.value);if(rE(r))return r.filters.map((e=>Fm(e))).join(",");{const e=r.filters.map((t=>Fm(t))).join(",");return`${r.op}(${e})`}}function iE(r,e){return r instanceof on?(function(i,a){return a instanceof on&&i.op===a.op&&i.field.isEqual(a.field)&&xi(i.value,a.value)})(r,e):r instanceof Zr?(function(i,a){return a instanceof Zr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,p)=>l&&iE(u,a.filters[p])),!0):!1})(r,e):void ke(19439)}function sE(r){return r instanceof on?(function(t){return`${t.field.canonicalString()} ${t.op} ${cl(t.value)}`})(r):r instanceof Zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(sE).join(" ,")+"}"})(r):"Filter"}class kk extends on{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ik extends on{constructor(e,t){super(e,"in",t),this.keys=aE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Dk extends on{constructor(e,t){super(e,"not-in",t),this.keys=aE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class Ok extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kg(t)&&Yc(t.arrayValue,this.value)}}class jk extends on{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yc(this.value.arrayValue,t)}}class Pk extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yc(this.value.arrayValue,t)}}class Mk extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Yc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t=null,i=[],a=[],l=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=p,this.Te=null}}function i_(r,e=null,t=[],i=[],a=null,l=null,u=null){return new Lk(r,e,t,i,a,l,u)}function Ig(r){const e=Me(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Fm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Dd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>cl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>cl(i))).join(",")),e.Te=t}return e.Te}function Dg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Ak(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!iE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!r_(r.startAt,e.startAt)&&r_(r.endAt,e.endAt)}function $m(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t=null,i=[],a=[],l=null,u="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Vk(r,e,t,i,a,l,u,p){return new au(r,e,t,i,a,l,u,p)}function jd(r){return new au(r)}function s_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Uk(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function oE(r){return r.collectionGroup!==null}function Oc(r){const e=Me(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new hn(Nn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new md(l,i))})),t.has(Nn.keyField().canonicalString())||e.Ie.push(new md(Nn.keyField(),i))}return e.Ie}function yi(r){const e=Me(r);return e.Ee||(e.Ee=zk(e,Oc(r))),e.Ee}function zk(r,e){if(r.limitType==="F")return i_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new md(a.field,l)}));const t=r.endAt?new pd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new pd(r.startAt.position,r.startAt.inclusive):null;return i_(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Ym(r,e){const t=r.filters.concat([e]);return new au(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Qm(r,e,t){return new au(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Pd(r,e){return Dg(yi(r),yi(e))&&r.limitType===e.limitType}function lE(r){return`${Ig(yi(r))}|lt:${r.limitType}`}function Xo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>sE(a))).join(", ")}]`),Dd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>cl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>cl(a))).join(",")),`Target(${i})`})(yi(r))}; limitType=${r.limitType})`}function Md(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Se.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of Oc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(u,p,g){const y=n_(u,p,g);return u.inclusive?y<=0:y<0})(i.startAt,Oc(i),a)||i.endAt&&!(function(u,p,g){const y=n_(u,p,g);return u.inclusive?y>=0:y>0})(i.endAt,Oc(i),a))})(r,e)}function Bk(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function cE(r){return(e,t)=>{let i=!1;for(const a of Oc(r)){const l=Gk(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function Gk(r,e,t){const i=r.field.isKeyField()?Se.comparator(e.key,t.key):(function(l,u,p){const g=u.data.field(l),y=p.data.field(l);return g!==null&&y!==null?ll(g,y):ke(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return $w(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new Vt(Se.comparator);function ts(){return qk}const uE=new Vt(Se.comparator);function Cc(...r){let e=uE;for(const t of r)e=e.insert(t.key,t);return e}function hE(r){let e=uE;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ba(){return jc()}function dE(){return jc()}function jc(){return new no((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Hk=new Vt(Se.comparator),Fk=new hn(Se.comparator);function Ze(...r){let e=Fk;for(const t of r)e=e.add(t);return e}const $k=new hn(We);function Yk(){return $k}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function fE(r){return{integerValue:""+r}}function Qk(r,e){return bk(e)?fE(e):Og(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){this._=void 0}}function Kk(r,e,t){return r instanceof gd?(function(a,l){const u={fields:{[Kw]:{stringValue:Qw},[Jw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Rg(l)&&(l=Od(l)),l&&(u.fields[Xw]=l),{mapValue:u}})(t,e):r instanceof Qc?mE(r,e):r instanceof Kc?gE(r,e):(function(a,l){const u=pE(a,l),p=a_(u)+a_(a.Ae);return Hm(u)&&Hm(a.Ae)?fE(p):Og(a.serializer,p)})(r,e)}function Xk(r,e,t){return r instanceof Qc?mE(r,e):r instanceof Kc?gE(r,e):t}function pE(r,e){return r instanceof yd?(function(i){return Hm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class gd extends Ld{}class Qc extends Ld{constructor(e){super(),this.elements=e}}function mE(r,e){const t=yE(e);for(const i of r.elements)t.some((a=>xi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Kc extends Ld{constructor(e){super(),this.elements=e}}function gE(r,e){let t=yE(e);for(const i of r.elements)t=t.filter((a=>!xi(a,i)));return{arrayValue:{values:t}}}class yd extends Ld{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function a_(r){return Xt(r.integerValue||r.doubleValue)}function yE(r){return kg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Jk(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof Qc&&a instanceof Qc||i instanceof Kc&&a instanceof Kc?ol(i.elements,a.elements,xi):i instanceof yd&&a instanceof yd?xi(i.Ae,a.Ae):i instanceof gd&&a instanceof gd})(r.transform,e.transform)}class Wk{constructor(e,t){this.version=e,this.transformResults=t}}class Xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Vd{}function vE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new jg(r.key,Xr.none()):new ou(r.key,r.data,Xr.none());{const t=r.data,i=or.empty();let a=new hn(Nn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new fa(r.key,i,new yr(a.toArray()),Xr.none())}}function Zk(r,e,t){r instanceof ou?(function(a,l,u){const p=a.value.clone(),g=l_(a.fieldTransforms,l,u.transformResults);p.setAll(g),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(r,e,t):r instanceof fa?(function(a,l,u){if(!Xh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const p=l_(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(bE(a)),g.setAll(p),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(r,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Pc(r,e,t,i){return r instanceof ou?(function(l,u,p,g){if(!Xh(l.precondition,u))return p;const y=l.value.clone(),b=c_(l.fieldTransforms,g,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof fa?(function(l,u,p,g){if(!Xh(l.precondition,u))return p;const y=c_(l.fieldTransforms,g,u),b=u.data;return b.setAll(bE(l)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(r,e,t,i):(function(l,u,p){return Xh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(r,e,t)}function eI(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=pE(i.transform,a||null);l!=null&&(t===null&&(t=or.empty()),t.set(i.field,l))}return t||null}function o_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&ol(i,a,((l,u)=>Jk(l,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ou extends Vd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class fa extends Vd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function bE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function l_(r,e,t){const i=new Map;ht(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],u=l.transform,p=e.data.field(l.field);i.set(l.field,Xk(u,p,t[a]))}return i}function c_(r,e,t){const i=new Map;for(const a of r){const l=a.transform,u=t.data.field(a.field);i.set(a.field,Kk(l,u,e))}return i}class jg extends Vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tI extends Vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Zk(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Pc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Pc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=dE();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let p=this.applyToLocalView(u,l.mutatedFields);p=t.has(a.key)?null:p;const g=vE(u,p);g!==null&&i.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,((t,i)=>o_(t,i)))&&ol(this.baseMutations,e.baseMutations,((t,i)=>o_(t,i)))}}class Pg{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ht(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return Hk})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new Pg(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn,it;function sI(r){switch(r){case ne.OK:return ke(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return ke(15467,{code:r})}}function xE(r){if(r===void 0)return es("GRPC error has no .code"),ne.UNKNOWN;switch(r){case sn.OK:return ne.OK;case sn.CANCELLED:return ne.CANCELLED;case sn.UNKNOWN:return ne.UNKNOWN;case sn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case sn.INTERNAL:return ne.INTERNAL;case sn.UNAVAILABLE:return ne.UNAVAILABLE;case sn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case sn.NOT_FOUND:return ne.NOT_FOUND;case sn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case sn.ABORTED:return ne.ABORTED;case sn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case sn.DATA_LOSS:return ne.DATA_LOSS;default:return ke(39323,{code:r})}}(it=sn||(sn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new ta([4294967295,4294967295],0);function u_(r){const e=aI().encode(r),t=new Pw;return t.update(e),new Uint8Array(t.digest())}function h_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ta([t,i],0),new ta([a,l],0)]}class Mg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ac(`Invalid padding: ${t}`);if(i<0)throw new Ac(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ta.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ta.fromNumber(i)));return a.compare(oI)===1&&(a=new ta([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=u_(e),[i,a]=h_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Mg(l,a,t);return i.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const t=u_(e),[i,a]=h_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ud(Oe.min(),a,new Vt(We),ts(),Ze())}}class lu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new lu(i,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class _E{constructor(e,t){this.targetId=e,this.Ce=t}}class wE{constructor(e,t,i=Rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class d_{constructor(){this.ve=0,this.Fe=f_(),this.Me=Rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),i=Ze();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ke(38017,{changeType:l})}})),new lu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=f_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class lI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ts(),this.He=Ph(),this.Je=Ph(),this.Ze=new Vt(We)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if($m(l))if(i===0){const u=new Se(l.path);this.et(t,u,Mn.newNoDocument(u,Oe.min()))}else ht(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const p=this.ut(e),g=p?this.ct(p,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,p;try{u=sa(i).toUint8Array()}catch(g){if(g instanceof Yw)return Ka("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Mg(u,a,l)}catch(g){return Ka(g instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const p=this.ot(u);if(p){if(l.current&&$m(p.target)){const g=new Se(p.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Mn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let i=Ze();this.Je.forEach(((l,u)=>{let p=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Ud(e,t,this.Ze,this.je,i);return this.je=ts(),this.He=Ph(),this.Je=Ph(),this.Ze=new Vt(We),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new d_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new hn(We),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new hn(We),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new d_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ph(){return new Vt(Se.comparator)}function f_(){return new Vt(Se.comparator)}const cI={asc:"ASCENDING",desc:"DESCENDING"},uI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hI={and:"AND",or:"OR"};class dI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Km(r,e){return r.useProto3Json||Dd(e)?e:{value:e}}function vd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function fI(r,e){return vd(r,e.toTimestamp())}function vi(r){return ht(!!r,49232),Oe.fromTimestamp((function(t){const i=ia(t);return new At(i.seconds,i.nanos)})(r))}function Lg(r,e){return Xm(r,e).canonicalString()}function Xm(r,e){const t=(function(a){return new St(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function TE(r){const e=St.fromString(r);return ht(RE(e),10190,{key:e.toString()}),e}function Jm(r,e){return Lg(r.databaseId,e.path)}function bm(r,e){const t=TE(e);if(t.get(1)!==r.databaseId.projectId)throw new pe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new pe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Se(NE(t))}function SE(r,e){return Lg(r.databaseId,e)}function pI(r){const e=TE(r);return e.length===4?St.emptyPath():NE(e)}function Wm(r){return new St(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function NE(r){return ht(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function p_(r,e,t){return{name:Jm(r,e),fields:t.value.mapValue.fields}}function mI(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ke(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,b){return y.useProto3Json?(ht(b===void 0||typeof b=="string",58123),Rn.fromBase64String(b||"")):(ht(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Rn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const b=y.code===void 0?ne.UNKNOWN:xE(y.code);return new pe(b,y.message||"")})(u);t=new wE(i,a,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=bm(r,i.document.name),l=vi(i.document.updateTime),u=i.document.createTime?vi(i.document.createTime):Oe.min(),p=new or({mapValue:{fields:i.document.fields}}),g=Mn.newFoundDocument(a,l,u,p),y=i.targetIds||[],b=i.removedTargetIds||[];t=new Jh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=bm(r,i.document),l=i.readTime?vi(i.readTime):Oe.min(),u=Mn.newNoDocument(a,l),p=i.removedTargetIds||[];t=new Jh([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=bm(r,i.document),l=i.removedTargetIds||[];t=new Jh([],l,a,null)}else{if(!("filter"in e))return ke(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new iI(a,l),p=i.targetId;t=new _E(p,u)}}return t}function gI(r,e){let t;if(e instanceof ou)t={update:p_(r,e.key,e.value)};else if(e instanceof jg)t={delete:Jm(r,e.key)};else if(e instanceof fa)t={update:p_(r,e.key,e.data),updateMask:SI(e.fieldMask)};else{if(!(e instanceof tI))return ke(16599,{dt:e.type});t={verify:Jm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const p=u.transform;if(p instanceof gd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Qc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Kc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof yd)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw ke(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:fI(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke(27497)})(r,e.precondition)),t}function yI(r,e){return r&&r.length>0?(ht(e!==void 0,14353),r.map((t=>(function(a,l){let u=a.updateTime?vi(a.updateTime):vi(l);return u.isEqual(Oe.min())&&(u=vi(l)),new Wk(u,a.transformResults||[])})(t,e)))):[]}function vI(r,e){return{documents:[SE(r,e.path)]}}function bI(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=SE(r,a);const l=(function(y){if(y.length!==0)return AE(Zr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:Jo(T.field),direction:wI(T.dir)}})(b)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const p=Km(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function xI(r){let e=pI(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ht(i===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(_){const T=CE(_);return T instanceof Zr&&rE(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(V){return new md(Wo(V.field),(function(ee){switch(ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(_){let T;return T=typeof _=="object"?_.value:_,Dd(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(_){const T=!!_.before,k=_.values||[];return new pd(k,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(_){const T=!_.before,k=_.values||[];return new pd(k,T)})(t.endAt)),Vk(e,a,u,l,p,"F",g,y)}function _I(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Wo(t.unaryFilter.field);return on.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Wo(t.unaryFilter.field);return on.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Wo(t.unaryFilter.field);return on.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Wo(t.unaryFilter.field);return on.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(r):r.fieldFilter!==void 0?(function(t){return on.create(Wo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Zr.create(t.compositeFilter.filters.map((i=>CE(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(r):ke(30097,{filter:r})}function wI(r){return cI[r]}function EI(r){return uI[r]}function TI(r){return hI[r]}function Jo(r){return{fieldPath:r.canonicalString()}}function Wo(r){return Nn.fromServerFormat(r.fieldPath)}function AE(r){return r instanceof on?(function(t){if(t.op==="=="){if(t_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NAN"}};if(e_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(t_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NAN"}};if(e_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(t.field),op:EI(t.op),value:t.value}}})(r):r instanceof Zr?(function(t){const i=t.getFilters().map((a=>AE(a)));return i.length===1?i[0]:{compositeFilter:{op:TI(t.op),filters:i}}})(r):ke(54877,{filter:r})}function SI(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function kE(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t,i,a,l=Oe.min(),u=Oe.min(),p=Rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.yt=e}}function CI(r){const e=xI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Qm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.Sn=new RI}addToCollectionParentIndex(e,t){return this.Sn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ra.min())}updateCollectionGroup(e,t,i){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class RI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new hn(St.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new hn(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IE=41943040;class ar{static withCacheSize(e){return new ar(e,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar.DEFAULT_COLLECTION_PERCENTILE=10,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ar.DEFAULT=new ar(IE,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ar.DISABLED=new ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ul(0)}static ar(){return new ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="LruGarbageCollector",kI=1048576;function y_([r,e],[t,i]){const a=We(r,t);return a===0?We(e,i):a}class II{constructor(e){this.Pr=e,this.buffer=new hn(y_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();y_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ge(g_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vl(t)?ge(g_,"Ignoring IndexedDB error during garbage collection: ",t):await yl(t)}await this.Ar(3e5)}))}}class OI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Id.ce);const i=new II(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(m_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,u,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(i=_,p=Date.now(),this.removeTargets(e,i,t)))).next((_=>(l=_,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(y=Date.now(),Ko()<=Je.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${a} in `+(p-u)+`ms
	Removed ${l} targets in `+(g-p)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function jI(r,e){return new OI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new no((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Pc(i.mutation,a,yr.empty(),At.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ze()){const a=Ba();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=Cc();return l.forEach(((p,g)=>{u=u.insert(p,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Ba();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ze())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,p)=>{t.set(u,p)}))}))}computeViews(e,t,i,a){let l=ts();const u=jc(),p=(function(){return jc()})();return t.forEach(((g,y)=>{const b=i.get(y.key);a.has(y.key)&&(b===void 0||b.mutation instanceof fa)?l=l.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),Pc(b.mutation,y,b.mutation.getFieldMask(),At.now())):u.set(y.key,yr.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,b)=>u.set(y,b))),t.forEach(((y,b)=>p.set(y,new MI(b,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=jc();let a=new Vt(((u,p)=>u-p)),l=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const p of u)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let b=i.get(g)||yr.empty();b=p.applyToLocalView(y,b),i.set(g,b);const _=(a.get(p.batchId)||Ze()).add(g);a=a.insert(p.batchId,_)}))})).next((()=>{const u=[],p=a.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,_=dE();b.forEach((T=>{if(!l.has(T)){const k=vE(t.get(T),i.get(T));k!==null&&_.set(T,k),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,_))}return re.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return Uk(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):re.resolve(Ba());let p=Hc,g=l;return u.next((y=>re.forEach(y,((b,_)=>(p<_.largestBatchId&&(p=_.largestBatchId),l.get(b)?re.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Ze()))).next((b=>({batchId:p,changes:hE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let a=Cc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=Cc();return this.indexManager.getCollectionParents(e,l).next((p=>re.forEach(p,(g=>{const y=(function(_,T){return new au(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,a).next((b=>{b.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((g,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,Mn.newInvalidDocument(b)))}));let p=Cc();return u.forEach(((g,y)=>{const b=l.get(g);b!==void 0&&Pc(b.mutation,y,yr.empty(),At.now()),Md(t,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return re.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:vi(a.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:CI(a.bundledQuery),readTime:vi(a.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.overlays=new Vt(Se.comparator),this.Lr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ba();return re.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),re.resolve()}getOverlaysForCollection(e,t,i){const a=Ba(),l=t.length+1,u=new Se(t.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>i&&a.set(g.getKey(),g)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Vt(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let b=l.get(y.largestBatchId);b===null&&(b=Ba(),l=l.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Ba(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=a)););return re.resolve(p)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new rI(t,i));let l=this.Lr.get(t);l===void 0&&(l=Ze(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.kr=new hn(pn.Kr),this.qr=new hn(pn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new pn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new pn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Se(new St([])),i=new pn(t,e),a=new pn(t,e+1),l=[];return this.qr.forEachInRange([i,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Se(new St([])),i=new pn(t,e),a=new pn(t,e+1);let l=Ze();return this.qr.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new pn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class pn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Se.comparator(e.key,t.key)||We(e.Hr,t.Hr)}static Ur(e,t){return We(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new hn(pn.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new nI(l,t,i,a);this.mutationQueue.push(u);for(const p of a)this.Jr=this.Jr.add(new pn(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Ag:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new pn(t,0),a=new pn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(u=>{const p=this.Zr(u.Hr);l.push(p)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new hn(We);return t.forEach((a=>{const l=new pn(a,0),u=new pn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(p=>{i=i.add(p.Hr)}))})),re.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Se.isDocumentKey(l)||(l=l.child(""));const u=new pn(new Se(l),0);let p=new hn(We);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===a&&(p=p.add(g.Hr)),!0)}),u),re.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ht(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return re.forEach(t.mutations,(a=>{const l=new pn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new pn(t,0),a=this.Jr.firstAfterOrEqual(i);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.ti=e,this.docs=(function(){return new Vt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return re.resolve(i?i.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let i=ts();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Mn.newInvalidDocument(a))})),re.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=ts();const u=t.path,p=new Se(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||mk(pk(b),i)<=0||(a.has(b.key)||Md(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,i,a){ke(9500)}ni(e,t){return re.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new qI(this)}getSize(e){return re.resolve(this.size)}}class qI extends PI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),re.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.persistence=e,this.ri=new no((t=>Ig(t)),Dg),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.ii=0,this.si=new Vg,this.targetCount=0,this.oi=ul._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),re.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ul(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.lr(t),re.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((u,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)})),re.waitFor(l).next((()=>a))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return re.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),re.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return re.resolve(i)}containsKey(e,t){return re.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t){this._i={},this.overlays={},this.ai=new Id(0),this.ui=!1,this.ui=!0,this.ci=new zI,this.referenceDelegate=e(this),this.li=new HI(this),this.indexManager=new AI,this.remoteDocumentCache=(function(a){return new GI(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new NI(t),this.Pi=new VI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new BI(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const a=new FI(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return re.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class FI extends yk{constructor(e){super(),this.currentSequenceNumber=e}}class Ug{constructor(e){this.persistence=e,this.Ri=new Vg,this.Ai=null}static Vi(e){return new Ug(e)}get di(){if(this.Ai)return this.Ai;throw ke(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),re.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(i=>{const a=Se.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Oe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class bd{constructor(e,t){this.persistence=e,this.fi=new no((i=>xk(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=jI(this,t)}static Vi(e,t){return new bd(e,t)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return re.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?re.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((p=>{p||(i++,l.removeEntry(u,Oe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),re.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qh(e.data.value)),t}wr(e,t,i){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return re.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=Ze(),a=Ze();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new zg(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return _N()?8:vk(Vn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new $I;return this.ys(e,t,u).next((p=>{if(l.result=p,this.As)return this.ws(e,t,u,p.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Ko()<=Je.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Ko()<=Je.DEBUG&&ge("QueryEngine","Query:",Xo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Ko()<=Je.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(t))):re.resolve())}gs(e,t){if(s_(t))return re.resolve(null);let i=yi(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Qm(t,null,"F"),i=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Ze(...l);return this.fs.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,u,g.readTime)?this.gs(e,Qm(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,a){return s_(t)||a.isEqual(Oe.min())?re.resolve(null):this.fs.getDocuments(e,i).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,i,a)?re.resolve(null):(Ko()<=Je.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Xo(t)),this.Ds(e,u,t,fk(a,Hc)).next((p=>p)))}))}bs(e,t){let i=new hn(cE(e));return t.forEach(((a,l)=>{Md(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return Ko()<=Je.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Xo(t)),this.fs.getDocumentsMatchingQuery(e,t,ra.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="LocalStore",QI=3e8;class KI{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Vt(We),this.Fs=new no((l=>Ig(l)),Dg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function XI(r,e,t,i){return new KI(r,e,t,i)}async function OE(r,e){const t=Me(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],p=[];let g=Ze();for(const y of a){u.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of l){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function JI(r,e){const t=Me(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const _=y.batch,T=_.keys();let k=re.resolve();return T.forEach((V=>{k=k.next((()=>b.getEntry(g,V))).next(($=>{const ee=y.docVersions.get(V);ht(ee!==null,48541),$.version.compareTo(ee)<0&&(_.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),b.addEntry($)))}))})),k.next((()=>p.mutationQueue.removeMutationBatch(g,_)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Ze();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function jE(r){const e=Me(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function WI(r,e){const t=Me(r),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const p=[];e.targetChanges.forEach(((b,_)=>{const T=a.get(_);if(!T)return;p.push(t.li.removeMatchingKeys(l,b.removedDocuments,_).next((()=>t.li.addMatchingKeys(l,b.addedDocuments,_))));let k=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?k=k.withResumeToken(Rn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):b.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(b.resumeToken,i)),a=a.insert(_,k),(function($,ee,se){return $.resumeToken.approximateByteSize()===0||ee.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=QI?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(T,k,b)&&p.push(t.li.updateTargetData(l,k))}));let g=ts(),y=Ze();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),p.push(ZI(l,u,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!i.isEqual(Oe.min())){const b=t.li.getLastRemoteSnapshotVersion(l).next((_=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(b)}return re.waitFor(p).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=a,l)))}function ZI(r,e,t){let i=Ze(),a=Ze();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let u=ts();return t.forEach(((p,g)=>{const y=l.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(p)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(p,g.readTime),u=u.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(p,g)):ge(Bg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:a}}))}function e4(r,e){const t=Me(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ag),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function t4(r,e){const t=Me(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,re.resolve(a)):t.li.allocateTargetId(i).next((u=>(a=new Qs(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Zm(r,e,t){const i=Me(r),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!vl(u))throw u;ge(Bg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function v_(r,e,t){const i=Me(r);let a=Oe.min(),l=Ze();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,b){const _=Me(g),T=_.Fs.get(b);return T!==void 0?re.resolve(_.vs.get(T)):_.li.getTargetData(y,b)})(i,u,yi(e)).next((p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,p.targetId).next((g=>{l=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?a:Oe.min(),t?l:Ze()))).next((p=>(n4(i,Bk(e),p),{documents:p,ks:l})))))}function n4(r,e,t){let i=r.Ms.get(e)||Oe.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}class b_{constructor(){this.activeTargetIds=Yk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r4{constructor(){this.vo=new b_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new b_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="ConnectivityMonitor";class __{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ge(x_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ge(x_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function eg(){return Mh===null?Mh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",s4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class a4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===dd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const u=eg(),p=this.Qo(e,t.toUriEncodedString());ge(xm,`Sending RPC '${e}' ${u}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,a,l);const{host:y}=new URL(p),b=fl(y);return this.zo(e,p,g,i,b).then((_=>(ge(xm,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Ka(xm,`RPC '${e}' ${u} failed with error: `,_,"url: ",p,"request:",i),_}))}jo(e,t,i,a,l,u){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=s4[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection",bc=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class il extends a4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!il.c_){const e=Uw();bc(e,Vw.STAT_EVENT,(t=>{t.stat===Bm.PROXY?ge(On,"STAT_EVENT: detected buffering proxy"):t.stat===Bm.NOPROXY&&ge(On,"STAT_EVENT: detected no buffering proxy")})),il.c_=!0}}zo(e,t,i,a,l){const u=eg();return new Promise(((p,g)=>{const y=new Mw;y.setWithCredentials(!0),y.listenOnce(Lw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Yh.NO_ERROR:const _=y.getResponseJson();ge(On,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),p(_);break;case Yh.TIMEOUT:ge(On,`RPC '${e}' ${u} timed out`),g(new pe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Yh.HTTP_ERROR:const T=y.getStatus();if(ge(On,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const V=k==null?void 0:k.error;if(V&&V.status&&V.message){const $=(function(se){const he=se.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(he)>=0?he:ne.UNKNOWN})(V.status);g(new pe($,V.message))}else g(new pe(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new pe(ne.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ge(On,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(a);ge(On,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",b,i,15)}))}T_(e,t,i){const a=eg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=l.join("");ge(On,`Creating RPC '${e}' stream ${a}: ${y}`,p);const b=u.createWebChannel(y,p);this.I_(b);let _=!1,T=!1;const k=new o4({Ho:V=>{T?ge(On,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(_||(ge(On,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),ge(On,`RPC '${e}' stream ${a} sending:`,V),b.send(V))},Jo:()=>b.close()});return bc(b,Nc.EventType.OPEN,(()=>{T||(ge(On,`RPC '${e}' stream ${a} transport opened.`),k.i_())})),bc(b,Nc.EventType.CLOSE,(()=>{T||(T=!0,ge(On,`RPC '${e}' stream ${a} transport closed`),k.o_(),this.E_(b))})),bc(b,Nc.EventType.ERROR,(V=>{T||(T=!0,Ka(On,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),k.o_(new pe(ne.UNAVAILABLE,"The operation could not be completed")))})),bc(b,Nc.EventType.MESSAGE,(V=>{var $;if(!T){const ee=V.data[0];ht(!!ee,16349);const se=ee,he=(se==null?void 0:se.error)||(($=se[0])==null?void 0:$.error);if(he){ge(On,`RPC '${e}' stream ${a} received error:`,he);const me=he.status;let ye=(function(A){const C=sn[A];if(C!==void 0)return xE(C)})(me),Ie=he.message;me==="NOT_FOUND"&&Ie.includes("database")&&Ie.includes("does not exist")&&Ie.includes(this.databaseId.database)&&Ka(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ye===void 0&&(ye=ne.INTERNAL,Ie="Unknown error status: "+me+" with message "+he.message),T=!0,k.o_(new pe(ye,Ie)),b.close()}else ge(On,`RPC '${e}' stream ${a} received:`,ee),k.__(ee)}})),il.u_(),setTimeout((()=>{k.s_()}),0),k}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return zw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(r){return new il(r)}function _m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(r){return new dI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */il.c_=!1;class PE{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="PersistentStream";class ME{constructor(e,t,i,a,l,u,p,g){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(es(t.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new pe(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(w_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ge(w_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class c4 extends ME{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=mI(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Oe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Oe.min():u.readTime?vi(u.readTime):Oe.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Wm(this.serializer),t.addTarget=(function(l,u){let p;const g=u.target;if(p=$m(g)?{documents:vI(l,g)}:{query:bI(l,g).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=EE(l,u.resumeToken);const y=Km(l,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Oe.min())>0){p.readTime=vd(l,u.snapshotVersion.toTimestamp());const y=Km(l,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=_I(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Wm(this.serializer),t.removeTarget=e,this.K_(t)}}class u4 extends ME{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=yI(e.writeResults,e.commitTime),i=vi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Wm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>gI(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{}class d4 extends h4{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Xm(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(ne.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.jo(e,Xm(t,i),a,u,p,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(ne.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function f4(r,e,t,i){return new d4(r,e,t,i)}class p4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="RemoteStore";class m4{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{ro(this)&&(ge(Xa,"Restarting streams for network reachability change."),await(async function(g){const y=Me(g);y.Ea.add(4),await cu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Bd(y)})(this))}))})),this.Va=new p4(i,a)}}async function Bd(r){if(ro(r))for(const e of r.Ra)await e(!0)}async function cu(r){for(const e of r.Ra)await e(!1)}function LE(r,e){const t=Me(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fg(t)?Hg(t):bl(t).O_()&&qg(t,e))}function Gg(r,e){const t=Me(r),i=bl(t);t.Ia.delete(e),i.O_()&&VE(t,e),t.Ia.size===0&&(i.O_()?i.L_():ro(t)&&t.Va.set("Unknown"))}function qg(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(r).Z_(e)}function VE(r,e){r.da.$e(e),bl(r).X_(e)}function Hg(r){r.da=new lI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),bl(r).start(),r.Va.ua()}function Fg(r){return ro(r)&&!bl(r).x_()&&r.Ia.size>0}function ro(r){return Me(r).Ea.size===0}function UE(r){r.da=void 0}async function g4(r){r.Va.set("Online")}async function y4(r){r.Ia.forEach(((e,t)=>{qg(r,e)}))}async function v4(r,e){UE(r),Fg(r)?(r.Va.ha(e),Hg(r)):r.Va.set("Unknown")}async function b4(r,e,t){if(r.Va.set("Online"),e instanceof wE&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const p of l.targetIds)a.Ia.has(p)&&(await a.remoteSyncer.rejectListen(p,u),a.Ia.delete(p),a.da.removeTarget(p))})(r,e)}catch(i){ge(Xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xd(r,i)}else if(e instanceof Jh?r.da.Xe(e):e instanceof _E?r.da.st(e):r.da.tt(e),!t.isEqual(Oe.min()))try{const i=await jE(r.localStore);t.compareTo(i)>=0&&await(function(l,u){const p=l.da.Tt(u);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=l.Ia.get(y);b&&l.Ia.set(y,b.withResumeToken(g.resumeToken,u))}})),p.targetMismatches.forEach(((g,y)=>{const b=l.Ia.get(g);if(!b)return;l.Ia.set(g,b.withResumeToken(Rn.EMPTY_BYTE_STRING,b.snapshotVersion)),VE(l,g);const _=new Qs(b.target,g,y,b.sequenceNumber);qg(l,_)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ge(Xa,"Failed to raise snapshot:",i),await xd(r,i)}}async function xd(r,e,t){if(!vl(e))throw e;r.Ea.add(1),await cu(r),r.Va.set("Offline"),t||(t=()=>jE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(Xa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Bd(r)}))}function zE(r,e){return e().catch((t=>xd(r,t,e)))}async function Gd(r){const e=Me(r),t=oa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ag;for(;x4(e);)try{const a=await e4(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,_4(e,a)}catch(a){await xd(e,a)}BE(e)&&GE(e)}function x4(r){return ro(r)&&r.Ta.length<10}function _4(r,e){r.Ta.push(e);const t=oa(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function BE(r){return ro(r)&&!oa(r).x_()&&r.Ta.length>0}function GE(r){oa(r).start()}async function w4(r){oa(r).ra()}async function E4(r){const e=oa(r);for(const t of r.Ta)e.ea(t.mutations)}async function T4(r,e,t){const i=r.Ta.shift(),a=Pg.from(i,e,t);await zE(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Gd(r)}async function S4(r,e){e&&oa(r).Y_&&await(async function(i,a){if((function(u){return sI(u)&&u!==ne.ABORTED})(a.code)){const l=i.Ta.shift();oa(i).B_(),await zE(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Gd(i)}})(r,e),BE(r)&&GE(r)}async function E_(r,e){const t=Me(r);t.asyncQueue.verifyOperationInProgress(),ge(Xa,"RemoteStore received new credentials");const i=ro(t);t.Ea.add(3),await cu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Bd(t)}async function N4(r,e){const t=Me(r);e?(t.Ea.delete(2),await Bd(t)):e||(t.Ea.add(2),await cu(t),t.Va.set("Unknown"))}function bl(r){return r.ma||(r.ma=(function(t,i,a){const l=Me(t);return l.sa(),new c4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:g4.bind(null,r),Yo:y4.bind(null,r),t_:v4.bind(null,r),J_:b4.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Fg(r)?Hg(r):r.Va.set("Unknown")):(await r.ma.stop(),UE(r))}))),r.ma}function oa(r){return r.fa||(r.fa=(function(t,i,a){const l=Me(t);return l.sa(),new u4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:w4.bind(null,r),t_:S4.bind(null,r),ta:E4.bind(null,r),na:T4.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Gd(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(Xa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,p=new $g(e,t,u,a,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(r,e){if(es("AsyncQueue",`${e}: ${r}`),vl(r))return new pe(ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static emptySet(e){return new sl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=Cc(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.ga=new Vt(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class hl{constructor(e,t,i,a,l,u,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((p=>{u.push({type:0,doc:p})})),new hl(e,t,sl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class A4{constructor(){this.queries=S_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Me(t),l=a.queries;a.queries=S_(),l.forEach(((u,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new pe(ne.ABORTED,"Firestore shutting down"))}}function S_(){return new no((r=>lE(r)),Pd)}async function Qg(r,e){const t=Me(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new C4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const p=Yg(u,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(p)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Xg(t)}async function Kg(r,e){const t=Me(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function R4(r,e){const t=Me(r);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const p of u.ba)p.Fa(a)&&(i=!0);u.wa=a}}i&&Xg(t)}function k4(r,e,t){const i=Me(r),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function Xg(r){r.Ca.forEach((e=>{e.next()}))}var tg,N_;(N_=tg||(tg={})).Ma="default",N_.Cache="cache";class Jg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new hl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.key=e}}class HE{constructor(e){this.key=e}}class I4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.eu=cE(e),this.tu=new sl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new T_,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,p=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,_)=>{const T=a.get(b),k=Md(this.query,_)?_:null,V=!!T&&this.mutatedKeys.has(T.key),$=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let ee=!1;T&&k?T.data.isEqual(k.data)?V!==$&&(i.track({type:3,doc:k}),ee=!0):this.su(T,k)||(i.track({type:2,doc:k}),ee=!0,(g&&this.eu(k,g)>0||y&&this.eu(k,y)<0)&&(p=!0)):!T&&k?(i.track({type:0,doc:k}),ee=!0):T&&!k&&(i.track({type:1,doc:T}),ee=!0,(g||y)&&(p=!0)),ee&&(k?(u=u.add(k),l=$?l.add(b):l.delete(b)):(u=u.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),l=l.delete(b.key),i.track({type:1,doc:b})}return{tu:u,iu:i,Ss:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,_)=>(function(k,V){const $=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Vt:ee})}};return $(k)-$(V)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(i),a=a??!1;const p=t&&!a?this._u():[],g=this.Ya.size===0&&this.current&&!a?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new hl(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new T_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new HE(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new qE(i))})),t}cu(e){this.Za=e.ks,this.Ya=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Wg="SyncEngine";class D4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class O4{constructor(e){this.key=e,this.hu=!1}}class j4{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new no((p=>lE(p)),Pd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Vt(Se.comparator),this.Au=new Map,this.Vu=new Vg,this.du={},this.mu=new Map,this.fu=ul.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function P4(r,e,t=!0){const i=XE(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await FE(i,e,t,!0),a}async function M4(r,e){const t=XE(r);await FE(t,e,!0,!1)}async function FE(r,e,t,i){const a=await t4(r.localStore,yi(e)),l=a.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await L4(r,e,l,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&LE(r.remoteStore,a),p}async function L4(r,e,t,i,a){r.pu=(_,T,k)=>(async function($,ee,se,he){let me=ee.view.ru(se);me.Ss&&(me=await v_($.localStore,ee.query,!1).then((({documents:A})=>ee.view.ru(A,me))));const ye=he&&he.targetChanges.get(ee.targetId),Ie=he&&he.targetMismatches.get(ee.targetId)!=null,Ee=ee.view.applyChanges(me,$.isPrimaryClient,ye,Ie);return A_($,ee.targetId,Ee.au),Ee.snapshot})(r,_,T,k);const l=await v_(r.localStore,e,!0),u=new I4(e,l.ks),p=u.ru(l.documents),g=lu.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),y=u.applyChanges(p,r.isPrimaryClient,g);A_(r,t,y.au);const b=new D4(e,t,u);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function V4(r,e,t){const i=Me(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!Pd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Zm(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Gg(i.remoteStore,a.targetId),ng(i,a.targetId)})).catch(yl)):(ng(i,a.targetId),await Zm(i.localStore,a.targetId,!0))}async function U4(r,e){const t=Me(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Gg(t.remoteStore,i.targetId))}async function z4(r,e,t){const i=Y4(r);try{const a=await(function(u,p){const g=Me(u),y=At.now(),b=p.reduce(((k,V)=>k.add(V.key)),Ze());let _,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let V=ts(),$=Ze();return g.xs.getEntries(k,b).next((ee=>{V=ee,V.forEach(((se,he)=>{he.isValidDocument()||($=$.add(se))}))})).next((()=>g.localDocuments.getOverlayedDocuments(k,V))).next((ee=>{_=ee;const se=[];for(const he of p){const me=eI(he,_.get(he.key).overlayedDocument);me!=null&&se.push(new fa(he.key,me,eE(me.value.mapValue),Xr.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,se,p)})).next((ee=>{T=ee;const se=ee.applyToLocalDocumentSet(_,$);return g.documentOverlayCache.saveOverlays(k,ee.batchId,se)}))})).then((()=>({batchId:T.batchId,changes:hE(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,p,g){let y=u.du[u.currentUser.toKey()];y||(y=new Vt(We)),y=y.insert(p,g),u.du[u.currentUser.toKey()]=y})(i,a.batchId,t),await uu(i,a.changes),await Gd(i.remoteStore)}catch(a){const l=Yg(a,"Failed to persist write");t.reject(l)}}async function $E(r,e){const t=Me(r);try{const i=await WI(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(ht(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?ht(u.hu,14607):a.removedDocuments.size>0&&(ht(u.hu,42227),u.hu=!1))})),await uu(t,i,e)}catch(i){await yl(i)}}function C_(r,e,t){const i=Me(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const p=u.view.va(e);p.snapshot&&a.push(p.snapshot)})),(function(u,p){const g=Me(u);g.onlineState=p;let y=!1;g.queries.forEach(((b,_)=>{for(const T of _.ba)T.va(p)&&(y=!0)})),y&&Xg(g)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function B4(r,e,t){const i=Me(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new Vt(Se.comparator);u=u.insert(l,Mn.newNoDocument(l,Oe.min()));const p=Ze().add(l),g=new Ud(Oe.min(),new Map,new Vt(We),u,p);await $E(i,g),i.Ru=i.Ru.remove(l),i.Au.delete(e),Zg(i)}else await Zm(i.localStore,e,!1).then((()=>ng(i,e,t))).catch(yl)}async function G4(r,e){const t=Me(r),i=e.batch.batchId;try{const a=await JI(t.localStore,e);QE(t,i,null),YE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await uu(t,a)}catch(a){await yl(a)}}async function q4(r,e,t){const i=Me(r);try{const a=await(function(u,p){const g=Me(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((_=>(ht(_!==null,37113),b=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);QE(i,e,t),YE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await uu(i,a)}catch(a){await yl(a)}}function YE(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function QE(r,e,t){const i=Me(r);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function ng(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||KE(r,i)}))}function KE(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Gg(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Zg(r))}function A_(r,e,t){for(const i of t)i instanceof qE?(r.Vu.addReference(i.key,e),H4(r,i)):i instanceof HE?(ge(Wg,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||KE(r,i.key)):ke(19791,{wu:i})}function H4(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(ge(Wg,"New document in limbo: "+t),r.Eu.add(i),Zg(r))}function Zg(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Se(St.fromString(e)),i=r.fu.next();r.Au.set(i,new O4(t)),r.Ru=r.Ru.insert(t,i),LE(r.remoteStore,new Qs(yi(jd(t.path)),i,"TargetPurposeLimboResolution",Id.ce))}}async function uu(r,e,t){const i=Me(r),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{u.push(i.pu(g,e,t).then((y=>{var b;if((y||t)&&i.isPrimaryClient){const _=y?!y.fromCache:(b=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:b.current;i.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){a.push(y);const _=zg.Es(g.targetId,y);l.push(_)}})))})),await Promise.all(u),i.Pu.J_(a),await(async function(g,y){const b=Me(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>re.forEach(y,(T=>re.forEach(T.Ts,(k=>b.persistence.referenceDelegate.addReference(_,T.targetId,k))).next((()=>re.forEach(T.Is,(k=>b.persistence.referenceDelegate.removeReference(_,T.targetId,k)))))))))}catch(_){if(!vl(_))throw _;ge(Bg,"Failed to update sequence numbers: "+_)}for(const _ of y){const T=_.targetId;if(!_.fromCache){const k=b.vs.get(T),V=k.snapshotVersion,$=k.withLastLimboFreeSnapshotVersion(V);b.vs=b.vs.insert(T,$)}}})(i.localStore,l))}async function F4(r,e){const t=Me(r);if(!t.currentUser.isEqual(e)){ge(Wg,"User change. New user:",e.toKey());const i=await OE(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((p=>{p.forEach((g=>{g.reject(new pe(ne.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await uu(t,i.Ns)}}function $4(r,e){const t=Me(r),i=t.Au.get(e);if(i&&i.hu)return Ze().add(i.key);{let a=Ze();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const p=t.Tu.get(u);a=a.unionWith(p.view.nu)}return a}}function XE(r){const e=Me(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=$E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=B4.bind(null,e),e.Pu.J_=R4.bind(null,e.eventManager),e.Pu.yu=k4.bind(null,e.eventManager),e}function Y4(r){const e=Me(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q4.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return XI(this.persistence,new YI,e.initialUser,this.serializer)}Cu(e){return new DE(Ug.Vi,this.serializer)}Du(e){return new r4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class Q4 extends _d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new DI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ar.withCacheSize(this.cacheSizeBytes):ar.DEFAULT;return new DE((i=>bd.Vi(i,t)),this.serializer)}}class rg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>C_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=F4.bind(null,this.syncEngine),await N4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new A4})()}createDatastore(e){const t=zd(e.databaseInfo.databaseId),i=l4(e.databaseInfo);return f4(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,p){return new m4(i,a,l,u,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>C_(this.syncEngine,t,0)),(function(){return __.v()?new __:new i4})())}createSyncEngine(e,t){return(function(a,l,u,p,g,y,b){const _=new j4(a,l,u,p,g,y);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Me(a);ge(Xa,"RemoteStore shutting down."),l.Ea.add(5),await cu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}rg.provider={build:()=>new rg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="FirestoreClient";class K4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=jn.UNAUTHENTICATED,this.clientId=Cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{ge(la,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ge(la,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Yg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function wm(r,e){r.asyncQueue.verifyOperationInProgress(),ge(la,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await OE(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function R_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await X4(r);ge(la,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>E_(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>E_(e.remoteStore,a))),r._onlineComponents=e}async function X4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(la,"Using user provided OfflineComponentProvider");try{await wm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ne.FAILED_PRECONDITION||a.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ka("Error using user provided cache. Falling back to memory cache: "+t),await wm(r,new _d)}}else ge(la,"Using default OfflineComponentProvider"),await wm(r,new Q4(void 0));return r._offlineComponents}async function JE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(la,"Using user provided OnlineComponentProvider"),await R_(r,r._uninitializedComponentsProvider._online)):(ge(la,"Using default OnlineComponentProvider"),await R_(r,new rg))),r._onlineComponents}function J4(r){return JE(r).then((e=>e.syncEngine))}async function wd(r){const e=await JE(r),t=e.eventManager;return t.onListen=P4.bind(null,e.syncEngine),t.onUnlisten=V4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=M4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=U4.bind(null,e.syncEngine),t}function W4(r,e,t,i){const a=new e0(i),l=new Jg(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>Qg(await wd(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>Kg(await wd(r),l)))}}function Z4(r,e,t={}){const i=new Ji;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,g,y){const b=new e0({next:T=>{b.Nu(),u.enqueueAndForget((()=>Kg(l,_)));const k=T.docs.has(p);!k&&T.fromCache?y.reject(new pe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&g&&g.source==="server"?y.reject(new pe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new Jg(jd(p.path),b,{includeMetadataChanges:!0,Ka:!0});return Qg(l,_)})(await wd(r),r.asyncQueue,e,t,i))),i.promise}function e5(r,e,t={}){const i=new Ji;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,g,y){const b=new e0({next:T=>{b.Nu(),u.enqueueAndForget((()=>Kg(l,_))),T.fromCache&&g.source==="server"?y.reject(new pe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new Jg(p,b,{includeMetadataChanges:!0,Ka:!0});return Qg(l,_)})(await wd(r),r.asyncQueue,e,t,i))),i.promise}function t5(r,e){const t=new Ji;return r.asyncQueue.enqueueAndForget((async()=>z4(await J4(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="ComponentProvider",k_=new Map;function r5(r,e,t,i,a){return new Ek(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,WE(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firestore.googleapis.com",I_=!0;class D_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZE,this.ssl=I_}else this.host=e.host,this.ssl=e.ssl??I_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kI)throw new pe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WE(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qd{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new nk;switch(i.type){case"firstParty":return new ak(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=k_.get(t);i&&(ge(n5,"Removing Datastore"),k_.delete(t),i.terminate())})(this),Promise.resolve()}}function i5(r,e,t,i={}){var y;r=vr(r,qd);const a=fl(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${t}`;a&&(Y1(`https://${p}`),Q1("Firestore",!0)),l.host!==ZE&&l.host!==p&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:p,ssl:a,emulatorOptions:i};if(!Ha(g,u)&&(r._setSettings(g),i.mockUserToken)){let b,_;if(typeof i.mockUserToken=="string")b=i.mockUserToken,_=jn.MOCK_USER;else{b=dN(i.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new pe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new jn(T)}r._authCredentials=new rk(new Gw(b,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new io(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(su(t,Ht._jsonSchema))return new Ht(e,i||null,new Se(St.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:ln("string",Ht._jsonSchemaVersion),referencePath:ln("string")};class na extends io{constructor(e,t,i){super(e,t,jd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Se(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function xl(r,e,...t){if(r=mn(r),qw("collection","path",e),r instanceof qd){const i=St.fromString(e,...t);return Fx(i),new na(r,null,i)}{if(!(r instanceof Ht||r instanceof na))throw new pe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(St.fromString(e,...t));return Fx(i),new na(r.firestore,null,i)}}function rs(r,e,...t){if(r=mn(r),arguments.length===1&&(e=Cg.newId()),qw("doc","path",e),r instanceof qd){const i=St.fromString(e,...t);return Hx(i),new Ht(r,null,new Se(i))}{if(!(r instanceof Ht||r instanceof na))throw new pe(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(St.fromString(e,...t));return Hx(i),new Ht(r.firestore,r instanceof na?r.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="AsyncQueue";class j_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PE(this,"async_queue_retry"),this._c=()=>{const i=_m();i&&ge(O_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=_m();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_m();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ji;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!vl(e))throw e;ge(O_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",P_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=$g.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ke(47125,{Pc:P_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function P_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ca extends qd{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new j_,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j_(e),this._firestoreClient=void 0,await e}}}function s5(r,e){const t=typeof r=="object"?r:W1(),i=typeof r=="string"?r:dd,a=yg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=uN("firestore");l&&i5(a,...l)}return a}function Hd(r){if(r._terminated)throw new pe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||a5(r),r._firestoreClient}function a5(r){var i,a,l,u;const e=r._freezeSettings(),t=r5(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new K4(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(Rn.fromBase64String(e))}catch(t){throw new pe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jr(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:ln("string",jr._jsonSchemaVersion),bytes:ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(su(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:ln("string",bi._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,Jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Jr(e.vectorValues);throw new pe(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jr._jsonSchemaVersion="firestore/vectorValue/1.0",Jr._jsonSchema={type:ln("string",Jr._jsonSchemaVersion),vectorValues:ln("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=/^__.*__$/;class l5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ou(e,this.data,t,this.fieldTransforms)}}class eT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{dataSource:r})}}class r0{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new r0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ed(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(tT(this.dataSource)&&o5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class c5{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zd(e)}createContext(e,t,i,a=!1){return new r0({dataSource:e,methodName:t,targetDoc:i,path:Nn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i0(r){const e=r._freezeSettings(),t=zd(r._databaseId);return new c5(r._databaseId,!!e.ignoreUndefinedProperties,t)}function u5(r,e,t,i,a,l={}){const u=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);s0("Data must be an object, but it was:",u,i);const p=nT(i,u);let g,y;if(l.merge)g=new yr(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const b=[];for(const _ of l.mergeFields){const T=dl(e,_,t);if(!u.contains(T))throw new pe(ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);sT(b,T)||b.push(T)}g=new yr(b),y=u.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=u.fieldTransforms;return new l5(new or(p),g,y)}class Fd extends n0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fd}}function h5(r,e,t,i){const a=r.createContext(1,e,t);s0("Data must be an object, but it was:",a,i);const l=[],u=or.empty();da(i,((g,y)=>{const b=iT(e,g,t);y=mn(y);const _=a.childContextForFieldPath(b);if(y instanceof Fd)l.push(b);else{const T=hu(y,_);T!=null&&(l.push(b),u.set(b,T))}}));const p=new yr(l);return new eT(u,p,a.fieldTransforms)}function d5(r,e,t,i,a,l){const u=r.createContext(1,e,t),p=[dl(e,i,t)],g=[a];if(l.length%2!=0)throw new pe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)p.push(dl(e,l[T])),g.push(l[T+1]);const y=[],b=or.empty();for(let T=p.length-1;T>=0;--T)if(!sT(y,p[T])){const k=p[T];let V=g[T];V=mn(V);const $=u.childContextForFieldPath(k);if(V instanceof Fd)y.push(k);else{const ee=hu(V,$);ee!=null&&(y.push(k),b.set(k,ee))}}const _=new yr(y);return new eT(b,_,u.fieldTransforms)}function f5(r,e,t,i=!1){return hu(t,r.createContext(i?4:3,e))}function hu(r,e){if(rT(r=mn(r)))return s0("Unsupported field value:",e,r),nT(r,e);if(r instanceof n0)return(function(i,a){if(!tT(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const p of i){let g=hu(p,a.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=mn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Qk(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=At.fromDate(i);return{timestampValue:vd(a.serializer,l)}}if(i instanceof At){const l=new At(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vd(a.serializer,l)}}if(i instanceof bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jr)return{bytesValue:EE(a.serializer,i._byteString)};if(i instanceof Ht){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Lg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Jr)return(function(u,p){const g=u instanceof Jr?u.toArray():u;return{mapValue:{fields:{[Ww]:{stringValue:Zw},[fd]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Og(p.serializer,b)}))}}}}}})(i,a);if(kE(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${kd(i)}`)})(r,e)}function nT(r,e){const t={};return $w(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(r,((i,a)=>{const l=hu(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function rT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof At||r instanceof bi||r instanceof jr||r instanceof Ht||r instanceof n0||r instanceof Jr||kE(r))}function s0(r,e,t){if(!rT(t)||!Hw(t)){const i=kd(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function dl(r,e,t){if((e=mn(e))instanceof t0)return e._internalPath;if(typeof e=="string")return iT(r,e);throw Ed("Field path arguments must be of type string or ",r,!1,void 0,t)}const p5=new RegExp("[~\\*/\\[\\]]");function iT(r,e,t){if(e.search(p5)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new t0(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ed(r,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${i}`),u&&(g+=` in document ${a}`),g+=")"),new pe(ne.INVALID_ARGUMENT,p+r+g)}function sT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{convertValue(e,t="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return da(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[fd].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>Xt(u.doubleValue)));return new Jr(t)}convertGeoPoint(e){return new bi(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Od(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const t=ia(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=St.fromString(e);ht(RE(i),9688,{name:e});const a=new $c(i.get(1),i.get(3)),l=new Se(i.popFirst(5));return a.isEqual(t)||es(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends m5{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}const M_="@firebase/firestore",L_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new g5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(dl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class g5 extends aT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o0{}class y5 extends o0{}function lT(r,e,...t){let i=[];e instanceof o0&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((g=>g instanceof l0)).length,p=l.filter((g=>g instanceof $d)).length;if(u>1||u>0&&p>0)throw new pe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class $d extends y5{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new $d(e,t,i)}_apply(e){const t=this._parse(e);return uT(e._query,t),new io(e.firestore,e.converter,Ym(e._query,t))}_parse(e){const t=i0(e.firestore);return(function(l,u,p,g,y,b,_){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new pe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){z_(_,b);const V=[];for(const $ of _)V.push(U_(g,l,$));T={arrayValue:{values:V}}}else T=U_(g,l,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||z_(_,b),T=f5(p,u,_,b==="in"||b==="not-in");return on.create(y,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cT(r,e,t){const i=e,a=dl("where",r);return $d._create(a,i,t)}class l0 extends o0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new l0(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const p=l.getFlattenedFilters();for(const g of p)uT(u,g),u=Ym(u,g)})(e._query,t),new io(e.firestore,e.converter,Ym(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function U_(r,e,t){if(typeof(t=mn(t))=="string"){if(t==="")throw new pe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oE(e)&&t.indexOf("/")!==-1)throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(St.fromString(t));if(!Se.isDocumentKey(i))throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Zx(r,new Se(i))}if(t instanceof Ht)return Zx(r,t._key);throw new pe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(t)}.`)}function z_(r,e){if(!Array.isArray(r)||r.length===0)throw new pe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uT(r,e){const t=(function(a,l){for(const u of a)for(const p of u.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function v5(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ga extends aT{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(dl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ga._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ga._jsonSchema={type:ln("string",Ga._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class Wh extends Ga{data(e={}){return super.data(e)}}class qa{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Rc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Wh(this._firestore,this._userDataWriter,i.key,i,new Rc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((p=>{const g=new Wh(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Rc(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const g=new Wh(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Rc(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,b=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),b=u.indexOf(p.doc.key)),{type:b5(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function b5(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qa._jsonSchemaVersion="firestore/querySnapshot/1.0",qa._jsonSchema={type:ln("string",qa._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(r){r=vr(r,Ht);const e=vr(r.firestore,ca),t=Hd(e);return Z4(t,r._key).then((i=>mT(e,r,i)))}function Yd(r){r=vr(r,io);const e=vr(r.firestore,ca),t=Hd(e),i=new a0(e);return oT(r._query),e5(t,r._query).then((a=>new qa(e,i,r,a)))}function dT(r,e,t){r=vr(r,Ht);const i=vr(r.firestore,ca),a=v5(r.converter,e),l=i0(i);return c0(i,[u5(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Xr.none())])}function fT(r,e,t,...i){r=vr(r,Ht);const a=vr(r.firestore,ca),l=i0(a);let u;return u=typeof(e=mn(e))=="string"||e instanceof t0?d5(l,"updateDoc",r._key,e,t,i):h5(l,"updateDoc",r._key,e),c0(a,[u.toMutation(r._key,Xr.exists(!0))])}function Xc(r){return c0(vr(r.firestore,ca),[new jg(r._key,Xr.none())])}function pT(r,...e){var y,b,_;r=mn(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||V_(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(V_(e[i])){const T=e[i];e[i]=(y=T.next)==null?void 0:y.bind(T),e[i+1]=(b=T.error)==null?void 0:b.bind(T),e[i+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,u,p;if(r instanceof Ht)u=vr(r.firestore,ca),p=jd(r._key.path),l={next:T=>{e[i]&&e[i](mT(u,r,T))},error:e[i+1],complete:e[i+2]};else{const T=vr(r,io);u=vr(T.firestore,ca),p=T._query;const k=new a0(u);l={next:V=>{e[i]&&e[i](new qa(u,k,T,V))},error:e[i+1],complete:e[i+2]},oT(r._query)}const g=Hd(u);return W4(g,p,a,l)}function c0(r,e){const t=Hd(r);return t5(t,e)}function mT(r,e,t){const i=t.docs.get(e._key),a=new a0(r);return new Ga(r,a,e._key,i,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){tk(pl),al(new Fa("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),p=new ca(new ik(i.getProvider("auth-internal")),new ok(u,i.getProvider("app-check-internal")),Tk(u,a),u);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),ea(M_,L_,e),ea(M_,L_,"esm2020")})();const x5={apiKey:"AIzaSyD2rR0OH2OzSlt4fs2w72TKOUNDngp0zXQ",authDomain:"singmode-7c657.firebaseapp.com",projectId:"singmode-7c657",storageBucket:"singmode-7c657.firebasestorage.app",messagingSenderId:"292866266443",appId:"1:292866266443:web:190d34e55980509c1b04ce"},gT=J1(x5),u0=ZR(gT),Hn=s5(gT),h0="kstar_karaoke_session",Cn="kstar_active_user",An="kstar_user_accounts";let Ft=!1,B_=Promise.resolve();const Qd=async r=>await(B_=B_.then(async()=>{const t=await Qe(),i=await r(t);return await pt(t),i})),yT={id:"current-session",participants:[],requests:[],currentRound:null,history:[],messages:[],tickerMessages:[],verifiedSongbook:[],isPlayingVideo:!1,nextRequestNumber:1,maxRequestsPerUser:5,bannedUsers:[],deviceConnections:[],queueStrategy:pi.FRESH_MEAT,startedAt:Date.now()},ig=typeof window<"u"&&window.chrome&&window.chrome.storage,tt={get:async r=>{if(ig)return(await window.chrome.storage.local.get([r]))[r];const e=localStorage.getItem(r);return e?JSON.parse(e):null},set:async(r,e)=>{ig?await window.chrome.storage.local.set({[r]:e}):localStorage.setItem(r,JSON.stringify(e)),typeof window<"u"&&(window.dispatchEvent(new Event("kstar_sync")),window.dispatchEvent(new Event("storage")))}};wt.onStateReceived=r=>{Ft&&tt.set(h0,r)};wt.onActionReceived=r=>{_5(r)};wt.onPeerConnected=async()=>{if(!Ft){const r=await Qe();wt.broadcastState(r)}};async function _5(r){switch(r.type){case"ADD_REQUEST":await Bs(r.payload);break;case"JOIN_SESSION":{const{id:i,profile:a}=r.payload;if(a){const l=await Ut(),u=l.findIndex(p=>p.id===i);u===-1?(l.push(a),await tt.set(An,l)):(l[u]={...l[u],...a},await tt.set(An,l))}await Ks(i),await Qd(l=>{l.deviceConnections||(l.deviceConnections=[]);const u=l.deviceConnections.findIndex(p=>p.peerId===r.senderId);u>-1?(l.deviceConnections[u].userId=i,l.deviceConnections[u].isGuest=(a==null?void 0:a.isGuest)??!1,r.payload.userAgent&&(l.deviceConnections[u].userAgent=r.payload.userAgent)):l.deviceConnections.push({id:`D-${Math.random().toString(36).substr(2,4).toUpperCase()}`,peerId:r.senderId,connectedAt:Date.now(),lastSeen:Date.now(),status:"connected",userAgent:r.payload.userAgent||"Unknown",userId:i,isGuest:(a==null?void 0:a.isGuest)??!1})});break}case"TOGGLE_STATUS":await Xs(r.payload.id,r.payload.status);break;case"TOGGLE_MIC":await L5(r.payload.id,r.payload.enabled);break;case"DELETE_REQUEST":await Gs(r.payload);break;case"UPDATE_REQUEST":await Mc(r.payload.id,r.payload.updates);break;case"ADD_CHAT":await G5(r.senderId,r.payload.name,r.payload.text);break;case"SYNC_PROFILE":if(Ft){const i=await Gn();i&&i.id===r.payload.id&&await tt.set(Cn,r.payload)}const e=await Ut(),t=e.findIndex(i=>i.id===r.payload.id);t>-1?e[t]=r.payload:e.push(r.payload),await tt.set(An,e);break;case"TOGGLE_FAVORITE":Ft||await xT(r.payload,r.senderId);break;case"REORDER_ROUND":await _T(r.payload);break;case"REORDER_REQUESTS":await wT(r.payload);break;case"REORDER_PENDING":await ET(r.payload);break;case"REORDER_MY_REQUESTS":await ag(r.senderId,r.payload.requestId,r.payload.direction);break}}const Em=async(r,e)=>{Ft=r==="PARTICIPANT"&&!!e;const t=await wt.initialize(r,e);if(!Ft&&t){const i=await Gn(),a=(i==null?void 0:i.name)||"SingMode DJ",l=i==null?void 0:i.id;await H5({id:t,hostName:a,hostUid:l,isActive:!0,startedAt:Date.now()});const u=setInterval(()=>{F5(t)},120*1e3);window.addEventListener("beforeunload",()=>{clearInterval(u),TT(t)});const p=xl(Hn,"users");pT(p,g=>{const y=[];g.forEach(b=>{y.push(b.data())}),console.log("Synced users from Firestore:",y.length),tt.set(An,y)}),wt.onDeviceConnected=g=>{w5(g)},wt.onDeviceDisconnected=async g=>{const y=await Qe();if(y.deviceConnections){const b=y.deviceConnections.findIndex(_=>_.peerId===g);b>-1&&(y.deviceConnections[b].status="disconnected",y.deviceConnections[b].lastSeen=Date.now(),await pt(y))}}}},w5=async r=>{await Qd(e=>{e.deviceConnections||(e.deviceConnections=[]);const t=e.deviceConnections.findIndex(i=>i.peerId===r);t>-1?(e.deviceConnections[t].status="connected",e.deviceConnections[t].lastSeen=Date.now()):e.deviceConnections.push({id:`D-${Math.random().toString(36).substr(2,4).toUpperCase()}`,peerId:r,connectedAt:Date.now(),lastSeen:Date.now(),status:"connected",userAgent:"Unknown"})})},E5=async(r,e,t=!1)=>{await Qd(i=>{if(!i.deviceConnections)return;const a=i.deviceConnections.findIndex(l=>l.id===r);a>-1&&(i.deviceConnections[a].userId=e,i.deviceConnections[a].isGuest=t)})},T5=async r=>{await Qd(e=>{e.deviceConnections&&(e.deviceConnections=e.deviceConnections.filter(t=>t.id!==r))})},Qe=async()=>{const r=await tt.get(h0)||{...yT};return r.history||(r.history=[]),r.messages||(r.messages=[]),r.tickerMessages||(r.tickerMessages=[]),r.verifiedSongbook||(r.verifiedSongbook=[]),r.isPlayingVideo===void 0&&(r.isPlayingVideo=!1),r.nextRequestNumber||(r.nextRequestNumber=1),r.maxRequestsPerUser===void 0&&(r.maxRequestsPerUser=5),r.bannedUsers||(r.bannedUsers=[]),r.deviceConnections||(r.deviceConnections=[]),r.queueStrategy||(r.queueStrategy=pi.FRESH_MEAT),r},pt=async r=>{await tt.set(h0,r),wt.broadcastState(r)},vT=(r,e)=>{if(e.youtubeUrl&&e.youtubeUrl.trim()!==""){const t=r.verifiedSongbook.find(i=>i.songName.toLowerCase()===e.songName.toLowerCase()&&i.artist.toLowerCase()===e.artist.toLowerCase());if(t)t.youtubeUrl!==e.youtubeUrl&&(t.youtubeUrl=e.youtubeUrl);else{const i={id:Math.random().toString(36).substr(2,9),songName:e.songName,artist:e.artist,youtubeUrl:e.youtubeUrl,type:e.type,addedAt:Date.now()};r.verifiedSongbook.push(i)}}},S5=async r=>{const e=await Qe(),t={...r,id:Math.random().toString(36).substr(2,9),addedAt:Date.now()};e.verifiedSongbook.push(t),await pt(e)},N5=async(r,e)=>{const t=await Qe(),i=t.verifiedSongbook.findIndex(a=>a.id===r);i!==-1&&(t.verifiedSongbook[i]={...t.verifiedSongbook[i],...e},await pt(t))},G_=async r=>{const e=await Qe();e.verifiedSongbook=e.verifiedSongbook.filter(t=>t.id!==r),await pt(e)},C5=async()=>{const r=await Qe(),e={...yT,id:`session-${Date.now()}`,verifiedSongbook:r.verifiedSongbook,nextRequestNumber:1,startedAt:Date.now()};await pt(e)},Ut=async()=>{let r=await tt.get(An);if(!r||r.length===0){try{const t=xl(Hn,"users"),i=await Yd(t),a=[];if(i.forEach(l=>a.push(l.data())),a.length>0)return await tt.set(An,a),a}catch(t){console.error("Error fetching users from Firebase:",t)}return Array.from({length:5},(t,i)=>({id:`singer-${i+1}`,name:`Singer${i+1}`,favorites:[],personalHistory:[],createdAt:Date.now()}))}return r},Ja=async(r,e)=>{try{const t=rs(Hn,"users",r);if(e.name&&(await Ut()).find(p=>{var g;return p.id!==r&&p.name.toLowerCase()===((g=e.name)==null?void 0:g.toLowerCase())}))return{success:!1,error:"Username already exists."};await fT(t,e);const i=await Ut(),a=i.findIndex(l=>l.id===r);if(a>-1){i[a]={...i[a],...e},await tt.set(An,i);const l=await Gn();l&&l.id===r&&await tt.set(Cn,i[a]),Ft||wt.broadcastAction({type:"SYNC_PROFILE",payload:i[a],senderId:"DJ"})}return{success:!0}}catch(t){return console.error("Error updating account:",t),{success:!1,error:t.message}}},A5=async(r,e)=>{const t=await Ut(),i=t.findIndex(a=>a.id===r);if(i>-1){const a=t[i].favorites.filter(l=>l.id!==e);await Ja(r,{favorites:a})}},R5=async(r,e,t)=>{const i=await Ut(),a=i.findIndex(l=>l.id===r);if(a>-1){const l=[...i[a].favorites],u=l.findIndex(p=>p.id===e);u>-1&&(l[u]={...l[u],...t},await Ja(r,{favorites:l}))}},k5=async(r,e)=>{const t=await Ut(),i=t.findIndex(a=>a.id===r);if(i>-1){const a={...e,id:Math.random().toString(36).substr(2,9)},l=[...t[i].favorites,a];await Ja(r,{favorites:l})}},I5=async(r,e)=>{const t=await Ut(),i=t.findIndex(a=>a.id===r);if(i>-1){const a=t[i].personalHistory.filter(l=>l.id!==e);await Ja(r,{personalHistory:a})}},D5=async(r,e,t)=>{const i=await Ut(),a=i.findIndex(l=>l.id===r);if(a>-1){const l=[...i[a].personalHistory],u=l.findIndex(p=>p.id===e);u>-1&&(l[u]={...l[u],...t},await Ja(r,{personalHistory:l}))}},Zh=async r=>{await sg(r);try{await Xc(rs(Hn,"users",r));let t=await Ut();t=t.filter(i=>i.id!==r),await tt.set(An,t)}catch(t){console.error("Error deleting account",t)}const e=await Gn();e&&e.id===r&&await Kd()},bT=async()=>{try{const r=await Ut(),e=[],t=new Map;for(const i of r){if(!i.password){e.push(i.id);continue}const a=i.name.toLowerCase().trim();t.has(a)?e.push(i.id):t.set(a,i.id)}if(e.length>0){for(const u of e)await Xc(rs(Hn,"users",u));const i=xl(Hn,"users"),a=await Yd(i),l=[];a.forEach(u=>l.push(u.data())),await tt.set(An,l)}return{success:!0,deletedCount:e.length}}catch(r){return console.error("Cleanup failed:",r),{success:!1,error:String(r)}}},Gn=async()=>await tt.get(Cn),Jc=async(r,e=!1)=>{var t;try{let i=r.id;const a=!!(r.password&&r.email),l=!!(r.password&&!r.email);if(a)try{i=(await VA(u0,r.email,r.password)).user.uid}catch(y){if(y.code==="auth/email-already-in-use")return{success:!1,error:"Email already in use."};throw y}else if(l){if((await Ut()).find(_=>{var T;return _.name.toLowerCase()===((T=r.name)==null?void 0:T.trim().toLowerCase())}))return{success:!1,error:"Username already taken."};i=q_()||`user-${Date.now()}-${Math.random().toString(36).substr(2,5)}`}else i=r.id||q_()||`guest-${Math.random().toString(36).substr(2,9)}`;const u={id:i,name:((t=r.name)==null?void 0:t.trim())||"Guest",email:r.email||void 0,password:l?r.password:void 0,isGuest:!a&&!l,favorites:r.favorites||[],personalHistory:r.personalHistory||[],createdAt:Date.now()},p=JSON.parse(JSON.stringify(u));await dT(rs(Hn,"users",i),p);const g=await Ut();return g.some(y=>y.id===i)||(g.push(u),await tt.set(An,g)),e?await tt.set(Cn,u):Ft||wt.broadcastAction({type:"SYNC_PROFILE",payload:u,senderId:"DJ"}),{success:!0,profile:u}}catch(i){return console.error("Registration error:",i),{success:!1,error:i.message}}},q_=()=>{},O5=async(r,e)=>{if(r.toLowerCase()==="singmaster"&&e==="Organized"){const a={id:"admin-singmaster",name:"SingMaster",password:"Organized",favorites:[],personalHistory:[],createdAt:Date.now()};return await tt.set(Cn,a),{success:!0,profile:a}}const t=await Ut();let i=t.find(a=>a.name.toLowerCase()===r.toLowerCase());if(!i)try{const a=xl(Hn,"users"),l=lT(a,cT("name","==",r)),u=await Yd(l);u.empty||(i=u.docs[0].data(),t.push(i),await tt.set(An,t))}catch(a){console.warn("Error checking remote user:",a)}if(!i&&!e)return await Jc({name:r},!0);if(e)try{const a=`${r.replace(/\s+/g,"").toLowerCase()}@singmode.app`,u=(await UA(u0,a,e)).user.uid,p=await hT(rs(Hn,"users",u));if(p.exists()){const g=p.data();return await tt.set(Cn,g),{success:!0,profile:g}}else return i?{success:!0,profile:i}:{success:!1,error:"Profile data missing."}}catch(a){return console.warn("Firebase login failed, checking legacy local storage:",a),i?i.password&&i.password===e?(await tt.set(Cn,i),{success:!0,profile:i}):{success:!1,error:"Incorrect passkey."}:{success:!1,error:a.message||"Login failed."}}return i?(await tt.set(Cn,i),{success:!0,profile:i}):{success:!1,error:"User not found"}},j5=async r=>{const e=await Ut();let t=e.find(i=>i.id===r);if(!t)try{const i=rs(Hn,"users",r),a=await hT(i);a.exists()&&(t=a.data(),e.push(t),await tt.set(An,e))}catch(i){console.error("Error fetching user by ID:",i)}return t?(await tt.set(Cn,t),{success:!0,profile:t}):{success:!1,error:"User not found"}},Kd=async()=>{await GA(u0),ig?await window.chrome.storage.local.remove([Cn]):localStorage.removeItem(Cn),window.dispatchEvent(new Event("kstar_sync"))},Ks=async r=>{var l;const e=await Qe(),t=(l=e.bannedUsers)==null?void 0:l.find(u=>u.id===r);if(t)throw new Error(`ACCESS DENIED: ${t.reason}`);if(Ft){const u=await Gn();return wt.sendAction({type:"JOIN_SESSION",payload:{id:r,profile:u,userAgent:typeof navigator<"u"?navigator.userAgent:"Unknown"},senderId:wt.getMyPeerId()||r}),{id:r,name:(u==null?void 0:u.name)||"Joining...",status:Lt.STANDBY,joinedAt:Date.now()}}const a=(await Ut()).find(u=>u.id===r);if(!a){const u=await Gn();if(u&&u.id===r)return await H_(e,u);throw new Error("Profile not found")}return await H_(e,a)},H_=async(r,e)=>{const t={id:e.id,name:e.name,status:Lt.STANDBY,micEnabled:!1,joinedAt:Date.now()},i=r.participants.findIndex(a=>a.id===e.id);return i>-1?r.participants[i]={...r.participants[i],...t,status:r.participants[i].status}:r.participants.push(t),await pt(r),t},P5=async(r,e)=>{const t=await Ut(),i=t.findIndex(a=>a.id===r);if(i>-1){t[i].vocalRange=e,await tt.set(An,t),Ft||wt.broadcastAction({type:"SYNC_PROFILE",payload:t[i],senderId:"DJ"});const a=await Gn();a&&a.id===r&&await tt.set(Cn,t[i])}},xT=async(r,e)=>{var l;const t=e||((l=await Gn())==null?void 0:l.id);if(!t)return;if(Ft&&!e){wt.sendAction({type:"TOGGLE_FAVORITE",payload:r,senderId:t});const u=await Gn();if(u){const p=u.favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);p>-1?u.favorites.splice(p,1):u.favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await tt.set(Cn,u)}return}const i=await Ut(),a=i.findIndex(u=>u.id===t);if(a>-1){const u=i[a].favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);u>-1?i[a].favorites.splice(u,1):i[a].favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await tt.set(An,i),Ft||wt.broadcastAction({type:"SYNC_PROFILE",payload:i[a],senderId:"DJ"});const p=await Gn();p&&p.id===t&&await tt.set(Cn,i[a])}},sg=async r=>{const e=await Qe(),i=e.requests.filter(a=>a.participantId===r).map(a=>({...a,playedAt:Date.now(),status:Le.DONE,isInRound:!1}));i.length>0&&(e.history=[...i,...e.history].slice(0,100)),e.participants=e.participants.filter(a=>a.id!==r),e.requests=e.requests.filter(a=>a.participantId!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(a=>a.participantId!==r),e.currentRound.length===0&&(e.currentRound=null)),await pt(e)},Xs=async(r,e)=>{if(Ft){wt.sendAction({type:"TOGGLE_STATUS",payload:{id:r,status:e},senderId:r});return}const t=await Qe(),i=t.participants.find(a=>a.id===r);i&&(i.status=e,await pt(t))},M5=async r=>{const e=await Qe();e.maxRequestsPerUser=r,await pt(e)},ag=async(r,e,t)=>{if(Ft){wt.sendAction({type:"REORDER_MY_REQUESTS",payload:{requestId:e,direction:t},senderId:r});return}const i=await Qe(),a=i.requests.filter(b=>b.participantId===r&&b.status!==Le.DONE),l=a.findIndex(b=>b.id===e);if(l===-1)return;const u=t==="up"?l-1:l+1;if(u<0||u>=a.length)return;const[p]=a.splice(l,1);a.splice(u,0,p);const g=[...i.requests];g.map((b,_)=>b.participantId===r&&b.status!==Le.DONE?_:-1).filter(b=>b!==-1).forEach((b,_)=>{g[b]=a[_]}),i.requests=g,await pt(i)},L5=async(r,e)=>{if(Ft){wt.sendAction({type:"TOGGLE_MIC",payload:{id:r,enabled:e},senderId:r});return}const t=await Qe(),i=t.participants.find(a=>a.id===r);i&&(i.micEnabled=e,await pt(t))},Bs=async r=>{if(Ft)return wt.sendAction({type:"ADD_REQUEST",payload:r,senderId:r.participantId}),null;const e=await Qe(),t=e.nextRequestNumber++,i={...r,id:Math.random().toString(36).substr(2,9),requestNumber:t,createdAt:Date.now(),status:Le.PENDING,isInRound:!1},a=e.requests.filter(g=>g.participantId===r.participantId&&g.status===Le.PENDING).length;if(e.maxRequestsPerUser&&a>=e.maxRequestsPerUser)throw new Error(`Request limit reached. Max ${e.maxRequestsPerUser} requests allowed per performer.`);e.requests.unshift(i),vT(e,i);const l=await Ut(),u=l.findIndex(g=>g.id===r.participantId);u>-1&&(l[u].personalHistory=[i,...l[u].personalHistory].slice(0,50),await tt.set(An,l),Ft||wt.broadcastAction({type:"SYNC_PROFILE",payload:l[u],senderId:"DJ"}));const p=await Gn();if(p&&p.id===r.participantId){const g=l.find(y=>y.id===r.participantId);g&&await tt.set(Cn,g)}return await pt(e),i},Mc=async(r,e)=>{if(Ft){wt.sendAction({type:"UPDATE_REQUEST",payload:{id:r,updates:e},senderId:"client"});return}const t=await Qe(),i=t.requests.findIndex(l=>l.id===r);let a="";if(i!==-1&&(t.requests[i]={...t.requests[i],...e},a=t.requests[i].participantId,vT(t,t.requests[i])),t.currentRound){const l=t.currentRound.findIndex(u=>u.id===r);l!==-1&&(t.currentRound[l]={...t.currentRound[l],...e},a=t.currentRound[l].participantId)}if(a){const l=await Ut(),u=l.findIndex(g=>g.id===a);if(u>-1){const g=l[u].personalHistory.findIndex(y=>y.id===r);g!==-1&&(l[u].personalHistory[g]={...l[u].personalHistory[g],...e},await tt.set(An,l),Ft||wt.broadcastAction({type:"SYNC_PROFILE",payload:l[u],senderId:"DJ"}))}const p=await Gn();if(p&&p.id===a){const g=l.find(y=>y.id===a);g&&await tt.set(Cn,g)}}await pt(t)},xc=async r=>{const e=await Qe(),t=e.requests.find(i=>i.id===r);t&&(t.status=Le.APPROVED,await pt(e))},V5=async r=>{const e=await Qe(),t=e.requests.findIndex(a=>a.id===r);if(t===-1)return;const i=e.requests[t];i.status=Le.APPROVED,i.isInRound=!0,e.currentRound?e.currentRound.push({...i}):e.currentRound=[{...i}],await pt(e)},F_=async r=>{if(Ft)return;const e=await Qe(),t=e.requests.find(i=>i.id===r);if(t){if(t.status=Le.DONE,t.completedAt=Date.now(),e.currentRound){const i=e.currentRound.find(a=>a.id===r);i&&(i.status=Le.DONE,i.completedAt=Date.now())}await pt(e)}},Gs=async r=>{if(Ft){wt.sendAction({type:"DELETE_REQUEST",payload:r,senderId:"client"});return}const e=await Qe();e.requests=e.requests.filter(t=>t.id!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(t=>t.id!==r),e.currentRound.length===0&&(e.currentRound=null)),await pt(e)},$_=async(r,e)=>{const t=await Qe(),i=t.requests.findIndex(l=>l.id===r);if(i===-1)return;const a=e==="up"?i-1:i+1;if(a>=0&&a<t.requests.length){const l=t.requests[i];t.requests[i]=t.requests[a],t.requests[a]=l,await pt(t)}},U5=async r=>{const e=await Qe();e.queueStrategy=r,await pt(e)},z5=async()=>{const r=await Qe(),e=r.queueStrategy||pi.FRESH_MEAT,t=r.requests.filter(a=>a.status===Le.APPROVED&&a.type===ut.SINGING&&!a.isInRound),i=[];if(e===pi.FIFO){const a=[...t].sort((l,u)=>l.createdAt-u.createdAt);i.push(...a.slice(0,10))}else{let l=[...r.participants.filter(u=>t.some(p=>p.participantId===u.id))];switch(e){case pi.FRESH_MEAT:l.sort((g,y)=>(y.joinedAt||0)-(g.joinedAt||0));break;case pi.OLDEST_MEMBER:l.sort((g,y)=>(g.joinedAt||0)-(y.joinedAt||0));break;case pi.RANDOM:l.sort(()=>Math.random()-.5);break;case pi.FAIR_ROTATION:const u=g=>r.requests.filter(y=>y.participantId===g&&y.status===Le.DONE).length,p=g=>{var b;return((b=t.filter(_=>_.participantId===g).sort((_,T)=>_.createdAt-T.createdAt)[0])==null?void 0:b.createdAt)||Date.now()};l.sort((g,y)=>{const b=u(g.id),_=u(y.id);return b!==_?b-_:p(g.id)-p(y.id)});break}l.forEach(u=>{const g=t.filter(y=>y.participantId===u.id).sort((y,b)=>y.createdAt-b.createdAt)[0];g&&i.push(g)})}if(i.length===0){const a=r.requests.filter(l=>l.status===Le.APPROVED&&l.type===ut.LISTENING&&!l.isInRound).sort((l,u)=>l.createdAt-u.createdAt);a.length>0&&i.push(...a.slice(0,5))}i.forEach(a=>{const l=r.requests.find(u=>u.id===a.id);if(l&&(l.isInRound=!0),a.type===ut.SINGING){const u=r.participants.find(p=>p.id===a.participantId);u&&(u.status=Lt.READY)}}),i.length>0&&(r.currentRound=i,await pt(r))},_T=async r=>{const e=await Qe();e.currentRound=r,await pt(e)},wT=async r=>{const e=await Qe(),t=e.requests.filter(i=>!(i.status===Le.APPROVED&&i.type===ut.SINGING&&!i.isInRound));e.requests=[...r,...t],await pt(e)},ET=async r=>{const e=await Qe(),t=e.requests.filter(i=>!(i.status===Le.PENDING&&!i.isInRound));e.requests=[...r,...t],await pt(e)},B5=async()=>{const r=await Qe();if(!r.currentRound)return;const e=[...r.currentRound].sort((p,g)=>p.completedAt&&g.completedAt?p.completedAt-g.completedAt:p.completedAt?-1:g.completedAt?1:0),t=Date.now(),i=e.map(p=>({...p,playedAt:t,isInRound:!1,status:Le.DONE,completedAt:p.completedAt||t})),a=r.currentRound.map(p=>p.id);r.history=[...i,...r.history].slice(0,100),r.requests=r.requests.filter(p=>!a.includes(p.id));const l=await Ut();for(const p of i){const g=l.findIndex(y=>y.id===p.participantId);g!==-1&&(l[g].personalHistory=[p,...l[g].personalHistory].slice(0,50))}await tt.set(An,l);const u=await Gn();if(u){const p=l.find(g=>g.id===u.id);p&&await tt.set(Cn,p)}r.currentRound=null,r.isPlayingVideo=!1,await pt(r)},Tm=async(r,e)=>{const t=await Qe(),i=t.nextRequestNumber++,a={...r,id:Math.random().toString(36).substr(2,9),requestNumber:i,createdAt:Date.now(),status:Le.APPROVED,isInRound:!1,playedAt:void 0,aiIntro:void 0};t.requests.push(a),await pt(t)},Y_=async()=>{const r=await Qe();r.history=[],await pt(r)},G5=async(r,e,t)=>{if(Ft){wt.sendAction({type:"ADD_CHAT",payload:{name:e,text:t},senderId:r});return}const i=await Qe(),a={id:Math.random().toString(36).substr(2,9),senderId:r,senderName:e,text:t,timestamp:Date.now()};i.messages||(i.messages=[]),i.messages.push(a),await pt(i)},q5=async()=>{const r=await Ut(),e=Date.now(),t=1440*60*1e3,i=r.filter(a=>!a.password&&a.createdAt&&e-a.createdAt>t);if(i.length>0){for(const a of i)await Zh(a.id);console.log(`Cleaned up ${i.length} expired guest accounts.`)}},H5=async r=>{try{const e={id:r.id,hostName:r.hostName||"SingMode DJ",hostUid:r.hostUid||"anonymous-host",isActive:r.isActive??!0,startedAt:r.startedAt||Date.now(),lastHeartbeat:Date.now(),participantsCount:0,venueName:r.venueName||"SingMode Venue"};await dT(rs(Hn,"sessions",r.id),e)}catch(e){console.error("Error registering session:",e)}},F5=async r=>{try{const e=rs(Hn,"sessions",r);await fT(e,{lastHeartbeat:Date.now()})}catch(e){console.error("Error sending heartbeat:",e)}},TT=async r=>{try{const e=rs(Hn,"sessions",r);await Xc(e)}catch(e){console.error("Error unregistering session:",e)}},$5=async()=>{try{const r=xl(Hn,"sessions"),e=await Yd(r),t=Date.now(),i=1800*1e3;let a=0;for(const l of e.docs){const u=l.data();u.lastHeartbeat&&t-u.lastHeartbeat>i?(await Xc(l.ref),a++):!u.lastHeartbeat&&t-u.startedAt>i&&(await Xc(l.ref),a++)}return{success:!0,deletedCount:a}}catch(r){return console.error("Cleanup failed:",r),{success:!1,error:String(r)}}},ST=r=>{const e=xl(Hn,"sessions"),t=lT(e,cT("isActive","==",!0));return pT(t,i=>{const a=new Map,l=Date.now(),u=300*1e3;i.forEach(g=>{const y=g.data();if(y.lastHeartbeat&&l-y.lastHeartbeat<u){const _=y.hostUid||`${y.hostName}-${y.venueName}`,T=a.get(_);(!T||y.lastHeartbeat>T.lastHeartbeat)&&a.set(_,y)}});const p=Array.from(a.values()).sort((g,y)=>y.lastHeartbeat-g.lastHeartbeat);r(p)})},NT=({onSubmit:r,onCancel:e,title:t="Song Request",showSingerName:i=!1,initialSingerName:a="",initialSongName:l="",initialArtist:u="",initialYoutubeUrl:p="",initialType:g=ut.SINGING,submitLabel:y="SEND REQUEST",participants:b=[],currentUserId:_=""})=>{const[T,k]=ae.useState(a),V=T?`${t}: ${T}`:t,[$,ee]=ae.useState(l),[se,he]=ae.useState(u),[me,ye]=ae.useState(p),[Ie,Ee]=ae.useState(g),[A,C]=ae.useState(""),[R,L]=ae.useState(""),O=j=>{if(j.preventDefault(),(!$||!se)&&!me||i&&!T)return;const I=b.find(nt=>nt.id===R);r({singerName:T,songName:$,artist:se,youtubeUrl:me,type:Ie,message:A,duetPartnerId:R||void 0,duetPartnerName:I==null?void 0:I.name})};return h.jsxs("form",{onSubmit:O,className:"relative w-full bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in fade-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"mb-8 text-center",children:[h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase tracking-tight neon-text-glow-purple mb-2",children:V}),h.jsx("p",{className:"text-[10px] text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80",children:"NEW REQUEST"})]}),h.jsxs("div",{className:"space-y-6",children:[i&&h.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Your Name"}),h.jsx("input",{type:"text",required:!0,value:T,onChange:j=>k(j.target.value),placeholder:"e.g. STAR_VIBE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Song Title"}),h.jsx("input",{type:"text",value:$,onChange:j=>ee(j.target.value),placeholder:"TITLE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Artist"}),h.jsx("input",{type:"text",value:se,onChange:j=>he(j.target.value),placeholder:"ARTIST",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"YouTube URL (Optional)"}),h.jsx("input",{type:"url",value:me,onChange:j=>ye(j.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all text-xs font-mono shadow-inner tracking-wider"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Note for DJ"}),h.jsx("textarea",{value:A,onChange:j=>C(j.target.value),placeholder:"Key change? Dedication?",rows:2,className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest resize-none"})]}),Ie===ut.SINGING&&b.length>1&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Duet Partner (Optional)"}),h.jsxs("select",{value:R,onChange:j=>L(j.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-green)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest appearance-none",children:[h.jsx("option",{value:"",children:"-- NO PARTNER --"}),b.filter(j=>j.id!==_).map(j=>h.jsx("option",{value:j.id,children:j.name},j.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Performance Mode"}),h.jsx("div",{className:"flex bg-black/40 p-1.5 rounded-2xl border-2 border-white/5",children:Object.values(ut).map(j=>h.jsx("button",{type:"button",onClick:()=>Ee(j),className:`flex-1 py-3 rounded-xl font-bold text-[9px] uppercase tracking-widest transition-all font-righteous ${Ie===j?"bg-[var(--neon-cyan)] text-black shadow-[0_0_20px_rgba(0,229,255,0.4)]":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:j},j))})]}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{type:"button",onClick:e,className:"flex-1 py-4 bg-black hover:bg-white/5 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all border-2 border-white/10 font-righteous",children:"DISCARD"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_30px_rgba(255,0,127,0.4)] transition-all font-righteous hover:scale-105",children:y})]})]})]})};function Lc(){if(typeof window>"u")return"";const r=window.location.origin;if(!r.includes("localhost")&&!r.includes("127.0.0.1"))return r+window.location.pathname;const e=localStorage.getItem("kstar_network_ip");if(e){if(e.startsWith("http"))return e;const t=window.location.port;return`http://${e}:${t}${window.location.pathname}`}return r+window.location.pathname}function CT(r){localStorage.setItem("kstar_network_ip",r),window.dispatchEvent(new Event("kstar_sync"))}function AT(){return localStorage.getItem("kstar_network_ip")}const Y5=[{songName:"Bohemian Rhapsody",artist:"Queen"},{songName:"Toxic",artist:"Britney Spears"},{songName:"Someone Like You",artist:"Adele"},{songName:"Sweet Caroline",artist:"Neil Diamond"},{songName:"Wonderwall",artist:"Oasis"},{songName:"Dancing Queen",artist:"ABBA"},{songName:"I Will Survive",artist:"Gloria Gaynor"},{songName:"Don't Stop Believin'",artist:"Journey"},{songName:"Livin' on a Prayer",artist:"Bon Jovi"},{songName:"My Way",artist:"Frank Sinatra"}],zs=({url:r})=>r?h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-3 rounded-2xl text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border-2 border-[var(--neon-cyan)]/10 transition-all shadow-xl",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,Q5=({url:r})=>{const[e,t]=ae.useState(!1);if(!r)return null;const i=()=>{navigator.clipboard.writeText(r).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:i,title:"Copy Video URL",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-cyan)] text-black border-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)]":"text-slate-400 hover:text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1-2-2h9a2 2 0 0 1 2 2v1"})]})})},_c=({request:r})=>{const[e,t]=ae.useState(!1),i=r.songName||r.songName,a=()=>{const u=(r.type||r.type||ut.SINGING)===ut.SINGING?" Karaoke":" Lyric",p=`${i} ${r.artist}${u}`;navigator.clipboard.writeText(p).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:a,title:"Copy Command String",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-green)] text-black border-[var(--neon-green)] shadow-[0_0_20px_rgba(0,255,157,0.4)]":"text-slate-400 hover:text-[var(--neon-green)] hover:bg-[var(--neon-green)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})},wc=({request:r})=>{const e=r.songName||r.songName,t=()=>{const a=(r.type||r.type||ut.SINGING)===ut.SINGING?" Karaoke":" Lyric",l=encodeURIComponent(`${e} ${r.artist}${a}`);window.open(`https://www.youtube.com/results?search_query=${l}`,"_blank")};return h.jsx("button",{onClick:t,title:"Search on YouTube",className:"p-3 rounded-2xl transition-all border-2 text-rose-500 hover:text-white hover:bg-rose-500 border-white/5 shadow-xl",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})})},K5=({onAdminAccess:r})=>{var In,Pt;const[e,t]=ae.useState(null),[i,a]=ae.useState([]),[l,u]=ae.useState(!1),[p,g]=ae.useState(!1),[y,b]=ae.useState(null),[_,T]=ae.useState(!1),[k,V]=ae.useState(!1),[$,ee]=ae.useState(!1),[se,he]=ae.useState(!1),[me,ye]=ae.useState(!1),[Ie,Ee]=ae.useState([]),[A,C]=ae.useState(null),[R,L]=ae.useState(null),[O,j]=ae.useState(null),[I,nt]=ae.useState({}),[mt,Q]=ae.useState(!1),[le,we]=ae.useState(AT()||""),[Ve,rt]=ae.useState(""),[M,X]=ae.useState(!1),[ce,de]=ae.useState(0),[Ce,je]=ae.useState(null),[De,Ot]=ae.useState(new Set),[gt,ei]=ae.useState(""),[Fn,$n]=ae.useState(null),[gn,ie]=ae.useState("COMMAND"),[fe,He]=ae.useState(""),[yt,zt]=ae.useState(null),[st,Ne]=ae.useState(""),Jt=ae.useRef(null);ae.useRef(null);const _i=ae.useRef(null),pa=ae.useRef(null),[Tt,Un]=ae.useState(null),[Ue,dn]=ae.useState(null),[ti,wi]=ae.useState(!1),[Pr,Ei]=ae.useState({name:"",password:""}),[Ti,Wt]=ae.useState(""),[cn,yn]=ae.useState(!1),[Rt,is]=ae.useState(""),[Si,so]=ae.useState([]),[Yn,Mr]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),Fe=(E,Z)=>{Mr({isOpen:!0,message:E,onConfirm:Z})};ae.useEffect(()=>{const E=ST(Z=>{so(Z)});return()=>E()},[]);const ve=ae.useCallback(async()=>{const E=await Qe();t(E);const Z=await Ut();a(Z)},[]);ae.useEffect(()=>{if(Ue&&i.length>0){const E=i.find(Z=>Z.id===Ue.id);E&&JSON.stringify(E)!==JSON.stringify(Ue)&&dn(E)}},[i,Ue]),ae.useEffect(()=>(ve(),window.addEventListener("kstar_sync",ve),window.addEventListener("storage",ve),()=>{window.removeEventListener("kstar_sync",ve),window.removeEventListener("storage",ve),br()}),[ve]),ae.useEffect(()=>{(!(e!=null&&e.currentRound)||e.currentRound.length===0)&&Ot(new Set)},[e==null?void 0:e.currentRound]);const br=()=>{pa.current&&cancelAnimationFrame(pa.current),_i.current&&(_i.current.getTracks().forEach(E=>E.stop()),_i.current=null),Jt.current&&(Jt.current.close(),Jt.current=null),X(!1),de(0)},Qn=async(E,Z,z)=>{const J=`Taking the stage now, it's ${E} with "${Z}"!`;await Mc(z,{aiIntro:J}),nt(ue=>({...ue,[z]:J})),await ve()},_l=async E=>{if(R&&Ue)R.type==="favorite"?await R5(Ue.id,R.itemId,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}):await D5(Ue.id,R.itemId,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),L(null);else if(A)await Mc(A.id,{participantName:E.singerName||A.participantName,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),C(null);else if(y)await N5(y.id,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),b(null);else if(p)await S5({songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),g(!1);else{let Z=(O==null?void 0:O.id)||"DJ-MANUAL",z=E.singerName||(O==null?void 0:O.name)||"Guest";if(!O&&E.singerName){const J=await Jc({name:E.singerName});J.success&&J.profile&&(Z=J.profile.id,z=J.profile.name,await Ks(Z))}await Bs({participantId:Z,participantName:z,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),u(!1),j(null)}await ve()},ma=async E=>{await Ks(E.id);const Z=[...Y5];for(let z=0;z<3&&Z.length!==0;z++){const J=Math.floor(Math.random()*Z.length),ue=Z.splice(J,1)[0],qe=await Bs({participantId:E.id,participantName:E.name,songName:ue.songName,artist:ue.artist,type:ut.SINGING});qe&&await xc(qe.id)}await Xs(E.id,Lt.READY),await ve()},Kn=(E,Z,z)=>{const J=z===ut.SINGING?`${E} ${Z} karaoke`:`${E} ${Z} Lyrics Letra`,ue=`https://www.youtube.com/results?search_query=${encodeURIComponent(J)}`;window.open(ue,"_blank")},Lr=async E=>{var J;await V5(E),await ve();const z=(J=(await Qe()).currentRound)==null?void 0:J.find(ue=>ue.id===E);z&&Qn(z.participantName,z.songName,z.id)},wl=E=>{E.youtubeUrl?window.open(E.youtubeUrl,"_blank"):Kn(E.songName,E.artist,E.type)},Ni=async E=>{E.preventDefault(),Wt("");const Z={name:Pr.name,password:Pr.password||void 0};let z;Tt?z=await Ja(Tt.id,Z):z=await Jc(Z),z.success?(Un(null),wi(!1),Ei({name:"",password:""}),Wt(""),await ve()):Wt(z.error||"Action failed.")},[ni,ss]=ae.useState(null),[Ci,xr]=ae.useState(null),ga=(E,Z,z)=>{ss(Z),xr(z),E.dataTransfer.effectAllowed="move"},Xn=E=>{E.preventDefault(),E.dataTransfer.dropEffect="move"},Jn=async(E,Z,z)=>{if(E.preventDefault(),!(ni===null||Ci!==z)){if(z==="ROUND"&&(e!=null&&e.currentRound)){const J=Array.from(e.currentRound),[ue]=J.splice(ni,1);J.splice(Z,0,ue),await _T(J)}else if(z==="QUEUE"){const ue=Array.from(bn),[qe]=ue.splice(ni,1);ue.splice(Z,0,qe),await wT(ue)}else if(z==="PENDING"){const ue=Array.from(Vr),[qe]=ue.splice(ni,1);ue.splice(Z,0,qe),await ET(ue)}ss(null),xr(null),await ve()}},jt=E=>{Un(E),wi(!0),Ei({name:E.name,password:E.password||""})},Zt=E=>{Un(E),is(""),yn(!0),Wt(""),dn(null)},_r=async E=>{if(E.preventDefault(),!Tt)return;const Z=await Ja(Tt.id,{password:Rt});Z.success?(dn(Tt),Un(null),yn(!1),is(""),Wt(""),await ve()):Wt(Z.error||"Update failed.")},Ai=()=>{u(!1),C(null),L(null),j(null),T(!1),V(!1),ee(!1),he(!1),ye(!1),wi(!1),yn(!1),Un(null),dn(null),Q(!1),g(!1),b(null),$n(null),zt(null)},El=()=>{CT(le),Q(!1),ve()},ao=async()=>{await z5(),V(!1),await ve();const E=await Qe();E.currentRound&&E.currentRound.forEach(Z=>{Z.aiIntro||Qn(Z.participantName,Z.songName,Z.id)})},oo=async()=>{await C5(),ye(!1),await ve()},vn=E=>{const Z=i.find(z=>z.id===E);Z&&(dn(Z),ee(!0))};if(!e)return h.jsx("div",{className:"flex items-center justify-center p-20 min-h-screen",children:h.jsx("div",{className:"w-12 h-12 border-4 border-teal-400 border-t-transparent rounded-full animate-spin"})});const Vr=e.requests.filter(E=>E.status===Le.PENDING&&!E.isInRound),lr=e.requests.filter(E=>E.status===Le.APPROVED&&E.type===ut.SINGING&&!E.isInRound),Wn=e.participants.filter(E=>lr.some(Z=>Z.participantId===E.id)).sort((E,Z)=>(Z.joinedAt||0)-(E.joinedAt||0)),Bt={};lr.forEach(E=>{Bt[E.participantId]||(Bt[E.participantId]=[]),Bt[E.participantId].push(E)}),Object.keys(Bt).forEach(E=>{Bt[E].sort((Z,z)=>Z.createdAt-z.createdAt)});const bn=[];let kt=0,Ri=!0;for(;Ri;)Ri=!1,Wn.forEach(E=>{Bt[E.id]&&Bt[E.id][kt]&&(bn.push(Bt[E.id][kt]),Ri=!0)}),kt++;const Ur=e.requests.filter(E=>E.status===Le.APPROVED&&E.type===ut.LISTENING&&!E.isInRound),cr=e.participants.filter(E=>E.status===Lt.READY).length,kn=e.verifiedSongbook||[],zr=wt.getRoomId();Lc()+(zr?`?room=${zr}`:"");const as=({name:E,isActive:Z})=>{const z=E.split(" ").map(qe=>qe[0]).join("").toUpperCase().slice(0,2),J=["from-teal-400 to-indigo-500","from-rose-400 to-orange-500","from-amber-400 to-rose-500","from-indigo-400 to-purple-500","from-emerald-400 to-teal-500"],ue=E.length%J.length;return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${J[ue]} p-[2px] shadow-lg shadow-black/20`,children:h.jsx("div",{className:"w-full h-full bg-slate-950 rounded-[14px] flex items-center justify-center",children:h.jsx("span",{className:"text-xl font-black text-white tracking-widest",children:z})})}),Z&&h.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-[var(--neon-green)] rounded-full border-4 border-slate-950 animate-pulse"})]})},os=kn.filter(E=>E.songName.toLowerCase().includes(fe.toLowerCase())||E.artist.toLowerCase().includes(fe.toLowerCase())),lo=async E=>{if(Fn){const Z=await Bs({participantId:Fn.id,participantName:Fn.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl||"",type:E.type});Z&&await xc(Z.id),$n(null),He(""),await ve()}},ls=E=>{b(E)};return h.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-8 space-y-12 relative font-inter text-slate-300",children:[h.jsxs("header",{className:"relative rounded-[4rem] p-1 overflow-hidden shadow-3xl mb-12 group",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] opacity-80 group-hover:opacity-100 transition-all duration-1000 animate-gradient-x"}),h.jsxs("div",{className:"relative glass-panel rounded-[3.9rem] p-10 flex flex-col md:flex-row justify-between items-center gap-12 border border-white/20 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex items-center gap-10",children:[h.jsxs("div",{className:"relative group/logo",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-[var(--neon-yellow)] to-[var(--neon-pink)] rounded-full blur-xl opacity-60 group-hover/logo:opacity-100 transition-opacity duration-500"}),h.jsx("div",{className:"relative p-1.5 rounded-full border-4 border-white/10 shadow-2xl bg-black/40",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-32 h-32 rounded-full transition-transform duration-700 group-hover/logo:rotate-[360deg]"})})]}),h.jsxs("div",{children:[h.jsxs("h1",{className:"text-8xl font-bold font-bungee text-white flex items-center gap-6 uppercase tracking-tight neon-glow-pink leading-none",children:["SINGMODE ",h.jsx("span",{className:"text-[var(--neon-blue)] neon-glow-cyan text-5xl font-righteous translate-y-2",children:"beta"})]}),h.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[h.jsx("span",{className:"px-4 py-1.5 rounded-full bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] text-lg font-bold uppercase tracking-widest font-righteous",children:"DJ CONSOLE"}),h.jsx("span",{className:"text-[var(--neon-blue)]/30",children:"||"}),h.jsxs("span",{className:"text-[var(--neon-blue)] text-lg font-bold uppercase tracking-widest font-righteous neon-glow-cyan",children:["SINGERS: ",e.participants.length]})]})]})]}),h.jsx("div",{className:"flex gap-4",children:h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-base text-[var(--neon-yellow)] font-bold uppercase tracking-widest font-righteous mb-1",children:"STATUS"}),h.jsxs("div",{className:"text-4xl text-white font-bold uppercase tracking-widest font-bungee flex items-center justify-end gap-3",children:["ONLINE ",h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-pulse shadow-[0_0_10px_var(--neon-green)]"})]})]})})]})]}),h.jsx("div",{className:"sticky top-4 z-50",children:h.jsxs("div",{className:"glass-panel p-4 rounded-[2.5rem] border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-wrap items-center gap-4 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex gap-3 p-2 bg-black/40 rounded-[2rem] border border-white/5",children:[h.jsxs("button",{onClick:()=>u(!0),className:"px-8 py-4 bg-[var(--neon-pink)] text-black font-black hover:bg-white transition-all active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(255,42,109,0.4)] text-lg uppercase tracking-[0.2em] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:rotate-90 transition-transform",children:""})," ADD SONG"]}),h.jsxs("button",{onClick:()=>{V(!0),ve()},className:"px-8 py-4 bg-[var(--neon-blue)] text-black font-black hover:bg-white transition-all uppercase tracking-[0.2em] text-lg active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(5,217,232,0.4)] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:animate-spin",children:""})," NEXT ROUND"]})]}),h.jsx("div",{className:"w-[1px] h-12 bg-white/10 mx-2"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>T(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-yellow)] border border-[var(--neon-yellow)]/30 bg-[var(--neon-yellow)]/5 hover:bg-[var(--neon-yellow)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(255,200,87,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),h.jsx("button",{onClick:()=>ee(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-blue)] border border-[var(--neon-blue)]/30 bg-[var(--neon-blue)]/5 hover:bg-[var(--neon-blue)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(5,217,232,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),h.jsx("button",{onClick:()=>ye(!0),className:"w-14 h-14 flex items-center justify-center text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:rotate-12 transition-transform",children:""})}),r&&h.jsxs("button",{onClick:r,title:"ADMIN PORTAL",className:"w-14 h-14 flex items-center justify-center text-[var(--neon-purple)] border border-[var(--neon-purple)]/30 bg-[var(--neon-purple)]/5 hover:bg-[var(--neon-purple)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(147,51,234,0.1)] group ml-4 relative",children:[h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""}),h.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[var(--neon-pink)] rounded-full animate-pulse border-2 border-black"})]}),h.jsxs("button",{onClick:()=>{Fe("Are you sure you want to sign out?",async()=>{await Kd(),window.location.reload()})},title:"SIGN OUT",className:"px-6 h-14 flex items-center justify-center gap-3 text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group ml-2",children:[h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-righteous",children:"SIGN_OUT"})]})]}),h.jsx("div",{className:"flex-1"}),h.jsx("div",{className:"flex gap-2 p-2 bg-black/40 rounded-[2rem] border border-white/5 overflow-x-auto no-scrollbar",children:["COMMAND","ROTATION","PERFORMERS","LIBRARY","NETWORK"].map(E=>h.jsx("button",{onClick:()=>{ie(E)},className:`px-8 py-3 text-base font-bold uppercase tracking-widest transition-all rounded-[1.2rem] font-righteous ${gn===E?"bg-white text-black shadow-[0_0_30px_rgba(255,255,255,0.4)] scale-105":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:E==="COMMAND"?"CONTROLS":E==="ROTATION"?"STAGE":E==="PERFORMERS"?"SINGERS":E==="LIBRARY"?"SONGBOOK":"NETWORK"},E))})]})}),h.jsxs("main",{className:"min-h-[600px] animate-in fade-in duration-500",children:[gn==="COMMAND"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 animate-in slide-in-from-bottom-2",children:[h.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[e.currentRound&&h.jsxs("section",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-[0_0_100px_rgba(255,42,109,0.3)] zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-orange)] opacity-20 animate-pulse"}),h.jsxs("div",{className:"relative bg-[#150030]/90 p-10 rounded-[2.8rem] backdrop-blur-xl border-2 border-[var(--neon-green)]/50",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-6xl animate-pulse",children:""})," NOW PLAYING"]}),h.jsx("button",{onClick:async()=>{await B5(),await ve()},className:"px-8 py-3 bg-[var(--neon-pink)] text-black text-base font-bold uppercase hover:bg-white transition-all rounded-[1rem] tracking-widest font-righteous shadow-[0_0_20px_var(--neon-pink)] active:scale-95",children:"END ROUND"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:e.currentRound.map((E,Z)=>{const z=e.participants.find(Mt=>Mt.id===E.participantId),J=(z==null?void 0:z.status)===Lt.READY,ue=e.currentRound.findIndex(Mt=>Mt.status!==Le.DONE),qe=Z===(ue===-1?0:ue);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${qe?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"relative",children:[qe&&h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-[var(--neon-green)] text-black text-[8px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] z-20",children:"LIVE"}),h.jsx("button",{onClick:()=>{const Mt=E.type===ut.SINGING?" Karaoke":" Lyric",$t=`${E.songName} ${E.artist}${Mt}`;navigator.clipboard.writeText($t)},title:"Copy Command String",className:`w-16 h-16 flex flex-col justify-center items-center border-2 rounded-2xl transition-all shrink-0 active:scale-95 ${qe?"border-[var(--neon-green)] bg-[var(--neon-green)]/10 text-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"border-white/10 text-slate-400 hover:border-white/30 hover:bg-white/5"}`,children:h.jsx("span",{className:"text-2xl font-bold font-mono tracking-tighter",children:E.requestNumber})})]}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-2xl font-black uppercase font-righteous tracking-tight leading-tight ${qe?"text-white":"text-slate-300"}`,children:E.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:E.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("button",{onClick:()=>vn(E.participantId),className:"flex items-center gap-2 group/singer hover:underline",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${J?"bg-[var(--neon-green)] shadow-[0_0_5px_var(--neon-green)]":"bg-slate-700"}`}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",E.participantName]})]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[h.jsx("button",{onClick:async()=>{E.status===Le.DONE?await Mc(E.id,{status:Le.APPROVED}):await F_(E.id),await ve()},title:E.status===Le.DONE?"Undo Done":"Mark as Done",className:`p-2 rounded-xl transition-all border-2 ${E.status===Le.DONE?"text-yellow-500 border-yellow-500/30 bg-yellow-500/10 shadow-[0_0_15px_rgba(234,179,8,0.2)]":"text-slate-600 border-white/5 hover:border-white/20 hover:text-white"}`,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})})}),h.jsx("button",{onClick:()=>{Fe("Remove from active round?",async()=>{await Gs(E.id),await ve()})},className:"w-8 h-8 flex items-center justify-center rounded bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white transition-all border border-rose-500/20",title:"REMOVE",children:""})]})]},E.id)})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/80 border-2 border-[var(--neon-blue)]/30 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(5,217,232,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8 px-2",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-cyan",children:[h.jsx("span",{className:"text-[var(--neon-blue)]",children:""})," REQUESTS"]}),h.jsxs("span",{className:"px-6 py-2 bg-[var(--neon-blue)]/10 border border-[var(--neon-blue)]/30 rounded-full text-base text-[var(--neon-blue)] font-bold tracking-widest font-righteous",children:[Vr.length," PENDING"]})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[Vr.map((E,Z)=>h.jsxs("div",{draggable:!0,onDragStart:z=>ga(z,Z,"PENDING"),onDragOver:Xn,onDrop:z=>Jn(z,Z,"PENDING"),className:"bg-black/40 border border-white/5 p-4 rounded-3xl flex items-center gap-6 hover:border-[var(--neon-blue)] transition-all group cursor-move shadow-xl",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[h.jsx("div",{className:"text-xs font-black font-righteous text-[var(--neon-pink)] uppercase tracking-[0.2em] bg-[var(--neon-pink)]/10 px-2 py-0.5 rounded-full border border-[var(--neon-pink)]/20 shrink-0",children:"NEW_SIGNAL"}),h.jsx("div",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-slate-500 text-base font-black uppercase tracking-[0.2em] font-righteous truncate",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:()=>vn(E.participantId),className:"text-base font-bold text-[var(--neon-pink)] uppercase truncate hover:text-white transition-colors font-righteous tracking-[0.2em]",children:["@",E.participantName]}),E.message&&h.jsx("div",{className:"flex-1 max-w-md px-3 py-1 bg-black/40 border-l-2 border-[var(--neon-pink)] rounded-r-lg",children:h.jsxs("p",{className:"text-base text-white/60 font-medium italic truncate",children:['"',E.message,'"']})})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(_c,{request:E}),h.jsx(wc,{request:E}),h.jsx(zs,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white/50 hover:text-white border border-white/5",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:async()=>{await xc(E.id),await ve()},className:"px-6 py-3 bg-[var(--neon-blue)] text-black text-sm font-black uppercase hover:bg-white transition-all rounded-xl tracking-[0.1em] shadow-[0_0_20px_rgba(5,217,232,0.3)]",children:"ACCEPT"}),h.jsx("button",{onClick:()=>{Fe("Delete pending request?",async()=>{await Gs(E.id),await ve()})},className:"w-11 h-11 flex items-center justify-center text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all",children:""})]})]})]},E.id)),Vr.length===0&&h.jsx("div",{className:"col-span-full py-24 text-center border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-30",children:h.jsx("p",{className:"text-4xl font-black font-righteous uppercase tracking-[0.4em] italic text-slate-500",children:"NO SIGNAL DETECTED"})})]})]}),h.jsxs("div",{className:"flex flex-col gap-10",children:[h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-yellow)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-5xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-yellow flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-yellow)] animate-pulse",children:""})," QUEUE"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[bn.map((E,Z)=>h.jsxs("div",{draggable:!0,onDragStart:z=>ga(z,Z,"QUEUE"),onDragOver:Xn,onDrop:z=>Jn(z,Z,"QUEUE"),className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-yellow)] transition-all cursor-move shadow-lg relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-yellow)] font-bungee text-3xl shrink-0 group-hover:scale-110 transition-transform",children:Z+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-2xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-yellow)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:z=>{z.stopPropagation(),vn(E.participantId)},className:"text-sm font-black text-[var(--neon-yellow)] uppercase tracking-[0.2em] font-righteous hover:text-white transition-colors",children:["@",E.participantName]}),E.message&&h.jsxs("div",{className:"flex-1 max-w-sm px-2 py-0.5 bg-[var(--neon-yellow)]/5 border-l border-[var(--neon-yellow)]/30 rounded-r text-xs text-[var(--neon-yellow)]/70 italic truncate",children:['"',E.message,'"']})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[h.jsx("button",{onClick:async()=>{await $_(E.id,"up"),await ve()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""}),h.jsx("button",{onClick:async()=>{await $_(E.id,"down"),await ve()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(_c,{request:E}),h.jsx(wc,{request:E}),h.jsx(zs,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"p-2 text-slate-600 hover:text-white text-xs font-black uppercase tracking-widest font-righteous transition-colors border border-white/5 rounded-lg",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5",children:[h.jsx("button",{onClick:()=>Lr(E.id),className:"px-4 py-2 bg-[var(--neon-yellow)] text-black text-sm font-black uppercase rounded-lg hover:bg-white transition-all shadow-[0_0_15px_rgba(255,200,87,0.3)] tracking-wider",children:"STAGE"}),h.jsx("button",{onClick:()=>{Fe("Remove from queue?",async()=>{await Gs(E.id),await ve()})},className:"w-9 h-9 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-all",children:""})]})]})]},E.id)),bn.length===0&&h.jsx("div",{className:"flex-1 py-12 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-xl font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"QUEUE EMPTY"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-blue)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-blue flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-blue)] animate-pulse",children:""})," TO HEAR (",Ur.length,")"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[Ur.map((E,Z)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-blue)] transition-all relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-blue)] font-bungee text-xl shrink-0",children:Z+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-[0.2em] font-righteous",children:["@",E.participantName]})]}),h.jsx("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx("button",{onClick:async()=>{await Gs(E.id),await ve()},className:"px-4 py-2 text-rose-500 hover:bg-rose-500 hover:text-white rounded-lg transition-all font-black text-xs uppercase tracking-widest font-righteous",children:"REMOVE"})})]},E.id)),Ur.length===0&&h.jsx("div",{className:"flex-1 py-8 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-base font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"NO LISTENING TRACKS"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-green)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl md:text-4xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-green flex items-center gap-4 flex-wrap",children:[h.jsx("span",{className:"text-[var(--neon-green)] animate-pulse",children:""})," ATMOSPHERE"]}),h.jsxs("div",{className:"space-y-10",children:[h.jsxs("div",{className:"p-6 bg-black/40 rounded-3xl border border-white/5 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[h.jsx("label",{className:"text-sm md:text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.2em] font-righteous opacity-80 break-words",children:"REQUEST LIMIT"}),h.jsx("span",{className:"text-4xl font-black text-white font-bungee neon-glow-cyan",children:e.maxRequestsPerUser||5})]}),h.jsx("input",{type:"range",min:"1",max:"20",value:e.maxRequestsPerUser||5,onChange:async E=>{await M5(parseInt(E.target.value)),await ve()},className:"w-full accent-[var(--neon-cyan)] bg-white/5 rounded-lg appearance-none h-2 cursor-pointer transition-all"}),h.jsxs("div",{className:"flex justify-between text-xs font-black text-slate-600 font-righteous uppercase tracking-widest",children:[h.jsx("span",{children:"STRICT (1)"}),h.jsx("span",{children:"UNLIMITED (20)"})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-base font-black text-[var(--neon-pink)] uppercase tracking-[0.4em] mb-4 flex items-center gap-4 font-righteous opacity-80",children:"BACKGROUND THREADS"}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...Ur].reverse().map(E=>h.jsxs("div",{className:"bg-black/60 p-5 rounded-[2rem] border border-white/10 flex flex-col justify-between group hover:border-[var(--neon-pink)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4 cursor-pointer",onClick:()=>Kn(E.songName,E.artist,E.type),children:[h.jsx("div",{className:"text-2xl font-black text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-pink)] transition-all",children:E.songName}),h.jsx("div",{className:"text-base text-slate-500 uppercase tracking-widest mt-1 font-righteous opacity-60 truncate",children:E.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsx(zs,{url:E.youtubeUrl}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Lr(E.id),className:"px-4 py-2 bg-[var(--neon-purple)] text-white text-sm font-black uppercase rounded-lg hover:bg-white hover:text-black transition-all shadow-[0_0_10px_var(--neon-purple)] tracking-[0.1em]",children:"BOOST"}),h.jsx("button",{onClick:()=>{Fe("Remove from atmosphere?",async()=>{await Gs(E.id),await ve()})},className:"text-rose-500/20 hover:text-rose-500 p-2 font-black",children:""})]})]})]},E.id)),Ur.length===0&&h.jsx("p",{className:"text-base text-slate-700 italic px-4 font-righteous uppercase tracking-widest opacity-50",children:"NO BACKGROUND TRACKS"})]})]}),h.jsxs("div",{className:"pt-6 border-t border-white/5",children:[h.jsxs("h4",{className:"text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.4em] mb-6 flex justify-between items-center font-righteous opacity-80",children:[h.jsx("span",{children:"VERIFIED_LINKS"}),h.jsx("button",{onClick:()=>g(!0),className:"text-[var(--neon-cyan)] hover:text-white transition-colors underline decoration-dotted",children:"+ ADD NEW"})]}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...kn].reverse().map(E=>h.jsxs("div",{className:"bg-black/80 p-5 rounded-[2rem] border border-white/5 flex flex-col justify-between group hover:border-[var(--neon-cyan)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4",children:[h.jsx("div",{className:"text-2xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors font-bungee mb-1",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous font-bold",children:E.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx(Q5,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>b(E),className:"text-slate-600 hover:text-white p-2",children:""})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:()=>Kn(E.songName,E.artist,E.type),className:"px-3 py-1 bg-black border border-[var(--neon-cyan)] text-[var(--neon-cyan)] text-sm font-black uppercase rounded-md hover:bg-[var(--neon-cyan)] hover:text-black transition-all tracking-widest",children:"RUN"}),h.jsx("button",{onClick:()=>{u(!0)},className:"px-3 py-1 bg-[var(--neon-pink)] text-black text-sm font-black uppercase rounded-md hover:bg-white transition-all shadow-lg tracking-widest",children:"PUSH"}),h.jsx("button",{onClick:()=>{Fe("Delete verified song?",async()=>{await G_(E.id),await ve()})},className:"text-rose-500/20 hover:text-rose-500 px-1 font-black",children:""})]})]})]},E.id)),kn.length===0&&h.jsx("p",{className:"text-xl text-slate-800 italic px-4 font-righteous uppercase tracking-widest opacity-30",children:"NO VERIFIED SONGS"})]})]})]})]})]})]}),h.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[600px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"PERFORMERS"}),h.jsxs("div",{className:"flex items-center gap-2 bg-white/5 px-3 py-1 rounded-full border border-white/5",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-sm text-[var(--neon-cyan)] font-bold uppercase tracking-widest",children:[cr," ONLINE"]})]})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.participants.map(E=>{const Z=E.status===Lt.READY,J=e.requests.filter(ue=>ue.participantId===E.id).filter(ue=>ue.status===Le.APPROVED&&ue.type===ut.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] transition-all border ${Z?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"bg-black/40 border-white/5 hover:bg-white/5"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-4",children:[h.jsx("button",{onClick:async()=>{await Xs(E.id,Z?Lt.STANDBY:Lt.READY),await ve()},className:`w-3 h-3 rounded-full shrink-0 transition-all ${Z?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-800"}`}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>vn(E.id),className:`text-xl font-black uppercase truncate text-left transition-colors font-righteous ${Z?"text-white":"text-slate-500 hover:text-[var(--neon-green)]"}`,children:E.name}),J>0&&h.jsxs("span",{className:"block text-xs text-[var(--neon-cyan)] font-black mt-0.5 tracking-[0.2em]",children:[J," REQUESTS"]})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>j(E),className:"p-2 hover:text-[var(--neon-cyan)] transition-colors text-slate-600",children:"+"}),h.jsx("button",{onClick:()=>{Fe(`Remove ${E.name}?`,async()=>{await sg(E.id),await ve()})},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-colors",children:""})]})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg font-righteous uppercase tracking-widest",children:"NO DATA"})})]})]}),h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[400px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await Y_(),await ve()},className:"text-sm font-bold text-rose-500/40 hover:text-rose-500 uppercase tracking-widest transition-all",children:"CLEAR"})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.history.map((E,Z)=>h.jsxs("div",{className:"bg-black/40 p-4 rounded-2xl border border-white/5 flex flex-col group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{className:"min-w-0 pr-2",children:[h.jsx("div",{className:"text-xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-purple)] transition-colors font-bungee",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[h.jsx(_c,{request:E}),h.jsx(wc,{request:E}),h.jsx(zs,{url:E.youtubeUrl})]})]}),h.jsxs("div",{className:"flex items-center justify-between mt-2 border-t border-white/5 pt-2",children:[h.jsxs("span",{className:"text-base font-black text-[var(--neon-pink)] uppercase truncate",children:["@",E.participantName]}),h.jsx("button",{onClick:async()=>{await Tm(E),await ve()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-pink)] hover:underline transition-all uppercase tracking-widest",children:"RE-QUEUE"})]})]},Z)),e.history.length===0&&h.jsx("div",{className:"text-center py-16 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-800",children:"EMPTY"})})]})]})]})]}),gn==="ROTATION"&&h.jsxs("div",{className:"space-y-16 animate-in slide-in-from-bottom-2 pb-32",children:[e.currentRound&&e.currentRound.length>0&&h.jsxs("section",{className:"glass-panel border-4 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(0,255,157,0.3)] relative overflow-hidden neon-sign-border-green",children:[h.jsxs("div",{className:"flex items-center gap-8 mb-12",children:[h.jsx("div",{className:"w-8 h-8 bg-[var(--neon-green)] rounded-full animate-ping shadow-[0_0_25px_var(--neon-green)]"}),h.jsx("h3",{className:"text-6xl font-black text-white uppercase tracking-tighter font-righteous neon-glow-green",children:"NOW PLAYING"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:e.currentRound.map((E,Z)=>{const z=e.currentRound.findIndex(ue=>ue.status!==Le.DONE),J=Z===(z===-1?0:z);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${J?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsx("div",{className:"w-16 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:h.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${J?"text-[var(--neon-green)]":"text-slate-400"}`,children:E.requestNumber})}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-3xl font-black uppercase truncate font-righteous tracking-tight ${J?"text-white":"text-slate-300"}`,children:E.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:E.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",E.participantName]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-6 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[J&&h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] mr-2 shrink-0",children:"LIVE"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(_c,{request:E}),h.jsx(wc,{request:E}),h.jsx(zs,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white/5 hover:bg-white hover:text-black border border-white/10 transition-all text-slate-400 group",title:"EDIT",children:h.jsx("span",{className:"text-sm font-black font-righteous",children:"EDIT"})}),h.jsx("button",{onClick:()=>wl(E),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-black border border-white/20 hover:bg-white hover:text-black hover:border-white transition-all group",title:"RESET TRACK",children:h.jsx("span",{className:"text-lg",children:""})}),h.jsxs("button",{disabled:E.status===Le.DONE,onClick:async()=>{await F_(E.id),await ve()},className:`h-10 px-6 rounded-lg text-sm font-black uppercase tracking-widest font-righteous transition-all flex items-center gap-2 ${E.status===Le.DONE?"bg-white/10 text-white/40 cursor-not-allowed border border-white/5":"bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black border border-[var(--neon-cyan)]/50"}`,children:[h.jsx("span",{children:E.status===Le.DONE?"COMPLETED":"DONE"}),E.status!==Le.DONE&&h.jsx("span",{className:"text-lg leading-none",children:""})]})]})]})]},E.id)})})]}),h.jsxs("section",{className:"bg-[#050510] border-4 border-[var(--neon-cyan)]/30 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(0,229,255,0.15)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[h.jsx("div",{className:"w-4 h-4 bg-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)] rounded-full animate-pulse"}),h.jsx("h3",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"UPCOMING"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-6",children:[bn.map(E=>h.jsxs("div",{className:"relative group perspective-1000",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-purple)] to-[var(--neon-blue)] rounded-[2.5rem] blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),h.jsxs("div",{className:"relative bg-[#101015] p-8 rounded-[2.5rem] border border-white/10 flex justify-between items-center group-hover:border-[var(--neon-cyan)] transition-all shadow-2xl h-full",children:[h.jsxs("div",{className:"min-w-0 pr-6 flex-1",children:[h.jsx("div",{className:"text-white font-black uppercase truncate text-4xl font-bungee tracking-tight mb-2 group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-lg text-slate-500 uppercase flex items-center gap-3 font-righteous tracking-[0.2em] opacity-80",children:[h.jsxs("span",{className:"text-[var(--neon-green)] font-black",children:["@",E.participantName]}),h.jsx("span",{className:"opacity-20",children:"|"}),h.jsx("span",{className:"truncate",children:E.artist})]})]}),h.jsxs("div",{className:"flex gap-3 shrink-0 flex-col",children:[h.jsx("button",{onClick:()=>Lr(E.id),className:"px-6 py-3 bg-[var(--neon-green)] text-black text-base font-black rounded-xl uppercase tracking-[0.2em] font-righteous shadow-[0_0_20px_var(--neon-green)] transition-all hover:bg-white hover:scale-105",children:"STAGE"}),h.jsx("button",{onClick:async()=>{await Gs(E.id),await ve()},className:"px-6 py-3 border border-white/10 text-white/40 hover:text-rose-500 hover:border-rose-500/50 rounded-xl transition-all text-lg font-black uppercase tracking-[0.2em]",children:"REMOVE"})]})]})]},E.id)),bn.length===0&&h.jsx("div",{className:"col-span-full py-32 text-center border-4 border-dashed border-white/5 rounded-[4rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] italic font-righteous text-slate-700",children:"NO DATA STREAM"})})]})]})]}),gn==="PERFORMERS"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 animate-in slide-in-from-bottom-2 pb-32",children:[h.jsxs("section",{className:"lg:col-span-8 bg-[#0a0a0a] border-4 border-[var(--neon-cyan)]/20 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(0,229,255,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"SINGERS"}),h.jsxs("div",{className:"flex items-center gap-4 px-6 py-2 bg-black/40 border border-[var(--neon-cyan)]/30 rounded-full shadow-lg",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-lg font-bold text-[var(--neon-cyan)] uppercase tracking-widest font-righteous",children:[cr," ACTIVE"]})]})]}),h.jsxs("div",{className:"grid gap-6",children:[e.participants.map(E=>{const Z=E.status===Lt.READY,J=e.requests.filter(ue=>ue.participantId===E.id).filter(ue=>ue.status===Le.APPROVED&&ue.type===ut.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-6 rounded-[2rem] transition-all border-2 ${Z?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.15)]":"bg-black/40 border-white/5 hover:border-white/20"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-6 text-left",children:[h.jsx("button",{onClick:async()=>{await Xs(E.id,Z?Lt.STANDBY:Lt.READY),await ve()},className:`w-12 h-12 rounded-full shrink-0 border-2 transition-all flex items-center justify-center ${Z?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_20px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-white/50"}`,children:Z&&h.jsx("div",{className:"w-4 h-4 bg-white rounded-full animate-pulse"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>vn(E.id),className:`font-bold text-4xl uppercase truncate font-bungee tracking-tight transition-colors ${Z?"text-white":"text-slate-600 hover:text-[var(--neon-green)]"}`,children:E.name}),J>0&&h.jsxs("div",{className:"text-base font-bold text-[var(--neon-cyan)] uppercase mt-1 tracking-widest font-righteous opacity-90",children:[J," TRACKS READY"]})]})]}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("button",{onClick:()=>j(E),className:"px-6 py-3 bg-[var(--neon-cyan)]/10 text-[var(--neon-cyan)] rounded-xl border border-[var(--neon-cyan)]/50 transition-all font-righteous text-base font-black uppercase tracking-[0.2em] hover:bg-[var(--neon-cyan)] hover:text-black hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"ADD TRACK"}),h.jsx("button",{onClick:()=>{Fe(`Remove ${E.name}?`,async()=>{await sg(E.id),await ve()})},className:"text-rose-500/30 hover:text-rose-500 p-3 transition-colors text-3xl font-black",children:""})]})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"py-32 text-center border-4 border-dashed border-white/5 rounded-[3rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.6em] italic font-righteous text-slate-800",children:"NO SIGNALS"})})]})]}),h.jsxs("section",{className:"lg:col-span-4 lg:sticky lg:top-36 h-fit bg-[#050510] border-4 border border-white/5 rounded-[3.5rem] p-8 shadow-[0_0_60px_rgba(157,0,255,0.15)] relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-purple",children:"SESSION LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await Y_(),await ve()},className:"text-sm font-black text-rose-500/40 hover:text-rose-500 uppercase tracking-[0.3em] font-righteous transition-all",children:"CLEAR ALL"})]}),h.jsxs("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[e.history.filter(E=>(E.playedAt||0)>=(e.startedAt||0)).map((E,Z)=>h.jsxs("div",{className:"bg-black/40 p-5 rounded-[1.5rem] border border-white/5 group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-2xl font-black text-white uppercase truncate font-bungee tracking-tight group-hover:text-[var(--neon-purple)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 font-bold uppercase truncate font-righteous tracking-widest mt-1",children:E.artist})]}),h.jsx(zs,{url:E.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-3 mt-1",children:[h.jsxs("button",{onClick:()=>vn(E.participantId),className:"text-sm font-black text-[var(--neon-pink)] uppercase truncate hover:text-white font-righteous tracking-widest transition-colors mb-0",children:["@",E.participantName]}),h.jsx("button",{onClick:async()=>{await Tm(E),await ve()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-cyan)] hover:text-white transition-all font-righteous tracking-widest uppercase ml-auto",children:"RELOAD"})]})]},Z)),e.history.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-700",children:"EMPTY"})})]})]}),h.jsxs("section",{className:"lg:col-span-12 bg-black/40 border-4 border-white/5 rounded-[3rem] p-10 mt-10 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-cyan",children:"COMPLETED ROUNDS"}),h.jsx("div",{className:"text-[var(--neon-cyan)]/40 text-sm font-black uppercase tracking-[0.4em] font-righteous",children:"HISTORY"})]}),h.jsx("div",{className:"grid gap-12",children:(()=>{const E={};e.history.filter(z=>(z.playedAt||0)>=(e.startedAt||0)).forEach(z=>{const J=z.playedAt||0;E[J]||(E[J]=[]),E[J].push(z)});const Z=Object.keys(E).map(Number).sort((z,J)=>J-z);return Z.length===0?h.jsx("div",{className:"text-center py-24 border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-20",children:h.jsx("p",{className:"text-2xl font-black uppercase tracking-[0.4em] font-righteous text-slate-500",children:"HISTORY_NULL"})}):Z.map(z=>h.jsxs("div",{className:"bg-[#050510] border-2 border-white/5 rounded-[2.5rem] p-8 relative group hover:border-[var(--neon-cyan)]/30 transition-all",children:[h.jsxs("div",{className:"absolute top-0 left-10 py-1 px-4 bg-[var(--neon-cyan)] text-black text-[10px] font-black uppercase tracking-widest rounded-b-lg font-righteous shadow-[0_0_15px_rgba(0,229,255,0.4)]",children:["ROUND_",new Date(z).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",children:E[z].map((J,ue)=>h.jsxs("div",{className:"flex flex-col p-4 bg-black/40 rounded-2xl border border-white/5 group/song hover:bg-white/5 transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("div",{className:"text-lg font-black text-white uppercase truncate font-bungee tracking-tight group-hover/song:text-[var(--neon-cyan)] transition-colors",children:J.songName}),h.jsx(zs,{url:J.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-widest font-righteous",children:["@",J.participantName]}),h.jsxs("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-tighter",children:["POS_",ue+1]})]})]},J.id))})]},z))})()})]})]}),gn==="LIBRARY"&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-2 space-y-10 pb-32",children:[h.jsx("div",{className:"sticky top-0 z-40 pt-4 -mt-4",children:h.jsxs("div",{className:"relative group p-1 rounded-[2.5rem] bg-[#050510]/90 shadow-2xl backdrop-blur-xl border border-white/10",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)]/20 via-[var(--neon-purple)]/20 to-[var(--neon-cyan)]/20 blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),h.jsx("input",{type:"text",placeholder:"SEARCH SONGBOOK...",value:st,onChange:E=>Ne(E.target.value),className:"w-full bg-black/50 border-2 border-white/10 rounded-[2.3rem] py-6 pl-16 pr-32 text-2xl font-bold tracking-widest text-white placeholder:text-slate-600 focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous uppercase"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors pointer-events-none",children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),h.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:h.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-[2rem] font-black text-base uppercase tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.4)] active:scale-95 transition-all font-righteous hover:bg-white hover:scale-105",children:"+ ADD NEW"})})]})}),h.jsx("div",{className:"flex flex-col gap-3",children:(()=>{const Z=((e==null?void 0:e.verifiedSongbook)||[]).map(z=>({...z,isVerified:!0,title:z.songName,source:"VERIFIED"})).filter(z=>{if(!st)return!0;const J=st.toLowerCase();return z.title.toLowerCase().includes(J)||z.artist.toLowerCase().includes(J)});return Z.length===0?h.jsxs("div",{className:"col-span-full text-center py-40 opacity-30 border-4 border-dashed border-white/5 rounded-[4rem]",children:[h.jsx("div",{className:"text-8xl mb-6 opacity-50 grayscale animate-pulse",children:st?"":""}),h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] font-righteous text-slate-600",children:st?"NO MATCH FOUND":"SONGBOOK EMPTY"})]}):Z.map((z,J)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-4 rounded-[2rem] flex items-center justify-between group hover:border-[var(--neon-cyan)] transition-all relative hover:z-50 shadow-lg",children:[h.jsxs("div",{className:"flex items-center gap-6 flex-1 min-w-0",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black rounded-lg border border-white/10 text-[var(--neon-cyan)] text-2xl",children:""}),h.jsx("div",{className:"min-w-0 pr-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[z.isVerified&&h.jsx("div",{className:"px-2 py-0.5 bg-[var(--neon-pink)] text-black rounded-full text-[10px] font-black uppercase tracking-widest font-righteous shrink-0",children:"VERIFIED"}),h.jsx("h4",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-cyan)] transition-colors",children:z.title}),h.jsxs("span",{className:"text-base text-slate-600 font-bold uppercase font-righteous tracking-widest truncate",children:["/ ",z.artist]})]})})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(_c,{request:z}),h.jsx(wc,{request:z}),h.jsx(zs,{url:z.youtubeUrl}),h.jsx("button",{onClick:async()=>{await G_(z.id).then(ve)},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-all text-xl",children:""})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 ml-4",children:[h.jsxs("div",{className:"relative group/assign",children:[h.jsx("button",{className:"px-6 py-2.5 bg-white text-black text-sm font-black uppercase rounded-lg hover:bg-[var(--neon-cyan)] transition-all font-righteous tracking-wider",children:"ASSIGN"}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-cyan)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/assign:opacity-100 group-hover/assign:visible transition-all p-4 z-50 backdrop-blur-xl w-[200px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"TRANSMIT TO:"}),h.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:[e.participants.map(ue=>h.jsx("button",{onClick:async()=>{const qe=await Bs({participantId:ue.id,participantName:ue.name,songName:z.title,artist:z.artist,youtubeUrl:z.youtubeUrl,type:ut.SINGING});qe&&await xc(qe.id),await ve()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-cyan)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:ue.name},ue.id)),h.jsx("div",{className:"h-[1px] bg-white/10 my-2"}),h.jsx("button",{onClick:async()=>{const ue=await Bs({participantId:"DJ-MANUAL",participantName:"GUEST",songName:z.title,artist:z.artist,youtubeUrl:z.youtubeUrl,type:ut.SINGING});ue&&await xc(ue.id),await ve()},className:"w-full text-left p-2 rounded-lg bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)] hover:text-black text-sm font-black uppercase font-righteous transition-all",children:"+ GUEST"})]})]})]}),h.jsxs("div",{className:"relative group/star",children:[h.jsx("button",{className:"px-4 py-2.5 bg-black border border-white/10 text-[var(--neon-pink)] rounded-lg font-black text-sm uppercase tracking-widest hover:border-[var(--neon-pink)] transition-all font-righteous",children:""}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-pink)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/star:opacity-100 group-hover/star:visible transition-all p-4 z-50 backdrop-blur-xl w-[180px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-pink)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"ADD FAVORITE:"}),h.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:e.participants.map(ue=>h.jsx("button",{onClick:async()=>{await k5(ue.id,{songName:z.title,artist:z.artist,youtubeUrl:z.youtubeUrl,type:z.type}),await ve()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-pink)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:ue.name},ue.id))})]})]})]})]})]},J))})()})]})]}),k&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-6 z-[100] backdrop-blur-xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 shadow-[0_0_100px_rgba(255,42,109,0.2)] animate-in zoom-in-95 duration-500 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-start mb-8",children:[h.jsx("h2",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee neon-glow-pink",children:"REVIEW LINEUP"}),h.jsx("button",{onClick:()=>V(!1),className:"text-slate-600 hover:text-white font-bold text-5xl px-2 transition-all transform hover:scale-110",children:""})]}),h.jsx("div",{className:"mb-8 text-lg text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80 decoration-dotted underline underline-offset-4",children:"OPERATIONAL READY CHECK"}),h.jsx("div",{className:"space-y-4 mb-10 max-h-[400px] overflow-y-auto pr-4 custom-scrollbar",children:(()=>{var Z;const E=e.participants.filter(z=>{var J;return(J=e.requests)==null?void 0:J.some(ue=>ue.participantId===z.id&&ue.status===Le.APPROVED&&ue.type===ut.SINGING&&!ue.isInRound)}).sort((z,J)=>(J.joinedAt||0)-(z.joinedAt||0));if(E.length>0)return E.map(z=>{var qe;const J=z.status===Lt.READY,ue=(qe=e.requests)==null?void 0:qe.find(Mt=>Mt.participantId===z.id&&Mt.status===Le.APPROVED&&Mt.type===ut.SINGING&&!Mt.isInRound);return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] border-2 transition-all duration-300 ${J?"bg-[#150030] border-[var(--neon-green)] shadow-[0_0_20px_rgba(57,255,20,0.15)]":"bg-black/40 border-white/5 opacity-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsx("button",{onClick:async()=>{await Xs(z.id,J?Lt.STANDBY:Lt.READY),await ve()},className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center transition-all border-2 ${J?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-slate-600"}`,children:J&&h.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:`font-bold uppercase text-2xl truncate tracking-tight font-bungee ${J?"text-white":"text-slate-600"}`,children:z.name}),J?ue?h.jsx("div",{className:"text-[var(--neon-cyan)] text-base font-black uppercase tracking-[0.2em] font-righteous mt-0.5 opacity-90",children:ue.songName}):h.jsx("div",{className:"text-rose-500 text-sm font-black uppercase tracking-[0.1em] font-righteous mt-0.5",children:" NO SIGNAL"}):h.jsx("div",{className:"text-slate-700 text-sm font-black uppercase tracking-[0.2em] font-righteous mt-0.5",children:"STANDBY"})]})]}),J&&ue&&h.jsx("div",{className:"shrink-0 text-sm bg-[var(--neon-cyan)] text-black px-4 py-1.5 rounded-full font-black uppercase tracking-widest font-righteous shadow-[0_0_10px_var(--neon-cyan)] animate-in fade-in zoom-in",children:"READY"})]},z.id)});{const z=((Z=e.requests)==null?void 0:Z.filter(J=>J.status===Le.APPROVED&&J.type===ut.LISTENING&&!J.isInRound).sort((J,ue)=>J.createdAt-ue.createdAt).slice(0,5))||[];return z.length>0?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-dashed border-white/10 text-center",children:h.jsx("p",{className:"text-[var(--neon-blue)] font-black uppercase tracking-widest font-righteous",children:"FALLBACK: LISTENING MODE"})}),z.map(J=>h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-[1.5rem] border-2 bg-[#0a0a20] border-[var(--neon-blue)]/30",children:[h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"text-[var(--neon-blue)] text-xl font-black uppercase tracking-tight font-bungee",children:J.songName}),h.jsx("div",{className:"text-slate-500 text-sm font-bold uppercase tracking-widest font-righteous",children:J.artist})]}),h.jsxs("div",{className:"text-xs font-black uppercase tracking-widest text-[var(--neon-pink)] font-righteous",children:["@",J.participantName]})]},J.id))]}):h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[2.5rem] border-4 border-dashed border-white/5 animate-in fade-in duration-700",children:h.jsx("p",{className:"text-slate-700 text-2xl font-black uppercase tracking-[0.4em] font-righteous",children:"NO DATA"})})}})()}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>V(!1),className:"flex-1 py-4 bg-black hover:bg-white hover:text-black text-white border border-white/10 rounded-xl font-black uppercase text-base tracking-widest transition-all font-righteous",children:"CANCEL"}),(()=>{var ue;const E=e.participants.filter(qe=>{var Mt;return(Mt=e.requests)==null?void 0:Mt.some($t=>$t.participantId===qe.id&&$t.status===Le.APPROVED&&$t.type===ut.SINGING&&!$t.isInRound)}).length,Z=((ue=e.requests)==null?void 0:ue.filter(qe=>qe.status===Le.APPROVED&&qe.type===ut.LISTENING&&!qe.isInRound).length)||0,z=E>0?E:Z,J=E>0?"ACTIVATE ROUND":"ACTIVATE LISTENING";return h.jsx("button",{onClick:ao,disabled:z===0,className:`flex-[2] py-4 rounded-xl font-black uppercase text-base tracking-widest transition-all flex items-center justify-center gap-3 shadow-lg font-righteous ${z>0?"bg-[var(--neon-green)] hover:bg-white hover:text-black text-black hover:scale-105":"bg-slate-900 text-slate-800 cursor-not-allowed border border-white/5"}`,children:z>0?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-ping"}),J," (",z,")"]}):"IDLE"})})()]}),h.jsxs("div",{className:"bg-[#151520] p-6 rounded-[2rem] border border-white/5 mt-8",children:[h.jsxs("h3",{className:"text-xl font-black text-white uppercase tracking-widest font-righteous mb-4 flex items-center gap-3",children:[h.jsx("span",{className:"text-[var(--neon-purple)]",children:""})," Priority Protocol"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.values(pi).map(E=>h.jsxs("button",{onClick:()=>{U5(E)},className:`p-4 rounded-xl border-2 text-left transition-all relative overflow-hidden group ${e.queueStrategy===E?"bg-[var(--neon-purple)]/20 border-[var(--neon-purple)] text-white shadow-[0_0_15px_var(--neon-purple)]":"bg-black/40 border-white/5 text-slate-500 hover:border-white/20 hover:text-slate-300"}`,children:[h.jsx("div",{className:"font-bold font-righteous uppercase tracking-wider relative z-10",children:E.replace("_"," ")}),h.jsxs("div",{className:"text-[10px] uppercase font-mono mt-1 opacity-60 relative z-10",children:[E==="FRESH_MEAT"&&"New Singers First",E==="FAIR_ROTATION"&&"Fewest Songs + Oldest Wait",E==="FIFO"&&"Strict First In First Out",E==="OLDEST_MEMBER"&&"Oldest Singers First",E==="RANDOM"&&"Chaotic Shuffle"]}),e.queueStrategy===E&&h.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-[var(--neon-green)] animate-pulse"})]},E))})]})]})}),me&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-rose-500/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(244,63,94,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-rose-500 shadow-[0_0_20px_rgba(244,63,94,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-[2rem] border-2 border-rose-500/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(244,63,94,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-rose",children:"SYSTEM RESET"}),h.jsxs("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:["This will ",h.jsx("span",{className:"text-rose-500 underline decoration-2 underline-offset-4 decoration-rose-500",children:"TERMINATE ALL SESSIONS"}),", clear requests, and wipe history logs."]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>ye(!1),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:oo,className:"flex-[2] py-4 bg-rose-500 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(244,63,94,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"EXECUTE WIPE"})]})]})}),($||Ue)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[70] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-6xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-purple",children:"User Directory"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] uppercase font-black tracking-[0.3em] font-righteous opacity-80 mt-1",children:"Authenticated Identities & Signal History"})]}),h.jsxs("div",{className:"flex gap-3",children:[Ue&&h.jsx("button",{onClick:()=>dn(null),className:"px-6 py-3 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/10 transition-all",children:" ALL ACCOUNTS"}),h.jsx("button",{onClick:()=>{Fe("DANGER: This will permanently delete ALL GUEST ACCOUNTS and DUPLICATE ENTRIES from the Firestore database. Proceed?",async()=>{const E=await bT();E.success?(alert(`DATABASE CLEANUP SUCCESS: Removed ${E.deletedCount} orphan records.`),await ve()):alert(`CLEANUP FAILED: ${E.error}`)})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/50 text-rose-500 rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-rose-500 hover:text-white transition-all hover:scale-105",children:"PURGE GUESTS"}),h.jsx("button",{onClick:()=>wi(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"+ NEW ACCOUNT"}),h.jsx("button",{onClick:Ai,className:"text-slate-600 hover:text-white p-2 ml-2 font-black text-4xl transition-colors transform hover:scale-110",children:""})]})]}),h.jsx("div",{className:"p-6 border-b-2 border-white/5 bg-black/20",children:h.jsxs("div",{className:"relative group max-w-2xl mx-auto",children:[h.jsx("input",{type:"text",placeholder:"SCANNING DIRECTORY RECORDS...",value:Ve,onChange:E=>rt(E.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-10 py-4 text-white font-black uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-12 custom-scrollbar bg-black/20",children:Ue?h.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500 grid lg:grid-cols-12 gap-8",children:[h.jsx("div",{className:"lg:col-span-4 space-y-6",children:h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[3rem] p-8 shadow-2xl relative overflow-hidden group hover:border-[var(--neon-purple)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-[var(--neon-purple)]/10 blur-[60px] rounded-full -mr-24 -mt-24 group-hover:bg-[var(--neon-purple)]/20 transition-all"}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[h.jsx("div",{className:"scale-125 mb-4",children:h.jsx(as,{name:Ue.name,isActive:e.participants.some(E=>E.id===Ue.id)})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"text-sm font-bold text-[var(--neon-cyan)] uppercase tracking-widest mb-2 font-righteous",children:"SINGER PROFILE"}),h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee break-words",children:Ue.name})]}),h.jsxs("div",{className:"w-full mt-8 space-y-3 pt-6 border-t border-white/5",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"SINGER ID"}),h.jsxs("span",{className:"text-[var(--neon-pink)] font-mono opacity-80",children:[Ue.id.slice(0,8),"..."]})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"SECURITY"}),h.jsx("span",{className:`px-2 py-0.5 rounded-full ${Ue.password?"bg-[var(--neon-pink)]/10 text-[var(--neon-pink)]":"bg-slate-900 text-slate-600"}`,children:Ue.password?"SECURE PIN":"OPEN LINK"})]})]}),h.jsxs("div",{className:"w-full mt-10 space-y-3",children:[h.jsx("button",{onClick:()=>Zt(Ue),className:"w-full py-3 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"CHANGE PASSWORD"}),h.jsx("button",{onClick:async()=>{await Ks(Ue.id),await ve()},className:"w-full py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all shadow-[0_0_15px_rgba(0,229,255,0.3)] font-righteous hover:bg-white",children:"SYNC QR CODE"}),h.jsx("div",{className:"pt-2 border-t border-white/5 mt-2 space-y-2"}),h.jsx("button",{onClick:()=>{Fe("Permanently delete this account?",async()=>{await Zh(Ue.id),dn(null),await ve()})},className:"w-full py-3 bg-rose-500/5 hover:bg-rose-500 text-rose-500/40 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all border border-transparent hover:border-rose-500/30 font-righteous mt-2",children:"TERMINATE ACCOUNT"})]})]})]})}),h.jsx("div",{className:"lg:col-span-8 space-y-6",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-pink)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["LIBRARY STARS (",Ue.favorites.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[Ue.favorites.map(E=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl flex justify-between items-center group hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-black text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-pink)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:async()=>{await Bs({participantId:Ue.id,participantName:Ue.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),await ve()},className:"px-3 py-1.5 bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[var(--neon-cyan)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-cyan)] hover:text-black transition-all",children:"ADD"}),h.jsx("button",{onClick:()=>L({type:"favorite",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:()=>{Fe("Remove from stars?",async()=>{await A5(Ue.id,E.id),await ve()})},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]},E.id)),Ue.favorites.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"Catalog is empty"})]})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-cyan)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["PERFORMANCE LOG (",Ue.personalHistory.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[Ue.personalHistory.map((E,Z)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:[h.jsx("button",{onClick:()=>L({type:"history",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:()=>{Fe("Erase from history?",async()=>{await I5(Ue.id,E.id),await ve()})},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]}),h.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[h.jsx("span",{className:"text-xs text-slate-700 font-black uppercase font-righteous tracking-widest",children:new Date(E.createdAt).toLocaleDateString()}),h.jsx("button",{onClick:async()=>{await Tm(E),await ve()},className:"px-3 py-1.5 bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-pink)] hover:text-black transition-all",children:"RE-QUEUE"})]})]},Z)),Ue.personalHistory.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"No transmissions recorded"})]})]})]})]})})]}):cn?h.jsxs("form",{onSubmit:_r,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:"SECURITY UPDATE"}),h.jsxs("p",{className:"text-center text-slate-400 font-righteous uppercase tracking-widest mb-8",children:["UPDATING KEY FOR: ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:Tt==null?void 0:Tt.name})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"NEW ENCRYPTION PIN"}),h.jsx("input",{required:!0,type:"password",value:Rt,onChange:E=>{is(E.target.value),Wt("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all",placeholder:"ENTER NEW PIN"})]}),Ti&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",Ti]})})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{yn(!1),dn(Tt),Un(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"UPDATE KEY"})]})]}):ti?h.jsxs("form",{onSubmit:Ni,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:Tt?"Modify Profile":"New User Account"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"IDENTITY HANDLE"}),h.jsx("input",{required:!0,type:"text",value:Pr.name,onChange:E=>{Ei({...Pr,name:E.target.value}),Wt("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]}),Ti&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",Ti]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"ENCRYPTION PIN (OPTIONAL)"}),h.jsx("input",{type:"password",value:Pr.password,onChange:E=>Ei({...Pr,password:E.target.value}),className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{wi(!1),Un(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"AUTHORIZE ACCOUNT"})]})]}):h.jsx("div",{className:"space-y-16",children:(()=>{const E=i.filter(z=>!z.password&&e.participants.some(J=>J.id===z.id)&&(z.name.toLowerCase().includes(Ve.toLowerCase())||z.id.toLowerCase().includes(Ve.toLowerCase()))),Z=i.filter(z=>(z.password||!e.participants.some(J=>J.id===z.id))&&(z.name.toLowerCase().includes(Ve.toLowerCase())||z.id.toLowerCase().includes(Ve.toLowerCase())));return h.jsxs(h.Fragment,{children:[E.length>0&&h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-[var(--neon-green)] uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ACTIVE SIGNALS"}),h.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-[var(--neon-green)]/30 to-transparent"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:E.map(z=>h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 rounded-[2rem] p-4 flex items-center justify-between hover:border-[var(--neon-green)] transition-all shadow-lg group relative overflow-hidden",children:[h.jsxs("div",{className:"flex items-center gap-6 min-w-0 pr-4",children:[h.jsx(as,{name:z.name,isActive:!0}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>dn(z),className:"text-white font-bold text-3xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-green)] transition-colors font-bungee",children:z.name}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:"text-[10px] bg-[var(--neon-green)] text-black px-2 py-0.5 rounded-full font-black uppercase tracking-widest font-righteous shrink-0",children:"LIVE"}),h.jsxs("span",{className:"text-sm text-slate-600 uppercase font-black font-righteous tracking-widest truncate",children:[z.favorites.length,"   ",z.personalHistory.length," TX"]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 bg-black/40 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:()=>dn(z),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>jt(z),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>ma(z),className:"py-2.5 px-6 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO_SET"}),h.jsx("button",{onClick:()=>$n(z),className:"py-2.5 px-6 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"MANUAL"})]}),h.jsx("button",{onClick:()=>{Fe("Terminate temporary link?",async()=>{await Zh(z.id),await ve()})},className:"w-10 h-10 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all font-black",children:""})]})]},z.id))})]}),h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-slate-600 uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ARCHIVE DIRECTORY"}),h.jsx("div",{className:"h-[1px] w-full bg-white/5"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:Z.map(z=>{const J=e.participants.some(ue=>ue.id===z.id);return h.jsxs("div",{className:`bg-[#101015] border-2 ${J?"border-[var(--neon-cyan)] shadow-[0_0_20px_rgba(0,229,255,0.1)]":"border-white/5"} rounded-[2.5rem] p-6 flex flex-col justify-between hover:border-[var(--neon-purple)] transition-all group`,children:[h.jsxs("div",{className:"flex justify-between items-start gap-4 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-2xl font-black border-2 ${z.password?"bg-indigo-900/50 border-[var(--neon-purple)] text-white shadow-[0_0_15px_rgba(167,139,250,0.3)]":"bg-slate-800 border-white/10 text-slate-500"}`,children:z.name.charAt(0).toUpperCase()}),z.isAdmin&&h.jsx("div",{className:"absolute -top-2 -right-2 bg-[var(--neon-pink)] text-black text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg border border-white/20",children:"ADMIN"})]}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"flex justify-between items-start gap-2",children:h.jsx("button",{onClick:()=>dn(z),className:"text-white font-bold text-2xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-purple)] transition-colors font-bungee",children:z.name})}),h.jsxs("p",{className:"text-xs text-slate-500 uppercase font-black tracking-[0.2em] mt-1 font-righteous",children:[z.password?" AUTHENTICATED":"GUEST ID","  ",z.favorites.length," "]})]})]}),h.jsx("button",{onClick:()=>zt(z),className:"p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-[var(--neon-cyan)]/20 hover:border-[var(--neon-cyan)] hover:text-[var(--neon-cyan)] transition-all group/qr",title:"Generate SINC QR",children:h.jsxs("div",{className:"w-6 h-6 flex flex-col justify-between items-center p-0.5",children:[h.jsx("div",{className:"w-full h-[2px] bg-current"}),h.jsxs("div",{className:"w-full flex justify-between",children:[h.jsx("div",{className:"w-[2px] h-[2px] bg-current"}),h.jsx("div",{className:"w-[2px] h-[2px] bg-current"})]}),h.jsx("div",{className:"w-full h-[2px] bg-current"}),h.jsxs("div",{className:"w-full flex justify-between",children:[h.jsx("div",{className:"w-[2px] h-[2px] bg-current"}),h.jsx("div",{className:"w-[2px] h-[2px] bg-current"})]}),h.jsx("div",{className:"w-full h-[2px] bg-current"})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>dn(z),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>jt(z),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>ma(z),className:"flex-[2] py-2.5 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO-SET"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>$n(z),className:"flex-[4] py-2.5 bg-slate-900 border border-white/5 hover:border-[var(--neon-pink)] text-slate-500 hover:text-white rounded-lg flex items-center justify-center gap-2 transition-all text-xs font-black uppercase font-righteous",children:"MANUAL SELECT"}),h.jsx("button",{onClick:()=>{Fe("Erase this record permanently?",async()=>{await Zh(z.id),await ve()})},className:"flex-1 py-2.5 bg-rose-500/5 text-rose-500/20 hover:text-rose-500 border border-transparent hover:border-rose-500/30 rounded-lg transition-all flex items-center justify-center",children:""})]})]})]},z.id)})}),Z.length===0&&E.length===0&&h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-slate-800 text-base font-black uppercase tracking-[0.5em] font-righteous",children:"EMPTY DIRECTORY - NO SIGNALS DETECTED"})})]})]})})()})})]})}),(l||A||R||O||p||y)&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-[100] backdrop-blur-xl",children:h.jsx("div",{className:"w-full max-w-md",children:(()=>{let E={singerName:"",songName:"",artist:"",youtubeUrl:"",type:ut.SINGING},Z="Global Track Input";if(R&&Ue)if(R.type==="favorite"){const z=Ue.favorites.find(J=>J.id===R.itemId);z&&(E={singerName:Ue.name,songName:z.songName,artist:z.artist,youtubeUrl:z.youtubeUrl||"",type:z.type},Z=`Edit Permanent Favorite for ${Ue.name}`)}else{const z=Ue.personalHistory.find(J=>J.id===R.itemId);z&&(E={singerName:Ue.name,songName:z.songName,artist:z.artist,youtubeUrl:z.youtubeUrl||"",type:z.type},Z=`Edit History Entry for ${Ue.name}`)}else A?(E={singerName:A.participantName,songName:A.songName,artist:A.artist,youtubeUrl:A.youtubeUrl||"",type:A.type},Z="Modify Track"):y?(E={singerName:"",songName:y.songName,artist:y.artist,youtubeUrl:y.youtubeUrl||"",type:y.type},Z="Edit Verified Song"):p?(E={singerName:"",songName:"",artist:"",youtubeUrl:"",type:ut.SINGING},Z="Add to Verified Songbook"):O&&(E.singerName=O.name,Z=`Song for ${O.name}`);return h.jsx(NT,{title:Z,showSingerName:!R&&!y&&!p,initialSingerName:E.singerName,initialSongName:E.songName,initialArtist:E.artist,initialYoutubeUrl:E.youtubeUrl,initialType:E.type,submitLabel:A||R||y?"Save Update":p?"Add to Library":"Queue Track",onSubmit:_l,onCancel:Ai,participants:e.participants},(A==null?void 0:A.id)||(R==null?void 0:R.itemId)||(O==null?void 0:O.id)||(y==null?void 0:y.id)||(p?"new-verified":"new-request"))})()})}),(_||yt)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-500",children:h.jsxs("div",{className:"w-full max-w-sm bg-[#0a0a0a] border-4 border-white/10 rounded-[3rem] p-8 relative overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] via-[var(--neon-purple)] to-[var(--neon-pink)] animate-gradient-x"}),h.jsxs("div",{className:"flex justify-between items-start mb-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tight font-bungee neon-glow-white",children:yt?"USER SINC":"JOIN ROOM"}),yt&&h.jsxs("p",{className:"text-[var(--neon-cyan)] text-xs font-black uppercase tracking-widest font-righteous mt-1",children:["TARGET: ",yt.name]})]}),h.jsx("button",{onClick:()=>{T(!1),zt(null)},className:"text-slate-600 hover:text-white p-2 font-black text-3xl transition-colors",children:""})]}),h.jsx("div",{className:"bg-white p-4 rounded-3xl mb-8 transform hover:scale-105 transition-transform duration-500 hover:rotate-1 shadow-[0_0_50px_rgba(255,255,255,0.1)]",children:h.jsx(k2,{value:(()=>{const E=Lc();return yt?`${E}?userId=${yt.id}&room=${zr||""}`:`${E}?room=${zr||""}`})(),size:400,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs font-righteous",children:yt?"SCAN TO LINK DEVICE TO PROFILE":"SCAN TO JOIN SESSION"}),Lc().includes("localhost")&&h.jsx("div",{className:"p-3 bg-amber-500/20 border border-amber-500/50 rounded-xl mb-4",children:h.jsxs("p",{className:"text-amber-500 text-[10px] font-black uppercase tracking-widest leading-tight",children:[" LOCALHOST DETECTED",h.jsx("br",{}),"MOBILE DEVICES CANNOT CONNECT TO LOCALHOST. USE NETWORK IP."]})}),h.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/5",children:h.jsx("p",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-widest text-sm font-righteous break-all",children:yt?"AUTO-LOGIN ENABLED":`ROOM ID: ${zr}`})})]})]})}),mt&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-xl bg-[#050510] border-4 border-white/10 p-12 rounded-[3.5rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-glow-purple",children:"Signal Origin"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mb-12 font-righteous opacity-80",children:"Set the endpoint for guest terminal connections"}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-black/40 p-8 rounded-[2rem] border-2 border-white/5 border-dashed",children:[h.jsx("p",{className:"text-sm text-slate-500 uppercase font-black mb-3 tracking-[0.3em] font-righteous",children:"LOCAL ENVIRONMENT DETECTION"}),h.jsxs("div",{className:"text-xl text-[var(--neon-cyan)] font-mono font-black tracking-widest",children:[window.location.hostname," ",h.jsx("span",{className:"text-sm text-slate-700 opacity-60",children:"(CURRENT HOST)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-black text-slate-500 uppercase mb-4 ml-4 tracking-[0.3em] font-righteous",children:"TERMINAL ADDRESS / PUBLIC TUNNEL URL"}),h.jsx("input",{type:"text",value:le,onChange:E=>we(E.target.value),placeholder:"E.G. 192.168.1.15 OR HTTPS://SIGNAL.NGROK.APP",className:"w-full bg-black border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-black uppercase font-mono tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all placeholder:text-slate-800 text-lg"})]}),h.jsx("div",{className:"bg-[var(--neon-pink)]/5 border border-[var(--neon-pink)]/10 p-6 rounded-2xl",children:h.jsx("p",{className:"text-sm text-[var(--neon-pink)]/60 font-black leading-relaxed uppercase tracking-widest font-righteous italic",children:"Note: Cross-network connectivity requires tunneling (ngrok) for public-private bridge."})}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{onClick:()=>Q(!1),className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:El,className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"AUTHORIZE CONFIG"})]})]})]})}),Fn&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-pink",children:"Signal Selection"}),h.jsxs("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mt-1 font-righteous opacity-80",children:["Verified Catalog  Target: ",h.jsx("span",{className:"text-[var(--neon-pink)]",children:Fn.name})]})]}),h.jsx("button",{onClick:()=>$n(null),className:"text-slate-600 hover:text-white p-3 font-black text-4xl transition-colors transform hover:scale-110",children:""})]}),h.jsx("div",{className:"p-6 bg-black/20 border-b-2 border-white/5",children:h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"FILTER VERIFIED TRANSMISSIONS...",value:fe,onChange:E=>He(E.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-12 py-4 text-white font-black uppercase tracking-widest font-righteous outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:[fe&&os.length===0&&h.jsx("div",{className:"text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO MATCHING TRANSMISSIONS"})}),!fe&&kn.length===0&&h.jsx("div",{className:"text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO VERIFIED SONGS IN LIBRARY"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(fe?os:kn).map(E=>h.jsxs("div",{className:"bg-black/40 border-2 border-white/5 rounded-2xl p-4 relative overflow-hidden group hover:border-[var(--neon-pink)] transition-all",children:[h.jsx("h3",{className:"text-lg font-black text-white uppercase truncate font-righteous",children:E.songName}),h.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-4 font-righteous",children:E.artist}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>lo(E),className:"flex-1 py-2 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"SELECT"}),h.jsx("button",{onClick:()=>ls(E),className:"flex-1 py-2 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"})]})]},E.id))})]}),h.jsx("div",{className:"p-6 border-t-2 border-white/5 flex justify-end bg-black/40 backdrop-blur-xl",children:h.jsx("button",{onClick:()=>g(!0),className:"py-3 px-6 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"ADD NEW VERIFIED SONG"})})]})}),h.jsx("style",{children:`
        @keyframes gradient-x {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient-x {
          background-size: 200% 200%;
          animation: gradient-x 3s ease infinite;
        }
        .neon-glow-pink {
          text-shadow: 0 0 10px rgba(255, 0, 255, 0.5), 0 0 20px rgba(255, 0, 255, 0.3);
        }
        .neon-glow-cyan {
          text-shadow: 0 0 10px rgba(0, 229, 255, 0.5), 0 0 20px rgba(0, 229, 255, 0.3);
        }
        .neon-glow-purple {
          text-shadow: 0 0 10px rgba(167, 139, 250, 0.5), 0 0 20px rgba(167, 139, 250, 0.3);
        }
        .neon-glow-green {
           text-shadow: 0 0 10px rgba(0, 255, 157, 0.5), 0 0 20px rgba(0, 255, 157, 0.3);
        }
        .neon-glow-white {
           text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.02);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(255, 255, 255, 0.1);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(255, 255, 255, 0.2);
        }
      `}),gn==="ADMIN"&&h.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/5 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--neon-green)]/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsx("div",{className:"flex justify-between items-center mb-10 relative z-10",children:h.jsxs("div",{children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-5xl",children:""})," SESSION CONTROL"]}),h.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest mt-2 font-righteous",children:"MANAGE ACTIVE INSTANCES"})]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Si.map(E=>h.jsxs("div",{className:"bg-black/40 border-2 border-white/5 rounded-[2rem] p-6 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("div",{className:"w-12 h-12 bg-black rounded-xl border border-white/10 flex items-center justify-center text-2xl",children:E.id===(e==null?void 0:e.id)?"":""}),h.jsx("div",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border ${E.id===(e==null?void 0:e.id)?"bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] border-[var(--neon-cyan)]":"bg-slate-800 text-slate-400 border-white/10"}`,children:E.id===(e==null?void 0:e.id)?"CURRENT":"REMOTE"})]}),h.jsx("h3",{className:"text-xl font-black text-white uppercase truncate font-bungee mb-1",children:E.venueName||"Unknown Venue"}),h.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-6 font-righteous",children:["HOST: ",E.hostName,"  ID: ",E.id]}),h.jsx("button",{onClick:()=>{Fe(`Force close session "${E.venueName}"? This cannot be undone.`,async()=>{await TT(E.id)})},className:"w-full py-3 bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white border border-rose-500/30 rounded-xl font-black uppercase tracking-widest text-xs transition-all font-righteous",children:"FORCE CLOSE"})]},E.id)),Si.length===0&&h.jsx("div",{className:"col-span-full text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO ACTIVE SESSIONS FOUND"})})]})]})}),gn==="NETWORK"&&h.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/5 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--neon-purple)]/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-10 relative z-10",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-purple",children:[h.jsx("span",{className:"text-5xl",children:""})," NETWORK ACTIVITY"]}),h.jsx("p",{className:"text-slate-400 mt-2 font-mono",children:"Monitor all connected devices and manage sessions."})]}),h.jsxs("div",{className:"px-6 py-3 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-3",children:[h.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest",children:"Total Connections"}),h.jsx("span",{className:"text-2xl font-black text-white",children:((In=e.deviceConnections)==null?void 0:In.length)||0})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[(Pt=e.deviceConnections)==null?void 0:Pt.map(E=>{const Z=E.status==="connected",z=E.userId?i.find(ue=>ue.id===E.userId):null,J=E.isGuest||(z==null?void 0:z.isGuest);return h.jsxs("div",{className:`p-6 rounded-[2rem] border transition-all relative overflow-hidden group ${Z?"bg-[#151520] border-[var(--neon-purple)]/30 hover:border-[var(--neon-purple)]":"bg-[#05050A] border-white/5 opacity-60"}`,children:[h.jsx("div",{className:`absolute top-6 right-6 w-3 h-3 rounded-full ${Z?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-rose-500"}`}),h.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[h.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-3xl shadow-lg ${z?J?"bg-[var(--neon-orange)]/20 text-[var(--neon-orange)]":"bg-[var(--neon-blue)]/20 text-[var(--neon-blue)]":"bg-white/5 text-slate-500"}`,children:z?J?"":"":""}),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-xl font-bold text-white font-righteous tracking-wide flex items-center gap-3",children:[E.id,J&&h.jsx("span",{className:"px-2 py-0.5 rounded bg-rose-500 text-[8px] font-black text-white",children:"GUEST"})]}),h.jsxs("div",{className:"text-xs font-mono text-slate-500 mt-1 flex flex-col gap-1",children:[h.jsx("div",{className:"truncate max-w-[150px]",title:E.peerId,children:E.peerId}),E.userAgent&&h.jsx("div",{className:"text-[10px] text-[var(--neon-cyan)]/60 font-black uppercase flex items-center gap-1",children:E.userAgent.toLowerCase().includes("mobile")?" MOBILE":" DESKTOP"})]}),h.jsx("div",{className:`mt-2 text-xs font-bold uppercase tracking-widest px-2 py-0.5 rounded inline-block ${Z?"bg-[var(--neon-green)]/10 text-[var(--neon-green)]":"bg-rose-500/10 text-rose-500"}`,children:E.status})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"p-4 bg-black/40 rounded-xl border border-white/5",children:[h.jsx("div",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-widest mb-1",children:"Assigned Session"}),h.jsx("div",{className:"text-white font-medium truncate",children:z?z.name:h.jsx("span",{className:"text-slate-600 italic",children:"Unassigned"})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{const ue=prompt("Enter User Name to link (must exist in Directory):");if(ue){const qe=i.find(Mt=>Mt.name.toLowerCase()===ue.toLowerCase());qe?(E5(E.id,qe.id,qe.isGuest),ve()):alert("User not found!")}},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 text-sm font-bold text-white transition-all",children:z?"CHANGE":"LINK USER"}),h.jsx("button",{onClick:()=>{Fe("Forget this device?",async()=>{await T5(E.id),ve()})},className:"px-4 py-3 rounded-xl bg-rose-500/10 hover:bg-rose-500/20 border border-rose-500/20 text-rose-500 transition-all",children:"Forget"})]})]})]},E.id)}),(!e.deviceConnections||e.deviceConnections.length===0)&&h.jsx("div",{className:"col-span-full py-20 text-center text-slate-500 font-mono",children:"No devices detected yet. Scan the QR code to connect."})]})]})}),Yn.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:Yn.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>Mr(E=>({...E,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{Mr(E=>({...E,isOpen:!1})),await Yn.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]})},X5=({onJoin:r})=>{const[e,t]=ae.useState([]),[i,a]=ae.useState(!0);return ae.useEffect(()=>{const l=ST(u=>{t(u),a(!1)});return()=>l()},[]),i?h.jsx("div",{className:"text-center py-20 animate-pulse",children:h.jsx("div",{className:"text-[var(--neon-cyan)] text-xl font-black uppercase tracking-widest font-righteous",children:"SEARCHING FOR STAGES..."})}):e.length===0?h.jsxs("div",{className:"text-center py-20 px-6 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5 mx-auto max-w-2xl",children:[h.jsx("p",{className:"text-[var(--neon-pink)] text-2xl font-black uppercase tracking-widest font-bungee mb-4",children:"NO STAGES FOUND"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-wider text-sm",children:"There are no active sessions nearby."})]}):h.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-ping"}),h.jsx("h2",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] font-righteous text-lg",children:"LIVE STAGES"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(l=>h.jsxs("div",{className:"group relative bg-[#101015] border-2 border-white/5 hover:border-[var(--neon-cyan)] p-8 rounded-[2.5rem] transition-all hover:-translate-y-2 hover:shadow-[0_0_50px_rgba(0,229,255,0.15)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 via-transparent to-[var(--neon-purple)]/0 group-hover:from-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-purple)]/5 transition-all duration-500"}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("div",{className:"w-16 h-16 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-3xl shadow-xl group-hover:scale-110 transition-transform duration-500 group-hover:border-[var(--neon-cyan)]",children:""}),h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)]/10 text-[var(--neon-green)] border border-[var(--neon-green)]/20 rounded-lg text-[10px] font-black uppercase tracking-widest font-righteous",children:"ONLINE"})]}),h.jsx("h3",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors truncate",children:l.venueName||"OPEN MIC"}),h.jsxs("div",{className:"flex items-center gap-2 mb-8 text-slate-400 font-righteous uppercase tracking-wider text-xs",children:[h.jsx("span",{className:"text-[var(--neon-pink)]",children:"HOST:"})," ",l.hostName]}),h.jsx("button",{onClick:()=>r(l.id),className:"w-full py-4 bg-white text-black font-black uppercase tracking-[0.2em] rounded-xl hover:bg-[var(--neon-cyan)] transition-all font-righteous hover:scale-[1.02] active:scale-95 shadow-lg",children:"JOIN STAGE"})]})]},l.id))})]})},Q_=({url:r})=>r?h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-2 rounded-lg text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border border-[var(--neon-cyan)]/30 transition-all shadow-[0_0_10px_rgba(0,229,255,0.2)]",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,J5=()=>{const[r,e]=ae.useState(null),[t,i]=ae.useState(null),[a,l]=ae.useState(!0),[u,p]=ae.useState(""),[g,y]=ae.useState(""),[b,_]=ae.useState(""),[T,k]=ae.useState(""),[V,$]=ae.useState(""),[ee,se]=ae.useState(null),[he,me]=ae.useState(!1),[ye,Ie]=ae.useState(null),[Ee,A]=ae.useState(null),[C,R]=ae.useState("ROTATION"),[L,O]=ae.useState(!1),[j,I]=ae.useState(""),[nt,mt]=ae.useState(!1),[Q,le]=ae.useState(0),[we,Ve]=ae.useState(!1),[rt,M]=ae.useState("connecting"),X=wt.getRoomId(),ce=Lc()+(X?`?room=${X}`:""),[de,Ce]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),je=(ie,fe)=>{Ce({isOpen:!0,message:ie,onConfirm:fe})};ae.useEffect(()=>{(async()=>{const He=new URLSearchParams(window.location.search).get("userId");if(He){console.log(`[Participant] SINC Login detected for userId: ${He}`);const zt=await j5(He);zt.success&&zt.profile&&(i(zt.profile),l(!1),window.history.replaceState({},"",window.location.pathname+(X?`?room=${X}`:"")))}const yt=await Gn();if(yt){i(yt);const zt=await Qe();se(zt);const st=zt.participants.find(Ne=>Ne.id===yt.id);if(st)e(st);else{console.log(`[Participant] Auto-joining session ${X} for profile ${yt.id}`);try{const Ne=await Ks(yt.id);e(Ne)}catch(Ne){console.error("Auto-join failed:",Ne)}}}else{const zt=await Qe();se(zt)}})(),wt.onConnectionStatus=fe=>{M(fe)}},[X]);const De=async()=>{const ie=await Qe();se(ie);const fe=await Gn();if(i(fe),!fe)e(null);else{const He=ie.participants.find(yt=>yt.id===fe.id);He&&e(He)}};ae.useEffect(()=>(window.addEventListener("kstar_sync",De),window.addEventListener("storage",De),()=>{window.removeEventListener("kstar_sync",De),window.removeEventListener("storage",De)}),[]);const Ot=async ie=>{ie.preventDefault(),p("");try{if(a){const fe=await O5(g,T);if(fe.success&&fe.profile){const He=await Ks(fe.profile.id);e(He),i(fe.profile)}else p(fe.error||"Authorization failed.")}else{if(T!==V){p("PASSWORDS_DO_NOT_MATCH");return}const fe=await Jc({name:g,email:b||void 0,password:T||void 0},!0);if(fe.success&&fe.profile){const He=await Ks(fe.profile.id);e(He),i(fe.profile)}else p(fe.error||"Initialization failed.")}}catch(fe){p(fe.message||"An unexpected error occurred.")}},gt=async ie=>{r&&(await Xs(r.id,ie),await De())},ei=async ie=>{r&&(ye?(await Mc(ye.id,{songName:ie.songName,artist:ie.artist,youtubeUrl:ie.youtubeUrl,type:ie.type,message:ie.message}),Ie(null)):(await Bs({participantId:r.id,participantName:r.name,songName:ie.songName,artist:ie.artist,youtubeUrl:ie.youtubeUrl,type:ie.type,message:ie.message}),me(!1),r.status!==Lt.READY&&await Xs(r.id,Lt.READY)),A(null),await De())},Fn=()=>{me(!1),Ie(null),A(null)},$n=async()=>{p("");try{const ie=`Guest-${Math.floor(Math.random()*1e4)}`,fe=await Jc({name:ie},!0);if(fe.success&&fe.profile){const He=await Ks(fe.profile.id);e(He),i(fe.profile),A(null),me(!0),await Xs(fe.profile.id,Lt.READY)}else p(fe.error||"Guest initialization failed.")}catch(ie){p(ie.message||"An unexpected error occurred.")}};if(!r)return h.jsxs("div",{className:"max-w-2xl mx-auto p-8 flex flex-col items-center justify-center min-h-[90vh] text-center animate-in fade-in duration-1000 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-[#10002B] to-black -z-10"}),h.jsxs("div",{className:"w-48 h-48 flex items-center justify-center mb-12 relative group",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)] blur-[60px] opacity-40 group-hover:opacity-60 transition-opacity"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 relative z-10 bg-black shadow-2xl",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_40px_rgba(255,0,127,0.5)] w-full h-full",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"})})})]}),h.jsx("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none",children:"SINGMODE"}),h.jsx("p",{className:"text-[var(--neon-cyan)] font-righteous mb-16 uppercase tracking-[0.6em] text-lg font-black neon-glow-cyan",children:"SINGER LOGIN"}),h.jsxs("div",{className:"w-full max-w-lg mb-12 relative z-20",children:[h.jsx("button",{onClick:$n,className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-widest text-xs mt-4",children:"GUEST PASS"})]}),h.jsxs("div",{className:"relative w-full max-w-lg",children:[h.jsx("div",{className:"absolute inset-0 flex items-center mb-8",children:h.jsx("div",{className:"w-full border-t border-white/10"})}),h.jsx("div",{className:"relative flex justify-center mb-8",children:h.jsx("span",{className:"bg-black px-4 text-slate-500 font-righteous uppercase tracking-widest text-sm",children:"MEMBER LOGIN"})})]}),h.jsxs("form",{onSubmit:Ot,className:"w-full space-y-8 bg-[#050510] p-10 md:p-14 rounded-[4rem] border-4 border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)]"}),u&&h.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-500 text-base py-4 px-6 rounded-2xl font-black uppercase tracking-widest animate-pulse font-righteous",children:u}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"STAGE NAME"}),h.jsx("input",{type:"text",required:!0,value:g,onChange:ie=>y(ie.target.value),placeholder:"Stage Name",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-2xl uppercase tracking-wider placeholder:text-slate-600 font-righteous"})]}),!a&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"EMAIL (OPTIONAL)"}),h.jsx("input",{type:"email",value:b,onChange:ie=>_(ie.target.value),placeholder:"myname@emailserver.com",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all shadow-inner text-xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"PASSWORD"}),h.jsx("input",{type:"password",required:!a,value:T,onChange:ie=>k(ie.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),!a&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"CONFIRM PASSWORD"}),h.jsx("input",{type:"password",required:!0,value:V,onChange:ie=>$(ie.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsx("button",{type:"submit",className:"w-full py-6 mt-6 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-2xl font-black text-3xl shadow-[0_0_40px_rgba(255,0,127,0.3)] transition-all uppercase tracking-[0.2em] font-bungee hover:scale-[1.02] active:scale-95",children:a?"SIGN IN":"CREATE PROFILE"}),h.jsx("button",{type:"button",onClick:()=>{l(!a),p("")},className:"text-slate-600 hover:text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.3em] pt-6 block mx-auto transition-colors font-righteous border-b-2 border-transparent hover:border-[var(--neon-cyan)] pb-1",children:a?"CREATE ACCOUNT":"BACK TO START"})]})]});if(!ee)return null;const gn=ee.requests.filter(ie=>ie.participantId===r.id);return h.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-10 relative",children:[h.jsxs("header",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-2xl group",children:[h.jsx("div",{className:"absolute inset-0 bg-[#0a0a0a] rounded-[2.9rem]"}),h.jsx("div",{className:"absolute top-0 inset-x-0 h-32 bg-[var(--neon-purple)]/10 blur-[50px]"}),h.jsxs("div",{className:"relative p-8 flex flex-col items-center text-center",children:[h.jsx("div",{className:"absolute top-6 right-6 z-20"}),h.jsxs("div",{className:"w-24 h-24 p-1 rounded-full border-2 border-white/10 mb-6 relative",children:[h.jsx("div",{className:"absolute inset-0 rounded-full bg-[var(--neon-pink)]/20 blur-xl"}),h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full object-cover relative z-10"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 bg-black rounded-full flex items-center justify-center border-2 border-black z-20",children:h.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse shadow-[0_0_10px_currentColor] ${rt==="connected"?"bg-[var(--neon-green)] text-[var(--neon-green)]":rt==="connecting"?"bg-[var(--neon-yellow)] text-[var(--neon-yellow)]":"bg-rose-500 text-rose-500"}`})})]}),h.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight uppercase leading-none font-bungee mb-2",children:r.name}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("button",{onClick:()=>{je("Are you sure you want to sign out?",async()=>{await Kd(),window.location.reload()})},className:"flex items-center gap-2 px-4 py-2 bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl transition-all font-black uppercase text-[10px] tracking-widest font-righteous border border-rose-500/20 hover:border-transparent",children:[h.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"SIGN OUT"]})})]})]}),ee.currentRound&&ee.currentRound.length>0&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-top-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4 px-4",children:[h.jsx("div",{className:"w-2 h-2 bg-[var(--neon-green)] rounded-full animate-blink"}),h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-base font-righteous",children:"ON STAGE"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:ee.currentRound.map((ie,fe)=>h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${fe===0?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"relative",children:[fe===0&&h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-[var(--neon-green)] text-black text-[8px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] z-20",children:"LIVE"}),h.jsx("div",{className:`w-14 h-14 flex flex-col justify-center items-center border-2 rounded-xl transition-all shrink-0 ${fe===0?"border-[var(--neon-green)] bg-[var(--neon-green)]/10 text-[var(--neon-green)]":"border-white/10 text-slate-400"}`,children:h.jsx("span",{className:"text-xl font-bold font-mono tracking-tighter",children:ie.requestNumber})})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-xl sm:text-2xl font-black uppercase font-righteous tracking-tight leading-tight ${fe===0?"text-white":"text-slate-300"}`,children:ie.songName}),h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-sm sm:text-lg font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:ie.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg hidden sm:inline",children:"/"}),h.jsxs("span",{className:"text-sm sm:text-lg font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",ie.participantName]})]})]})]}),h.jsx("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:fe===0&&h.jsx(Q_,{url:ie.youtubeUrl})})]},ie.id))})]}),h.jsx("div",{className:"grid grid-cols-5 gap-2 bg-[#0a0a0a] p-2 rounded-2xl border border-white/5 shadow-inner",children:["ROTATION","REQUESTS","FAVORITES","HISTORY","VOCALS"].map(ie=>h.jsxs("button",{onClick:()=>R(ie),className:`py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all font-righteous flex flex-col items-center justify-center gap-1.5 ${C===ie?"bg-[#151520] text-white shadow-[0_0_20px_rgba(255,255,255,0.05)] border border-white/10":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:[h.jsx("span",{className:`text-2xl mb-0.5 ${C===ie?"text-[var(--neon-pink)]":"grayscale opacity-50"}`,children:ie==="ROTATION"?"":ie==="REQUESTS"?"":ie==="FAVORITES"?"":ie==="HISTORY"?"":""}),ie==="ROTATION"?"STAGE":ie==="REQUESTS"?"MY SONGS":ie==="FAVORITES"?"SONGBOOK":ie==="HISTORY"?"LOG":"MIC SETUP"]},ie))}),h.jsx("button",{onClick:()=>{A(null),me(!0)},className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),h.jsxs("div",{className:"flex gap-4 pt-2",children:[h.jsx("button",{onClick:()=>gt(Lt.READY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Lt.READY?"bg-[#051005] border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.2)] text-[var(--neon-green)]":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"READY"})}),h.jsx("button",{onClick:()=>gt(Lt.STANDBY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Lt.STANDBY?"bg-[#150505] border-rose-500 shadow-[0_0_30px_rgba(244,63,94,0.2)] text-rose-500":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"NOT YET"})})]}),(he||ye)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-50 overflow-y-auto backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsx("div",{className:"w-full max-w-lg space-y-6",children:h.jsx(NT,{title:ye?"Remix Request":"New Transmission",submitLabel:ye?"Save Remix":"Transmit",initialSongName:(ye==null?void 0:ye.songName)||(Ee==null?void 0:Ee.songName)||"",initialArtist:(ye==null?void 0:ye.artist)||(Ee==null?void 0:Ee.artist)||"",initialYoutubeUrl:(ye==null?void 0:ye.youtubeUrl)||(Ee==null?void 0:Ee.youtubeUrl)||"",initialType:(ye==null?void 0:ye.type)||(Ee==null?void 0:Ee.type)||ut.SINGING,onSubmit:ei,onCancel:Fn,participants:ee.participants,currentUserId:r.id},(ye==null?void 0:ye.id)||"new-request")})}),h.jsxs("main",{className:"min-h-[300px] pb-32",children:[C==="ROTATION"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-sm px-4 font-righteous opacity-80",children:"COMING UP"}),h.jsx("div",{className:"space-y-4",children:(()=>{ee.requests.filter(Ne=>Ne.status===Le.PENDING&&!Ne.isInRound);const ie=ee.requests.filter(Ne=>Ne.status===Le.APPROVED&&Ne.type===ut.SINGING&&!Ne.isInRound),fe=ee.participants.filter(Ne=>ie.some(Jt=>Jt.participantId===Ne.id)).sort((Ne,Jt)=>(Jt.joinedAt||0)-(Ne.joinedAt||0)),He={};ie.forEach(Ne=>{He[Ne.participantId]||(He[Ne.participantId]=[]),He[Ne.participantId].push(Ne)}),Object.keys(He).forEach(Ne=>{He[Ne].sort((Jt,_i)=>Jt.createdAt-_i.createdAt)});const yt=[];let zt=0,st=!0;for(;st;)st=!1,fe.forEach(Ne=>{He[Ne.id]&&He[Ne.id][zt]&&(yt.push(He[Ne.id][zt]),st=!0)}),zt++;return yt.length===0?h.jsx("div",{className:"text-center py-16 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"QUEUE EMPTY"})}):yt.map((Ne,Jt)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-6 rounded-[2rem] flex justify-between items-center group hover:border-[var(--neon-blue)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-blue)] transition-colors",children:Ne.songName}),h.jsxs("div",{className:"text-base text-[var(--neon-cyan)] uppercase tracking-[0.2em] flex items-center gap-2 font-righteous",children:[Ne.artist," ",h.jsx("span",{className:"text-white/20",children:"|"})," ",h.jsx("span",{className:"text-slate-400",children:Ne.participantName})]})]}),h.jsx("div",{className:"shrink-0 w-12 h-12 rounded-full border border-[var(--neon-blue)]/50 bg-[var(--neon-blue)]/10 flex items-center justify-center text-[var(--neon-blue)] text-xl font-black font-bungee shadow-[0_0_15px_rgba(5,217,232,0.2)]",children:Jt+1})]},Ne.id))})()})]}),C==="REQUESTS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[gn.map(ie=>h.jsx("div",{className:"relative group",children:h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 p-6 rounded-[2rem] hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsxs("div",{className:"font-bold text-white tracking-tight uppercase truncate font-bungee text-3xl group-hover:text-[var(--neon-pink)] transition-colors",children:[h.jsxs("span",{className:"text-slate-500 mr-2 text-[11px] font-mono tracking-widest",children:["#",ie.requestNumber]}),ie.songName]}),h.jsx(Q_,{url:ie.youtubeUrl})]}),h.jsx("div",{className:"text-base text-slate-400 font-bold uppercase tracking-[0.2em] truncate font-righteous",children:ie.artist})]}),h.jsx("div",{className:`shrink-0 px-3 py-1 rounded-lg border text-xs font-black uppercase tracking-widest ${ie.status===Le.APPROVED?ie.isInRound?"bg-[var(--neon-green)] border-[var(--neon-green)] text-black animate-pulse shadow-[0_0_15px_var(--neon-green)]":"bg-[var(--neon-cyan)]/10 border-[var(--neon-cyan)] text-[var(--neon-cyan)]":"border-white/10 text-slate-600"}`,children:ie.status===Le.APPROVED?ie.isInRound?"LIVE":"QUEUED":"PENDING"})]}),(ie.status===Le.PENDING||ie.status===Le.APPROVED)&&h.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/5",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:async()=>{await ag(r.id,ie.id,"up"),await De()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Up",children:""}),h.jsx("button",{onClick:async()=>{await ag(r.id,ie.id,"down"),await De()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Down",children:""})]}),h.jsx("button",{onClick:()=>Ie(ie),className:"flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white",children:"EDIT"}),h.jsx("button",{onClick:async()=>{await Gs(ie.id),await De()},className:"flex-1 py-3 bg-rose-500/10 hover:bg-rose-500/20 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-rose-500",children:"CANCEL"})]})]})},ie.id)),gn.length===0&&h.jsx("div",{className:"text-center py-20 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-base font-black uppercase tracking-[0.5em] font-righteous text-slate-700",children:"NO REQUESTS"})})]}),C==="FAVORITES"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"SEARCH SONGBOOK...",value:j,onChange:ie=>I(ie.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-[2rem] py-5 px-6 pl-14 text-xl font-bold uppercase tracking-wider text-white focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous placeholder:text-slate-600 shadow-inner"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-2xl text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors",children:""})]}),h.jsx("div",{className:"grid gap-3",children:(()=>{const ie=[...t.favorites.map(fe=>({...fe,isFavorite:!0})),...((ee==null?void 0:ee.verifiedSongbook)||[]).filter(fe=>!t.favorites.some(He=>He.songName===fe.songName&&He.artist===fe.artist)).map(fe=>({...fe,isFavorite:!1}))].filter(fe=>!j||fe.songName.toLowerCase().includes(j.toLowerCase())||fe.artist.toLowerCase().includes(j.toLowerCase()));return ie.length===0?h.jsx("div",{className:"text-center py-20 opacity-30 font-righteous text-sm uppercase tracking-widest text-slate-500",children:"NO_MATCHES"}):ie.map(fe=>h.jsxs("div",{className:"bg-[#101015] p-5 rounded-[2rem] flex justify-between items-center group border-2 border-white/5 hover:border-[var(--neon-yellow)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight group-hover:text-[var(--neon-yellow)] transition-colors",children:fe.songName}),fe.isFavorite&&h.jsx("span",{className:"text-lg text-[var(--neon-yellow)] animate-pulse",children:""})]}),h.jsx("div",{className:"text-sm text-slate-400 font-bold uppercase tracking-[0.2em] font-righteous",children:fe.artist})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{A({...fe}),me(!0)},className:"bg-[var(--neon-pink)] text-black px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous shadow-[0_0_15px_rgba(255,0,127,0.3)] hover:scale-105 active:scale-95",children:"ADD"}),h.jsx("button",{onClick:async()=>{await xT(fe),await De()},className:`px-2 transition-colors ${fe.isFavorite?"text-rose-500":"text-slate-700 hover:text-[var(--neon-yellow)]"}`,children:fe.isFavorite?"":""})]})]},fe.id))})()})]}),C==="HISTORY"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[t.personalHistory.map((ie,fe)=>h.jsxs("div",{className:"bg-[#101015] p-6 rounded-[2rem] flex justify-between items-center border-2 border-white/5 hover:border-[var(--neon-purple)] group transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-purple)] transition-colors",children:ie.songName}),h.jsx("div",{className:"text-base text-[var(--neon-cyan)]/70 font-bold uppercase tracking-[0.2em] font-righteous",children:ie.artist})]}),h.jsx("button",{onClick:()=>{A({...ie,type:ut.SINGING}),me(!0)},className:"text-slate-600 hover:text-white border border-white/5 hover:border-white px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest transition-all font-righteous",children:"AGAIN"})]},fe)),t.personalHistory.length===0&&h.jsx("div",{className:"text-center py-20 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"NO HISTORY FOUND"})})]}),C==="VOCALS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-100 transition-opacity",children:h.jsx("span",{className:"text-5xl",children:""})}),h.jsx("h3",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-[0.3em] font-righteous mb-6",children:"VOCAL SETUP"}),h.jsxs("div",{className:"flex flex-col items-center gap-6",children:[h.jsxs("div",{className:"w-full bg-black/40 border border-white/10 rounded-2xl p-6 flex flex-col items-center",children:[h.jsx("span",{className:"text-sm font-black text-slate-500 uppercase tracking-widest font-righteous mb-2",children:"SINGER RANGE"}),h.jsx("span",{className:"text-4xl font-bold text-white uppercase font-bungee tracking-tight neon-text-glow-cyan",children:(t==null?void 0:t.vocalRange)||"UNKNOWN"})]}),nt?h.jsxs("div",{className:"w-full space-y-3 py-2",children:[h.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-[var(--neon-cyan)] animate-pulse shadow-[0_0_10px_var(--neon-cyan)]",style:{width:`${Q}%`}})}),h.jsx("div",{className:"text-xs text-[var(--neon-cyan)] font-black animate-pulse font-righteous text-center tracking-[0.2em]",children:"CALIBRATING VOICE..."})]}):h.jsx("button",{onClick:async()=>{mt(!0);let ie=0;const fe=setInterval(()=>{ie+=5,le(ie),ie>=100&&(clearInterval(fe),setTimeout(async()=>{const He=["Soprano","Alto","Tenor","Baritone","Bass"],yt=He[Math.floor(Math.random()*He.length)];t&&await P5(t.id,yt),mt(!1),le(0),await De()},500))},100)},className:"px-8 py-4 bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black rounded-xl font-black uppercase tracking-[0.2em] transition-all font-righteous border border-[var(--neon-cyan)]/30 hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"START_CALIBRATION_SEQUENCE"})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 opacity-50 relative overflow-hidden border-dashed",children:[h.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.3em] font-righteous mb-2",children:"MICROPHONE_TOOLS"}),h.jsx("p",{className:"text-slate-600 font-mono text-xs uppercase tracking-wider",children:"HARDWARE_LINK_OFFLINE // COMING_SOON"})]})]})]}),h.jsxs("footer",{className:"fixed bottom-6 left-6 right-6 z-40 flex gap-4",children:[h.jsxs("button",{onClick:()=>Ve(!0),className:"flex-1 bg-[#101015] border-2 border-[var(--neon-green)]/30 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:bg-[var(--neon-green)] hover:text-black hover:border-[var(--neon-green)] transition-all group",children:[h.jsx("span",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous group-hover:text-black text-[var(--neon-green)]",children:"SCAN_NODES"}),h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})]}),h.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#101015] border-2 border-white/10 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:border-[var(--neon-pink)] transition-all group",children:[h.jsx("span",{className:"text-sm text-[var(--neon-pink)] font-black uppercase tracking-[0.3em] font-righteous",children:"SYSTEM_LINK"}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})})]})]}),we&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-4 md:p-10 overflow-hidden max-h-[90vh] overflow-y-auto",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-green)] via-[var(--neon-cyan)] to-[var(--neon-blue)] animate-gradient-x"}),h.jsx("button",{onClick:()=>Ve(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors z-50",children:""}),h.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white uppercase tracking-tight mb-8 font-bungee neon-glow-green mt-8",children:"ACTIVE_SIGNALS"}),h.jsx(X5,{onJoin:ie=>{window.location.href=`/?room=${ie}`}})]})}),L&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-sm text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("button",{onClick:()=>O(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors",children:""}),h.jsx("div",{className:"bg-white p-4 rounded-[2rem] inline-block mb-8 shadow-[0_0_40px_rgba(255,255,255,0.1)]",children:h.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(ce)}&bgcolor=ffffff`,alt:"Room QR",className:"w-48 h-48"})}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase tracking-tight mb-2 font-bungee neon-glow-white",children:"SYNC_NODE"}),h.jsx("p",{className:"text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.4em] font-righteous opacity-80",children:"SCAN TO INITIALIZE CONNECTION"})]})}),de.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:de.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>Ce(ie=>({...ie,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{Ce(ie=>({...ie,isOpen:!1})),await de.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]})},Qo=({title:r,icon:e,description:t,items:i})=>h.jsxs("div",{className:"bg-[#101015] border border-white/5 p-10 rounded-[3.5rem] hover:border-[var(--neon-pink)] transition-all backdrop-blur-xl group relative overflow-hidden shadow-2xl",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[var(--neon-pink)]/5 blur-3xl rounded-full -mr-16 -mt-16 group-hover:bg-[var(--neon-pink)]/10 transition-colors"}),h.jsx("div",{className:"w-20 h-20 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-4xl mb-8 group-hover:scale-110 group-hover:border-[var(--neon-pink)] group-hover:text-white transition-all shadow-2xl relative z-10",children:e}),h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase mb-4 tracking-tight group-hover:text-[var(--neon-pink)] transition-colors relative z-10 leading-none",children:r}),h.jsx("p",{className:"text-[var(--neon-cyan)]/70 mb-8 font-bold uppercase text-[10px] tracking-[0.2em] font-righteous leading-relaxed relative z-10 transition-opacity",children:t}),h.jsx("ul",{className:"space-y-4 relative z-10",children:i.map((a,l)=>h.jsxs("li",{className:"flex items-start gap-3 text-[11px] text-slate-500 font-bold uppercase tracking-widest font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:[h.jsx("span",{className:"text-[var(--neon-cyan)] font-bold",children:""}),a]},l))})]}),W5=({onBack:r,onAdminLogin:e})=>{const t=()=>{prompt("Enter Admin Password:")==="Organized"?e():alert("Access Denied: Incorrect Password")};return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-slate-200 p-6 md:p-16 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsx("div",{className:"absolute -top-[500px] -right-[500px] w-[1000px] h-[1000px] bg-[var(--neon-pink)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute -bottom-[500px] -left-[500px] w-[1000px] h-[1000px] bg-[var(--neon-cyan)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-5 pointer-events-none"}),h.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-24 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsx("div",{onClick:r,className:"cursor-pointer hover:scale-105 transition-transform",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-10 h-10 rounded-full border border-[var(--neon-pink)]"}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest",children:"SINGMODE"})]})}),h.jsx("button",{onClick:r,className:"px-8 py-4 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-slate-400 hover:text-white rounded-2xl font-bold text-[9px] uppercase tracking-widest font-righteous transition-all",children:"RETURN TO HUB"})]}),h.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-32 animate-in fade-in zoom-in duration-700 delay-100",children:[h.jsxs("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-8 tracking-tight uppercase leading-none neon-text-glow-purple",children:["The ultimate ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:"karaoke"})," os"]}),h.jsx("p",{className:"text-[10px] md:text-xs text-[var(--neon-cyan)]/80 font-bold uppercase tracking-[0.4em] font-righteous leading-relaxed max-w-2xl mx-auto border-y border-[var(--neon-cyan)]/20 py-4",children:"SingMode transforms any arena into a high-fidelity visual theater. Connect instantly, dominate the queue, and emit your signal."})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-32 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200",children:[h.jsx(Qo,{title:"DJ Console",icon:"",description:"The command center for your sessions. Maintain signal flow.",items:["Real-time Queue Logic","Drag & Drop Sequencer","Instant Signal Auth","Master Output Control"]}),h.jsx(Qo,{title:"Singer Web",icon:"",description:"A personal terminal for every guest. Eliminate analog friction.",items:["Identity Transmission","Smart Vector Search","High-Speed Requests","Live Sync Lyrics"]}),h.jsx(Qo,{title:"Theater Box",icon:"",description:"A stunning visual matrix for the main screen. Pure aesthetics.",items:["Ultra-HD Playback","Generative Backgrounds","Active HUD Overlays","QR Signal Entrance"]}),h.jsx(Qo,{title:"Hybrid AI",icon:"",description:"Gemini integration enhances the arena with predictive logic.",items:["Vibe-Matched Vectors","Dynamic Visual Synthesis","Automated Interstitials","Identity Verification"]}),h.jsx(Qo,{title:"Sync Matrix",icon:"",description:"Real-time P2P technology keeps the cluster in perfect sync.",items:["Zero-Latency State","Decentralized Design","Instant Node Creation","Omni-Device Support"]}),h.jsx(Qo,{title:"Prime Suite",icon:"",description:"Unlock premium protocols for venues and power units.",items:["Broadcast Protocols","Branding Overlays","Logic Routing","Priority Channel"]}),h.jsxs("div",{className:"md:col-span-2 lg:col-span-1 border-2 border-dashed border-white/10 rounded-[3.5rem] flex flex-col items-center justify-center p-10 group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("p",{className:"text-[10px] text-slate-700 font-black uppercase tracking-[0.4em] mb-6 font-righteous group-hover:text-[var(--neon-cyan)]",children:"ADMIN LOGIN"}),h.jsx("button",{onClick:t,className:"p-6 bg-black border border-white/5 rounded-2xl text-[10px] font-black uppercase tracking-widest font-righteous text-white/40 hover:text-white hover:border-white transition-all shadow-xl",children:" ENTER ADMIN MODE"})]})]}),h.jsx("div",{className:"text-center animate-in fade-in duration-700 delay-500 pb-32",children:h.jsx("button",{onClick:r,className:"px-16 py-8 bg-[var(--neon-cyan)] hover:bg-white text-black rounded-[3rem] font-bold text-2xl uppercase tracking-widest font-righteous shadow-[0_0_50px_rgba(34,211,238,0.4)] hover:scale-105 transition-all",children:"START SINGING"})})]})]})},Z5=({onBack:r})=>{const[e,t]=ae.useState(null),[i,a]=ae.useState(""),[l,u]=ae.useState(!1),[p,g]=ae.useState({primary:"#ff007f",secondary:"#05d9e8",accent:"#feff3f"}),[y,b]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),_=(k,V)=>{b({isOpen:!0,message:k,onConfirm:V})};ae.useEffect(()=>{(async()=>{const V=await Qe();t(V),V.brandIdentity&&(a(V.brandIdentity.venueName),u(V.brandIdentity.isBusinessAccount)),V.customTheme&&g({primary:V.customTheme.primaryNeon,secondary:V.customTheme.secondaryNeon,accent:V.customTheme.accentNeon})})()},[]);const T=async()=>{var V;if(!e)return;const k={...e};k.brandIdentity={venueName:i,isBusinessAccount:l,logoUrl:(V=k.brandIdentity)==null?void 0:V.logoUrl},k.customTheme={primaryNeon:p.primary,secondaryNeon:p.secondary,accentNeon:p.accent},await pt(k),document.documentElement.style.setProperty("--neon-pink",p.primary),document.documentElement.style.setProperty("--neon-cyan",p.secondary),document.documentElement.style.setProperty("--neon-yellow",p.accent),alert("Configurations locked in.")};return e?h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white p-6 md:p-16 relative overflow-hidden font-righteous",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[h.jsxs("header",{className:"flex justify-between items-center mb-20 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsxs("div",{onClick:r,className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-12 h-12 rounded-full border-2 border-[var(--neon-pink)] group-hover:scale-110 transition-all"}),h.jsx("h1",{className:"text-3xl font-bungee tracking-tight",children:"ADMIN SETTINGS"})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:r,className:"px-6 py-3 bg-black border border-white/10 hover:border-white text-slate-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all",children:"CLOSE MENU"}),h.jsxs("button",{onClick:()=>{_("Are you sure you want to sign out?",async()=>{await Kd(),window.location.reload()})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/30 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all flex items-center gap-2",children:[h.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"LOG OUT"]})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-cyan)] mb-2 uppercase",children:"Venue Settings"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"VENUE DISPLAY"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] text-slate-500 uppercase tracking-widest mb-2 ml-4",children:"Venue Display Name"}),h.jsx("input",{type:"text",value:i,onChange:k=>a(k.target.value),placeholder:"Enter Venue Name",className:"w-full bg-black/60 border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold outline-none focus:border-[var(--neon-cyan)] transition-all uppercase"})]}),h.jsxs("div",{className:"flex items-center justify-between p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1",children:"Business Account"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold",children:"Unlocks Revenue Stream Matrix"})]}),h.jsx("button",{onClick:()=>u(!l),className:`w-14 h-8 rounded-full transition-all relative ${l?"bg-[var(--neon-cyan)]":"bg-slate-800"}`,children:h.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white transition-all ${l?"right-1":"left-1"}`})})]})]})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-pink)] mb-2 uppercase",children:"Theme Matrix"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"THEME COLORS"})]}),h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Primary Neon"}),h.jsx("input",{type:"color",value:p.primary,onChange:k=>g({...p,primary:k.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Secondary Neon"}),h.jsx("input",{type:"color",value:p.secondary,onChange:k=>g({...p,secondary:k.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Accent Neon"}),h.jsx("input",{type:"color",value:p.accent,onChange:k=>g({...p,accent:k.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]})]})})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl col-span-full",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-rose-500 mb-2 uppercase",children:"System Maintenance"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"DATABASE PURGE OPERATIONS"})]}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[h.jsxs("div",{className:"flex-1 p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1 text-white",children:"Account Optimization"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold mb-4",children:"Deletes all guests and duplicate entries"}),h.jsx("button",{onClick:()=>{_("DANGER: This will permanently delete all guest accounts and duplicate stage names. Proceed?",async()=>{const k=await bT();k.success?alert(`Cleanup complete. Deleted ${k.deletedCount} items.`):alert(`Cleanup failed: ${k.error}`)})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"PURGE GUESTS & DUPLICATES"})]}),h.jsxs("div",{className:"flex-1 p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1 text-white",children:"Signal Maintenance"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold mb-4",children:"Cleans up dead or abandoned stage signals"}),h.jsx("button",{onClick:()=>{_("This will remove all inactive or stale stage sessions from the public list. Proceed?",async()=>{const k=await $5();k.success?alert(`Signal cleanup complete. Removed ${k.deletedCount} stale sessions.`):alert(`Cleanup failed: ${k.error}`)})},className:"px-6 py-3 bg-[var(--neon-purple)]/10 border border-[var(--neon-purple)] hover:bg-[var(--neon-purple)] text-[var(--neon-purple)] hover:text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"PURGE STALE SIGNALS"})]})]})]})]}),h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsx("button",{onClick:T,className:"px-16 py-6 bg-white text-black rounded-[2rem] font-bold text-xl uppercase tracking-widest font-bungee hover:bg-[var(--neon-cyan)] transition-all shadow-2xl hover:scale-105 active:scale-95",children:"SAVE CHANGES"})})]}),y.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:y.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>b(k=>({...k,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{b(k=>({...k,isOpen:!1})),await y.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]}):null},eD=()=>{const[r,e]=ae.useState("SELECT"),[t,i]=ae.useState(!0),[a,l]=ae.useState(null),[u,p]=ae.useState(!1),[g,y]=ae.useState(!1),[b,_]=ae.useState("");ae.useEffect(()=>{(async()=>{var Ee;const he=new URLSearchParams(window.location.search),me=(Ee=he.get("view"))==null?void 0:Ee.toUpperCase(),ye=he.get("room");ye&&p(!0);try{me==="DJ"?(e("DJ"),await Em("DJ",ye||void 0)):me==="PARTICIPANT"||ye?(e("PARTICIPANT"),await Em("PARTICIPANT",ye||void 0)):e("SELECT")}catch(A){console.error("[App] Init Error:",A),l(A.message),e("SELECT")}const Ie=await Qe();Ie.customTheme&&(document.documentElement.style.setProperty("--neon-pink",Ie.customTheme.primaryNeon),document.documentElement.style.setProperty("--neon-cyan",Ie.customTheme.secondaryNeon),document.documentElement.style.setProperty("--neon-yellow",Ie.customTheme.accentNeon)),await q5(),i(!1)})()},[]);const T=async se=>{i(!0),l(null);try{e(se),(se==="DJ"||se==="PARTICIPANT")&&await Em(se)}catch(he){l(he.message),e("SELECT")}finally{i(!1)}},k=()=>{b.trim()&&(CT(b.trim()),y(!1),_(""))},V=Lc(),$=wt.getRoomId(),ee=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(V+($?`?room=${$}`:""))}&bgcolor=ffffff`;if(t)return h.jsxs("div",{className:"min-h-screen bg-[#050510] flex flex-col items-center justify-center space-y-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black"}),h.jsxs("div",{className:"w-24 h-24 relative",children:[h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-pink)]/30 rounded-full animate-ping"}),h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-cyan)]/30 rounded-full animate-ping delay-75"}),h.jsx("div",{className:"relative z-10 w-full h-full border-4 border-t-[var(--neon-pink)] border-r-[var(--neon-purple)] border-b-[var(--neon-cyan)] border-l-[var(--neon-yellow)] rounded-full animate-spin"})]}),h.jsx("h2",{className:"text-2xl font-black font-bungee text-white uppercase tracking-widest animate-pulse z-10",children:"INITIALIZING"})]});if(r==="FEATURES")return h.jsx(W5,{onBack:()=>e("SELECT"),onAdminLogin:()=>e("ADMIN")});if(r==="ADMIN")return h.jsx(Z5,{onBack:()=>e("SELECT")});if(r==="SELECT"){const se=AT(),he=V.includes("localhost")||V.includes("127.0.0.1");return h.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#050510] relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black -z-10"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-10"}),h.jsxs("div",{className:"max-w-7xl w-full z-10",children:[h.jsxs("div",{className:"text-center mb-20 animate-in fade-in slide-in-from-top-4 duration-1000",children:[h.jsxs("div",{className:"flex justify-center mb-10 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)]/20 blur-[100px] rounded-full"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 bg-black shadow-2xl relative z-10",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_50px_rgba(255,0,127,0.5)] w-48 h-48",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover"})})})]}),h.jsx("h1",{className:"text-6xl md:text-9xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none drop-shadow-2xl",children:"SINGMODE"}),h.jsx("p",{className:"text-[var(--neon-yellow)] text-xl md:text-2xl font-bold tracking-widest uppercase neon-glow-yellow font-righteous",children:"KARAOKE_LOUNGE_SYSTEM"})]}),a&&h.jsxs("div",{className:"mb-12 p-10 bg-[#150005] border-4 border-rose-500 rounded-[3rem] text-center animate-in zoom-in duration-500 max-w-3xl mx-auto shadow-[0_0_60px_rgba(244,63,94,0.4)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-rose-500 animate-pulse"}),h.jsx("div",{className:"text-6xl mb-6",children:""}),h.jsx("h3",{className:"text-rose-500 font-bold uppercase tracking-widest text-3xl mb-4 font-bungee",children:"SYSTEM_CONFLICT"}),h.jsx("p",{className:"text-white text-xl font-bold leading-relaxed font-righteous",children:a}),h.jsx("p",{className:"text-rose-500/50 text-xs mt-8 uppercase font-bold tracking-widest font-righteous",children:"SINGLE_DJ_PROTOCOL_ACTIVE"})]}),h.jsxs("div",{className:`grid gap-8 ${u?"grid-cols-1 max-w-2xl mx-auto":"md:grid-cols-2"}`,children:[!u&&h.jsxs("button",{onClick:()=>T("DJ"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-pink)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(255,0,127,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-pink)]/0 to-[var(--neon-pink)]/5 group-hover:to-[var(--neon-pink)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-pink)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-pink)] transition-colors",children:"DJ_CONSOLE"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-cyan)] opacity-90 leading-relaxed",children:"COORDINATE ROTATION. APPROVE REQUESTS. COMMAND ATMOSPHERE."})]})]}),h.jsxs("button",{onClick:()=>T("PARTICIPANT"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-cyan)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(0,229,255,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 to-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-cyan)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-cyan)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGER_UI"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-yellow)] opacity-90 leading-relaxed",children:"REQUEST SONGS. FAVORITE VIBES. ACCESS SONGBOOK."})]})]})]}),h.jsxs("div",{className:"mt-16 p-10 bg-[#080808] border-2 border-white/5 rounded-[3rem] flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-green)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),h.jsx("div",{className:"bg-white p-4 rounded-3xl shrink-0 shadow-[0_0_40px_rgba(0,255,157,0.2)] border-4 border-white/10 group-hover:scale-105 transition-transform",children:h.jsx("img",{src:ee,alt:"Join QR Code",width:"140",height:"140",className:"block"})}),h.jsxs("div",{className:"text-center md:text-left flex-1 relative z-10",children:[h.jsx("strong",{className:"text-[var(--neon-green)] block mb-3 uppercase tracking-[0.3em] text-xs font-black font-righteous",children:"SCAN TO JOIN"}),h.jsx("div",{className:"text-white text-xl font-mono break-all mb-4 bg-black/50 px-4 py-2 rounded-lg inline-block border border-white/5",children:V}),he&&h.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl",children:[h.jsx("p",{className:"text-amber-500 text-[10px] font-black uppercase tracking-widest mb-2 font-righteous",children:" LOCALHOST DETECTED"}),h.jsx("button",{onClick:()=>{y(!0),_(se||"")},className:"text-[10px] font-black text-white hover:text-[var(--neon-cyan)] uppercase tracking-[0.2em] underline decoration-white/30 hover:decoration-[var(--neon-cyan)] transition-all font-righteous",children:"CONFIGURE NETWORK IP"})]})]})]})]}),g&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-6 z-50 backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-lg bg-[#0a0a0a] border-2 border-white/10 rounded-[3rem] p-10 space-y-8 shadow-[0_0_60px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] to-[var(--neon-blue)]"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight",children:"Network Config"}),h.jsx("p",{className:"text-slate-500 text-[10px] uppercase tracking-widest font-righteous",children:"ESTABLISH REMOTE CONNECTION PROTOCOLS"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-[11px] font-bold text-[var(--neon-cyan)] uppercase tracking-[0.2em] ml-4 font-righteous",children:"Network IP Address"}),h.jsx("input",{type:"text",value:b,onChange:me=>_(me.target.value),placeholder:"e.g. 192.168.0.x OR https://....ngrok.io",className:"w-full bg-[#151520] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-sm"}),h.jsxs("p",{className:"text-slate-500 text-[9px] uppercase tracking-widest font-righteous ml-4 opacity-60",children:[h.jsx("span",{className:"text-[var(--neon-yellow)]",children:"PRO TIP:"})," Use ",h.jsx("span",{className:"text-white",children:"ngrok"})," for secure external tunneling."]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-4 bg-black border border-white/10 hover:bg-white/5 text-slate-400 hover:text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all font-righteous",children:"Cancel"}),h.jsx("button",{onClick:k,className:"flex-1 py-4 bg-[var(--neon-cyan)] text-black rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all font-righteous hover:scale-105",children:"Save Configuration"})]})]})})]})}return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white selection:bg-[var(--neon-pink)] selection:text-white",children:[h.jsx("nav",{className:"fixed top-0 inset-x-0 z-[100] backdrop-blur-xl bg-black/80 border-b border-white/5 transition-all duration-300",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>e("SELECT"),className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[var(--neon-pink)] p-0.5 group-hover:shadow-[0_0_20px_rgba(255,0,127,0.4)] transition-all",children:h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full"})}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGMODE"})]}),h.jsx("div",{className:"flex items-center gap-6",children:h.jsxs("button",{onClick:()=>{e("SELECT"),l(null)},className:"text-[9px] font-bold uppercase tracking-widest px-5 py-2.5 rounded-xl transition-all font-righteous bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white border border-white/5 hover:border-white/20",children:["EXIT ",r]})})]})}),h.jsx("main",{className:"pb-20",children:r==="DJ"?h.jsx(K5,{onAdminAccess:()=>e("ADMIN")}):h.jsx(J5,{})})]})},RT=document.getElementById("root");if(!RT)throw new Error("Could not find root element to mount to");const tD=b2.createRoot(RT);tD.render(h.jsx(h2.StrictMode,{children:h.jsx(eD,{})}));
