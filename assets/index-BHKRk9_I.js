var xS=r=>{throw TypeError(r)};var hc=(r,e,t)=>e.has(r)?xS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);function _S(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const c=Object.getOwnPropertyDescriptor(i,o);c&&Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function Fm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vp={exports:{}},dc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function wS(){if(mb)return dc;mb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:u,ref:o!==void 0?o:null,props:c}}return dc.Fragment=e,dc.jsx=t,dc.jsxs=t,dc}var gb;function ES(){return gb||(gb=1,Vp.exports=wS()),Vp.exports}var h=ES(),Up={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function TS(){if(yb)return Oe;yb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function L(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,ie={};function ge(P,$,ue){this.props=P,this.context=$,this.refs=ie,this.updater=ue||Q}ge.prototype.isReactComponent={},ge.prototype.setState=function(P,$){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,$,"setState")},ge.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Ee(){}Ee.prototype=ge.prototype;function xe(P,$,ue){this.props=P,this.context=$,this.refs=ie,this.updater=ue||Q}var _e=xe.prototype=new Ee;_e.constructor=xe,ne(_e,ge.prototype),_e.isPureReactComponent=!0;var Ue=Array.isArray;function Ae(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(P,$,ue){var he=ue.ref;return{$$typeof:r,type:P,key:$,ref:he!==void 0?he:null,props:ue}}function M(P,$){return R(P.type,$,P.props)}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function j(P){var $={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return $[ue]})}var k=/\/+/g;function it(P,$){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):$.toString(36)}function vt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Ae,Ae):(P.status="pending",P.then(function($){P.status==="pending"&&(P.status="fulfilled",P.value=$)},function($){P.status==="pending"&&(P.status="rejected",P.reason=$)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Y(P,$,ue,he,Ce){var je=typeof P;(je==="undefined"||je==="boolean")&&(P=null);var qe=!1;if(P===null)qe=!0;else switch(je){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(P.$$typeof){case r:case e:qe=!0;break;case x:return qe=P._init,Y(qe(P._payload),$,ue,he,Ce)}}if(qe)return Ce=Ce(P),qe=he===""?"."+it(P,0):he,Ue(Ce)?(ue="",qe!=null&&(ue=qe.replace(k,"$&/")+"/"),Y(Ce,$,ue,"",function(Me){return Me})):Ce!=null&&(D(Ce)&&(Ce=M(Ce,ue+(Ce.key==null||P&&P.key===Ce.key?"":(""+Ce.key).replace(k,"$&/")+"/")+qe)),$.push(Ce)),1;qe=0;var te=he===""?".":he+":";if(Ue(P))for(var ae=0;ae<P.length;ae++)he=P[ae],je=te+it(he,ae),qe+=Y(he,$,ue,je,Ce);else if(ae=L(P),typeof ae=="function")for(P=ae.call(P),ae=0;!(he=P.next()).done;)he=he.value,je=te+it(he,ae++),qe+=Y(he,$,ue,je,Ce);else if(je==="object"){if(typeof P.then=="function")return Y(vt(P),$,ue,he,Ce);throw $=String(P),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return qe}function oe(P,$,ue){if(P==null)return P;var he=[],Ce=0;return Y(P,he,"","",function(je){return $.call(ue,je,Ce++)}),he}function we(P){if(P._status===-1){var $=P._result;$=$(),$.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=$)}if(P._status===1)return P._result.default;throw P._result}var Ie=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Be={map:oe,forEach:function(P,$,ue){oe(P,function(){$.apply(this,arguments)},ue)},count:function(P){var $=0;return oe(P,function(){$++}),$},toArray:function(P){return oe(P,function($){return $})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Oe.Activity=w,Oe.Children=Be,Oe.Component=ge,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=xe,Oe.StrictMode=i,Oe.Suspense=g,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return C.H.useMemoCache(P)}},Oe.cache=function(P){return function(){return P.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(P,$,ue){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var he=ne({},P.props),Ce=P.key;if($!=null)for(je in $.key!==void 0&&(Ce=""+$.key),$)!A.call($,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&$.ref===void 0||(he[je]=$[je]);var je=arguments.length-2;if(je===1)he.children=ue;else if(1<je){for(var qe=Array(je),te=0;te<je;te++)qe[te]=arguments[te+2];he.children=qe}return R(P.type,Ce,he)},Oe.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},Oe.createElement=function(P,$,ue){var he,Ce={},je=null;if($!=null)for(he in $.key!==void 0&&(je=""+$.key),$)A.call($,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ce[he]=$[he]);var qe=arguments.length-2;if(qe===1)Ce.children=ue;else if(1<qe){for(var te=Array(qe),ae=0;ae<qe;ae++)te[ae]=arguments[ae+2];Ce.children=te}if(P&&P.defaultProps)for(he in qe=P.defaultProps,qe)Ce[he]===void 0&&(Ce[he]=qe[he]);return R(P,je,Ce)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(P){return{$$typeof:m,render:P}},Oe.isValidElement=D,Oe.lazy=function(P){return{$$typeof:x,_payload:{_status:-1,_result:P},_init:we}},Oe.memo=function(P,$){return{$$typeof:y,type:P,compare:$===void 0?null:$}},Oe.startTransition=function(P){var $=C.T,ue={};C.T=ue;try{var he=P(),Ce=C.S;Ce!==null&&Ce(ue,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Ae,Ie)}catch(je){Ie(je)}finally{$!==null&&ue.types!==null&&($.types=ue.types),C.T=$}},Oe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Oe.use=function(P){return C.H.use(P)},Oe.useActionState=function(P,$,ue){return C.H.useActionState(P,$,ue)},Oe.useCallback=function(P,$){return C.H.useCallback(P,$)},Oe.useContext=function(P){return C.H.useContext(P)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(P,$){return C.H.useDeferredValue(P,$)},Oe.useEffect=function(P,$){return C.H.useEffect(P,$)},Oe.useEffectEvent=function(P){return C.H.useEffectEvent(P)},Oe.useId=function(){return C.H.useId()},Oe.useImperativeHandle=function(P,$,ue){return C.H.useImperativeHandle(P,$,ue)},Oe.useInsertionEffect=function(P,$){return C.H.useInsertionEffect(P,$)},Oe.useLayoutEffect=function(P,$){return C.H.useLayoutEffect(P,$)},Oe.useMemo=function(P,$){return C.H.useMemo(P,$)},Oe.useOptimistic=function(P,$){return C.H.useOptimistic(P,$)},Oe.useReducer=function(P,$,ue){return C.H.useReducer(P,$,ue)},Oe.useRef=function(P){return C.H.useRef(P)},Oe.useState=function(P){return C.H.useState(P)},Oe.useSyncExternalStore=function(P,$,ue){return C.H.useSyncExternalStore(P,$,ue)},Oe.useTransition=function(){return C.H.useTransition()},Oe.version="19.2.4",Oe}var vb;function Ym(){return vb||(vb=1,Up.exports=TS()),Up.exports}var se=Ym();const SS=Fm(se);var zp={exports:{}},fc={},Bp={exports:{}},Hp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb;function NS(){return bb||(bb=1,(function(r){function e(Y,oe){var we=Y.length;Y.push(oe);e:for(;0<we;){var Ie=we-1>>>1,Be=Y[Ie];if(0<o(Be,oe))Y[Ie]=oe,Y[we]=Be,we=Ie;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var oe=Y[0],we=Y.pop();if(we!==oe){Y[0]=we;e:for(var Ie=0,Be=Y.length,P=Be>>>1;Ie<P;){var $=2*(Ie+1)-1,ue=Y[$],he=$+1,Ce=Y[he];if(0>o(ue,we))he<Be&&0>o(Ce,ue)?(Y[Ie]=Ce,Y[he]=we,Ie=he):(Y[Ie]=ue,Y[$]=we,Ie=$);else if(he<Be&&0>o(Ce,we))Y[Ie]=Ce,Y[he]=we,Ie=he;else break e}}return oe}function o(Y,oe){var we=Y.sortIndex-oe.sortIndex;return we!==0?we:Y.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var u=Date,m=u.now();r.unstable_now=function(){return u.now()-m}}var g=[],y=[],x=1,w=null,S=3,L=!1,Q=!1,ne=!1,ie=!1,ge=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,xe=typeof setImmediate<"u"?setImmediate:null;function _e(Y){for(var oe=t(y);oe!==null;){if(oe.callback===null)i(y);else if(oe.startTime<=Y)i(y),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(y)}}function Ue(Y){if(ne=!1,_e(Y),!Q)if(t(g)!==null)Q=!0,Ae||(Ae=!0,j());else{var oe=t(y);oe!==null&&vt(Ue,oe.startTime-Y)}}var Ae=!1,C=-1,A=5,R=-1;function M(){return ie?!0:!(r.unstable_now()-R<A)}function D(){if(ie=!1,Ae){var Y=r.unstable_now();R=Y;var oe=!0;try{e:{Q=!1,ne&&(ne=!1,Ee(C),C=-1),L=!0;var we=S;try{t:{for(_e(Y),w=t(g);w!==null&&!(w.expirationTime>Y&&M());){var Ie=w.callback;if(typeof Ie=="function"){w.callback=null,S=w.priorityLevel;var Be=Ie(w.expirationTime<=Y);if(Y=r.unstable_now(),typeof Be=="function"){w.callback=Be,_e(Y),oe=!0;break t}w===t(g)&&i(g),_e(Y)}else i(g);w=t(g)}if(w!==null)oe=!0;else{var P=t(y);P!==null&&vt(Ue,P.startTime-Y),oe=!1}}break e}finally{w=null,S=we,L=!1}oe=void 0}}finally{oe?j():Ae=!1}}}var j;if(typeof xe=="function")j=function(){xe(D)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,it=k.port2;k.port1.onmessage=D,j=function(){it.postMessage(null)}}else j=function(){ge(D,0)};function vt(Y,oe){C=ge(function(){Y(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var we=S;S=oe;try{return Y()}finally{S=we}},r.unstable_requestPaint=function(){ie=!0},r.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var we=S;S=Y;try{return oe()}finally{S=we}},r.unstable_scheduleCallback=function(Y,oe,we){var Ie=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ie+we:Ie):we=Ie,Y){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=we+Be,Y={id:x++,callback:oe,priorityLevel:Y,startTime:we,expirationTime:Be,sortIndex:-1},we>Ie?(Y.sortIndex=we,e(y,Y),t(g)===null&&Y===t(y)&&(ne?(Ee(C),C=-1):ne=!0,vt(Ue,we-Ie))):(Y.sortIndex=Be,e(g,Y),Q||L||(Q=!0,Ae||(Ae=!0,j()))),Y},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(Y){var oe=S;return function(){var we=S;S=oe;try{return Y.apply(this,arguments)}finally{S=we}}}})(Hp)),Hp}var xb;function AS(){return xb||(xb=1,Bp.exports=NS()),Bp.exports}var Gp={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function CS(){if(_b)return Tn;_b=1;var r=Ym();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:x}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Tn.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,x)},Tn.flushSync=function(g){var y=u.T,x=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=y,i.p=x,i.d.f()}},Tn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Tn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Tn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,w=m(x,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:L}):x==="script"&&i.d.X(g,{crossOrigin:w,integrity:S,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Tn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=m(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Tn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,w=m(x,y.crossOrigin);i.d.L(g,x,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Tn.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=m(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Tn.requestFormReset=function(g){i.d.r(g)},Tn.unstable_batchedUpdates=function(g,y){return g(y)},Tn.useFormState=function(g,y,x){return u.H.useFormState(g,y,x)},Tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Tn.version="19.2.4",Tn}var wb;function RS(){if(wb)return Gp.exports;wb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gp.exports=CS(),Gp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function kS(){if(Eb)return fc;Eb=1;var r=AS(),e=Ym(),t=RS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(i(188))}function y(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(i(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return g(f),n;if(p===l)return g(f),s;p=p.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=p;else{for(var b=!1,T=f.child;T;){if(T===a){b=!0,a=f,l=p;break}if(T===l){b=!0,l=f,a=p;break}T=T.sibling}if(!b){for(T=p.child;T;){if(T===a){b=!0,a=p,l=f;break}if(T===l){b=!0,l=p,a=f;break}T=T.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:s}function x(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=x(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),Ee=Symbol.for("react.consumer"),xe=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var k=Symbol.for("react.client.reference");function it(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===k?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ne:return"Fragment";case ge:return"Profiler";case ie:return"StrictMode";case Ue:return"Suspense";case Ae:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Q:return"Portal";case xe:return n.displayName||"Context";case Ee:return(n._context.displayName||"Context")+".Consumer";case _e:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return s=n.displayName||null,s!==null?s:it(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return it(n(s))}catch{}}return null}var vt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Ie=[],Be=-1;function P(n){return{current:n}}function $(n){0>Be||(n.current=Ie[Be],Ie[Be]=null,Be--)}function ue(n,s){Be++,Ie[Be]=n.current,n.current=s}var he=P(null),Ce=P(null),je=P(null),qe=P(null);function te(n,s){switch(ue(je,s),ue(Ce,n),ue(he,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Vv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Vv(s),n=Uv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(he),ue(he,n)}function ae(){$(he),$(Ce),$(je)}function Me(n){n.memoizedState!==null&&ue(qe,n);var s=he.current,a=Uv(s,n.type);s!==a&&(ue(Ce,n),ue(he,a))}function St(n){Ce.current===n&&($(he),$(Ce)),qe.current===n&&($(qe),oc._currentValue=we)}var Yt,fn;function He(n){if(Yt===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Yt=s&&s[1]||"",fn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yt+n+fn}var pn=!1;function pr(n,s){if(!n||pn)return"";pn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(F){var G=F}Reflect.construct(n,[],W)}else{try{W.call()}catch(F){G=F}n.call(W.prototype)}}else{try{throw Error()}catch(F){G=F}(W=n())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(F){if(F&&G&&typeof F.stack=="string")return[F.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),b=p[0],T=p[1];if(b&&T){var I=b.split(`
`),H=T.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===H.length)for(l=I.length-1,f=H.length-1;1<=l&&0<=f&&I[l]!==H[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==H[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==H[f]){var K=`
`+I[l].replace(" at new "," at ");return n.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",n.displayName)),K}while(1<=l&&0<=f);break}}}finally{pn=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?He(a):""}function Dr(n,s){switch(n.tag){case 26:case 27:case 5:return He(n.type);case 16:return He("Lazy");case 13:return n.child!==s&&s!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return pr(n.type,!1);case 11:return pr(n.type.render,!1);case 1:return pr(n.type,!0);case 31:return He("Activity");default:return""}}function aa(n){try{var s="",a=null;do s+=Dr(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Nt=Object.prototype.hasOwnProperty,It=r.unstable_scheduleCallback,jr=r.unstable_cancelCallback,Wi=r.unstable_shouldYield,Qr=r.unstable_requestPaint,le=r.unstable_now,_t=r.unstable_getCurrentPriorityLevel,Zi=r.unstable_ImmediatePriority,Jn=r.unstable_UserBlockingPriority,sn=r.unstable_NormalPriority,Kr=r.unstable_LowPriority,vi=r.unstable_IdlePriority,Xr=r.log,pe=r.unstable_setDisableYieldValue,Wn=null,$t=null;function Vn(n){if(typeof Xr=="function"&&pe(n),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Wn,n)}catch{}}var At=Math.clz32?Math.clz32:Za,es=Math.log,Jr=Math.LN2;function Za(n){return n>>>=0,n===0?32:31-(es(n)/Jr|0)|0}var Zn=256,mr=262144,Dt=4194304;function gr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function er(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~p,l!==0?f=gr(l):(b&=T,b!==0?f=gr(b):a||(a=T&~n,a!==0&&(f=gr(a))))):(T=l&~p,T!==0?f=gr(T):b!==0?f=gr(b):a||(a=l&~n,a!==0&&(f=gr(a)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,a=s&-s,p>=a||p===32&&(a&4194048)!==0)?s:f}function Un(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function eo(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oa(){var n=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),n}function Dn(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Or(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ml(n,s,a,l,f,p){var b=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,I=n.expirationTimes,H=n.hiddenUpdates;for(a=b&~a;0<a;){var K=31-At(a),W=1<<K;T[K]=0,I[K]=-1;var G=H[K];if(G!==null)for(H[K]=null,K=0;K<G.length;K++){var F=G[K];F!==null&&(F.lane&=-536870913)}a&=~W}l!==0&&bi(n,l,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~s))}function bi(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-At(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function la(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-At(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function yr(n,s){var a=s&-s;return a=(a&42)!==0?1:vr(a),(a&(n.suspendedLanes|s))!==0?0:a}function vr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function br(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function to(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:lb(n.type))}function Qt(n,s){var a=oe.p;try{return oe.p=n,s()}finally{oe.p=a}}var ln=Math.random().toString(36).slice(2),Ct="__reactFiber$"+ln,Ot="__reactProps$"+ln,tr="__reactContainer$"+ln,xi="__reactEvents$"+ln,ts="__reactListeners$"+ln,ca="__reactHandles$"+ln,_i="__reactResources$"+ln,mn="__reactMarker$"+ln;function wi(n){delete n[Ct],delete n[Ot],delete n[xi],delete n[ts],delete n[ca]}function nr(n){var s=n[Ct];if(s)return s;for(var a=n.parentNode;a;){if(s=a[tr]||a[Ct]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Yv(n);n!==null;){if(a=n[Ct])return a;n=Yv(n)}return s}n=a,a=n.parentNode}return null}function E(n){if(n=n[Ct]||n[tr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function X(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function V(n){var s=n[_i];return s||(s=n[_i]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function re(n){n[mn]=!0}var ve=new Set,Pt={};function zn(n,s){Wr(n,s),Wr(n+"Capture",s)}function Wr(n,s){for(Pt[n]=s,n=0;n<s.length;n++)ve.add(s[n])}var gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yl={},vl={};function su(n){return Nt.call(vl,n)?!0:Nt.call(yl,n)?!1:gl.test(n)?vl[n]=!0:(yl[n]=!0,!1)}function no(n,s,a){if(su(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function rr(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Kt(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function cn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ns(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bl(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,p.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function lt(n){if(!n._valueTracker){var s=ns(n)?"checked":"value";n._valueTracker=bl(n,s,""+n[s])}}function ua(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=ns(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function Zr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ha=/[\n"\\]/g;function Bn(n){return n.replace(ha,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ro(n,s,a,l,f,p,b,T){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),s!=null?b==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+cn(s)):n.value!==""+cn(s)&&(n.value=""+cn(s)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),s!=null?xl(n,b,cn(s)):a!=null?xl(n,b,cn(a)):l!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+cn(T):n.removeAttribute("name")}function au(n,s,a,l,f,p,b,T){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){lt(n);return}a=a!=null?""+cn(a):"",s=s!=null?""+cn(s):a,T||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),lt(n)}function xl(n,s,a){s==="number"&&Zr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function rs(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+cn(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function ou(n,s,a){if(s!=null&&(s=""+cn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+cn(a):""}function is(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(vt(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=cn(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),lt(n)}function Hn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var lu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||lu.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function wl(n,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&_l(n,f,l)}else for(var p in s)s.hasOwnProperty(p)&&_l(n,p,s[p])}function io(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ss=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function so(n){return ss.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Pr(){}var El=null;function xr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var as=null,ei=null;function da(n){var s=E(n);if(s&&(n=s.stateNode)){var a=n[Ot]||null;e:switch(n=s.stateNode,s.type){case"input":if(ro(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Bn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[Ot]||null;if(!f)throw Error(i(90));ro(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&ua(l)}break e;case"textarea":ou(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&rs(n,!!a.multiple,s,!1)}}}var ao=!1;function os(n,s,a){if(ao)return n(s,a);ao=!0;try{var l=n(s);return l}finally{if(ao=!1,(as!==null||ei!==null)&&(nh(),as&&(s=as,n=ei,ei=as=null,da(s),n)))for(s=0;s<n.length;s++)da(n[s])}}function Mr(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Ot]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=!1;if(_r)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){fa=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{fa=!1}var ti=null,Tl=null,pa=null;function Sl(){if(pa)return pa;var n,s=Tl,a=s.length,l,f="value"in ti?ti.value:ti.textContent,p=f.length;for(n=0;n<a&&s[n]===f[n];n++);var b=a-n;for(l=1;l<=b&&s[a-l]===f[p-l];l++);return pa=f.slice(n,1<l?1-l:void 0)}function ma(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ei(){return!0}function Lr(){return!1}function gn(n){function s(a,l,f,p,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ei:Lr,this.isPropagationStopped=Lr,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),s}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ni=gn(Ti),ls=w({},Ti,{view:0,detail:0}),Nl=gn(ls),cs,oo,ri,lo=w({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:us,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ri&&(ri&&n.type==="mousemove"?(cs=n.screenX-ri.screenX,oo=n.screenY-ri.screenY):oo=cs=0,ri=n),cs)},movementY:function(n){return"movementY"in n?n.movementY:oo}}),Al=gn(lo),ga=w({},lo,{dataTransfer:0}),uu=gn(ga),hu=w({},ls,{relatedTarget:0}),ya=gn(hu),Cl=w({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),du=gn(Cl),co=w({},Ti,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),fu=gn(co),pu=w({},Ti,{data:0}),ii=gn(pu),mu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=yu[n])?!!s[n]:!1}function us(){return vu}var jn=w({},ls,{key:function(n){if(n.key){var s=mu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ma(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?gu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:us,charCode:function(n){return n.type==="keypress"?ma(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ma(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),bu=gn(jn),xu=w({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Si=gn(xu),d=w({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:us}),v=gn(d),_=w({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=gn(_),z=w({},lo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),q=gn(z),ce=w({},Ti,{newState:0,oldState:0}),Le=gn(ce),Bt=[9,13,27,32],st=_r&&"CompositionEvent"in window,Rt=null;_r&&"documentMode"in document&&(Rt=document.documentMode);var wr=_r&&"TextEvent"in window&&!Rt,si=_r&&(!st||Rt&&8<Rt&&11>=Rt),Vr=" ",Ur=!1;function va(n,s){switch(n){case"keyup":return Bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ho=!1;function qT(n,s){switch(n){case"compositionend":return uo(s);case"keypress":return s.which!==32?null:(Ur=!0,Vr);case"textInput":return n=s.data,n===Vr&&Ur?null:n;default:return null}}function FT(n,s){if(ho)return n==="compositionend"||!st&&va(n,s)?(n=Sl(),pa=Tl=ti=null,ho=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return si&&s.locale!=="ko"?null:s.data;default:return null}}var YT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!YT[n.type]:s==="textarea"}function Xg(n,s,a,l){as?ei?ei.push(l):ei=[l]:as=l,s=ch(s,"onChange"),0<s.length&&(a=new ni("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var Rl=null,kl=null;function $T(n){Dv(n,0)}function _u(n){var s=X(n);if(ua(s))return n}function Jg(n,s){if(n==="change")return s}var Wg=!1;if(_r){var qd;if(_r){var Fd="oninput"in document;if(!Fd){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),Fd=typeof Zg.oninput=="function"}qd=Fd}else qd=!1;Wg=qd&&(!document.documentMode||9<document.documentMode)}function ey(){Rl&&(Rl.detachEvent("onpropertychange",ty),kl=Rl=null)}function ty(n){if(n.propertyName==="value"&&_u(kl)){var s=[];Xg(s,kl,n,xr(n)),os($T,s)}}function QT(n,s,a){n==="focusin"?(ey(),Rl=s,kl=a,Rl.attachEvent("onpropertychange",ty)):n==="focusout"&&ey()}function KT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _u(kl)}function XT(n,s){if(n==="click")return _u(s)}function JT(n,s){if(n==="input"||n==="change")return _u(s)}function WT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ir=typeof Object.is=="function"?Object.is:WT;function Il(n,s){if(ir(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Nt.call(s,f)||!ir(n[f],s[f]))return!1}return!0}function ny(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ry(n,s){var a=ny(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ny(a)}}function iy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?iy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function sy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Zr(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Zr(n.document)}return s}function Yd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var ZT=_r&&"documentMode"in document&&11>=document.documentMode,fo=null,$d=null,Dl=null,Qd=!1;function ay(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qd||fo==null||fo!==Zr(l)||(l=fo,"selectionStart"in l&&Yd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Dl&&Il(Dl,l)||(Dl=l,l=ch($d,"onSelect"),0<l.length&&(s=new ni("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=fo)))}function ba(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var po={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},Kd={},oy={};_r&&(oy=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function xa(n){if(Kd[n])return Kd[n];if(!po[n])return n;var s=po[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in oy)return Kd[n]=s[a];return n}var ly=xa("animationend"),cy=xa("animationiteration"),uy=xa("animationstart"),e1=xa("transitionrun"),t1=xa("transitionstart"),n1=xa("transitioncancel"),hy=xa("transitionend"),dy=new Map,Xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xd.push("scrollEnd");function zr(n,s){dy.set(n,s),zn(s,[n])}var wu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Er=[],mo=0,Jd=0;function Eu(){for(var n=mo,s=Jd=mo=0;s<n;){var a=Er[s];Er[s++]=null;var l=Er[s];Er[s++]=null;var f=Er[s];Er[s++]=null;var p=Er[s];if(Er[s++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}p!==0&&fy(a,f,p)}}function Tu(n,s,a,l){Er[mo++]=n,Er[mo++]=s,Er[mo++]=a,Er[mo++]=l,Jd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Wd(n,s,a,l){return Tu(n,s,a,l),Su(n)}function _a(n,s){return Tu(n,null,null,s),Su(n)}function fy(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=n.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&s!==null&&(f=31-At(a),n=p.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),p):null}function Su(n){if(50<ec)throw ec=0,lp=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var go={};function r1(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(n,s,a,l){return new r1(n,s,a,l)}function Zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ni(n,s){var a=n.alternate;return a===null?(a=sr(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function py(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Nu(n,s,a,l,f,p){var b=0;if(l=n,typeof n=="function")Zd(n)&&(b=1);else if(typeof n=="string")b=lS(n,a,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=sr(31,a,s,f),n.elementType=R,n.lanes=p,n;case ne:return wa(a.children,f,p,s);case ie:b=8,f|=24;break;case ge:return n=sr(12,a,s,f|2),n.elementType=ge,n.lanes=p,n;case Ue:return n=sr(13,a,s,f),n.elementType=Ue,n.lanes=p,n;case Ae:return n=sr(19,a,s,f),n.elementType=Ae,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case xe:b=10;break e;case Ee:b=9;break e;case _e:b=11;break e;case C:b=14;break e;case A:b=16,l=null;break e}b=29,a=Error(i(130,n===null?"null":typeof n,"")),l=null}return s=sr(b,a,s,f),s.elementType=n,s.type=l,s.lanes=p,s}function wa(n,s,a,l){return n=sr(7,n,l,s),n.lanes=a,n}function ef(n,s,a){return n=sr(6,n,null,s),n.lanes=a,n}function my(n){var s=sr(18,null,null,0);return s.stateNode=n,s}function tf(n,s,a){return s=sr(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var gy=new WeakMap;function Tr(n,s){if(typeof n=="object"&&n!==null){var a=gy.get(n);return a!==void 0?a:(s={value:n,source:s,stack:aa(s)},gy.set(n,s),s)}return{value:n,source:s,stack:aa(s)}}var yo=[],vo=0,Au=null,jl=0,Sr=[],Nr=0,hs=null,ai=1,oi="";function Ai(n,s){yo[vo++]=jl,yo[vo++]=Au,Au=n,jl=s}function yy(n,s,a){Sr[Nr++]=ai,Sr[Nr++]=oi,Sr[Nr++]=hs,hs=n;var l=ai;n=oi;var f=32-At(l)-1;l&=~(1<<f),a+=1;var p=32-At(s)+f;if(30<p){var b=f-f%5;p=(l&(1<<b)-1).toString(32),l>>=b,f-=b,ai=1<<32-At(s)+f|a<<f|l,oi=p+n}else ai=1<<p|a<<f|l,oi=n}function nf(n){n.return!==null&&(Ai(n,1),yy(n,1,0))}function rf(n){for(;n===Au;)Au=yo[--vo],yo[vo]=null,jl=yo[--vo],yo[vo]=null;for(;n===hs;)hs=Sr[--Nr],Sr[Nr]=null,oi=Sr[--Nr],Sr[Nr]=null,ai=Sr[--Nr],Sr[Nr]=null}function vy(n,s){Sr[Nr++]=ai,Sr[Nr++]=oi,Sr[Nr++]=hs,ai=s.id,oi=s.overflow,hs=n}var yn=null,wt=null,We=!1,ds=null,Ar=!1,sf=Error(i(519));function fs(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ol(Tr(s,n)),sf}function by(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Ct]=n,s[Ot]=l,a){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(a=0;a<nc.length;a++)Ye(nc[a],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),au(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),is(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Mv(s.textContent,a)?(l.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),l.onScroll!=null&&Ye("scroll",s),l.onScrollEnd!=null&&Ye("scrollend",s),l.onClick!=null&&(s.onclick=Pr),s=!0):s=!1,s||fs(n,!0)}function xy(n){for(yn=n.return;yn;)switch(yn.tag){case 5:case 31:case 13:Ar=!1;return;case 27:case 3:Ar=!0;return;default:yn=yn.return}}function bo(n){if(n!==yn)return!1;if(!We)return xy(n),We=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Ep(n.type,n.memoizedProps)),a=!a),a&&wt&&fs(n),xy(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));wt=Fv(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));wt=Fv(n)}else s===27?(s=wt,As(n.type)?(n=Cp,Cp=null,wt=n):wt=s):wt=yn?Rr(n.stateNode.nextSibling):null;return!0}function Ea(){wt=yn=null,We=!1}function af(){var n=ds;return n!==null&&(Yn===null?Yn=n:Yn.push.apply(Yn,n),ds=null),n}function Ol(n){ds===null?ds=[n]:ds.push(n)}var of=P(null),Ta=null,Ci=null;function ps(n,s,a){ue(of,s._currentValue),s._currentValue=a}function Ri(n){n._currentValue=of.current,$(of)}function lf(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function cf(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var b=f.child;p=p.firstContext;e:for(;p!==null;){var T=p;p=f;for(var I=0;I<s.length;I++)if(T.context===s[I]){p.lanes|=a,T=p.alternate,T!==null&&(T.lanes|=a),lf(p.return,a,n),l||(b=null);break e}p=T.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=a,p=b.alternate,p!==null&&(p.lanes|=a),lf(b,a,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function xo(n,s,a,l){n=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var T=f.type;ir(f.pendingProps.value,b.value)||(n!==null?n.push(T):n=[T])}}else if(f===qe.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(oc):n=[oc])}f=f.return}n!==null&&cf(s,n,a,l),s.flags|=262144}function Cu(n){for(n=n.firstContext;n!==null;){if(!ir(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Sa(n){Ta=n,Ci=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function vn(n){return _y(Ta,n)}function Ru(n,s){return Ta===null&&Sa(n),_y(n,s)}function _y(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ci===null){if(n===null)throw Error(i(308));Ci=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ci=Ci.next=s;return a}var i1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},s1=r.unstable_scheduleCallback,a1=r.unstable_NormalPriority,Xt={$$typeof:xe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uf(){return{controller:new i1,data:new Map,refCount:0}}function Pl(n){n.refCount--,n.refCount===0&&s1(a1,function(){n.controller.abort()})}var Ml=null,hf=0,_o=0,wo=null;function o1(n,s){if(Ml===null){var a=Ml=[];hf=0,_o=pp(),wo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return hf++,s.then(wy,wy),s}function wy(){if(--hf===0&&Ml!==null){wo!==null&&(wo.status="fulfilled");var n=Ml;Ml=null,_o=0,wo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function l1(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Ey=Y.S;Y.S=function(n,s){av=le(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&o1(n,s),Ey!==null&&Ey(n,s)};var Na=P(null);function df(){var n=Na.current;return n!==null?n:mt.pooledCache}function ku(n,s){s===null?ue(Na,Na.current):ue(Na,s.pool)}function Ty(){var n=df();return n===null?null:{parent:Xt._currentValue,pool:n}}var Eo=Error(i(460)),ff=Error(i(474)),Iu=Error(i(542)),Du={then:function(){}};function Sy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ny(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Pr,Pr),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Cy(n),n;default:if(typeof s.status=="string")s.then(Pr,Pr);else{if(n=mt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Cy(n),n}throw Ca=s,Eo}}function Aa(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ca=a,Eo):a}}var Ca=null;function Ay(){if(Ca===null)throw Error(i(459));var n=Ca;return Ca=null,n}function Cy(n){if(n===Eo||n===Iu)throw Error(i(483))}var To=null,Ll=0;function ju(n){var s=Ll;return Ll+=1,To===null&&(To=[]),Ny(To,n,s)}function Vl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Ou(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Ry(n){function s(U,O){if(n){var B=U.deletions;B===null?(U.deletions=[O],U.flags|=16):B.push(O)}}function a(U,O){if(!n)return null;for(;O!==null;)s(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function f(U,O){return U=Ni(U,O),U.index=0,U.sibling=null,U}function p(U,O,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<O?(U.flags|=67108866,O):B):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function b(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function T(U,O,B,J){return O===null||O.tag!==6?(O=ef(B,U.mode,J),O.return=U,O):(O=f(O,B),O.return=U,O)}function I(U,O,B,J){var Te=B.type;return Te===ne?K(U,O,B.props.children,J,B.key):O!==null&&(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&Aa(Te)===O.type)?(O=f(O,B.props),Vl(O,B),O.return=U,O):(O=Nu(B.type,B.key,B.props,null,U.mode,J),Vl(O,B),O.return=U,O)}function H(U,O,B,J){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=tf(B,U.mode,J),O.return=U,O):(O=f(O,B.children||[]),O.return=U,O)}function K(U,O,B,J,Te){return O===null||O.tag!==7?(O=wa(B,U.mode,J,Te),O.return=U,O):(O=f(O,B),O.return=U,O)}function W(U,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ef(""+O,U.mode,B),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case L:return B=Nu(O.type,O.key,O.props,null,U.mode,B),Vl(B,O),B.return=U,B;case Q:return O=tf(O,U.mode,B),O.return=U,O;case A:return O=Aa(O),W(U,O,B)}if(vt(O)||j(O))return O=wa(O,U.mode,B,null),O.return=U,O;if(typeof O.then=="function")return W(U,ju(O),B);if(O.$$typeof===xe)return W(U,Ru(U,O),B);Ou(U,O)}return null}function G(U,O,B,J){var Te=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Te!==null?null:T(U,O,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case L:return B.key===Te?I(U,O,B,J):null;case Q:return B.key===Te?H(U,O,B,J):null;case A:return B=Aa(B),G(U,O,B,J)}if(vt(B)||j(B))return Te!==null?null:K(U,O,B,J,null);if(typeof B.then=="function")return G(U,O,ju(B),J);if(B.$$typeof===xe)return G(U,O,Ru(U,B),J);Ou(U,B)}return null}function F(U,O,B,J,Te){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(B)||null,T(O,U,""+J,Te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case L:return U=U.get(J.key===null?B:J.key)||null,I(O,U,J,Te);case Q:return U=U.get(J.key===null?B:J.key)||null,H(O,U,J,Te);case A:return J=Aa(J),F(U,O,B,J,Te)}if(vt(J)||j(J))return U=U.get(B)||null,K(O,U,J,Te,null);if(typeof J.then=="function")return F(U,O,B,ju(J),Te);if(J.$$typeof===xe)return F(U,O,B,Ru(O,J),Te);Ou(O,J)}return null}function me(U,O,B,J){for(var Te=null,tt=null,be=O,ze=O=0,Qe=null;be!==null&&ze<B.length;ze++){be.index>ze?(Qe=be,be=null):Qe=be.sibling;var nt=G(U,be,B[ze],J);if(nt===null){be===null&&(be=Qe);break}n&&be&&nt.alternate===null&&s(U,be),O=p(nt,O,ze),tt===null?Te=nt:tt.sibling=nt,tt=nt,be=Qe}if(ze===B.length)return a(U,be),We&&Ai(U,ze),Te;if(be===null){for(;ze<B.length;ze++)be=W(U,B[ze],J),be!==null&&(O=p(be,O,ze),tt===null?Te=be:tt.sibling=be,tt=be);return We&&Ai(U,ze),Te}for(be=l(be);ze<B.length;ze++)Qe=F(be,U,ze,B[ze],J),Qe!==null&&(n&&Qe.alternate!==null&&be.delete(Qe.key===null?ze:Qe.key),O=p(Qe,O,ze),tt===null?Te=Qe:tt.sibling=Qe,tt=Qe);return n&&be.forEach(function(Ds){return s(U,Ds)}),We&&Ai(U,ze),Te}function Ne(U,O,B,J){if(B==null)throw Error(i(151));for(var Te=null,tt=null,be=O,ze=O=0,Qe=null,nt=B.next();be!==null&&!nt.done;ze++,nt=B.next()){be.index>ze?(Qe=be,be=null):Qe=be.sibling;var Ds=G(U,be,nt.value,J);if(Ds===null){be===null&&(be=Qe);break}n&&be&&Ds.alternate===null&&s(U,be),O=p(Ds,O,ze),tt===null?Te=Ds:tt.sibling=Ds,tt=Ds,be=Qe}if(nt.done)return a(U,be),We&&Ai(U,ze),Te;if(be===null){for(;!nt.done;ze++,nt=B.next())nt=W(U,nt.value,J),nt!==null&&(O=p(nt,O,ze),tt===null?Te=nt:tt.sibling=nt,tt=nt);return We&&Ai(U,ze),Te}for(be=l(be);!nt.done;ze++,nt=B.next())nt=F(be,U,ze,nt.value,J),nt!==null&&(n&&nt.alternate!==null&&be.delete(nt.key===null?ze:nt.key),O=p(nt,O,ze),tt===null?Te=nt:tt.sibling=nt,tt=nt);return n&&be.forEach(function(bS){return s(U,bS)}),We&&Ai(U,ze),Te}function pt(U,O,B,J){if(typeof B=="object"&&B!==null&&B.type===ne&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case L:e:{for(var Te=B.key;O!==null;){if(O.key===Te){if(Te=B.type,Te===ne){if(O.tag===7){a(U,O.sibling),J=f(O,B.props.children),J.return=U,U=J;break e}}else if(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&Aa(Te)===O.type){a(U,O.sibling),J=f(O,B.props),Vl(J,B),J.return=U,U=J;break e}a(U,O);break}else s(U,O);O=O.sibling}B.type===ne?(J=wa(B.props.children,U.mode,J,B.key),J.return=U,U=J):(J=Nu(B.type,B.key,B.props,null,U.mode,J),Vl(J,B),J.return=U,U=J)}return b(U);case Q:e:{for(Te=B.key;O!==null;){if(O.key===Te)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(U,O.sibling),J=f(O,B.children||[]),J.return=U,U=J;break e}else{a(U,O);break}else s(U,O);O=O.sibling}J=tf(B,U.mode,J),J.return=U,U=J}return b(U);case A:return B=Aa(B),pt(U,O,B,J)}if(vt(B))return me(U,O,B,J);if(j(B)){if(Te=j(B),typeof Te!="function")throw Error(i(150));return B=Te.call(B),Ne(U,O,B,J)}if(typeof B.then=="function")return pt(U,O,ju(B),J);if(B.$$typeof===xe)return pt(U,O,Ru(U,B),J);Ou(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(a(U,O.sibling),J=f(O,B),J.return=U,U=J):(a(U,O),J=ef(B,U.mode,J),J.return=U,U=J),b(U)):a(U,O)}return function(U,O,B,J){try{Ll=0;var Te=pt(U,O,B,J);return To=null,Te}catch(be){if(be===Eo||be===Iu)throw be;var tt=sr(29,be,null,U.mode);return tt.lanes=J,tt.return=U,tt}finally{}}}var Ra=Ry(!0),ky=Ry(!1),ms=!1;function pf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function gs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ys(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(at&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Su(n),fy(n,null,a),s}return Tu(n,l,s,a),Su(n)}function Ul(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,la(n,a)}}function gf(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=b:p=p.next=b,a=a.next}while(a!==null);p===null?f=p=s:p=p.next=s}else f=p=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var yf=!1;function zl(){if(yf){var n=wo;if(n!==null)throw n}}function Bl(n,s,a,l){yf=!1;var f=n.updateQueue;ms=!1;var p=f.firstBaseUpdate,b=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var I=T,H=I.next;I.next=null,b===null?p=H:b.next=H,b=I;var K=n.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==b&&(T===null?K.firstBaseUpdate=H:T.next=H,K.lastBaseUpdate=I))}if(p!==null){var W=f.baseState;b=0,K=H=I=null,T=p;do{var G=T.lane&-536870913,F=G!==T.lane;if(F?($e&G)===G:(l&G)===G){G!==0&&G===_o&&(yf=!0),K!==null&&(K=K.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var me=n,Ne=T;G=s;var pt=a;switch(Ne.tag){case 1:if(me=Ne.payload,typeof me=="function"){W=me.call(pt,W,G);break e}W=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ne.payload,G=typeof me=="function"?me.call(pt,W,G):me,G==null)break e;W=w({},W,G);break e;case 2:ms=!0}}G=T.callback,G!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[G]:F.push(G))}else F={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(H=K=F,I=W):K=K.next=F,b|=G;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;F=T,T=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);K===null&&(I=W),f.baseState=I,f.firstBaseUpdate=H,f.lastBaseUpdate=K,p===null&&(f.shared.lanes=0),ws|=b,n.lanes=b,n.memoizedState=W}}function Iy(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Dy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Iy(a[n],s)}var So=P(null),Pu=P(0);function jy(n,s){n=Vi,ue(Pu,n),ue(So,s),Vi=n|s.baseLanes}function vf(){ue(Pu,Vi),ue(So,So.current)}function bf(){Vi=Pu.current,$(So),$(Pu)}var ar=P(null),Cr=null;function vs(n){var s=n.alternate;ue(Ht,Ht.current&1),ue(ar,n),Cr===null&&(s===null||So.current!==null||s.memoizedState!==null)&&(Cr=n)}function xf(n){ue(Ht,Ht.current),ue(ar,n),Cr===null&&(Cr=n)}function Oy(n){n.tag===22?(ue(Ht,Ht.current),ue(ar,n),Cr===null&&(Cr=n)):bs()}function bs(){ue(Ht,Ht.current),ue(ar,ar.current)}function or(n){$(ar),Cr===n&&(Cr=null),$(Ht)}var Ht=P(0);function Mu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Np(a)||Ap(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ki=0,Ve=null,dt=null,Jt=null,Lu=!1,No=!1,ka=!1,Vu=0,Hl=0,Ao=null,c1=0;function Mt(){throw Error(i(321))}function _f(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!ir(n[a],s[a]))return!1;return!0}function wf(n,s,a,l,f,p){return ki=p,Ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=n===null||n.memoizedState===null?y0:Lf,ka=!1,p=a(l,f),ka=!1,No&&(p=My(s,a,l,f)),Py(n),p}function Py(n){Y.H=Fl;var s=dt!==null&&dt.next!==null;if(ki=0,Jt=dt=Ve=null,Lu=!1,Hl=0,Ao=null,s)throw Error(i(300));n===null||Wt||(n=n.dependencies,n!==null&&Cu(n)&&(Wt=!0))}function My(n,s,a,l){Ve=n;var f=0;do{if(No&&(Ao=null),Hl=0,No=!1,25<=f)throw Error(i(301));if(f+=1,Jt=dt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=v0,p=s(a,l)}while(No);return p}function u1(){var n=Y.H,s=n.useState()[0];return s=typeof s.then=="function"?Gl(s):s,n=n.useState()[0],(dt!==null?dt.memoizedState:null)!==n&&(Ve.flags|=1024),s}function Ef(){var n=Vu!==0;return Vu=0,n}function Tf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Sf(n){if(Lu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Lu=!1}ki=0,Jt=dt=Ve=null,No=!1,Hl=Vu=0,Ao=null}function On(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Ve.memoizedState=Jt=n:Jt=Jt.next=n,Jt}function Gt(){if(dt===null){var n=Ve.alternate;n=n!==null?n.memoizedState:null}else n=dt.next;var s=Jt===null?Ve.memoizedState:Jt.next;if(s!==null)Jt=s,dt=n;else{if(n===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));dt=n,n={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Jt===null?Ve.memoizedState=Jt=n:Jt=Jt.next=n}return Jt}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(n){var s=Hl;return Hl+=1,Ao===null&&(Ao=[]),n=Ny(Ao,n,s),s=Ve,(Jt===null?s.memoizedState:Jt.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?y0:Lf),n}function zu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Gl(n);if(n.$$typeof===xe)return vn(n)}throw Error(i(438,String(n)))}function Nf(n){var s=null,a=Ve.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Uu(),Ve.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=M;return s.index++,a}function Ii(n,s){return typeof s=="function"?s(n):s}function Bu(n){var s=Gt();return Af(s,dt,n)}function Af(n,s,a){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=n.baseQueue,p=l.pending;if(p!==null){if(f!==null){var b=f.next;f.next=p.next,p.next=b}s.baseQueue=f=p,l.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{s=f.next;var T=b=null,I=null,H=s,K=!1;do{var W=H.lane&-536870913;if(W!==H.lane?($e&W)===W:(ki&W)===W){var G=H.revertLane;if(G===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),W===_o&&(K=!0);else if((ki&G)===G){H=H.next,G===_o&&(K=!0);continue}else W={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(T=I=W,b=p):I=I.next=W,Ve.lanes|=G,ws|=G;W=H.action,ka&&a(p,W),p=H.hasEagerState?H.eagerState:a(p,W)}else G={lane:W,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(T=I=G,b=p):I=I.next=G,Ve.lanes|=W,ws|=W;H=H.next}while(H!==null&&H!==s);if(I===null?b=p:I.next=T,!ir(p,n.memoizedState)&&(Wt=!0,K&&(a=wo,a!==null)))throw a;n.memoizedState=p,n.baseState=b,n.baseQueue=I,l.lastRenderedState=p}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Cf(n){var s=Gt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,p=s.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do p=n(p,b.action),b=b.next;while(b!==f);ir(p,s.memoizedState)||(Wt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,l]}function Ly(n,s,a){var l=Ve,f=Gt(),p=We;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=s();var b=!ir((dt||f).memoizedState,a);if(b&&(f.memoizedState=a,Wt=!0),f=f.queue,If(zy.bind(null,l,f,n),[n]),f.getSnapshot!==s||b||Jt!==null&&Jt.memoizedState.tag&1){if(l.flags|=2048,Co(9,{destroy:void 0},Uy.bind(null,l,f,a,s),null),mt===null)throw Error(i(349));p||(ki&127)!==0||Vy(l,s,a)}return a}function Vy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Ve.updateQueue,s===null?(s=Uu(),Ve.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Uy(n,s,a,l){s.value=a,s.getSnapshot=l,By(s)&&Hy(n)}function zy(n,s,a){return a(function(){By(s)&&Hy(n)})}function By(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!ir(n,a)}catch{return!0}}function Hy(n){var s=_a(n,2);s!==null&&$n(s,n,2)}function Rf(n){var s=On();if(typeof n=="function"){var a=n;if(n=a(),ka){Vn(!0);try{a()}finally{Vn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:n},s}function Gy(n,s,a,l){return n.baseState=a,Af(n,dt,typeof l=="function"?l:Ii)}function h1(n,s,a,l,f){if(qu(n))throw Error(i(485));if(n=s.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};Y.T!==null?a(!0):p.isTransition=!1,l(p),a=s.pending,a===null?(p.next=s.pending=p,qy(s,p)):(p.next=a.next,s.pending=a.next=p)}}function qy(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var p=Y.T,b={};Y.T=b;try{var T=a(f,l),I=Y.S;I!==null&&I(b,T),Fy(n,s,T)}catch(H){kf(n,s,H)}finally{p!==null&&b.types!==null&&(p.types=b.types),Y.T=p}}else try{p=a(f,l),Fy(n,s,p)}catch(H){kf(n,s,H)}}function Fy(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Yy(n,s,l)},function(l){return kf(n,s,l)}):Yy(n,s,a)}function Yy(n,s,a){s.status="fulfilled",s.value=a,$y(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,qy(n,a)))}function kf(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,$y(s),s=s.next;while(s!==l)}n.action=null}function $y(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Qy(n,s){return s}function Ky(n,s){if(We){var a=mt.formState;if(a!==null){e:{var l=Ve;if(We){if(wt){t:{for(var f=wt,p=Ar;f.nodeType!==8;){if(!p){f=null;break t}if(f=Rr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){wt=Rr(f.nextSibling),l=f.data==="F!";break e}}fs(l)}l=!1}l&&(s=a[0])}}return a=On(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qy,lastRenderedState:s},a.queue=l,a=p0.bind(null,Ve,l),l.dispatch=a,l=Rf(!1),p=Mf.bind(null,Ve,!1,l.queue),l=On(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=h1.bind(null,Ve,f,p,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function Xy(n){var s=Gt();return Jy(s,dt,n)}function Jy(n,s,a){if(s=Af(n,s,Qy)[0],n=Bu(Ii)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Gl(s)}catch(b){throw b===Eo?Iu:b}else l=s;s=Gt();var f=s.queue,p=f.dispatch;return a!==s.memoizedState&&(Ve.flags|=2048,Co(9,{destroy:void 0},d1.bind(null,f,a),null)),[l,p,n]}function d1(n,s){n.action=s}function Wy(n){var s=Gt(),a=dt;if(a!==null)return Jy(s,a,n);Gt(),s=s.memoizedState,a=Gt();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Co(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=Ve.updateQueue,s===null&&(s=Uu(),Ve.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function Zy(){return Gt().memoizedState}function Hu(n,s,a,l){var f=On();Ve.flags|=n,f.memoizedState=Co(1|s,{destroy:void 0},a,l===void 0?null:l)}function Gu(n,s,a,l){var f=Gt();l=l===void 0?null:l;var p=f.memoizedState.inst;dt!==null&&l!==null&&_f(l,dt.memoizedState.deps)?f.memoizedState=Co(s,p,a,l):(Ve.flags|=n,f.memoizedState=Co(1|s,p,a,l))}function e0(n,s){Hu(8390656,8,n,s)}function If(n,s){Gu(2048,8,n,s)}function f1(n){Ve.flags|=4;var s=Ve.updateQueue;if(s===null)s=Uu(),Ve.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function t0(n){var s=Gt().memoizedState;return f1({ref:s,nextImpl:n}),function(){if((at&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function n0(n,s){return Gu(4,2,n,s)}function r0(n,s){return Gu(4,4,n,s)}function i0(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function s0(n,s,a){a=a!=null?a.concat([n]):null,Gu(4,4,i0.bind(null,s,n),a)}function Df(){}function a0(n,s){var a=Gt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&_f(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function o0(n,s){var a=Gt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&_f(s,l[1]))return l[0];if(l=n(),ka){Vn(!0);try{n()}finally{Vn(!1)}}return a.memoizedState=[l,s],l}function jf(n,s,a){return a===void 0||(ki&1073741824)!==0&&($e&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=lv(),Ve.lanes|=n,ws|=n,a)}function l0(n,s,a,l){return ir(a,s)?a:So.current!==null?(n=jf(n,a,l),ir(n,s)||(Wt=!0),n):(ki&42)===0||(ki&1073741824)!==0&&($e&261930)===0?(Wt=!0,n.memoizedState=a):(n=lv(),Ve.lanes|=n,ws|=n,s)}function c0(n,s,a,l,f){var p=oe.p;oe.p=p!==0&&8>p?p:8;var b=Y.T,T={};Y.T=T,Mf(n,!1,s,a);try{var I=f(),H=Y.S;if(H!==null&&H(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var K=l1(I,l);ql(n,s,K,ur(n))}else ql(n,s,l,ur(n))}catch(W){ql(n,s,{then:function(){},status:"rejected",reason:W},ur())}finally{oe.p=p,b!==null&&T.types!==null&&(b.types=T.types),Y.T=b}}function p1(){}function Of(n,s,a,l){if(n.tag!==5)throw Error(i(476));var f=u0(n).queue;c0(n,f,s,we,a===null?p1:function(){return h0(n),a(l)})}function u0(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:we},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function h0(n){var s=u0(n);s.next===null&&(s=n.alternate.memoizedState),ql(n,s.next.queue,{},ur())}function Pf(){return vn(oc)}function d0(){return Gt().memoizedState}function f0(){return Gt().memoizedState}function m1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=ur();n=gs(a);var l=ys(s,n,a);l!==null&&($n(l,s,a),Ul(l,s,a)),s={cache:uf()},n.payload=s;return}s=s.return}}function g1(n,s,a){var l=ur();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},qu(n)?m0(s,a):(a=Wd(n,s,a,l),a!==null&&($n(a,n,l),g0(a,s,l)))}function p0(n,s,a){var l=ur();ql(n,s,a,l)}function ql(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(qu(n))m0(s,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var b=s.lastRenderedState,T=p(b,a);if(f.hasEagerState=!0,f.eagerState=T,ir(T,b))return Tu(n,s,f,0),mt===null&&Eu(),!1}catch{}finally{}if(a=Wd(n,s,f,l),a!==null)return $n(a,n,l),g0(a,s,l),!0}return!1}function Mf(n,s,a,l){if(l={lane:2,revertLane:pp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},qu(n)){if(s)throw Error(i(479))}else s=Wd(n,a,l,2),s!==null&&$n(s,n,2)}function qu(n){var s=n.alternate;return n===Ve||s!==null&&s===Ve}function m0(n,s){No=Lu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function g0(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,la(n,a)}}var Fl={readContext:vn,use:zu,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Fl.useEffectEvent=Mt;var y0={readContext:vn,use:zu,useCallback:function(n,s){return On().memoizedState=[n,s===void 0?null:s],n},useContext:vn,useEffect:e0,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Hu(4194308,4,i0.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Hu(4194308,4,n,s)},useInsertionEffect:function(n,s){Hu(4,2,n,s)},useMemo:function(n,s){var a=On();s=s===void 0?null:s;var l=n();if(ka){Vn(!0);try{n()}finally{Vn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=On();if(a!==void 0){var f=a(s);if(ka){Vn(!0);try{a(s)}finally{Vn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=g1.bind(null,Ve,n),[l.memoizedState,n]},useRef:function(n){var s=On();return n={current:n},s.memoizedState=n},useState:function(n){n=Rf(n);var s=n.queue,a=p0.bind(null,Ve,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Df,useDeferredValue:function(n,s){var a=On();return jf(a,n,s)},useTransition:function(){var n=Rf(!1);return n=c0.bind(null,Ve,n.queue,!0,!1),On().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=Ve,f=On();if(We){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),mt===null)throw Error(i(349));($e&127)!==0||Vy(l,s,a)}f.memoizedState=a;var p={value:a,getSnapshot:s};return f.queue=p,e0(zy.bind(null,l,p,n),[n]),l.flags|=2048,Co(9,{destroy:void 0},Uy.bind(null,l,p,a,s),null),a},useId:function(){var n=On(),s=mt.identifierPrefix;if(We){var a=oi,l=ai;a=(l&~(1<<32-At(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Vu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=c1++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Pf,useFormState:Ky,useActionState:Ky,useOptimistic:function(n){var s=On();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Mf.bind(null,Ve,!0,a),a.dispatch=s,[n,s]},useMemoCache:Nf,useCacheRefresh:function(){return On().memoizedState=m1.bind(null,Ve)},useEffectEvent:function(n){var s=On(),a={impl:n};return s.memoizedState=a,function(){if((at&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Lf={readContext:vn,use:zu,useCallback:a0,useContext:vn,useEffect:If,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:o0,useReducer:Bu,useRef:Zy,useState:function(){return Bu(Ii)},useDebugValue:Df,useDeferredValue:function(n,s){var a=Gt();return l0(a,dt.memoizedState,n,s)},useTransition:function(){var n=Bu(Ii)[0],s=Gt().memoizedState;return[typeof n=="boolean"?n:Gl(n),s]},useSyncExternalStore:Ly,useId:d0,useHostTransitionStatus:Pf,useFormState:Xy,useActionState:Xy,useOptimistic:function(n,s){var a=Gt();return Gy(a,dt,n,s)},useMemoCache:Nf,useCacheRefresh:f0};Lf.useEffectEvent=t0;var v0={readContext:vn,use:zu,useCallback:a0,useContext:vn,useEffect:If,useImperativeHandle:s0,useInsertionEffect:n0,useLayoutEffect:r0,useMemo:o0,useReducer:Cf,useRef:Zy,useState:function(){return Cf(Ii)},useDebugValue:Df,useDeferredValue:function(n,s){var a=Gt();return dt===null?jf(a,n,s):l0(a,dt.memoizedState,n,s)},useTransition:function(){var n=Cf(Ii)[0],s=Gt().memoizedState;return[typeof n=="boolean"?n:Gl(n),s]},useSyncExternalStore:Ly,useId:d0,useHostTransitionStatus:Pf,useFormState:Wy,useActionState:Wy,useOptimistic:function(n,s){var a=Gt();return dt!==null?Gy(a,dt,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Nf,useCacheRefresh:f0};v0.useEffectEvent=t0;function Vf(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Uf={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=ur(),f=gs(l);f.payload=s,a!=null&&(f.callback=a),s=ys(n,f,l),s!==null&&($n(s,n,l),Ul(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=ur(),f=gs(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=ys(n,f,l),s!==null&&($n(s,n,l),Ul(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=ur(),l=gs(a);l.tag=2,s!=null&&(l.callback=s),s=ys(n,l,a),s!==null&&($n(s,n,a),Ul(s,n,a))}};function b0(n,s,a,l,f,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,p,b):s.prototype&&s.prototype.isPureReactComponent?!Il(a,l)||!Il(f,p):!0}function x0(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&Uf.enqueueReplaceState(s,s.state,null)}function Ia(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=w({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function _0(n){wu(n)}function w0(n){console.error(n)}function E0(n){wu(n)}function Fu(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function T0(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function zf(n,s,a){return a=gs(a),a.tag=3,a.payload={element:null},a.callback=function(){Fu(n,s)},a}function S0(n){return n=gs(n),n.tag=3,n}function N0(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;n.payload=function(){return f(p)},n.callback=function(){T0(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){T0(s,a,l),typeof f!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function y1(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&xo(s,a,f,!0),a=ar.current,a!==null){switch(a.tag){case 31:case 13:return Cr===null?rh():a.alternate===null&&Lt===0&&(Lt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Du?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),hp(n,l,f)),!1;case 22:return a.flags|=65536,l===Du?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),hp(n,l,f)),!1}throw Error(i(435,a.tag))}return hp(n,l,f),rh(),!1}if(We)return s=ar.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==sf&&(n=Error(i(422),{cause:l}),Ol(Tr(n,a)))):(l!==sf&&(s=Error(i(423),{cause:l}),Ol(Tr(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Tr(l,a),f=zf(n.stateNode,l,f),gf(n,f),Lt!==4&&(Lt=2)),!1;var p=Error(i(520),{cause:l});if(p=Tr(p,a),Zl===null?Zl=[p]:Zl.push(p),Lt!==4&&(Lt=2),s===null)return!0;l=Tr(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=zf(a.stateNode,l,n),gf(a,n),!1;case 1:if(s=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Es===null||!Es.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=S0(f),N0(f,n,a,l),gf(a,f),!1}a=a.return}while(a!==null);return!1}var Bf=Error(i(461)),Wt=!1;function bn(n,s,a,l){s.child=n===null?ky(s,null,a,l):Ra(s,n.child,a,l)}function A0(n,s,a,l,f){a=a.render;var p=s.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return Sa(s),l=wf(n,s,a,b,p,f),T=Ef(),n!==null&&!Wt?(Tf(n,s,f),Di(n,s,f)):(We&&T&&nf(s),s.flags|=1,bn(n,s,l,f),s.child)}function C0(n,s,a,l,f){if(n===null){var p=a.type;return typeof p=="function"&&!Zd(p)&&p.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=p,R0(n,s,p,l,f)):(n=Nu(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!Kf(n,f)){var b=p.memoizedProps;if(a=a.compare,a=a!==null?a:Il,a(b,l)&&n.ref===s.ref)return Di(n,s,f)}return s.flags|=1,n=Ni(p,l),n.ref=s.ref,n.return=s,s.child=n}function R0(n,s,a,l,f){if(n!==null){var p=n.memoizedProps;if(Il(p,l)&&n.ref===s.ref)if(Wt=!1,s.pendingProps=l=p,Kf(n,f))(n.flags&131072)!==0&&(Wt=!0);else return s.lanes=n.lanes,Di(n,s,f)}return Hf(n,s,a,l,f)}function k0(n,s,a,l){var f=l.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,s.child=null;return I0(n,s,p,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&ku(s,p!==null?p.cachePool:null),p!==null?jy(s,p):vf(),Oy(s);else return l=s.lanes=536870912,I0(n,s,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(ku(s,p.cachePool),jy(s,p),bs(),s.memoizedState=null):(n!==null&&ku(s,null),vf(),bs());return bn(n,s,f,a),s.child}function Yl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function I0(n,s,a,l,f){var p=df();return p=p===null?null:{parent:Xt._currentValue,pool:p},s.memoizedState={baseLanes:a,cachePool:p},n!==null&&ku(s,null),vf(),Oy(s),n!==null&&xo(n,s,l,!0),s.childLanes=f,null}function Yu(n,s){return s=Qu({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function D0(n,s,a){return Ra(s,n.child,null,a),n=Yu(s,s.pendingProps),n.flags|=2,or(s),s.memoizedState=null,n}function v1(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(We){if(l.mode==="hidden")return n=Yu(s,l),s.lanes=536870912,Yl(null,n);if(xf(s),(n=wt)?(n=qv(n,Ar),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:hs!==null?{id:ai,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},a=my(n),a.return=s,s.child=a,yn=s,wt=null)):n=null,n===null)throw fs(s);return s.lanes=536870912,null}return Yu(s,l)}var p=n.memoizedState;if(p!==null){var b=p.dehydrated;if(xf(s),f)if(s.flags&256)s.flags&=-257,s=D0(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Wt||xo(n,s,a,!1),f=(a&n.childLanes)!==0,Wt||f){if(l=mt,l!==null&&(b=yr(l,a),b!==0&&b!==p.retryLane))throw p.retryLane=b,_a(n,b),$n(l,n,b),Bf;rh(),s=D0(n,s,a)}else n=p.treeContext,wt=Rr(b.nextSibling),yn=s,We=!0,ds=null,Ar=!1,n!==null&&vy(s,n),s=Yu(s,l),s.flags|=4096;return s}return n=Ni(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function $u(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Hf(n,s,a,l,f){return Sa(s),a=wf(n,s,a,l,void 0,f),l=Ef(),n!==null&&!Wt?(Tf(n,s,f),Di(n,s,f)):(We&&l&&nf(s),s.flags|=1,bn(n,s,a,f),s.child)}function j0(n,s,a,l,f,p){return Sa(s),s.updateQueue=null,a=My(s,l,a,f),Py(n),l=Ef(),n!==null&&!Wt?(Tf(n,s,p),Di(n,s,p)):(We&&l&&nf(s),s.flags|=1,bn(n,s,a,p),s.child)}function O0(n,s,a,l,f){if(Sa(s),s.stateNode===null){var p=go,b=a.contextType;typeof b=="object"&&b!==null&&(p=vn(b)),p=new a(l,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Uf,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=l,p.state=s.memoizedState,p.refs={},pf(s),b=a.contextType,p.context=typeof b=="object"&&b!==null?vn(b):go,p.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Vf(s,a,b,l),p.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&Uf.enqueueReplaceState(p,p.state,null),Bl(s,l,p,f),zl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){p=s.stateNode;var T=s.memoizedProps,I=Ia(a,T);p.props=I;var H=p.context,K=a.contextType;b=go,typeof K=="object"&&K!==null&&(b=vn(K));var W=a.getDerivedStateFromProps;K=typeof W=="function"||typeof p.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,K||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T||H!==b)&&x0(s,p,l,b),ms=!1;var G=s.memoizedState;p.state=G,Bl(s,l,p,f),zl(),H=s.memoizedState,T||G!==H||ms?(typeof W=="function"&&(Vf(s,a,W,l),H=s.memoizedState),(I=ms||b0(s,a,I,l,G,H,b))?(K||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=H),p.props=l,p.state=H,p.context=b,l=I):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{p=s.stateNode,mf(n,s),b=s.memoizedProps,K=Ia(a,b),p.props=K,W=s.pendingProps,G=p.context,H=a.contextType,I=go,typeof H=="object"&&H!==null&&(I=vn(H)),T=a.getDerivedStateFromProps,(H=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==W||G!==I)&&x0(s,p,l,I),ms=!1,G=s.memoizedState,p.state=G,Bl(s,l,p,f),zl();var F=s.memoizedState;b!==W||G!==F||ms||n!==null&&n.dependencies!==null&&Cu(n.dependencies)?(typeof T=="function"&&(Vf(s,a,T,l),F=s.memoizedState),(K=ms||b0(s,a,K,l,G,F,I)||n!==null&&n.dependencies!==null&&Cu(n.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,F,I),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,F,I)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=F),p.props=l,p.state=F,p.context=I,l=K):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),l=!1)}return p=l,$u(n,s),l=(s.flags&128)!==0,p||l?(p=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&l?(s.child=Ra(s,n.child,null,f),s.child=Ra(s,null,a,f)):bn(n,s,a,f),s.memoizedState=p.state,n=s.child):n=Di(n,s,f),n}function P0(n,s,a,l){return Ea(),s.flags|=256,bn(n,s,a,l),s.child}var Gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qf(n){return{baseLanes:n,cachePool:Ty()}}function Ff(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=cr),n}function M0(n,s,a){var l=s.pendingProps,f=!1,p=(s.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(Ht.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,n===null){if(We){if(f?vs(s):bs(),(n=wt)?(n=qv(n,Ar),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:hs!==null?{id:ai,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},a=my(n),a.return=s,s.child=a,yn=s,wt=null)):n=null,n===null)throw fs(s);return Ap(n)?s.lanes=32:s.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(bs(),f=s.mode,T=Qu({mode:"hidden",children:T},f),l=wa(l,f,a,null),T.return=s,l.return=s,T.sibling=l,s.child=T,l=s.child,l.memoizedState=qf(a),l.childLanes=Ff(n,b,a),s.memoizedState=Gf,Yl(null,l)):(vs(s),Yf(s,T))}var I=n.memoizedState;if(I!==null&&(T=I.dehydrated,T!==null)){if(p)s.flags&256?(vs(s),s.flags&=-257,s=$f(n,s,a)):s.memoizedState!==null?(bs(),s.child=n.child,s.flags|=128,s=null):(bs(),T=l.fallback,f=s.mode,l=Qu({mode:"visible",children:l.children},f),T=wa(T,f,a,null),T.flags|=2,l.return=s,T.return=s,l.sibling=T,s.child=l,Ra(s,n.child,null,a),l=s.child,l.memoizedState=qf(a),l.childLanes=Ff(n,b,a),s.memoizedState=Gf,s=Yl(null,l));else if(vs(s),Ap(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var H=b.dgst;b=H,l=Error(i(419)),l.stack="",l.digest=b,Ol({value:l,source:null,stack:null}),s=$f(n,s,a)}else if(Wt||xo(n,s,a,!1),b=(a&n.childLanes)!==0,Wt||b){if(b=mt,b!==null&&(l=yr(b,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,_a(n,l),$n(b,n,l),Bf;Np(T)||rh(),s=$f(n,s,a)}else Np(T)?(s.flags|=192,s.child=n.child,s=null):(n=I.treeContext,wt=Rr(T.nextSibling),yn=s,We=!0,ds=null,Ar=!1,n!==null&&vy(s,n),s=Yf(s,l.children),s.flags|=4096);return s}return f?(bs(),T=l.fallback,f=s.mode,I=n.child,H=I.sibling,l=Ni(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,H!==null?T=Ni(H,T):(T=wa(T,f,a,null),T.flags|=2),T.return=s,l.return=s,l.sibling=T,s.child=l,Yl(null,l),l=s.child,T=n.child.memoizedState,T===null?T=qf(a):(f=T.cachePool,f!==null?(I=Xt._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=Ty(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=Ff(n,b,a),s.memoizedState=Gf,Yl(n.child,l)):(vs(s),a=n.child,n=a.sibling,a=Ni(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(b=s.deletions,b===null?(s.deletions=[n],s.flags|=16):b.push(n)),s.child=a,s.memoizedState=null,a)}function Yf(n,s){return s=Qu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Qu(n,s){return n=sr(22,n,null,s),n.lanes=0,n}function $f(n,s,a){return Ra(s,n.child,null,a),n=Yf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function L0(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),lf(n.return,s,a)}function Qf(n,s,a,l,f,p){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:p}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=p)}function V0(n,s,a){var l=s.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var b=Ht.current,T=(b&2)!==0;if(T?(b=b&1|2,s.flags|=128):b&=1,ue(Ht,b),bn(n,s,l,a),l=We?jl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&L0(n,a,s);else if(n.tag===19)L0(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Mu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Qf(s,!1,f,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Mu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Qf(s,!0,a,null,p,l);break;case"together":Qf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Di(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ws|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(xo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,a=Ni(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ni(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Kf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Cu(n)))}function b1(n,s,a){switch(s.tag){case 3:te(s,s.stateNode.containerInfo),ps(s,Xt,n.memoizedState.cache),Ea();break;case 27:case 5:Me(s);break;case 4:te(s,s.stateNode.containerInfo);break;case 10:ps(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,xf(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(vs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?M0(n,s,a):(vs(s),n=Di(n,s,a),n!==null?n.sibling:null);vs(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(xo(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return V0(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Ht,Ht.current),l)break;return null;case 22:return s.lanes=0,k0(n,s,a,s.pendingProps);case 24:ps(s,Xt,n.memoizedState.cache)}return Di(n,s,a)}function U0(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Wt=!0;else{if(!Kf(n,a)&&(s.flags&128)===0)return Wt=!1,b1(n,s,a);Wt=(n.flags&131072)!==0}else Wt=!1,We&&(s.flags&1048576)!==0&&yy(s,jl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(n=Aa(s.elementType),s.type=n,typeof n=="function")Zd(n)?(l=Ia(n,l),s.tag=1,s=O0(null,s,n,l,a)):(s.tag=0,s=Hf(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===_e){s.tag=11,s=A0(null,s,n,l,a);break e}else if(f===C){s.tag=14,s=C0(null,s,n,l,a);break e}}throw s=it(n)||n,Error(i(306,s,""))}}return s;case 0:return Hf(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Ia(l,s.pendingProps),O0(n,s,l,f,a);case 3:e:{if(te(s,s.stateNode.containerInfo),n===null)throw Error(i(387));l=s.pendingProps;var p=s.memoizedState;f=p.element,mf(n,s),Bl(s,l,null,a);var b=s.memoizedState;if(l=b.cache,ps(s,Xt,l),l!==p.cache&&cf(s,[Xt],a,!0),zl(),l=b.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=P0(n,s,l,a);break e}else if(l!==f){f=Tr(Error(i(424)),s),Ol(f),s=P0(n,s,l,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(wt=Rr(n.firstChild),yn=s,We=!0,ds=null,Ar=!0,a=ky(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ea(),l===f){s=Di(n,s,a);break e}bn(n,s,l,a)}s=s.child}return s;case 26:return $u(n,s),n===null?(a=Xv(s.type,null,s.pendingProps,null))?s.memoizedState=a:We||(a=s.type,n=s.pendingProps,l=uh(je.current).createElement(a),l[Ct]=s,l[Ot]=n,xn(l,a,n),re(l),s.stateNode=l):s.memoizedState=Xv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Me(s),n===null&&We&&(l=s.stateNode=$v(s.type,s.pendingProps,je.current),yn=s,Ar=!0,f=wt,As(s.type)?(Cp=f,wt=Rr(l.firstChild)):wt=f),bn(n,s,s.pendingProps.children,a),$u(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&We&&((f=l=wt)&&(l=K1(l,s.type,s.pendingProps,Ar),l!==null?(s.stateNode=l,yn=s,wt=Rr(l.firstChild),Ar=!1,f=!0):f=!1),f||fs(s)),Me(s),f=s.type,p=s.pendingProps,b=n!==null?n.memoizedProps:null,l=p.children,Ep(f,p)?l=null:b!==null&&Ep(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=wf(n,s,u1,null,null,a),oc._currentValue=f),$u(n,s),bn(n,s,l,a),s.child;case 6:return n===null&&We&&((n=a=wt)&&(a=X1(a,s.pendingProps,Ar),a!==null?(s.stateNode=a,yn=s,wt=null,n=!0):n=!1),n||fs(s)),null;case 13:return M0(n,s,a);case 4:return te(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Ra(s,null,l,a):bn(n,s,l,a),s.child;case 11:return A0(n,s,s.type,s.pendingProps,a);case 7:return bn(n,s,s.pendingProps,a),s.child;case 8:return bn(n,s,s.pendingProps.children,a),s.child;case 12:return bn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,ps(s,s.type,l.value),bn(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Sa(s),f=vn(f),l=l(f),s.flags|=1,bn(n,s,l,a),s.child;case 14:return C0(n,s,s.type,s.pendingProps,a);case 15:return R0(n,s,s.type,s.pendingProps,a);case 19:return V0(n,s,a);case 31:return v1(n,s,a);case 22:return k0(n,s,a,s.pendingProps);case 24:return Sa(s),l=vn(Xt),n===null?(f=df(),f===null&&(f=mt,p=uf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),s.memoizedState={parent:l,cache:f},pf(s),ps(s,Xt,f)):((n.lanes&a)!==0&&(mf(n,s),Bl(s,null,null,a),zl()),f=n.memoizedState,p=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ps(s,Xt,l)):(l=p.cache,ps(s,Xt,l),l!==f.cache&&cf(s,[Xt],a,!0))),bn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ji(n){n.flags|=4}function Xf(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(dv())n.flags|=8192;else throw Ca=Du,ff}else n.flags&=-16777217}function z0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!tb(s))if(dv())n.flags|=8192;else throw Ca=Du,ff}function Ku(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?oa():536870912,n.lanes|=s,Do|=s)}function $l(n,s){if(!We)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Et(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function x1(n,s,a){var l=s.pendingProps;switch(rf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return Et(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ri(Xt),ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(bo(s)?ji(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,af())),Et(s),null;case 26:var f=s.type,p=s.memoizedState;return n===null?(ji(s),p!==null?(Et(s),z0(s,p)):(Et(s),Xf(s,f,null,l,a))):p?p!==n.memoizedState?(ji(s),Et(s),z0(s,p)):(Et(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&ji(s),Et(s),Xf(s,f,n,l,a)),null;case 27:if(St(s),a=je.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ji(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return Et(s),null}n=he.current,bo(s)?by(s):(n=$v(f,l,a),s.stateNode=n,ji(s))}return Et(s),null;case 5:if(St(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ji(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return Et(s),null}if(p=he.current,bo(s))by(s);else{var b=uh(je.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}p[Ct]=s,p[Ot]=l;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=p;e:switch(xn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ji(s)}}return Et(s),Xf(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&ji(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(n=je.current,bo(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=yn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ct]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Mv(n.nodeValue,a)),n||fs(s,!0)}else n=uh(n).createTextNode(l),n[Ct]=s,s.stateNode=n}return Et(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=bo(s),a!==null){if(n===null){if(!l)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ct]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),n=!1}else a=af(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(or(s),s):(or(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Et(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=bo(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ct]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),f=!1}else f=af(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(or(s),s):(or(s),null)}return or(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Ku(s,s.updateQueue),Et(s),null);case 4:return ae(),n===null&&vp(s.stateNode.containerInfo),Et(s),null;case 10:return Ri(s.type),Et(s),null;case 19:if($(Ht),l=s.memoizedState,l===null)return Et(s),null;if(f=(s.flags&128)!==0,p=l.rendering,p===null)if(f)$l(l,!1);else{if(Lt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Mu(n),p!==null){for(s.flags|=128,$l(l,!1),n=p.updateQueue,s.updateQueue=n,Ku(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)py(a,n),a=a.sibling;return ue(Ht,Ht.current&1|2),We&&Ai(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&le()>eh&&(s.flags|=128,f=!0,$l(l,!1),s.lanes=4194304)}else{if(!f)if(n=Mu(p),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Ku(s,n),$l(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!We)return Et(s),null}else 2*le()-l.renderingStartTime>eh&&a!==536870912&&(s.flags|=128,f=!0,$l(l,!1),s.lanes=4194304);l.isBackwards?(p.sibling=s.child,s.child=p):(n=l.last,n!==null?n.sibling=p:s.child=p,l.last=p)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=le(),n.sibling=null,a=Ht.current,ue(Ht,f?a&1|2:a&1),We&&Ai(s,l.treeForkCount),n):(Et(s),null);case 22:case 23:return or(s),bf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),a=s.updateQueue,a!==null&&Ku(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&$(Na),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ri(Xt),Et(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function _1(n,s){switch(rf(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ri(Xt),ae(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return St(s),null;case 31:if(s.memoizedState!==null){if(or(s),s.alternate===null)throw Error(i(340));Ea()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(or(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ea()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return $(Ht),null;case 4:return ae(),null;case 10:return Ri(s.type),null;case 22:case 23:return or(s),bf(),n!==null&&$(Na),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ri(Xt),null;case 25:return null;default:return null}}function B0(n,s){switch(rf(s),s.tag){case 3:Ri(Xt),ae();break;case 26:case 27:case 5:St(s);break;case 4:ae();break;case 31:s.memoizedState!==null&&or(s);break;case 13:or(s);break;case 19:$(Ht);break;case 10:Ri(s.type);break;case 22:case 23:or(s),bf(),n!==null&&$(Na);break;case 24:Ri(Xt)}}function Ql(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var p=a.create,b=a.inst;l=p(),b.destroy=l}a=a.next}while(a!==f)}}catch(T){ut(s,s.return,T)}}function xs(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&n)===n){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,f=s;var I=a,H=T;try{H()}catch(K){ut(f,I,K)}}}l=l.next}while(l!==p)}}catch(K){ut(s,s.return,K)}}function H0(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{Dy(s,a)}catch(l){ut(n,n.return,l)}}}function G0(n,s,a){a.props=Ia(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ut(n,s,l)}}function Kl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){ut(n,s,f)}}function li(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ut(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ut(n,s,f)}else a.current=null}function q0(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ut(n,n.return,f)}}function Jf(n,s,a){try{var l=n.stateNode;G1(l,n.type,a,s),l[Ot]=s}catch(f){ut(n,n.return,f)}}function F0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&As(n.type)||n.tag===4}function Wf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||F0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&As(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zf(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Pr));else if(l!==4&&(l===27&&As(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Zf(n,s,a),n=n.sibling;n!==null;)Zf(n,s,a),n=n.sibling}function Xu(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&As(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Xu(n,s,a),n=n.sibling;n!==null;)Xu(n,s,a),n=n.sibling}function Y0(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);xn(s,l,a),s[Ct]=n,s[Ot]=a}catch(p){ut(n,n.return,p)}}var Oi=!1,Zt=!1,ep=!1,$0=typeof WeakSet=="function"?WeakSet:Set,un=null;function w1(n,s){if(n=n.containerInfo,_p=yh,n=sy(n),Yd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var b=0,T=-1,I=-1,H=0,K=0,W=n,G=null;t:for(;;){for(var F;W!==a||f!==0&&W.nodeType!==3||(T=b+f),W!==p||l!==0&&W.nodeType!==3||(I=b+l),W.nodeType===3&&(b+=W.nodeValue.length),(F=W.firstChild)!==null;)G=W,W=F;for(;;){if(W===n)break t;if(G===a&&++H===f&&(T=b),G===p&&++K===l&&(I=b),(F=W.nextSibling)!==null)break;W=G,G=W.parentNode}W=F}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(wp={focusedElem:n,selectionRange:a},yh=!1,un=s;un!==null;)if(s=un,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,un=n;else for(;un!==null;){switch(s=un,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=s,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var me=Ia(a.type,f);n=l.getSnapshotBeforeUpdate(me,p),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){ut(a,a.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Sp(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Sp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,un=n;break}un=s.return}}function Q0(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(n,a),l&4&&Ql(5,a);break;case 1:if(Mi(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(b){ut(a,a.return,b)}else{var f=Ia(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(b){ut(a,a.return,b)}}l&64&&H0(a),l&512&&Kl(a,a.return);break;case 3:if(Mi(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Dy(n,s)}catch(b){ut(a,a.return,b)}}break;case 27:s===null&&l&4&&Y0(a);case 26:case 5:Mi(n,a),s===null&&l&4&&q0(a),l&512&&Kl(a,a.return);break;case 12:Mi(n,a);break;case 31:Mi(n,a),l&4&&J0(n,a);break;case 13:Mi(n,a),l&4&&W0(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=I1.bind(null,a),J1(n,a))));break;case 22:if(l=a.memoizedState!==null||Oi,!l){s=s!==null&&s.memoizedState!==null||Zt,f=Oi;var p=Zt;Oi=l,(Zt=s)&&!p?Li(n,a,(a.subtreeFlags&8772)!==0):Mi(n,a),Oi=f,Zt=p}break;case 30:break;default:Mi(n,a)}}function K0(n){var s=n.alternate;s!==null&&(n.alternate=null,K0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&wi(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var kt=null,Gn=!1;function Pi(n,s,a){for(a=a.child;a!==null;)X0(n,s,a),a=a.sibling}function X0(n,s,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:Zt||li(a,s),Pi(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Zt||li(a,s);var l=kt,f=Gn;As(a.type)&&(kt=a.stateNode,Gn=!1),Pi(n,s,a),ic(a.stateNode),kt=l,Gn=f;break;case 5:Zt||li(a,s);case 6:if(l=kt,f=Gn,kt=null,Pi(n,s,a),kt=l,Gn=f,kt!==null)if(Gn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(a.stateNode)}catch(p){ut(a,s,p)}else try{kt.removeChild(a.stateNode)}catch(p){ut(a,s,p)}break;case 18:kt!==null&&(Gn?(n=kt,Hv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),zo(n)):Hv(kt,a.stateNode));break;case 4:l=kt,f=Gn,kt=a.stateNode.containerInfo,Gn=!0,Pi(n,s,a),kt=l,Gn=f;break;case 0:case 11:case 14:case 15:xs(2,a,s),Zt||xs(4,a,s),Pi(n,s,a);break;case 1:Zt||(li(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&G0(a,s,l)),Pi(n,s,a);break;case 21:Pi(n,s,a);break;case 22:Zt=(l=Zt)||a.memoizedState!==null,Pi(n,s,a),Zt=l;break;default:Pi(n,s,a)}}function J0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{zo(n)}catch(a){ut(s,s.return,a)}}}function W0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{zo(n)}catch(a){ut(s,s.return,a)}}function E1(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new $0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new $0),s;default:throw Error(i(435,n.tag))}}function Ju(n,s){var a=E1(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=D1.bind(null,n,l);l.then(f,f)}})}function qn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=n,b=s,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(As(T.type)){kt=T.stateNode,Gn=!1;break e}break;case 5:kt=T.stateNode,Gn=!1;break e;case 3:case 4:kt=T.stateNode.containerInfo,Gn=!0;break e}T=T.return}if(kt===null)throw Error(i(160));X0(p,b,f),kt=null,Gn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Z0(s,n),s=s.sibling}var Br=null;function Z0(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:qn(s,n),Fn(n),l&4&&(xs(3,n,n.return),Ql(3,n),xs(5,n,n.return));break;case 1:qn(s,n),Fn(n),l&512&&(Zt||a===null||li(a,a.return)),l&64&&Oi&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Br;if(qn(s,n),Fn(n),l&512&&(Zt||a===null||li(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[mn]||p[Ct]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),xn(p,l,a),p[Ct]=n,re(p),l=p;break e;case"link":var b=Zv("link","href",f).get(l+(a.href||""));if(b){for(var T=0;T<b.length;T++)if(p=b[T],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(T,1);break t}}p=f.createElement(l),xn(p,l,a),f.head.appendChild(p);break;case"meta":if(b=Zv("meta","content",f).get(l+(a.content||""))){for(T=0;T<b.length;T++)if(p=b[T],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(T,1);break t}}p=f.createElement(l),xn(p,l,a),f.head.appendChild(p);break;default:throw Error(i(468,l))}p[Ct]=n,re(p),l=p}n.stateNode=l}else eb(f,n.type,n.stateNode);else n.stateNode=Wv(f,l,n.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?eb(f,n.type,n.stateNode):Wv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Jf(n,n.memoizedProps,a.memoizedProps)}break;case 27:qn(s,n),Fn(n),l&512&&(Zt||a===null||li(a,a.return)),a!==null&&l&4&&Jf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(qn(s,n),Fn(n),l&512&&(Zt||a===null||li(a,a.return)),n.flags&32){f=n.stateNode;try{Hn(f,"")}catch(me){ut(n,n.return,me)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Jf(n,f,a!==null?a.memoizedProps:f)),l&1024&&(ep=!0);break;case 6:if(qn(s,n),Fn(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(me){ut(n,n.return,me)}}break;case 3:if(fh=null,f=Br,Br=hh(s.containerInfo),qn(s,n),Br=f,Fn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{zo(s.containerInfo)}catch(me){ut(n,n.return,me)}ep&&(ep=!1,ev(n));break;case 4:l=Br,Br=hh(n.stateNode.containerInfo),qn(s,n),Fn(n),Br=l;break;case 12:qn(s,n),Fn(n);break;case 31:qn(s,n),Fn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Ju(n,l)));break;case 13:qn(s,n),Fn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zu=le()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Ju(n,l)));break;case 22:f=n.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,H=Oi,K=Zt;if(Oi=H||f,Zt=K||I,qn(s,n),Zt=K,Oi=H,Fn(n),l&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||I||Oi||Zt||Da(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){I=a=s;try{if(p=I.stateNode,f)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=I.stateNode;var W=I.memoizedProps.style,G=W!=null&&W.hasOwnProperty("display")?W.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(me){ut(I,I.return,me)}}}else if(s.tag===6){if(a===null){I=s;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(me){ut(I,I.return,me)}}}else if(s.tag===18){if(a===null){I=s;try{var F=I.stateNode;f?Gv(F,!0):Gv(I.stateNode,!1)}catch(me){ut(I,I.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ju(n,a))));break;case 19:qn(s,n),Fn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Ju(n,l)));break;case 30:break;case 21:break;default:qn(s,n),Fn(n)}}function Fn(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(F0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,p=Wf(n);Xu(n,p,f);break;case 5:var b=a.stateNode;a.flags&32&&(Hn(b,""),a.flags&=-33);var T=Wf(n);Xu(n,T,b);break;case 3:case 4:var I=a.stateNode.containerInfo,H=Wf(n);Zf(n,H,I);break;default:throw Error(i(161))}}catch(K){ut(n,n.return,K)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ev(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;ev(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Mi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Q0(n,s.alternate,s),s=s.sibling}function Da(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:xs(4,s,s.return),Da(s);break;case 1:li(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&G0(s,s.return,a),Da(s);break;case 27:ic(s.stateNode);case 26:case 5:li(s,s.return),Da(s);break;case 22:s.memoizedState===null&&Da(s);break;case 30:Da(s);break;default:Da(s)}n=n.sibling}}function Li(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,p=s,b=p.flags;switch(p.tag){case 0:case 11:case 15:Li(f,p,a),Ql(4,p);break;case 1:if(Li(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){ut(l,l.return,H)}if(l=p,f=l.updateQueue,f!==null){var T=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)Iy(I[f],T)}catch(H){ut(l,l.return,H)}}a&&b&64&&H0(p),Kl(p,p.return);break;case 27:Y0(p);case 26:case 5:Li(f,p,a),a&&l===null&&b&4&&q0(p),Kl(p,p.return);break;case 12:Li(f,p,a);break;case 31:Li(f,p,a),a&&b&4&&J0(f,p);break;case 13:Li(f,p,a),a&&b&4&&W0(f,p);break;case 22:p.memoizedState===null&&Li(f,p,a),Kl(p,p.return);break;case 30:break;default:Li(f,p,a)}s=s.sibling}}function tp(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Pl(a))}function np(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Pl(n))}function Hr(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tv(n,s,a,l),s=s.sibling}function tv(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Hr(n,s,a,l),f&2048&&Ql(9,s);break;case 1:Hr(n,s,a,l);break;case 3:Hr(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Pl(n)));break;case 12:if(f&2048){Hr(n,s,a,l),n=s.stateNode;try{var p=s.memoizedProps,b=p.id,T=p.onPostCommit;typeof T=="function"&&T(b,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){ut(s,s.return,I)}}else Hr(n,s,a,l);break;case 31:Hr(n,s,a,l);break;case 13:Hr(n,s,a,l);break;case 23:break;case 22:p=s.stateNode,b=s.alternate,s.memoizedState!==null?p._visibility&2?Hr(n,s,a,l):Xl(n,s):p._visibility&2?Hr(n,s,a,l):(p._visibility|=2,Ro(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&tp(b,s);break;case 24:Hr(n,s,a,l),f&2048&&np(s.alternate,s);break;default:Hr(n,s,a,l)}}function Ro(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,b=s,T=a,I=l,H=b.flags;switch(b.tag){case 0:case 11:case 15:Ro(p,b,T,I,f),Ql(8,b);break;case 23:break;case 22:var K=b.stateNode;b.memoizedState!==null?K._visibility&2?Ro(p,b,T,I,f):Xl(p,b):(K._visibility|=2,Ro(p,b,T,I,f)),f&&H&2048&&tp(b.alternate,b);break;case 24:Ro(p,b,T,I,f),f&&H&2048&&np(b.alternate,b);break;default:Ro(p,b,T,I,f)}s=s.sibling}}function Xl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:Xl(a,l),f&2048&&tp(l.alternate,l);break;case 24:Xl(a,l),f&2048&&np(l.alternate,l);break;default:Xl(a,l)}s=s.sibling}}var Jl=8192;function ko(n,s,a){if(n.subtreeFlags&Jl)for(n=n.child;n!==null;)nv(n,s,a),n=n.sibling}function nv(n,s,a){switch(n.tag){case 26:ko(n,s,a),n.flags&Jl&&n.memoizedState!==null&&cS(a,Br,n.memoizedState,n.memoizedProps);break;case 5:ko(n,s,a);break;case 3:case 4:var l=Br;Br=hh(n.stateNode.containerInfo),ko(n,s,a),Br=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Jl,Jl=16777216,ko(n,s,a),Jl=l):ko(n,s,a));break;default:ko(n,s,a)}}function rv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Wl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];un=l,sv(l,n)}rv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)iv(n),n=n.sibling}function iv(n){switch(n.tag){case 0:case 11:case 15:Wl(n),n.flags&2048&&xs(9,n,n.return);break;case 3:Wl(n);break;case 12:Wl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Wu(n)):Wl(n);break;default:Wl(n)}}function Wu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];un=l,sv(l,n)}rv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:xs(8,s,s.return),Wu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Wu(s));break;default:Wu(s)}n=n.sibling}}function sv(n,s){for(;un!==null;){var a=un;switch(a.tag){case 0:case 11:case 15:xs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,un=l;else e:for(a=n;un!==null;){l=un;var f=l.sibling,p=l.return;if(K0(l),l===a){un=null;break e}if(f!==null){f.return=p,un=f;break e}un=p}}}var T1={getCacheForType:function(n){var s=vn(Xt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return vn(Xt).controller.signal}},S1=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,Fe=null,$e=0,ct=0,lr=null,_s=!1,Io=!1,rp=!1,Vi=0,Lt=0,ws=0,ja=0,ip=0,cr=0,Do=0,Zl=null,Yn=null,sp=!1,Zu=0,av=0,eh=1/0,th=null,Es=null,an=0,Ts=null,jo=null,Ui=0,ap=0,op=null,ov=null,ec=0,lp=null;function ur(){return(at&2)!==0&&$e!==0?$e&-$e:Y.T!==null?pp():to()}function lv(){if(cr===0)if(($e&536870912)===0||We){var n=mr;mr<<=1,(mr&3932160)===0&&(mr=262144),cr=n}else cr=536870912;return n=ar.current,n!==null&&(n.flags|=32),cr}function $n(n,s,a){(n===mt&&(ct===2||ct===9)||n.cancelPendingCommit!==null)&&(Oo(n,0),Ss(n,$e,cr,!1)),Or(n,a),((at&2)===0||n!==mt)&&(n===mt&&((at&2)===0&&(ja|=a),Lt===4&&Ss(n,$e,cr,!1)),ci(n))}function cv(n,s,a){if((at&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Un(n,s),f=l?C1(n,s):up(n,s,!0),p=l;do{if(f===0){Io&&!l&&Ss(n,s,0,!1);break}else{if(a=n.current.alternate,p&&!N1(a)){f=up(n,s,!1),p=!1;continue}if(f===2){if(p=s,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var T=n;f=Zl;var I=T.current.memoizedState.isDehydrated;if(I&&(Oo(T,b).flags|=256),b=up(T,b,!1),b!==2){if(rp&&!I){T.errorRecoveryDisabledLanes|=p,ja|=p,f=4;break e}p=Yn,Yn=f,p!==null&&(Yn===null?Yn=p:Yn.push.apply(Yn,p))}f=b}if(p=!1,f!==2)continue}}if(f===1){Oo(n,0),Ss(n,s,0,!0);break}e:{switch(l=n,p=f,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ss(l,s,cr,!_s);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Zu+300-le(),10<f)){if(Ss(l,s,cr,!_s),er(l,0,!0)!==0)break e;Ui=s,l.timeoutHandle=zv(uv.bind(null,l,a,Yn,th,sp,s,cr,ja,Do,_s,p,"Throttled",-0,0),f);break e}uv(l,a,Yn,th,sp,s,cr,ja,Do,_s,p,null,-0,0)}}break}while(!0);ci(n)}function uv(n,s,a,l,f,p,b,T,I,H,K,W,G,F){if(n.timeoutHandle=-1,W=s.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pr},nv(s,p,W);var me=(p&62914560)===p?Zu-le():(p&4194048)===p?av-le():0;if(me=uS(W,me),me!==null){Ui=p,n.cancelPendingCommit=me(vv.bind(null,n,s,p,a,l,f,b,T,I,K,W,null,G,F)),Ss(n,p,b,!H);return}}vv(n,s,p,a,l,f,b,T,I)}function N1(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!ir(p(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ss(n,s,a,l){s&=~ip,s&=~ja,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var p=31-At(f),b=1<<p;l[p]=-1,f&=~b}a!==0&&bi(n,a,s)}function nh(){return(at&6)===0?(tc(0),!1):!0}function cp(){if(Fe!==null){if(ct===0)var n=Fe.return;else n=Fe,Ci=Ta=null,Sf(n),To=null,Ll=0,n=Fe;for(;n!==null;)B0(n.alternate,n),n=n.return;Fe=null}}function Oo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Y1(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Ui=0,cp(),mt=n,Fe=a=Ni(n.current,null),$e=s,ct=0,lr=null,_s=!1,Io=Un(n,s),rp=!1,Do=cr=ip=ja=ws=Lt=0,Yn=Zl=null,sp=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-At(l),p=1<<f;s|=n[f],l&=~p}return Vi=s,Eu(),a}function hv(n,s){Ve=null,Y.H=Fl,s===Eo||s===Iu?(s=Ay(),ct=3):s===ff?(s=Ay(),ct=4):ct=s===Bf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,lr=s,Fe===null&&(Lt=1,Fu(n,Tr(s,n.current)))}function dv(){var n=ar.current;return n===null?!0:($e&4194048)===$e?Cr===null:($e&62914560)===$e||($e&536870912)!==0?n===Cr:!1}function fv(){var n=Y.H;return Y.H=Fl,n===null?Fl:n}function pv(){var n=Y.A;return Y.A=T1,n}function rh(){Lt=4,_s||($e&4194048)!==$e&&ar.current!==null||(Io=!0),(ws&134217727)===0&&(ja&134217727)===0||mt===null||Ss(mt,$e,cr,!1)}function up(n,s,a){var l=at;at|=2;var f=fv(),p=pv();(mt!==n||$e!==s)&&(th=null,Oo(n,s)),s=!1;var b=Lt;e:do try{if(ct!==0&&Fe!==null){var T=Fe,I=lr;switch(ct){case 8:cp(),b=6;break e;case 3:case 2:case 9:case 6:ar.current===null&&(s=!0);var H=ct;if(ct=0,lr=null,Po(n,T,I,H),a&&Io){b=0;break e}break;default:H=ct,ct=0,lr=null,Po(n,T,I,H)}}A1(),b=Lt;break}catch(K){hv(n,K)}while(!0);return s&&n.shellSuspendCounter++,Ci=Ta=null,at=l,Y.H=f,Y.A=p,Fe===null&&(mt=null,$e=0,Eu()),b}function A1(){for(;Fe!==null;)mv(Fe)}function C1(n,s){var a=at;at|=2;var l=fv(),f=pv();mt!==n||$e!==s?(th=null,eh=le()+500,Oo(n,s)):Io=Un(n,s);e:do try{if(ct!==0&&Fe!==null){s=Fe;var p=lr;t:switch(ct){case 1:ct=0,lr=null,Po(n,s,p,1);break;case 2:case 9:if(Sy(p)){ct=0,lr=null,gv(s);break}s=function(){ct!==2&&ct!==9||mt!==n||(ct=7),ci(n)},p.then(s,s);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Sy(p)?(ct=0,lr=null,gv(s)):(ct=0,lr=null,Po(n,s,p,7));break;case 5:var b=null;switch(Fe.tag){case 26:b=Fe.memoizedState;case 5:case 27:var T=Fe;if(b?tb(b):T.stateNode.complete){ct=0,lr=null;var I=T.sibling;if(I!==null)Fe=I;else{var H=T.return;H!==null?(Fe=H,ih(H)):Fe=null}break t}}ct=0,lr=null,Po(n,s,p,5);break;case 6:ct=0,lr=null,Po(n,s,p,6);break;case 8:cp(),Lt=6;break e;default:throw Error(i(462))}}R1();break}catch(K){hv(n,K)}while(!0);return Ci=Ta=null,Y.H=l,Y.A=f,at=a,Fe!==null?0:(mt=null,$e=0,Eu(),Lt)}function R1(){for(;Fe!==null&&!Wi();)mv(Fe)}function mv(n){var s=U0(n.alternate,n,Vi);n.memoizedProps=n.pendingProps,s===null?ih(n):Fe=s}function gv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=j0(a,s,s.pendingProps,s.type,void 0,$e);break;case 11:s=j0(a,s,s.pendingProps,s.type.render,s.ref,$e);break;case 5:Sf(s);default:B0(a,s),s=Fe=py(s,Vi),s=U0(a,s,Vi)}n.memoizedProps=n.pendingProps,s===null?ih(n):Fe=s}function Po(n,s,a,l){Ci=Ta=null,Sf(s),To=null,Ll=0;var f=s.return;try{if(y1(n,f,s,a,$e)){Lt=1,Fu(n,Tr(a,n.current)),Fe=null;return}}catch(p){if(f!==null)throw Fe=f,p;Lt=1,Fu(n,Tr(a,n.current)),Fe=null;return}s.flags&32768?(We||l===1?n=!0:Io||($e&536870912)!==0?n=!1:(_s=n=!0,(l===2||l===9||l===3||l===6)&&(l=ar.current,l!==null&&l.tag===13&&(l.flags|=16384))),yv(s,n)):ih(s)}function ih(n){var s=n;do{if((s.flags&32768)!==0){yv(s,_s);return}n=s.return;var a=x1(s.alternate,s,Vi);if(a!==null){Fe=a;return}if(s=s.sibling,s!==null){Fe=s;return}Fe=s=n}while(s!==null);Lt===0&&(Lt=5)}function yv(n,s){do{var a=_1(n.alternate,n);if(a!==null){a.flags&=32767,Fe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Fe=n;return}Fe=n=a}while(n!==null);Lt=6,Fe=null}function vv(n,s,a,l,f,p,b,T,I){n.cancelPendingCommit=null;do sh();while(an!==0);if((at&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=Jd,ml(n,a,p,b,T,I),n===mt&&(Fe=mt=null,$e=0),jo=s,Ts=n,Ui=a,ap=p,op=f,ov=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,j1(sn,function(){return Ev(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=oe.p,oe.p=2,b=at,at|=4;try{w1(n,s,a)}finally{at=b,oe.p=f,Y.T=l}}an=1,bv(),xv(),_v()}}function bv(){if(an===1){an=0;var n=Ts,s=jo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=oe.p;oe.p=2;var f=at;at|=4;try{Z0(s,n);var p=wp,b=sy(n.containerInfo),T=p.focusedElem,I=p.selectionRange;if(b!==T&&T&&T.ownerDocument&&iy(T.ownerDocument.documentElement,T)){if(I!==null&&Yd(T)){var H=I.start,K=I.end;if(K===void 0&&(K=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(K,T.value.length);else{var W=T.ownerDocument||document,G=W&&W.defaultView||window;if(G.getSelection){var F=G.getSelection(),me=T.textContent.length,Ne=Math.min(I.start,me),pt=I.end===void 0?Ne:Math.min(I.end,me);!F.extend&&Ne>pt&&(b=pt,pt=Ne,Ne=b);var U=ry(T,Ne),O=ry(T,pt);if(U&&O&&(F.rangeCount!==1||F.anchorNode!==U.node||F.anchorOffset!==U.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var B=W.createRange();B.setStart(U.node,U.offset),F.removeAllRanges(),Ne>pt?(F.addRange(B),F.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),F.addRange(B))}}}}for(W=[],F=T;F=F.parentNode;)F.nodeType===1&&W.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<W.length;T++){var J=W[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}yh=!!_p,wp=_p=null}finally{at=f,oe.p=l,Y.T=a}}n.current=s,an=2}}function xv(){if(an===2){an=0;var n=Ts,s=jo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=oe.p;oe.p=2;var f=at;at|=4;try{Q0(n,s.alternate,s)}finally{at=f,oe.p=l,Y.T=a}}an=3}}function _v(){if(an===4||an===3){an=0,Qr();var n=Ts,s=jo,a=Ui,l=ov;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?an=5:(an=0,jo=Ts=null,wv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Es=null),br(a),s=s.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Wn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Y.T,f=oe.p,oe.p=2,Y.T=null;try{for(var p=n.onRecoverableError,b=0;b<l.length;b++){var T=l[b];p(T.value,{componentStack:T.stack})}}finally{Y.T=s,oe.p=f}}(Ui&3)!==0&&sh(),ci(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===lp?ec++:(ec=0,lp=n):ec=0,tc(0)}}function wv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Pl(s)))}function sh(){return bv(),xv(),_v(),Ev()}function Ev(){if(an!==5)return!1;var n=Ts,s=ap;ap=0;var a=br(Ui),l=Y.T,f=oe.p;try{oe.p=32>a?32:a,Y.T=null,a=op,op=null;var p=Ts,b=Ui;if(an=0,jo=Ts=null,Ui=0,(at&6)!==0)throw Error(i(331));var T=at;if(at|=4,iv(p.current),tv(p,p.current,b,a),at=T,tc(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Wn,p)}catch{}return!0}finally{oe.p=f,Y.T=l,wv(n,s)}}function Tv(n,s,a){s=Tr(a,s),s=zf(n.stateNode,s,2),n=ys(n,s,2),n!==null&&(Or(n,2),ci(n))}function ut(n,s,a){if(n.tag===3)Tv(n,n,a);else for(;s!==null;){if(s.tag===3){Tv(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Es===null||!Es.has(l))){n=Tr(a,n),a=S0(2),l=ys(s,a,2),l!==null&&(N0(a,l,s,n),Or(l,2),ci(l));break}}s=s.return}}function hp(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new S1;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(rp=!0,f.add(a),n=k1.bind(null,n,s,a),s.then(n,n))}function k1(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,mt===n&&($e&a)===a&&(Lt===4||Lt===3&&($e&62914560)===$e&&300>le()-Zu?(at&2)===0&&Oo(n,0):ip|=a,Do===$e&&(Do=0)),ci(n)}function Sv(n,s){s===0&&(s=oa()),n=_a(n,s),n!==null&&(Or(n,s),ci(n))}function I1(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Sv(n,a)}function D1(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),Sv(n,a)}function j1(n,s){return It(n,s)}var ah=null,Mo=null,dp=!1,oh=!1,fp=!1,Ns=0;function ci(n){n!==Mo&&n.next===null&&(Mo===null?ah=Mo=n:Mo=Mo.next=n),oh=!0,dp||(dp=!0,P1())}function tc(n,s){if(!fp&&oh){fp=!0;do for(var a=!1,l=ah;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var b=l.suspendedLanes,T=l.pingedLanes;p=(1<<31-At(42|n)+1)-1,p&=f&~(b&~T),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Rv(l,p))}else p=$e,p=er(l,l===mt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Un(l,p)||(a=!0,Rv(l,p));l=l.next}while(a);fp=!1}}function O1(){Nv()}function Nv(){oh=dp=!1;var n=0;Ns!==0&&F1()&&(n=Ns);for(var s=le(),a=null,l=ah;l!==null;){var f=l.next,p=Av(l,s);p===0?(l.next=null,a===null?ah=f:a.next=f,f===null&&(Mo=a)):(a=l,(n!==0||(p&3)!==0)&&(oh=!0)),l=f}an!==0&&an!==5||tc(n),Ns!==0&&(Ns=0)}function Av(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-At(p),T=1<<b,I=f[b];I===-1?((T&a)===0||(T&l)!==0)&&(f[b]=eo(T,s)):I<=s&&(n.expiredLanes|=T),p&=~T}if(s=mt,a=$e,a=er(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(ct===2||ct===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&jr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Un(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&jr(l),br(a)){case 2:case 8:a=Jn;break;case 32:a=sn;break;case 268435456:a=vi;break;default:a=sn}return l=Cv.bind(null,n),a=It(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&jr(l),n.callbackPriority=2,n.callbackNode=null,2}function Cv(n,s){if(an!==0&&an!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(sh()&&n.callbackNode!==a)return null;var l=$e;return l=er(n,n===mt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(cv(n,l,s),Av(n,le()),n.callbackNode!=null&&n.callbackNode===a?Cv.bind(null,n):null)}function Rv(n,s){if(sh())return null;cv(n,s,!0)}function P1(){$1(function(){(at&6)!==0?It(Zi,O1):Nv()})}function pp(){if(Ns===0){var n=_o;n===0&&(n=Zn,Zn<<=1,(Zn&261888)===0&&(Zn=256)),Ns=n}return Ns}function kv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:so(""+n)}function Iv(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function M1(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var p=kv((f[Ot]||null).action),b=l.submitter;b&&(s=(s=b[Ot]||null)?kv(s.formAction):b.getAttribute("formAction"),s!==null&&(p=s,b=null));var T=new ni("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ns!==0){var I=b?Iv(f,b):new FormData(f);Of(a,{pending:!0,data:I,method:f.method,action:p},null,I)}}else typeof p=="function"&&(T.preventDefault(),I=b?Iv(f,b):new FormData(f),Of(a,{pending:!0,data:I,method:f.method,action:p},p,I))},currentTarget:f}]})}}for(var mp=0;mp<Xd.length;mp++){var gp=Xd[mp],L1=gp.toLowerCase(),V1=gp[0].toUpperCase()+gp.slice(1);zr(L1,"on"+V1)}zr(ly,"onAnimationEnd"),zr(cy,"onAnimationIteration"),zr(uy,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(e1,"onTransitionRun"),zr(t1,"onTransitionStart"),zr(n1,"onTransitionCancel"),zr(hy,"onTransitionEnd"),Wr("onMouseEnter",["mouseout","mouseover"]),Wr("onMouseLeave",["mouseout","mouseover"]),Wr("onPointerEnter",["pointerout","pointerover"]),Wr("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function Dv(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var p=void 0;if(s)for(var b=l.length-1;0<=b;b--){var T=l[b],I=T.instance,H=T.currentTarget;if(T=T.listener,I!==p&&f.isPropagationStopped())break e;p=T,f.currentTarget=H;try{p(f)}catch(K){wu(K)}f.currentTarget=null,p=I}else for(b=0;b<l.length;b++){if(T=l[b],I=T.instance,H=T.currentTarget,T=T.listener,I!==p&&f.isPropagationStopped())break e;p=T,f.currentTarget=H;try{p(f)}catch(K){wu(K)}f.currentTarget=null,p=I}}}}function Ye(n,s){var a=s[xi];a===void 0&&(a=s[xi]=new Set);var l=n+"__bubble";a.has(l)||(jv(s,n,2,!1),a.add(l))}function yp(n,s,a){var l=0;s&&(l|=4),jv(a,n,l,s)}var lh="_reactListening"+Math.random().toString(36).slice(2);function vp(n){if(!n[lh]){n[lh]=!0,ve.forEach(function(a){a!=="selectionchange"&&(U1.has(a)||yp(a,!1,n),yp(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[lh]||(s[lh]=!0,yp("selectionchange",!1,s))}}function jv(n,s,a,l){switch(lb(s)){case 2:var f=fS;break;case 8:f=pS;break;default:f=jp}a=f.bind(null,s,a,n),f=void 0,!fa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function bp(n,s,a,l,f){var p=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===f)break;if(b===4)for(b=l.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;T!==null;){if(b=nr(T),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){l=p=b;continue e}T=T.parentNode}}l=l.return}os(function(){var H=p,K=xr(a),W=[];e:{var G=dy.get(n);if(G!==void 0){var F=ni,me=n;switch(n){case"keypress":if(ma(a)===0)break e;case"keydown":case"keyup":F=bu;break;case"focusin":me="focus",F=ya;break;case"focusout":me="blur",F=ya;break;case"beforeblur":case"afterblur":F=ya;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=v;break;case ly:case cy:case uy:F=du;break;case hy:F=N;break;case"scroll":case"scrollend":F=Nl;break;case"wheel":F=q;break;case"copy":case"cut":case"paste":F=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Si;break;case"toggle":case"beforetoggle":F=Le}var Ne=(s&4)!==0,pt=!Ne&&(n==="scroll"||n==="scrollend"),U=Ne?G!==null?G+"Capture":null:G;Ne=[];for(var O=H,B;O!==null;){var J=O;if(B=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||B===null||U===null||(J=Mr(O,U),J!=null&&Ne.push(rc(O,J,B))),pt)break;O=O.return}0<Ne.length&&(G=new F(G,me,null,a,K),W.push({event:G,listeners:Ne}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",G&&a!==El&&(me=a.relatedTarget||a.fromElement)&&(nr(me)||me[tr]))break e;if((F||G)&&(G=K.window===K?K:(G=K.ownerDocument)?G.defaultView||G.parentWindow:window,F?(me=a.relatedTarget||a.toElement,F=H,me=me?nr(me):null,me!==null&&(pt=c(me),Ne=me.tag,me!==pt||Ne!==5&&Ne!==27&&Ne!==6)&&(me=null)):(F=null,me=H),F!==me)){if(Ne=Al,J="onMouseLeave",U="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Si,J="onPointerLeave",U="onPointerEnter",O="pointer"),pt=F==null?G:X(F),B=me==null?G:X(me),G=new Ne(J,O+"leave",F,a,K),G.target=pt,G.relatedTarget=B,J=null,nr(K)===H&&(Ne=new Ne(U,O+"enter",me,a,K),Ne.target=B,Ne.relatedTarget=pt,J=Ne),pt=J,F&&me)t:{for(Ne=z1,U=F,O=me,B=0,J=U;J;J=Ne(J))B++;J=0;for(var Te=O;Te;Te=Ne(Te))J++;for(;0<B-J;)U=Ne(U),B--;for(;0<J-B;)O=Ne(O),J--;for(;B--;){if(U===O||O!==null&&U===O.alternate){Ne=U;break t}U=Ne(U),O=Ne(O)}Ne=null}else Ne=null;F!==null&&Ov(W,G,F,Ne,!1),me!==null&&pt!==null&&Ov(W,pt,me,Ne,!0)}}e:{if(G=H?X(H):window,F=G.nodeName&&G.nodeName.toLowerCase(),F==="select"||F==="input"&&G.type==="file")var tt=Jg;else if(Kg(G))if(Wg)tt=JT;else{tt=KT;var be=QT}else F=G.nodeName,!F||F.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&io(H.elementType)&&(tt=Jg):tt=XT;if(tt&&(tt=tt(n,H))){Xg(W,tt,a,K);break e}be&&be(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&xl(G,"number",G.value)}switch(be=H?X(H):window,n){case"focusin":(Kg(be)||be.contentEditable==="true")&&(fo=be,$d=H,Dl=null);break;case"focusout":Dl=$d=fo=null;break;case"mousedown":Qd=!0;break;case"contextmenu":case"mouseup":case"dragend":Qd=!1,ay(W,a,K);break;case"selectionchange":if(ZT)break;case"keydown":case"keyup":ay(W,a,K)}var ze;if(st)e:{switch(n){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else ho?va(n,a)&&(Qe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Qe="onCompositionStart");Qe&&(si&&a.locale!=="ko"&&(ho||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&ho&&(ze=Sl()):(ti=K,Tl="value"in ti?ti.value:ti.textContent,ho=!0)),be=ch(H,Qe),0<be.length&&(Qe=new ii(Qe,n,null,a,K),W.push({event:Qe,listeners:be}),ze?Qe.data=ze:(ze=uo(a),ze!==null&&(Qe.data=ze)))),(ze=wr?qT(n,a):FT(n,a))&&(Qe=ch(H,"onBeforeInput"),0<Qe.length&&(be=new ii("onBeforeInput","beforeinput",null,a,K),W.push({event:be,listeners:Qe}),be.data=ze)),M1(W,n,H,a,K)}Dv(W,s)})}function rc(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ch(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Mr(n,a),f!=null&&l.unshift(rc(n,f,p)),f=Mr(n,s),f!=null&&l.push(rc(n,f,p))),n.tag===3)return l;n=n.return}return[]}function z1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ov(n,s,a,l,f){for(var p=s._reactName,b=[];a!==null&&a!==l;){var T=a,I=T.alternate,H=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||H===null||(I=H,f?(H=Mr(a,p),H!=null&&b.unshift(rc(a,H,I))):f||(H=Mr(a,p),H!=null&&b.push(rc(a,H,I)))),a=a.return}b.length!==0&&n.push({event:s,listeners:b})}var B1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function Pv(n){return(typeof n=="string"?n:""+n).replace(B1,`
`).replace(H1,"")}function Mv(n,s){return s=Pv(s),Pv(n)===s}function ft(n,s,a,l,f,p){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Hn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Hn(n,""+l);break;case"className":rr(n,"class",l);break;case"tabIndex":rr(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":rr(n,a,l);break;case"style":wl(n,l,p);break;case"data":if(s!=="object"){rr(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=so(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(s!=="input"&&ft(n,s,"name",f.name,f,null),ft(n,s,"formEncType",f.formEncType,f,null),ft(n,s,"formMethod",f.formMethod,f,null),ft(n,s,"formTarget",f.formTarget,f,null)):(ft(n,s,"encType",f.encType,f,null),ft(n,s,"method",f.method,f,null),ft(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=so(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Pr);break;case"onScroll":l!=null&&Ye("scroll",n);break;case"onScrollEnd":l!=null&&Ye("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=so(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ye("beforetoggle",n),Ye("toggle",n),no(n,"popover",l);break;case"xlinkActuate":Kt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Kt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Kt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Kt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Kt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Kt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":no(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cu.get(a)||a,no(n,a,l))}}function xp(n,s,a,l,f,p){switch(a){case"style":wl(n,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Hn(n,l):(typeof l=="number"||typeof l=="bigint")&&Hn(n,""+l);break;case"onScroll":l!=null&&Ye("scroll",n);break;case"onScrollEnd":l!=null&&Ye("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Pr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pt.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),p=n[Ot]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(s,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):no(n,a,l)}}}function xn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",n),Ye("load",n);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var b=a[p];if(b!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(n,s,p,b,a,null)}}f&&ft(n,s,"srcSet",a.srcSet,a,null),l&&ft(n,s,"src",a.src,a,null);return;case"input":Ye("invalid",n);var T=p=b=f=null,I=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":f=K;break;case"type":b=K;break;case"checked":I=K;break;case"defaultChecked":H=K;break;case"value":p=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:ft(n,s,l,K,a,null)}}au(n,p,T,I,H,b,f,!1);return;case"select":Ye("invalid",n),l=b=p=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":p=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:ft(n,s,f,T,a,null)}s=p,a=b,n.multiple=!!l,s!=null?rs(n,!!l,s,!1):a!=null&&rs(n,!!l,a,!0);return;case"textarea":Ye("invalid",n),p=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(T=a[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":f=T;break;case"children":p=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:ft(n,s,b,T,a,null)}is(n,l,f,p);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ft(n,s,I,l,a,null)}return;case"dialog":Ye("beforetoggle",n),Ye("toggle",n),Ye("cancel",n),Ye("close",n);break;case"iframe":case"object":Ye("load",n);break;case"video":case"audio":for(l=0;l<nc.length;l++)Ye(nc[l],n);break;case"image":Ye("error",n),Ye("load",n);break;case"details":Ye("toggle",n);break;case"embed":case"source":case"link":Ye("error",n),Ye("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(n,s,H,l,a,null)}return;default:if(io(s)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&xp(n,s,K,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ft(n,s,T,l,a,null))}function G1(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,b=null,T=null,I=null,H=null,K=null;for(F in a){var W=a[F];if(a.hasOwnProperty(F)&&W!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":I=W;default:l.hasOwnProperty(F)||ft(n,s,F,null,l,W)}}for(var G in l){var F=l[G];if(W=a[G],l.hasOwnProperty(G)&&(F!=null||W!=null))switch(G){case"type":p=F;break;case"name":f=F;break;case"checked":H=F;break;case"defaultChecked":K=F;break;case"value":b=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,s));break;default:F!==W&&ft(n,s,G,F,l,W)}}ro(n,b,T,I,H,K,p,f);return;case"select":F=b=T=G=null;for(p in a)if(I=a[p],a.hasOwnProperty(p)&&I!=null)switch(p){case"value":break;case"multiple":F=I;default:l.hasOwnProperty(p)||ft(n,s,p,null,l,I)}for(f in l)if(p=l[f],I=a[f],l.hasOwnProperty(f)&&(p!=null||I!=null))switch(f){case"value":G=p;break;case"defaultValue":T=p;break;case"multiple":b=p;default:p!==I&&ft(n,s,f,p,l,I)}s=T,a=b,l=F,G!=null?rs(n,!!a,G,!1):!!l!=!!a&&(s!=null?rs(n,!!a,s,!0):rs(n,!!a,a?[]:"",!1));return;case"textarea":F=G=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ft(n,s,T,null,l,f)}for(b in l)if(f=l[b],p=a[b],l.hasOwnProperty(b)&&(f!=null||p!=null))switch(b){case"value":G=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&ft(n,s,b,f,l,p)}ou(n,G,F);return;case"option":for(var me in a)if(G=a[me],a.hasOwnProperty(me)&&G!=null&&!l.hasOwnProperty(me))switch(me){case"selected":n.selected=!1;break;default:ft(n,s,me,null,l,G)}for(I in l)if(G=l[I],F=a[I],l.hasOwnProperty(I)&&G!==F&&(G!=null||F!=null))switch(I){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ft(n,s,I,G,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)G=a[Ne],a.hasOwnProperty(Ne)&&G!=null&&!l.hasOwnProperty(Ne)&&ft(n,s,Ne,null,l,G);for(H in l)if(G=l[H],F=a[H],l.hasOwnProperty(H)&&G!==F&&(G!=null||F!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:ft(n,s,H,G,l,F)}return;default:if(io(s)){for(var pt in a)G=a[pt],a.hasOwnProperty(pt)&&G!==void 0&&!l.hasOwnProperty(pt)&&xp(n,s,pt,void 0,l,G);for(K in l)G=l[K],F=a[K],!l.hasOwnProperty(K)||G===F||G===void 0&&F===void 0||xp(n,s,K,G,l,F);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!l.hasOwnProperty(U)&&ft(n,s,U,null,l,G);for(W in l)G=l[W],F=a[W],!l.hasOwnProperty(W)||G===F||G==null&&F==null||ft(n,s,W,G,l,F)}function Lv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function q1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],p=f.transferSize,b=f.initiatorType,T=f.duration;if(p&&T&&Lv(b)){for(b=0,T=f.responseEnd,l+=1;l<a.length;l++){var I=a[l],H=I.startTime;if(H>T)break;var K=I.transferSize,W=I.initiatorType;K&&Lv(W)&&(I=I.responseEnd,b+=K*(I<T?1:(T-H)/(I-H)))}if(--l,s+=8*(p+b)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var _p=null,wp=null;function uh(n){return n.nodeType===9?n:n.ownerDocument}function Vv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ep(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Tp=null;function F1(){var n=window.event;return n&&n.type==="popstate"?n===Tp?!1:(Tp=n,!0):(Tp=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,Y1=typeof clearTimeout=="function"?clearTimeout:void 0,Bv=typeof Promise=="function"?Promise:void 0,$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Bv<"u"?function(n){return Bv.resolve(null).then(n).catch(Q1)}:zv;function Q1(n){setTimeout(function(){throw n})}function As(n){return n==="head"}function Hv(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),zo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ic(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,ic(a);for(var p=a.firstChild;p;){var b=p.nextSibling,T=p.nodeName;p[mn]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=b}}else a==="body"&&ic(n.ownerDocument.body);a=f}while(a);zo(s)}function Gv(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Sp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Sp(a),wi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function K1(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[mn])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Rr(n.nextSibling),n===null)break}return null}function X1(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Rr(n.nextSibling),n===null))return null;return n}function qv(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Rr(n.nextSibling),n===null))return null;return n}function Np(n){return n.data==="$?"||n.data==="$~"}function Ap(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function J1(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Rr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Cp=null;function Fv(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Rr(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function Yv(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function $v(n,s,a){switch(s=uh(a),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function ic(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);wi(n)}var kr=new Map,Qv=new Set;function hh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var zi=oe.d;oe.d={f:W1,r:Z1,D:eS,C:tS,L:nS,m:rS,X:sS,S:iS,M:aS};function W1(){var n=zi.f(),s=nh();return n||s}function Z1(n){var s=E(n);s!==null&&s.tag===5&&s.type==="form"?h0(s):zi.r(n)}var Lo=typeof document>"u"?null:document;function Kv(n,s,a){var l=Lo;if(l&&typeof s=="string"&&s){var f=Bn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Qv.has(f)||(Qv.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),xn(s,"link",n),re(s),l.head.appendChild(s)))}}function eS(n){zi.D(n),Kv("dns-prefetch",n,null)}function tS(n,s){zi.C(n,s),Kv("preconnect",n,s)}function nS(n,s,a){zi.L(n,s,a);var l=Lo;if(l&&n&&s){var f='link[rel="preload"][as="'+Bn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Bn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Bn(a.imageSizes)+'"]')):f+='[href="'+Bn(n)+'"]';var p=f;switch(s){case"style":p=Vo(n);break;case"script":p=Uo(n)}kr.has(p)||(n=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),kr.set(p,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(sc(p))||s==="script"&&l.querySelector(ac(p))||(s=l.createElement("link"),xn(s,"link",n),re(s),l.head.appendChild(s)))}}function rS(n,s){zi.m(n,s);var a=Lo;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Bn(l)+'"][href="'+Bn(n)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Uo(n)}if(!kr.has(p)&&(n=w({rel:"modulepreload",href:n},s),kr.set(p,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ac(p)))return}l=a.createElement("link"),xn(l,"link",n),re(l),a.head.appendChild(l)}}}function iS(n,s,a){zi.S(n,s,a);var l=Lo;if(l&&n){var f=V(l).hoistableStyles,p=Vo(n);s=s||"default";var b=f.get(p);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(sc(p)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},a),(a=kr.get(p))&&Rp(n,a);var I=b=l.createElement("link");re(I),xn(I,"link",n),I._p=new Promise(function(H,K){I.onload=H,I.onerror=K}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,dh(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:T},f.set(p,b)}}}function sS(n,s){zi.X(n,s);var a=Lo;if(a&&n){var l=V(a).hoistableScripts,f=Uo(n),p=l.get(f);p||(p=a.querySelector(ac(f)),p||(n=w({src:n,async:!0},s),(s=kr.get(f))&&kp(n,s),p=a.createElement("script"),re(p),xn(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function aS(n,s){zi.M(n,s);var a=Lo;if(a&&n){var l=V(a).hoistableScripts,f=Uo(n),p=l.get(f);p||(p=a.querySelector(ac(f)),p||(n=w({src:n,async:!0,type:"module"},s),(s=kr.get(f))&&kp(n,s),p=a.createElement("script"),re(p),xn(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Xv(n,s,a,l){var f=(f=je.current)?hh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Vo(a.href),a=V(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Vo(a.href);var p=V(f).hoistableStyles,b=p.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=f.querySelector(sc(n)))&&!p._p&&(b.instance=p,b.state.loading=5),kr.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kr.set(n,a),p||oS(f,n,a,b.state))),s&&l===null)throw Error(i(528,""));return b}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Uo(a),a=V(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Vo(n){return'href="'+Bn(n)+'"'}function sc(n){return'link[rel="stylesheet"]['+n+"]"}function Jv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function oS(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),xn(s,"link",a),re(s),n.head.appendChild(s))}function Uo(n){return'[src="'+Bn(n)+'"]'}function ac(n){return"script[async]"+n}function Wv(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Bn(a.href)+'"]');if(l)return s.instance=l,re(l),l;var f=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),re(l),xn(l,"style",f),dh(l,a.precedence,n),s.instance=l;case"stylesheet":f=Vo(a.href);var p=n.querySelector(sc(f));if(p)return s.state.loading|=4,s.instance=p,re(p),p;l=Jv(a),(f=kr.get(f))&&Rp(l,f),p=(n.ownerDocument||n).createElement("link"),re(p);var b=p;return b._p=new Promise(function(T,I){b.onload=T,b.onerror=I}),xn(p,"link",l),s.state.loading|=4,dh(p,a.precedence,n),s.instance=p;case"script":return p=Uo(a.src),(f=n.querySelector(ac(p)))?(s.instance=f,re(f),f):(l=a,(f=kr.get(p))&&(l=w({},a),kp(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),re(f),xn(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,dh(l,a.precedence,n));return s.instance}function dh(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===s)p=T;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Rp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function kp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var fh=null;function Zv(n,s,a){if(fh===null){var l=new Map,f=fh=new Map;f.set(a,l)}else f=fh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var p=a[f];if(!(p[mn]||p[Ct]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(s)||"";b=n+b;var T=l.get(b);T?T.push(p):l.set(b,[p])}}return l}function eb(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function lS(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function tb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function cS(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Vo(l.href),p=s.querySelector(sc(f));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=ph.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=p,re(p);return}p=s.ownerDocument||s,l=Jv(l),(f=kr.get(f))&&Rp(l,f),p=p.createElement("link"),re(p);var b=p;b._p=new Promise(function(T,I){b.onload=T,b.onerror=I}),xn(p,"link",l),a.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=ph.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Ip=0;function uS(n,s){return n.stylesheets&&n.count===0&&gh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&gh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&Ip===0&&(Ip=62500*q1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&gh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Ip?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var mh=null;function gh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,mh=new Map,s.forEach(hS,n),mh=null,ph.call(n))}function hS(n,s){if(!(s.state.loading&4)){var a=mh.get(n);if(a)var l=a.get(null);else{a=new Map,mh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var b=f[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=s.instance,b=f.getAttribute("data-precedence"),p=a.get(b)||l,p===l&&a.set(null,f),a.set(b,f),this.count++,l=ph.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var oc={$$typeof:xe,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function dS(n,s,a,l,f,p,b,T,I){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dn(0),this.hiddenUpdates=Dn(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function nb(n,s,a,l,f,p,b,T,I,H,K,W){return n=new dS(n,s,a,b,I,H,K,W,T),s=1,p===!0&&(s|=24),p=sr(3,null,null,s),n.current=p,p.stateNode=n,s=uf(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:s},pf(p),n}function rb(n){return n?(n=go,n):go}function ib(n,s,a,l,f,p){f=rb(f),l.context===null?l.context=f:l.pendingContext=f,l=gs(s),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=ys(n,l,s),a!==null&&($n(a,n,s),Ul(a,n,s))}function sb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Dp(n,s){sb(n,s),(n=n.alternate)&&sb(n,s)}function ab(n){if(n.tag===13||n.tag===31){var s=_a(n,67108864);s!==null&&$n(s,n,67108864),Dp(n,67108864)}}function ob(n){if(n.tag===13||n.tag===31){var s=ur();s=vr(s);var a=_a(n,s);a!==null&&$n(a,n,s),Dp(n,s)}}var yh=!0;function fS(n,s,a,l){var f=Y.T;Y.T=null;var p=oe.p;try{oe.p=2,jp(n,s,a,l)}finally{oe.p=p,Y.T=f}}function pS(n,s,a,l){var f=Y.T;Y.T=null;var p=oe.p;try{oe.p=8,jp(n,s,a,l)}finally{oe.p=p,Y.T=f}}function jp(n,s,a,l){if(yh){var f=Op(l);if(f===null)bp(n,s,l,vh,a),cb(n,l);else if(gS(f,n,s,a,l))l.stopPropagation();else if(cb(n,l),s&4&&-1<mS.indexOf(n)){for(;f!==null;){var p=E(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=gr(p.pendingLanes);if(b!==0){var T=p;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var I=1<<31-At(b);T.entanglements[1]|=I,b&=~I}ci(p),(at&6)===0&&(eh=le()+500,tc(0))}}break;case 31:case 13:T=_a(p,2),T!==null&&$n(T,p,2),nh(),Dp(p,2)}if(p=Op(l),p===null&&bp(n,s,l,vh,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else bp(n,s,l,null,a)}}function Op(n){return n=xr(n),Pp(n)}var vh=null;function Pp(n){if(vh=null,n=nr(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===31){if(n=m(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return vh=n,null}function lb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case Zi:return 2;case Jn:return 8;case sn:case Kr:return 32;case vi:return 268435456;default:return 32}default:return 32}}var Mp=!1,Cs=null,Rs=null,ks=null,lc=new Map,cc=new Map,Is=[],mS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cb(n,s){switch(n){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(s.pointerId)}}function uc(n,s,a,l,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},s!==null&&(s=E(s),s!==null&&ab(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function gS(n,s,a,l,f){switch(s){case"focusin":return Cs=uc(Cs,n,s,a,l,f),!0;case"dragenter":return Rs=uc(Rs,n,s,a,l,f),!0;case"mouseover":return ks=uc(ks,n,s,a,l,f),!0;case"pointerover":var p=f.pointerId;return lc.set(p,uc(lc.get(p)||null,n,s,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,cc.set(p,uc(cc.get(p)||null,n,s,a,l,f)),!0}return!1}function ub(n){var s=nr(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,Qt(n.priority,function(){ob(a)});return}}else if(s===31){if(s=m(a),s!==null){n.blockedOn=s,Qt(n.priority,function(){ob(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function bh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Op(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);El=l,a.target.dispatchEvent(l),El=null}else return s=E(a),s!==null&&ab(s),n.blockedOn=a,!1;s.shift()}return!0}function hb(n,s,a){bh(n)&&a.delete(s)}function yS(){Mp=!1,Cs!==null&&bh(Cs)&&(Cs=null),Rs!==null&&bh(Rs)&&(Rs=null),ks!==null&&bh(ks)&&(ks=null),lc.forEach(hb),cc.forEach(hb)}function xh(n,s){n.blockedOn===s&&(n.blockedOn=null,Mp||(Mp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,yS)))}var _h=null;function db(n){_h!==n&&(_h=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_h===n&&(_h=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(Pp(l||a)===null)continue;break}var p=E(a);p!==null&&(n.splice(s,3),s-=3,Of(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function zo(n){function s(I){return xh(I,n)}Cs!==null&&xh(Cs,n),Rs!==null&&xh(Rs,n),ks!==null&&xh(ks,n),lc.forEach(s),cc.forEach(s);for(var a=0;a<Is.length;a++){var l=Is[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Is.length&&(a=Is[0],a.blockedOn===null);)ub(a),a.blockedOn===null&&Is.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],b=f[Ot]||null;if(typeof p=="function")b||db(a);else if(b){var T=null;if(p&&p.hasAttribute("formAction")){if(f=p,b=p[Ot]||null)T=b.formAction;else if(Pp(f)!==null)continue}else T=b.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),db(a)}}}function fb(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Lp(n){this._internalRoot=n}wh.prototype.render=Lp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=ur();ib(a,l,n,s,null,null)},wh.prototype.unmount=Lp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ib(n.current,2,null,n,null,null),nh(),s[tr]=null}};function wh(n){this._internalRoot=n}wh.prototype.unstable_scheduleHydration=function(n){if(n){var s=to();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Is.length&&s!==0&&s<Is[a].priority;a++);Is.splice(a,0,n),a===0&&ub(n)}};var pb=e.version;if(pb!=="19.2.4")throw Error(i(527,pb,"19.2.4"));oe.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(s),n=n!==null?x(n):null,n=n===null?null:n.stateNode,n};var vS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{Wn=Eh.inject(vS),$t=Eh}catch{}}return fc.createRoot=function(n,s){if(!o(n))throw Error(i(299));var a=!1,l="",f=_0,p=w0,b=E0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=nb(n,1,!1,null,null,a,l,null,f,p,b,fb),n[tr]=s.current,vp(n),new Lp(s)},fc.hydrateRoot=function(n,s,a){if(!o(n))throw Error(i(299));var l=!1,f="",p=_0,b=w0,T=E0,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),s=nb(n,1,!0,s,a??null,l,f,I,p,b,T,fb),s.context=rb(null),a=s.current,l=ur(),l=vr(l),f=gs(l),f.callback=null,ys(a,f,l),a=l,s.current.lanes=a,Or(s,a),ci(s),n[tr]=s.current,vp(n),new wh(s)},fc.version="19.2.4",fc}var Tb;function IS(){if(Tb)return zp.exports;Tb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zp.exports=kS(),zp.exports}var DS=IS();const jS=Fm(DS);var Vt=(r=>(r.READY="ready to sing",r.STANDBY="standby",r))(Vt||{}),gt=(r=>(r.SINGING="Singing",r.LISTENING="Listening",r))(gt||{}),Ge=(r=>(r.PENDING="Pending Approval",r.APPROVED="Approved",r.DONE="Done",r))(Ge||{});class OS{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return PS(e).buffer}}function PS(r){let e=0;for(const o of r)e+=o.byteLength;const t=new Uint8Array(e);let i=0;for(const o of r){const c=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);t.set(c,i),i+=o.byteLength}return t}function x_(r){return new MS(r).unpack()}function __(r){const e=new LS,t=e.pack(r);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class MS{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let i=0,o="",c,u;for(;i<e;)c=t[i],c<160?(u=c,i++):(c^192)<32?(u=(c&31)<<6|t[i+1]&63,i+=2):(c^224)<16?(u=(c&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=3):(u=(c&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=4),o+=String.fromCodePoint(u);return this.index+=e,o}unpack_array(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=this.unpack();return t}unpack_map(e){const t={};for(let i=0;i<e;i++){const o=this.unpack();t[o]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,i=(e>>23&255)-127,o=e&8388607|8388608;return(t===0?1:-1)*o*2**(i-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),i=e>>31,o=(e>>20&2047)-1023,u=(e&1048575|1048576)*2**(o-20)+t*2**(o-52);return(i===0?1:-1)*u}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class LS{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const i=this.pack_array(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const i=e;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const i=this.pack_object(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),i=t.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const i=o=>{if(o<t){const c=this.pack(e[o]);return c instanceof Promise?c.then(()=>i(o+1)):i(o+1)}};return i(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),o=e/2**i-1,c=Math.floor(o*2**52),u=2**32,m=t<<31|i+1023<<20|c/u&1048575,g=c%u;this._bufferBuilder.append(203),this.pack_int32(m),this.pack_int32(g)}pack_object(e){const t=Object.keys(e),i=t.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const o=c=>{if(c<t.length){const u=t[c];if(e.hasOwnProperty(u)){this.pack(u);const m=this.pack(e[u]);if(m instanceof Promise)return m.then(()=>o(c+1))}return o(c+1)}};return o(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new OS,this._textEncoder=new TextEncoder}}let w_=!0,E_=!0;function vc(r,e,t){const i=r.match(e);return i&&i.length>=t&&parseFloat(i[t],10)}function $a(r,e,t){if(!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype,o=i.addEventListener;i.addEventListener=function(u,m){if(u!==e)return o.apply(this,arguments);const g=y=>{const x=t(y);x&&(m.handleEvent?m.handleEvent(x):m(x))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(m,g),o.apply(this,[u,g])};const c=i.removeEventListener;i.removeEventListener=function(u,m){if(u!==e||!this._eventMap||!this._eventMap[e])return c.apply(this,arguments);if(!this._eventMap[e].has(m))return c.apply(this,arguments);const g=this._eventMap[e].get(m);return this._eventMap[e].delete(m),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,c.apply(this,[u,g])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function VS(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(w_=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function US(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(E_=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function T_(){if(typeof window=="object"){if(w_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function $m(r,e){E_&&console.warn(r+" is deprecated, please use "+e+" instead.")}function zS(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=r;if(t.userAgentData&&t.userAgentData.brands){const i=t.userAgentData.brands.find(o=>o.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(vc(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(vc(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(vc(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,e._safariVersion=vc(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Sb(r){return Object.prototype.toString.call(r)==="[object Object]"}function S_(r){return Sb(r)?Object.keys(r).reduce(function(e,t){const i=Sb(r[t]),o=i?S_(r[t]):r[t],c=i&&!Object.keys(o).length;return o===void 0||c?e:Object.assign(e,{[t]:o})},{}):r}function am(r,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?am(r,r.get(e[i]),t):i.endsWith("Ids")&&e[i].forEach(o=>{am(r,r.get(o),t)})}))}function Nb(r,e,t){const i=t?"outbound-rtp":"inbound-rtp",o=new Map;if(e===null)return o;const c=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&c.push(u)}),c.forEach(u=>{r.forEach(m=>{m.type===i&&m.trackId===u.id&&am(r,m,o)})}),o}const Ab=T_;function N_(r,e){const t=r&&r.navigator;if(!t.mediaDevices)return;const i=function(m){if(typeof m!="object"||m.mandatory||m.optional)return m;const g={};return Object.keys(m).forEach(y=>{if(y==="require"||y==="advanced"||y==="mediaSource")return;const x=typeof m[y]=="object"?m[y]:{ideal:m[y]};x.exact!==void 0&&typeof x.exact=="number"&&(x.min=x.max=x.exact);const w=function(S,L){return S?S+L.charAt(0).toUpperCase()+L.slice(1):L==="deviceId"?"sourceId":L};if(x.ideal!==void 0){g.optional=g.optional||[];let S={};typeof x.ideal=="number"?(S[w("min",y)]=x.ideal,g.optional.push(S),S={},S[w("max",y)]=x.ideal,g.optional.push(S)):(S[w("",y)]=x.ideal,g.optional.push(S))}x.exact!==void 0&&typeof x.exact!="number"?(g.mandatory=g.mandatory||{},g.mandatory[w("",y)]=x.exact):["min","max"].forEach(S=>{x[S]!==void 0&&(g.mandatory=g.mandatory||{},g.mandatory[w(S,y)]=x[S])})}),m.advanced&&(g.optional=(g.optional||[]).concat(m.advanced)),g},o=function(m,g){if(e.version>=61)return g(m);if(m=JSON.parse(JSON.stringify(m)),m&&typeof m.audio=="object"){const y=function(x,w,S){w in x&&!(S in x)&&(x[S]=x[w],delete x[w])};m=JSON.parse(JSON.stringify(m)),y(m.audio,"autoGainControl","googAutoGainControl"),y(m.audio,"noiseSuppression","googNoiseSuppression"),m.audio=i(m.audio)}if(m&&typeof m.video=="object"){let y=m.video.facingMode;y=y&&(typeof y=="object"?y:{ideal:y});const x=e.version<66;if(y&&(y.exact==="user"||y.exact==="environment"||y.ideal==="user"||y.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!x)){delete m.video.facingMode;let w;if(y.exact==="environment"||y.ideal==="environment"?w=["back","rear"]:(y.exact==="user"||y.ideal==="user")&&(w=["front"]),w)return t.mediaDevices.enumerateDevices().then(S=>{S=S.filter(Q=>Q.kind==="videoinput");let L=S.find(Q=>w.some(ne=>Q.label.toLowerCase().includes(ne)));return!L&&S.length&&w.includes("back")&&(L=S[S.length-1]),L&&(m.video.deviceId=y.exact?{exact:L.deviceId}:{ideal:L.deviceId}),m.video=i(m.video),Ab("chrome: "+JSON.stringify(m)),g(m)})}m.video=i(m.video)}return Ab("chrome: "+JSON.stringify(m)),g(m)},c=function(m){return e.version>=64?m:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[m.name]||m.name,message:m.message,constraint:m.constraint||m.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(m,g,y){o(m,x=>{t.webkitGetUserMedia(x,g,w=>{y&&y(c(w))})})};if(t.getUserMedia=u.bind(t),t.mediaDevices.getUserMedia){const m=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(g){return o(g,y=>m(y).then(x=>{if(y.audio&&!x.getAudioTracks().length||y.video&&!x.getVideoTracks().length)throw x.getTracks().forEach(w=>{w.stop()}),new DOMException("","NotFoundError");return x},x=>Promise.reject(c(x))))}}}function A_(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function C_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",o=>{let c;r.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(m=>m.track&&m.track.id===o.track.id):c={track:o.track};const u=new Event("track");u.track=o.track,u.receiver=c,u.transceiver={receiver:c},u.streams=[i.stream],this.dispatchEvent(u)}),i.stream.getTracks().forEach(o=>{let c;r.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(m=>m.track&&m.track.id===o.id):c={track:o};const u=new Event("track");u.track=o,u.receiver=c,u.transceiver={receiver:c},u.streams=[i.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else $a(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function R_(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(o,c){return{track:c,get dtmf(){return this._dtmf===void 0&&(c.kind==="audio"?this._dtmf=o.createDTMFSender(c):this._dtmf=null),this._dtmf},_pc:o}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(m,g){let y=o.apply(this,arguments);return y||(y=e(this,m),this._senders.push(y)),y};const c=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(m){c.apply(this,arguments);const g=this._senders.indexOf(m);g!==-1&&this._senders.splice(g,1)}}const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(c){this._senders=this._senders||[],t.apply(this,[c]),c.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(c){this._senders=this._senders||[],i.apply(this,[c]),c.getTracks().forEach(u=>{const m=this._senders.find(g=>g.track===u);m&&this._senders.splice(this._senders.indexOf(m),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function k_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const c=t.apply(this,[]);return c.forEach(u=>u._pc=this),c});const i=r.RTCPeerConnection.prototype.addTrack;i&&(r.RTCPeerConnection.prototype.addTrack=function(){const c=i.apply(this,arguments);return c._pc=this,c}),r.RTCRtpSender.prototype.getStats=function(){const c=this;return this._pc.getStats().then(u=>Nb(u,c.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const o=t.apply(this,[]);return o.forEach(c=>c._pc=this),o}),$a(r,"track",i=>(i.receiver._pc=i.srcElement,i)),r.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(c=>Nb(c,o.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const i=arguments[0];let o,c,u;return this.getSenders().forEach(m=>{m.track===i&&(o?u=!0:o=m)}),this.getReceivers().forEach(m=>(m.track===i&&(c?u=!0:c=m),m.track===i)),u||o&&c?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():c?c.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function I_(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,m){if(!m)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const g=e.apply(this,arguments);return this._shimmedLocalStreams[m.id]?this._shimmedLocalStreams[m.id].indexOf(g)===-1&&this._shimmedLocalStreams[m.id].push(g):this._shimmedLocalStreams[m.id]=[m,g],g};const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(y=>{if(this.getSenders().find(w=>w.track===y))throw new DOMException("Track already exists.","InvalidAccessError")});const m=this.getSenders();t.apply(this,arguments);const g=this.getSenders().filter(y=>m.indexOf(y)===-1);this._shimmedLocalStreams[u.id]=[u].concat(g)};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],i.apply(this,arguments)};const o=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(m=>{const g=this._shimmedLocalStreams[m].indexOf(u);g!==-1&&this._shimmedLocalStreams[m].splice(g,1),this._shimmedLocalStreams[m].length===1&&delete this._shimmedLocalStreams[m]}),o.apply(this,arguments)}}function D_(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return I_(r);const t=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const x=t.apply(this);return this._reverseStreams=this._reverseStreams||{},x.map(w=>this._reverseStreams[w.id])};const i=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(x){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},x.getTracks().forEach(w=>{if(this.getSenders().find(L=>L.track===w))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[x.id]){const w=new r.MediaStream(x.getTracks());this._streams[x.id]=w,this._reverseStreams[w.id]=x,x=w}i.apply(this,[x])};const o=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(x){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[x.id]||x]),delete this._reverseStreams[this._streams[x.id]?this._streams[x.id].id:x.id],delete this._streams[x.id]},r.RTCPeerConnection.prototype.addTrack=function(x,w){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const S=[].slice.call(arguments,1);if(S.length!==1||!S[0].getTracks().find(ne=>ne===x))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(ne=>ne.track===x))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const Q=this._streams[w.id];if(Q)Q.addTrack(x),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const ne=new r.MediaStream([x]);this._streams[w.id]=ne,this._reverseStreams[ne.id]=w,this.addStream(ne)}return this.getSenders().find(ne=>ne.track===x)};function c(y,x){let w=x.sdp;return Object.keys(y._reverseStreams||[]).forEach(S=>{const L=y._reverseStreams[S],Q=y._streams[L.id];w=w.replace(new RegExp(Q.id,"g"),L.id)}),new RTCSessionDescription({type:x.type,sdp:w})}function u(y,x){let w=x.sdp;return Object.keys(y._reverseStreams||[]).forEach(S=>{const L=y._reverseStreams[S],Q=y._streams[L.id];w=w.replace(new RegExp(L.id,"g"),Q.id)}),new RTCSessionDescription({type:x.type,sdp:w})}["createOffer","createAnswer"].forEach(function(y){const x=r.RTCPeerConnection.prototype[y],w={[y](){const S=arguments;return arguments.length&&typeof arguments[0]=="function"?x.apply(this,[Q=>{const ne=c(this,Q);S[0].apply(null,[ne])},Q=>{S[1]&&S[1].apply(null,Q)},arguments[2]]):x.apply(this,arguments).then(Q=>c(this,Q))}};r.RTCPeerConnection.prototype[y]=w[y]});const m=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?m.apply(this,arguments):(arguments[0]=u(this,arguments[0]),m.apply(this,arguments))};const g=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const y=g.get.apply(this);return y.type===""?y:c(this,y)}}),r.RTCPeerConnection.prototype.removeTrack=function(x){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!x._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(x._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let S;Object.keys(this._streams).forEach(L=>{this._streams[L].getTracks().find(ne=>x.track===ne)&&(S=this._streams[L])}),S&&(S.getTracks().length===1?this.removeStream(this._reverseStreams[S.id]):S.removeTrack(x.track),this.dispatchEvent(new Event("negotiationneeded")))}}function om(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const i=r.RTCPeerConnection.prototype[t],o={[t](){return arguments[0]=new(t==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};r.RTCPeerConnection.prototype[t]=o[t]})}function j_(r,e){$a(r,"negotiationneeded",t=>{const i=t.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return t})}const Cb=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:j_,shimAddTrackRemoveTrack:D_,shimAddTrackRemoveTrackWithNative:I_,shimGetSendersWithDtmf:R_,shimGetUserMedia:N_,shimMediaStream:A_,shimOnTrack:C_,shimPeerConnection:om,shimSenderReceiverGetStats:k_},Symbol.toStringTag,{value:"Module"}));function O_(r,e){const t=r&&r.navigator,i=r&&r.MediaStreamTrack;if(t.getUserMedia=function(o,c,u){$m("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(o).then(c,u)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const o=function(u,m,g){m in u&&!(g in u)&&(u[g]=u[m],delete u[m])},c=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),c(u)},i&&i.prototype.getSettings){const u=i.prototype.getSettings;i.prototype.getSettings=function(){const m=u.apply(this,arguments);return o(m,"mozAutoGainControl","autoGainControl"),o(m,"mozNoiseSuppression","noiseSuppression"),m}}if(i&&i.prototype.applyConstraints){const u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(m){return this.kind==="audio"&&typeof m=="object"&&(m=JSON.parse(JSON.stringify(m)),o(m,"autoGainControl","mozAutoGainControl"),o(m,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[m])}}}}function BS(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(i)})}function P_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function lm(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const c=r.RTCPeerConnection.prototype[o],u={[o](){return arguments[0]=new(o==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};r.RTCPeerConnection.prototype[o]=u[o]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[c,u,m]=arguments;return i.apply(this,[c||null]).then(g=>{if(e.version<53&&!u)try{g.forEach(y=>{y.type=t[y.type]||y.type})}catch(y){if(y.name!=="TypeError")throw y;g.forEach((x,w)=>{g.set(w,Object.assign({},x,{type:t[x.type]||x.type}))})}return g}).then(u,m)}}function M_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const o=e.apply(this,[]);return o.forEach(c=>c._pc=this),o});const t=r.RTCPeerConnection.prototype.addTrack;t&&(r.RTCPeerConnection.prototype.addTrack=function(){const o=t.apply(this,arguments);return o._pc=this,o}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function L_(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i}),$a(r,"track",t=>(t.receiver._pc=t.srcElement,t)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function V_(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){$m("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&t.getTracks().includes(i.track)&&this.removeTrack(i)})})}function U_(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function z_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const o=i.length>0;o&&i.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const c=e.apply(this,arguments);if(o){const{sender:u}=c,m=u.getParameters();(!("encodings"in m)||m.encodings.length===1&&Object.keys(m.encodings[0]).length===0)&&(m.encodings=i,u.sendEncodings=i,this.setParametersPromises.push(u.setParameters(m).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return c})}function B_(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function H_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function G_(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Rb=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:z_,shimCreateAnswer:G_,shimCreateOffer:H_,shimGetDisplayMedia:BS,shimGetParameters:B_,shimGetUserMedia:O_,shimOnTrack:P_,shimPeerConnection:lm,shimRTCDataChannel:U_,shimReceiverGetStats:L_,shimRemoveStream:V_,shimSenderGetStats:M_},Symbol.toStringTag,{value:"Module"}));function q_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(o=>e.call(this,o,i)),i.getVideoTracks().forEach(o=>e.call(this,o,i))},r.RTCPeerConnection.prototype.addTrack=function(i,...o){return o&&o.forEach(c=>{this._localStreams?this._localStreams.includes(c)||this._localStreams.push(c):this._localStreams=[c]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(t);if(i===-1)return;this._localStreams.splice(i,1);const o=t.getTracks();this.getSenders().forEach(c=>{o.includes(c.track)&&this.removeTrack(c)})})}}function F_(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const c=new Event("addstream");c.stream=o,this.dispatchEvent(c)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(c=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(c)>=0)return;i._remoteStreams.push(c);const u=new Event("addstream");u.stream=c,i.dispatchEvent(u)})}),e.apply(i,arguments)}}}function Y_(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,t=e.createOffer,i=e.createAnswer,o=e.setLocalDescription,c=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(y,x){const w=arguments.length>=2?arguments[2]:arguments[0],S=t.apply(this,[w]);return x?(S.then(y,x),Promise.resolve()):S},e.createAnswer=function(y,x){const w=arguments.length>=2?arguments[2]:arguments[0],S=i.apply(this,[w]);return x?(S.then(y,x),Promise.resolve()):S};let m=function(g,y,x){const w=o.apply(this,[g]);return x?(w.then(y,x),Promise.resolve()):w};e.setLocalDescription=m,m=function(g,y,x){const w=c.apply(this,[g]);return x?(w.then(y,x),Promise.resolve()):w},e.setRemoteDescription=m,m=function(g,y,x){const w=u.apply(this,[g]);return x?(w.then(y,x),Promise.resolve()):w},e.addIceCandidate=m}function $_(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,i=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=o=>i(Q_(o))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,o,c){e.mediaDevices.getUserMedia(i).then(o,c)}).bind(e))}function Q_(r){return r&&r.video!==void 0?Object.assign({},r,{video:S_(r.video)}):r}function K_(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(i,o){if(i&&i.iceServers){const c=[];for(let u=0;u<i.iceServers.length;u++){let m=i.iceServers[u];m.urls===void 0&&m.url?($m("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,c.push(m)):c.push(i.iceServers[u])}i.iceServers=c}return new e(i,o)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function X_(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function J_(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const c=this.getTransceivers().find(u=>u.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):i.offerToReceiveVideo===!0&&!c&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function W_(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const kb=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:W_,shimCallbacksAPI:Y_,shimConstraints:Q_,shimCreateOfferLegacy:J_,shimGetUserMedia:$_,shimLocalStreamsAPI:q_,shimRTCIceServerUrls:K_,shimRemoteStreamsAPI:F_,shimTrackEventTransceiver:X_},Symbol.toStringTag,{value:"Module"}));var qp={exports:{}},Ib;function HS(){return Ib||(Ib=1,(function(r){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(t){return t.split(`
m=`).map((o,c)=>(c>0?"m="+o:o).trim()+`\r
`)},e.getDescription=function(t){const i=e.splitSections(t);return i&&i[0]},e.getMediaSections=function(t){const i=e.splitSections(t);return i.shift(),i},e.matchPrefix=function(t,i){return e.splitLines(t).filter(o=>o.indexOf(i)===0)},e.parseCandidate=function(t){let i;t.indexOf("a=candidate:")===0?i=t.substring(12).split(" "):i=t.substring(10).split(" ");const o={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let c=8;c<i.length;c+=2)switch(i[c]){case"raddr":o.relatedAddress=i[c+1];break;case"rport":o.relatedPort=parseInt(i[c+1],10);break;case"tcptype":o.tcpType=i[c+1];break;case"ufrag":o.ufrag=i[c+1],o.usernameFragment=i[c+1];break;default:o[i[c]]===void 0&&(o[i[c]]=i[c+1]);break}return o},e.writeCandidate=function(t){const i=[];i.push(t.foundation);const o=t.component;o==="rtp"?i.push(1):o==="rtcp"?i.push(2):i.push(o),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);const c=t.type;return i.push("typ"),i.push(c),c!=="host"&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let i=t.substring(9).split(" ");const o={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),o.name=i[0],o.clockRate=parseInt(i[1],10),o.channels=i.length===3?parseInt(i[2],10):1,o.numChannels=o.channels,o},e.writeRtpMap=function(t){let i=t.payloadType;t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType);const o=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(o!==1?"/"+o:"")+`\r
`},e.parseExtmap=function(t){const i=t.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const i={};let o;const c=t.substring(t.indexOf(" ")+1).split(";");for(let u=0;u<c.length;u++)o=c[u].trim().split("="),i[o[0].trim()]=o[1];return i},e.writeFmtp=function(t){let i="",o=t.payloadType;if(t.preferredPayloadType!==void 0&&(o=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const c=[];Object.keys(t.parameters).forEach(u=>{t.parameters[u]!==void 0?c.push(u+"="+t.parameters[u]):c.push(u)}),i+="a=fmtp:"+o+" "+c.join(";")+`\r
`}return i},e.parseRtcpFb=function(t){const i=t.substring(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(t){let i="",o=t.payloadType;return t.preferredPayloadType!==void 0&&(o=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(c=>{i+="a=rtcp-fb:"+o+" "+c.type+(c.parameter&&c.parameter.length?" "+c.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(t){const i=t.indexOf(" "),o={ssrc:parseInt(t.substring(7,i),10)},c=t.indexOf(":",i);return c>-1?(o.attribute=t.substring(i+1,c),o.value=t.substring(c+1)):o.attribute=t.substring(i+1),o},e.parseSsrcGroup=function(t){const i=t.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(o=>parseInt(o,10))}},e.getMid=function(t){const i=e.matchPrefix(t,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(t){const i=t.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:e.matchPrefix(t+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,i){let o="a=setup:"+i+`\r
`;return t.fingerprints.forEach(c=>{o+="a=fingerprint:"+c.algorithm+" "+c.value+`\r
`}),o},e.parseCryptoLine=function(t){const i=t.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const i=t.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,i){return e.matchPrefix(t+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,i){const o=e.matchPrefix(t+i,"a=ice-ufrag:")[0],c=e.matchPrefix(t+i,"a=ice-pwd:")[0];return o&&c?{usernameFragment:o.substring(12),password:c.substring(10)}:null},e.writeIceParameters=function(t){let i="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(t){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=e.splitLines(t)[0].split(" ");i.profile=c[2];for(let m=3;m<c.length;m++){const g=c[m],y=e.matchPrefix(t,"a=rtpmap:"+g+" ")[0];if(y){const x=e.parseRtpMap(y),w=e.matchPrefix(t,"a=fmtp:"+g+" ");switch(x.parameters=w.length?e.parseFmtp(w[0]):{},x.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+g+" ").map(e.parseRtcpFb),i.codecs.push(x),x.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(x.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(m=>{i.headerExtensions.push(e.parseExtmap(m))});const u=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(m=>{u.forEach(g=>{m.rtcpFeedback.find(x=>x.type===g.type&&x.parameter===g.parameter)||m.rtcpFeedback.push(g)})}),i},e.writeRtpDescription=function(t,i){let o="";o+="m="+t+" ",o+=i.codecs.length>0?"9":"0",o+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=i.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(u=>{o+=e.writeRtpMap(u),o+=e.writeFmtp(u),o+=e.writeRtcpFb(u)});let c=0;return i.codecs.forEach(u=>{u.maxptime>c&&(c=u.maxptime)}),c>0&&(o+="a=maxptime:"+c+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(u=>{o+=e.writeExtmap(u)}),o},e.parseRtpEncodingParameters=function(t){const i=[],o=e.parseRtpParameters(t),c=o.fecMechanisms.indexOf("RED")!==-1,u=o.fecMechanisms.indexOf("ULPFEC")!==-1,m=e.matchPrefix(t,"a=ssrc:").map(S=>e.parseSsrcMedia(S)).filter(S=>S.attribute==="cname"),g=m.length>0&&m[0].ssrc;let y;const x=e.matchPrefix(t,"a=ssrc-group:FID").map(S=>S.substring(17).split(" ").map(Q=>parseInt(Q,10)));x.length>0&&x[0].length>1&&x[0][0]===g&&(y=x[0][1]),o.codecs.forEach(S=>{if(S.name.toUpperCase()==="RTX"&&S.parameters.apt){let L={ssrc:g,codecPayloadType:parseInt(S.parameters.apt,10)};g&&y&&(L.rtx={ssrc:y}),i.push(L),c&&(L=JSON.parse(JSON.stringify(L)),L.fec={ssrc:g,mechanism:u?"red+ulpfec":"red"},i.push(L))}}),i.length===0&&g&&i.push({ssrc:g});let w=e.matchPrefix(t,"b=");return w.length&&(w[0].indexOf("b=TIAS:")===0?w=parseInt(w[0].substring(7),10):w[0].indexOf("b=AS:")===0?w=parseInt(w[0].substring(5),10)*1e3*.95-2e3*8:w=void 0,i.forEach(S=>{S.maxBitrate=w})),i},e.parseRtcpParameters=function(t){const i={},o=e.matchPrefix(t,"a=ssrc:").map(m=>e.parseSsrcMedia(m)).filter(m=>m.attribute==="cname")[0];o&&(i.cname=o.value,i.ssrc=o.ssrc);const c=e.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=c.length>0,i.compound=c.length===0;const u=e.matchPrefix(t,"a=rtcp-mux");return i.mux=u.length>0,i},e.writeRtcpParameters=function(t){let i="";return t.reducedSize&&(i+=`a=rtcp-rsize\r
`),t.mux&&(i+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(i+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),i},e.parseMsid=function(t){let i;const o=e.matchPrefix(t,"a=msid:");if(o.length===1)return i=o[0].substring(7).split(" "),{stream:i[0],track:i[1]};const c=e.matchPrefix(t,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(c.length>0)return i=c[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(t){const i=e.parseMLine(t),o=e.matchPrefix(t,"a=max-message-size:");let c;o.length>0&&(c=parseInt(o[0].substring(19),10)),isNaN(c)&&(c=65536);const u=e.matchPrefix(t,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:i.fmt,maxMessageSize:c};const m=e.matchPrefix(t,"a=sctpmap:");if(m.length>0){const g=m[0].substring(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:c}}},e.writeSctpDescription=function(t,i){let o=[];return t.protocol!=="DTLS/SCTP"?o=["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:o=["m="+t.kind+" 9 "+t.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&o.push("a=max-message-size:"+i.maxMessageSize+`\r
`),o.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,i,o){let c;const u=i!==void 0?i:2;return t?c=t:c=e.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+c+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,i){const o=e.splitLines(t);for(let c=0;c<o.length;c++)switch(o[c]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[c].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const o=e.splitLines(t)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},e.parseOLine=function(t){const o=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const i=e.splitLines(t);for(let o=0;o<i.length;o++)if(i[o].length<2||i[o].charAt(1)!=="=")return!1;return!0},r.exports=e})(qp)),qp.exports}var Z_=HS();const Qo=Fm(Z_),GS=_S({__proto__:null,default:Qo},[Z_]);function Dh(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const o=new e(i),c=Qo.parseCandidate(i.candidate);for(const u in c)u in o||Object.defineProperty(o,u,{value:c[u]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(i)},r.RTCIceCandidate.prototype=e.prototype,$a(r,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new r.RTCIceCandidate(t.candidate),writable:"false"}),t))}function cm(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||$a(r,"icecandidate",e=>{if(e.candidate){const t=Qo.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function jh(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(m){if(!m||!m.sdp)return!1;const g=Qo.splitSections(m.sdp);return g.shift(),g.some(y=>{const x=Qo.parseMLine(y);return x&&x.kind==="application"&&x.protocol.indexOf("SCTP")!==-1})},i=function(m){const g=m.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(g===null||g.length<2)return-1;const y=parseInt(g[1],10);return y!==y?-1:y},o=function(m){let g=65536;return e.browser==="firefox"&&(e.version<57?m===-1?g=16384:g=2147483637:e.version<60?g=e.version===57?65535:65536:g=2147483637),g},c=function(m,g){let y=65536;e.browser==="firefox"&&e.version===57&&(y=65535);const x=Qo.matchPrefix(m.sdp,"a=max-message-size:");return x.length>0?y=parseInt(x[0].substring(19),10):e.browser==="firefox"&&g!==-1&&(y=2147483637),y},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:g}=this.getConfiguration();g==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const g=i(arguments[0]),y=o(g),x=c(arguments[0],g);let w;y===0&&x===0?w=Number.POSITIVE_INFINITY:y===0||x===0?w=Math.max(y,x):w=Math.min(y,x);const S={};Object.defineProperty(S,"maxMessageSize",{get(){return w}}),this._sctp=S}return u.apply(this,arguments)}}function Oh(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(i,o){const c=i.send;i.send=function(){const m=arguments[0],g=m.length||m.size||m.byteLength;if(i.readyState==="open"&&o.sctp&&g>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return c.apply(i,arguments)}}const t=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const o=t.apply(this,arguments);return e(o,this),o},$a(r,"datachannel",i=>(e(i.channel,i.target),i))}function um(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const i=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const c=o.target;if(c._lastConnectionState!==c.connectionState){c._lastConnectionState=c.connectionState;const u=new Event("connectionstatechange",o);c.dispatchEvent(u)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function hm(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const c=o.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&o instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:o.type,sdp:c}):o.sdp=c}return t.apply(this,arguments)}}function Ph(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Mh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return t.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?t.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>t.apply(this,[u]))})}const qS=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:hm,shimAddIceCandidateNullOrEmpty:Ph,shimConnectionState:um,shimMaxMessageSize:jh,shimParameterlessSetLocalDescription:Mh,shimRTCIceCandidate:Dh,shimRTCIceCandidateRelayProtocol:cm,shimSendThrowTypeError:Oh},Symbol.toStringTag,{value:"Module"}));function FS({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=T_,i=zS(r),o={browserDetails:i,commonShim:qS,extractVersion:vc,disableLog:VS,disableWarnings:US,sdp:GS};switch(i.browser){case"chrome":if(!Cb||!om||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),o;if(i.version===null)return t("Chrome shim can not determine version, not shimming."),o;t("adapter.js shimming chrome."),o.browserShim=Cb,Ph(r,i),Mh(r),N_(r,i),A_(r),om(r,i),C_(r),D_(r,i),R_(r),k_(r),j_(r,i),Dh(r),cm(r),um(r),jh(r,i),Oh(r),hm(r,i);break;case"firefox":if(!Rb||!lm||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),o;t("adapter.js shimming firefox."),o.browserShim=Rb,Ph(r,i),Mh(r),O_(r,i),lm(r,i),P_(r),V_(r),M_(r),L_(r),U_(r),z_(r),B_(r),H_(r),G_(r),Dh(r),um(r),jh(r,i),Oh(r);break;case"safari":if(!kb||!e.shimSafari)return t("Safari shim is not included in this adapter release."),o;t("adapter.js shimming safari."),o.browserShim=kb,Ph(r,i),Mh(r),K_(r),J_(r),Y_(r),q_(r),F_(r),X_(r),$_(r),W_(r),Dh(r),cm(r),jh(r,i),Oh(r),hm(r,i);break;default:t("Unsupported browser!");break}return o}const Db=FS({window:typeof window>"u"?void 0:window});function Qa(r,e,t,i){Object.defineProperty(r,e,{get:t,set:i,enumerable:!0,configurable:!0})}class ew{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],i=e.byteLength,o=Math.ceil(i/this.chunkedMTU);let c=0,u=0;for(;u<i;){const m=Math.min(i,u+this.chunkedMTU),g=e.slice(u,m),y={__peerData:this._dataCount,n:c,data:g,total:o};t.push(y),u=m,c++}return this._dataCount++,t}}}function YS(r){let e=0;for(const o of r)e+=o.byteLength;const t=new Uint8Array(e);let i=0;for(const o of r)t.set(o,i),i+=o.byteLength;return t}const Fp=Db.default||Db,pc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?e>=this.minChromeVersion:r==="firefox"?e>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Fp.browserDetails.browser}getVersion(){return Fp.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),e=Fp.browserDetails.version||0;if(r==="chrome"&&e<this.minChromeVersion)return!1;if(r==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,i=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),i=!0}catch{}finally{t&&t.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},$S=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),tw=()=>Math.random().toString(36).slice(2),jb={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class QS extends ew{noop(){}blobToArrayBuffer(e,t){const i=new FileReader;return i.onload=function(o){o.target&&t(o.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=jb,this.browser=pc.getBrowser(),this.browserVersion=pc.getVersion(),this.pack=__,this.unpack=x_,this.supports=(function(){const t={browser:pc.isBrowserSupported(),webRTC:pc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let i;try{i=new RTCPeerConnection(jb),t.audioVideo=!0;let o;try{o=i.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!o.ordered;try{o.binaryType="blob",t.binaryBlob=!pc.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{i&&i.close()}return t})(),this.validateId=$S,this.randomToken=tw}}const Qn=new QS,KS="PeerJS: ";class XS{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const i=[KS,...t];for(const o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var ye=new XS,Qm={},JS=Object.prototype.hasOwnProperty,Ln="~";function Pc(){}Object.create&&(Pc.prototype=Object.create(null),new Pc().__proto__||(Ln=!1));function WS(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function nw(r,e,t,i,o){if(typeof t!="function")throw new TypeError("The listener must be a function");var c=new WS(t,i||r,o),u=Ln?Ln+e:e;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],c]:r._events[u].push(c):(r._events[u]=c,r._eventsCount++),r}function Lh(r,e){--r._eventsCount===0?r._events=new Pc:delete r._events[e]}function kn(){this._events=new Pc,this._eventsCount=0}kn.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)JS.call(t,i)&&e.push(Ln?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};kn.prototype.listeners=function(e){var t=Ln?Ln+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,c=i.length,u=new Array(c);o<c;o++)u[o]=i[o].fn;return u};kn.prototype.listenerCount=function(e){var t=Ln?Ln+e:e,i=this._events[t];return i?i.fn?1:i.length:0};kn.prototype.emit=function(e,t,i,o,c,u){var m=Ln?Ln+e:e;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,x,w;if(g.fn){switch(g.once&&this.removeListener(e,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,t),!0;case 3:return g.fn.call(g.context,t,i),!0;case 4:return g.fn.call(g.context,t,i,o),!0;case 5:return g.fn.call(g.context,t,i,o,c),!0;case 6:return g.fn.call(g.context,t,i,o,c,u),!0}for(w=1,x=new Array(y-1);w<y;w++)x[w-1]=arguments[w];g.fn.apply(g.context,x)}else{var S=g.length,L;for(w=0;w<S;w++)switch(g[w].once&&this.removeListener(e,g[w].fn,void 0,!0),y){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,t);break;case 3:g[w].fn.call(g[w].context,t,i);break;case 4:g[w].fn.call(g[w].context,t,i,o);break;default:if(!x)for(L=1,x=new Array(y-1);L<y;L++)x[L-1]=arguments[L];g[w].fn.apply(g[w].context,x)}}return!0};kn.prototype.on=function(e,t,i){return nw(this,e,t,i,!1)};kn.prototype.once=function(e,t,i){return nw(this,e,t,i,!0)};kn.prototype.removeListener=function(e,t,i,o){var c=Ln?Ln+e:e;if(!this._events[c])return this;if(!t)return Lh(this,c),this;var u=this._events[c];if(u.fn)u.fn===t&&(!o||u.once)&&(!i||u.context===i)&&Lh(this,c);else{for(var m=0,g=[],y=u.length;m<y;m++)(u[m].fn!==t||o&&!u[m].once||i&&u[m].context!==i)&&g.push(u[m]);g.length?this._events[c]=g.length===1?g[0]:g:Lh(this,c)}return this};kn.prototype.removeAllListeners=function(e){var t;return e?(t=Ln?Ln+e:e,this._events[t]&&Lh(this,t)):(this._events=new Pc,this._eventsCount=0),this};kn.prototype.off=kn.prototype.removeListener;kn.prototype.addListener=kn.prototype.on;kn.prefixed=Ln;kn.EventEmitter=kn;Qm=kn;var Ka={};Qa(Ka,"ConnectionType",()=>Bs);Qa(Ka,"PeerErrorType",()=>tn);Qa(Ka,"BaseConnectionErrorType",()=>dm);Qa(Ka,"DataConnectionErrorType",()=>Km);Qa(Ka,"SerializationType",()=>_d);Qa(Ka,"SocketEventType",()=>Us);Qa(Ka,"ServerMessageType",()=>An);var Bs=(function(r){return r.Data="data",r.Media="media",r})({}),tn=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),dm=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),Km=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),_d=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),Us=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),An=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const rw="1.5.5";class ZS extends Qm.EventEmitter{constructor(e,t,i,o,c,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const m=e?"wss://":"ws://";this._baseUrl=m+t+":"+i+o+"peerjs?key="+c}start(e,t){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+rw),this._disconnected=!1,this._socket.onmessage=o=>{let c;try{c=JSON.parse(o.data),ye.log("Server message received:",c)}catch{ye.log("Invalid server message",o.data);return}this.emit(Us.Message,c)},this._socket.onclose=o=>{this._disconnected||(ye.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Us.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),ye.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){ye.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:An.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Us.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class iw{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Bs.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const i=this.connection,o={ordered:!!e.reliable},c=t.createDataChannel(i.label,o);i._initializeDataChannel(c),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){ye.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,c=this.connection.provider;ye.log("Listening for ICE candidates."),e.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(ye.log(`Received ICE candidates for ${t}:`,u.candidate),c.socket.send({type:An.Candidate,payload:{candidate:u.candidate,type:o,connectionId:i},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":ye.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(dm.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":ye.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(dm.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":ye.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},ye.log("Listening for data channel"),e.ondatachannel=u=>{ye.log("Received data channel");const m=u.channel;c.getConnection(t,i)._initializeDataChannel(m)},ye.log("Listening for remote stream"),e.ontrack=u=>{ye.log("Received remote stream");const m=u.streams[0],g=c.getConnection(t,i);if(g.type===Bs.Media){const y=g;this._addStreamToMediaConnection(m,y)}}}cleanup(){ye.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let i=!1;const o=this.connection.dataChannel;o&&(i=!!o.readyState&&o.readyState!=="closed"),(t||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createOffer(this.connection.options.constraints);ye.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),ye.log("Set localDescription:",i,`for:${this.connection.peer}`);let o={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Bs.Data){const c=this.connection;o={...o,label:c.label,reliable:c.reliable,serialization:c.serialization}}t.socket.send({type:An.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(tn.WebRTC,o),ye.log("Failed to setLocalDescription, ",o))}}catch(i){t.emitError(tn.WebRTC,i),ye.log("Failed to createOffer, ",i)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createAnswer();ye.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),ye.log("Set localDescription:",i,`for:${this.connection.peer}`),t.socket.send({type:An.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){t.emitError(tn.WebRTC,o),ye.log("Failed to setLocalDescription, ",o)}}catch(i){t.emitError(tn.WebRTC,i),ye.log("Failed to create answer, ",i)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const i=this.connection.peerConnection,o=this.connection.provider;ye.log("Setting remote description",t);const c=this;try{await i.setRemoteDescription(t),ye.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await c._makeAnswer()}catch(u){o.emitError(tn.WebRTC,u),ye.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(e){ye.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),ye.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(tn.WebRTC,t),ye.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(ye.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return ye.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(i=>{t.addTrack(i,e)})}_addStreamToMediaConnection(e,t){ye.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class sw extends Qm.EventEmitter{emitError(e,t){ye.error("Error:",t),this.emit("error",new eN(`${e}`,t))}}class eN extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class aw extends sw{get open(){return this._open}constructor(e,t,i){super(),this.peer=e,this.provider=t,this.options=i,this._open=!1,this.metadata=i.metadata}}var Bm;const jc=class jc extends aw{get type(){return Bs.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,i){super(e,t,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||jc.ID_PREFIX+Qn.randomToken(),this._negotiator=new iw(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{ye.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{ye.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){ye.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,i=e.payload;switch(e.type){case An.Answer:this._negotiator.handleSDP(t,i.sdp),this._open=!0;break;case An.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:ye.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){ye.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const o of i)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Bm=new WeakMap,hc(jc,Bm,jc.ID_PREFIX="mc_");let Qh=jc;class tN{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:i,port:o,path:c,key:u}=this._options,m=new URL(`${t}://${i}:${o}${c}${u}/${e}`);return m.searchParams.set("ts",`${Date.now()}${Math.random()}`),m.searchParams.set("version",rw),fetch(m.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){ye.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==Qn.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===Qn.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw ye.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Hm,Gm;const Ma=class Ma extends aw{get type(){return Bs.Data}constructor(e,t,i){super(e,t,i),this.connectionId=this.options.connectionId||Ma.ID_PREFIX+tw(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new iw(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{ye.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{ye.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{ye.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(Km.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case An.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case An.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:ye.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Hm=new WeakMap,Gm=new WeakMap,hc(Ma,Hm,Ma.ID_PREFIX="dc_"),hc(Ma,Gm,Ma.MAX_BUFFERED_AMOUNT=8388608);let Kh=Ma;class Xm extends Kh{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Kh.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return ye.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Yp extends Xm{close(e){super.close(e),this._chunkedData={}}constructor(e,t,i){super(e,t,i),this.chunker=new ew,this.serialization=_d.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=x_(e),i=t.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,i=this._chunkedData[t]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[t]=i,i.total===i.count){delete this._chunkedData[t];const o=YS(i.data);this._handleDataMessage({data:o})}}_send(e,t){const i=__(e);if(i instanceof Promise)return this._send_blob(i);if(!t&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);ye.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const i of t)this.send(i,!0)}}class nN extends Xm{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=_d.None}}class rN extends Xm{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),i=t.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const i=this.encoder.encode(this.stringify(e));if(i.byteLength>=Qn.chunkedMTU){this.emitError(Km.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=_d.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var qm;const Oc=class Oc extends sw{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,i]of this._connections)e[t]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:nN,json:rN,binary:Yp,"binary-utf8":Yp,default:Yp},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(e&&e.constructor==Object?t=e:e&&(i=e.toString()),t={debug:0,host:Qn.CLOUD_HOST,port:Qn.CLOUD_PORT,path:"/",key:Oc.DEFAULT_KEY,token:Qn.randomToken(),config:Qn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Qn.CLOUD_HOST?this._options.secure=Qn.isSecure():this._options.host==Qn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&ye.setLogFunction(this._options.logFunction),ye.logLevel=this._options.debug||0,this._api=new tN(t),this._socket=this._createServerConnection(),!Qn.supports.audioVideo&&!Qn.supports.data){this._delayedAbort(tn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!Qn.validateId(i)){this._delayedAbort(tn.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(tn.ServerError,o))}_createServerConnection(){const e=new ZS(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Us.Message,t=>{this._handleMessage(t)}),e.on(Us.Error,t=>{this._abort(tn.SocketError,t)}),e.on(Us.Disconnected,()=>{this.disconnected||(this.emitError(tn.Network,"Lost connection to server."),this.disconnect())}),e.on(Us.Close,()=>{this.disconnected||this._abort(tn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,i=e.payload,o=e.src;switch(t){case An.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case An.Error:this._abort(tn.ServerError,i.msg);break;case An.IdTaken:this._abort(tn.UnavailableID,`ID "${this.id}" is taken`);break;case An.InvalidKey:this._abort(tn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case An.Leave:ye.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case An.Expire:this.emitError(tn.PeerUnavailable,`Could not connect to peer ${o}`);break;case An.Offer:{const c=i.connectionId;let u=this.getConnection(o,c);if(u&&(u.close(),ye.warn(`Offer received for existing Connection ID:${c}`)),i.type===Bs.Media){const g=new Qh(o,this,{connectionId:c,_payload:i,metadata:i.metadata});u=g,this._addConnection(o,u),this.emit("call",g)}else if(i.type===Bs.Data){const g=new this._serializers[i.serialization](o,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});u=g,this._addConnection(o,u),this.emit("connection",g)}else{ye.warn(`Received malformed connection type:${i.type}`);return}const m=this._getMessages(c);for(const g of m)u.handleMessage(g);break}default:{if(!i){ye.warn(`You received a malformed message from ${o} of type ${t}`);return}const c=i.connectionId,u=this.getConnection(o,c);u&&u.peerConnection?u.handleMessage(e):c?this._storeMessage(c,e):ye.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){ye.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(tn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,i),i}call(e,t,i={}){if(this.disconnected){ye.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(tn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){ye.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new Qh(e,this,{...i,_stream:t});return this._addConnection(e,o),o}_addConnection(e,t){ye.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const i=this._connections.get(e);if(!i)return null;for(const o of i)if(o.connectionId===t)return o;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){ye.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(ye.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const i of t)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;ye.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)ye.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)ye.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(tn.ServerError,t))}};qm=new WeakMap,hc(Oc,qm,Oc.DEFAULT_KEY="peerjs");let Xh=Oc;class iN{constructor(){this.peer=null,this.lockPeer=null,this.connections=new Map,this.hostId=null,this.isHost=!1,this.heartbeatInterval=null,this.retryCount=0,this.maxRetries=10,this.onStateReceived=null,this.onActionReceived=null,this.onConnectionStatus=null,this.onPeerConnected=null}async getPublicIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown-network"}catch(e){return console.warn("[Sync] Could not fetch public IP for lock, using fallback",e),"local-fallback"}}async initialize(e,t){if(this.isHost=e==="DJ",this.peer&&this.destroy(),this.isHost&&!t){const i=await this.getPublicIP(),o=`singmode-lock-${btoa(i).replace(/=/g,"").substr(0,12)}`;if(console.log(`[Sync] Attempting to claim network lock: ${o}`),!await new Promise(u=>{const m=new Xh(o,{debug:1});m.on("open",()=>{this.lockPeer=m,u(!0)}),m.on("error",g=>{g.type==="unavailable-id"?u(!1):u(!0),m.destroy()})}))throw new Error("COLLISION: A SingMode DJ session is already active on this network.")}return new Promise((i,o)=>{const c=this.isHost?t||`singmode-${Math.random().toString(36).substr(2,6)}`:void 0;this.peer=new Xh(c,{debug:1}),this.peer.on("open",u=>{console.log(`[Sync] Peer opened with ID: ${u}`),this.hostId=u,this.retryCount=0,this.startHeartbeat(),!this.isHost&&t&&this.connectToHost(t),this.onConnectionStatus&&(!t||this.connections.size>0)&&this.onConnectionStatus("connected"),i(u)}),this.peer.on("disconnected",()=>{var u;console.warn("[Sync] Peer disconnected from signaling server. Attempting reconnect..."),this.onConnectionStatus&&this.onConnectionStatus("connecting"),(u=this.peer)==null||u.reconnect()}),this.peer.on("connection",u=>{this.handleConnection(u)}),this.peer.on("error",u=>{var m;console.error("[Sync] Peer error:",u.type,u),u.type==="unavailable-id"?(this.destroy(),this.initialize(e).then(i).catch(o)):u.type==="network"||u.type==="server-error"||(m=u.message)!=null&&m.includes("Lost connection")?(this.onConnectionStatus&&this.onConnectionStatus("disconnected"),this.handleNetworkError(e,t)):u.type==="peer-unavailable"&&this.onConnectionStatus&&this.onConnectionStatus("disconnected")})})}handleNetworkError(e,t){if(this.retryCount<this.maxRetries){this.retryCount++;const i=Math.min(1e3*Math.pow(2,this.retryCount),3e4);console.log(`[Sync] Network failure. Retrying in ${i}ms... (Attempt ${this.retryCount})`),setTimeout(()=>{this.initialize(e,t)},i)}}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=window.setInterval(()=>{this.peer&&this.peer.disconnected&&!this.peer.destroyed&&this.peer.reconnect(),this.lockPeer&&this.lockPeer.disconnected&&!this.lockPeer.destroyed&&this.lockPeer.reconnect()},5e3)}connectToHost(e){if(!this.peer||this.isHost||this.peer.destroyed)return;this.onConnectionStatus&&this.onConnectionStatus("connecting");const t=this.peer.connect(e,{reliable:!0});this.handleConnection(t)}handleConnection(e){e.on("open",()=>{console.log(`[Sync] Data connection established with: ${e.peer}`),this.connections.set(e.peer,e),this.onConnectionStatus&&this.onConnectionStatus("connected"),this.isHost&&this.onPeerConnected&&this.onPeerConnected()}),e.on("data",t=>{t&&typeof t=="object"&&("type"in t?this.onActionReceived&&this.onActionReceived(t):"participants"in t&&this.onStateReceived&&this.onStateReceived(t))}),e.on("close",()=>{console.log(`[Sync] Connection closed: ${e.peer}`),this.connections.delete(e.peer),this.connections.size===0&&this.onConnectionStatus&&(this.isHost||this.onConnectionStatus("disconnected"))}),e.on("error",t=>{console.error("[Sync] Connection error:",t),this.connections.delete(e.peer)})}broadcastState(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}broadcastAction(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}sendAction(e){this.isHost||!this.peer||this.connections.forEach(t=>{t.open&&t.send(e)})}getRoomId(){return this.hostId}destroy(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.connections.forEach(e=>e.close()),this.connections.clear(),this.peer&&(this.peer.destroy(),this.peer=null),this.lockPeer&&(this.lockPeer.destroy(),this.lockPeer=null)}}const xt=new iN,sN=()=>{};var Ob={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aN=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[t++],u=r[t++],m=r[t++],g=((o&7)<<18|(c&63)<<12|(u&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],u=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},lw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],u=o+1<r.length,m=u?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,x=c>>2,w=(c&3)<<4|m>>4;let S=(m&15)<<2|y>>6,L=y&63;g||(L=64,u||(S=64)),i.push(t[x],t[w],t[S],t[L])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ow(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):aN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const w=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||m==null||y==null||w==null)throw new oN;const S=c<<2|m>>4;if(i.push(S),y!==64){const L=m<<4&240|y>>2;if(i.push(L),w!==64){const Q=y<<6&192|w;i.push(Q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class oN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lN=function(r){const e=ow(r);return lw.encodeByteArray(e,!0)},Jh=function(r){return lN(r).replace(/\./g,"")},cw=function(r){try{return lw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=()=>cN().__FIREBASE_DEFAULTS__,hN=()=>{if(typeof process>"u"||typeof Ob>"u")return;const r=Ob.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},dN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&cw(r[1]);return e&&JSON.parse(e)},wd=()=>{try{return sN()||uN()||hN()||dN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},uw=r=>{var e,t;return(t=(e=wd())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},fN=r=>{const e=uw(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},hw=()=>{var r;return(r=wd())==null?void 0:r.config},dw=r=>{var e;return(e=wd())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fw(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Jh(JSON.stringify(t)),Jh(JSON.stringify(u)),""].join(".")}const Nc={};function gN(){const r={prod:[],emulator:[]};for(const e of Object.keys(Nc))Nc[e]?r.emulator.push(e):r.prod.push(e);return r}function yN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Pb=!1;function pw(r,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||Nc[r]===e||Nc[r]||Pb)return;Nc[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",c=gN().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,L){S.setAttribute("width","24"),S.setAttribute("id",L),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Pb=!0,u()},S}function x(S,L){S.setAttribute("id",L),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=yN(i),L=t("text"),Q=document.getElementById(L)||document.createElement("span"),ne=t("learnmore"),ie=document.getElementById(ne)||document.createElement("a"),ge=t("preprendIcon"),Ee=document.getElementById(ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const xe=S.element;m(xe),x(ie,ne);const _e=y();g(Ee,ge),xe.append(Ee,Q,ie,_e),document.body.appendChild(xe)}c?(Q.innerText="Preview backend disconnected.",Ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function bN(){var e;const r=(e=wd())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _N(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function wN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EN(){const r=In();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function TN(){return!bN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SN(){try{return typeof indexedDB=="object"}catch{return!1}}function NN(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="FirebaseError";class Ji extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=AN,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fc.prototype.create)}}class Fc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?CN(c,i):"Error",m=`${this.serviceName}: ${u} (${o}).`;return new Ji(o,m,i)}}function CN(r,e){return r.replace(RN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const RN=/\{\$([^}]+)}/g;function kN(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ba(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=r[o],u=e[o];if(Mb(c)&&Mb(u)){if(!Ba(c,u))return!1}else if(c!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Mb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function bc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function xc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function IN(r,e){const t=new DN(r,e);return t.subscribe.bind(t)}class DN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");jN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=$p),o.error===void 0&&(o.error=$p),o.complete===void 0&&(o.complete=$p);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(r){return r&&r._delegate?r._delegate:r}class Ha{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new pN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MN(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:PN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PN(r){return r===Oa?void 0:r}function MN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ON(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const VN={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},UN=Ke.INFO,zN={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},BN=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=zN[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=UN,this._logHandler=BN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const HN=(r,e)=>e.some(t=>r instanceof t);let Lb,Vb;function GN(){return Lb||(Lb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qN(){return Vb||(Vb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mw=new WeakMap,fm=new WeakMap,gw=new WeakMap,Qp=new WeakMap,Wm=new WeakMap;function FN(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",u)},c=()=>{t(Hs(r.result)),o()},u=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&mw.set(t,r)}).catch(()=>{}),Wm.set(e,r),e}function YN(r){if(fm.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",u),r.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",u),r.addEventListener("abort",u)});fm.set(r,e)}let pm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return fm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||gw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $N(r){pm=r(pm)}function QN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Kp(this),e,...t);return gw.set(i,e.sort?e.sort():[e]),Hs(i)}:qN().includes(r)?function(...e){return r.apply(Kp(this),e),Hs(mw.get(this))}:function(...e){return Hs(r.apply(Kp(this),e))}}function KN(r){return typeof r=="function"?QN(r):(r instanceof IDBTransaction&&YN(r),HN(r,GN())?new Proxy(r,pm):r)}function Hs(r){if(r instanceof IDBRequest)return FN(r);if(Qp.has(r))return Qp.get(r);const e=KN(r);return e!==r&&(Qp.set(r,e),Wm.set(e,r)),e}const Kp=r=>Wm.get(r);function XN(r,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const u=indexedDB.open(r,e),m=Hs(u);return i&&u.addEventListener("upgradeneeded",g=>{i(Hs(u.result),g.oldVersion,g.newVersion,Hs(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const JN=["get","getKey","getAll","getAllKeys","count"],WN=["put","add","delete","clear"],Xp=new Map;function Ub(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=WN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||JN.includes(t)))return;const c=async function(u,...m){const g=this.transaction(u,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&g.done]))[0]};return Xp.set(e,c),c}$N(r=>({...r,get:(e,t,i)=>Ub(e,t)||r.get(e,t,i),has:(e,t)=>!!Ub(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(e2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function e2(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mm="@firebase/app",zb="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Jm("@firebase/app"),t2="@firebase/app-compat",n2="@firebase/analytics-compat",r2="@firebase/analytics",i2="@firebase/app-check-compat",s2="@firebase/app-check",a2="@firebase/auth",o2="@firebase/auth-compat",l2="@firebase/database",c2="@firebase/data-connect",u2="@firebase/database-compat",h2="@firebase/functions",d2="@firebase/functions-compat",f2="@firebase/installations",p2="@firebase/installations-compat",m2="@firebase/messaging",g2="@firebase/messaging-compat",y2="@firebase/performance",v2="@firebase/performance-compat",b2="@firebase/remote-config",x2="@firebase/remote-config-compat",_2="@firebase/storage",w2="@firebase/storage-compat",E2="@firebase/firestore",T2="@firebase/ai",S2="@firebase/firestore-compat",N2="firebase",A2="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="[DEFAULT]",C2={[mm]:"fire-core",[t2]:"fire-core-compat",[r2]:"fire-analytics",[n2]:"fire-analytics-compat",[s2]:"fire-app-check",[i2]:"fire-app-check-compat",[a2]:"fire-auth",[o2]:"fire-auth-compat",[l2]:"fire-rtdb",[c2]:"fire-data-connect",[u2]:"fire-rtdb-compat",[h2]:"fire-fn",[d2]:"fire-fn-compat",[f2]:"fire-iid",[p2]:"fire-iid-compat",[m2]:"fire-fcm",[g2]:"fire-fcm-compat",[y2]:"fire-perf",[v2]:"fire-perf-compat",[b2]:"fire-rc",[x2]:"fire-rc-compat",[_2]:"fire-gcs",[w2]:"fire-gcs-compat",[E2]:"fire-fst",[S2]:"fire-fst-compat",[T2]:"fire-vertex","fire-js":"fire-js",[N2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Map,R2=new Map,ym=new Map;function Bb(r,e){try{r.container.addComponent(e)}catch(t){Yi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function el(r){const e=r.name;if(ym.has(e))return Yi.debug(`There were multiple attempts to register component ${e}.`),!1;ym.set(e,r);for(const t of Wh.values())Bb(t,r);for(const t of R2.values())Bb(t,r);return!0}function Zm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function hr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new Fc("app","Firebase",k2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=A2;function yw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:gm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Gs.create("bad-app-name",{appName:String(o)});if(t||(t=hw()),!t)throw Gs.create("no-options");const c=Wh.get(o);if(c){if(Ba(t,c.options)&&Ba(i,c.config))return c;throw Gs.create("duplicate-app",{appName:o})}const u=new LN(o);for(const g of ym.values())u.addComponent(g);const m=new I2(t,i,u);return Wh.set(o,m),m}function vw(r=gm){const e=Wh.get(r);if(!e&&r===gm&&hw())return yw();if(!e)throw Gs.create("no-app",{appName:r});return e}function qs(r,e,t){let i=C2[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yi.warn(u.join(" "));return}el(new Ha(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="firebase-heartbeat-database",j2=1,Mc="firebase-heartbeat-store";let Jp=null;function bw(){return Jp||(Jp=XN(D2,j2,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Mc)}catch(t){console.warn(t)}}}}).catch(r=>{throw Gs.create("idb-open",{originalErrorMessage:r.message})})),Jp}async function O2(r){try{const t=(await bw()).transaction(Mc),i=await t.objectStore(Mc).get(xw(r));return await t.done,i}catch(e){if(e instanceof Ji)Yi.warn(e.message);else{const t=Gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yi.warn(t.message)}}}async function Hb(r,e){try{const i=(await bw()).transaction(Mc,"readwrite");await i.objectStore(Mc).put(e,xw(r)),await i.done}catch(t){if(t instanceof Ji)Yi.warn(t.message);else{const i=Gs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Yi.warn(i.message)}}}function xw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=1024,M2=30;class L2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new U2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Gb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>M2){const u=z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Yi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gb(),{heartbeatsToSend:i,unsentEntries:o}=V2(this._heartbeatsCache.heartbeats),c=Jh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Yi.warn(t),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function V2(r,e=P2){const t=[];let i=r.slice();for(const o of r){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),qb(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),qb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class U2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SN()?NN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await O2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qb(r){return Jh(JSON.stringify({version:2,heartbeats:r})).length}function z2(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(r){el(new Ha("platform-logger",e=>new ZN(e),"PRIVATE")),el(new Ha("heartbeat",e=>new L2(e),"PRIVATE")),qs(mm,zb,r),qs(mm,zb,"esm2020"),qs("fire-js","")}B2("");var H2="firebase",G2="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs(H2,G2,"app");function _w(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q2=_w,ww=new Fc("auth","Firebase",_w());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Jm("@firebase/auth");function F2(r,...e){Zh.logLevel<=Ke.WARN&&Zh.warn(`Auth (${ll}): ${r}`,...e)}function Vh(r,...e){Zh.logLevel<=Ke.ERROR&&Zh.error(`Auth (${ll}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(r,...e){throw eg(r,...e)}function hi(r,...e){return eg(r,...e)}function Ew(r,e,t){const i={...q2(),[e]:t};return new Fc("auth","Firebase",i).create(e,{appName:r.name})}function di(r){return Ew(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eg(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return ww.create(r,...e)}function Re(r,e,...t){if(!r)throw eg(e,...t)}function Hi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Vh(e),new Error(e)}function $i(r,e){r||Hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function Y2(){return Fb()==="http:"||Fb()==="https:"}function Fb(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y2()||_N()||"connection"in navigator)?navigator.onLine:!0}function Q2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=vN()||wN()}get(){return $2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(r,e){$i(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J2=new $c(3e4,6e4);function ea(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ta(r,e,t,i,o={}){return Sw(r,o,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const m=Yc({key:r.config.apiKey,...u}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...c};return xN()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&ol(r.emulatorConfig.host)&&(y.credentials="include"),Tw.fetch()(await Nw(r,r.config.apiHost,t,m),y)})}async function Sw(r,e,t){r._canInitEmulator=!1;const i={...K2,...e};try{const o=new Z2(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Th(r,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const m=c.ok?u.errorMessage:u.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(r,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Th(r,"email-already-in-use",u);if(g==="USER_DISABLED")throw Th(r,"user-disabled",u);const x=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Ew(r,x,y);Yr(r,x)}}catch(o){if(o instanceof Ji)throw o;Yr(r,"network-request-failed",{message:String(o)})}}async function Qc(r,e,t,i,o={}){const c=await ta(r,e,t,i,o);return"mfaPendingCredential"in c&&Yr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Nw(r,e,t,i){const o=`${e}${t}?${i}`,c=r,u=c.config.emulator?tg(r.config,o):`${r.config.apiScheme}://${o}`;return X2.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function W2(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(hi(this.auth,"network-request-failed")),J2.get())})}}function Th(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=hi(r,e,i);return o.customData._tokenResponse=t,o}function Yb(r){return r!==void 0&&r.enterprise!==void 0}class eA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return W2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tA(r,e){return ta(r,"GET","/v2/recaptchaConfig",ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(r,e){return ta(r,"POST","/v1/accounts:delete",e)}async function ed(r,e){return ta(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rA(r,e=!1){const t=dn(r),i=await t.getIdToken(e),o=ng(i);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:Ac(Wp(o.auth_time)),issuedAtTime:Ac(Wp(o.iat)),expirationTime:Ac(Wp(o.exp)),signInProvider:u||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Wp(r){return Number(r)*1e3}function ng(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const o=cw(t);return o?JSON.parse(o):(Vh("Failed to decode base64 JWT payload"),null)}catch(o){return Vh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function $b(r){const e=ng(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ji&&iA(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function iA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(r){var w;const e=r.auth,t=await r.getIdToken(),i=await Lc(r,ed(e,{idToken:t}));Re(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const c=(w=o.providerUserInfo)!=null&&w.length?Aw(o.providerUserInfo):[],u=oA(r.providerData,c),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(u!=null&&u.length),y=m?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,x)}async function aA(r){const e=dn(r);await td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oA(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Aw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(r,e){const t=await Sw(r,{},async()=>{const i=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,u=await Nw(r,o,"/v1/token",`key=${c}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return r.emulatorConfig&&ol(r.emulatorConfig.host)&&(g.credentials="include"),Tw.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cA(r,e){return ta(r,"POST","/v2/accounts:revokeToken",ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=$b(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await lA(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,u=new Ko;return i&&(Re(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Re(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Re(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Gr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new sA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Lc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rA(this,e)}reload(){return aA(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await td(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await Lc(this,nA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:L,providerData:Q,stsTokenManager:ne}=t;Re(w&&ne,e,"internal-error");const ie=Ko.fromJSON(this.name,ne);Re(typeof w=="string",e,"internal-error"),js(i,e.name),js(o,e.name),Re(typeof S=="boolean",e,"internal-error"),Re(typeof L=="boolean",e,"internal-error"),js(c,e.name),js(u,e.name),js(m,e.name),js(g,e.name),js(y,e.name),js(x,e.name);const ge=new Gr({uid:w,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:L,photoURL:u,phoneNumber:c,tenantId:m,stsTokenManager:ie,createdAt:y,lastLoginAt:x});return Q&&Array.isArray(Q)&&(ge.providerData=Q.map(Ee=>({...Ee}))),g&&(ge._redirectEventId=g),ge}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ko;o.updateFromServerResponse(t);const c=new Gr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await td(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Aw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),m=new Ko;m.updateFromIdToken(i);const g=new Gr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=new Map;function Gi(r){$i(r instanceof Function,"Expected a class definition");let e=Qb.get(r);return e?($i(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Qb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Cw.type="NONE";const Kb=Cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(r,e,t){return`firebase:${r}:${e}:${t}`}class Xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Uh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Uh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ed(this.auth,{idToken:e}).catch(()=>{});return t?Gr._fromGetAccountInfoResponse(this.auth,t,e):null}return Gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Xo(Gi(Kb),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Gi(Kb);const u=Uh(i,e.config.apiKey,e.name);let m=null;for(const y of t)try{const x=await y._get(u);if(x){let w;if(typeof x=="string"){const S=await ed(e,{idToken:x}).catch(()=>{});if(!S)break;w=await Gr._fromGetAccountInfoResponse(e,S,x)}else w=Gr._fromJSON(e,x);y!==c&&(m=w),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Xo(c,e,i):(c=g[0],m&&await c._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new Xo(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ow(e))return"Blackberry";if(Pw(e))return"Webos";if(kw(e))return"Safari";if((e.includes("chrome/")||Iw(e))&&!e.includes("edge/"))return"Chrome";if(jw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Rw(r=In()){return/firefox\//i.test(r)}function kw(r=In()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Iw(r=In()){return/crios\//i.test(r)}function Dw(r=In()){return/iemobile/i.test(r)}function jw(r=In()){return/android/i.test(r)}function Ow(r=In()){return/blackberry/i.test(r)}function Pw(r=In()){return/webos/i.test(r)}function rg(r=In()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function uA(r=In()){var e;return rg(r)&&!!((e=window.navigator)!=null&&e.standalone)}function hA(){return EN()&&document.documentMode===10}function Mw(r=In()){return rg(r)||jw(r)||Pw(r)||Ow(r)||/windows phone/i.test(r)||Dw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(r,e=[]){let t;switch(r){case"Browser":t=Xb(In());break;case"Worker":t=`${Xb(In())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ll}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((u,m)=>{try{const g=e(c);u(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(r,e={}){return ta(r,"GET","/v2/passwordPolicy",ea(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=6;class mA{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??pA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jb(this),this.idTokenSubscription=new Jb(this),this.beforeStateQueue=new dA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gi(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ed(this,{idToken:e}),i=await Gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(hr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(c=this.redirectUser)==null?void 0:c._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await td(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(di(this));const t=e?dn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fA(this),t=new mA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await cA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gi(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[Gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&F2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function na(r){return dn(r)}class Jb{constructor(e){this.auth=e,this.observer=null,this.addObserver=IN(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yA(r){Ed=r}function Vw(r){return Ed.loadJS(r)}function vA(){return Ed.recaptchaEnterpriseScript}function bA(){return Ed.gapiScript}function xA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class _A{constructor(){this.enterprise=new wA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class wA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const EA="recaptcha-enterprise",Uw="NO_RECAPTCHA";class TA{constructor(e){this.type=EA,this.auth=na(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,m)=>{tA(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new eA(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,u(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,u,m){const g=window.grecaptcha;Yb(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{u(y)}).catch(()=>{u(Uw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _A().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{i(this.auth).then(m=>{if(!t&&Yb(window.grecaptcha))o(m,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=vA();g.length!==0&&(g+=m),Vw(g).then(()=>{o(m,c,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function Wb(r,e,t,i=!1,o=!1){const c=new TA(r);let u;if(o)u=Uw;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function xm(r,e,t,i,o){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Wb(r,e,t,t==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Wb(r,e,t,t==="getOobCode");return i(r,m)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(r,e){const t=Zm(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ba(c,e??{}))return o;Yr(o,"already-initialized")}return t.initialize({options:e})}function NA(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Gi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function AA(r,e,t){const i=na(r);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=zw(e),{host:u,port:m}=CA(e),g=m===null?"":`:${m}`,y={url:`${c}//${u}${g}/`},x=Object.freeze({host:u,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(Ba(y,i.config.emulator)&&Ba(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,ol(u)?(fw(`${c}//${u}${g}`),pw("Auth",!0)):RA()}function zw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function CA(r){const e=zw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:Zb(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:Zb(u)}}}function Zb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function RA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hi("not implemented")}_getIdTokenResponse(e){return Hi("not implemented")}_linkToIdToken(e,t){return Hi("not implemented")}_getReauthenticationResolver(e){return Hi("not implemented")}}async function kA(r,e){return ta(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(r,e){return Qc(r,"POST","/v1/accounts:signInWithPassword",ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(r,e){return Qc(r,"POST","/v1/accounts:signInWithEmailLink",ea(r,e))}async function jA(r,e){return Qc(r,"POST","/v1/accounts:signInWithEmailLink",ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends ig{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Vc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Vc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xm(e,t,"signInWithPassword",IA);case"emailLink":return DA(e,{email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xm(e,i,"signUpPassword",kA);case"emailLink":return jA(e,{idToken:t,email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r,e){return Qc(r,"POST","/v1/accounts:signInWithIdp",ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class Ga extends ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const u=new Ga(i,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Jo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Jo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}buildRequest(){const e={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MA(r){const e=bc(xc(r)).link,t=e?bc(xc(e)).deep_link_id:null,i=bc(xc(r)).deep_link_id;return(i?bc(xc(i)).link:null)||i||t||e||r}class sg{constructor(e){const t=bc(xc(e)),i=t.apiKey??null,o=t.oobCode??null,c=PA(t.mode??null);Re(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=MA(e);try{return new sg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.providerId=cl.PROVIDER_ID}static credential(e,t){return Vc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=sg.parseLink(t);return Re(i,"argument-error"),Vc._fromEmailAndCode(e,i.code,i.tenantId)}}cl.PROVIDER_ID="password";cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Bw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Kc{constructor(){super("facebook.com")}static credential(e){return Ga._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ga._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ms.credential(t,i)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Kc{constructor(){super("github.com")}static credential(e){return Ga._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.GITHUB_SIGN_IN_METHOD="github.com";Ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Kc{constructor(){super("twitter.com")}static credential(e,t){return Ga._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Vs.credential(t,i)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(r,e){return Qc(r,"POST","/v1/accounts:signUp",ea(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await Gr._fromIdTokenResponse(e,i,o),u=ex(i);return new Qi({user:c,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ex(i);return new Qi({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ex(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(r){var o;if(hr(r.app))return Promise.reject(di(r));const e=na(r);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Qi({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Hw(e,{returnSecureToken:!0}),i=await Qi._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends Ji{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,nd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new nd(e,t,i,o)}}function Gw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?nd._fromErrorAndOperation(r,c,e,i):c})}async function VA(r,e,t=!1){const i=await Lc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Qi._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(r,e,t=!1){const{auth:i}=r;if(hr(i.app))return Promise.reject(di(i));const o="reauthenticate";try{const c=await Lc(r,Gw(i,o,e,r),t);Re(c.idToken,i,"internal-error");const u=ng(c.idToken);Re(u,i,"internal-error");const{sub:m}=u;return Re(r.uid===m,i,"user-mismatch"),Qi._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Yr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(r,e,t=!1){if(hr(r.app))return Promise.reject(di(r));const i="signIn",o=await Gw(r,i,e),c=await Qi._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(c.user),c}async function zA(r,e){return qw(na(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(r){const e=na(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tx(r,e,t){if(hr(r.app))return Promise.reject(di(r));const i=na(r),u=await xm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hw).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Fw(r),g}),m=await Qi._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(m.user),m}function BA(r,e,t){return hr(r.app)?Promise.reject(di(r)):zA(dn(r),cl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Fw(r),i})}function HA(r,e,t,i){return dn(r).onIdTokenChanged(e,t,i)}function GA(r,e,t){return dn(r).beforeAuthStateChanged(e,t)}function qA(r){return dn(r).signOut()}const rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=1e3,YA=10;class $w extends Yw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);hA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,YA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},FA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$w.type="LOCAL";const $A=$w;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw extends Yw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qw.type="SESSION";const Kw=Qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Td(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(u).map(async y=>y(t.origin,c)),g=await QA(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((m,g)=>{const y=ag("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(S.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function XA(r){fi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function JA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function ZA(){return Xw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="firebaseLocalStorageDb",eC=1,id="firebaseLocalStorage",Ww="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sd(r,e){return r.transaction([id],e?"readwrite":"readonly").objectStore(id)}function tC(){const r=indexedDB.deleteDatabase(Jw);return new Xc(r).toPromise()}function _m(){const r=indexedDB.open(Jw,eC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(id,{keyPath:Ww})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(id)?e(i):(i.close(),await tC(),e(await _m()))})})}async function nx(r,e,t){const i=Sd(r,!0).put({[Ww]:e,value:t});return new Xc(i).toPromise()}async function nC(r,e){const t=Sd(r,!1).get(e),i=await new Xc(t).toPromise();return i===void 0?null:i.value}function rx(r,e){const t=Sd(r,!0).delete(e);return new Xc(t).toPromise()}const rC=800,iC=3;class Zw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>iC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Td._getInstance(ZA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await JA(),!this.activeServiceWorker)return;this.sender=new KA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await nx(e,rd,"1"),await rx(e,rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>nx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>nC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Sd(o,!1).getAll();return new Xc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zw.type="LOCAL";const sC=Zw;new $c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(r,e){return e?Gi(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oC(r){return qw(r.auth,new og(r),r.bypassAuthState)}function lC(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),UA(t,new og(r),r.bypassAuthState)}async function cC(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),VA(t,new og(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oC;case"linkViaPopup":case"linkViaRedirect":return cC;case"reauthViaPopup":case"reauthViaRedirect":return lC;default:Yr(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new $c(2e3,1e4);class $o extends eE{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,$o.currentPopupAction&&$o.currentPopupAction.cancel(),$o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uC.get())};e()}}$o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="pendingRedirect",zh=new Map;class dC extends eE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=zh.get(this.auth._key());if(!e){try{const i=await fC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}zh.set(this.auth._key(),e)}return this.bypassAuthState||zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fC(r,e){const t=gC(e),i=mC(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function pC(r,e){zh.set(r._key(),e)}function mC(r){return Gi(r._redirectPersistence)}function gC(r){return Uh(hC,r.config.apiKey,r.name)}async function yC(r,e,t=!1){if(hr(r.app))return Promise.reject(di(r));const i=na(r),o=aC(i,e),u=await new dC(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=600*1e3;class bC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!tE(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(hi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vC&&this.cachedEventUids.clear(),this.cachedEventUids.has(ix(e))}saveEventToCache(e){this.cachedEventUids.add(ix(e)),this.lastProcessedEventTime=Date.now()}}function ix(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function tE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(r,e={}){return ta(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EC=/^https?/;async function TC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _C(r);for(const t of e)try{if(SC(t))return}catch{}Yr(r,"unauthorized-domain")}function SC(r){const e=vm(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!EC.test(t))return!1;if(wC.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new $c(3e4,6e4);function sx(){const r=fi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function AC(r){return new Promise((e,t)=>{var o,c,u;function i(){sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sx(),t(hi(r,"network-request-failed"))},timeout:NC.get()})}if((c=(o=fi().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((u=fi().gapi)!=null&&u.load)i();else{const m=xA("iframefcb");return fi()[m]=()=>{gapi.load?i():t(hi(r,"network-request-failed"))},Vw(`${bA()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Bh=null,e})}let Bh=null;function CC(r){return Bh=Bh||AC(r),Bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new $c(5e3,15e3),kC="__/auth/iframe",IC="emulator/auth/iframe",DC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OC(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?tg(e,IC):`https://${r.config.authDomain}/${kC}`,i={apiKey:e.apiKey,appName:r.name,v:ll},o=jC.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Yc(i).slice(1)}`}async function PC(r){const e=await CC(r),t=fi().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:OC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DC,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const u=hi(r,"network-request-failed"),m=fi().setTimeout(()=>{c(u)},RC.get());function g(){fi().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LC=500,VC=600,UC="_blank",zC="http://localhost";class ax{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BC(r,e,t,i=LC,o=VC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...MC,width:i.toString(),height:o.toString(),top:c,left:u},y=In().toLowerCase();t&&(m=Iw(y)?UC:t),Rw(y)&&(e=e||zC,g.scrollbars="yes");const x=Object.entries(g).reduce((S,[L,Q])=>`${S}${L}=${Q},`,"");if(uA(y)&&m!=="_self")return HC(e||"",m),new ax(null);const w=window.open(e||"",m,x);Re(w,r,"popup-blocked");try{w.focus()}catch{}return new ax(w)}function HC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="__/auth/handler",qC="emulator/auth/handler",FC=encodeURIComponent("fac");async function ox(r,e,t,i,o,c){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ll,eventId:o};if(e instanceof Bw){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",kN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,w]of Object.entries({}))u[x]=w}if(e instanceof Kc){const x=e.getScopes().filter(w=>w!=="");x.length>0&&(u.scopes=x.join(","))}r.tenantId&&(u.tid=r.tenantId);const m=u;for(const x of Object.keys(m))m[x]===void 0&&delete m[x];const g=await r._getAppCheckToken(),y=g?`#${FC}=${encodeURIComponent(g)}`:"";return`${YC(r)}?${Yc(m).slice(1)}${y}`}function YC({config:r}){return r.emulator?tg(r,qC):`https://${r.authDomain}/${GC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="webStorageSupport";class $C{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kw,this._completeRedirectFn=yC,this._overrideRedirectResult=pC}async _openPopup(e,t,i,o){var u;$i((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await ox(e,t,i,vm(),o);return BC(e,c,ag())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await ox(e,t,i,vm(),o);return XA(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):($i(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await PC(e),i=new bC(e);return t.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zp,{type:Zp},o=>{var u;const c=(u=o==null?void 0:o[0])==null?void 0:u[Zp];c!==void 0&&t(!!c),Yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mw()||kw()||rg()}}const QC=$C;var lx="@firebase/auth",cx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JC(r){el(new Ha("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=i.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lw(r)},y=new gA(i,o,c,g);return NA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),el(new Ha("auth-internal",e=>{const t=na(e.getProvider("auth").getImmediate());return(i=>new KC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(lx,cx,XC(r)),qs(lx,cx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=300,ZC=dw("authIdTokenMaxAge")||WC;let ux=null;const eR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ZC)return;const o=t==null?void 0:t.token;ux!==o&&(ux=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function tR(r=vw()){const e=Zm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=SA(r,{popupRedirectResolver:QC,persistence:[sC,$A,Kw]}),i=dw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=eR(c.toString());GA(t,u,()=>u(t.currentUser)),HA(t,m=>u(m))}}const o=uw("auth");return o&&AA(t,`http://${o}`),t}function nR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}yA({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=hi("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",nR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JC("Browser");var hx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,nE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function R(){}R.prototype=A.prototype,C.F=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(M,D,j){for(var k=Array(arguments.length-2),it=2;it<arguments.length;it++)k[it-2]=arguments[it];return A.prototype[D].apply(M,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,A,R){R||(R=0);const M=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)M[D]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(D=0;D<16;++D)M[D]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],D=C.g[2];let j=C.g[3],k;k=A+(j^R&(D^j))+M[0]+3614090360&4294967295,A=R+(k<<7&4294967295|k>>>25),k=j+(D^A&(R^D))+M[1]+3905402710&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(R^j&(A^R))+M[2]+606105819&4294967295,D=j+(k<<17&4294967295|k>>>15),k=R+(A^D&(j^A))+M[3]+3250441966&4294967295,R=D+(k<<22&4294967295|k>>>10),k=A+(j^R&(D^j))+M[4]+4118548399&4294967295,A=R+(k<<7&4294967295|k>>>25),k=j+(D^A&(R^D))+M[5]+1200080426&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(R^j&(A^R))+M[6]+2821735955&4294967295,D=j+(k<<17&4294967295|k>>>15),k=R+(A^D&(j^A))+M[7]+4249261313&4294967295,R=D+(k<<22&4294967295|k>>>10),k=A+(j^R&(D^j))+M[8]+1770035416&4294967295,A=R+(k<<7&4294967295|k>>>25),k=j+(D^A&(R^D))+M[9]+2336552879&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(R^j&(A^R))+M[10]+4294925233&4294967295,D=j+(k<<17&4294967295|k>>>15),k=R+(A^D&(j^A))+M[11]+2304563134&4294967295,R=D+(k<<22&4294967295|k>>>10),k=A+(j^R&(D^j))+M[12]+1804603682&4294967295,A=R+(k<<7&4294967295|k>>>25),k=j+(D^A&(R^D))+M[13]+4254626195&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(R^j&(A^R))+M[14]+2792965006&4294967295,D=j+(k<<17&4294967295|k>>>15),k=R+(A^D&(j^A))+M[15]+1236535329&4294967295,R=D+(k<<22&4294967295|k>>>10),k=A+(D^j&(R^D))+M[1]+4129170786&4294967295,A=R+(k<<5&4294967295|k>>>27),k=j+(R^D&(A^R))+M[6]+3225465664&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^R&(j^A))+M[11]+643717713&4294967295,D=j+(k<<14&4294967295|k>>>18),k=R+(j^A&(D^j))+M[0]+3921069994&4294967295,R=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(R^D))+M[5]+3593408605&4294967295,A=R+(k<<5&4294967295|k>>>27),k=j+(R^D&(A^R))+M[10]+38016083&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^R&(j^A))+M[15]+3634488961&4294967295,D=j+(k<<14&4294967295|k>>>18),k=R+(j^A&(D^j))+M[4]+3889429448&4294967295,R=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(R^D))+M[9]+568446438&4294967295,A=R+(k<<5&4294967295|k>>>27),k=j+(R^D&(A^R))+M[14]+3275163606&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^R&(j^A))+M[3]+4107603335&4294967295,D=j+(k<<14&4294967295|k>>>18),k=R+(j^A&(D^j))+M[8]+1163531501&4294967295,R=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(R^D))+M[13]+2850285829&4294967295,A=R+(k<<5&4294967295|k>>>27),k=j+(R^D&(A^R))+M[2]+4243563512&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^R&(j^A))+M[7]+1735328473&4294967295,D=j+(k<<14&4294967295|k>>>18),k=R+(j^A&(D^j))+M[12]+2368359562&4294967295,R=D+(k<<20&4294967295|k>>>12),k=A+(R^D^j)+M[5]+4294588738&4294967295,A=R+(k<<4&4294967295|k>>>28),k=j+(A^R^D)+M[8]+2272392833&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^R)+M[11]+1839030562&4294967295,D=j+(k<<16&4294967295|k>>>16),k=R+(D^j^A)+M[14]+4259657740&4294967295,R=D+(k<<23&4294967295|k>>>9),k=A+(R^D^j)+M[1]+2763975236&4294967295,A=R+(k<<4&4294967295|k>>>28),k=j+(A^R^D)+M[4]+1272893353&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^R)+M[7]+4139469664&4294967295,D=j+(k<<16&4294967295|k>>>16),k=R+(D^j^A)+M[10]+3200236656&4294967295,R=D+(k<<23&4294967295|k>>>9),k=A+(R^D^j)+M[13]+681279174&4294967295,A=R+(k<<4&4294967295|k>>>28),k=j+(A^R^D)+M[0]+3936430074&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^R)+M[3]+3572445317&4294967295,D=j+(k<<16&4294967295|k>>>16),k=R+(D^j^A)+M[6]+76029189&4294967295,R=D+(k<<23&4294967295|k>>>9),k=A+(R^D^j)+M[9]+3654602809&4294967295,A=R+(k<<4&4294967295|k>>>28),k=j+(A^R^D)+M[12]+3873151461&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^R)+M[15]+530742520&4294967295,D=j+(k<<16&4294967295|k>>>16),k=R+(D^j^A)+M[2]+3299628645&4294967295,R=D+(k<<23&4294967295|k>>>9),k=A+(D^(R|~j))+M[0]+4096336452&4294967295,A=R+(k<<6&4294967295|k>>>26),k=j+(R^(A|~D))+M[7]+1126891415&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~R))+M[14]+2878612391&4294967295,D=j+(k<<15&4294967295|k>>>17),k=R+(j^(D|~A))+M[5]+4237533241&4294967295,R=D+(k<<21&4294967295|k>>>11),k=A+(D^(R|~j))+M[12]+1700485571&4294967295,A=R+(k<<6&4294967295|k>>>26),k=j+(R^(A|~D))+M[3]+2399980690&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~R))+M[10]+4293915773&4294967295,D=j+(k<<15&4294967295|k>>>17),k=R+(j^(D|~A))+M[1]+2240044497&4294967295,R=D+(k<<21&4294967295|k>>>11),k=A+(D^(R|~j))+M[8]+1873313359&4294967295,A=R+(k<<6&4294967295|k>>>26),k=j+(R^(A|~D))+M[15]+4264355552&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~R))+M[6]+2734768916&4294967295,D=j+(k<<15&4294967295|k>>>17),k=R+(j^(D|~A))+M[13]+1309151649&4294967295,R=D+(k<<21&4294967295|k>>>11),k=A+(D^(R|~j))+M[4]+4149444226&4294967295,A=R+(k<<6&4294967295|k>>>26),k=j+(R^(A|~D))+M[11]+3174756917&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~R))+M[2]+718787259&4294967295,D=j+(k<<15&4294967295|k>>>17),k=R+(j^(D|~A))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+j&4294967295}i.prototype.v=function(C,A){A===void 0&&(A=C.length);const R=A-this.blockSize,M=this.C;let D=this.h,j=0;for(;j<A;){if(D==0)for(;j<=R;)o(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<A;)if(M[D++]=C.charCodeAt(j++),D==this.blockSize){o(this,M),D=0;break}}else for(;j<A;)if(M[D++]=C[j++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=A},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)C[A++]=this.g[R]>>>M&255;return C};function c(C,A){var R=m;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function u(C,A){this.h=A;const R=[];let M=!0;for(let D=C.length-1;D>=0;D--){const j=C[D]|0;M&&j==A||(R[D]=j,M=!1)}this.g=R}var m={};function g(C){return-128<=C&&C<128?c(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return w;if(C<0)return ie(y(-C));const A=[];let R=1;for(let M=0;C>=R;M++)A[M]=C/R|0,R*=4294967296;return new u(A,0)}function x(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return ie(x(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let M=w;for(let j=0;j<C.length;j+=8){var D=Math.min(8,C.length-j);const k=parseInt(C.substring(j,j+D),A);D<8?(D=y(Math.pow(A,D)),M=M.j(D).add(y(k))):(M=M.j(R),M=M.add(y(k)))}return M}var w=g(0),S=g(1),L=g(16777216);r=u.prototype,r.m=function(){if(ne(this))return-ie(this).m();let C=0,A=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);C+=(M>=0?M:4294967296+M)*A,A*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(Q(this))return"0";if(ne(this))return"-"+ie(this).toString(C);const A=y(Math.pow(C,6));var R=this;let M="";for(;;){const D=_e(R,A).g;R=ge(R,D.j(A));let j=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=D,Q(R))return j+M;for(;j.length<6;)j="0"+j;M=j+M}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function Q(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function ne(C){return C.h==-1}r.l=function(C){return C=ge(this,C),ne(C)?-1:Q(C)?0:1};function ie(C){const A=C.g.length,R=[];for(let M=0;M<A;M++)R[M]=~C.g[M];return new u(R,~C.h).add(S)}r.abs=function(){return ne(this)?ie(this):this},r.add=function(C){const A=Math.max(this.g.length,C.g.length),R=[];let M=0;for(let D=0;D<=A;D++){let j=M+(this.i(D)&65535)+(C.i(D)&65535),k=(j>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);M=k>>>16,j&=65535,k&=65535,R[D]=k<<16|j}return new u(R,R[R.length-1]&-2147483648?-1:0)};function ge(C,A){return C.add(ie(A))}r.j=function(C){if(Q(this)||Q(C))return w;if(ne(this))return ne(C)?ie(this).j(ie(C)):ie(ie(this).j(C));if(ne(C))return ie(this.j(ie(C)));if(this.l(L)<0&&C.l(L)<0)return y(this.m()*C.m());const A=this.g.length+C.g.length,R=[];for(var M=0;M<2*A;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<C.g.length;D++){const j=this.i(M)>>>16,k=this.i(M)&65535,it=C.i(D)>>>16,vt=C.i(D)&65535;R[2*M+2*D]+=k*vt,Ee(R,2*M+2*D),R[2*M+2*D+1]+=j*vt,Ee(R,2*M+2*D+1),R[2*M+2*D+1]+=k*it,Ee(R,2*M+2*D+1),R[2*M+2*D+2]+=j*it,Ee(R,2*M+2*D+2)}for(C=0;C<A;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=A;C<2*A;C++)R[C]=0;return new u(R,0)};function Ee(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function xe(C,A){this.g=C,this.h=A}function _e(C,A){if(Q(A))throw Error("division by zero");if(Q(C))return new xe(w,w);if(ne(C))return A=_e(ie(C),A),new xe(ie(A.g),ie(A.h));if(ne(A))return A=_e(C,ie(A)),new xe(ie(A.g),A.h);if(C.g.length>30){if(ne(C)||ne(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=A;M.l(C)<=0;)R=Ue(R),M=Ue(M);var D=Ae(R,1),j=Ae(M,1);for(M=Ae(M,2),R=Ae(R,2);!Q(M);){var k=j.add(M);k.l(C)<=0&&(D=D.add(R),j=k),M=Ae(M,1),R=Ae(R,1)}return A=ge(C,D.j(A)),new xe(D,A)}for(D=w;C.l(A)>=0;){for(R=Math.max(1,Math.floor(C.m()/A.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),j=y(R),k=j.j(A);ne(k)||k.l(C)>0;)R-=M,j=y(R),k=j.j(A);Q(j)&&(j=S),D=D.add(j),C=ge(C,k)}return new xe(D,C)}r.B=function(C){return _e(this,C).h},r.and=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)&C.i(M);return new u(R,this.h&C.h)},r.or=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)|C.i(M);return new u(R,this.h|C.h)},r.xor=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)^C.i(M);return new u(R,this.h^C.h)};function Ue(C){const A=C.g.length+1,R=[];for(let M=0;M<A;M++)R[M]=C.i(M)<<1|C.i(M-1)>>>31;return new u(R,C.h)}function Ae(C,A){const R=A>>5;A%=32;const M=C.g.length-R,D=[];for(let j=0;j<M;j++)D[j]=A>0?C.i(j+R)>>>A|C.i(j+R+1)<<32-A:C.i(j+R);return new u(D,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,nE=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=x,Fs=u}).apply(typeof hx<"u"?hx:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rE,_c,iE,Hh,wm,sE,aE,oE;(function(){var r,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var v=0;v<d.length;++v){var _=d[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(d,v){if(v)e:{var _=i;d=d.split(".");for(var N=0;N<d.length-1;N++){var z=d[N];if(!(z in _))break e;_=_[z]}d=d[d.length-1],N=_[d],v=v(N),v!=N&&v!=null&&e(_,d,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(v){var _=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&_.push([N,v[N]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function m(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,_){return d.call.apply(d.bind,arguments)}function y(d,v,_){return y=g,y.apply(null,arguments)}function x(d,v){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function w(d,v){function _(){}_.prototype=v.prototype,d.Z=v.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(N,z,q){for(var ce=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ce[Le-2]=arguments[Le];return v.prototype[z].apply(N,ce)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function L(d){const v=d.length;if(v>0){const _=Array(v);for(let N=0;N<v;N++)_[N]=d[N];return _}return[]}function Q(d,v){for(let N=1;N<arguments.length;N++){const z=arguments[N];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=d.length||0;const q=z.length||0;d.length=_+q;for(let ce=0;ce<q;ce++)d[_+ce]=z[ce]}else d.push(z)}}class ne{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function ie(d){u.setTimeout(()=>{throw d},0)}function ge(){var d=C;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Ee{constructor(){this.h=this.g=null}add(v,_){const N=xe.get();N.set(v,_),this.h?this.h.next=N:this.g=N,this.h=N}}var xe=new ne(()=>new _e,d=>d.reset());class _e{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Ae=!1,C=new Ee,A=()=>{const d=Promise.resolve(void 0);Ue=()=>{d.then(R)}};function R(){for(var d;d=ge();){try{d.h.call(d.g)}catch(_){ie(_)}var v=xe;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}Ae=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};u.addEventListener("test",_,v),u.removeEventListener("test",_,v)}catch{}return d})();function k(d){return/^[\s\xa0]*$/.test(d)}function it(d,v){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}w(it,D),it.prototype.init=function(d,v){const _=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(_=="mouseover"?v=d.fromElement:_=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var vt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function oe(d,v,_,N,z){this.listener=d,this.proxy=null,this.src=v,this.type=_,this.capture=!!N,this.ha=z,this.key=++Y,this.da=this.fa=!1}function we(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ie(d,v,_){for(const N in d)v.call(_,d[N],N,d)}function Be(d,v){for(const _ in d)v.call(void 0,d[_],_,d)}function P(d){const v={};for(const _ in d)v[_]=d[_];return v}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(d,v){let _,N;for(let z=1;z<arguments.length;z++){N=arguments[z];for(_ in N)d[_]=N[_];for(let q=0;q<$.length;q++)_=$[q],Object.prototype.hasOwnProperty.call(N,_)&&(d[_]=N[_])}}function he(d){this.src=d,this.g={},this.h=0}he.prototype.add=function(d,v,_,N,z){const q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);const ce=je(d,v,N,z);return ce>-1?(v=d[ce],_||(v.fa=!1)):(v=new oe(v,this.src,q,!!N,z),v.fa=_,d.push(v)),v};function Ce(d,v){const _=v.type;if(_ in d.g){var N=d.g[_],z=Array.prototype.indexOf.call(N,v,void 0),q;(q=z>=0)&&Array.prototype.splice.call(N,z,1),q&&(we(v),d.g[_].length==0&&(delete d.g[_],d.h--))}}function je(d,v,_,N){for(let z=0;z<d.length;++z){const q=d[z];if(!q.da&&q.listener==v&&q.capture==!!_&&q.ha==N)return z}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),te={};function ae(d,v,_,N,z){if(Array.isArray(v)){for(let q=0;q<v.length;q++)ae(d,v[q],_,N,z);return null}return _=aa(_),d&&d[vt]?d.J(v,_,m(N)?!!N.capture:!1,z):Me(d,v,_,!1,N,z)}function Me(d,v,_,N,z,q){if(!v)throw Error("Invalid event type");const ce=m(z)?!!z.capture:!!z;let Le=pr(d);if(Le||(d[qe]=Le=new he(d)),_=Le.add(v,_,N,ce,q),_.proxy)return _;if(N=St(),_.proxy=N,N.src=d,N.listener=_,d.addEventListener)j||(z=ce),z===void 0&&(z=!1),d.addEventListener(v.toString(),N,z);else if(d.attachEvent)d.attachEvent(He(v.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function St(){function d(_){return v.call(d.src,d.listener,_)}const v=pn;return d}function Yt(d,v,_,N,z){if(Array.isArray(v))for(var q=0;q<v.length;q++)Yt(d,v[q],_,N,z);else N=m(N)?!!N.capture:!!N,_=aa(_),d&&d[vt]?(d=d.i,q=String(v).toString(),q in d.g&&(v=d.g[q],_=je(v,_,N,z),_>-1&&(we(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete d.g[q],d.h--)))):d&&(d=pr(d))&&(v=d.g[v.toString()],d=-1,v&&(d=je(v,_,N,z)),(_=d>-1?v[d]:null)&&fn(_))}function fn(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[vt])Ce(v.i,d);else{var _=d.type,N=d.proxy;v.removeEventListener?v.removeEventListener(_,N,d.capture):v.detachEvent?v.detachEvent(He(_),N):v.addListener&&v.removeListener&&v.removeListener(N),(_=pr(v))?(Ce(_,d),_.h==0&&(_.src=null,v[qe]=null)):we(d)}}}function He(d){return d in te?te[d]:te[d]="on"+d}function pn(d,v){if(d.da)d=!0;else{v=new it(v,this);const _=d.listener,N=d.ha||d.src;d.fa&&fn(d),d=_.call(N,v)}return d}function pr(d){return d=d[qe],d instanceof he?d:null}var Dr="__closure_events_fn_"+(Math.random()*1e9>>>0);function aa(d){return typeof d=="function"?d:(d[Dr]||(d[Dr]=function(v){return d.handleEvent(v)}),d[Dr])}function Nt(){M.call(this),this.i=new he(this),this.M=this,this.G=null}w(Nt,M),Nt.prototype[vt]=!0,Nt.prototype.removeEventListener=function(d,v,_,N){Yt(this,d,v,_,N)};function It(d,v){var _,N=d.G;if(N)for(_=[];N;N=N.G)_.push(N);if(d=d.M,N=v.type||v,typeof v=="string")v=new D(v,d);else if(v instanceof D)v.target=v.target||d;else{var z=v;v=new D(N,d),ue(v,z)}z=!0;let q,ce;if(_)for(ce=_.length-1;ce>=0;ce--)q=v.g=_[ce],z=jr(q,N,!0,v)&&z;if(q=v.g=d,z=jr(q,N,!0,v)&&z,z=jr(q,N,!1,v)&&z,_)for(ce=0;ce<_.length;ce++)q=v.g=_[ce],z=jr(q,N,!1,v)&&z}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const _=d.g[v];for(let N=0;N<_.length;N++)we(_[N]);delete d.g[v],d.h--}}this.G=null},Nt.prototype.J=function(d,v,_,N){return this.i.add(String(d),v,!1,_,N)},Nt.prototype.K=function(d,v,_,N){return this.i.add(String(d),v,!0,_,N)};function jr(d,v,_,N){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let z=!0;for(let q=0;q<v.length;++q){const ce=v[q];if(ce&&!ce.da&&ce.capture==_){const Le=ce.listener,Bt=ce.ha||ce.src;ce.fa&&Ce(d.i,ce),z=Le.call(Bt,N)!==!1&&z}}return z&&!N.defaultPrevented}function Wi(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(d,v||0)}function Qr(d){d.g=Wi(()=>{d.g=null,d.i&&(d.i=!1,Qr(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class le extends M{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Qr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _t(d){M.call(this),this.h=d,this.g={}}w(_t,M);var Zi=[];function Jn(d){Ie(d.g,function(v,_){this.g.hasOwnProperty(_)&&fn(v)},d),d.g={}}_t.prototype.N=function(){_t.Z.N.call(this),Jn(this)},_t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sn=u.JSON.stringify,Kr=u.JSON.parse,vi=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Xr(){}function pe(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){D.call(this,"d")}w($t,D);function Vn(){D.call(this,"c")}w(Vn,D);var At={},es=null;function Jr(){return es=es||new Nt}At.Ia="serverreachability";function Za(d){D.call(this,At.Ia,d)}w(Za,D);function Zn(d){const v=Jr();It(v,new Za(v))}At.STAT_EVENT="statevent";function mr(d,v){D.call(this,At.STAT_EVENT,d),this.stat=v}w(mr,D);function Dt(d){const v=Jr();It(v,new mr(v,d))}At.Ja="timingevent";function gr(d,v){D.call(this,At.Ja,d),this.size=v}w(gr,D);function er(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function Un(){this.g=!0}Un.prototype.ua=function(){this.g=!1};function eo(d,v,_,N,z,q){d.info(function(){if(d.g)if(q){var ce="",Le=q.split("&");for(let st=0;st<Le.length;st++){var Bt=Le[st].split("=");if(Bt.length>1){const Rt=Bt[0];Bt=Bt[1];const wr=Rt.split("_");ce=wr.length>=2&&wr[1]=="type"?ce+(Rt+"="+Bt+"&"):ce+(Rt+"=redacted&")}}}else ce=null;else ce=q;return"XMLHTTP REQ ("+N+") [attempt "+z+"]: "+v+`
`+_+`
`+ce})}function oa(d,v,_,N,z,q,ce){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+z+"]: "+v+`
`+_+`
`+q+" "+ce})}function Dn(d,v,_,N){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+ml(d,_)+(N?" "+N:"")})}function Or(d,v){d.info(function(){return"TIMEOUT: "+v})}Un.prototype.info=function(){};function ml(d,v){if(!d.g)return v;if(!v)return null;try{const q=JSON.parse(v);if(q){for(d=0;d<q.length;d++)if(Array.isArray(q[d])){var _=q[d];if(!(_.length<2)){var N=_[1];if(Array.isArray(N)&&!(N.length<1)){var z=N[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ce=1;ce<N.length;ce++)N[ce]=""}}}}return sn(q)}catch{return v}}var bi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},la={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yr;function vr(){}w(vr,Xr),vr.prototype.g=function(){return new XMLHttpRequest},yr=new vr;function br(d){return encodeURIComponent(String(d))}function to(d){var v=1;d=d.split(":");const _=[];for(;v>0&&d.length;)_.push(d.shift()),v--;return d.length&&_.push(d.join(":")),_}function Qt(d,v,_,N){this.j=d,this.i=v,this.l=_,this.S=N||1,this.V=new _t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ln}function ln(){this.i=null,this.g="",this.h=!1}var Ct={},Ot={};function tr(d,v,_){d.M=1,d.A=ua(Kt(v)),d.u=_,d.R=!0,xi(d,null)}function xi(d,v){d.F=Date.now(),mn(d),d.B=Kt(d.A);var _=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),io(_.i,"t",N),d.C=0,_=d.j.L,d.h=new ln,d.g=yu(d.j,_?v:null,!d.u),d.P>0&&(d.O=new le(y(d.Y,d,d.g),d.P)),v=d.V,_=d.g,N=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(Zi[0]=z.toString()),z=Zi);for(let q=0;q<z.length;q++){const ce=ae(_,z[q],N||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Zn(),eo(d.i,d.v,d.B,d.l,d.S,d.u)}Qt.prototype.ba=function(d){d=d.target;const v=this.O;v&&Lr(d)==3?v.j():this.Y(d)},Qt.prototype.Y=function(d){try{if(d==this.g)e:{const Le=Lr(this.g),Bt=this.g.ya(),st=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||Le!=4||Bt==7||(Bt==8||st<=0?Zn(3):Zn(2)),nr(this);var v=this.g.ca();this.X=v;var _=ts(this);if(this.o=v==200,oa(this.i,this.v,this.B,this.l,this.S,Le,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,z=this.g;if((N=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(N)){var q=N;break t}}q=null}if(d=q)Dn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,V(this,d);else{this.o=!1,this.m=3,Dt(12),X(this),E(this);break e}}if(this.R){d=!0;let Rt;for(;!this.K&&this.C<_.length;)if(Rt=_i(this,_),Rt==Ot){Le==4&&(this.m=4,Dt(14),d=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Ct){this.m=4,Dt(15),Dn(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Dn(this.i,this.l,Rt,null),V(this,Rt);if(ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||_.length!=0||this.h.h||(this.m=1,Dt(16),d=!1),this.o=this.o&&d,!d)Dn(this.i,this.l,_,"[Invalid Chunked Response]"),X(this),E(this);else if(_.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Cl(ce),ce.P=!0,Dt(11))}}else Dn(this.i,this.l,_,null),V(this,_);Le==4&&X(this),this.o&&!this.K&&(Le==4?fu(this.j,this):(this.o=!1,mn(this)))}else Ti(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),X(this),E(this)}}}catch{}finally{}};function ts(d){if(!ca(d))return d.g.la();const v=gn(d.g);if(v==="")return"";let _="";const N=v.length,z=Lr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return X(d),E(d),"";d.h.i=new u.TextDecoder}for(let q=0;q<N;q++)d.h.h=!0,_+=d.h.i.decode(v[q],{stream:!(z&&q==N-1)});return v.length=0,d.h.g+=_,d.C=0,d.h.g}function ca(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function _i(d,v){var _=d.C,N=v.indexOf(`
`,_);return N==-1?Ot:(_=Number(v.substring(_,N)),isNaN(_)?Ct:(N+=1,N+_>v.length?Ot:(v=v.slice(N,N+_),d.C=N+_,v)))}Qt.prototype.cancel=function(){this.K=!0,X(this)};function mn(d){d.T=Date.now()+d.H,wi(d,d.H)}function wi(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=er(y(d.aa,d),v)}function nr(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Qt.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Or(this.i,this.B),this.M!=2&&(Zn(),Dt(17)),X(this),this.m=2,E(this)):wi(this,this.T-d)};function E(d){d.j.I==0||d.K||fu(d.j,d)}function X(d){nr(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,Jn(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function V(d,v){try{var _=d.j;if(_.I!=0&&(_.g==d||Wr(_.h,d))){if(!d.L&&Wr(_.h,d)&&_.I==3){try{var N=_.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var z=N;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)co(_),cs(_);else break e;ya(_),Dt(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=er(y(_.Va,_),6e3));zn(_.h)<=1&&_.ta&&(_.ta=void 0)}else ii(_,11)}else if((d.L||_.g==d)&&co(_),!k(v))for(z=_.Ba.g.parse(v),v=0;v<z.length;v++){let st=z[v];const Rt=st[0];if(!(Rt<=_.K))if(_.K=Rt,st=st[1],_.I==2)if(st[0]=="c"){_.M=st[1],_.ba=st[2];const wr=st[3];wr!=null&&(_.ka=wr,_.j.info("VER="+_.ka));const si=st[4];si!=null&&(_.za=si,_.j.info("SVER="+_.za));const Vr=st[5];Vr!=null&&typeof Vr=="number"&&Vr>0&&(N=1.5*Vr,_.O=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const Ur=d.g;if(Ur){const va=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var q=N.h;q.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(gl(q,q.h),q.h=null))}if(N.G){const uo=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(N.wa=uo,lt(N.J,N.G,uo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),N=_;var ce=d;if(N.na=gu(N,N.L?N.ba:null,N.W),ce.L){yl(N.h,ce);var Le=ce,Bt=N.O;Bt&&(Le.H=Bt),Le.D&&(nr(Le),mn(Le)),N.g=ce}else hu(N);_.i.length>0&&ri(_)}else st[0]!="stop"&&st[0]!="close"||ii(_,7);else _.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?ii(_,7):Nl(_):st[0]!="noop"&&_.l&&_.l.qa(st),_.A=0)}}Zn(4)}catch{}}var re=class{constructor(d,v){this.g=d,this.map=v}};function ve(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function zn(d){return d.h?1:d.g?d.g.size:0}function Wr(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function gl(d,v){d.g?d.g.add(v):d.h=v}function yl(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}ve.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function vl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const _ of d.g.values())v=v.concat(_.G);return v}return L(d.i)}var su=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function no(d,v){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const N=d[_].indexOf("=");let z,q=null;N>=0?(z=d[_].substring(0,N),q=d[_].substring(N+1)):z=d[_],v(z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function rr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof rr?(this.l=d.l,cn(this,d.j),this.o=d.o,this.g=d.g,ns(this,d.u),this.h=d.h,bl(this,cu(d.i)),this.m=d.m):d&&(v=String(d).match(su))?(this.l=!1,cn(this,v[1]||"",!0),this.o=Zr(v[2]||""),this.g=Zr(v[3]||"",!0),ns(this,v[4]),this.h=Zr(v[5]||"",!0),bl(this,v[6]||"",!0),this.m=Zr(v[7]||"")):(this.l=!1,this.i=new is(null,this.l))}rr.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(ha(v,ro,!0),":");var _=this.g;return(_||v=="file")&&(d.push("//"),(v=this.o)&&d.push(ha(v,ro,!0),"@"),d.push(br(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(ha(_,_.charAt(0)=="/"?xl:au,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",ha(_,ou)),d.join("")},rr.prototype.resolve=function(d){const v=Kt(this);let _=!!d.j;_?cn(v,d.j):_=!!d.o,_?v.o=d.o:_=!!d.g,_?v.g=d.g:_=d.u!=null;var N=d.h;if(_)ns(v,d.u);else if(_=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var z=v.h.lastIndexOf("/");z!=-1&&(N=v.h.slice(0,z+1)+N)}if(z=N,z==".."||z==".")N="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){N=z.lastIndexOf("/",0)==0,z=z.split("/");const q=[];for(let ce=0;ce<z.length;){const Le=z[ce++];Le=="."?N&&ce==z.length&&q.push(""):Le==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),N&&ce==z.length&&q.push("")):(q.push(Le),N=!0)}N=q.join("/")}else N=z}return _?v.h=N:_=d.i.toString()!=="",_?bl(v,cu(d.i)):_=!!d.m,_&&(v.m=d.m),v};function Kt(d){return new rr(d)}function cn(d,v,_){d.j=_?Zr(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function ns(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function bl(d,v,_){v instanceof is?(d.i=v,so(d.i,d.l)):(_||(v=ha(v,rs)),d.i=new is(v,d.l))}function lt(d,v,_){d.i.set(v,_)}function ua(d){return lt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Zr(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ha(d,v,_){return typeof d=="string"?(d=encodeURI(d).replace(v,Bn),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Bn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ro=/[#\/\?@]/g,au=/[#\?:]/g,xl=/[#\?]/g,rs=/[#\?@]/g,ou=/#/g;function is(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Hn(d){d.g||(d.g=new Map,d.h=0,d.i&&no(d.i,function(v,_){d.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}r=is.prototype,r.add=function(d,v){Hn(this),this.i=null,d=ss(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(v),this.h+=1,this};function lu(d,v){Hn(d),v=ss(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function _l(d,v){return Hn(d),v=ss(d,v),d.g.has(v)}r.forEach=function(d,v){Hn(this),this.g.forEach(function(_,N){_.forEach(function(z){d.call(v,z,N,this)},this)},this)};function wl(d,v){Hn(d);let _=[];if(typeof v=="string")_l(d,v)&&(_=_.concat(d.g.get(ss(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)_=_.concat(d[v]);return _}r.set=function(d,v){return Hn(this),this.i=null,d=ss(this,d),_l(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},r.get=function(d,v){return d?(d=wl(this,d),d.length>0?String(d[0]):v):v};function io(d,v,_){lu(d,v),_.length>0&&(d.i=null,d.g.set(ss(d,v),L(_)),d.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var _=v[N];const z=br(_);_=wl(this,_);for(let q=0;q<_.length;q++){let ce=z;_[q]!==""&&(ce+="="+br(_[q])),d.push(ce)}}return this.i=d.join("&")};function cu(d){const v=new is;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function ss(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function so(d,v){v&&!d.j&&(Hn(d),d.i=null,d.g.forEach(function(_,N){const z=N.toLowerCase();N!=z&&(lu(this,N),io(this,z,_))},d)),d.j=v}function Pr(d,v){const _=new Un;if(u.Image){const N=new Image;N.onload=x(xr,_,"TestLoadImage: loaded",!0,v,N),N.onerror=x(xr,_,"TestLoadImage: error",!1,v,N),N.onabort=x(xr,_,"TestLoadImage: abort",!1,v,N),N.ontimeout=x(xr,_,"TestLoadImage: timeout",!1,v,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else v(!1)}function El(d,v){const _=new Un,N=new AbortController,z=setTimeout(()=>{N.abort(),xr(_,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:N.signal}).then(q=>{clearTimeout(z),q.ok?xr(_,"TestPingServer: ok",!0,v):xr(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),xr(_,"TestPingServer: error",!1,v)})}function xr(d,v,_,N,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),N(_)}catch{}}function as(){this.g=new vi}function ei(d){this.i=d.Sb||null,this.h=d.ab||!1}w(ei,Xr),ei.prototype.g=function(){return new da(this.i,this.h)};function da(d,v){Nt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(da,Nt),r=da.prototype,r.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Mr(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Mr(this)),this.g&&(this.readyState=3,Mr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ao(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function ao(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?os(this):Mr(this),this.readyState==3&&ao(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,os(this))},r.Na=function(d){this.g&&(this.response=d,os(this))},r.ga=function(){this.g&&os(this)};function os(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Mr(d)}r.setRequestHeader=function(d,v){this.A.append(d,v)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=v.next();return d.join(`\r
`)};function Mr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function _r(d){let v="";return Ie(d,function(_,N){v+=N,v+=":",v+=_,v+=`\r
`}),v}function fa(d,v,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=_r(_),typeof d=="string"?_!=null&&br(_):lt(d,v,_))}function ht(d){Nt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ht,Nt);var ti=/^https?$/i,Tl=["POST","PUT"];r=ht.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,v,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yr.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(q){pa(this,q);return}if(d=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var z in N)_.set(z,N[z]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const q of N.keys())_.set(q,N.get(q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),z=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Tl,v,void 0)>=0)||N||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ce]of _)this.g.setRequestHeader(q,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(q){pa(this,q)}};function pa(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Sl(d),Ei(d)}function Sl(d){d.A||(d.A=!0,It(d,"complete"),It(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,It(this,"complete"),It(this,"abort"),Ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),ht.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ma(this):this.Xa())},r.Xa=function(){ma(this)};function ma(d){if(d.h&&typeof c<"u"){if(d.v&&Lr(d)==4)setTimeout(d.Ca.bind(d),0);else if(It(d,"readystatechange"),Lr(d)==4){d.h=!1;try{const q=d.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var N;if(N=q===0){let ce=String(d.D).match(su)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),N=!ti.test(ce?ce.toLowerCase():"")}_=N}if(_)It(d,"complete"),It(d,"success");else{d.o=6;try{var z=Lr(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",Sl(d)}}finally{Ei(d)}}}}function Ei(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,v||It(d,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Lr(d){return d.g?d.g.readyState:0}r.ca=function(){try{return Lr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Kr(v)}};function gn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ti(d){const v={};d=(d.g&&Lr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(k(d[N]))continue;var _=to(d[N]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=v[z]||[];v[z]=q,q.push(_)}Be(v,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ni(d,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||v}function ls(d){this.za=0,this.i=[],this.j=new Un,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ni("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ni("baseRetryDelayMs",5e3,d),this.Za=ni("retryDelaySeedMs",1e4,d),this.Ta=ni("forwardChannelMaxRetries",2,d),this.va=ni("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ve(d&&d.concurrentRequestLimit),this.Ba=new as,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ls.prototype,r.ka=8,r.I=1,r.connect=function(d,v,_,N){Dt(0),this.W=d,this.H=v||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.J=gu(this,null,this.W),ri(this)};function Nl(d){if(oo(d),d.I==3){var v=d.V++,_=Kt(d.J);if(lt(_,"SID",d.M),lt(_,"RID",v),lt(_,"TYPE","terminate"),ga(d,_),v=new Qt(d,d.j,v),v.M=2,v.A=ua(Kt(_)),_=!1,u.navigator&&u.navigator.sendBeacon)try{_=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&u.Image&&(new Image().src=v.A,_=!0),_||(v.g=yu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),mn(v)}mu(d)}function cs(d){d.g&&(Cl(d),d.g.cancel(),d.g=null)}function oo(d){cs(d),d.v&&(u.clearTimeout(d.v),d.v=null),co(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ri(d){if(!Pt(d.h)&&!d.m){d.m=!0;var v=d.Ea;Ue||A(),Ae||(Ue(),Ae=!0),C.add(v,d),d.D=0}}function lo(d,v){return zn(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=er(y(d.Ea,d,v),pu(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new Qt(this,this.j,d);let q=this.o;if(this.U&&(q?(q=P(q),ue(q,this.U)):q=this.U),this.u!==null||this.R||(z.J=q,q=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=uu(this,z,v),_=Kt(this.J),lt(_,"RID",d),lt(_,"CVER",22),this.G&&lt(_,"X-HTTP-Session-Id",this.G),ga(this,_),q&&(this.R?v="headers="+br(_r(q))+"&"+v:this.u&&fa(_,this.u,q)),gl(this.h,z),this.Ra&&lt(_,"TYPE","init"),this.S?(lt(_,"$req",v),lt(_,"SID","null"),z.U=!0,tr(z,_,null)):tr(z,_,v),this.I=2}}else this.I==3&&(d?Al(this,d):this.i.length==0||Pt(this.h)||Al(this))};function Al(d,v){var _;v?_=v.l:_=d.V++;const N=Kt(d.J);lt(N,"SID",d.M),lt(N,"RID",_),lt(N,"AID",d.K),ga(d,N),d.u&&d.o&&fa(N,d.u,d.o),_=new Qt(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),v&&(d.i=v.G.concat(d.i)),v=uu(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),gl(d.h,_),tr(_,N,v)}function ga(d,v){d.H&&Ie(d.H,function(_,N){lt(v,N,_)}),d.l&&Ie({},function(_,N){lt(v,N,_)})}function uu(d,v,_){_=Math.min(d.i.length,_);const N=d.l?y(d.l.Ka,d.l,d):null;e:{var z=d.i;let Le=-1;for(;;){const Bt=["count="+_];Le==-1?_>0?(Le=z[0].g,Bt.push("ofs="+Le)):Le=0:Bt.push("ofs="+Le);let st=!0;for(let Rt=0;Rt<_;Rt++){var q=z[Rt].g;const wr=z[Rt].map;if(q-=Le,q<0)Le=Math.max(0,z[Rt].g-100),st=!1;else try{q="req"+q+"_"||"";try{var ce=wr instanceof Map?wr:Object.entries(wr);for(const[si,Vr]of ce){let Ur=Vr;m(Vr)&&(Ur=sn(Vr)),Bt.push(q+si+"="+encodeURIComponent(Ur))}}catch(si){throw Bt.push(q+"type="+encodeURIComponent("_badmap")),si}}catch{N&&N(wr)}}if(st){ce=Bt.join("&");break e}}ce=void 0}return d=d.i.splice(0,_),v.G=d,ce}function hu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Ue||A(),Ae||(Ue(),Ae=!0),C.add(v,d),d.A=0}}function ya(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=er(y(d.Da,d),pu(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=er(y(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),cs(this),du(this))};function Cl(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function du(d){d.g=new Qt(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Kt(d.na);lt(v,"RID","rpc"),lt(v,"SID",d.M),lt(v,"AID",d.K),lt(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&lt(v,"TO",d.ia),lt(v,"TYPE","xmlhttp"),ga(d,v),d.u&&d.o&&fa(v,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=ua(Kt(v)),_.u=null,_.R=!0,xi(_,d)}r.Va=function(){this.C!=null&&(this.C=null,cs(this),ya(this),Dt(19))};function co(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function fu(d,v){var _=null;if(d.g==v){co(d),Cl(d),d.g=null;var N=2}else if(Wr(d.h,v))_=v.G,yl(d.h,v),N=1;else return;if(d.I!=0){if(v.o)if(N==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var z=d.D;N=Jr(),It(N,new gr(N,_)),ri(d)}else hu(d);else if(z=v.m,z==3||z==0&&v.X>0||!(N==1&&lo(d,v)||N==2&&ya(d)))switch(_&&_.length>0&&(v=d.h,v.i=v.i.concat(_)),z){case 1:ii(d,5);break;case 4:ii(d,10);break;case 3:ii(d,6);break;default:ii(d,2)}}}function pu(d,v){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*v}function ii(d,v){if(d.j.info("Error code "+v),v==2){var _=y(d.bb,d),N=d.Ua;const z=!N;N=new rr(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||cn(N,"https"),ua(N),z?Pr(N.toString(),_):El(N.toString(),_)}else Dt(2);d.I=0,d.l&&d.l.pa(v),mu(d),oo(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function mu(d){if(d.I=0,d.ja=[],d.l){const v=vl(d.h);(v.length!=0||d.i.length!=0)&&(Q(d.ja,v),Q(d.ja,d.i),d.h.i.length=0,L(d.i),d.i.length=0),d.l.oa()}}function gu(d,v,_){var N=_ instanceof rr?Kt(_):new rr(_);if(N.g!="")v&&(N.g=v+"."+N.g),ns(N,N.u);else{var z=u.location;N=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;const q=new rr(null);N&&cn(q,N),v&&(q.g=v),z&&ns(q,z),_&&(q.h=_),N=q}return _=d.G,v=d.wa,_&&v&&lt(N,_,v),lt(N,"VER",d.ka),ga(d,N),N}function yu(d,v,_){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new ht(new ei({ab:_})):new ht(d.ma),v.Fa(d.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}r=vu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function us(){}us.prototype.g=function(d,v){return new jn(d,v)};function jn(d,v){Nt.call(this),this.g=new ls(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!k(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!k(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Si(this)}w(jn,Nt),jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){Nl(this.g)},jn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=sn(d),d=_);v.i.push(new re(v.Ya++,d)),v.I==3&&ri(v)},jn.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,jn.Z.N.call(this)};function bu(d){$t.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const _ in v){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}w(bu,$t);function xu(){Vn.call(this),this.status=1}w(xu,Vn);function Si(d){this.g=d}w(Si,vu),Si.prototype.ra=function(){It(this.g,"a")},Si.prototype.qa=function(d){It(this.g,new bu(d))},Si.prototype.pa=function(d){It(this.g,new xu)},Si.prototype.oa=function(){It(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,oE=function(){return new us},aE=function(){return Jr()},sE=At,wm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bi.NO_ERROR=0,bi.TIMEOUT=8,bi.HTTP_ERROR=6,Hh=bi,la.COMPLETE="complete",iE=la,pe.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,_c=pe,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,rE=ht}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="12.9.0";function rR(r){ul=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Jm("@firebase/firestore");function Go(){return qa.logLevel}function fe(r,...e){if(qa.logLevel<=Ke.DEBUG){const t=e.map(lg);qa.debug(`Firestore (${ul}): ${r}`,...t)}}function Ki(r,...e){if(qa.logLevel<=Ke.ERROR){const t=e.map(lg);qa.error(`Firestore (${ul}): ${r}`,...t)}}function Fa(r,...e){if(qa.logLevel<=Ke.WARN){const t=e.map(lg);qa.warn(`Firestore (${ul}): ${r}`,...t)}}function lg(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,lE(r,i,t)}function lE(r,e,t){let i=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ki(i),new Error(i)}function ot(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||lE(e,o,i)}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nn.UNAUTHENTICATED)))}shutdown(){}}class sR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class aR{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let c=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fi,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fi)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new cE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class oR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class lR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new oR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const i=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=uR(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function Xe(r,e){return r<e?-1:r>e?1:0}function Em(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),c=e.charAt(i);if(o!==c)return em(o)===em(c)?Xe(o,c):em(o)?1:-1}return Xe(r.length,e.length)}const hR=55296,dR=57343;function em(r){const e=r.charCodeAt(0);return e>=hR&&e<=dR}function tl(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="__name__";class ui{constructor(e,t,i){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ke(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=ui.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Xe(e.length,t.length)}static compareSegments(e,t){const i=ui.isNumericId(e),o=ui.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ui.extractNumericId(e).compare(ui.extractNumericId(t)):Em(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fs.fromString(e.substring(4,e.length-2))}}class bt extends ui{construct(e,t,i){return new bt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new bt(t)}static emptyPath(){return new bt([])}}const fR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends ui{construct(e,t,i){return new wn(e,t,i)}static isValidIdentifier(e){return fR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fx}static keyField(){return new wn([fx])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(u=!u,o++):m!=="."||u?(i+=m,o++):(c(),o++)}if(c(),u)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(bt.fromString(e))}static fromName(e){return new Se(bt.fromString(e).popFirst(5))}static empty(){return new Se(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(r,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function pR(r,e,t,i){if(e===!0&&i===!0)throw new de(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function px(r){if(!Se.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function mx(r){if(Se.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function hE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Nd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ke(12329,{type:typeof r})}function fr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nd(r);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Jc(r,e){if(!hE(r))throw new de(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const u=r[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new de(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=-62135596800,yx=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*yx);return new Tt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gx)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yx}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jc(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:rn("string",Tt._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Tt(0,0))}static max(){return new De(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=-1;function mR(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=De.fromTimestamp(i===1e9?new Tt(t+1,0):new Tt(t,i));return new $s(o,Se.empty(),e)}function gR(r){return new $s(r.readTime,r.key,Uc)}class $s{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new $s(De.min(),Se.empty(),Uc)}static max(){return new $s(De.max(),Se.empty(),Uc)}}function yR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(r.documentKey,e.documentKey),t!==0?t:Xe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==vR)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,i)=>{t(e)}))}static reject(e){return new ee(((t,i)=>{i(e)}))}static waitFor(e){return new ee(((t,i)=>{let o=0,c=0,u=!1;e.forEach((m=>{++o,m.next((()=>{++c,u&&c===o&&t()}),(g=>i(g)))})),u=!0,c===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next((o=>o?ee.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new ee(((i,o)=>{const c=e.length,u=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;t(e[y]).next((x=>{u[y]=x,++m,m===c&&i(u)}),(x=>o(x)))}}))}static doWhile(e,t){return new ee(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function xR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ad.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=-1;function Cd(r){return r==null}function sd(r){return r===0&&1/r==-1/0}function _R(r){return typeof r=="number"&&Number.isInteger(r)&&!sd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="";function wR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=vx(e)),e=ER(r.get(t),e);return vx(e)}function ER(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const c=r.charAt(o);switch(c){case"\0":t+="";break;case dE:t+="";break;default:t+=c}}return t}function vx(r){return r+dE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ra(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function fE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??_n.RED,this.left=o??_n.EMPTY,this.right=c??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new _n(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return _n.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xx(this.data.getIterator())}getIteratorFrom(e){return new xx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new on(this.comparator);return t.data=e,t}}class xx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new dr([])}unionWith(e){let t=new on(wn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new pE("Invalid base64 string: "+c):c}})(e);return new En(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new En(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}En.EMPTY_BYTE_STRING=new En("");const TR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(r){if(ot(!!r,39018),typeof r=="string"){let e=0;const t=TR.exec(r);if(ot(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qt(r.seconds),nanos:qt(r.nanos)}}function qt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ks(r){return typeof r=="string"?En.fromBase64String(r):En.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="server_timestamp",gE="__type__",yE="__previous_value__",vE="__local_write_time__";function hg(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[gE])==null?void 0:i.stringValue)===mE}function Rd(r){const e=r.mapValue.fields[yE];return hg(e)?Rd(e):e}function zc(r){const e=Qs(r.mapValue.fields[vE].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,t,i,o,c,u,m,g,y,x,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x,this.apiKey=w}}const ad="(default)";class Bc{constructor(e,t){this.projectId=e,this.database=t||ad}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database===ad}isEqual(e){return e instanceof Bc&&e.projectId===this.projectId&&e.database===this.database}}function NR(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="__type__",AR="__max__",Ah={mapValue:{}},xE="__vector__",od="value";function Xs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?hg(r)?4:RR(r)?9007199254740991:CR(r)?10:11:ke(28295,{value:r})}function yi(r,e){if(r===e)return!0;const t=Xs(r);if(t!==Xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return zc(r).isEqual(zc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=Qs(o.timestampValue),m=Qs(c.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Ks(o.bytesValue).isEqual(Ks(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return qt(o.geoPointValue.latitude)===qt(c.geoPointValue.latitude)&&qt(o.geoPointValue.longitude)===qt(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return qt(o.integerValue)===qt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=qt(o.doubleValue),m=qt(c.doubleValue);return u===m?sd(u)===sd(m):isNaN(u)&&isNaN(m)}return!1})(r,e);case 9:return tl(r.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},m=c.mapValue.fields||{};if(bx(u)!==bx(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!yi(u[g],m[g])))return!1;return!0})(r,e);default:return ke(52216,{left:r})}}function Hc(r,e){return(r.values||[]).find((t=>yi(t,e)))!==void 0}function nl(r,e){if(r===e)return 0;const t=Xs(r),i=Xs(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(r.booleanValue,e.booleanValue);case 2:return(function(c,u){const m=qt(c.integerValue||c.doubleValue),g=qt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return _x(r.timestampValue,e.timestampValue);case 4:return _x(zc(r),zc(e));case 5:return Em(r.stringValue,e.stringValue);case 6:return(function(c,u){const m=Ks(c),g=Ks(u);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,u){const m=c.split("/"),g=u.split("/");for(let y=0;y<m.length&&y<g.length;y++){const x=Xe(m[y],g[y]);if(x!==0)return x}return Xe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,u){const m=Xe(qt(c.latitude),qt(u.latitude));return m!==0?m:Xe(qt(c.longitude),qt(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return wx(r.arrayValue,e.arrayValue);case 10:return(function(c,u){var S,L,Q,ne;const m=c.fields||{},g=u.fields||{},y=(S=m[od])==null?void 0:S.arrayValue,x=(L=g[od])==null?void 0:L.arrayValue,w=Xe(((Q=y==null?void 0:y.values)==null?void 0:Q.length)||0,((ne=x==null?void 0:x.values)==null?void 0:ne.length)||0);return w!==0?w:wx(y,x)})(r.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Ah.mapValue&&u===Ah.mapValue)return 0;if(c===Ah.mapValue)return 1;if(u===Ah.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=u.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let w=0;w<g.length&&w<x.length;++w){const S=Em(g[w],x[w]);if(S!==0)return S;const L=nl(m[g[w]],y[x[w]]);if(L!==0)return L}return Xe(g.length,x.length)})(r.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function _x(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Xe(r,e);const t=Qs(r),i=Qs(e),o=Xe(t.seconds,i.seconds);return o!==0?o:Xe(t.nanos,i.nanos)}function wx(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=nl(t[o],i[o]);if(c)return c}return Xe(t.length,i.length)}function rl(r){return Tm(r)}function Tm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Qs(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ks(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Se.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=Tm(c);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of i)c?c=!1:o+=",",o+=`${u}:${Tm(t.fields[u])}`;return o+"}"})(r.mapValue):ke(61005,{value:r})}function Gh(r){switch(Xs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(r);return e?16+Gh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ks(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+Gh(c)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ra(i.fields,((c,u)=>{o+=c.length+Gh(u)})),o})(r.mapValue);default:throw ke(13486,{value:r})}}function Ex(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Sm(r){return!!r&&"integerValue"in r}function dg(r){return!!r&&"arrayValue"in r}function Tx(r){return!!r&&"nullValue"in r}function Sx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qh(r){return!!r&&"mapValue"in r}function CR(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[bE])==null?void 0:i.stringValue)===xE}function Cc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ra(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Cc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cc(r.arrayValue.values[t]);return e}return{...r}}function RR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(t)}setAll(e){let t=wn.emptyPath(),i={},o=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}u?i[m.lastSegment()]=Cc(u):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];qh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ra(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new Xn(Cc(this.value))}}function _E(r){const e=[];return ra(r.fields,((t,i)=>{const o=new wn([t]);if(qh(i)){const c=_E(i.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t,i,o,c,u,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=u,this.documentState=m}static newInvalidDocument(e){return new Cn(e,0,De.min(),De.min(),De.min(),Xn.empty(),0)}static newFoundDocument(e,t,i,o){return new Cn(e,1,t,De.min(),i,o,0)}static newNoDocument(e,t){return new Cn(e,2,t,De.min(),De.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,De.min(),De.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t){this.position=e,this.inclusive=t}}function Nx(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const c=e[o],u=r.position[o];if(c.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=nl(u,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ax(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!yi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function kR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{}class nn extends wE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new DR(e,t,i):t==="array-contains"?new PR(e,i):t==="in"?new MR(e,i):t==="not-in"?new LR(e,i):t==="array-contains-any"?new VR(e,i):new nn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new jR(e,i):new OR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nl(t,this.value)):t!==null&&Xs(this.value)===Xs(t)&&this.matchesComparison(nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $r extends wE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new $r(e,t)}matches(e){return EE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EE(r){return r.op==="and"}function TE(r){return IR(r)&&EE(r)}function IR(r){for(const e of r.filters)if(e instanceof $r)return!1;return!0}function Nm(r){if(r instanceof nn)return r.field.canonicalString()+r.op.toString()+rl(r.value);if(TE(r))return r.filters.map((e=>Nm(e))).join(",");{const e=r.filters.map((t=>Nm(t))).join(",");return`${r.op}(${e})`}}function SE(r,e){return r instanceof nn?(function(i,o){return o instanceof nn&&i.op===o.op&&i.field.isEqual(o.field)&&yi(i.value,o.value)})(r,e):r instanceof $r?(function(i,o){return o instanceof $r&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,u,m)=>c&&SE(u,o.filters[m])),!0):!1})(r,e):void ke(19439)}function NE(r){return r instanceof nn?(function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`})(r):r instanceof $r?(function(t){return t.op.toString()+" {"+t.getFilters().map(NE).join(" ,")+"}"})(r):"Filter"}class DR extends nn{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class jR extends nn{constructor(e,t){super(e,"in",t),this.keys=AE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OR extends nn{constructor(e,t){super(e,"not-in",t),this.keys=AE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function AE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class PR extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dg(t)&&Hc(t.arrayValue,this.value)}}class MR extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hc(this.value.arrayValue,t)}}class LR extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hc(this.value.arrayValue,t)}}class VR extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Hc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t=null,i=[],o=[],c=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=u,this.endAt=m,this.Te=null}}function Cx(r,e=null,t=[],i=[],o=null,c=null,u=null){return new UR(r,e,t,i,o,c,u)}function fg(r){const e=Pe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Nm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Cd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>rl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>rl(i))).join(",")),e.Te=t}return e.Te}function pg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!kR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!SE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ax(r.startAt,e.startAt)&&Ax(r.endAt,e.endAt)}function Am(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t=null,i=[],o=[],c=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function zR(r,e,t,i,o,c,u,m){return new Wc(r,e,t,i,o,c,u,m)}function kd(r){return new Wc(r)}function Rx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function BR(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function CE(r){return r.collectionGroup!==null}function Rc(r){const e=Pe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new on(wn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new cd(c,i))})),t.has(wn.keyField().canonicalString())||e.Ie.push(new cd(wn.keyField(),i))}return e.Ie}function pi(r){const e=Pe(r);return e.Ee||(e.Ee=HR(e,Rc(r))),e.Ee}function HR(r,e){if(r.limitType==="F")return Cx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new cd(o.field,c)}));const t=r.endAt?new ld(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ld(r.startAt.position,r.startAt.inclusive):null;return Cx(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Cm(r,e){const t=r.filters.concat([e]);return new Wc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Rm(r,e,t){return new Wc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Id(r,e){return pg(pi(r),pi(e))&&r.limitType===e.limitType}function RE(r){return`${fg(pi(r))}|lt:${r.limitType}`}function qo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>NE(o))).join(", ")}]`),Cd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>rl(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>rl(o))).join(",")),`Target(${i})`})(pi(r))}; limitType=${r.limitType})`}function Dd(r,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Se.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(r,e)&&(function(i,o){for(const c of Rc(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(u,m,g){const y=Nx(u,m,g);return u.inclusive?y<=0:y<0})(i.startAt,Rc(i),o)||i.endAt&&!(function(u,m,g){const y=Nx(u,m,g);return u.inclusive?y>=0:y>0})(i.endAt,Rc(i),o))})(r,e)}function GR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function kE(r){return(e,t)=>{let i=!1;for(const o of Rc(r)){const c=qR(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function qR(r,e,t){const i=r.field.isKeyField()?Se.comparator(e.key,t.key):(function(c,u,m){const g=u.data.field(c),y=m.data.field(c);return g!==null&&y!==null?nl(g,y):ke(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return fE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new jt(Se.comparator);function Xi(){return FR}const IE=new jt(Se.comparator);function wc(...r){let e=IE;for(const t of r)e=e.insert(t.key,t);return e}function DE(r){let e=IE;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function La(){return kc()}function jE(){return kc()}function kc(){return new Xa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const YR=new jt(Se.comparator),$R=new on(Se.comparator);function Je(...r){let e=$R;for(const t of r)e=e.add(t);return e}const QR=new on(Xe);function KR(){return QR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function OE(r){return{integerValue:""+r}}function XR(r,e){return _R(e)?OE(e):mg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this._=void 0}}function JR(r,e,t){return r instanceof ud?(function(o,c){const u={fields:{[gE]:{stringValue:mE},[vE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&hg(c)&&(c=Rd(c)),c&&(u.fields[yE]=c),{mapValue:u}})(t,e):r instanceof Gc?ME(r,e):r instanceof qc?LE(r,e):(function(o,c){const u=PE(o,c),m=kx(u)+kx(o.Ae);return Sm(u)&&Sm(o.Ae)?OE(m):mg(o.serializer,m)})(r,e)}function WR(r,e,t){return r instanceof Gc?ME(r,e):r instanceof qc?LE(r,e):t}function PE(r,e){return r instanceof hd?(function(i){return Sm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class ud extends jd{}class Gc extends jd{constructor(e){super(),this.elements=e}}function ME(r,e){const t=VE(e);for(const i of r.elements)t.some((o=>yi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class qc extends jd{constructor(e){super(),this.elements=e}}function LE(r,e){let t=VE(e);for(const i of r.elements)t=t.filter((o=>!yi(o,i)));return{arrayValue:{values:t}}}class hd extends jd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function kx(r){return qt(r.integerValue||r.doubleValue)}function VE(r){return dg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function ZR(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Gc&&o instanceof Gc||i instanceof qc&&o instanceof qc?tl(i.elements,o.elements,yi):i instanceof hd&&o instanceof hd?yi(i.Ae,o.Ae):i instanceof ud&&o instanceof ud})(r.transform,e.transform)}class ek{constructor(e,t){this.version=e,this.transformResults=t}}class qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Od{}function UE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new gg(r.key,qr.none()):new Zc(r.key,r.data,qr.none());{const t=r.data,i=Xn.empty();let o=new on(wn.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?i.delete(c):i.set(c,u),o=o.add(c)}return new ia(r.key,i,new dr(o.toArray()),qr.none())}}function tk(r,e,t){r instanceof Zc?(function(o,c,u){const m=o.value.clone(),g=Dx(o.fieldTransforms,c,u.transformResults);m.setAll(g),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(r,e,t):r instanceof ia?(function(o,c,u){if(!Fh(o.precondition,c))return void c.convertToUnknownDocument(u.version);const m=Dx(o.fieldTransforms,c,u.transformResults),g=c.data;g.setAll(zE(o)),g.setAll(m),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(r,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ic(r,e,t,i){return r instanceof Zc?(function(c,u,m,g){if(!Fh(c.precondition,u))return m;const y=c.value.clone(),x=jx(c.fieldTransforms,g,u);return y.setAll(x),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof ia?(function(c,u,m,g){if(!Fh(c.precondition,u))return m;const y=jx(c.fieldTransforms,g,u),x=u.data;return x.setAll(zE(c)),x.setAll(y),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,e,t,i):(function(c,u,m){return Fh(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(r,e,t)}function nk(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),c=PE(i.transform,o||null);c!=null&&(t===null&&(t=Xn.empty()),t.set(i.field,c))}return t||null}function Ix(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&tl(i,o,((c,u)=>ZR(c,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Zc extends Od{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ia extends Od{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function zE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Dx(r,e,t){const i=new Map;ot(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const c=r[o],u=c.transform,m=e.data.field(c.field);i.set(c.field,WR(u,m,t[o]))}return i}function jx(r,e,t){const i=new Map;for(const o of r){const c=o.transform,u=t.data.field(o.field);i.set(o.field,JR(c,u,e))}return i}class gg extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rk extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&tk(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ic(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ic(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=jE();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let m=this.applyToLocalView(u,c.mutatedFields);m=t.has(o.key)?null:m;const g=UE(u,m);g!==null&&i.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(De.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&tl(this.mutations,e.mutations,((t,i)=>Ix(t,i)))&&tl(this.baseMutations,e.baseMutations,((t,i)=>Ix(t,i)))}}class yg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return YR})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,i[u].version);return new yg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,et;function ok(r){switch(r){case Z.OK:return ke(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return ke(15467,{code:r})}}function BE(r){if(r===void 0)return Ki("GRPC error has no .code"),Z.UNKNOWN;switch(r){case en.OK:return Z.OK;case en.CANCELLED:return Z.CANCELLED;case en.UNKNOWN:return Z.UNKNOWN;case en.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case en.INTERNAL:return Z.INTERNAL;case en.UNAVAILABLE:return Z.UNAVAILABLE;case en.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case en.NOT_FOUND:return Z.NOT_FOUND;case en.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case en.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case en.ABORTED:return Z.ABORTED;case en.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case en.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case en.DATA_LOSS:return Z.DATA_LOSS;default:return ke(39323,{code:r})}}(et=en||(en={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new Fs([4294967295,4294967295],0);function Ox(r){const e=lk().encode(r),t=new nE;return t.update(e),new Uint8Array(t.digest())}function Px(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Fs([t,i],0),new Fs([o,c],0)]}class vg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ec(`Invalid padding: ${t}`);if(i<0)throw new Ec(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ec(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ec(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Fs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Fs.fromNumber(i)));return o.compare(ck)===1&&(o=new Fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ox(e),[i,o]=Px(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new vg(c,o,t);return i.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=Ox(e),[i,o]=Px(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,o,c);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Pd(De.min(),o,new jt(Xe),Xi(),Je())}}class eu{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new eu(i,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class HE{constructor(e,t){this.targetId=e,this.Ce=t}}class GE{constructor(e,t,i=En.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Mx{constructor(){this.ve=0,this.Fe=Lx(),this.Me=En.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),i=Je();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ke(38017,{changeType:c})}})),new eu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Lx()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class uk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xi(),this.He=Ch(),this.Je=Ch(),this.Ze=new jt(Xe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Am(c))if(i===0){const u=new Se(c.path);this.et(t,u,Cn.newNoDocument(u,De.min()))}else ot(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let u,m;try{u=Ks(i).toUint8Array()}catch(g){if(g instanceof pE)return Fa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new vg(u,o,c)}catch(g){return Fa(g instanceof Ec?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const m=this.ot(u);if(m){if(c.current&&Am(m.target)){const g=new Se(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Cn.newNoDocument(g,e))}c.Be&&(t.set(u,c.ke()),c.Ke())}}));let i=Je();this.Je.forEach(((c,u)=>{let m=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new Pd(e,t,this.Ze,this.je,i);return this.je=Xi(),this.He=Ch(),this.Je=Ch(),this.Ze=new jt(Xe),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Mx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new on(Xe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new on(Xe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ch(){return new jt(Se.comparator)}function Lx(){return new jt(Se.comparator)}const hk={asc:"ASCENDING",desc:"DESCENDING"},dk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fk={and:"AND",or:"OR"};class pk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function km(r,e){return r.useProto3Json||Cd(e)?e:{value:e}}function dd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function mk(r,e){return dd(r,e.toTimestamp())}function mi(r){return ot(!!r,49232),De.fromTimestamp((function(t){const i=Qs(t);return new Tt(i.seconds,i.nanos)})(r))}function bg(r,e){return Im(r,e).canonicalString()}function Im(r,e){const t=(function(o){return new bt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function FE(r){const e=bt.fromString(r);return ot(XE(e),10190,{key:e.toString()}),e}function Dm(r,e){return bg(r.databaseId,e.path)}function tm(r,e){const t=FE(e);if(t.get(1)!==r.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Se($E(t))}function YE(r,e){return bg(r.databaseId,e)}function gk(r){const e=FE(r);return e.length===4?bt.emptyPath():$E(e)}function jm(r){return new bt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function $E(r){return ot(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Vx(r,e,t){return{name:Dm(r,e),fields:t.value.mapValue.fields}}function yk(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ke(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,x){return y.useProto3Json?(ot(x===void 0||typeof x=="string",58123),En.fromBase64String(x||"")):(ot(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),En.fromUint8Array(x||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(y){const x=y.code===void 0?Z.UNKNOWN:BE(y.code);return new de(x,y.message||"")})(u);t=new GE(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=tm(r,i.document.name),c=mi(i.document.updateTime),u=i.document.createTime?mi(i.document.createTime):De.min(),m=new Xn({mapValue:{fields:i.document.fields}}),g=Cn.newFoundDocument(o,c,u,m),y=i.targetIds||[],x=i.removedTargetIds||[];t=new Yh(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=tm(r,i.document),c=i.readTime?mi(i.readTime):De.min(),u=Cn.newNoDocument(o,c),m=i.removedTargetIds||[];t=new Yh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=tm(r,i.document),c=i.removedTargetIds||[];t=new Yh([],c,o,null)}else{if(!("filter"in e))return ke(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,u=new ak(o,c),m=i.targetId;t=new HE(m,u)}}return t}function vk(r,e){let t;if(e instanceof Zc)t={update:Vx(r,e.key,e.value)};else if(e instanceof gg)t={delete:Dm(r,e.key)};else if(e instanceof ia)t={update:Vx(r,e.key,e.data),updateMask:Ak(e.fieldMask)};else{if(!(e instanceof rk))return ke(16599,{dt:e.type});t={verify:Dm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,u){const m=u.transform;if(m instanceof ud)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Gc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof qc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof hd)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw ke(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:mk(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ke(27497)})(r,e.precondition)),t}function bk(r,e){return r&&r.length>0?(ot(e!==void 0,14353),r.map((t=>(function(o,c){let u=o.updateTime?mi(o.updateTime):mi(c);return u.isEqual(De.min())&&(u=mi(c)),new ek(u,o.transformResults||[])})(t,e)))):[]}function xk(r,e){return{documents:[YE(r,e.path)]}}function _k(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=YE(r,o);const c=(function(y){if(y.length!==0)return KE($r.create(y,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(y){if(y.length!==0)return y.map((x=>(function(S){return{field:Fo(S.field),direction:Tk(S.dir)}})(x)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=km(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function wk(r){let e=gk(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ot(i===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];t.where&&(c=(function(w){const S=QE(w);return S instanceof $r&&TE(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((S=>(function(Q){return new cd(Yo(Q.field),(function(ie){switch(ie){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(w){let S;return S=typeof w=="object"?w.value:w,Cd(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(w){const S=!!w.before,L=w.values||[];return new ld(L,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const S=!w.before,L=w.values||[];return new ld(L,S)})(t.endAt)),zR(e,o,u,c,m,"F",g,y)}function Ek(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Yo(t.unaryFilter.field);return nn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Yo(t.unaryFilter.field);return nn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Yo(t.unaryFilter.field);return nn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Yo(t.unaryFilter.field);return nn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(r):r.fieldFilter!==void 0?(function(t){return nn.create(Yo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return $r.create(t.compositeFilter.filters.map((i=>QE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(r):ke(30097,{filter:r})}function Tk(r){return hk[r]}function Sk(r){return dk[r]}function Nk(r){return fk[r]}function Fo(r){return{fieldPath:r.canonicalString()}}function Yo(r){return wn.fromServerFormat(r.fieldPath)}function KE(r){return r instanceof nn?(function(t){if(t.op==="=="){if(Sx(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NAN"}};if(Tx(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sx(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NAN"}};if(Tx(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(t.field),op:Sk(t.op),value:t.value}}})(r):r instanceof $r?(function(t){const i=t.getFilters().map((o=>KE(o)));return i.length===1?i[0]:{compositeFilter:{op:Nk(t.op),filters:i}}})(r):ke(54877,{filter:r})}function Ak(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function XE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function JE(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t,i,o,c=De.min(),u=De.min(),m=En.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.yt=e}}function Rk(r){const e=wk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.Sn=new Ik}addToCollectionParentIndex(e,t){return this.Sn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve($s.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve($s.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class Ik{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new on(bt.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new on(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WE=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(WE,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new il(0)}static ar(){return new il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="LruGarbageCollector",Dk=1048576;function Bx([r,e],[t,i]){const o=Xe(r,t);return o===0?Xe(e,i):o}class jk{constructor(e){this.Pr=e,this.buffer=new on(Bx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Bx(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ok{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){fe(zx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){dl(t)?fe(zx,"Ignoring IndexedDB error during garbage collection: ",t):await hl(t)}await this.Ar(3e5)}))}}class Pk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Ad.ce);const i=new jk(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Ux)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ux):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,c,u,m,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(i=w,m=Date.now(),this.removeTargets(e,i,t)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(y=Date.now(),Go()<=Ke.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${o} in `+(m-u)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:w}))))}}function Mk(r,e){return new Pk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.changes=new Xa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ic(i.mutation,o,dr.empty(),Tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Je()){const o=La();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let u=wc();return c.forEach(((m,g)=>{u=u.insert(m,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=La();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Je())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,i,o){let c=Xi();const u=kc(),m=(function(){return kc()})();return t.forEach(((g,y)=>{const x=i.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof ia)?c=c.insert(y.key,y):x!==void 0?(u.set(y.key,x.mutation.getFieldMask()),Ic(x.mutation,y,x.mutation.getFieldMask(),Tt.now())):u.set(y.key,dr.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,x)=>u.set(y,x))),t.forEach(((y,x)=>m.set(y,new Vk(x,u.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=kc();let o=new jt(((u,m)=>u-m)),c=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let x=i.get(g)||dr.empty();x=m.applyToLocalView(y,x),i.set(g,x);const w=(o.get(m.batchId)||Je()).add(g);o=o.insert(m.batchId,w)}))})).next((()=>{const u=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,x=g.value,w=jE();x.forEach((S=>{if(!c.has(S)){const L=UE(t.get(S),i.get(S));L!==null&&w.set(S,L),c=c.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ee.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return BR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):CE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):ee.resolve(La());let m=Uc,g=c;return u.next((y=>ee.forEach(y,((x,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),c.get(x)?ee.resolve():this.remoteDocumentCache.getEntry(e,x).next((S=>{g=g.insert(x,S)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Je()))).next((x=>({batchId:m,changes:DE(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let o=wc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let u=wc();return this.indexManager.getCollectionParents(e,c).next((m=>ee.forEach(m,(g=>{const y=(function(w,S){return new Wc(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((x=>{x.forEach(((w,S)=>{u=u.insert(w,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((u=>{c.forEach(((g,y)=>{const x=y.getKey();u.get(x)===null&&(u=u.insert(x,Cn.newInvalidDocument(x)))}));let m=wc();return u.forEach(((g,y)=>{const x=c.get(g);x!==void 0&&Ic(x.mutation,y,dr.empty(),Tt.now()),Dd(t,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ee.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:mi(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:Rk(o.bundledQuery),readTime:mi(o.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.overlays=new jt(Se.comparator),this.Lr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=La();return ee.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.bt(e,t,c)})),ee.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const o=La(),c=t.length+1,u=new Se(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new jt(((y,x)=>y-x));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let x=c.get(y.largestBatchId);x===null&&(x=La(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const m=La(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>m.set(y,x))),!(m.size()>=o)););return ee.resolve(m)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new sk(t,i));let c=this.Lr.get(t);c===void 0&&(c=Je(),this.Lr.set(t,c)),this.Lr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.kr=new on(hn.Kr),this.qr=new on(hn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new hn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new hn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Se(new bt([])),i=new hn(t,e),o=new hn(t,e+1),c=[];return this.qr.forEachInRange([i,o],(u=>{this.Wr(u),c.push(u.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Se(new bt([])),i=new hn(t,e),o=new hn(t,e+1);let c=Je();return this.qr.forEachInRange([i,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new hn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class hn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Se.comparator(e.key,t.key)||Xe(e.Hr,t.Hr)}static Ur(e,t){return Xe(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new on(hn.Kr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new ik(c,t,i,o);this.mutationQueue.push(u);for(const m of o)this.Jr=this.Jr.add(new hn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(u)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),c=o<0?0:o;return ee.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?ug:this.Yn-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new hn(t,0),o=new hn(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([i,o],(u=>{const m=this.Zr(u.Hr);c.push(m)})),ee.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new on(Xe);return t.forEach((o=>{const c=new hn(o,0),u=new hn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,u],(m=>{i=i.add(m.Hr)}))})),ee.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;Se.isDocumentKey(c)||(c=c.child(""));const u=new hn(new Se(c),0);let m=new on(Xe);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Hr)),!0)}),u),ee.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ot(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ee.forEach(t.mutations,(o=>{const c=new hn(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new hn(t,0),o=this.Jr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.ti=e,this.docs=(function(){return new jt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let i=Xi();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():Cn.newInvalidDocument(o))})),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=Xi();const u=t.path,m=new Se(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||yR(gR(x),i)<=0||(o.has(x.key)||Dd(t,x))&&(c=c.insert(x.key,x.mutableCopy()))}return ee.resolve(c)}getAllFromCollectionGroup(e,t,i,o){ke(9500)}ni(e,t){return ee.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Fk(this)}getSize(e){return ee.resolve(this.size)}}class Fk extends Lk{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),ee.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.persistence=e,this.ri=new Xa((t=>fg(t)),pg),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ii=0,this.si=new xg,this.targetCount=0,this.oi=il._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),ee.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new il(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.lr(t),ee.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.ri.forEach(((u,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.ri.delete(u),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(c).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),ee.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t){this._i={},this.overlays={},this.ai=new Ad(0),this.ui=!1,this.ui=!0,this.ci=new Hk,this.referenceDelegate=e(this),this.li=new Yk(this),this.indexManager=new kk,this.remoteDocumentCache=(function(o){return new qk(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new Ck(t),this.Pi=new zk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new Gk(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const o=new $k(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,t){return ee.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class $k extends bR{constructor(e){super(),this.currentSequenceNumber=e}}class _g{constructor(e){this.persistence=e,this.Ri=new xg,this.Ai=null}static Vi(e){return new _g(e)}get di(){if(this.Ai)return this.Ai;throw ke(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.di,(i=>{const o=Se.fromPath(i);return this.mi(e,o).next((c=>{c||t.removeEntry(o,De.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class fd{constructor(e,t){this.persistence=e,this.fi=new Xa((i=>wR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=Mk(this,t)}static Vi(e,t){return new fd(e,t)}Ti(){}Ii(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return ee.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((c=>c?ee.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(u=>this.wr(e,u,t).next((m=>{m||(i++,c.removeEntry(u,De.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gh(e.data.value)),t}wr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return ee.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Je(),o=Je();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new wg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return TN()?8:xR(In())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.gs(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ps(e,t,o,i).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new Qk;return this.ys(e,t,u).next((m=>{if(c.result=m,this.As)return this.ws(e,t,u,m.size)}))})).next((()=>c.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(Go()<=Ke.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Go()<=Ke.DEBUG&&fe("QueryEngine","Query:",qo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(Go()<=Ke.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(t))):ee.resolve())}gs(e,t){if(Rx(t))return ee.resolve(null);let i=pi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Rm(t,null,"F"),i=pi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const u=Je(...c);return this.fs.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,m);return this.Ss(t,y,u,g.readTime)?this.gs(e,Rm(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,o){return Rx(t)||o.isEqual(De.min())?ee.resolve(null):this.fs.getDocuments(e,i).next((c=>{const u=this.bs(t,c);return this.Ss(t,u,i,o)?ee.resolve(null):(Go()<=Ke.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qo(t)),this.Ds(e,u,t,mR(o,Uc)).next((m=>m)))}))}bs(e,t){let i=new on(kE(e));return t.forEach(((o,c)=>{Dd(e,c)&&(i=i.add(c))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,t,i){return Go()<=Ke.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",qo(t)),this.fs.getDocumentsMatchingQuery(e,t,$s.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",Xk=3e8;class Jk{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new jt(Xe),this.Fs=new Xa((c=>fg(c)),pg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Wk(r,e,t,i){return new Jk(r,e,t,i)}async function eT(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const u=[],m=[];let g=Je();for(const y of o){u.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of c){m.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:m})))}))}))}function Zk(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,x){const w=y.batch,S=w.keys();let L=ee.resolve();return S.forEach((Q=>{L=L.next((()=>x.getEntry(g,Q))).next((ne=>{const ie=y.docVersions.get(Q);ot(ie!==null,48541),ne.version.compareTo(ie)<0&&(w.applyToRemoteDocument(ne,y),ne.isValidDocument()&&(ne.setReadTime(y.commitVersion),x.addEntry(ne)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(g,w)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Je();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function tT(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function eI(r,e){const t=Pe(r),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((x,w)=>{const S=o.get(w);if(!S)return;m.push(t.li.removeMatchingKeys(c,x.removedDocuments,w).next((()=>t.li.addMatchingKeys(c,x.addedDocuments,w))));let L=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?L=L.withResumeToken(En.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):x.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(x.resumeToken,i)),o=o.insert(w,L),(function(ne,ie,ge){return ne.resumeToken.approximateByteSize()===0||ie.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=Xk?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0})(S,L,x)&&m.push(t.li.updateTargetData(c,L))}));let g=Xi(),y=Je();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,x))})),m.push(tI(c,u,e.documentUpdates).next((x=>{g=x.Bs,y=x.Ls}))),!i.isEqual(De.min())){const x=t.li.getLastRemoteSnapshotVersion(c).next((w=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(x)}return ee.waitFor(m).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(t.vs=o,c)))}function tI(r,e,t){let i=Je(),o=Je();return t.forEach((c=>i=i.add(c))),e.getEntries(r,i).next((c=>{let u=Xi();return t.forEach(((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):fe(Eg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:o}}))}function nI(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ug),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function rI(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((c=>c?(o=c,ee.resolve(o)):t.li.allocateTargetId(i).next((u=>(o=new zs(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Om(r,e,t){const i=Pe(r),o=i.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!dl(u))throw u;fe(Eg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function Hx(r,e,t){const i=Pe(r);let o=De.min(),c=Je();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,x){const w=Pe(g),S=w.Fs.get(x);return S!==void 0?ee.resolve(w.vs.get(S)):w.li.getTargetData(y,x)})(i,u,pi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,m.targetId).next((g=>{c=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:De.min(),t?c:Je()))).next((m=>(iI(i,GR(e),m),{documents:m,ks:c})))))}function iI(r,e,t){let i=r.Ms.get(e)||De.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),r.Ms.set(e,i)}class Gx{constructor(){this.activeTargetIds=KR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sI{constructor(){this.vo=new Gx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Gx,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="ConnectivityMonitor";class Fx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){fe(qx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){fe(qx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh=null;function Pm(){return Rh===null?Rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rh++,"0x"+Rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="RestConnection",oI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class lI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===ad?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,c){const u=Pm(),m=this.Qo(e,t.toUriEncodedString());fe(nm,`Sending RPC '${e}' ${u}:`,m,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:y}=new URL(m),x=ol(y);return this.zo(e,m,g,i,x).then((w=>(fe(nm,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Fa(nm,`RPC '${e}' ${u} failed with error: `,w,"url: ",m,"request:",i),w}))}jo(e,t,i,o,c,u){return this.Wo(e,t,i,o,c)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}Qo(e,t){const i=oI[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection",mc=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Wo extends lI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wo.c_){const e=aE();mc(e,sE.STAT_EVENT,(t=>{t.stat===wm.PROXY?fe(Sn,"STAT_EVENT: detected buffering proxy"):t.stat===wm.NOPROXY&&fe(Sn,"STAT_EVENT: detected no buffering proxy")})),Wo.c_=!0}}zo(e,t,i,o,c){const u=Pm();return new Promise(((m,g)=>{const y=new rE;y.setWithCredentials(!0),y.listenOnce(iE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Hh.NO_ERROR:const w=y.getResponseJson();fe(Sn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),m(w);break;case Hh.TIMEOUT:fe(Sn,`RPC '${e}' ${u} timed out`),g(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const S=y.getStatus();if(fe(Sn,`RPC '${e}' ${u} failed with status:`,S,"response text:",y.getResponseText()),S>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const Q=L==null?void 0:L.error;if(Q&&Q.status&&Q.message){const ne=(function(ge){const Ee=ge.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(Ee)>=0?Ee:Z.UNKNOWN})(Q.status);g(new de(ne,Q.message))}else g(new de(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new de(Z.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{fe(Sn,`RPC '${e}' ${u} completed.`)}}));const x=JSON.stringify(o);fe(Sn,`RPC '${e}' ${u} sending request:`,o),y.send(t,"POST",x,i,15)}))}T_(e,t,i){const o=Pm(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=c.join("");fe(Sn,`Creating RPC '${e}' stream ${o}: ${y}`,m);const x=u.createWebChannel(y,m);this.I_(x);let w=!1,S=!1;const L=new cI({Ho:Q=>{S?fe(Sn,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(w||(fe(Sn,`Opening RPC '${e}' stream ${o} transport.`),x.open(),w=!0),fe(Sn,`RPC '${e}' stream ${o} sending:`,Q),x.send(Q))},Jo:()=>x.close()});return mc(x,_c.EventType.OPEN,(()=>{S||(fe(Sn,`RPC '${e}' stream ${o} transport opened.`),L.i_())})),mc(x,_c.EventType.CLOSE,(()=>{S||(S=!0,fe(Sn,`RPC '${e}' stream ${o} transport closed`),L.o_(),this.E_(x))})),mc(x,_c.EventType.ERROR,(Q=>{S||(S=!0,Fa(Sn,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),L.o_(new de(Z.UNAVAILABLE,"The operation could not be completed")))})),mc(x,_c.EventType.MESSAGE,(Q=>{var ne;if(!S){const ie=Q.data[0];ot(!!ie,16349);const ge=ie,Ee=(ge==null?void 0:ge.error)||((ne=ge[0])==null?void 0:ne.error);if(Ee){fe(Sn,`RPC '${e}' stream ${o} received error:`,Ee);const xe=Ee.status;let _e=(function(C){const A=en[C];if(A!==void 0)return BE(A)})(xe),Ue=Ee.message;xe==="NOT_FOUND"&&Ue.includes("database")&&Ue.includes("does not exist")&&Ue.includes(this.databaseId.database)&&Fa(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),_e===void 0&&(_e=Z.INTERNAL,Ue="Unknown error status: "+xe+" with message "+Ee.message),S=!0,L.o_(new de(_e,Ue)),x.close()}else fe(Sn,`RPC '${e}' stream ${o} received:`,ie),L.__(ie)}})),Wo.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return oE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r){return new Wo(r)}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(r){return new pk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wo.c_=!1;class nT{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="PersistentStream";class rT{constructor(e,t,i,o,c,u,m,g){this.Ci=e,this.b_=i,this.S_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(Yx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(fe(Yx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hI extends rT{constructor(e,t,i,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=yk(this.serializer,e),i=(function(c){if(!("targetChange"in c))return De.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?mi(u.readTime):De.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=jm(this.serializer),t.addTarget=(function(c,u){let m;const g=u.target;if(m=Am(g)?{documents:xk(c,g)}:{query:_k(c,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=qE(c,u.resumeToken);const y=km(c,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(De.min())>0){m.readTime=dd(c,u.snapshotVersion.toTimestamp());const y=km(c,u.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const i=Ek(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=jm(this.serializer),t.removeTarget=e,this.K_(t)}}class dI extends rT{constructor(e,t,i,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=bk(e.writeResults,e.commitTime),i=mi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=jm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>vk(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{}class pI extends fI{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Wo(e,Im(t,i),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(Z.UNKNOWN,c.toString())}))}jo(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.jo(e,Im(t,i),o,u,m,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(Z.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function mI(r,e,t,i){return new pI(r,e,t,i)}class gI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ki(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="RemoteStore";class yI{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Ja(this)&&(fe(Ya,"Restarting streams for network reachability change."),await(async function(g){const y=Pe(g);y.Ea.add(4),await tu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Ld(y)})(this))}))})),this.Va=new gI(i,o)}}async function Ld(r){if(Ja(r))for(const e of r.Ra)await e(!0)}async function tu(r){for(const e of r.Ra)await e(!1)}function iT(r,e){const t=Pe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ag(t)?Ng(t):fl(t).O_()&&Sg(t,e))}function Tg(r,e){const t=Pe(r),i=fl(t);t.Ia.delete(e),i.O_()&&sT(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ja(t)&&t.Va.set("Unknown"))}function Sg(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fl(r).Z_(e)}function sT(r,e){r.da.$e(e),fl(r).X_(e)}function Ng(r){r.da=new uk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),fl(r).start(),r.Va.ua()}function Ag(r){return Ja(r)&&!fl(r).x_()&&r.Ia.size>0}function Ja(r){return Pe(r).Ea.size===0}function aT(r){r.da=void 0}async function vI(r){r.Va.set("Online")}async function bI(r){r.Ia.forEach(((e,t)=>{Sg(r,e)}))}async function xI(r,e){aT(r),Ag(r)?(r.Va.ha(e),Ng(r)):r.Va.set("Unknown")}async function _I(r,e,t){if(r.Va.set("Online"),e instanceof GE&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,u),o.Ia.delete(m),o.da.removeTarget(m))})(r,e)}catch(i){fe(Ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await pd(r,i)}else if(e instanceof Yh?r.da.Xe(e):e instanceof HE?r.da.st(e):r.da.tt(e),!t.isEqual(De.min()))try{const i=await tT(r.localStore);t.compareTo(i)>=0&&await(function(c,u){const m=c.da.Tt(u);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.Ia.get(y);x&&c.Ia.set(y,x.withResumeToken(g.resumeToken,u))}})),m.targetMismatches.forEach(((g,y)=>{const x=c.Ia.get(g);if(!x)return;c.Ia.set(g,x.withResumeToken(En.EMPTY_BYTE_STRING,x.snapshotVersion)),sT(c,g);const w=new zs(x.target,g,y,x.sequenceNumber);Sg(c,w)})),c.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){fe(Ya,"Failed to raise snapshot:",i),await pd(r,i)}}async function pd(r,e,t){if(!dl(e))throw e;r.Ea.add(1),await tu(r),r.Va.set("Offline"),t||(t=()=>tT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe(Ya,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Ld(r)}))}function oT(r,e){return e().catch((t=>pd(r,t,e)))}async function Vd(r){const e=Pe(r),t=Js(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ug;for(;wI(e);)try{const o=await nI(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,EI(e,o)}catch(o){await pd(e,o)}lT(e)&&cT(e)}function wI(r){return Ja(r)&&r.Ta.length<10}function EI(r,e){r.Ta.push(e);const t=Js(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function lT(r){return Ja(r)&&!Js(r).x_()&&r.Ta.length>0}function cT(r){Js(r).start()}async function TI(r){Js(r).ra()}async function SI(r){const e=Js(r);for(const t of r.Ta)e.ea(t.mutations)}async function NI(r,e,t){const i=r.Ta.shift(),o=yg.from(i,e,t);await oT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Vd(r)}async function AI(r,e){e&&Js(r).Y_&&await(async function(i,o){if((function(u){return ok(u)&&u!==Z.ABORTED})(o.code)){const c=i.Ta.shift();Js(i).B_(),await oT(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Vd(i)}})(r,e),lT(r)&&cT(r)}async function $x(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),fe(Ya,"RemoteStore received new credentials");const i=Ja(t);t.Ea.add(3),await tu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ld(t)}async function CI(r,e){const t=Pe(r);e?(t.Ea.delete(2),await Ld(t)):e||(t.Ea.add(2),await tu(t),t.Va.set("Unknown"))}function fl(r){return r.ma||(r.ma=(function(t,i,o){const c=Pe(t);return c.sa(),new hI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Zo:vI.bind(null,r),Yo:bI.bind(null,r),t_:xI.bind(null,r),J_:_I.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Ag(r)?Ng(r):r.Va.set("Unknown")):(await r.ma.stop(),aT(r))}))),r.ma}function Js(r){return r.fa||(r.fa=(function(t,i,o){const c=Pe(t);return c.sa(),new dI(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:TI.bind(null,r),t_:AI.bind(null,r),ta:SI.bind(null,r),na:NI.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Vd(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(Ya,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const u=Date.now()+i,m=new Cg(e,t,u,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(r,e){if(Ki("AsyncQueue",`${e}: ${r}`),dl(r))return new de(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=wc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Zo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.ga=new jt(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class sl{constructor(e,t,i,o,c,u,m,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,c){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new sl(e,t,Zo.emptySet(t),u,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class kI{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Pe(t),c=o.queries;o.queries=Kx(),c.forEach(((u,m)=>{for(const g of m.ba)g.onError(i)}))})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function Kx(){return new Xa((r=>RE(r)),Id)}async function kg(r,e){const t=Pe(r);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.Sa()&&e.Da()&&(i=2):(c=new RI,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const m=Rg(u,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Dg(t)}async function Ig(r,e){const t=Pe(r),i=e.query;let o=3;const c=t.queries.get(i);if(c){const u=c.ba.indexOf(e);u>=0&&(c.ba.splice(u,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function II(r,e){const t=Pe(r);let i=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const m of u.ba)m.Fa(o)&&(i=!0);u.wa=o}}i&&Dg(t)}function DI(r,e,t){const i=Pe(r),o=i.queries.get(e);if(o)for(const c of o.ba)c.onError(t);i.queries.delete(e)}function Dg(r){r.Ca.forEach((e=>{e.next()}))}var Mm,Xx;(Xx=Mm||(Mm={})).Ma="default",Xx.Cache="cache";class jg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new sl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.key=e}}class hT{constructor(e){this.key=e}}class jI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Je(),this.mutatedKeys=Je(),this.eu=kE(e),this.tu=new Zo(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new Qx,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,w)=>{const S=o.get(x),L=Dd(this.query,w)?w:null,Q=!!S&&this.mutatedKeys.has(S.key),ne=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let ie=!1;S&&L?S.data.isEqual(L.data)?Q!==ne&&(i.track({type:3,doc:L}),ie=!0):this.su(S,L)||(i.track({type:2,doc:L}),ie=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(m=!0)):!S&&L?(i.track({type:0,doc:L}),ie=!0):S&&!L&&(i.track({type:1,doc:S}),ie=!0,(g||y)&&(m=!0)),ie&&(L?(u=u.add(L),c=ne?c.add(x):c.delete(x)):(u=u.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),c=c.delete(x.key),i.track({type:1,doc:x})}return{tu:u,iu:i,Ss:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((x,w)=>(function(L,Q){const ne=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Vt:ie})}};return ne(L)-ne(Q)})(x.type,w.type)||this.eu(x.doc,w.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new sl(this.query,e.tu,c,u,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new hT(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new uT(i))})),t}cu(e){this.Za=e.ks,this.Ya=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Og="SyncEngine";class OI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class PI{constructor(e){this.key=e,this.hu=!1}}class MI{constructor(e,t,i,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Xa((m=>RE(m)),Id),this.Iu=new Map,this.Eu=new Set,this.Ru=new jt(Se.comparator),this.Au=new Map,this.Vu=new xg,this.du={},this.mu=new Map,this.fu=il.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LI(r,e,t=!0){const i=yT(r);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await dT(i,e,t,!0),o}async function VI(r,e){const t=yT(r);await dT(t,e,!0,!1)}async function dT(r,e,t,i){const o=await rI(r.localStore,pi(e)),c=o.targetId,u=r.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await UI(r,e,c,u==="current",o.resumeToken)),r.isPrimaryClient&&t&&iT(r.remoteStore,o),m}async function UI(r,e,t,i,o){r.pu=(w,S,L)=>(async function(ne,ie,ge,Ee){let xe=ie.view.ru(ge);xe.Ss&&(xe=await Hx(ne.localStore,ie.query,!1).then((({documents:C})=>ie.view.ru(C,xe))));const _e=Ee&&Ee.targetChanges.get(ie.targetId),Ue=Ee&&Ee.targetMismatches.get(ie.targetId)!=null,Ae=ie.view.applyChanges(xe,ne.isPrimaryClient,_e,Ue);return Wx(ne,ie.targetId,Ae.au),Ae.snapshot})(r,w,S,L);const c=await Hx(r.localStore,e,!0),u=new jI(e,c.ks),m=u.ru(c.documents),g=eu.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=u.applyChanges(m,r.isPrimaryClient,g);Wx(r,t,y.au);const x=new OI(e,t,u);return r.Tu.set(e,x),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function zI(r,e,t){const i=Pe(r),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((u=>!Id(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Om(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Tg(i.remoteStore,o.targetId),Lm(i,o.targetId)})).catch(hl)):(Lm(i,o.targetId),await Om(i.localStore,o.targetId,!0))}async function BI(r,e){const t=Pe(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Tg(t.remoteStore,i.targetId))}async function HI(r,e,t){const i=KI(r);try{const o=await(function(u,m){const g=Pe(u),y=Tt.now(),x=m.reduce(((L,Q)=>L.add(Q.key)),Je());let w,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let Q=Xi(),ne=Je();return g.xs.getEntries(L,x).next((ie=>{Q=ie,Q.forEach(((ge,Ee)=>{Ee.isValidDocument()||(ne=ne.add(ge))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,Q))).next((ie=>{w=ie;const ge=[];for(const Ee of m){const xe=nk(Ee,w.get(Ee.key).overlayedDocument);xe!=null&&ge.push(new ia(Ee.key,xe,_E(xe.value.mapValue),qr.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,ge,m)})).next((ie=>{S=ie;const ge=ie.applyToLocalDocumentSet(w,ne);return g.documentOverlayCache.saveOverlays(L,ie.batchId,ge)}))})).then((()=>({batchId:S.batchId,changes:DE(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,m,g){let y=u.du[u.currentUser.toKey()];y||(y=new jt(Xe)),y=y.insert(m,g),u.du[u.currentUser.toKey()]=y})(i,o.batchId,t),await nu(i,o.changes),await Vd(i.remoteStore)}catch(o){const c=Rg(o,"Failed to persist write");t.reject(c)}}async function fT(r,e){const t=Pe(r);try{const i=await eI(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?ot(u.hu,14607):o.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await nu(t,i,e)}catch(i){await hl(i)}}function Jx(r,e,t){const i=Pe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,u)=>{const m=u.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(u,m){const g=Pe(u);g.onlineState=m;let y=!1;g.queries.forEach(((x,w)=>{for(const S of w.ba)S.va(m)&&(y=!0)})),y&&Dg(g)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GI(r,e,t){const i=Pe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let u=new jt(Se.comparator);u=u.insert(c,Cn.newNoDocument(c,De.min()));const m=Je().add(c),g=new Pd(De.min(),new Map,new jt(Xe),u,m);await fT(i,g),i.Ru=i.Ru.remove(c),i.Au.delete(e),Pg(i)}else await Om(i.localStore,e,!1).then((()=>Lm(i,e,t))).catch(hl)}async function qI(r,e){const t=Pe(r),i=e.batch.batchId;try{const o=await Zk(t.localStore,e);mT(t,i,null),pT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await nu(t,o)}catch(o){await hl(o)}}async function FI(r,e,t){const i=Pe(r);try{const o=await(function(u,m){const g=Pe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,m).next((w=>(ot(w!==null,37113),x=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(i.localStore,e);mT(i,e,t),pT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await nu(i,o)}catch(o){await hl(o)}}function pT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function mT(r,e,t){const i=Pe(r);let o=i.du[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function Lm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||gT(r,i)}))}function gT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Tg(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Pg(r))}function Wx(r,e,t){for(const i of t)i instanceof uT?(r.Vu.addReference(i.key,e),YI(r,i)):i instanceof hT?(fe(Og,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||gT(r,i.key)):ke(19791,{wu:i})}function YI(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(fe(Og,"New document in limbo: "+t),r.Eu.add(i),Pg(r))}function Pg(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Se(bt.fromString(e)),i=r.fu.next();r.Au.set(i,new PI(t)),r.Ru=r.Ru.insert(t,i),iT(r.remoteStore,new zs(pi(kd(t.path)),i,"TargetPurposeLimboResolution",Ad.ce))}}async function nu(r,e,t){const i=Pe(r),o=[],c=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{u.push(i.pu(g,e,t).then((y=>{var x;if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:(x=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:x.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=wg.Es(g.targetId,y);c.push(w)}})))})),await Promise.all(u),i.Pu.J_(o),await(async function(g,y){const x=Pe(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ee.forEach(y,(S=>ee.forEach(S.Ts,(L=>x.persistence.referenceDelegate.addReference(w,S.targetId,L))).next((()=>ee.forEach(S.Is,(L=>x.persistence.referenceDelegate.removeReference(w,S.targetId,L)))))))))}catch(w){if(!dl(w))throw w;fe(Eg,"Failed to update sequence numbers: "+w)}for(const w of y){const S=w.targetId;if(!w.fromCache){const L=x.vs.get(S),Q=L.snapshotVersion,ne=L.withLastLimboFreeSnapshotVersion(Q);x.vs=x.vs.insert(S,ne)}}})(i.localStore,c))}async function $I(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){fe(Og,"User change. New user:",e.toKey());const i=await eT(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new de(Z.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nu(t,i.Ns)}}function QI(r,e){const t=Pe(r),i=t.Au.get(e);if(i&&i.hu)return Je().add(i.key);{let o=Je();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const m=t.Tu.get(u);o=o.unionWith(m.view.nu)}return o}}function yT(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=fT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GI.bind(null,e),e.Pu.J_=II.bind(null,e.eventManager),e.Pu.yu=DI.bind(null,e.eventManager),e}function KI(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FI.bind(null,e),e}class md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Md(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Wk(this.persistence,new Kk,e.initialUser,this.serializer)}Cu(e){return new ZE(_g.Vi,this.serializer)}Du(e){return new sI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}md.provider={build:()=>new md};class XI extends md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof fd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Ok(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new ZE((i=>fd.Vi(i,t)),this.serializer)}}class Vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$I.bind(null,this.syncEngine),await CI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kI})()}createDatastore(e){const t=Md(e.databaseInfo.databaseId),i=uI(e.databaseInfo);return mI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,u,m){return new yI(i,o,c,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Jx(this.syncEngine,t,0)),(function(){return Fx.v()?new Fx:new aI})())}createSyncEngine(e,t){return(function(o,c,u,m,g,y,x){const w=new MI(o,c,u,m,g,y);return x&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const c=Pe(o);fe(Ya,"RemoteStore shutting down."),c.Ea.add(5),await tu(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="FirestoreClient";class JI{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=Nn.UNAUTHENTICATED,this.clientId=cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async u=>{fe(Ws,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(fe(Ws,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Rg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function im(r,e){r.asyncQueue.verifyOperationInProgress(),fe(Ws,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await eT(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Zx(r,e){r.asyncQueue.verifyOperationInProgress();const t=await WI(r);fe(Ws,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>$x(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>$x(e.remoteStore,o))),r._onlineComponents=e}async function WI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(Ws,"Using user provided OfflineComponentProvider");try{await im(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Fa("Error using user provided cache. Falling back to memory cache: "+t),await im(r,new md)}}else fe(Ws,"Using default OfflineComponentProvider"),await im(r,new XI(void 0));return r._offlineComponents}async function vT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(Ws,"Using user provided OnlineComponentProvider"),await Zx(r,r._uninitializedComponentsProvider._online)):(fe(Ws,"Using default OnlineComponentProvider"),await Zx(r,new Vm))),r._onlineComponents}function ZI(r){return vT(r).then((e=>e.syncEngine))}async function gd(r){const e=await vT(r),t=e.eventManager;return t.onListen=LI.bind(null,e.syncEngine),t.onUnlisten=zI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BI.bind(null,e.syncEngine),t}function eD(r,e,t,i){const o=new Mg(i),c=new jg(e,o,t);return r.asyncQueue.enqueueAndForget((async()=>kg(await gd(r),c))),()=>{o.Nu(),r.asyncQueue.enqueueAndForget((async()=>Ig(await gd(r),c)))}}function tD(r,e,t={}){const i=new Fi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,u,m,g,y){const x=new Mg({next:S=>{x.Nu(),u.enqueueAndForget((()=>Ig(c,w)));const L=S.docs.has(m);!L&&S.fromCache?y.reject(new de(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&S.fromCache&&g&&g.source==="server"?y.reject(new de(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new jg(kd(m.path),x,{includeMetadataChanges:!0,Ka:!0});return kg(c,w)})(await gd(r),r.asyncQueue,e,t,i))),i.promise}function nD(r,e,t={}){const i=new Fi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,u,m,g,y){const x=new Mg({next:S=>{x.Nu(),u.enqueueAndForget((()=>Ig(c,w))),S.fromCache&&g.source==="server"?y.reject(new de(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new jg(m,x,{includeMetadataChanges:!0,Ka:!0});return kg(c,w)})(await gd(r),r.asyncQueue,e,t,i))),i.promise}function rD(r,e){const t=new Fi;return r.asyncQueue.enqueueAndForget((async()=>HI(await ZI(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="ComponentProvider",e_=new Map;function sD(r,e,t,i,o){return new SR(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,bT(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="firestore.googleapis.com",t_=!0;class n_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xT,this.ssl=t_}else this.host=e.host,this.ssl=e.ssl??t_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Dk)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ud{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new iR;switch(i.type){case"firstParty":return new lR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=e_.get(t);i&&(fe(iD,"Removing Datastore"),e_.delete(t),i.terminate())})(this),Promise.resolve()}}function aD(r,e,t,i={}){var y;r=fr(r,Ud);const o=ol(e),c=r._getSettings(),u={...c,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(fw(`https://${m}`),pw("Firestore",!0)),c.host!==xT&&c.host!==m&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:i};if(!Ba(g,u)&&(r._setSettings(g),i.mockUserToken)){let x,w;if(typeof i.mockUserToken=="string")x=i.mockUserToken,w=Nn.MOCK_USER;else{x=mN(i.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Nn(S)}r._authCredentials=new sR(new cE(x,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wa(this.firestore,e,this._query)}}class Ut{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Jc(t,Ut._jsonSchema))return new Ut(e,i||null,new Se(bt.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:rn("string",Ut._jsonSchemaVersion),referencePath:rn("string")};class Ys extends Wa{constructor(e,t,i){super(e,t,kd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Se(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function Lg(r,e,...t){if(r=dn(r),uE("collection","path",e),r instanceof Ud){const i=bt.fromString(e,...t);return mx(i),new Ys(r,null,i)}{if(!(r instanceof Ut||r instanceof Ys))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(bt.fromString(e,...t));return mx(i),new Ys(r.firestore,null,i)}}function ru(r,e,...t){if(r=dn(r),arguments.length===1&&(e=cg.newId()),uE("doc","path",e),r instanceof Ud){const i=bt.fromString(e,...t);return px(i),new Ut(r,null,new Se(i))}{if(!(r instanceof Ut||r instanceof Ys))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(bt.fromString(e,...t));return px(i),new Ut(r.firestore,r instanceof Ys?r.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="AsyncQueue";class i_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nT(this,"async_queue_retry"),this._c=()=>{const i=rm();i&&fe(r_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!dl(e))throw e;fe(r_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ki("INTERNAL UNHANDLED ERROR: ",s_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Cg.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&ke(47125,{Pc:s_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function s_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Zs extends Ud{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new i_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i_(e),this._firestoreClient=void 0,await e}}}function oD(r,e){const t=typeof r=="object"?r:vw(),i=typeof r=="string"?r:ad,o=Zm(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=fN("firestore");c&&aD(o,...c)}return o}function zd(r){if(r._terminated)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||lD(r),r._firestoreClient}function lD(r){var i,o,c,u;const e=r._freezeSettings(),t=sD(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(o=r._app)==null?void 0:o.options.apiKey,e);r._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new JI(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ir(En.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ir(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jc(e,Ir._jsonSchema))return Ir.fromBase64String(e.bytes)}}Ir._jsonSchemaVersion="firestore/bytes/1.0",Ir._jsonSchema={type:rn("string",Ir._jsonSchemaVersion),bytes:rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(Jc(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:rn("string",gi._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jc(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new de(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:rn("string",Fr._jsonSchemaVersion),vectorValues:rn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=/^__.*__$/;class uD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ia(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class _T{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ia(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{dataSource:r})}}class zg{constructor(e,t,i,o,c,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new zg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return yd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wT(this.dataSource)&&cD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class hD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Md(e)}createContext(e,t,i,o=!1){return new zg({dataSource:e,methodName:t,targetDoc:i,path:wn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bg(r){const e=r._freezeSettings(),t=Md(r._databaseId);return new hD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function dD(r,e,t,i,o,c={}){const u=r.createContext(c.merge||c.mergeFields?2:0,e,t,o);Hg("Data must be an object, but it was:",u,i);const m=ET(i,u);let g,y;if(c.merge)g=new dr(u.fieldMask),y=u.fieldTransforms;else if(c.mergeFields){const x=[];for(const w of c.mergeFields){const S=al(e,w,t);if(!u.contains(S))throw new de(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);NT(x,S)||x.push(S)}g=new dr(x),y=u.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=u.fieldTransforms;return new uD(new Xn(m),g,y)}class Bd extends Ug{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bd}}function fD(r,e,t,i){const o=r.createContext(1,e,t);Hg("Data must be an object, but it was:",o,i);const c=[],u=Xn.empty();ra(i,((g,y)=>{const x=ST(e,g,t);y=dn(y);const w=o.childContextForFieldPath(x);if(y instanceof Bd)c.push(x);else{const S=iu(y,w);S!=null&&(c.push(x),u.set(x,S))}}));const m=new dr(c);return new _T(u,m,o.fieldTransforms)}function pD(r,e,t,i,o,c){const u=r.createContext(1,e,t),m=[al(e,i,t)],g=[o];if(c.length%2!=0)throw new de(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)m.push(al(e,c[S])),g.push(c[S+1]);const y=[],x=Xn.empty();for(let S=m.length-1;S>=0;--S)if(!NT(y,m[S])){const L=m[S];let Q=g[S];Q=dn(Q);const ne=u.childContextForFieldPath(L);if(Q instanceof Bd)y.push(L);else{const ie=iu(Q,ne);ie!=null&&(y.push(L),x.set(L,ie))}}const w=new dr(y);return new _T(x,w,u.fieldTransforms)}function mD(r,e,t,i=!1){return iu(t,r.createContext(i?4:3,e))}function iu(r,e){if(TT(r=dn(r)))return Hg("Unsupported field value:",e,r),ET(r,e);if(r instanceof Ug)return(function(i,o){if(!wT(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const c=[];let u=0;for(const m of i){let g=iu(m,o.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),u++}return{arrayValue:{values:c}}})(r,e)}return(function(i,o){if((i=dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return XR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Tt.fromDate(i);return{timestampValue:dd(o.serializer,c)}}if(i instanceof Tt){const c=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:dd(o.serializer,c)}}if(i instanceof gi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ir)return{bytesValue:qE(o.serializer,i._byteString)};if(i instanceof Ut){const c=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(c))throw o.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:bg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Fr)return(function(u,m){const g=u instanceof Fr?u.toArray():u;return{mapValue:{fields:{[bE]:{stringValue:xE},[od]:{arrayValue:{values:g.map((x=>{if(typeof x!="number")throw m.createError("VectorValues must only contain numeric values.");return mg(m.serializer,x)}))}}}}}})(i,o);if(JE(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Nd(i)}`)})(r,e)}function ET(r,e){const t={};return fE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(r,((i,o)=>{const c=iu(o,e.childContextForField(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function TT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Tt||r instanceof gi||r instanceof Ir||r instanceof Ut||r instanceof Ug||r instanceof Fr||JE(r))}function Hg(r,e,t){if(!TT(t)||!hE(t)){const i=Nd(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function al(r,e,t){if((e=dn(e))instanceof Vg)return e._internalPath;if(typeof e=="string")return ST(r,e);throw yd("Field path arguments must be of type string or ",r,!1,void 0,t)}const gD=new RegExp("[~\\*/\\[\\]]");function ST(r,e,t){if(e.search(gD)>=0)throw yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Vg(...e.split("."))._internalPath}catch{throw yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function yd(r,e,t,i,o){const c=i&&!i.isEmpty(),u=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||u)&&(g+=" (found",c&&(g+=` in field ${i}`),u&&(g+=` in document ${o}`),g+=")"),new de(Z.INVALID_ARGUMENT,m+r+g)}function NT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{convertValue(e,t="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ra(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){var i,o,c;const t=(c=(o=(i=e.fields)==null?void 0:i[od].arrayValue)==null?void 0:o.values)==null?void 0:c.map((u=>qt(u.doubleValue)));return new Fr(t)}convertGeoPoint(e){return new gi(qt(e.latitude),qt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Rd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(zc(e));default:return null}}convertTimestamp(e){const t=Qs(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=bt.fromString(e);ot(XE(i),9688,{name:e});const o=new Bc(i.get(1),i.get(3)),c=new Se(i.popFirst(5));return o.isEqual(t)||Ki(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends yD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ir(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}const a_="@firebase/firestore",o_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of i)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(al("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vD extends AT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qg{}class bD extends qg{}function xD(r,e,...t){let i=[];e instanceof qg&&i.push(e),i=i.concat(t),(function(c){const u=c.filter((g=>g instanceof Fg)).length,m=c.filter((g=>g instanceof Hd)).length;if(u>1||u>0&&m>0)throw new de(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Hd extends bD{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Hd(e,t,i)}_apply(e){const t=this._parse(e);return RT(e._query,t),new Wa(e.firestore,e.converter,Cm(e._query,t))}_parse(e){const t=Bg(e.firestore);return(function(c,u,m,g,y,x,w){let S;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new de(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){u_(w,x);const Q=[];for(const ne of w)Q.push(c_(g,c,ne));S={arrayValue:{values:Q}}}else S=c_(g,c,w)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||u_(w,x),S=mD(m,u,w,x==="in"||x==="not-in");return nn.create(y,x,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _D(r,e,t){const i=e,o=al("where",r);return Hd._create(o,i,t)}class Fg extends qg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:$r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const m=c.getFlattenedFilters();for(const g of m)RT(u,g),u=Cm(u,g)})(e._query,t),new Wa(e.firestore,e.converter,Cm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function c_(r,e,t){if(typeof(t=dn(t))=="string"){if(t==="")throw new de(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CE(e)&&t.indexOf("/")!==-1)throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(bt.fromString(t));if(!Se.isDocumentKey(i))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ex(r,new Se(i))}if(t instanceof Ut)return Ex(r,t._key);throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nd(t)}.`)}function u_(r,e){if(!Array.isArray(r)||r.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RT(r,e){const t=(function(o,c){for(const u of o)for(const m of u.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function wD(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Tc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ua extends AT{constructor(e,t,i,o,c,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(al("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ua._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ua._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ua._jsonSchema={type:rn("string",Ua._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};class $h extends Ua{data(e={}){return super.data(e)}}class za{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Tc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new $h(this._firestore,this._userDataWriter,i.key,i,new Tc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((m=>{const g=new $h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Tc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new $h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Tc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),x=u.indexOf(m.doc.key)),{type:ED(m.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ED(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:rn("string",za._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(r){r=fr(r,Ut);const e=fr(r.firestore,Zs),t=zd(e);return tD(t,r._key).then((i=>DT(e,r,i)))}function SD(r){r=fr(r,Wa);const e=fr(r.firestore,Zs),t=zd(e),i=new Gg(e);return CT(r._query),nD(t,r._query).then((o=>new za(e,i,r,o)))}function kT(r,e,t){r=fr(r,Ut);const i=fr(r.firestore,Zs),o=wD(r.converter,e),c=Bg(i);return Yg(i,[dD(c,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,qr.none())])}function ND(r,e,t,...i){r=fr(r,Ut);const o=fr(r.firestore,Zs),c=Bg(o);let u;return u=typeof(e=dn(e))=="string"||e instanceof Vg?pD(c,"updateDoc",r._key,e,t,i):fD(c,"updateDoc",r._key,e),Yg(o,[u.toMutation(r._key,qr.exists(!0))])}function AD(r){return Yg(fr(r.firestore,Zs),[new gg(r._key,qr.none())])}function IT(r,...e){var y,x,w;r=dn(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||l_(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(l_(e[i])){const S=e[i];e[i]=(y=S.next)==null?void 0:y.bind(S),e[i+1]=(x=S.error)==null?void 0:x.bind(S),e[i+2]=(w=S.complete)==null?void 0:w.bind(S)}let c,u,m;if(r instanceof Ut)u=fr(r.firestore,Zs),m=kd(r._key.path),c={next:S=>{e[i]&&e[i](DT(u,r,S))},error:e[i+1],complete:e[i+2]};else{const S=fr(r,Wa);u=fr(S.firestore,Zs),m=S._query;const L=new Gg(u);c={next:Q=>{e[i]&&e[i](new za(u,L,S,Q))},error:e[i+1],complete:e[i+2]},CT(r._query)}const g=zd(u);return eD(g,m,o,c)}function Yg(r,e){const t=zd(r);return rD(t,e)}function DT(r,e,t){const i=t.docs.get(e._key),o=new Gg(r);return new Ua(r,o,e._key,i,new Tc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){rR(ll),el(new Ha("firestore",((i,{instanceIdentifier:o,options:c})=>{const u=i.getProvider("app").getImmediate(),m=new Zs(new aR(i.getProvider("auth-internal")),new cR(u,i.getProvider("app-check-internal")),NR(u,o),u);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),qs(a_,o_,e),qs(a_,o_,"esm2020")})();const CD={apiKey:"AIzaSyD2rR0OH2OzSlt4fs2w72TKOUNDngp0zXQ",authDomain:"singmode-7c657.firebaseapp.com",projectId:"singmode-7c657",storageBucket:"singmode-7c657.firebasestorage.app",messagingSenderId:"292866266443",appId:"1:292866266443:web:190d34e55980509c1b04ce"},jT=yw(CD),Dc=tR(jT),sa=oD(jT),$g="kstar_karaoke_session",Pn="kstar_active_user",Rn="kstar_user_accounts";let zt=!1;const OT={id:"current-session",participants:[],requests:[],currentRound:null,history:[],messages:[],tickerMessages:[],verifiedSongbook:[],isPlayingVideo:!1,nextRequestNumber:1,maxRequestsPerUser:5,bannedUsers:[]},Um=typeof window<"u"&&window.chrome&&window.chrome.storage,rt={get:async r=>{if(Um)return(await window.chrome.storage.local.get([r]))[r];const e=localStorage.getItem(r);return e?JSON.parse(e):null},set:async(r,e)=>{Um?await window.chrome.storage.local.set({[r]:e}):localStorage.setItem(r,JSON.stringify(e)),typeof window<"u"&&(window.dispatchEvent(new Event("kstar_sync")),window.dispatchEvent(new Event("storage")))}};xt.onStateReceived=r=>{zt&&rt.set($g,r)};xt.onActionReceived=r=>{RD(r)};xt.onPeerConnected=async()=>{if(!zt){const r=await Ze();xt.broadcastState(r)}};async function RD(r){switch(r.type){case"ADD_REQUEST":await Bi(r.payload);break;case"JOIN_SESSION":{const{id:i,profile:o}=r.payload;if(o){const c=await Ft(),u=c.findIndex(m=>m.id===i);u===-1?(c.push(o),await rt.set(Rn,c)):(c[u]={...c[u],...o},await rt.set(Rn,c))}await qi(i);break}case"TOGGLE_STATUS":await Va(r.payload.id,r.payload.status);break;case"TOGGLE_MIC":await VD(r.payload.id,r.payload.enabled);break;case"DELETE_REQUEST":await Pa(r.payload);break;case"UPDATE_REQUEST":await xd(r.payload.id,r.payload.updates);break;case"ADD_CHAT":await HD(r.senderId,r.payload.name,r.payload.text);break;case"SYNC_PROFILE":if(zt){const i=await Mn();i&&i.id===r.payload.id&&await rt.set(Pn,r.payload)}const e=await Ft(),t=e.findIndex(i=>i.id===r.payload.id);t>-1?e[t]=r.payload:e.push(r.payload),await rt.set(Rn,e);break;case"TOGGLE_FAVORITE":zt||await MT(r.payload,r.senderId);break;case"REORDER_ROUND":await LT(r.payload);break;case"REORDER_REQUESTS":await VT(r.payload);break;case"REORDER_PENDING":await UT(r.payload);break;case"REORDER_MY_REQUESTS":await zm(r.senderId,r.payload.requestId,r.payload.direction);break}}const sm=async(r,e)=>{zt=r==="PARTICIPANT"&&!!e;const t=await xt.initialize(r,e);if(!zt&&t){const i=await Mn(),o=(i==null?void 0:i.name)||"SingMode DJ",c=i==null?void 0:i.id;await qD({id:t,hostName:o,hostUid:c,isActive:!0,startedAt:Date.now()}),window.addEventListener("beforeunload",()=>{FD(t)});const u=Lg(sa,"users");IT(u,async m=>{const g=[];m.forEach(L=>{g.push(L.data())});const x=(await rt.get(Rn)||[]).filter(L=>!g.some(Q=>Q.id===L.id)),w=[...g,...x];if(!w.some(L=>L.id.startsWith("singer-")||L.name.toLowerCase().includes("dinger"))&&w.length<5){const L=Array.from({length:5},(Q,ne)=>({id:`singer-${ne+1}`,name:`DINGER${ne+1}`,password:"123",favorites:[],personalHistory:[],createdAt:Date.now()}));w.push(...L)}console.log("Synced users from Firestore:",g.length,"Local preserved:",x.length,"Total:",w.length),rt.set(Rn,w)})}},Ze=async()=>{const r=await rt.get($g)||{...OT};return r.history||(r.history=[]),r.messages||(r.messages=[]),r.tickerMessages||(r.tickerMessages=[]),r.verifiedSongbook||(r.verifiedSongbook=[]),r.isPlayingVideo===void 0&&(r.isPlayingVideo=!1),r.nextRequestNumber||(r.nextRequestNumber=1),r.maxRequestsPerUser===void 0&&(r.maxRequestsPerUser=5),r.bannedUsers||(r.bannedUsers=[]),r},yt=async r=>{await rt.set($g,r),xt.broadcastState(r)},PT=(r,e)=>{if(e.youtubeUrl&&e.youtubeUrl.trim()!==""){const t=r.verifiedSongbook.find(i=>i.songName.toLowerCase()===e.songName.toLowerCase()&&i.artist.toLowerCase()===e.artist.toLowerCase());if(t)t.youtubeUrl!==e.youtubeUrl&&(t.youtubeUrl=e.youtubeUrl);else{const i={id:Math.random().toString(36).substr(2,9),songName:e.songName,artist:e.artist,youtubeUrl:e.youtubeUrl,type:e.type,addedAt:Date.now()};r.verifiedSongbook.push(i)}}},kD=async r=>{const e=await Ze(),t={...r,id:Math.random().toString(36).substr(2,9),addedAt:Date.now()};e.verifiedSongbook.push(t),await yt(e)},ID=async(r,e)=>{const t=await Ze(),i=t.verifiedSongbook.findIndex(o=>o.id===r);i!==-1&&(t.verifiedSongbook[i]={...t.verifiedSongbook[i],...e},await yt(t))},h_=async r=>{const e=await Ze();e.verifiedSongbook=e.verifiedSongbook.filter(t=>t.id!==r),await yt(e)},DD=async()=>{const r=await Ze(),e={...OT,id:`session-${Date.now()}`,verifiedSongbook:r.verifiedSongbook,nextRequestNumber:1};await yt(e)},Ft=async()=>{let r=await rt.get(Rn);if(!r||r.length===0){try{const t=Lg(sa,"users"),i=await SD(t),o=[];if(i.forEach(c=>o.push(c.data())),o.length>0)return await rt.set(Rn,o),o}catch(t){console.error("Error fetching users from Firebase:",t)}return Array.from({length:5},(t,i)=>({id:`singer-${i+1}`,name:`Singer${i+1}`,favorites:[],personalHistory:[],createdAt:Date.now()}))}return r},pl=async(r,e)=>{try{const t=ru(sa,"users",r);if(e.name&&(await Ft()).find(m=>{var g;return m.id!==r&&m.name.toLowerCase()===((g=e.name)==null?void 0:g.toLowerCase())}))return{success:!1,error:"Username already exists."};await ND(t,e);const i=await Ft(),o=i.findIndex(c=>c.id===r);if(o>-1){i[o]={...i[o],...e},await rt.set(Rn,i);const c=await Mn();c&&c.id===r&&await rt.set(Pn,i[o]),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:i[o],senderId:"DJ"})}return{success:!0}}catch(t){return console.error("Error updating account:",t),{success:!1,error:t.message}}},d_=async(r,e)=>{const t=await Ft(),i=t.findIndex(o=>o.id===r);if(i>-1){const o=t[i].favorites.filter(c=>c.id!==e);await pl(r,{favorites:o})}},jD=async(r,e,t)=>{const i=await Ft(),o=i.findIndex(c=>c.id===r);if(o>-1){const c=[...i[o].favorites],u=c.findIndex(m=>m.id===e);u>-1&&(c[u]={...c[u],...t},await pl(r,{favorites:c}))}},OD=async(r,e)=>{const t=await Ft(),i=t.findIndex(o=>o.id===r);if(i>-1){const o={...e,id:Math.random().toString(36).substr(2,9)},c=[...t[i].favorites,o];await pl(r,{favorites:c})}},f_=async(r,e)=>{const t=await Ft(),i=t.findIndex(o=>o.id===r);if(i>-1){const o=t[i].personalHistory.filter(c=>c.id!==e);await pl(r,{personalHistory:o})}},PD=async(r,e,t)=>{const i=await Ft(),o=i.findIndex(c=>c.id===r);if(o>-1){const c=[...i[o].personalHistory],u=c.findIndex(m=>m.id===e);u>-1&&(c[u]={...c[u],...t},await pl(r,{personalHistory:c}))}},Sc=async r=>{await bd(r);try{let t=await Ft();t=t.filter(i=>i.id!==r),await rt.set(Rn,t)}catch(t){console.error("Error deleting account",t)}const e=await Mn();e&&e.id===r&&await Gd()},Mn=async()=>await rt.get(Pn),vd=async(r,e=!1)=>{var t,i;try{let o=r.id;const c=!!(r.password&&r.email),u=!!(r.password&&!r.email);if(c)try{o=(await tx(Dc,r.email,r.password)).user.uid}catch(x){if(x.code==="auth/email-already-in-use")return{success:!1,error:"Email already in use."};throw x}else if(u){const x=`${(t=r.name)==null?void 0:t.replace(/\s+/g,"").toLowerCase()}@singmode.app`;try{o=(await tx(Dc,x,r.password)).user.uid}catch(w){if(w.code==="auth/email-already-in-use")return{success:!1,error:"Username already taken."};throw w}}else{const x=await Ft(),w=x.find(S=>{var L;return S.name.toLowerCase()===((L=r.name)==null?void 0:L.trim().toLowerCase())});if(w)try{const S=new Date(w.createdAt||Date.now()),L=`${S.getMonth()+1}/${S.getDate()}`,Q=`${w.name} (${L})`;w.name=Q,await rt.set(Rn,x)}catch(S){console.warn("Failed to rename existing user locally:",S)}try{o=(await LA(Dc)).user.uid}catch(S){return console.error("Anon Auth Error:",S),{success:!1,error:"Guest login failed."}}}const m={id:o,name:((i=r.name)==null?void 0:i.trim())||"Guest",email:r.email||void 0,password:u?r.password:void 0,favorites:r.favorites||[],personalHistory:r.personalHistory||[],createdAt:Date.now()},g=JSON.parse(JSON.stringify(m));await kT(ru(sa,"users",o),g);const y=await Ft();if(y.some(x=>x.id===o)||(y.push(m),await rt.set(Rn,y)),e)await rt.set(Pn,m);else if(!zt)try{xt.broadcastAction({type:"SYNC_PROFILE",payload:m,senderId:"DJ"})}catch{}return{success:!0,profile:m}}catch(o){return console.error("Registration error:",o),{success:!1,error:o.message}}},MD=async(r,e)=>{if(r.toLowerCase()==="singmaster"&&e==="Organized"){const o={id:"admin-singmaster",name:"SingMaster",password:"Organized",favorites:[],personalHistory:[],createdAt:Date.now()};return await rt.set(Pn,o),{success:!0,profile:o}}const i=(await Ft()).find(o=>o.name.toLowerCase()===r.toLowerCase());if(!i&&!e)return await vd({name:r},!0);if(e)try{const o=`${r.replace(/\s+/g,"").toLowerCase()}@singmode.app`,u=(await BA(Dc,o,e)).user.uid,m=await TD(ru(sa,"users",u));if(m.exists()){const g=m.data();return await rt.set(Pn,g),{success:!0,profile:g}}else return i?{success:!0,profile:i}:{success:!1,error:"Profile data missing."}}catch(o){return console.warn("Firebase login failed, checking legacy local storage:",o),i?i.password&&i.password===e?(await rt.set(Pn,i),{success:!0,profile:i}):{success:!1,error:"Incorrect passkey."}:{success:!1,error:o.message||"Login failed."}}return i&&!i.password?{success:!0,profile:i}:{success:!1,error:"User handle not found."}},Gd=async()=>{await qA(Dc),Um?await window.chrome.storage.local.remove([Pn]):localStorage.removeItem(Pn),window.dispatchEvent(new Event("kstar_sync"))},qi=async r=>{var c;const e=await Ze(),t=(c=e.bannedUsers)==null?void 0:c.find(u=>u.id===r);if(t)throw new Error(`ACCESS DENIED: ${t.reason}`);if(zt){const u=await Mn();return xt.sendAction({type:"JOIN_SESSION",payload:{id:r,profile:u},senderId:r}),{id:r,name:(u==null?void 0:u.name)||"Joining...",status:Vt.STANDBY,joinedAt:Date.now()}}const o=(await Ft()).find(u=>u.id===r);if(!o){const u=await Mn();if(u&&u.id===r)return await p_(e,u);throw new Error("Profile not found")}return await p_(e,o)},p_=async(r,e)=>{const t={id:e.id,name:e.name,status:Vt.STANDBY,micEnabled:!1,joinedAt:Date.now()},i=r.participants.findIndex(o=>o.id===e.id);return i>-1?r.participants[i]={...r.participants[i],...t,status:r.participants[i].status}:r.participants.push(t),await yt(r),t},m_=async(r,e)=>{const t=await Ft(),i=t.findIndex(o=>o.id===r);if(i>-1){t[i].vocalRange=e,await rt.set(Rn,t),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:t[i],senderId:"DJ"});const o=await Mn();o&&o.id===r&&await rt.set(Pn,t[i])}},MT=async(r,e)=>{var c;const t=e||((c=await Mn())==null?void 0:c.id);if(!t)return;if(zt&&!e){xt.sendAction({type:"TOGGLE_FAVORITE",payload:r,senderId:t});const u=await Mn();if(u){const m=u.favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);m>-1?u.favorites.splice(m,1):u.favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await rt.set(Pn,u)}return}const i=await Ft(),o=i.findIndex(u=>u.id===t);if(o>-1){const u=i[o].favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);u>-1?i[o].favorites.splice(u,1):i[o].favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await rt.set(Rn,i),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:i[o],senderId:"DJ"});const m=await Mn();m&&m.id===t&&await rt.set(Pn,i[o])}},bd=async r=>{const e=await Ze(),i=e.requests.filter(o=>o.participantId===r).map(o=>({...o,playedAt:Date.now(),status:Ge.DONE,isInRound:!1}));i.length>0&&(e.history=[...i,...e.history].slice(0,100)),e.participants=e.participants.filter(o=>o.id!==r),e.requests=e.requests.filter(o=>o.participantId!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(o=>o.participantId!==r),e.currentRound.length===0&&(e.currentRound=null)),await yt(e)},Va=async(r,e)=>{if(zt){xt.sendAction({type:"TOGGLE_STATUS",payload:{id:r,status:e},senderId:r});return}const t=await Ze(),i=t.participants.find(o=>o.id===r);i&&(i.status=e,await yt(t))},kh=async(r,e,t)=>{const i=await Ze();i.bannedUsers||(i.bannedUsers=[]),i.bannedUsers.push({id:r,name:e,reason:t,bannedAt:Date.now()}),await yt(i),await bd(r)},LD=async r=>{const e=await Ze();e.maxRequestsPerUser=r,await yt(e)},zm=async(r,e,t)=>{if(zt){xt.sendAction({type:"REORDER_MY_REQUESTS",payload:{requestId:e,direction:t},senderId:r});return}const i=await Ze(),o=i.requests.filter(x=>x.participantId===r&&x.status!==Ge.DONE),c=o.findIndex(x=>x.id===e);if(c===-1)return;const u=t==="up"?c-1:c+1;if(u<0||u>=o.length)return;const[m]=o.splice(c,1);o.splice(u,0,m);const g=[...i.requests];g.map((x,w)=>x.participantId===r&&x.status!==Ge.DONE?w:-1).filter(x=>x!==-1).forEach((x,w)=>{g[x]=o[w]}),i.requests=g,await yt(i)},VD=async(r,e)=>{if(zt){xt.sendAction({type:"TOGGLE_MIC",payload:{id:r,enabled:e},senderId:r});return}const t=await Ze(),i=t.participants.find(o=>o.id===r);i&&(i.micEnabled=e,await yt(t))},Bi=async r=>{if(zt)return xt.sendAction({type:"ADD_REQUEST",payload:r,senderId:r.participantId}),null;const e=await Ze(),t=e.nextRequestNumber++,i={...r,id:Math.random().toString(36).substr(2,9),requestNumber:t,createdAt:Date.now(),status:Ge.PENDING,isInRound:!1},o=e.requests.filter(g=>g.participantId===r.participantId&&g.status===Ge.PENDING).length;if(e.maxRequestsPerUser&&o>=e.maxRequestsPerUser)throw new Error(`Request limit reached. Max ${e.maxRequestsPerUser} requests allowed per performer.`);e.requests.unshift(i),PT(e,i);const c=await Ft(),u=c.findIndex(g=>g.id===r.participantId);u>-1&&(c[u].personalHistory=[i,...c[u].personalHistory].slice(0,50),await rt.set(Rn,c),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:c[u],senderId:"DJ"}));const m=await Mn();if(m&&m.id===r.participantId){const g=c.find(y=>y.id===r.participantId);g&&await rt.set(Pn,g)}return await yt(e),i},xd=async(r,e)=>{if(zt){xt.sendAction({type:"UPDATE_REQUEST",payload:{id:r,updates:e},senderId:"client"});return}const t=await Ze(),i=t.requests.findIndex(c=>c.id===r);let o="";if(i!==-1&&(t.requests[i]={...t.requests[i],...e},o=t.requests[i].participantId,PT(t,t.requests[i])),t.currentRound){const c=t.currentRound.findIndex(u=>u.id===r);c!==-1&&(t.currentRound[c]={...t.currentRound[c],...e},o=t.currentRound[c].participantId)}if(o){const c=await Ft(),u=c.findIndex(g=>g.id===o);if(u>-1){const g=c[u].personalHistory.findIndex(y=>y.id===r);g!==-1&&(c[u].personalHistory[g]={...c[u].personalHistory[g],...e},await rt.set(Rn,c),zt||xt.broadcastAction({type:"SYNC_PROFILE",payload:c[u],senderId:"DJ"}))}const m=await Mn();if(m&&m.id===o){const g=c.find(y=>y.id===o);g&&await rt.set(Pn,g)}}await yt(t)},gc=async r=>{const e=await Ze(),t=e.requests.find(i=>i.id===r);t&&(t.status=Ge.APPROVED,await yt(e))},UD=async r=>{const e=await Ze(),t=e.requests.findIndex(o=>o.id===r);if(t===-1)return;const i=e.requests[t];i.status=Ge.APPROVED,i.isInRound=!0,e.currentRound?e.currentRound.push({...i}):e.currentRound=[{...i}],await yt(e)},g_=async r=>{if(zt)return;const e=await Ze(),t=e.requests.find(i=>i.id===r);if(t){if(t.status=Ge.DONE,t.completedAt=Date.now(),e.currentRound){const i=e.currentRound.find(o=>o.id===r);i&&(i.status=Ge.DONE,i.completedAt=Date.now())}await yt(e)}},Pa=async r=>{if(zt){xt.sendAction({type:"DELETE_REQUEST",payload:r,senderId:"client"});return}const e=await Ze();e.requests=e.requests.filter(t=>t.id!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(t=>t.id!==r),e.currentRound.length===0&&(e.currentRound=null)),await yt(e)},y_=async(r,e)=>{const t=await Ze(),i=t.requests.findIndex(c=>c.id===r);if(i===-1)return;const o=e==="up"?i-1:i+1;if(o>=0&&o<t.requests.length){const c=t.requests[i];t.requests[i]=t.requests[o],t.requests[o]=c,await yt(t)}},zD=async()=>{const r=await Ze(),e=r.participants.filter(i=>r.requests.some(o=>o.participantId===i.id&&o.status===Ge.APPROVED&&o.type===gt.SINGING&&!o.isInRound)).sort((i,o)=>(o.joinedAt||0)-(i.joinedAt||0)),t=[];e.forEach(i=>{const o=r.requests.find(c=>c.participantId===i.id&&c.status===Ge.APPROVED&&c.type===gt.SINGING&&!c.isInRound);o&&(o.isInRound=!0,t.push({...o}),i.status=Vt.READY)}),t.length>0&&(r.currentRound=t,await yt(r))},LT=async r=>{const e=await Ze();e.currentRound=r,await yt(e)},VT=async r=>{const e=await Ze(),t=e.requests.filter(i=>!(i.status===Ge.APPROVED&&i.type===gt.SINGING&&!i.isInRound));e.requests=[...r,...t],await yt(e)},UT=async r=>{const e=await Ze(),t=e.requests.filter(i=>!(i.status===Ge.PENDING&&!i.isInRound));e.requests=[...r,...t],await yt(e)},BD=async()=>{const r=await Ze();if(!r.currentRound)return;const e=[...r.currentRound].sort((m,g)=>m.completedAt&&g.completedAt?m.completedAt-g.completedAt:m.completedAt?-1:g.completedAt?1:0),t=Date.now(),i=e.map(m=>({...m,playedAt:t,isInRound:!1,status:Ge.DONE,completedAt:m.completedAt||t})),o=r.currentRound.map(m=>m.id);r.history=[...i,...r.history].slice(0,100),r.requests=r.requests.filter(m=>!o.includes(m.id));const c=await Ft();for(const m of i){const g=c.findIndex(y=>y.id===m.participantId);g!==-1&&(c[g].personalHistory=[m,...c[g].personalHistory].slice(0,50))}await rt.set(Rn,c);const u=await Mn();if(u){const m=c.find(g=>g.id===u.id);m&&await rt.set(Pn,m)}r.currentRound=null,r.isPlayingVideo=!1,await yt(r)},Ih=async(r,e)=>{const t=await Ze(),i=t.nextRequestNumber++,o={...r,id:Math.random().toString(36).substr(2,9),requestNumber:i,createdAt:Date.now(),status:Ge.APPROVED,isInRound:!1,playedAt:void 0,aiIntro:void 0};t.requests.push(o),await yt(t)},v_=async()=>{const r=await Ze();r.history=[],await yt(r)},HD=async(r,e,t)=>{if(zt){xt.sendAction({type:"ADD_CHAT",payload:{name:e,text:t},senderId:r});return}const i=await Ze(),o={id:Math.random().toString(36).substr(2,9),senderId:r,senderName:e,text:t,timestamp:Date.now()};i.messages||(i.messages=[]),i.messages.push(o),await yt(i)},GD=async()=>{const r=await Ft(),e=Date.now(),t=1440*60*1e3,i=r.filter(o=>!o.password&&o.createdAt&&e-o.createdAt>t);if(i.length>0){for(const o of i)await Sc(o.id);console.log(`Cleaned up ${i.length} expired guest accounts.`)}},qD=async r=>{try{const e={...r,participantsCount:0};await kT(ru(sa,"sessions",r.id),e)}catch(e){console.error("Error registering session:",e)}},FD=async r=>{try{const e=ru(sa,"sessions",r);await AD(e)}catch(e){console.error("Error unregistering session:",e)}},YD=r=>{const e=Lg(sa,"sessions"),t=xD(e,_D("isActive","==",!0));return IT(t,i=>{const o=[];i.forEach(c=>{o.push(c.data())}),r(o)})},zT=({onSubmit:r,onCancel:e,title:t="Global Track Input",showSingerName:i=!1,initialSingerName:o="",initialSongName:c="",initialArtist:u="",initialYoutubeUrl:m="",initialType:g=gt.SINGING,submitLabel:y="Process Request",participants:x=[],currentUserId:w=""})=>{const[S,L]=se.useState(o),Q=S?`${t}: ${S}`:t,[ne,ie]=se.useState(c),[ge,Ee]=se.useState(u),[xe,_e]=se.useState(m),[Ue,Ae]=se.useState(g),[C,A]=se.useState(""),[R,M]=se.useState(""),D=j=>{if(j.preventDefault(),(!ne||!ge)&&!xe||i&&!S)return;const k=x.find(it=>it.id===R);r({singerName:S,songName:ne,artist:ge,youtubeUrl:xe,type:Ue,message:C,duetPartnerId:R||void 0,duetPartnerName:k==null?void 0:k.name})};return h.jsxs("form",{onSubmit:D,className:"relative w-full bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in fade-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"mb-8 text-center",children:[h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase tracking-tight neon-text-glow-purple mb-2",children:Q}),h.jsx("p",{className:"text-[10px] text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80",children:"SYS_SEQUENCE_INPUT"})]}),h.jsxs("div",{className:"space-y-6",children:[i&&h.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Performer Handle"}),h.jsx("input",{type:"text",required:!0,value:S,onChange:j=>L(j.target.value),placeholder:"e.g. STAR_VIBE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Track Title"}),h.jsx("input",{type:"text",value:ne,onChange:j=>ie(j.target.value),placeholder:"TITLE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Artist"}),h.jsx("input",{type:"text",value:ge,onChange:j=>Ee(j.target.value),placeholder:"ARTIST",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Source URL (Override)"}),h.jsx("input",{type:"url",value:xe,onChange:j=>_e(j.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all text-xs font-mono shadow-inner tracking-wider"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Message to DJ (Optional)"}),h.jsx("textarea",{value:C,onChange:j=>A(j.target.value),placeholder:"Key change? Dedication?",rows:2,className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest resize-none"})]}),Ue===gt.SINGING&&x.length>1&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Duet Partner (Optional)"}),h.jsxs("select",{value:R,onChange:j=>M(j.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-green)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest appearance-none",children:[h.jsx("option",{value:"",children:"-- NO PARTNER --"}),x.filter(j=>j.id!==w).map(j=>h.jsx("option",{value:j.id,children:j.name},j.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Performance Mode"}),h.jsx("div",{className:"flex bg-black/40 p-1.5 rounded-2xl border-2 border-white/5",children:Object.values(gt).map(j=>h.jsx("button",{type:"button",onClick:()=>Ae(j),className:`flex-1 py-3 rounded-xl font-bold text-[9px] uppercase tracking-widest transition-all font-righteous ${Ue===j?"bg-[var(--neon-cyan)] text-black shadow-[0_0_20px_rgba(0,229,255,0.4)]":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:j},j))})]}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{type:"button",onClick:e,className:"flex-1 py-4 bg-black hover:bg-white/5 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all border-2 border-white/10 font-righteous",children:"DISCARD"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_30px_rgba(255,0,127,0.4)] transition-all font-righteous hover:scale-105",children:y})]})]})]})};function Qg(){if(typeof window>"u")return"";const r=window.location.origin;if(!r.includes("localhost")&&!r.includes("127.0.0.1"))return r+window.location.pathname;const e=localStorage.getItem("kstar_network_ip");if(e){if(e.startsWith("http"))return e;const t=window.location.port;return`http://${e}:${t}${window.location.pathname}`}return r+window.location.pathname}function BT(r){localStorage.setItem("kstar_network_ip",r),window.dispatchEvent(new Event("kstar_sync"))}function HT(){return localStorage.getItem("kstar_network_ip")}const $D=[{songName:"Bohemian Rhapsody",artist:"Queen"},{songName:"Toxic",artist:"Britney Spears"},{songName:"Someone Like You",artist:"Adele"},{songName:"Sweet Caroline",artist:"Neil Diamond"},{songName:"Wonderwall",artist:"Oasis"},{songName:"Dancing Queen",artist:"ABBA"},{songName:"I Will Survive",artist:"Gloria Gaynor"},{songName:"Don't Stop Believin'",artist:"Journey"},{songName:"Livin' on a Prayer",artist:"Bon Jovi"},{songName:"My Way",artist:"Frank Sinatra"}],Os=({url:r})=>r?h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-3 rounded-2xl text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border-2 border-[var(--neon-cyan)]/10 transition-all shadow-xl",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,QD=({url:r})=>{const[e,t]=se.useState(!1);if(!r)return null;const i=()=>{navigator.clipboard.writeText(r).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:i,title:"Copy Video URL",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-cyan)] text-black border-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)]":"text-slate-400 hover:text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1-2-2h9a2 2 0 0 1 2 2v1"})]})})},Bo=({request:r})=>{const[e,t]=se.useState(!1),i=r.songName||r.songName,o=()=>{const u=(r.type||r.type||gt.SINGING)===gt.SINGING?" Karaoke":" Lyric",m=`${i} ${r.artist}${u}`;navigator.clipboard.writeText(m).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:o,title:"Copy Command String",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-green)] text-black border-[var(--neon-green)] shadow-[0_0_20px_rgba(0,255,157,0.4)]":"text-slate-400 hover:text-[var(--neon-green)] hover:bg-[var(--neon-green)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})},yc=({request:r})=>{const e=r.songName||r.songName,t=()=>{const o=(r.type||r.type||gt.SINGING)===gt.SINGING?" Karaoke":" Lyric",c=encodeURIComponent(`${e} ${r.artist}${o}`);window.open(`https://www.youtube.com/results?search_query=${c}`,"_blank")};return h.jsx("button",{onClick:t,title:"Search on YouTube",className:"p-3 rounded-2xl transition-all border-2 text-rose-500 hover:text-white hover:bg-rose-500 border-white/5 shadow-xl",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})})},KD=({onAdminAccess:r})=>{var wi,nr;const[e,t]=se.useState(null),[i,o]=se.useState([]),[c,u]=se.useState(!1),[m,g]=se.useState(!1),[y,x]=se.useState(null),[w,S]=se.useState(!1),[L,Q]=se.useState(!1),[ne,ie]=se.useState(!1),[ge,Ee]=se.useState(!1),[xe,_e]=se.useState(!1),[Ue,Ae]=se.useState([]),[C,A]=se.useState(null),[R,M]=se.useState(null),[D,j]=se.useState(null),[k,it]=se.useState({}),[vt,Y]=se.useState(!1),[oe,we]=se.useState(HT()||""),[Ie,Be]=se.useState(""),[P,$]=se.useState(!1),[ue,he]=se.useState(0),[Ce,je]=se.useState(null),[qe,te]=se.useState(new Set),[ae,Me]=se.useState(""),[St,Yt]=se.useState(null),[fn,He]=se.useState("COMMAND"),[pn,pr]=se.useState(""),[Dr,aa]=se.useState(""),Nt=se.useRef(null);se.useRef(null);const It=se.useRef(null),jr=se.useRef(null),[Wi,Qr]=se.useState(null),[le,_t]=se.useState(null),[Zi,Jn]=se.useState(!1),[sn,Kr]=se.useState({name:"",password:""}),[vi,Xr]=se.useState(""),pe=se.useCallback(async()=>{const E=await Ze();t(E);const X=await Ft();o(X)},[]);se.useEffect(()=>{if(le&&i.length>0){const E=i.find(X=>X.id===le.id);E&&JSON.stringify(E)!==JSON.stringify(le)&&_t(E)}},[i,le]),se.useEffect(()=>(pe(),window.addEventListener("kstar_sync",pe),window.addEventListener("storage",pe),()=>{window.removeEventListener("kstar_sync",pe),window.removeEventListener("storage",pe),Wn()}),[pe]),se.useEffect(()=>{(!(e!=null&&e.currentRound)||e.currentRound.length===0)&&te(new Set)},[e==null?void 0:e.currentRound]);const Wn=()=>{jr.current&&cancelAnimationFrame(jr.current),It.current&&(It.current.getTracks().forEach(E=>E.stop()),It.current=null),Nt.current&&(Nt.current.close(),Nt.current=null),$(!1),he(0)},$t=async(E,X,V)=>{const re=`Taking the stage now, it's ${E} with "${X}"!`;await xd(V,{aiIntro:re}),it(ve=>({...ve,[V]:re})),await pe()},Vn=async E=>{if(R&&le)R.type==="favorite"?await jD(le.id,R.itemId,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}):await PD(le.id,R.itemId,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),M(null);else if(C)await xd(C.id,{participantName:E.singerName||C.participantName,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),A(null);else if(y)await ID(y.id,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),x(null);else if(m)await kD({songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),g(!1);else{let X=(D==null?void 0:D.id)||"DJ-MANUAL",V=E.singerName||(D==null?void 0:D.name)||"Guest";if(!D&&E.singerName){const re=await vd({name:E.singerName});re.success&&re.profile&&(X=re.profile.id,V=re.profile.name,await qi(X))}await Bi({participantId:X,participantName:V,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),u(!1),j(null)}await pe()},At=async E=>{await qi(E.id);const X=[...$D];for(let V=0;V<3&&X.length!==0;V++){const re=Math.floor(Math.random()*X.length),ve=X.splice(re,1)[0],Pt=await Bi({participantId:E.id,participantName:E.name,songName:ve.songName,artist:ve.artist,type:gt.SINGING});Pt&&await gc(Pt.id)}await Va(E.id,Vt.READY),await pe()},es=(E,X,V)=>{const re=V===gt.SINGING?`${E} ${X} karaoke`:`${E} ${X} Lyrics Letra`,ve=`https://www.youtube.com/results?search_query=${encodeURIComponent(re)}`;window.open(ve,"_blank")},Jr=async E=>{var re;await UD(E),await pe();const V=(re=(await Ze()).currentRound)==null?void 0:re.find(ve=>ve.id===E);V&&$t(V.participantName,V.songName,V.id)},Za=E=>{E.youtubeUrl?window.open(E.youtubeUrl,"_blank"):es(E.songName,E.artist,E.type)},Zn=async E=>{E.preventDefault(),Xr("");const X={name:sn.name,password:sn.password||void 0};let V;Wi?V=await pl(Wi.id,X):V=await vd(X),V.success?(Qr(null),Jn(!1),Kr({name:"",password:""}),Xr(""),await pe()):Xr(V.error||"Action failed.")},[mr,Dt]=se.useState(null),[gr,er]=se.useState(null),Un=(E,X,V)=>{Dt(X),er(V),E.dataTransfer.effectAllowed="move"},eo=E=>{E.preventDefault(),E.dataTransfer.dropEffect="move"},oa=async(E,X,V)=>{if(E.preventDefault(),!(mr===null||gr!==V)){if(V==="ROUND"&&(e!=null&&e.currentRound)){const re=Array.from(e.currentRound),[ve]=re.splice(mr,1);re.splice(X,0,ve),await LT(re)}else if(V==="QUEUE"){const ve=Array.from(ln),[Pt]=ve.splice(mr,1);ve.splice(X,0,Pt),await VT(ve)}else if(V==="PENDING"){const ve=Array.from(vr),[Pt]=ve.splice(mr,1);ve.splice(X,0,Pt),await UT(ve)}Dt(null),er(null),await pe()}},Dn=E=>{Qr(E),Jn(!0),Kr({name:E.name,password:E.password||""})},Or=()=>{u(!1),A(null),M(null),j(null),S(!1),Q(!1),ie(!1),Ee(!1),_e(!1),Jn(!1),Qr(null),_t(null),Y(!1),g(!1),x(null),Yt(null)},ml=()=>{BT(oe),Y(!1),pe()},bi=async()=>{await zD(),Q(!1),await pe();const E=await Ze();E.currentRound&&E.currentRound.forEach(X=>{X.aiIntro||$t(X.participantName,X.songName,X.id)})},la=async()=>{await DD(),_e(!1),await pe()},yr=E=>{const X=i.find(V=>V.id===E);X&&(_t(X),ie(!0))};if(!e)return h.jsx("div",{className:"flex items-center justify-center p-20 min-h-screen",children:h.jsx("div",{className:"w-12 h-12 border-4 border-teal-400 border-t-transparent rounded-full animate-spin"})});const vr=e.requests.filter(E=>E.status===Ge.PENDING&&!E.isInRound),br=e.requests.filter(E=>E.status===Ge.APPROVED&&E.type===gt.SINGING&&!E.isInRound),to=e.participants.filter(E=>br.some(X=>X.participantId===E.id)).sort((E,X)=>(X.joinedAt||0)-(E.joinedAt||0)),Qt={};br.forEach(E=>{Qt[E.participantId]||(Qt[E.participantId]=[]),Qt[E.participantId].push(E)}),Object.keys(Qt).forEach(E=>{Qt[E].sort((X,V)=>X.createdAt-V.createdAt)});const ln=[];let Ct=0,Ot=!0;for(;Ot;)Ot=!1,to.forEach(E=>{Qt[E.id]&&Qt[E.id][Ct]&&(ln.push(Qt[E.id][Ct]),Ot=!0)}),Ct++;const tr=e.requests.filter(E=>E.status===Ge.APPROVED&&E.type===gt.LISTENING&&!E.isInRound),xi=e.participants.filter(E=>E.status===Vt.READY).length,ts=e.verifiedSongbook||[],ca=xt.getRoomId(),_i=Qg()+(ca?`?room=${ca}`:""),mn=({name:E,isActive:X})=>{const V=E.split(" ").map(Pt=>Pt[0]).join("").toUpperCase().slice(0,2),re=["from-teal-400 to-indigo-500","from-rose-400 to-orange-500","from-amber-400 to-rose-500","from-indigo-400 to-purple-500","from-emerald-400 to-teal-500"],ve=E.length%re.length;return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${re[ve]} p-[2px] shadow-lg shadow-black/20`,children:h.jsx("div",{className:"w-full h-full bg-slate-950 rounded-[14px] flex items-center justify-center",children:h.jsx("span",{className:"text-xl font-black text-white tracking-widest",children:V})})}),X&&h.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-[var(--neon-green)] rounded-full border-4 border-slate-950 animate-pulse"})]})};return h.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-8 space-y-12 relative font-inter text-slate-300",children:[h.jsxs("header",{className:"relative rounded-[4rem] p-1 overflow-hidden shadow-3xl mb-12 group",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] opacity-80 group-hover:opacity-100 transition-all duration-1000 animate-gradient-x"}),h.jsxs("div",{className:"relative glass-panel rounded-[3.9rem] p-10 flex flex-col md:flex-row justify-between items-center gap-12 border border-white/20 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex items-center gap-10",children:[h.jsxs("div",{className:"relative group/logo",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-[var(--neon-yellow)] to-[var(--neon-pink)] rounded-full blur-xl opacity-60 group-hover/logo:opacity-100 transition-opacity duration-500"}),h.jsx("div",{className:"relative p-1.5 rounded-full border-4 border-white/10 shadow-2xl bg-black/40",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-32 h-32 rounded-full transition-transform duration-700 group-hover/logo:rotate-[360deg]"})})]}),h.jsx("div",{children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("span",{className:"px-4 py-1.5 rounded-full bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] text-lg font-bold uppercase tracking-widest font-righteous",children:"SYS_OP_01"}),h.jsx("span",{className:"text-[var(--neon-blue)]/30",children:"||"}),h.jsxs("span",{className:"text-[var(--neon-blue)] text-lg font-bold uppercase tracking-widest font-righteous neon-glow-cyan",children:["ACTIVE_NODES: ",e.participants.length]})]}),h.jsxs("button",{onClick:()=>S(!0),className:"w-48 h-10 flex items-center justify-center text-[var(--neon-yellow)] border border-[var(--neon-yellow)]/30 bg-[var(--neon-yellow)]/5 hover:bg-[var(--neon-yellow)] hover:text-black transition-all rounded-[1rem] shadow-[0_0_15px_rgba(255,200,87,0.1)] group gap-3",children:[h.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform",children:""}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-righteous",children:"QR CODE TO SHARE"})]})]})})]}),h.jsx("div",{className:"flex gap-4",children:h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-base text-[var(--neon-yellow)] font-bold uppercase tracking-widest font-righteous mb-1",children:"SYSTEM_STATUS"}),h.jsxs("div",{className:"text-4xl text-white font-bold uppercase tracking-widest font-bungee flex items-center justify-end gap-3",children:["ONLINE ",h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-pulse shadow-[0_0_10px_var(--neon-green)]"})]})]})})]})]}),h.jsx("div",{className:"sticky top-4 z-50",children:h.jsxs("div",{className:"glass-panel p-4 rounded-[2.5rem] border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-wrap items-center gap-4 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex gap-3 p-2 bg-black/40 rounded-[2rem] border border-white/5",children:[h.jsxs("button",{onClick:()=>u(!0),className:"px-8 py-4 bg-[var(--neon-pink)] text-black font-black hover:bg-white transition-all active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(255,42,109,0.4)] text-lg uppercase tracking-[0.2em] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:rotate-90 transition-transform",children:""})," TRACK"]}),h.jsxs("button",{onClick:()=>{Q(!0),pe()},className:"px-8 py-4 bg-[var(--neon-blue)] text-black font-black hover:bg-white transition-all uppercase tracking-[0.2em] text-lg active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(5,217,232,0.4)] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:animate-spin",children:""})," SEQUENCE"]})]}),h.jsx("div",{className:"w-[1px] h-12 bg-white/10 mx-2"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>_e(!0),className:"w-14 h-14 flex items-center justify-center text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:rotate-12 transition-transform",children:""})}),r&&h.jsxs("button",{onClick:r,title:"ADMIN PORTAL",className:"w-14 h-14 flex items-center justify-center text-[var(--neon-purple)] border border-[var(--neon-purple)]/30 bg-[var(--neon-purple)]/5 hover:bg-[var(--neon-purple)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(147,51,234,0.1)] group ml-4 relative",children:[h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""}),h.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[var(--neon-pink)] rounded-full animate-pulse border-2 border-black"})]}),h.jsxs("button",{onClick:async()=>{confirm("Are you sure you want to sign out?")&&(await Gd(),window.location.reload())},title:"SIGN OUT",className:"px-6 h-14 flex items-center justify-center gap-3 text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group ml-2",children:[h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-righteous",children:"SIGN_OUT"})]})]}),h.jsx("div",{className:"flex-1"}),h.jsx("div",{className:"flex gap-2 p-2 bg-black/40 rounded-[2rem] border border-white/5 overflow-x-auto no-scrollbar",children:["COMMAND","ROTATION","PERFORMERS","DIRECTORY","LIBRARY"].map(E=>h.jsx("button",{onClick:()=>{He(E)},className:`px-8 py-3 text-base font-bold uppercase tracking-widest transition-all rounded-[1.2rem] font-righteous ${fn===E?"bg-white text-black shadow-[0_0_30px_rgba(255,255,255,0.4)] scale-105":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:E==="COMMAND"?"DECK":E},E))})]})}),h.jsxs("main",{className:"min-h-[600px] animate-in fade-in duration-500",children:[fn==="COMMAND"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 animate-in slide-in-from-bottom-2",children:[h.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[e.currentRound&&h.jsxs("section",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-[0_0_100px_rgba(255,42,109,0.3)] zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-orange)] opacity-20 animate-pulse"}),h.jsxs("div",{className:"relative bg-[#150030]/90 p-10 rounded-[2.8rem] backdrop-blur-xl border-2 border-[var(--neon-green)]/50",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-6xl animate-pulse",children:""})," ACTIVE SEQUENCE"]}),h.jsx("button",{onClick:async()=>{await BD(),await pe()},className:"px-8 py-3 bg-[var(--neon-pink)] text-black text-base font-bold uppercase hover:bg-white transition-all rounded-[1rem] tracking-widest font-righteous shadow-[0_0_20px_var(--neon-pink)] active:scale-95",children:"FINISH_SET"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:e.currentRound.map((E,X)=>{const V=e.participants.find(zn=>zn.id===E.participantId),re=(V==null?void 0:V.status)===Vt.READY,ve=e.currentRound.findIndex(zn=>zn.status!==Ge.DONE),Pt=X===(ve===-1?0:ve);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${Pt?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"w-16 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:[h.jsx("span",{className:"text-[10px] text-slate-500 font-mono uppercase tracking-widest hidden sm:block",children:"SEQ_ID"}),h.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${Pt?"text-[var(--neon-green)]":"text-slate-400"}`,children:String(E.requestNumber).padStart(3,"0")})]}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-3xl font-black uppercase truncate font-righteous tracking-tight ${Pt?"text-white":"text-slate-300"}`,children:E.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:E.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("button",{onClick:()=>yr(E.participantId),className:"flex items-center gap-2 group/singer hover:underline",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${re?"bg-[var(--neon-green)] shadow-[0_0_5px_var(--neon-green)]":"bg-slate-700"}`}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",E.participantName]})]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[Pt&&h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] mr-2 shrink-0",children:"LIVE"}),h.jsx(Bo,{request:E}),h.jsx("button",{disabled:E.status===Ge.DONE,onClick:async()=>{await g_(E.id),await pe()},className:`h-8 px-4 rounded text-xs font-black uppercase tracking-wider font-righteous transition-all border ${E.status===Ge.DONE?"bg-white/5 text-white/30 border-white/5 cursor-not-allowed":"bg-[var(--neon-cyan)]/10 text-[var(--neon-cyan)] border-[var(--neon-cyan)]/50 hover:bg-[var(--neon-cyan)] hover:text-black"}`,children:E.status===Ge.DONE?"DONE":"MARK DONE"}),h.jsx("button",{onClick:async()=>{confirm("Remove from active round?")&&(await Pa(E.id),await pe())},className:"w-8 h-8 flex items-center justify-center rounded bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white transition-all border border-rose-500/20",title:"REMOVE",children:""})]})]},E.id)})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/80 border-2 border-[var(--neon-blue)]/30 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(5,217,232,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8 px-2",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-cyan",children:[h.jsx("span",{className:"text-[var(--neon-blue)]",children:""})," REQUESTS"]}),h.jsxs("span",{className:"px-6 py-2 bg-[var(--neon-blue)]/10 border border-[var(--neon-blue)]/30 rounded-full text-base text-[var(--neon-blue)] font-bold tracking-widest font-righteous",children:[vr.length," PENDING"]})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[vr.map((E,X)=>h.jsxs("div",{draggable:!0,onDragStart:V=>Un(V,X,"PENDING"),onDragOver:eo,onDrop:V=>oa(V,X,"PENDING"),className:"bg-black/40 border border-white/5 p-4 rounded-3xl flex items-center gap-6 hover:border-[var(--neon-blue)] transition-all group cursor-move shadow-xl",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[h.jsx("div",{className:"text-xs font-black font-righteous text-[var(--neon-pink)] uppercase tracking-[0.2em] bg-[var(--neon-pink)]/10 px-2 py-0.5 rounded-full border border-[var(--neon-pink)]/20 shrink-0",children:"NEW_SIGNAL"}),h.jsx("div",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-slate-500 text-base font-black uppercase tracking-[0.2em] font-righteous truncate",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:()=>yr(E.participantId),className:"text-base font-bold text-[var(--neon-pink)] uppercase truncate hover:text-white transition-colors font-righteous tracking-[0.2em]",children:["@",E.participantName]}),E.message&&h.jsx("div",{className:"flex-1 max-w-md px-3 py-1 bg-black/40 border-l-2 border-[var(--neon-pink)] rounded-r-lg",children:h.jsxs("p",{className:"text-base text-white/60 font-medium italic truncate",children:['"',E.message,'"']})})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Bo,{request:E}),h.jsx(yc,{request:E}),h.jsx(Os,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>A(E),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white/50 hover:text-white border border-white/5",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:async()=>{await gc(E.id),await pe()},className:"px-6 py-3 bg-[var(--neon-blue)] text-black text-sm font-black uppercase hover:bg-white transition-all rounded-xl tracking-[0.1em] shadow-[0_0_20px_rgba(5,217,232,0.3)]",children:"ACCEPT"}),h.jsx("button",{onClick:async()=>{await Pa(E.id),await pe()},className:"w-11 h-11 flex items-center justify-center text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all",children:""})]})]})]},E.id)),vr.length===0&&h.jsx("div",{className:"col-span-full py-24 text-center border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-30",children:h.jsx("p",{className:"text-4xl font-black font-righteous uppercase tracking-[0.4em] italic text-slate-500",children:"NO SIGNAL DETECTED"})})]})]}),h.jsxs("div",{className:"flex flex-col gap-10",children:[h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-yellow)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-5xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-yellow flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-yellow)] animate-pulse",children:""})," APPROVED SONGS"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[ln.map((E,X)=>h.jsxs("div",{draggable:!0,onDragStart:V=>Un(V,X,"QUEUE"),onDragOver:eo,onDrop:V=>oa(V,X,"QUEUE"),className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-yellow)] transition-all cursor-move shadow-lg relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-yellow)] font-bungee text-3xl shrink-0 group-hover:scale-110 transition-transform",children:X+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-2xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-yellow)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:V=>{V.stopPropagation(),yr(E.participantId)},className:"text-sm font-black text-[var(--neon-yellow)] uppercase tracking-[0.2em] font-righteous hover:text-white transition-colors",children:["@",E.participantName]}),E.message&&h.jsxs("div",{className:"flex-1 max-w-sm px-2 py-0.5 bg-[var(--neon-yellow)]/5 border-l border-[var(--neon-yellow)]/30 rounded-r text-xs text-[var(--neon-yellow)]/70 italic truncate",children:['"',E.message,'"']})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[h.jsx("button",{onClick:async()=>{await y_(E.id,"up"),await pe()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""}),h.jsx("button",{onClick:async()=>{await y_(E.id,"down"),await pe()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Bo,{request:E}),h.jsx(yc,{request:E}),h.jsx(Os,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>A(E),className:"p-2 text-slate-600 hover:text-white text-xs font-black uppercase tracking-widest font-righteous transition-colors border border-white/5 rounded-lg",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5",children:[h.jsx("button",{onClick:()=>Jr(E.id),className:"px-4 py-2 bg-[var(--neon-yellow)] text-black text-sm font-black uppercase rounded-lg hover:bg-white transition-all shadow-[0_0_15px_rgba(255,200,87,0.3)] tracking-wider",children:"STAGE"}),h.jsx("button",{onClick:async()=>{await Pa(E.id),await pe()},className:"w-9 h-9 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-all",children:""})]})]})]},E.id)),ln.length===0&&h.jsx("div",{className:"flex-1 py-12 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-xl font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"QUEUE EMPTY"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-green)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl md:text-4xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-green flex items-center gap-4 flex-wrap",children:[h.jsx("span",{className:"text-[var(--neon-green)] animate-pulse",children:""})," ATMOSPHERE"]}),h.jsxs("div",{className:"space-y-10",children:[h.jsxs("div",{className:"p-6 bg-black/40 rounded-3xl border border-white/5 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[h.jsx("label",{className:"text-sm md:text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.2em] font-righteous opacity-80 break-words",children:"MAX_REQUESTS_PER_NODE"}),h.jsx("span",{className:"text-4xl font-black text-white font-bungee neon-glow-cyan",children:e.maxRequestsPerUser||5})]}),h.jsx("input",{type:"range",min:"1",max:"20",value:e.maxRequestsPerUser||5,onChange:async E=>{await LD(parseInt(E.target.value)),await pe()},className:"w-full accent-[var(--neon-cyan)] bg-white/5 rounded-lg appearance-none h-2 cursor-pointer transition-all"}),h.jsxs("div",{className:"flex justify-between text-xs font-black text-slate-600 font-righteous uppercase tracking-widest",children:[h.jsx("span",{children:"STRICT (1)"}),h.jsx("span",{children:"UNLIMITED (20)"})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-base font-black text-[var(--neon-pink)] uppercase tracking-[0.4em] mb-4 flex items-center gap-4 font-righteous opacity-80",children:"BACKGROUND THREADS"}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...tr].reverse().map(E=>h.jsxs("div",{className:"bg-black/60 p-5 rounded-[2rem] border border-white/10 flex flex-col justify-between group hover:border-[var(--neon-pink)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4 cursor-pointer",onClick:()=>es(E.songName,E.artist,E.type),children:[h.jsx("div",{className:"text-2xl font-black text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-pink)] transition-all",children:E.songName}),h.jsx("div",{className:"text-base text-slate-500 uppercase tracking-widest mt-1 font-righteous opacity-60 truncate",children:E.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsx(Os,{url:E.youtubeUrl}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Jr(E.id),className:"px-4 py-2 bg-[var(--neon-purple)] text-white text-sm font-black uppercase rounded-lg hover:bg-white hover:text-black transition-all shadow-[0_0_10px_var(--neon-purple)] tracking-[0.1em]",children:"BOOST"}),h.jsx("button",{onClick:async()=>{await Pa(E.id),await pe()},className:"text-rose-500/20 hover:text-rose-500 p-2 font-black",children:""})]})]})]},E.id)),tr.length===0&&h.jsx("p",{className:"text-base text-slate-700 italic px-4 font-righteous uppercase tracking-widest opacity-50",children:"NO BACKGROUND TRACKS"})]})]}),h.jsxs("div",{className:"pt-6 border-t border-white/5",children:[h.jsxs("h4",{className:"text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.4em] mb-6 flex justify-between items-center font-righteous opacity-80",children:[h.jsx("span",{children:"VERIFIED_LINKS"}),h.jsx("button",{onClick:()=>g(!0),className:"text-[var(--neon-cyan)] hover:text-white transition-colors underline decoration-dotted",children:"+ ADD NEW"})]}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...ts].reverse().map(E=>h.jsxs("div",{className:"bg-black/80 p-5 rounded-[2rem] border border-white/5 flex flex-col justify-between group hover:border-[var(--neon-cyan)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4",children:[h.jsx("div",{className:"text-2xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors font-bungee mb-1",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous font-bold",children:E.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx(QD,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>x(E),className:"text-slate-600 hover:text-white p-2",children:""})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:()=>es(E.songName,E.artist,E.type),className:"px-3 py-1 bg-black border border-[var(--neon-cyan)] text-[var(--neon-cyan)] text-sm font-black uppercase rounded-md hover:bg-[var(--neon-cyan)] hover:text-black transition-all tracking-widest",children:"RUN"}),h.jsx("button",{onClick:()=>{u(!0)},className:"px-3 py-1 bg-[var(--neon-pink)] text-black text-sm font-black uppercase rounded-md hover:bg-white transition-all shadow-lg tracking-widest",children:"PUSH"}),h.jsx("button",{onClick:async()=>{confirm("Delete verified song?")&&(await h_(E.id),await pe())},className:"text-rose-500/20 hover:text-rose-500 px-1 font-black",children:""})]})]})]},E.id)),ts.length===0&&h.jsx("p",{className:"text-xl text-slate-800 italic px-4 font-righteous uppercase tracking-widest opacity-30",children:"NO VERIFIED SONGS"})]})]})]})]})]})]}),h.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[600px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"PERFORMERS"}),h.jsxs("div",{className:"flex items-center gap-2 bg-white/5 px-3 py-1 rounded-full border border-white/5",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-sm text-[var(--neon-cyan)] font-bold uppercase tracking-widest",children:[xi," ONLINE"]})]})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.participants.map(E=>{const X=E.status===Vt.READY,re=e.requests.filter(ve=>ve.participantId===E.id).filter(ve=>ve.status===Ge.APPROVED&&ve.type===gt.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] transition-all border ${X?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"bg-black/40 border-white/5 hover:bg-white/5"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-4",children:[h.jsx("button",{onClick:async()=>{await Va(E.id,X?Vt.STANDBY:Vt.READY),await pe()},className:`w-3 h-3 rounded-full shrink-0 transition-all ${X?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-800"}`}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>yr(E.id),className:`text-xl font-black uppercase truncate text-left transition-colors font-righteous ${X?"text-white":"text-slate-500 hover:text-[var(--neon-green)]"}`,children:E.name}),re>0&&h.jsxs("span",{className:"block text-xs text-[var(--neon-cyan)] font-black mt-0.5 tracking-[0.2em]",children:[re," REQUESTS"]})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>j(E),className:"p-2 hover:text-[var(--neon-cyan)] transition-colors text-slate-600",children:"+"}),h.jsx("button",{onClick:async()=>{confirm(`Remove ${E.name}?`)&&(await bd(E.id),await pe())},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-colors",children:""})]})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg font-righteous uppercase tracking-widest",children:"NO DATA"})})]})]}),h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[400px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await v_(),await pe()},className:"text-sm font-bold text-rose-500/40 hover:text-rose-500 uppercase tracking-widest transition-all",children:"CLEAR"})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.history.map((E,X)=>h.jsxs("div",{className:"bg-black/40 p-4 rounded-2xl border border-white/5 flex flex-col group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{className:"min-w-0 pr-2",children:[h.jsx("div",{className:"text-xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-purple)] transition-colors font-bungee",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[h.jsx(Bo,{request:E}),h.jsx(yc,{request:E}),h.jsx(Os,{url:E.youtubeUrl})]})]}),h.jsxs("div",{className:"flex items-center justify-between mt-2 border-t border-white/5 pt-2",children:[h.jsxs("span",{className:"text-base font-black text-[var(--neon-pink)] uppercase truncate",children:["@",E.participantName]}),h.jsx("button",{onClick:async()=>{await Ih(E),await pe()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-pink)] hover:underline transition-all uppercase tracking-widest",children:"RE-QUEUE"})]})]},X)),e.history.length===0&&h.jsx("div",{className:"text-center py-16 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-800",children:"EMPTY"})})]})]})]})]}),fn==="ROTATION"&&h.jsxs("div",{className:"space-y-16 animate-in slide-in-from-bottom-2 pb-32",children:[e.currentRound&&e.currentRound.length>0&&h.jsxs("section",{className:"glass-panel border-4 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(0,255,157,0.3)] relative overflow-hidden neon-sign-border-green",children:[h.jsxs("div",{className:"flex items-center gap-8 mb-12",children:[h.jsx("div",{className:"w-8 h-8 bg-[var(--neon-green)] rounded-full animate-ping shadow-[0_0_25px_var(--neon-green)]"}),h.jsx("h3",{className:"text-6xl font-black text-white uppercase tracking-tighter font-righteous neon-glow-green",children:"ROTATION"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:e.currentRound.map((E,X)=>{const V=e.currentRound.findIndex(ve=>ve.status!==Ge.DONE),re=X===(V===-1?0:V);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${re?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"w-16 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:[h.jsx("span",{className:"text-[10px] text-slate-500 font-mono uppercase tracking-widest",children:"SEQ_ID"}),h.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${re?"text-[var(--neon-green)]":"text-slate-400"}`,children:String(E.requestNumber).padStart(3,"0")})]}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-3xl font-black uppercase truncate font-righteous tracking-tight ${re?"text-white":"text-slate-300"}`,children:E.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:E.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",E.participantName]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-6 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[re&&h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] mr-2 shrink-0",children:"LIVE"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Bo,{request:E}),h.jsx(yc,{request:E}),h.jsx(Os,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>A(E),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white/5 hover:bg-white hover:text-black border border-white/10 transition-all text-slate-400 group",title:"EDIT",children:h.jsx("span",{className:"text-sm font-black font-righteous",children:"EDIT"})}),h.jsx("button",{onClick:()=>Za(E),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-black border border-white/20 hover:bg-white hover:text-black hover:border-white transition-all group",title:"RESET TRACK",children:h.jsx("span",{className:"text-lg",children:""})}),h.jsxs("button",{disabled:E.status===Ge.DONE,onClick:async()=>{await g_(E.id),await pe()},className:`h-10 px-6 rounded-lg text-sm font-black uppercase tracking-widest font-righteous transition-all flex items-center gap-2 ${E.status===Ge.DONE?"bg-white/10 text-white/40 cursor-not-allowed border border-white/5":"bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black border border-[var(--neon-cyan)]/50"}`,children:[h.jsx("span",{children:E.status===Ge.DONE?"COMPLETED":"DONE"}),E.status!==Ge.DONE&&h.jsx("span",{className:"text-lg leading-none",children:""})]})]})]})]},E.id)})})]}),h.jsxs("section",{className:"bg-[#050510] border-4 border-[var(--neon-cyan)]/30 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(0,229,255,0.15)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[h.jsx("div",{className:"w-4 h-4 bg-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)] rounded-full animate-pulse"}),h.jsx("h3",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"READY FOR THE STAGE"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-6",children:[ln.map(E=>h.jsxs("div",{className:"relative group perspective-1000",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-purple)] to-[var(--neon-blue)] rounded-[2.5rem] blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),h.jsxs("div",{className:"relative bg-[#101015] p-8 rounded-[2.5rem] border border-white/10 flex justify-between items-center group-hover:border-[var(--neon-cyan)] transition-all shadow-2xl h-full",children:[h.jsxs("div",{className:"min-w-0 pr-6 flex-1",children:[h.jsx("div",{className:"text-white font-black uppercase truncate text-4xl font-bungee tracking-tight mb-2 group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-lg text-slate-500 uppercase flex items-center gap-3 font-righteous tracking-[0.2em] opacity-80",children:[h.jsxs("span",{className:"text-[var(--neon-green)] font-black",children:["@",E.participantName]}),h.jsx("span",{className:"opacity-20",children:"|"}),h.jsx("span",{className:"truncate",children:E.artist})]})]}),h.jsxs("div",{className:"flex gap-3 shrink-0 flex-col",children:[h.jsx("button",{onClick:()=>Jr(E.id),className:"px-6 py-3 bg-[var(--neon-green)] text-black text-base font-black rounded-xl uppercase tracking-[0.2em] font-righteous shadow-[0_0_20px_var(--neon-green)] transition-all hover:bg-white hover:scale-105",children:"STAGE"}),h.jsx("button",{onClick:async()=>{await Pa(E.id),await pe()},className:"px-6 py-3 border border-white/10 text-white/40 hover:text-rose-500 hover:border-rose-500/50 rounded-xl transition-all text-lg font-black uppercase tracking-[0.2em]",children:"REMOVE"})]})]})]},E.id)),ln.length===0&&h.jsx("div",{className:"col-span-full py-32 text-center border-4 border-dashed border-white/5 rounded-[4rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] italic font-righteous text-slate-700",children:"NO DATA STREAM"})})]})]})]}),fn==="PERFORMERS"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 animate-in slide-in-from-bottom-2 pb-32",children:[h.jsxs("section",{className:"lg:col-span-8 bg-[#0a0a0a] border-4 border-[var(--neon-cyan)]/20 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(0,229,255,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"PERFORMER INDEX"}),h.jsxs("div",{className:"flex items-center gap-4 px-6 py-2 bg-black/40 border border-[var(--neon-cyan)]/30 rounded-full shadow-lg",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-lg font-bold text-[var(--neon-cyan)] uppercase tracking-widest font-righteous",children:[xi," ACTIVE"]})]})]}),h.jsxs("div",{className:"grid gap-6",children:[e.participants.map(E=>{const X=E.status===Vt.READY,re=e.requests.filter(ve=>ve.participantId===E.id).filter(ve=>ve.status===Ge.APPROVED&&ve.type===gt.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-6 rounded-[2rem] transition-all border-2 ${X?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.15)]":"bg-black/40 border-white/5 hover:border-white/20"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-6 text-left",children:[h.jsx("button",{onClick:async()=>{await Va(E.id,X?Vt.STANDBY:Vt.READY),await pe()},className:`w-12 h-12 rounded-full shrink-0 border-2 transition-all flex items-center justify-center ${X?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_20px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-white/50"}`,children:X&&h.jsx("div",{className:"w-4 h-4 bg-white rounded-full animate-pulse"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>yr(E.id),className:`font-bold text-4xl uppercase truncate font-bungee tracking-tight transition-colors ${X?"text-white":"text-slate-600 hover:text-[var(--neon-green)]"}`,children:E.name}),re>0&&h.jsxs("div",{className:"text-base font-bold text-[var(--neon-cyan)] uppercase mt-1 tracking-widest font-righteous opacity-90",children:[re," TRACKS READY"]})]})]}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("button",{onClick:()=>j(E),className:"px-6 py-3 bg-[var(--neon-cyan)]/10 text-[var(--neon-cyan)] rounded-xl border border-[var(--neon-cyan)]/50 transition-all font-righteous text-base font-black uppercase tracking-[0.2em] hover:bg-[var(--neon-cyan)] hover:text-black hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"ADD TRACK"}),h.jsx("button",{onClick:async()=>{confirm(`Remove ${E.name}?`)&&(await bd(E.id),await pe())},className:"text-rose-500/30 hover:text-rose-500 p-3 transition-colors text-3xl font-black",children:""})]})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"py-32 text-center border-4 border-dashed border-white/5 rounded-[3rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.6em] italic font-righteous text-slate-800",children:"NO SIGNALS"})})]})]}),h.jsxs("section",{className:"lg:col-span-4 lg:sticky lg:top-36 h-fit bg-[#050510] border-4 border border-white/5 rounded-[3.5rem] p-8 shadow-[0_0_60px_rgba(157,0,255,0.15)] relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-purple",children:"SESSION LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await v_(),await pe()},className:"text-sm font-black text-rose-500/40 hover:text-rose-500 uppercase tracking-[0.3em] font-righteous transition-all",children:"CLEAR ALL"})]}),h.jsxs("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[e.history.map((E,X)=>h.jsxs("div",{className:"bg-black/40 p-5 rounded-[1.5rem] border border-white/5 group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-2xl font-black text-white uppercase truncate font-bungee tracking-tight group-hover:text-[var(--neon-purple)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 font-bold uppercase truncate font-righteous tracking-widest mt-1",children:E.artist})]}),h.jsx(Os,{url:E.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-3 mt-1",children:[h.jsxs("button",{onClick:()=>yr(E.participantId),className:"text-sm font-black text-[var(--neon-pink)] uppercase truncate hover:text-white font-righteous tracking-widest transition-colors mb-0",children:["@",E.participantName]}),h.jsx("button",{onClick:async()=>{await Ih(E),await pe()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-cyan)] hover:text-white transition-all font-righteous tracking-widest uppercase ml-auto",children:"RELOAD"})]})]},X)),e.history.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-700",children:"EMPTY"})})]})]}),h.jsxs("section",{className:"lg:col-span-12 bg-black/40 border-4 border-white/5 rounded-[3rem] p-10 mt-10 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-cyan",children:"COMPLETED ROUNDS"}),h.jsx("div",{className:"text-[var(--neon-cyan)]/40 text-sm font-black uppercase tracking-[0.4em] font-righteous",children:"CHRONOLOGICAL_ARCHIVE"})]}),h.jsx("div",{className:"grid gap-12",children:(()=>{const E={};e.history.forEach(V=>{const re=V.playedAt||0;E[re]||(E[re]=[]),E[re].push(V)});const X=Object.keys(E).map(Number).sort((V,re)=>re-V);return X.length===0?h.jsx("div",{className:"text-center py-24 border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-20",children:h.jsx("p",{className:"text-2xl font-black uppercase tracking-[0.4em] font-righteous text-slate-500",children:"HISTORY_NULL"})}):X.map(V=>h.jsxs("div",{className:"bg-[#050510] border-2 border-white/5 rounded-[2.5rem] p-8 relative group hover:border-[var(--neon-cyan)]/30 transition-all",children:[h.jsxs("div",{className:"absolute top-0 left-10 py-1 px-4 bg-[var(--neon-cyan)] text-black text-[10px] font-black uppercase tracking-widest rounded-b-lg font-righteous shadow-[0_0_15px_rgba(0,229,255,0.4)]",children:["ROUND_",new Date(V).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",children:E[V].map((re,ve)=>h.jsxs("div",{className:"flex flex-col p-4 bg-black/40 rounded-2xl border border-white/5 group/song hover:bg-white/5 transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("div",{className:"text-lg font-black text-white uppercase truncate font-bungee tracking-tight group-hover/song:text-[var(--neon-cyan)] transition-colors",children:re.songName}),h.jsx(Os,{url:re.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-widest font-righteous",children:["@",re.participantName]}),h.jsxs("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-tighter",children:["POS_",ve+1]})]})]},re.id))})]},V))})()})]})]}),ne&&null,"   ",fn==="DIRECTORY"&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-2 space-y-6 pb-32",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 bg-black/40 p-6 rounded-[2rem] border border-white/5 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-4xl font-black text-white font-bungee uppercase tracking-tight neon-glow-purple",children:"User Directory"}),h.jsx("p",{className:"text-sm text-[var(--neon-cyan)] uppercase font-black tracking-[0.3em] font-righteous opacity-80 mt-1",children:"Authenticated Identities & Signal History"})]}),h.jsxs("div",{className:"flex gap-3",children:[le&&h.jsx("button",{onClick:()=>_t(null),className:"px-6 py-3 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/10 transition-all",children:" ALL ACCOUNTS"}),h.jsx("button",{onClick:()=>Jn(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"+ NEW ACCOUNT"})]})]}),h.jsx("div",{className:"p-1 rounded-[2.5rem] bg-gradient-to-r from-[var(--neon-pink)]/20 via-[var(--neon-purple)]/20 to-[var(--neon-cyan)]/20",children:h.jsxs("div",{className:"bg-[#050510] rounded-[2.4rem] p-6 relative group",children:[h.jsx("input",{type:"text",placeholder:"SCANNING DIRECTORY RECORDS...",value:Ie,onChange:E=>Be(E.target.value),className:"w-full bg-black/50 border-2 border-white/10 rounded-2xl px-12 py-4 text-white font-black uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-10 top-1/2 -translate-y-1/2 text-slate-700 pointer-events-none",children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsx("div",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 min-h-[500px] shadow-2xl relative overflow-hidden",children:le?h.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500 grid lg:grid-cols-12 gap-8",children:[h.jsx("div",{className:"lg:col-span-4 space-y-6",children:h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[3rem] p-8 shadow-2xl relative overflow-hidden group hover:border-[var(--neon-purple)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-[var(--neon-purple)]/10 blur-[60px] rounded-full -mr-24 -mt-24 group-hover:bg-[var(--neon-purple)]/20 transition-all"}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[h.jsx("div",{className:"scale-125 mb-4",children:h.jsx(mn,{name:le.name,isActive:e.participants.some(E=>E.id===le.id)})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"text-sm font-bold text-[var(--neon-cyan)] uppercase tracking-widest mb-2 font-righteous",children:"AUTHENTICATED IDENTITY"}),h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee break-words",children:le.name})]}),h.jsxs("div",{className:"w-full mt-8 space-y-3 pt-6 border-t border-white/5",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"ID SIGNATURE"}),h.jsxs("span",{className:"text-[var(--neon-pink)] font-mono opacity-80",children:[le.id.slice(0,8),"..."]})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"ENCRYPTION"}),h.jsx("span",{className:`px-2 py-0.5 rounded-full ${le.password?"bg-[var(--neon-pink)]/10 text-[var(--neon-pink)]":"bg-slate-900 text-slate-600"}`,children:le.password?"SECURE PIN":"OPEN LINK"})]})]}),h.jsxs("div",{className:"w-full mt-10 space-y-3",children:[h.jsx("button",{onClick:()=>Dn(le),className:"w-full py-3 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"MODIFY SECURITY"}),h.jsx("button",{onClick:async()=>{await qi(le.id),await pe()},className:"w-full py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all shadow-[0_0_15px_rgba(0,229,255,0.3)] font-righteous hover:bg-white",children:"FORCE RE-JOIN"}),h.jsx("div",{className:"pt-2 border-t border-white/5 mt-2 space-y-2",children:(wi=e.bannedUsers)!=null&&wi.some(E=>E.id===le.id)?h.jsx("button",{onClick:async()=>{await kh(le.id,le.name,"unban"),await pe()},className:"w-full py-3 bg-[var(--neon-green)]/10 hover:bg-[var(--neon-green)] text-[var(--neon-green)] hover:text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous border border-[var(--neon-green)]/30",children:"LIFT_BAN_IDENTITY"}):h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"text",placeholder:"JUSTIFICATION REQUIRED...",value:ae,onChange:E=>Me(E.target.value),className:"w-full bg-black/60 border border-white/10 rounded-xl px-4 py-2 text-base text-white font-bold uppercase tracking-widest font-righteous outline-none focus:border-rose-500 transition-all mb-1"}),h.jsx("button",{onClick:async()=>{if(!ae)return alert("Provide a reason for the ban sequence.");await kh(le.id,le.name,ae),Me(""),_t(null),await pe()},className:"w-full py-3 bg-rose-500/10 hover:bg-rose-500 text-rose-500 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous border border-rose-500/30",children:"TERMINATE_SIGNAL (BAN)"})]})}),h.jsx("button",{onClick:async()=>{confirm("Permanently delete this account?")&&(await Sc(le.id),_t(null),await pe())},className:"w-full py-3 bg-rose-500/5 hover:bg-rose-500 text-rose-500/40 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all border border-transparent hover:border-rose-500/30 font-righteous mt-2",children:"TERMINATE ACCOUNT"})]})]})]})}),h.jsx("div",{className:"lg:col-span-8 space-y-6",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-pink)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["LIBRARY STARS (",le.favorites.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[le.favorites.map(E=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl flex justify-between items-center group hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-black text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-pink)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:async()=>{await Bi({participantId:le.id,participantName:le.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),await pe()},className:"px-3 py-1.5 bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[var(--neon-cyan)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-cyan)] hover:text-black transition-all",children:"ADD"}),h.jsx("button",{onClick:()=>M({type:"favorite",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:async()=>{await d_(le.id,E.id),await pe()},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]},E.id)),le.favorites.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"Catalog is empty"})]})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-cyan)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["PERFORMANCE LOG (",le.personalHistory.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[le.personalHistory.map((E,X)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:[h.jsx("button",{onClick:()=>M({type:"history",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:async()=>{await f_(le.id,E.id),await pe()},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]}),h.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[h.jsx("span",{className:"text-xs text-slate-700 font-black uppercase font-righteous tracking-widest",children:new Date(E.createdAt).toLocaleDateString()}),h.jsx("button",{onClick:async()=>{await Ih(E),await pe()},className:"px-3 py-1.5 bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-pink)] hover:text-black transition-all",children:"RE-QUEUE"})]})]},X)),le.personalHistory.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"No transmissions recorded"})]})]})]})]})})]}):Zi?h.jsxs("form",{onSubmit:Zn,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:Wi?"Modify Profile":"New User Account"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"IDENTITY HANDLE"}),h.jsx("input",{required:!0,type:"text",value:sn.name,onChange:E=>{Kr({...sn,name:E.target.value}),Xr("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]}),vi&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",vi]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"ENCRYPTION PIN (OPTIONAL)"}),h.jsx("input",{type:"password",value:sn.password,onChange:E=>Kr({...sn,password:E.target.value}),className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{Jn(!1),Qr(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"AUTHORIZE ACCOUNT"})]})]}):h.jsx("div",{className:"space-y-16",children:(()=>{const E=i.filter(V=>!V.password&&e.participants.some(re=>re.id===V.id)&&(V.name.toLowerCase().includes(Ie.toLowerCase())||V.id.toLowerCase().includes(Ie.toLowerCase()))),X=i.filter(V=>(V.password||!e.participants.some(re=>re.id===V.id))&&(V.name.toLowerCase().includes(Ie.toLowerCase())||V.id.toLowerCase().includes(Ie.toLowerCase())));return h.jsxs(h.Fragment,{children:[E.length>0&&h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-[var(--neon-green)] uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ACTIVE SIGNALS"}),h.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-[var(--neon-green)]/30 to-transparent"})]}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(V=>h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 rounded-[2rem] p-4 flex items-center justify-between hover:border-[var(--neon-green)] transition-all shadow-lg group relative overflow-hidden",children:[h.jsxs("div",{className:"flex items-center gap-6 min-w-0 pr-4",children:[h.jsx(mn,{name:V.name,isActive:!0}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>_t(V),className:"text-white font-bold text-3xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-green)] transition-colors font-bungee",children:V.name}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:"text-[10px] bg-[var(--neon-green)] text-black px-2 py-0.5 rounded-full font-black uppercase tracking-widest font-righteous shrink-0",children:"LIVE"}),h.jsxs("span",{className:"text-sm text-slate-600 uppercase font-black font-righteous tracking-widest truncate",children:[V.favorites.length,"   ",V.personalHistory.length," TX"]})]})]})]}),h.jsx("div",{className:"flex items-center gap-2 shrink-0",children:h.jsx("button",{onClick:()=>_t(V),className:"p-2 bg-white/5 hover:bg-white/10 text-white rounded-lg transition-all",children:""})})]},V.id))})]}),h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-8 duration-500 delay-100",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-slate-600 uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"OFFLINE / ARCHIVED"}),h.jsx("div",{className:"h-[2px] w-full bg-white/5"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[X.map(V=>h.jsxs("div",{className:"bg-[#101015]/50 border-2 border-white/5 rounded-[2rem] p-4 flex items-center justify-between hover:border-white/20 transition-all group",children:[h.jsxs("div",{className:"flex items-center gap-5 min-w-0 pr-4",children:[h.jsx("div",{className:"grayscale opacity-50 group-hover:grayscale-0 group-hover:opacity-100 transition-all",children:h.jsx(mn,{name:V.name,isActive:!1})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>_t(V),className:"text-slate-500 group-hover:text-white font-bold text-2xl uppercase truncate tracking-tight text-left block transition-colors font-bungee",children:V.name}),h.jsx("div",{className:"flex items-center gap-3 mt-1",children:h.jsxs("span",{className:"text-sm text-slate-700 uppercase font-black font-righteous tracking-widest truncate",children:[V.favorites.length,"   ",V.personalHistory.length," TX"]})})]})]}),h.jsx("button",{onClick:()=>_t(V),className:"opacity-0 group-hover:opacity-100 transition-all text-2xl grayscale hover:grayscale-0",children:""})]},V.id)),X.length===0&&h.jsx("div",{className:"col-span-full text-center py-10 opacity-30 italic font-mono",children:"NO RECORDS FOUND"})]})]})]})})()})})]}),fn==="LIBRARY"&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-2 space-y-10 pb-32",children:[h.jsx("div",{className:"sticky top-0 z-40 pt-4 -mt-4",children:h.jsxs("div",{className:"relative group p-1 rounded-[2.5rem] bg-[#050510]/90 shadow-2xl backdrop-blur-xl border border-white/10",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)]/20 via-[var(--neon-purple)]/20 to-[var(--neon-cyan)]/20 blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),h.jsx("input",{type:"text",placeholder:"SCANNING GLOBAL SONGBOOK...",value:Dr,onChange:E=>aa(E.target.value),className:"w-full bg-black/50 border-2 border-white/10 rounded-[2.3rem] py-6 pl-16 pr-32 text-2xl font-bold tracking-widest text-white placeholder:text-slate-600 focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous uppercase"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors pointer-events-none",children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),h.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:h.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-[2rem] font-black text-base uppercase tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.4)] active:scale-95 transition-all font-righteous hover:bg-white hover:scale-105",children:"+ ADD NEW"})})]})}),h.jsx("div",{className:"flex flex-col gap-3",children:(()=>{const X=((e==null?void 0:e.verifiedSongbook)||[]).map(V=>({...V,isVerified:!0,title:V.songName,source:"VERIFIED"})).filter(V=>{if(!Dr)return!0;const re=Dr.toLowerCase();return V.title.toLowerCase().includes(re)||V.artist.toLowerCase().includes(re)});return X.length===0?h.jsxs("div",{className:"col-span-full text-center py-40 opacity-30 border-4 border-dashed border-white/5 rounded-[4rem]",children:[h.jsx("div",{className:"text-8xl mb-6 opacity-50 grayscale animate-pulse",children:Dr?"":""}),h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] font-righteous text-slate-600",children:Dr?"NO MATCH FOUND":"DATABASE OFFLINE"})]}):X.map((V,re)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-4 rounded-[2rem] flex items-center justify-between group hover:border-[var(--neon-cyan)] transition-all relative shadow-lg",children:[h.jsxs("div",{className:"flex items-center gap-6 flex-1 min-w-0",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black rounded-lg border border-white/10 text-[var(--neon-cyan)] text-2xl",children:""}),h.jsx("div",{className:"min-w-0 pr-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[V.isVerified&&h.jsx("div",{className:"px-2 py-0.5 bg-[var(--neon-pink)] text-black rounded-full text-[10px] font-black uppercase tracking-widest font-righteous shrink-0",children:"VERIFIED"}),h.jsx("h4",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-cyan)] transition-colors",children:V.title}),h.jsxs("span",{className:"text-base text-slate-600 font-bold uppercase font-righteous tracking-widest truncate",children:["/ ",V.artist]})]})})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Bo,{request:V}),h.jsx(yc,{request:V}),h.jsx(Os,{url:V.youtubeUrl}),h.jsx("button",{onClick:async()=>{await h_(V.id).then(pe)},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-all text-xl",children:""})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 ml-4",children:[h.jsxs("div",{className:"relative group/assign",children:[h.jsx("button",{className:"px-6 py-2.5 bg-white text-black text-sm font-black uppercase rounded-lg hover:bg-[var(--neon-cyan)] transition-all font-righteous tracking-wider",children:"ASSIGN"}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-cyan)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/assign:opacity-100 group-hover/assign:visible transition-all p-4 z-50 backdrop-blur-xl w-[200px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"TRANSMIT TO:"}),h.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:[e.participants.map(ve=>h.jsx("button",{onClick:async()=>{const Pt=await Bi({participantId:ve.id,participantName:ve.name,songName:V.title,artist:V.artist,youtubeUrl:V.youtubeUrl,type:gt.SINGING});Pt&&await gc(Pt.id),await pe()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-cyan)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:ve.name},ve.id)),h.jsx("div",{className:"h-[1px] bg-white/10 my-2"}),h.jsx("button",{onClick:async()=>{const ve=await Bi({participantId:"DJ-MANUAL",participantName:"GUEST",songName:V.title,artist:V.artist,youtubeUrl:V.youtubeUrl,type:gt.SINGING});ve&&await gc(ve.id),await pe()},className:"w-full text-left p-2 rounded-lg bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)] hover:text-black text-sm font-black uppercase font-righteous transition-all",children:"+ GUEST"})]})]})]}),h.jsxs("div",{className:"relative group/star",children:[h.jsx("button",{className:"px-4 py-2.5 bg-black border border-white/10 text-[var(--neon-pink)] rounded-lg font-black text-sm uppercase tracking-widest hover:border-[var(--neon-pink)] transition-all font-righteous",children:""}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-pink)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/star:opacity-100 group-hover/star:visible transition-all p-4 z-50 backdrop-blur-xl w-[180px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-pink)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"ADD FAVORITE:"}),h.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:e.participants.map(ve=>h.jsx("button",{onClick:async()=>{await OD(ve.id,{songName:V.title,artist:V.artist,youtubeUrl:V.youtubeUrl,type:V.type}),await pe()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-pink)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:ve.name},ve.id))})]})]})]})]})]},re))})()})]})]}),L&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-6 z-[100] backdrop-blur-xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 shadow-[0_0_100px_rgba(255,42,109,0.2)] animate-in zoom-in-95 duration-500 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-start mb-8",children:[h.jsx("h2",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee neon-glow-pink",children:"REVIEW LINEUP"}),h.jsx("button",{onClick:()=>Q(!1),className:"text-slate-600 hover:text-white font-bold text-5xl px-2 transition-all transform hover:scale-110",children:""})]}),h.jsx("div",{className:"mb-8 text-lg text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80 decoration-dotted underline underline-offset-4",children:"OPERATIONAL READY CHECK"}),h.jsxs("div",{className:"space-y-4 mb-10 max-h-[400px] overflow-y-auto pr-4 custom-scrollbar",children:[e.participants.filter(E=>{var X;return(X=e.requests)==null?void 0:X.some(V=>V.participantId===E.id&&V.status===Ge.APPROVED&&V.type===gt.SINGING&&!V.isInRound)}).sort((E,X)=>(X.joinedAt||0)-(E.joinedAt||0)).map(E=>{var re;const X=E.status===Vt.READY,V=(re=e.requests)==null?void 0:re.find(ve=>ve.participantId===E.id&&ve.status===Ge.APPROVED&&ve.type===gt.SINGING&&!ve.isInRound);return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] border-2 transition-all duration-300 ${X?"bg-[#150030] border-[var(--neon-green)] shadow-[0_0_20px_rgba(57,255,20,0.15)]":"bg-black/40 border-white/5 opacity-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsx("button",{onClick:async()=>{await Va(E.id,X?Vt.STANDBY:Vt.READY),await pe()},className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center transition-all border-2 ${X?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-slate-600"}`,children:X&&h.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:`font-bold uppercase text-2xl truncate tracking-tight font-bungee ${X?"text-white":"text-slate-600"}`,children:E.name}),X?V?h.jsx("div",{className:"text-[var(--neon-cyan)] text-base font-black uppercase tracking-[0.2em] font-righteous mt-0.5 opacity-90",children:V.songName}):h.jsx("div",{className:"text-rose-500 text-sm font-black uppercase tracking-[0.1em] font-righteous mt-0.5",children:" NO SIGNAL"}):h.jsx("div",{className:"text-slate-700 text-sm font-black uppercase tracking-[0.2em] font-righteous mt-0.5",children:"STANDBY"})]})]}),X&&V&&h.jsx("div",{className:"shrink-0 text-sm bg-[var(--neon-cyan)] text-black px-4 py-1.5 rounded-full font-black uppercase tracking-widest font-righteous shadow-[0_0_10px_var(--neon-cyan)] animate-in fade-in zoom-in",children:"READY"})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[2.5rem] border-4 border-dashed border-white/5 animate-in fade-in duration-700",children:h.jsx("p",{className:"text-slate-700 text-2xl font-black uppercase tracking-[0.4em] font-righteous",children:"NO DATA"})})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>Q(!1),className:"flex-1 py-4 bg-black hover:bg-white hover:text-black text-white border border-white/10 rounded-xl font-black uppercase text-base tracking-widest transition-all font-righteous",children:"CANCEL"}),(()=>{const E=e.participants.filter(X=>{var V;return(V=e.requests)==null?void 0:V.some(re=>re.participantId===X.id&&re.status===Ge.APPROVED&&re.type===gt.SINGING&&!re.isInRound)}).length;return h.jsx("button",{onClick:bi,disabled:E===0,className:`flex-[2] py-4 rounded-xl font-black uppercase text-base tracking-widest transition-all flex items-center justify-center gap-3 shadow-lg font-righteous ${E>0?"bg-[var(--neon-green)] hover:bg-white hover:text-black text-black hover:scale-105":"bg-slate-900 text-slate-800 cursor-not-allowed border border-white/5"}`,children:E>0?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-ping"}),"ACTIVATE ROUND (",E,")"]}):"IDLE"})})()]})]})}),xe&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-rose-500/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(244,63,94,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-rose-500 shadow-[0_0_20px_rgba(244,63,94,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-[2rem] border-2 border-rose-500/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(244,63,94,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-rose",children:"SYSTEM RESET"}),h.jsxs("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:["This will ",h.jsx("span",{className:"text-rose-500 underline decoration-2 underline-offset-4 decoration-rose-500",children:"TERMINATE ALL SESSIONS"}),", clear requests, and wipe history logs."]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>_e(!1),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:la,className:"flex-[2] py-4 bg-rose-500 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(244,63,94,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"EXECUTE WIPE"})]})]})}),(ne||le)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[70] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-6xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-purple",children:"User Directory"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] uppercase font-black tracking-[0.3em] font-righteous opacity-80 mt-1",children:"Authenticated Identities & Signal History"})]}),h.jsxs("div",{className:"flex gap-3",children:[le&&h.jsx("button",{onClick:()=>_t(null),className:"px-6 py-3 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/10 transition-all",children:" ALL ACCOUNTS"}),h.jsx("button",{onClick:()=>Jn(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"+ NEW ACCOUNT"}),h.jsx("button",{onClick:Or,className:"text-slate-600 hover:text-white p-2 ml-2 font-black text-4xl transition-colors transform hover:scale-110",children:""})]})]}),h.jsx("div",{className:"p-6 border-b-2 border-white/5 bg-black/20",children:h.jsxs("div",{className:"relative group max-w-2xl mx-auto",children:[h.jsx("input",{type:"text",placeholder:"SCANNING DIRECTORY RECORDS...",value:Ie,onChange:E=>Be(E.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-10 py-4 text-white font-black uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-12 custom-scrollbar bg-black/20",children:le?h.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500 grid lg:grid-cols-12 gap-8",children:[h.jsx("div",{className:"lg:col-span-4 space-y-6",children:h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[3rem] p-8 shadow-2xl relative overflow-hidden group hover:border-[var(--neon-purple)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-[var(--neon-purple)]/10 blur-[60px] rounded-full -mr-24 -mt-24 group-hover:bg-[var(--neon-purple)]/20 transition-all"}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[h.jsx("div",{className:"scale-125 mb-4",children:h.jsx(mn,{name:le.name,isActive:e.participants.some(E=>E.id===le.id)})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"text-sm font-bold text-[var(--neon-cyan)] uppercase tracking-widest mb-2 font-righteous",children:"AUTHENTICATED IDENTITY"}),h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee break-words",children:le.name})]}),h.jsxs("div",{className:"w-full mt-8 space-y-3 pt-6 border-t border-white/5",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"ID SIGNATURE"}),h.jsxs("span",{className:"text-[var(--neon-pink)] font-mono opacity-80",children:[le.id.slice(0,8),"..."]})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"ENCRYPTION"}),h.jsx("span",{className:`px-2 py-0.5 rounded-full ${le.password?"bg-[var(--neon-pink)]/10 text-[var(--neon-pink)]":"bg-slate-900 text-slate-600"}`,children:le.password?"SECURE PIN":"OPEN LINK"})]})]}),h.jsxs("div",{className:"w-full mt-10 space-y-3",children:[h.jsx("button",{onClick:()=>Dn(le),className:"w-full py-3 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"MODIFY SECURITY"}),h.jsx("button",{onClick:async()=>{await qi(le.id),await pe()},className:"w-full py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all shadow-[0_0_15px_rgba(0,229,255,0.3)] font-righteous hover:bg-white",children:"FORCE RE-JOIN"}),h.jsx("div",{className:"pt-2 border-t border-white/5 mt-2 space-y-2",children:(nr=e.bannedUsers)!=null&&nr.some(E=>E.id===le.id)?h.jsx("button",{onClick:async()=>{await kh(le.id,le.name,"unban"),await pe()},className:"w-full py-3 bg-[var(--neon-green)]/10 hover:bg-[var(--neon-green)] text-[var(--neon-green)] hover:text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous border border-[var(--neon-green)]/30",children:"LIFT_BAN_IDENTITY"}):h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"text",placeholder:"JUSTIFICATION REQUIRED...",value:ae,onChange:E=>Me(E.target.value),className:"w-full bg-black/60 border border-white/10 rounded-xl px-4 py-2 text-base text-white font-bold uppercase tracking-widest font-righteous outline-none focus:border-rose-500 transition-all mb-1"}),h.jsx("button",{onClick:async()=>{if(!ae)return alert("Provide a reason for the ban sequence.");await kh(le.id,le.name,ae),Me(""),_t(null),await pe()},className:"w-full py-3 bg-rose-500/10 hover:bg-rose-500 text-rose-500 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous border border-rose-500/30",children:"TERMINATE_SIGNAL (BAN)"})]})}),h.jsx("button",{onClick:async()=>{confirm("Permanently delete this account?")&&(await Sc(le.id),_t(null),await pe())},className:"w-full py-3 bg-rose-500/5 hover:bg-rose-500 text-rose-500/40 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all border border-transparent hover:border-rose-500/30 font-righteous mt-2",children:"TERMINATE ACCOUNT"})]})]})]})}),h.jsx("div",{className:"lg:col-span-8 space-y-6",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-pink)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["LIBRARY STARS (",le.favorites.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[le.favorites.map(E=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl flex justify-between items-center group hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-black text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-pink)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:async()=>{await Bi({participantId:le.id,participantName:le.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),await pe()},className:"px-3 py-1.5 bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[var(--neon-cyan)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-cyan)] hover:text-black transition-all",children:"ADD"}),h.jsx("button",{onClick:()=>M({type:"favorite",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:async()=>{await d_(le.id,E.id),await pe()},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]},E.id)),le.favorites.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"Catalog is empty"})]})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-cyan)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["PERFORMANCE LOG (",le.personalHistory.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[le.personalHistory.map((E,X)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:[h.jsx("button",{onClick:()=>M({type:"history",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:async()=>{await f_(le.id,E.id),await pe()},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]}),h.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[h.jsx("span",{className:"text-xs text-slate-700 font-black uppercase font-righteous tracking-widest",children:new Date(E.createdAt).toLocaleDateString()}),h.jsx("button",{onClick:async()=>{await Ih(E),await pe()},className:"px-3 py-1.5 bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-pink)] hover:text-black transition-all",children:"RE-QUEUE"})]})]},X)),le.personalHistory.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"No transmissions recorded"})]})]})]})]})})]}):Zi?h.jsxs("form",{onSubmit:Zn,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:Wi?"Modify Profile":"New User Account"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"IDENTITY HANDLE"}),h.jsx("input",{required:!0,type:"text",value:sn.name,onChange:E=>{Kr({...sn,name:E.target.value}),Xr("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]}),vi&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",vi]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"ENCRYPTION PIN (OPTIONAL)"}),h.jsx("input",{type:"password",value:sn.password,onChange:E=>Kr({...sn,password:E.target.value}),className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{Jn(!1),Qr(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"AUTHORIZE ACCOUNT"})]})]}):h.jsx("div",{className:"space-y-16",children:(()=>{const E=i.filter(V=>!V.password&&e.participants.some(re=>re.id===V.id)&&(V.name.toLowerCase().includes(Ie.toLowerCase())||V.id.toLowerCase().includes(Ie.toLowerCase()))),X=i.filter(V=>(V.password||!e.participants.some(re=>re.id===V.id))&&(V.name.toLowerCase().includes(Ie.toLowerCase())||V.id.toLowerCase().includes(Ie.toLowerCase())));return h.jsxs(h.Fragment,{children:[E.length>0&&h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-[var(--neon-green)] uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ACTIVE SIGNALS"}),h.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-[var(--neon-green)]/30 to-transparent"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:E.map(V=>h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 rounded-[2rem] p-4 flex items-center justify-between hover:border-[var(--neon-green)] transition-all shadow-lg group relative overflow-hidden",children:[h.jsxs("div",{className:"flex items-center gap-6 min-w-0 pr-4",children:[h.jsx(mn,{name:V.name,isActive:!0}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>_t(V),className:"text-white font-bold text-3xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-green)] transition-colors font-bungee",children:V.name}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:"text-[10px] bg-[var(--neon-green)] text-black px-2 py-0.5 rounded-full font-black uppercase tracking-widest font-righteous shrink-0",children:"LIVE"}),h.jsxs("span",{className:"text-sm text-slate-600 uppercase font-black font-righteous tracking-widest truncate",children:[V.favorites.length,"   ",V.personalHistory.length," TX"]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 bg-black/40 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:()=>_t(V),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>Dn(V),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>At(V),className:"py-2.5 px-6 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO_SET"}),h.jsx("button",{onClick:()=>Yt(V),className:"py-2.5 px-6 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"MANUAL"})]}),h.jsx("button",{onClick:async()=>{confirm("Terminate temporary link?")&&(await Sc(V.id),await pe())},className:"w-10 h-10 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all font-black",children:""})]})]},V.id))})]}),h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-slate-600 uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ARCHIVE DIRECTORY"}),h.jsx("div",{className:"h-[1px] w-full bg-white/5"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:X.map(V=>{const re=e.participants.some(ve=>ve.id===V.id);return h.jsxs("div",{className:`bg-[#101015] border-2 ${re?"border-[var(--neon-cyan)] shadow-[0_0_20px_rgba(0,229,255,0.1)]":"border-white/5"} rounded-[2.5rem] p-6 flex flex-col justify-between hover:border-[var(--neon-purple)] transition-all group`,children:[h.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[h.jsx(mn,{name:V.name,isActive:re}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"flex justify-between items-start gap-2",children:h.jsx("button",{onClick:()=>_t(V),className:"text-white font-bold text-2xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-purple)] transition-colors font-bungee",children:V.name})}),h.jsxs("p",{className:"text-xs text-slate-500 uppercase font-black tracking-[0.2em] mt-1 font-righteous",children:[V.password?" AUTHENTICATED":"GUEST ID","  ",V.favorites.length," "]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>_t(V),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>Dn(V),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>At(V),className:"flex-[2] py-2.5 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO-SET"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Yt(V),className:"flex-[4] py-2.5 bg-slate-900 border border-white/5 hover:border-[var(--neon-pink)] text-slate-500 hover:text-white rounded-lg flex items-center justify-center gap-2 transition-all text-xs font-black uppercase font-righteous",children:"MANUAL SELECT"}),h.jsx("button",{onClick:async()=>{confirm("Erase this record permanently?")&&(await Sc(V.id),await pe())},className:"flex-1 py-2.5 bg-rose-500/5 text-rose-500/20 hover:text-rose-500 border border-transparent hover:border-rose-500/30 rounded-lg transition-all flex items-center justify-center",children:""})]})]})]},V.id)})}),X.length===0&&E.length===0&&h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-slate-800 text-base font-black uppercase tracking-[0.5em] font-righteous",children:"EMPTY DIRECTORY - NO SIGNALS DETECTED"})})]})]})})()})})]})}),(c||C||R||D||m||y)&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-[100] backdrop-blur-xl",children:h.jsx("div",{className:"w-full max-w-md",children:(()=>{let E={singerName:"",songName:"",artist:"",youtubeUrl:"",type:gt.SINGING},X="Global Track Input";if(R&&le)if(R.type==="favorite"){const V=le.favorites.find(re=>re.id===R.itemId);V&&(E={singerName:le.name,songName:V.songName,artist:V.artist,youtubeUrl:V.youtubeUrl||"",type:V.type},X=`Edit Permanent Favorite for ${le.name}`)}else{const V=le.personalHistory.find(re=>re.id===R.itemId);V&&(E={singerName:le.name,songName:V.songName,artist:V.artist,youtubeUrl:V.youtubeUrl||"",type:V.type},X=`Edit History Entry for ${le.name}`)}else C?(E={singerName:C.participantName,songName:C.songName,artist:C.artist,youtubeUrl:C.youtubeUrl||"",type:C.type},X="Modify Track"):y?(E={singerName:"",songName:y.songName,artist:y.artist,youtubeUrl:y.youtubeUrl||"",type:y.type},X="Edit Verified Song"):m?(E={singerName:"",songName:"",artist:"",youtubeUrl:"",type:gt.SINGING},X="Add to Verified Songbook"):D&&(E.singerName=D.name,X=`Song for ${D.name}`);return h.jsx(zT,{title:X,showSingerName:!R&&!y&&!m,initialSingerName:E.singerName,initialSongName:E.songName,initialArtist:E.artist,initialYoutubeUrl:E.youtubeUrl,initialType:E.type,submitLabel:C||R||y?"Save Update":m?"Add to Library":"Queue Track",onSubmit:Vn,onCancel:Or,participants:e.participants},(C==null?void 0:C.id)||(R==null?void 0:R.itemId)||(D==null?void 0:D.id)||(y==null?void 0:y.id)||(m?"new-verified":"new-request"))})()})}),w&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[100] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(255,0,255,0.2)] text-center relative overflow-hidden animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-glow-pink",children:"Access Entry"}),(_i.includes("localhost")||_i.includes("127.0.0.1"))&&h.jsxs("div",{className:"mb-6 p-4 bg-amber-500/10 border-2 border-amber-500/50 rounded-2xl animate-pulse",children:[h.jsxs("div",{className:"text-amber-500 font-black uppercase text-lg mb-2 flex items-center justify-center gap-2",children:[h.jsx("span",{className:"text-2xl",children:""})," LOCALHOST DETECTED"]}),h.jsx("p",{className:"text-amber-200/80 text-xs font-bold uppercase tracking-wider mb-3",children:`External devices cannot connect to "localhost". Configure your computer's Wi-Fi IP.`}),h.jsx("button",{onClick:()=>{S(!1),Y(!0)},className:"px-4 py-2 bg-amber-500 text-black rounded-lg text-xs font-black uppercase tracking-widest hover:bg-white transition-all",children:"CONFIGURE NETWORK IP"})]}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mb-10 font-righteous opacity-80",children:"Point Guest cameras at the code below"}),h.jsxs("div",{className:"bg-white p-6 rounded-[2rem] inline-block shadow-[0_0_30px_rgba(255,255,255,0.1)] mb-10 relative group",children:[h.jsx("div",{className:"absolute -inset-4 bg-gradient-to-tr from-[var(--neon-pink)]/20 to-[var(--neon-cyan)]/20 blur-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),h.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(_i)}&bgcolor=ffffff`,alt:"Room QR",className:"w-48 h-48 relative z-10"})]}),h.jsx("div",{className:"text-base text-white/40 font-mono break-all mb-10 font-black lowercase opacity-40 px-8 leading-relaxed select-all cursor-pointer hover:opacity-100 hover:text-[var(--neon-pink)] transition-all",children:_i}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("button",{onClick:()=>{S(!1),Y(!0)},className:"w-full py-4 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:" CONFIGURE SIGNAL ORIGIN"}),h.jsx("button",{onClick:Or,className:"w-full py-4 bg-black border border-white/10 text-slate-500 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"DISMISS PANEL"})]})]})}),vt&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-xl bg-[#050510] border-4 border-white/10 p-12 rounded-[3.5rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-glow-purple",children:"Signal Origin"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mb-12 font-righteous opacity-80",children:"Set the endpoint for guest terminal connections"}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-black/40 p-8 rounded-[2rem] border-2 border-white/5 border-dashed",children:[h.jsx("p",{className:"text-sm text-slate-500 uppercase font-black mb-3 tracking-[0.3em] font-righteous",children:"LOCAL ENVIRONMENT DETECTION"}),h.jsxs("div",{className:"text-xl text-[var(--neon-cyan)] font-mono font-black tracking-widest",children:[window.location.hostname," ",h.jsx("span",{className:"text-sm text-slate-700 opacity-60",children:"(CURRENT HOST)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-black text-slate-500 uppercase mb-4 ml-4 tracking-[0.3em] font-righteous",children:"TERMINAL ADDRESS / PUBLIC TUNNEL URL"}),h.jsx("input",{type:"text",value:oe,onChange:E=>we(E.target.value),placeholder:"E.G. 192.168.1.15 OR HTTPS://SIGNAL.NGROK.APP",className:"w-full bg-black border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-black uppercase font-mono tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all placeholder:text-slate-800 text-lg"})]}),h.jsx("div",{className:"bg-[var(--neon-pink)]/5 border border-[var(--neon-pink)]/10 p-6 rounded-2xl",children:h.jsx("p",{className:"text-sm text-[var(--neon-pink)]/60 font-black leading-relaxed uppercase tracking-widest font-righteous italic",children:"Note: Cross-network connectivity requires tunneling (ngrok) for public-private bridge."})}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{onClick:()=>Y(!1),className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:ml,className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"AUTHORIZE CONFIG"})]})]})]})}),St&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-pink",children:"Signal Selection"}),h.jsxs("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mt-1 font-righteous opacity-80",children:["Verified Catalog  Target: ",h.jsx("span",{className:"text-[var(--neon-pink)]",children:St.name})]})]}),h.jsx("button",{onClick:()=>Yt(null),className:"text-slate-600 hover:text-white p-3 font-black text-4xl transition-colors transform hover:scale-110",children:""})]}),h.jsx("div",{className:"p-6 bg-black/20 border-b-2 border-white/5",children:h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"FILTER VERIFIED TRANSMISSIONS...",value:pn,onChange:E=>pr(E.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-12 py-4 text-white font-black uppercase tracking-widest font-righteous outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar space-y-4 bg-black/20",children:[ts.filter(E=>E.songName.toLowerCase().includes(pn.toLowerCase())||E.artist.toLowerCase().includes(pn.toLowerCase())).map(E=>h.jsxs("button",{onClick:async()=>{const X=await Bi({participantId:St.id,participantName:St.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type});X&&await gc(X.id),Yt(null),pr(""),await pe()},className:"w-full flex justify-between items-center p-6 bg-[#101015]/60 hover:bg-[#151520] border-2 border-white/5 hover:border-[var(--neon-pink)] rounded-[2rem] transition-all group text-left relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)]/0 to-[var(--neon-pink)]/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),h.jsxs("div",{className:"min-w-0 pr-6 relative z-10",children:[h.jsx("div",{className:"text-3xl font-black text-white uppercase truncate font-bungee group-hover:text-[var(--neon-pink)] transition-colors tracking-tight",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-1 font-righteous opacity-60",children:E.artist})]}),h.jsx("div",{className:"text-sm font-black text-[var(--neon-cyan)] bg-[var(--neon-cyan)]/10 px-4 py-2 rounded-xl uppercase border border-[var(--neon-cyan)]/20 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0 font-righteous relative z-10",children:"AUTHORIZE SIGNAL"})]},E.id)),ts.length===0&&h.jsx("div",{className:"text-center py-32 bg-black/10 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.5em] text-slate-800 font-righteous",children:"NO VERIFIED RECORDS DETECTED"})})]})]})})]})},XD=({onJoin:r})=>{const[e,t]=se.useState([]),[i,o]=se.useState(!0);return se.useEffect(()=>{const c=YD(u=>{t(u),o(!1)});return()=>c()},[]),i?h.jsx("div",{className:"text-center py-20 animate-pulse",children:h.jsx("div",{className:"text-[var(--neon-cyan)] text-xl font-black uppercase tracking-widest font-righteous",children:"SCANNING_FREQUENCIES..."})}):e.length===0?h.jsxs("div",{className:"text-center py-20 px-6 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5 mx-auto max-w-2xl",children:[h.jsx("p",{className:"text-[var(--neon-pink)] text-2xl font-black uppercase tracking-widest font-bungee mb-4",children:"SILENCE_DETECTED"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-wider text-sm",children:"NO_ACTIVE_SIGNALS_FOUND_IN_SECTOR"})]}):h.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-ping"}),h.jsx("h2",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] font-righteous text-lg",children:"AVAILABLE_NODES"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(c=>h.jsxs("div",{className:"group relative bg-[#101015] border-2 border-white/5 hover:border-[var(--neon-cyan)] p-8 rounded-[2.5rem] transition-all hover:-translate-y-2 hover:shadow-[0_0_50px_rgba(0,229,255,0.15)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 via-transparent to-[var(--neon-purple)]/0 group-hover:from-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-purple)]/5 transition-all duration-500"}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("div",{className:"w-16 h-16 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-3xl shadow-xl group-hover:scale-110 transition-transform duration-500 group-hover:border-[var(--neon-cyan)]",children:""}),h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)]/10 text-[var(--neon-green)] border border-[var(--neon-green)]/20 rounded-lg text-[10px] font-black uppercase tracking-widest font-righteous",children:"SIGNAL_STRONG"})]}),h.jsx("h3",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors truncate",children:c.venueName||"OPEN_LOUNGE"}),h.jsxs("div",{className:"flex items-center gap-2 mb-8 text-slate-400 font-righteous uppercase tracking-wider text-xs",children:[h.jsx("span",{className:"text-[var(--neon-pink)]",children:"HOST:"})," ",c.hostName]}),h.jsx("button",{onClick:()=>r(c.id),className:"w-full py-4 bg-white text-black font-black uppercase tracking-[0.2em] rounded-xl hover:bg-[var(--neon-cyan)] transition-all font-righteous hover:scale-[1.02] active:scale-95 shadow-lg",children:"INITIATE_LINK"})]})]},c.id))})]})},b_=({url:r})=>r?h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-2 rounded-lg text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border border-[var(--neon-cyan)]/30 transition-all shadow-[0_0_10px_rgba(0,229,255,0.2)]",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,JD=()=>{const[r,e]=se.useState(null),[t,i]=se.useState(null),[o,c]=se.useState(!0),[u,m]=se.useState(""),[g,y]=se.useState(""),[x,w]=se.useState(""),[S,L]=se.useState(""),[Q,ne]=se.useState(""),[ie,ge]=se.useState(null),[Ee,xe]=se.useState(!1),[_e,Ue]=se.useState(null),[Ae,C]=se.useState(null),[A,R]=se.useState("ROTATION"),[M,D]=se.useState(!1),[j,k]=se.useState(""),[it,vt]=se.useState(!1),[Y,oe]=se.useState(0),[we,Ie]=se.useState(!1),Be=xt.getRoomId(),P=Qg()+(Be?`?room=${Be}`:"");se.useEffect(()=>{(async()=>{const ae=await Mn();if(ae){i(ae);const Me=await Ze();ge(Me);const St=Me.participants.find(Yt=>Yt.id===ae.id);if(St)e(St),Be&&qi(ae.id).catch(console.error);else if(Be){console.log(`[Participant] Auto-joining session ${Be} for profile ${ae.id}`);const Yt=await qi(ae.id);e(Yt)}}else{const Me=await Ze();ge(Me)}})()},[Be]);const $=async()=>{const te=await Ze();ge(te);const ae=await Mn();if(i(ae),!ae)e(null);else{const Me=te.participants.find(St=>St.id===ae.id);Me&&e(Me)}};se.useEffect(()=>(window.addEventListener("kstar_sync",$),window.addEventListener("storage",$),()=>{window.removeEventListener("kstar_sync",$),window.removeEventListener("storage",$)}),[]);const ue=async te=>{te.preventDefault(),m("");try{if(o){const ae=await MD(g,S);if(ae.success&&ae.profile){const Me=await qi(ae.profile.id);e(Me),i(ae.profile)}else m(ae.error||"Authorization failed.")}else{if(S!==Q){m("PASSWORDS_DO_NOT_MATCH");return}const ae=await vd({name:g,email:x||void 0,password:S||void 0},!0);if(ae.success&&ae.profile){const Me=await qi(ae.profile.id);e(Me),i(ae.profile)}else m(ae.error||"Initialization failed.")}}catch(ae){m(ae.message||"An unexpected error occurred.")}},he=async te=>{r&&(await Va(r.id,te),await $())},Ce=async te=>{r&&(_e?(await xd(_e.id,{songName:te.songName,artist:te.artist,youtubeUrl:te.youtubeUrl,type:te.type,message:te.message}),Ue(null)):(await Bi({participantId:r.id,participantName:r.name,songName:te.songName,artist:te.artist,youtubeUrl:te.youtubeUrl,type:te.type,message:te.message}),xe(!1),r.status!==Vt.READY&&await Va(r.id,Vt.READY)),C(null),await $())},je=()=>{xe(!1),Ue(null),C(null)};if(!r)return h.jsxs("div",{className:"max-w-2xl mx-auto p-8 flex flex-col items-center justify-center min-h-[90vh] text-center animate-in fade-in duration-1000 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-[#10002B] to-black -z-10"}),h.jsxs("div",{className:"w-48 h-48 flex items-center justify-center mb-12 relative group",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)] blur-[60px] opacity-40 group-hover:opacity-60 transition-opacity"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 relative z-10 bg-black shadow-2xl",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_40px_rgba(255,0,127,0.5)] w-full h-full",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"})})})]}),h.jsx("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none",children:"SINGMODE"}),h.jsx("p",{className:"text-[var(--neon-cyan)] font-righteous mb-16 uppercase tracking-[0.6em] text-lg font-black neon-glow-cyan",children:"AUTHORIZED_ACCESS_REQUIRED"}),h.jsxs("form",{onSubmit:ue,className:"w-full space-y-8 bg-[#050510] p-10 md:p-14 rounded-[4rem] border-4 border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)]"}),u&&h.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-500 text-base py-4 px-6 rounded-2xl font-black uppercase tracking-widest animate-pulse font-righteous",children:u}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"USER"}),h.jsx("input",{type:"text",required:!0,value:g,onChange:te=>y(te.target.value),placeholder:"Stage Name",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-2xl uppercase tracking-wider placeholder:text-slate-600 font-righteous"})]}),!o&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"EMAIL (OPTIONAL)"}),h.jsx("input",{type:"email",value:x,onChange:te=>w(te.target.value),placeholder:"myname@emailserver.com",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all shadow-inner text-xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"PASSWORD"}),h.jsx("input",{type:"password",required:!o,value:S,onChange:te=>L(te.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),!o&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"CONFIRM_PASS"}),h.jsx("input",{type:"password",required:!0,value:Q,onChange:te=>ne(te.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsx("button",{type:"submit",className:"w-full py-6 mt-6 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-2xl font-black text-3xl shadow-[0_0_40px_rgba(255,0,127,0.3)] transition-all uppercase tracking-[0.2em] font-bungee hover:scale-[1.02] active:scale-95",children:o?"START AS GUEST":"SIGN IN"}),h.jsx("button",{type:"button",onClick:()=>{c(!o),m("")},className:"text-slate-600 hover:text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.3em] pt-6 block mx-auto transition-colors font-righteous border-b-2 border-transparent hover:border-[var(--neon-cyan)] pb-1",children:o?"NEW USER":"BACK TO START"})]})]});if(!ie)return null;const qe=ie.requests.filter(te=>te.participantId===r.id);return h.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-10 relative",children:[h.jsxs("header",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-2xl group",children:[h.jsx("div",{className:"absolute inset-0 bg-[#0a0a0a] rounded-[2.9rem]"}),h.jsx("div",{className:"absolute top-0 inset-x-0 h-32 bg-[var(--neon-purple)]/10 blur-[50px]"}),h.jsxs("div",{className:"relative p-8 flex flex-col items-center text-center",children:[h.jsx("div",{className:"absolute top-6 right-6 z-20"}),h.jsxs("div",{className:"w-24 h-24 p-1 rounded-full border-2 border-white/10 mb-6 relative",children:[h.jsx("div",{className:"absolute inset-0 rounded-full bg-[var(--neon-pink)]/20 blur-xl"}),h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full object-cover relative z-10"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 bg-black rounded-full flex items-center justify-center border-2 border-black z-20",children:h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-pulse shadow-[0_0_10px_rgba(0,255,157,0.8)]"})})]}),h.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight uppercase leading-none font-bungee mb-2",children:r.name}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("button",{onClick:async()=>{confirm("Are you sure you want to sign out?")&&(await Gd(),await $())},className:"flex items-center gap-2 px-4 py-2 bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl transition-all font-black uppercase text-[10px] tracking-widest font-righteous border border-rose-500/20 hover:border-transparent",children:[h.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"SIGN OUT"]})}),h.jsx("div",{className:"flex flex-col items-center gap-4 w-full max-w-xs mx-auto mt-8",children:h.jsxs("div",{className:"bg-black/40 border border-white/5 rounded-2xl p-4 w-full group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-xs font-black text-slate-600 uppercase tracking-widest font-righteous",children:"VOCAL_SIGNATURE"}),h.jsx("span",{className:"text-base font-bold text-[var(--neon-cyan)] uppercase font-righteous tracking-wider",children:(t==null?void 0:t.vocalRange)||"UNKNOWN"})]}),it?h.jsxs("div",{className:"space-y-2 py-1",children:[h.jsx("div",{className:"h-1 bg-white/5 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-[var(--neon-cyan)] animate-pulse shadow-[0_0_10px_var(--neon-cyan)]",style:{width:`${Y}%`}})}),h.jsx("div",{className:"text-xs text-[var(--neon-cyan)] font-black animate-pulse font-righteous text-center",children:"ANALYZING_PITCH_WAVETABLE..."})]}):h.jsx("button",{onClick:async()=>{vt(!0);let te=0;const ae=setInterval(()=>{te+=5,oe(te),te>=100&&(clearInterval(ae),setTimeout(async()=>{const Me=["Soprano","Alto","Tenor","Baritone","Bass"],St=Me[Math.floor(Math.random()*Me.length)];t&&await m_(t.id,St),vt(!1),oe(0),await $()},500))},100)},className:"w-full text-center py-2 text-xs font-black uppercase tracking-[0.2em] text-[var(--neon-cyan)] hover:text-white transition-colors font-righteous",children:"[ TAP_TO_CALIBRATE_VOICE ]"})]})})]})]}),ie.currentRound&&ie.currentRound.length>0&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-top-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4 px-4",children:[h.jsx("div",{className:"w-2 h-2 bg-[var(--neon-green)] rounded-full animate-blink"}),h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-base font-righteous",children:"LIVE LINEUP"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:ie.currentRound.map((te,ae)=>h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${ae===0?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"w-14 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:[h.jsx("span",{className:"text-[9px] text-slate-500 font-mono uppercase tracking-widest hidden sm:block",children:"SEQ_ID"}),h.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${ae===0?"text-[var(--neon-green)]":"text-slate-400"}`,children:String(te.requestNumber).padStart(3,"0")})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-2xl sm:text-3xl font-black uppercase truncate font-righteous tracking-tight ${ae===0?"text-white":"text-slate-300"}`,children:te.songName}),h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-sm sm:text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider truncate max-w-[150px]",children:te.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg hidden sm:inline",children:"/"}),h.jsxs("span",{className:"text-sm sm:text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider truncate max-w-[150px]",children:["@",te.participantName]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[ae===0&&h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] shrink-0",children:"LIVE"}),ae===0&&h.jsx(b_,{url:te.youtubeUrl})]})]},te.id))})]}),h.jsx("div",{className:"grid grid-cols-5 gap-2 bg-[#0a0a0a] p-2 rounded-2xl border border-white/5 shadow-inner",children:["ROTATION","REQUESTS","FAVORITES","HISTORY","VOCALS"].map(te=>h.jsxs("button",{onClick:()=>R(te),className:`py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all font-righteous flex flex-col items-center justify-center gap-1.5 ${A===te?"bg-[#151520] text-white shadow-[0_0_20px_rgba(255,255,255,0.05)] border border-white/10":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:[h.jsx("span",{className:`text-2xl mb-0.5 ${A===te?"text-[var(--neon-pink)]":"grayscale opacity-50"}`,children:te==="ROTATION"?"":te==="REQUESTS"?"":te==="FAVORITES"?"":te==="HISTORY"?"":""}),te==="ROTATION"?"LIVE":te==="REQUESTS"?"MY_SET":te==="FAVORITES"?"FAVS":te==="HISTORY"?"LOG":"VOX"]},te))}),h.jsx("button",{onClick:()=>{C(null),xe(!0)},className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING NOW"}),h.jsxs("div",{className:"flex gap-4 pt-2",children:[h.jsx("button",{onClick:()=>he(Vt.READY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Vt.READY?"bg-[#051005] border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.2)] text-[var(--neon-green)]":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"READY"})}),h.jsx("button",{onClick:()=>he(Vt.STANDBY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Vt.STANDBY?"bg-[#150505] border-rose-500 shadow-[0_0_30px_rgba(244,63,94,0.2)] text-rose-500":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"NOT YET"})})]}),(Ee||_e)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-50 overflow-y-auto backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsx("div",{className:"w-full max-w-lg space-y-6",children:h.jsx(zT,{title:_e?"Remix Request":"New Transmission",submitLabel:_e?"Save Remix":"Transmit",initialSongName:(_e==null?void 0:_e.songName)||(Ae==null?void 0:Ae.songName)||"",initialArtist:(_e==null?void 0:_e.artist)||(Ae==null?void 0:Ae.artist)||"",initialYoutubeUrl:(_e==null?void 0:_e.youtubeUrl)||(Ae==null?void 0:Ae.youtubeUrl)||"",initialType:(_e==null?void 0:_e.type)||(Ae==null?void 0:Ae.type)||gt.SINGING,onSubmit:Ce,onCancel:je,participants:ie.participants,currentUserId:r.id},(_e==null?void 0:_e.id)||"new-request")})}),h.jsxs("main",{className:"min-h-[300px] pb-32",children:[A==="ROTATION"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-sm px-4 font-righteous opacity-80",children:"UPCOMING LINEUP"}),h.jsx("div",{className:"space-y-4",children:(()=>{ie.requests.filter(He=>He.status===Ge.PENDING&&!He.isInRound);const te=ie.requests.filter(He=>He.status===Ge.APPROVED&&He.type===gt.SINGING&&!He.isInRound),ae=ie.participants.filter(He=>te.some(pn=>pn.participantId===He.id)).sort((He,pn)=>(pn.joinedAt||0)-(He.joinedAt||0)),Me={};te.forEach(He=>{Me[He.participantId]||(Me[He.participantId]=[]),Me[He.participantId].push(He)}),Object.keys(Me).forEach(He=>{Me[He].sort((pn,pr)=>pn.createdAt-pr.createdAt)});const St=[];let Yt=0,fn=!0;for(;fn;)fn=!1,ae.forEach(He=>{Me[He.id]&&Me[He.id][Yt]&&(St.push(Me[He.id][Yt]),fn=!0)}),Yt++;return St.length===0?h.jsx("div",{className:"text-center py-16 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"SILENCE_DETECTED"})}):St.map((He,pn)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-6 rounded-[2rem] flex justify-between items-center group hover:border-[var(--neon-blue)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-blue)] transition-colors",children:He.songName}),h.jsxs("div",{className:"text-base text-[var(--neon-cyan)] uppercase tracking-[0.2em] flex items-center gap-2 font-righteous",children:[He.artist," ",h.jsx("span",{className:"text-white/20",children:"|"})," ",h.jsx("span",{className:"text-slate-400",children:He.participantName})]})]}),h.jsx("div",{className:"shrink-0 w-12 h-12 rounded-full border border-[var(--neon-blue)]/50 bg-[var(--neon-blue)]/10 flex items-center justify-center text-[var(--neon-blue)] text-xl font-black font-bungee shadow-[0_0_15px_rgba(5,217,232,0.2)]",children:pn+1})]},He.id))})()})]}),A==="REQUESTS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[qe.map(te=>h.jsx("div",{className:"relative group",children:h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 p-6 rounded-[2rem] hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsxs("div",{className:"font-bold text-white tracking-tight uppercase truncate font-bungee text-3xl group-hover:text-[var(--neon-pink)] transition-colors",children:[h.jsxs("span",{className:"text-slate-500 mr-2 text-[11px] font-mono tracking-widest",children:["#",te.requestNumber]}),te.songName]}),h.jsx(b_,{url:te.youtubeUrl})]}),h.jsx("div",{className:"text-base text-slate-400 font-bold uppercase tracking-[0.2em] truncate font-righteous",children:te.artist})]}),h.jsx("div",{className:`shrink-0 px-3 py-1 rounded-lg border text-xs font-black uppercase tracking-widest ${te.status===Ge.APPROVED?te.isInRound?"bg-[var(--neon-green)] border-[var(--neon-green)] text-black animate-pulse shadow-[0_0_15px_var(--neon-green)]":"bg-[var(--neon-cyan)]/10 border-[var(--neon-cyan)] text-[var(--neon-cyan)]":"border-white/10 text-slate-600"}`,children:te.status===Ge.APPROVED?te.isInRound?"LIVE":"QUEUED":"PENDING"})]}),(te.status===Ge.PENDING||te.status===Ge.APPROVED)&&h.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/5",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:async()=>{await zm(r.id,te.id,"up"),await $()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Up",children:""}),h.jsx("button",{onClick:async()=>{await zm(r.id,te.id,"down"),await $()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Down",children:""})]}),h.jsx("button",{onClick:()=>Ue(te),className:"flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white",children:"EDIT"}),h.jsx("button",{onClick:async()=>{await Pa(te.id),await $()},className:"flex-1 py-3 bg-rose-500/10 hover:bg-rose-500/20 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-rose-500",children:"CANCEL"})]})]})},te.id)),qe.length===0&&h.jsx("div",{className:"text-center py-20 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-base font-black uppercase tracking-[0.5em] font-righteous text-slate-700",children:"NO_DATA_STREAM"})})]}),A==="FAVORITES"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"SEARCH ARCHIVE...",value:j,onChange:te=>k(te.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-[2rem] py-5 px-6 pl-14 text-xl font-bold uppercase tracking-wider text-white focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous placeholder:text-slate-600 shadow-inner"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-2xl text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors",children:""})]}),h.jsx("div",{className:"grid gap-3",children:(()=>{const te=[...t.favorites.map(ae=>({...ae,isFavorite:!0})),...((ie==null?void 0:ie.verifiedSongbook)||[]).filter(ae=>!t.favorites.some(Me=>Me.songName===ae.songName&&Me.artist===ae.artist)).map(ae=>({...ae,isFavorite:!1}))].filter(ae=>!j||ae.songName.toLowerCase().includes(j.toLowerCase())||ae.artist.toLowerCase().includes(j.toLowerCase()));return te.length===0?h.jsx("div",{className:"text-center py-20 opacity-30 font-righteous text-sm uppercase tracking-widest text-slate-500",children:"NO_MATCHES"}):te.map(ae=>h.jsxs("div",{className:"bg-[#101015] p-5 rounded-[2rem] flex justify-between items-center group border-2 border-white/5 hover:border-[var(--neon-yellow)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight group-hover:text-[var(--neon-yellow)] transition-colors",children:ae.songName}),ae.isFavorite&&h.jsx("span",{className:"text-lg text-[var(--neon-yellow)] animate-pulse",children:""})]}),h.jsx("div",{className:"text-sm text-slate-400 font-bold uppercase tracking-[0.2em] font-righteous",children:ae.artist})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{C({...ae}),xe(!0)},className:"bg-[var(--neon-pink)] text-black px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous shadow-[0_0_15px_rgba(255,0,127,0.3)] hover:scale-105 active:scale-95",children:"ADD"}),h.jsx("button",{onClick:async()=>{await MT(ae),await $()},className:`px-2 transition-colors ${ae.isFavorite?"text-rose-500":"text-slate-700 hover:text-[var(--neon-yellow)]"}`,children:ae.isFavorite?"":""})]})]},ae.id))})()})]}),A==="HISTORY"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[t.personalHistory.map((te,ae)=>h.jsxs("div",{className:"bg-[#101015] p-6 rounded-[2rem] flex justify-between items-center border-2 border-white/5 hover:border-[var(--neon-purple)] group transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-purple)] transition-colors",children:te.songName}),h.jsx("div",{className:"text-base text-[var(--neon-cyan)]/70 font-bold uppercase tracking-[0.2em] font-righteous",children:te.artist})]}),h.jsx("button",{onClick:()=>{C({...te,type:gt.SINGING}),xe(!0)},className:"text-slate-600 hover:text-white border border-white/5 hover:border-white px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest transition-all font-righteous",children:"AGAIN"})]},ae)),t.personalHistory.length===0&&h.jsx("div",{className:"text-center py-20 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"NO_HISTORY_LOGS"})})]}),A==="VOCALS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-100 transition-opacity",children:h.jsx("span",{className:"text-5xl",children:""})}),h.jsx("h3",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-[0.3em] font-righteous mb-6",children:"VOCAL_CALIBRATION"}),h.jsxs("div",{className:"flex flex-col items-center gap-6",children:[h.jsxs("div",{className:"w-full bg-black/40 border border-white/10 rounded-2xl p-6 flex flex-col items-center",children:[h.jsx("span",{className:"text-sm font-black text-slate-500 uppercase tracking-widest font-righteous mb-2",children:"DETECTED_RANGE"}),h.jsx("span",{className:"text-4xl font-bold text-white uppercase font-bungee tracking-tight neon-text-glow-cyan",children:(t==null?void 0:t.vocalRange)||"UNKNOWN"})]}),it?h.jsxs("div",{className:"w-full space-y-3 py-2",children:[h.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-[var(--neon-cyan)] animate-pulse shadow-[0_0_10px_var(--neon-cyan)]",style:{width:`${Y}%`}})}),h.jsx("div",{className:"text-xs text-[var(--neon-cyan)] font-black animate-pulse font-righteous text-center tracking-[0.2em]",children:"ANALYZING_PITCH_WAVETABLE..."})]}):h.jsx("button",{onClick:async()=>{vt(!0);let te=0;const ae=setInterval(()=>{te+=5,oe(te),te>=100&&(clearInterval(ae),setTimeout(async()=>{const Me=["Soprano","Alto","Tenor","Baritone","Bass"],St=Me[Math.floor(Math.random()*Me.length)];t&&await m_(t.id,St),vt(!1),oe(0),await $()},500))},100)},className:"px-8 py-4 bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black rounded-xl font-black uppercase tracking-[0.2em] transition-all font-righteous border border-[var(--neon-cyan)]/30 hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"START_CALIBRATION_SEQUENCE"})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 opacity-50 relative overflow-hidden border-dashed",children:[h.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.3em] font-righteous mb-2",children:"MICROPHONE_TOOLS"}),h.jsx("p",{className:"text-slate-600 font-mono text-xs uppercase tracking-wider",children:"HARDWARE_LINK_OFFLINE // COMING_SOON"})]})]})]}),h.jsxs("footer",{className:"fixed bottom-6 left-6 right-6 z-40 flex gap-4",children:[h.jsxs("button",{onClick:()=>Ie(!0),className:"flex-1 bg-[#101015] border-2 border-[var(--neon-green)]/30 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:bg-[var(--neon-green)] hover:text-black hover:border-[var(--neon-green)] transition-all group",children:[h.jsx("span",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous group-hover:text-black text-[var(--neon-green)]",children:"JOIN ACTIVE SERVER"}),h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})]}),h.jsxs("button",{onClick:()=>D(!0),className:"flex-1 bg-[#101015] border-2 border-white/10 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:border-[var(--neon-pink)] transition-all group",children:[h.jsx("span",{className:"text-sm text-[var(--neon-pink)] font-black uppercase tracking-[0.3em] font-righteous",children:"SYSTEM_LINK"}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})})]})]}),we&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-4 md:p-10 overflow-hidden max-h-[90vh] overflow-y-auto",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-green)] via-[var(--neon-cyan)] to-[var(--neon-blue)] animate-gradient-x"}),h.jsx("button",{onClick:()=>Ie(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors z-50",children:""}),h.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white uppercase tracking-tight mb-8 font-bungee neon-glow-green mt-8",children:"ACTIVE_SIGNALS"}),h.jsx(XD,{onJoin:te=>{window.location.href=`/?room=${te}`}})]})}),M&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-sm text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("button",{onClick:()=>D(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors",children:""}),h.jsx("div",{className:"bg-white p-4 rounded-[2rem] inline-block mb-8 shadow-[0_0_40px_rgba(255,255,255,0.1)]",children:h.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(P)}&bgcolor=ffffff`,alt:"Room QR",className:"w-48 h-48"})}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase tracking-tight mb-2 font-bungee neon-glow-white",children:"SYNC_NODE"}),h.jsx("p",{className:"text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.4em] font-righteous opacity-80",children:"SCAN TO INITIALIZE CONNECTION"})]})})]})},WD=({role:r})=>{const[e,t]=se.useState("disconnected"),[i,o]=se.useState(null);if(se.useEffect(()=>{xt.onConnectionStatus=t;const g=setInterval(()=>{o(xt.getRoomId())},1e3);return()=>clearInterval(g)},[]),r==="SELECT")return null;const c=()=>e==="connected"?"bg-[var(--neon-cyan)] shadow-[0_0_10px_var(--neon-cyan)]":e==="connecting"?"bg-[var(--neon-purple)] shadow-[0_0_10px_var(--neon-purple)]":"bg-[var(--neon-pink)] shadow-[0_0_10px_var(--neon-pink)]",u=()=>e==="connected"?"text-[var(--neon-cyan)]":e==="connecting"?"text-[var(--neon-purple)]":"text-[var(--neon-pink)]",m=()=>r==="DJ"?`HUB: ${i||"INITIALIZING..."}`:e==="connected"?"LINKED":e==="connecting"?"SYNCING...":"OFFLINE";return h.jsxs("div",{className:"fixed bottom-6 left-6 z-[60] flex items-center gap-3 bg-[#101015]/90 backdrop-blur-xl px-4 py-3 rounded-2xl border border-white/10 shadow-2xl group hover:border-[var(--neon-pink)] transition-all animate-in slide-in-from-bottom-4 duration-700",children:[h.jsxs("div",{className:"relative flex h-2 w-2",children:[h.jsx("div",{className:`animate-ping absolute inline-flex h-full w-full rounded-full opacity-40 ${c()}`}),h.jsx("div",{className:`relative inline-flex rounded-full h-2 w-2 ${c()}`})]}),h.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.3em] font-righteous ${u()} drop-shadow-md`,children:m()})]})},Ho=({title:r,icon:e,description:t,items:i})=>h.jsxs("div",{className:"bg-[#101015] border border-white/5 p-10 rounded-[3.5rem] hover:border-[var(--neon-pink)] transition-all backdrop-blur-xl group relative overflow-hidden shadow-2xl",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[var(--neon-pink)]/5 blur-3xl rounded-full -mr-16 -mt-16 group-hover:bg-[var(--neon-pink)]/10 transition-colors"}),h.jsx("div",{className:"w-20 h-20 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-4xl mb-8 group-hover:scale-110 group-hover:border-[var(--neon-pink)] group-hover:text-white transition-all shadow-2xl relative z-10",children:e}),h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase mb-4 tracking-tight group-hover:text-[var(--neon-pink)] transition-colors relative z-10 leading-none",children:r}),h.jsx("p",{className:"text-[var(--neon-cyan)]/70 mb-8 font-bold uppercase text-[10px] tracking-[0.2em] font-righteous leading-relaxed relative z-10 transition-opacity",children:t}),h.jsx("ul",{className:"space-y-4 relative z-10",children:i.map((o,c)=>h.jsxs("li",{className:"flex items-start gap-3 text-[11px] text-slate-500 font-bold uppercase tracking-widest font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:[h.jsx("span",{className:"text-[var(--neon-cyan)] font-bold",children:""}),o]},c))})]}),ZD=({onBack:r,onAdminLogin:e})=>{const t=()=>{prompt("ENTER_ENCRYPTION_KEY:")==="Organized"?e():alert("PROTOCOL_DENIED: UNAUTHORIZED_ACCESS")};return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-slate-200 p-6 md:p-16 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsx("div",{className:"absolute -top-[500px] -right-[500px] w-[1000px] h-[1000px] bg-[var(--neon-pink)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute -bottom-[500px] -left-[500px] w-[1000px] h-[1000px] bg-[var(--neon-cyan)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-5 pointer-events-none"}),h.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-24 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsx("div",{onClick:r,className:"cursor-pointer hover:scale-105 transition-transform",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-10 h-10 rounded-full border border-[var(--neon-pink)]"}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest",children:"SINGMODE"})]})}),h.jsx("button",{onClick:r,className:"px-8 py-4 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-slate-400 hover:text-white rounded-2xl font-bold text-[9px] uppercase tracking-widest font-righteous transition-all",children:"RETURN TO HUB"})]}),h.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-32 animate-in fade-in zoom-in duration-700 delay-100",children:[h.jsxs("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-8 tracking-tight uppercase leading-none neon-text-glow-purple",children:["The ultimate ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:"karaoke"})," os"]}),h.jsx("p",{className:"text-[10px] md:text-xs text-[var(--neon-cyan)]/80 font-bold uppercase tracking-[0.4em] font-righteous leading-relaxed max-w-2xl mx-auto border-y border-[var(--neon-cyan)]/20 py-4",children:"SingMode transforms any arena into a high-fidelity visual theater. Connect instantly, dominate the queue, and emit your signal."})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-32 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200",children:[h.jsx(Ho,{title:"DJ Console",icon:"",description:"The command center for your sessions. Maintain signal flow.",items:["Real-time Queue Logic","Drag & Drop Sequencer","Instant Signal Auth","Master Output Control"]}),h.jsx(Ho,{title:"Singer Web",icon:"",description:"A personal terminal for every guest. Eliminate analog friction.",items:["Identity Transmission","Smart Vector Search","High-Speed Requests","Live Sync Lyrics"]}),h.jsx(Ho,{title:"Theater Box",icon:"",description:"A stunning visual matrix for the main screen. Pure aesthetics.",items:["Ultra-HD Playback","Generative Backgrounds","Active HUD Overlays","QR Signal Entrance"]}),h.jsx(Ho,{title:"Hybrid AI",icon:"",description:"Gemini integration enhances the arena with predictive logic.",items:["Vibe-Matched Vectors","Dynamic Visual Synthesis","Automated Interstitials","Identity Verification"]}),h.jsx(Ho,{title:"Sync Matrix",icon:"",description:"Real-time P2P technology keeps the cluster in perfect sync.",items:["Zero-Latency State","Decentralized Design","Instant Node Creation","Omni-Device Support"]}),h.jsx(Ho,{title:"Prime Suite",icon:"",description:"Unlock premium protocols for venues and power units.",items:["Broadcast Protocols","Branding Overlays","Logic Routing","Priority Channel"]}),h.jsxs("div",{className:"md:col-span-2 lg:col-span-1 border-2 border-dashed border-white/10 rounded-[3.5rem] flex flex-col items-center justify-center p-10 group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("p",{className:"text-[10px] text-slate-700 font-black uppercase tracking-[0.4em] mb-6 font-righteous group-hover:text-[var(--neon-cyan)]",children:"MANAGEMENT_INTERFACE"}),h.jsx("button",{onClick:t,className:"p-6 bg-black border border-white/5 rounded-2xl text-[10px] font-black uppercase tracking-widest font-righteous text-white/40 hover:text-white hover:border-white transition-all shadow-xl",children:" AUTHORIZED_ACCESS"})]})]}),h.jsx("div",{className:"text-center animate-in fade-in duration-700 delay-500 pb-32",children:h.jsx("button",{onClick:r,className:"px-16 py-8 bg-[var(--neon-cyan)] hover:bg-white text-black rounded-[3rem] font-bold text-2xl uppercase tracking-widest font-righteous shadow-[0_0_50px_rgba(34,211,238,0.4)] hover:scale-105 transition-all",children:"INITIATE SESSION"})})]})]})},ej=({onBack:r})=>{const[e,t]=se.useState(null),[i,o]=se.useState(""),[c,u]=se.useState(!1),[m,g]=se.useState({primary:"#ff007f",secondary:"#05d9e8",accent:"#feff3f"});se.useEffect(()=>{(async()=>{const w=await Ze();t(w),w.brandIdentity&&(o(w.brandIdentity.venueName),u(w.brandIdentity.isBusinessAccount)),w.customTheme&&g({primary:w.customTheme.primaryNeon,secondary:w.customTheme.secondaryNeon,accent:w.customTheme.accentNeon})})()},[]);const y=async()=>{var w;if(!e)return;const x={...e};x.brandIdentity={venueName:i,isBusinessAccount:c,logoUrl:(w=x.brandIdentity)==null?void 0:w.logoUrl},x.customTheme={primaryNeon:m.primary,secondaryNeon:m.secondary,accentNeon:m.accent},await yt(x),document.documentElement.style.setProperty("--neon-pink",m.primary),document.documentElement.style.setProperty("--neon-cyan",m.secondary),document.documentElement.style.setProperty("--neon-yellow",m.accent),alert("Configurations locked in.")};return e?h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white p-6 md:p-16 relative overflow-hidden font-righteous",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[h.jsxs("header",{className:"flex justify-between items-center mb-20 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsxs("div",{onClick:r,className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-12 h-12 rounded-full border-2 border-[var(--neon-pink)] group-hover:scale-110 transition-all"}),h.jsx("h1",{className:"text-3xl font-bungee tracking-tight",children:"ADMIN_PORTAL"})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:r,className:"px-6 py-3 bg-black border border-white/10 hover:border-white text-slate-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all",children:"TERMINATE_ACCESS"}),h.jsxs("button",{onClick:async()=>{confirm("Are you sure you want to sign out?")&&(await Gd(),window.location.reload())},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/30 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all flex items-center gap-2",children:[h.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"SIGN_OUT"]})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-cyan)] mb-2 uppercase",children:"Venue Settings"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"BROADCAST_IDENTITY_OVERLAY"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] text-slate-500 uppercase tracking-widest mb-2 ml-4",children:"Venue Display Name"}),h.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:"Enter Venue Name",className:"w-full bg-black/60 border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold outline-none focus:border-[var(--neon-cyan)] transition-all uppercase"})]}),h.jsxs("div",{className:"flex items-center justify-between p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1",children:"Business Account"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold",children:"Unlocks Revenue Stream Matrix"})]}),h.jsx("button",{onClick:()=>u(!c),className:`w-14 h-8 rounded-full transition-all relative ${c?"bg-[var(--neon-cyan)]":"bg-slate-800"}`,children:h.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white transition-all ${c?"right-1":"left-1"}`})})]})]})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-pink)] mb-2 uppercase",children:"Theme Matrix"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"VISUAL_ENGINE_STYLING"})]}),h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Primary Neon"}),h.jsx("input",{type:"color",value:m.primary,onChange:x=>g({...m,primary:x.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Secondary Neon"}),h.jsx("input",{type:"color",value:m.secondary,onChange:x=>g({...m,secondary:x.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Accent Neon"}),h.jsx("input",{type:"color",value:m.accent,onChange:x=>g({...m,accent:x.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]})]})})]})]}),h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsx("button",{onClick:y,className:"px-16 py-6 bg-white text-black rounded-[2rem] font-bold text-xl uppercase tracking-widest font-bungee hover:bg-[var(--neon-cyan)] transition-all shadow-2xl hover:scale-105 active:scale-95",children:"WRITE_TO_EPROM (SAVE)"})})]})]}):null},tj=()=>{const[r,e]=se.useState("SELECT"),[t,i]=se.useState(!0),[o,c]=se.useState(null),[u,m]=se.useState(!1),[g,y]=se.useState(!1),[x,w]=se.useState("");se.useEffect(()=>{(async()=>{var Ae;const Ee=new URLSearchParams(window.location.search),xe=(Ae=Ee.get("view"))==null?void 0:Ae.toUpperCase(),_e=Ee.get("room");_e&&m(!0);try{xe==="DJ"?(e("DJ"),await sm("DJ",_e||void 0)):xe==="PARTICIPANT"||_e?(e("PARTICIPANT"),await sm("PARTICIPANT",_e||void 0)):e("SELECT")}catch(C){console.error("[App] Init Error:",C),c(C.message),e("SELECT")}const Ue=await Ze();Ue.customTheme&&(document.documentElement.style.setProperty("--neon-pink",Ue.customTheme.primaryNeon),document.documentElement.style.setProperty("--neon-cyan",Ue.customTheme.secondaryNeon),document.documentElement.style.setProperty("--neon-yellow",Ue.customTheme.accentNeon)),await GD(),i(!1)})()},[]);const S=async ge=>{i(!0),c(null);try{e(ge),(ge==="DJ"||ge==="PARTICIPANT")&&await sm(ge)}catch(Ee){c(Ee.message),e("SELECT")}finally{i(!1)}},L=()=>{x.trim()&&(BT(x.trim()),y(!1),w(""))},Q=Qg(),ne=xt.getRoomId(),ie=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(Q+(ne?`?room=${ne}`:""))}&bgcolor=ffffff`;if(t)return h.jsxs("div",{className:"min-h-screen bg-[#050510] flex flex-col items-center justify-center space-y-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black"}),h.jsxs("div",{className:"w-24 h-24 relative",children:[h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-pink)]/30 rounded-full animate-ping"}),h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-cyan)]/30 rounded-full animate-ping delay-75"}),h.jsx("div",{className:"relative z-10 w-full h-full border-4 border-t-[var(--neon-pink)] border-r-[var(--neon-purple)] border-b-[var(--neon-cyan)] border-l-[var(--neon-yellow)] rounded-full animate-spin"})]}),h.jsx("h2",{className:"text-2xl font-black font-bungee text-white uppercase tracking-widest animate-pulse z-10",children:"INITIALIZING"})]});if(r==="FEATURES")return h.jsx(ZD,{onBack:()=>e("SELECT"),onAdminLogin:()=>e("ADMIN")});if(r==="ADMIN")return h.jsx(ej,{onBack:()=>e("SELECT")});if(r==="SELECT"){const ge=HT(),Ee=Q.includes("localhost")||Q.includes("127.0.0.1");return h.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#050510] relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black -z-10"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-10"}),h.jsxs("div",{className:"max-w-7xl w-full z-10",children:[h.jsxs("div",{className:"text-center mb-20 animate-in fade-in slide-in-from-top-4 duration-1000",children:[h.jsxs("div",{className:"flex justify-center mb-10 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)]/20 blur-[100px] rounded-full"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 bg-black shadow-2xl relative z-10",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_50px_rgba(255,0,127,0.5)] w-48 h-48",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover"})})})]}),h.jsx("h1",{className:"text-6xl md:text-9xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none drop-shadow-2xl",children:"SINGMODE"}),h.jsx("p",{className:"text-[var(--neon-yellow)] text-xl md:text-2xl font-bold tracking-widest uppercase neon-glow-yellow font-righteous",children:"KARAOKE_LOUNGE_SYSTEM"})]}),o&&h.jsxs("div",{className:"mb-12 p-10 bg-[#150005] border-4 border-rose-500 rounded-[3rem] text-center animate-in zoom-in duration-500 max-w-3xl mx-auto shadow-[0_0_60px_rgba(244,63,94,0.4)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-rose-500 animate-pulse"}),h.jsx("div",{className:"text-6xl mb-6",children:""}),h.jsx("h3",{className:"text-rose-500 font-bold uppercase tracking-widest text-3xl mb-4 font-bungee",children:"SYSTEM_CONFLICT"}),h.jsx("p",{className:"text-white text-xl font-bold leading-relaxed font-righteous",children:o}),h.jsx("p",{className:"text-rose-500/50 text-xs mt-8 uppercase font-bold tracking-widest font-righteous",children:"SINGLE_DJ_PROTOCOL_ACTIVE"})]}),h.jsx("div",{className:"flex justify-end mb-4",children:h.jsxs("button",{onClick:()=>e("ADMIN"),className:"px-6 py-2 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-[var(--neon-purple)] rounded-xl text-[10px] font-bold text-slate-400 hover:text-[var(--neon-purple)] uppercase tracking-widest transition-all font-righteous flex items-center gap-2 group",children:[h.jsx("span",{className:"w-2 h-2 bg-[var(--neon-purple)] rounded-full group-hover:animate-pulse"}),"ACCESS_ADMIN_PORTAL"]})}),h.jsxs("div",{className:`grid gap-8 ${u?"grid-cols-1 max-w-2xl mx-auto":"md:grid-cols-2"}`,children:[!u&&h.jsxs("button",{onClick:()=>S("DJ"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-pink)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(255,0,127,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-pink)]/0 to-[var(--neon-pink)]/5 group-hover:to-[var(--neon-pink)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-pink)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-pink)] transition-colors",children:"DJ_CONSOLE"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-cyan)] opacity-90 leading-relaxed",children:"COORDINATE_ROTATION. APPROVE_THREADS. COMMAND_ATMOSPHERE."})]})]}),h.jsxs("button",{onClick:()=>S("PARTICIPANT"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-cyan)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(0,229,255,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 to-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-cyan)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-cyan)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGER_UI"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-yellow)] opacity-90 leading-relaxed",children:"REQUEST_TRACKS. FAVORITE_VIBES. ACCESS_SONGBOOK."})]})]})]}),h.jsxs("div",{className:"mt-16 p-10 bg-[#080808] border-2 border-white/5 rounded-[3rem] flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-green)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),h.jsx("div",{className:"bg-white p-4 rounded-3xl shrink-0 shadow-[0_0_40px_rgba(0,255,157,0.2)] border-4 border-white/10 group-hover:scale-105 transition-transform",children:h.jsx("img",{src:ie,alt:"Join QR Code",width:"140",height:"140",className:"block"})}),h.jsxs("div",{className:"text-center md:text-left flex-1 relative z-10",children:[h.jsx("strong",{className:"text-[var(--neon-green)] block mb-3 uppercase tracking-[0.3em] text-xs font-black font-righteous",children:"SCAN TO JOIN"}),h.jsx("div",{className:"text-white text-xl font-mono break-all mb-4 bg-black/50 px-4 py-2 rounded-lg inline-block border border-white/5",children:Q}),Ee&&h.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl",children:[h.jsx("p",{className:"text-amber-500 text-[10px] font-black uppercase tracking-widest mb-2 font-righteous",children:" LOCALHOST DETECTED"}),h.jsx("button",{onClick:()=>{y(!0),w(ge||"")},className:"text-[10px] font-black text-white hover:text-[var(--neon-cyan)] uppercase tracking-[0.2em] underline decoration-white/30 hover:decoration-[var(--neon-cyan)] transition-all font-righteous",children:"CONFIGURE NETWORK IP"})]})]})]})]}),g&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-6 z-50 backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-lg bg-[#0a0a0a] border-2 border-white/10 rounded-[3rem] p-10 space-y-8 shadow-[0_0_60px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] to-[var(--neon-blue)]"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight",children:"Network Config"}),h.jsx("p",{className:"text-slate-500 text-[10px] uppercase tracking-widest font-righteous",children:"ESTABLISH REMOTE CONNECTION PROTOCOLS"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-[11px] font-bold text-[var(--neon-cyan)] uppercase tracking-[0.2em] ml-4 font-righteous",children:"Network IP Address"}),h.jsx("input",{type:"text",value:x,onChange:xe=>w(xe.target.value),placeholder:"e.g. 192.168.0.x OR https://....ngrok.io",className:"w-full bg-[#151520] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-sm"}),h.jsxs("p",{className:"text-slate-500 text-[9px] uppercase tracking-widest font-righteous ml-4 opacity-60",children:[h.jsx("span",{className:"text-[var(--neon-yellow)]",children:"PRO TIP:"})," Use ",h.jsx("span",{className:"text-white",children:"ngrok"})," for secure external tunneling."]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-4 bg-black border border-white/10 hover:bg-white/5 text-slate-400 hover:text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all font-righteous",children:"Cancel"}),h.jsx("button",{onClick:L,className:"flex-1 py-4 bg-[var(--neon-cyan)] text-black rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all font-righteous hover:scale-105",children:"Save Configuration"})]})]})})]})}return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white selection:bg-[var(--neon-pink)] selection:text-white",children:[h.jsx(WD,{role:r}),h.jsx("nav",{className:"fixed top-0 inset-x-0 z-[100] backdrop-blur-xl bg-black/80 border-b border-white/5 transition-all duration-300",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>e("SELECT"),className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[var(--neon-pink)] p-0.5 group-hover:shadow-[0_0_20px_rgba(255,0,127,0.4)] transition-all",children:h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full"})}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGMODE"})]}),h.jsx("div",{className:"flex items-center gap-6",children:h.jsxs("button",{onClick:()=>{e("SELECT"),c(null)},className:"text-[9px] font-bold uppercase tracking-widest px-5 py-2.5 rounded-xl transition-all font-righteous bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white border border-white/5 hover:border-white/20",children:["EXIT ",r]})})]})}),h.jsx("main",{className:"pb-20",children:r==="DJ"?h.jsx(KD,{onAdminAccess:()=>e("ADMIN")}):h.jsx(JD,{})})]})},GT=document.getElementById("root");if(!GT)throw new Error("Could not find root element to mount to");const nj=jS.createRoot(GT);nj.render(h.jsx(SS.StrictMode,{children:h.jsx(tj,{})}));
