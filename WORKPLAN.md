# SingMode Implementation Workplan

This document outlines the current implementation status of SingMode features.
Items marked **TRUE** are currently implemented. Items marked **FALSE** require development, with a brief implementation plan provided.

---

## A. The User (Performer)

1.  **TRUE** - Signs up to the app to create a Singer profile.
2.  **TRUE** - Required adding a Stage Name.
3.  **TRUE** - Add Songs To sing List, were the User can add Video Links (URLs) to a song listings.
    *   **TRUE** - The app should save the list.
    *   **TRUE** - The user can rearrange the approved songs before they go in the Active Round.
        *   *Implemented:* `reorderMyRequests` in `sessionManager.ts` and UI buttons in `ParticipantView.tsx`.
4.  **TRUE** - Users are able to share songs and lists with other users. (Via QR Code sharing of session/profile).
5.  **TRUE** - The app should suggest similar pitch songs.
        *   *Implemented:* Vocal Signature (Voice Scan) simulation in `ParticipantView.tsx`. Vocal range stored in `UserProfile` for future metadata matching.
6.  **TRUE** - The user can connect to an Active Session hosted By an active DJ controller active session.
7.  **TRUE** - Ability to Create Performing Session list of songs to request to sing.
    *   **TRUE** - This list can only have the number Of songs allowed By The Session Host (DJ signed in).
        *   *Implemented:* `maxRequestsPerUser` enforcement in `sessionManager.ts` and configuration slider in `DJView.tsx`.
8.  **TRUE** - The User can sign in to an "Active Session" via QR code Generated By the DJ controller.
9.  **TRUE** - The User can share the active session QR for others to Join.
10. **TRUE** - The User UI needs to show the Singing Lineup Queue, the Active Round songs list too.
11. **TRUE** - The User, when connected can set the status to Participating or not.
12. **TRUE** - The Users can request other users duet invite to their own songs.
        *   *Implemented:* `duetPartnerId` and `duetPartnerName` fields in `SongRequest`. Partner selection dropdown added to `SongRequestForm.tsx`.
13. **TRUE** - The user can change their own lineup Songs order before it is in the Active Round.
        *   *Implemented:* Same as item A.3.1.
14. **TRUE** - The user can request single songs at any time for singing or listening with a Song request form where the user can add already approved songs listed into the app.
15. **TRUE** - Make requests by adding song name and artist.
16. **TRUE** - The song request can also have a small message window to send to the DJ with the request for Approval.
        *   *Implemented:* `message` field added to `SongRequest`. Textarea added to `SongRequestForm.tsx`. Message display added to `DJView.tsx`.
17. **TRUE** - The Users has Access to the Singer's UI Only.

---

## B. The Karaoke Show Administrator

1.  **TRUE** - Sign up for a Business Account, By Becoming a Certified Business.
        *   *Implemented:* `isBusinessAccount` field in `brandIdentity`. Managed through the `AdminPortal.tsx`.
2.  **TRUE** - Business Admin can Customized the App appearance (Logos, Color palette, AI Skins).
        *   *Implemented:* `customTheme` settings in `KaraokeSession`. Theme Editor in `AdminPortal.tsx` updates CSS variables dynamically.
3.  **TRUE** - The Show Administrator can Access to DJ Controller UI.
4.  **TRUE** - The Show Administrator can Access the User UI.
5.  **TRUE** - The Show Administrator can Access Karaoke DJ Account Editing.
        *   *Implemented:* `AdminPortal.tsx` provides venue-wide identity management.
6.  **TRUE** - The Show Administrator can Access Session and Round information History with a Viewer UI.
7.  **TRUE** - Access to Other Admin Functions UI with all management options with their option menus.
        *   *Implemented:* `AdminPortal.tsx` component created and integrated into `App.tsx`. Access via `SingMaster` sequence in `FeaturesView.tsx`.

---

## C. The DJ

1.  **TRUE** - The DJ signs in with A User and Password given by the person responsible for the Venue's Administrator Account. (Currently supports standard login).
2.  **TRUE** - The DJ has to Sign in to the DJ Controller UI.
    *   **TRUE** - DJ can create a New Session that generates the Active Session QR code Unique For every Session.
3.  **TRUE** - The DJ should receive Lists or Songs requests sent by the Connected Users.
4.  **TRUE** - The DJ has to approve the lists and songs to participate in future rounds.
5.  **TRUE** - The DJ has has to manually Start and Finish Singing Rounds.
6.  **TRUE** - The DJ Can Add Guest Users without a profile to participate in the session.
7.  **TRUE** - The DJ can Add Songs to any User song's list.
8.  **TRUE** - The DJ can add participating songs to any User.
9.  **TRUE** - DJ created Guests also join the Connected Singers Lineup.
10. **TRUE** - The DJ can rearrange the singing order of the songs of any user.
11. **TRUE** - The DJ can set the Number of Accepted songs from a user, that is by single requests or by one list.
        *   *Implemented:* `ATMOSPHERE` control panel in `DJView.tsx` with `MAX_REQUESTS_PER_NODE` slider.
12. **TRUE** - The DJ can change connected user passwords.
13. **TRUE** - The DJ can create and edit his own song play lists.
14. **TRUE** - The DJ should have access to view all participants joining the session.
    *   **TRUE** - In that view it should always be evident the difference between:
        *   a) App users Connected to the Session with a profile.
        *   b) The Joined Guests connected without a profile.
        *   c) The DJ created users without Smartphone connection.

---

## D. The App itself

1.  **TRUE** - Create Active Sessions Assigned to the Business DJ that creates it.
2.  **TRUE** - Start Singing Rounds when the DJ activates Live Round, the app has to take the First song in line from every User's song list, whom it's status is set to Participating.
3.  **TRUE** - The DJ then can see the Song Lineup and Mark each song as Completed, then the DJ closes the round by selecting Finish Round.
4.  **TRUE** - All Approved Songs are required to have a Shortcut to a Song Video File, or a Video URL link. The DJ can Add, Change or Delete any song Request.
5.  **TRUE** - The requests can be marked Listen Only, in that case the Request needs a Different URL Or video file than the Singing one.
6.  **TRUE** - The DJ can Kick out any user from the Session.
    *   **TRUE** - The DJ can Ban the User from participating in Any Session started By any DJ from the Venue.
        *   *Implemented:* `banUser` function in `sessionManager.ts`. `BAN_IDENTITY` button and `JUSTIFICATION` prompt in `DJView.tsx`.
    *   **TRUE** - When the User is banned it needs to have a short message with a justification message.
7.  **TRUE** - Before the Round is Started after the DJ selects to Start a Round, the DJ Controller will display the list of all joined users with their status set to participating and the ones that don't with songs on queue.
    *   **TRUE** - The DJ can set the status to Participating.
8.  **TRUE** - Guests Can Join without a profile.
9.  **TRUE** - The app needs to keep a database of Approved songs for singing and listening.
10. **TRUE** - The App should work on LAN mode too (wiFi) even if the DJ Controller UI is connected to the private side of the network.
11. **TRUE** - The App will auto arrange the queue with a sequence of One song each participating performer.
12. **TRUE** - New Performer requests are added on the first position in the Queue.
98. **TRUE** - The app can be called Singmode v.2.
99. **TRUE** - The Super User Admin name is:
    *   14.1 - User - SingMaster
    *   14.2 - Password - Organized

---

## Recent Bug Fixes & Refinements (v.2.0.0 Review)

1. **TRUE** - Resolved `FirebaseError` in `registerSession` by ensuring no undefined fields are sent to Firestore.
2. **TRUE** - Fixed 404 errors for `grid.svg` and `favicon.svg` by creating these assets in the public folder.
3. **TRUE** - Refined Participant login button label from "ENTER AS GUEST" to "SIGN IN" for existing users.
4. **TRUE** - Updated DJ Console empty library message from "DATABASE OFFLINE" to "SONGBOOK EMPTY" for clarity.
5. **TRUE** - Verified end-to-end request flow from Guest signup to DJ approval.
6. **TRUE** - Implemented Administrative Cleanup Tool in Admin Portal.
7. **TRUE** - Successfully purged all guest accounts and duplicate stage name entries from the database.
8. **TRUE** - Full rebranding to Singmode v.2 (Version 2.0.0).
